var C8e=Object.defineProperty;var A8e=(e,t,n)=>t in e?C8e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var k8e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Vc=(e,t,n)=>A8e(e,typeof t!="symbol"?t+"":t,n);var nHt=k8e((dqt,Aee)=>{function R8e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ya=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function I8e(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Q7={exports:{}},jC={},J7={exports:{}},qr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _te;function P8e(){if(_te)return qr;_te=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.iterator;function d(q){return q===null||typeof q!="object"?null:(q=f&&q[f]||q["@@iterator"],typeof q=="function"?q:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function g(q,te,W){this.props=q,this.context=te,this.refs=m,this.updater=W||h}g.prototype.isReactComponent={},g.prototype.setState=function(q,te){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,te,"setState")},g.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function b(){}b.prototype=g.prototype;function y(q,te,W){this.props=q,this.context=te,this.refs=m,this.updater=W||h}var x=y.prototype=new b;x.constructor=y,p(x,g.prototype),x.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,C={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(q,te,W){var ee,oe={},pe=null,ce=null;if(te!=null)for(ee in te.ref!==void 0&&(ce=te.ref),te.key!==void 0&&(pe=""+te.key),te)S.call(te,ee)&&!R.hasOwnProperty(ee)&&(oe[ee]=te[ee]);var he=arguments.length-2;if(he===1)oe.children=W;else if(1<he){for(var Ee=Array(he),Ae=0;Ae<he;Ae++)Ee[Ae]=arguments[Ae+2];oe.children=Ee}if(q&&q.defaultProps)for(ee in he=q.defaultProps,he)oe[ee]===void 0&&(oe[ee]=he[ee]);return{$$typeof:e,type:q,key:pe,ref:ce,props:oe,_owner:C.current}}function O(q,te){return{$$typeof:e,type:q.type,key:te,ref:q.ref,props:q.props,_owner:q._owner}}function M(q){return typeof q=="object"&&q!==null&&q.$$typeof===e}function L(q){var te={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(W){return te[W]})}var H=/\/+/g;function D(q,te){return typeof q=="object"&&q!==null&&q.key!=null?L(""+q.key):te.toString(36)}function B(q,te,W,ee,oe){var pe=typeof q;(pe==="undefined"||pe==="boolean")&&(q=null);var ce=!1;if(q===null)ce=!0;else switch(pe){case"string":case"number":ce=!0;break;case"object":switch(q.$$typeof){case e:case t:ce=!0}}if(ce)return ce=q,oe=oe(ce),q=ee===""?"."+D(ce,0):ee,w(oe)?(W="",q!=null&&(W=q.replace(H,"$&/")+"/"),B(oe,te,W,"",function(Ae){return Ae})):oe!=null&&(M(oe)&&(oe=O(oe,W+(!oe.key||ce&&ce.key===oe.key?"":(""+oe.key).replace(H,"$&/")+"/")+q)),te.push(oe)),1;if(ce=0,ee=ee===""?".":ee+":",w(q))for(var he=0;he<q.length;he++){pe=q[he];var Ee=ee+D(pe,he);ce+=B(pe,te,W,Ee,oe)}else if(Ee=d(q),typeof Ee=="function")for(q=Ee.call(q),he=0;!(pe=q.next()).done;)pe=pe.value,Ee=ee+D(pe,he++),ce+=B(pe,te,W,Ee,oe);else if(pe==="object")throw te=String(q),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return ce}function z(q,te,W){if(q==null)return q;var ee=[],oe=0;return B(q,ee,"","",function(pe){return te.call(W,pe,oe++)}),ee}function G(q){if(q._status===-1){var te=q._result;te=te(),te.then(function(W){(q._status===0||q._status===-1)&&(q._status=1,q._result=W)},function(W){(q._status===0||q._status===-1)&&(q._status=2,q._result=W)}),q._status===-1&&(q._status=0,q._result=te)}if(q._status===1)return q._result.default;throw q._result}var Z={current:null},ne={transition:null},ue={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:ne,ReactCurrentOwner:C};function X(){throw Error("act(...) is not supported in production builds of React.")}return qr.Children={map:z,forEach:function(q,te,W){z(q,function(){te.apply(this,arguments)},W)},count:function(q){var te=0;return z(q,function(){te++}),te},toArray:function(q){return z(q,function(te){return te})||[]},only:function(q){if(!M(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},qr.Component=g,qr.Fragment=n,qr.Profiler=i,qr.PureComponent=y,qr.StrictMode=r,qr.Suspense=u,qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,qr.act=X,qr.cloneElement=function(q,te,W){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var ee=p({},q.props),oe=q.key,pe=q.ref,ce=q._owner;if(te!=null){if(te.ref!==void 0&&(pe=te.ref,ce=C.current),te.key!==void 0&&(oe=""+te.key),q.type&&q.type.defaultProps)var he=q.type.defaultProps;for(Ee in te)S.call(te,Ee)&&!R.hasOwnProperty(Ee)&&(ee[Ee]=te[Ee]===void 0&&he!==void 0?he[Ee]:te[Ee])}var Ee=arguments.length-2;if(Ee===1)ee.children=W;else if(1<Ee){he=Array(Ee);for(var Ae=0;Ae<Ee;Ae++)he[Ae]=arguments[Ae+2];ee.children=he}return{$$typeof:e,type:q.type,key:oe,ref:pe,props:ee,_owner:ce}},qr.createContext=function(q){return q={$$typeof:o,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:s,_context:q},q.Consumer=q},qr.createElement=I,qr.createFactory=function(q){var te=I.bind(null,q);return te.type=q,te},qr.createRef=function(){return{current:null}},qr.forwardRef=function(q){return{$$typeof:a,render:q}},qr.isValidElement=M,qr.lazy=function(q){return{$$typeof:c,_payload:{_status:-1,_result:q},_init:G}},qr.memo=function(q,te){return{$$typeof:l,type:q,compare:te===void 0?null:te}},qr.startTransition=function(q){var te=ne.transition;ne.transition={};try{q()}finally{ne.transition=te}},qr.unstable_act=X,qr.useCallback=function(q,te){return Z.current.useCallback(q,te)},qr.useContext=function(q){return Z.current.useContext(q)},qr.useDebugValue=function(){},qr.useDeferredValue=function(q){return Z.current.useDeferredValue(q)},qr.useEffect=function(q,te){return Z.current.useEffect(q,te)},qr.useId=function(){return Z.current.useId()},qr.useImperativeHandle=function(q,te,W){return Z.current.useImperativeHandle(q,te,W)},qr.useInsertionEffect=function(q,te){return Z.current.useInsertionEffect(q,te)},qr.useLayoutEffect=function(q,te){return Z.current.useLayoutEffect(q,te)},qr.useMemo=function(q,te){return Z.current.useMemo(q,te)},qr.useReducer=function(q,te,W){return Z.current.useReducer(q,te,W)},qr.useRef=function(q){return Z.current.useRef(q)},qr.useState=function(q){return Z.current.useState(q)},qr.useSyncExternalStore=function(q,te,W){return Z.current.useSyncExternalStore(q,te,W)},qr.useTransition=function(){return Z.current.useTransition()},qr.version="18.3.1",qr}var wte;function A1(){return wte||(wte=1,J7.exports=P8e()),J7.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ete;function N8e(){if(Ete)return jC;Ete=1;var e=A1(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,u,l){var c,f={},d=null,h=null;l!==void 0&&(d=""+l),u.key!==void 0&&(d=""+u.key),u.ref!==void 0&&(h=u.ref);for(c in u)r.call(u,c)&&!s.hasOwnProperty(c)&&(f[c]=u[c]);if(a&&a.defaultProps)for(c in u=a.defaultProps,u)f[c]===void 0&&(f[c]=u[c]);return{$$typeof:t,type:a,key:d,ref:h,props:f,_owner:i.current}}return jC.Fragment=n,jC.jsx=o,jC.jsxs=o,jC}var Ste;function D8e(){return Ste||(Ste=1,Q7.exports=N8e()),Q7.exports}var k=D8e(),U=A1();const sr=gc(U),O8e=R8e({__proto__:null,default:sr},[U]);var n6={},Z7={exports:{}},$f={},eF={exports:{}},tF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tte;function M8e(){return Tte||(Tte=1,function(e){function t(ne,ue){var X=ne.length;ne.push(ue);e:for(;0<X;){var q=X-1>>>1,te=ne[q];if(0<i(te,ue))ne[q]=ue,ne[X]=te,X=q;else break e}}function n(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var ue=ne[0],X=ne.pop();if(X!==ue){ne[0]=X;e:for(var q=0,te=ne.length,W=te>>>1;q<W;){var ee=2*(q+1)-1,oe=ne[ee],pe=ee+1,ce=ne[pe];if(0>i(oe,X))pe<te&&0>i(ce,oe)?(ne[q]=ce,ne[pe]=X,q=pe):(ne[q]=oe,ne[ee]=X,q=ee);else if(pe<te&&0>i(ce,X))ne[q]=ce,ne[pe]=X,q=pe;else break e}}return ue}function i(ne,ue){var X=ne.sortIndex-ue.sortIndex;return X!==0?X:ne.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(ne){for(var ue=n(l);ue!==null;){if(ue.callback===null)r(l);else if(ue.startTime<=ne)r(l),ue.sortIndex=ue.expirationTime,t(u,ue);else break;ue=n(l)}}function w(ne){if(m=!1,x(ne),!p)if(n(u)!==null)p=!0,G(S);else{var ue=n(l);ue!==null&&Z(w,ue.startTime-ne)}}function S(ne,ue){p=!1,m&&(m=!1,b(I),I=-1),h=!0;var X=d;try{for(x(ue),f=n(u);f!==null&&(!(f.expirationTime>ue)||ne&&!L());){var q=f.callback;if(typeof q=="function"){f.callback=null,d=f.priorityLevel;var te=q(f.expirationTime<=ue);ue=e.unstable_now(),typeof te=="function"?f.callback=te:f===n(u)&&r(u),x(ue)}else r(u);f=n(u)}if(f!==null)var W=!0;else{var ee=n(l);ee!==null&&Z(w,ee.startTime-ue),W=!1}return W}finally{f=null,d=X,h=!1}}var C=!1,R=null,I=-1,O=5,M=-1;function L(){return!(e.unstable_now()-M<O)}function H(){if(R!==null){var ne=e.unstable_now();M=ne;var ue=!0;try{ue=R(!0,ne)}finally{ue?D():(C=!1,R=null)}}else C=!1}var D;if(typeof y=="function")D=function(){y(H)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,z=B.port2;B.port1.onmessage=H,D=function(){z.postMessage(null)}}else D=function(){g(H,0)};function G(ne){R=ne,C||(C=!0,D())}function Z(ne,ue){I=g(function(){ne(e.unstable_now())},ue)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,G(S))},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(ne){switch(d){case 1:case 2:case 3:var ue=3;break;default:ue=d}var X=d;d=ue;try{return ne()}finally{d=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ne,ue){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var X=d;d=ne;try{return ue()}finally{d=X}},e.unstable_scheduleCallback=function(ne,ue,X){var q=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?q+X:q):X=q,ne){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=X+te,ne={id:c++,callback:ue,priorityLevel:ne,startTime:X,expirationTime:te,sortIndex:-1},X>q?(ne.sortIndex=X,t(l,ne),n(u)===null&&ne===n(l)&&(m?(b(I),I=-1):m=!0,Z(w,X-q))):(ne.sortIndex=te,t(u,ne),p||h||(p=!0,G(S))),ne},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(ne){var ue=d;return function(){var X=d;d=ue;try{return ne.apply(this,arguments)}finally{d=X}}}}(tF)),tF}var Cte;function oq(){return Cte||(Cte=1,eF.exports=M8e()),eF.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ate;function L8e(){if(Ate)return $f;Ate=1;var e=A1(),t=oq();function n(v){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+v,N=1;N<arguments.length;N++)_+="&args[]="+encodeURIComponent(arguments[N]);return"Minified React error #"+v+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(v,_){o(v,_),o(v+"Capture",_)}function o(v,_){for(i[v]=_,v=0;v<_.length;v++)r.add(_[v])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},f={};function d(v){return u.call(f,v)?!0:u.call(c,v)?!1:l.test(v)?f[v]=!0:(c[v]=!0,!1)}function h(v,_,N,j){if(N!==null&&N.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return j?!1:N!==null?!N.acceptsBooleans:(v=v.toLowerCase().slice(0,5),v!=="data-"&&v!=="aria-");default:return!1}}function p(v,_,N,j){if(_===null||typeof _>"u"||h(v,_,N,j))return!0;if(j)return!1;if(N!==null)switch(N.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function m(v,_,N,j,Q,ie,de){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=j,this.attributeNamespace=Q,this.mustUseProperty=N,this.propertyName=v,this.type=_,this.sanitizeURL=ie,this.removeEmptyString=de}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(v){g[v]=new m(v,0,!1,v,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(v){var _=v[0];g[_]=new m(_,1,!1,v[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(v){g[v]=new m(v,2,!1,v.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(v){g[v]=new m(v,2,!1,v,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(v){g[v]=new m(v,3,!1,v.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(v){g[v]=new m(v,3,!0,v,null,!1,!1)}),["capture","download"].forEach(function(v){g[v]=new m(v,4,!1,v,null,!1,!1)}),["cols","rows","size","span"].forEach(function(v){g[v]=new m(v,6,!1,v,null,!1,!1)}),["rowSpan","start"].forEach(function(v){g[v]=new m(v,5,!1,v.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function y(v){return v[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(v){var _=v.replace(b,y);g[_]=new m(_,1,!1,v,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(v){var _=v.replace(b,y);g[_]=new m(_,1,!1,v,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(v){var _=v.replace(b,y);g[_]=new m(_,1,!1,v,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(v){g[v]=new m(v,1,!1,v.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(v){g[v]=new m(v,1,!1,v.toLowerCase(),null,!0,!0)});function x(v,_,N,j){var Q=g.hasOwnProperty(_)?g[_]:null;(Q!==null?Q.type!==0:j||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(p(_,N,Q,j)&&(N=null),j||Q===null?d(_)&&(N===null?v.removeAttribute(_):v.setAttribute(_,""+N)):Q.mustUseProperty?v[Q.propertyName]=N===null?Q.type===3?!1:"":N:(_=Q.attributeName,j=Q.attributeNamespace,N===null?v.removeAttribute(_):(Q=Q.type,N=Q===3||Q===4&&N===!0?"":""+N,j?v.setAttributeNS(j,_,N):v.setAttribute(_,N))))}var w=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),C=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),L=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),ne=Symbol.iterator;function ue(v){return v===null||typeof v!="object"?null:(v=ne&&v[ne]||v["@@iterator"],typeof v=="function"?v:null)}var X=Object.assign,q;function te(v){if(q===void 0)try{throw Error()}catch(N){var _=N.stack.trim().match(/\n( *(at )?)/);q=_&&_[1]||""}return`
`+q+v}var W=!1;function ee(v,_){if(!v||W)return"";W=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(st){var j=st}Reflect.construct(v,[],_)}else{try{_.call()}catch(st){j=st}v.call(_.prototype)}else{try{throw Error()}catch(st){j=st}v()}}catch(st){if(st&&j&&typeof st.stack=="string"){for(var Q=st.stack.split(`
`),ie=j.stack.split(`
`),de=Q.length-1,ke=ie.length-1;1<=de&&0<=ke&&Q[de]!==ie[ke];)ke--;for(;1<=de&&0<=ke;de--,ke--)if(Q[de]!==ie[ke]){if(de!==1||ke!==1)do if(de--,ke--,0>ke||Q[de]!==ie[ke]){var Le=`
`+Q[de].replace(" at new "," at ");return v.displayName&&Le.includes("<anonymous>")&&(Le=Le.replace("<anonymous>",v.displayName)),Le}while(1<=de&&0<=ke);break}}}finally{W=!1,Error.prepareStackTrace=N}return(v=v?v.displayName||v.name:"")?te(v):""}function oe(v){switch(v.tag){case 5:return te(v.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return v=ee(v.type,!1),v;case 11:return v=ee(v.type.render,!1),v;case 1:return v=ee(v.type,!0),v;default:return""}}function pe(v){if(v==null)return null;if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v;switch(v){case R:return"Fragment";case C:return"Portal";case O:return"Profiler";case I:return"StrictMode";case D:return"Suspense";case B:return"SuspenseList"}if(typeof v=="object")switch(v.$$typeof){case L:return(v.displayName||"Context")+".Consumer";case M:return(v._context.displayName||"Context")+".Provider";case H:var _=v.render;return v=v.displayName,v||(v=_.displayName||_.name||"",v=v!==""?"ForwardRef("+v+")":"ForwardRef"),v;case z:return _=v.displayName||null,_!==null?_:pe(v.type)||"Memo";case G:_=v._payload,v=v._init;try{return pe(v(_))}catch{}}return null}function ce(v){var _=v.type;switch(v.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return v=_.render,v=v.displayName||v.name||"",_.displayName||(v!==""?"ForwardRef("+v+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(_);case 8:return _===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function he(v){switch(typeof v){case"boolean":case"number":case"string":case"undefined":return v;case"object":return v;default:return""}}function Ee(v){var _=v.type;return(v=v.nodeName)&&v.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function Ae(v){var _=Ee(v)?"checked":"value",N=Object.getOwnPropertyDescriptor(v.constructor.prototype,_),j=""+v[_];if(!v.hasOwnProperty(_)&&typeof N<"u"&&typeof N.get=="function"&&typeof N.set=="function"){var Q=N.get,ie=N.set;return Object.defineProperty(v,_,{configurable:!0,get:function(){return Q.call(this)},set:function(de){j=""+de,ie.call(this,de)}}),Object.defineProperty(v,_,{enumerable:N.enumerable}),{getValue:function(){return j},setValue:function(de){j=""+de},stopTracking:function(){v._valueTracker=null,delete v[_]}}}}function ge(v){v._valueTracker||(v._valueTracker=Ae(v))}function me(v){if(!v)return!1;var _=v._valueTracker;if(!_)return!0;var N=_.getValue(),j="";return v&&(j=Ee(v)?v.checked?"true":"false":v.value),v=j,v!==N?(_.setValue(v),!0):!1}function Oe(v){if(v=v||(typeof document<"u"?document:void 0),typeof v>"u")return null;try{return v.activeElement||v.body}catch{return v.body}}function Me(v,_){var N=_.checked;return X({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:N??v._wrapperState.initialChecked})}function Ye(v,_){var N=_.defaultValue==null?"":_.defaultValue,j=_.checked!=null?_.checked:_.defaultChecked;N=he(_.value!=null?_.value:N),v._wrapperState={initialChecked:j,initialValue:N,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function lt(v,_){_=_.checked,_!=null&&x(v,"checked",_,!1)}function We(v,_){lt(v,_);var N=he(_.value),j=_.type;if(N!=null)j==="number"?(N===0&&v.value===""||v.value!=N)&&(v.value=""+N):v.value!==""+N&&(v.value=""+N);else if(j==="submit"||j==="reset"){v.removeAttribute("value");return}_.hasOwnProperty("value")?yt(v,_.type,N):_.hasOwnProperty("defaultValue")&&yt(v,_.type,he(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(v.defaultChecked=!!_.defaultChecked)}function nt(v,_,N){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var j=_.type;if(!(j!=="submit"&&j!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+v._wrapperState.initialValue,N||_===v.value||(v.value=_),v.defaultValue=_}N=v.name,N!==""&&(v.name=""),v.defaultChecked=!!v._wrapperState.initialChecked,N!==""&&(v.name=N)}function yt(v,_,N){(_!=="number"||Oe(v.ownerDocument)!==v)&&(N==null?v.defaultValue=""+v._wrapperState.initialValue:v.defaultValue!==""+N&&(v.defaultValue=""+N))}var _t=Array.isArray;function It(v,_,N,j){if(v=v.options,_){_={};for(var Q=0;Q<N.length;Q++)_["$"+N[Q]]=!0;for(N=0;N<v.length;N++)Q=_.hasOwnProperty("$"+v[N].value),v[N].selected!==Q&&(v[N].selected=Q),Q&&j&&(v[N].defaultSelected=!0)}else{for(N=""+he(N),_=null,Q=0;Q<v.length;Q++){if(v[Q].value===N){v[Q].selected=!0,j&&(v[Q].defaultSelected=!0);return}_!==null||v[Q].disabled||(_=v[Q])}_!==null&&(_.selected=!0)}}function Et(v,_){if(_.dangerouslySetInnerHTML!=null)throw Error(n(91));return X({},_,{value:void 0,defaultValue:void 0,children:""+v._wrapperState.initialValue})}function Ke(v,_){var N=_.value;if(N==null){if(N=_.children,_=_.defaultValue,N!=null){if(_!=null)throw Error(n(92));if(_t(N)){if(1<N.length)throw Error(n(93));N=N[0]}_=N}_==null&&(_=""),N=_}v._wrapperState={initialValue:he(N)}}function Lt(v,_){var N=he(_.value),j=he(_.defaultValue);N!=null&&(N=""+N,N!==v.value&&(v.value=N),_.defaultValue==null&&v.defaultValue!==N&&(v.defaultValue=N)),j!=null&&(v.defaultValue=""+j)}function sn(v){var _=v.textContent;_===v._wrapperState.initialValue&&_!==""&&_!==null&&(v.value=_)}function Fe(v){switch(v){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qe(v,_){return v==null||v==="http://www.w3.org/1999/xhtml"?Fe(_):v==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":v}var wt,Vt=function(v){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,N,j,Q){MSApp.execUnsafeLocalFunction(function(){return v(_,N,j,Q)})}:v}(function(v,_){if(v.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in v)v.innerHTML=_;else{for(wt=wt||document.createElement("div"),wt.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=wt.firstChild;v.firstChild;)v.removeChild(v.firstChild);for(;_.firstChild;)v.appendChild(_.firstChild)}});function Wt(v,_){if(_){var N=v.firstChild;if(N&&N===v.lastChild&&N.nodeType===3){N.nodeValue=_;return}}v.textContent=_}var bn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dn=["Webkit","ms","Moz","O"];Object.keys(bn).forEach(function(v){Dn.forEach(function(_){_=_+v.charAt(0).toUpperCase()+v.substring(1),bn[_]=bn[v]})});function Zn(v,_,N){return _==null||typeof _=="boolean"||_===""?"":N||typeof _!="number"||_===0||bn.hasOwnProperty(v)&&bn[v]?(""+_).trim():_+"px"}function wr(v,_){v=v.style;for(var N in _)if(_.hasOwnProperty(N)){var j=N.indexOf("--")===0,Q=Zn(N,_[N],j);N==="float"&&(N="cssFloat"),j?v.setProperty(N,Q):v[N]=Q}}var Hn=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nr(v,_){if(_){if(Hn[v]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(n(137,v));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(n(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(n(61))}if(_.style!=null&&typeof _.style!="object")throw Error(n(62))}}function Ei(v,_){if(v.indexOf("-")===-1)return typeof _.is=="string";switch(v){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dr=null;function Co(v){return v=v.target||v.srcElement||window,v.correspondingUseElement&&(v=v.correspondingUseElement),v.nodeType===3?v.parentNode:v}var Ji=null,Di=null,Zi=null;function ei(v){if(v=Na(v)){if(typeof Ji!="function")throw Error(n(280));var _=v.stateNode;_&&(_=Oo(_),Ji(v.stateNode,v.type,_))}}function mo(v){Di?Zi?Zi.push(v):Zi=[v]:Di=v}function Gu(){if(Di){var v=Di,_=Zi;if(Zi=Di=null,ei(v),_)for(v=0;v<_.length;v++)ei(_[v])}}function Ea(v,_){return v(_)}function Sa(){}var Kr=!1;function Oi(v,_,N){if(Kr)return v(_,N);Kr=!0;try{return Ea(v,_,N)}finally{Kr=!1,(Di!==null||Zi!==null)&&(Sa(),Gu())}}function si(v,_){var N=v.stateNode;if(N===null)return null;var j=Oo(N);if(j===null)return null;N=j[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(v=v.type,j=!(v==="button"||v==="input"||v==="select"||v==="textarea")),v=!j;break e;default:v=!1}if(v)return null;if(N&&typeof N!="function")throw Error(n(231,_,typeof N));return N}var Zs=!1;if(a)try{var Xr={};Object.defineProperty(Xr,"passive",{get:function(){Zs=!0}}),window.addEventListener("test",Xr,Xr),window.removeEventListener("test",Xr,Xr)}catch{Zs=!1}function Hi(v,_,N,j,Q,ie,de,ke,Le){var st=Array.prototype.slice.call(arguments,3);try{_.apply(N,st)}catch(Ot){this.onError(Ot)}}var eo=!1,go=null,Qo=!1,Ta=null,pd={onError:function(v){eo=!0,go=v}};function Hr(v,_,N,j,Q,ie,de,ke,Le){eo=!1,go=null,Hi.apply(pd,arguments)}function Pl(v,_,N,j,Q,ie,de,ke,Le){if(Hr.apply(this,arguments),eo){if(eo){var st=go;eo=!1,go=null}else throw Error(n(198));Qo||(Qo=!0,Ta=st)}}function bs(v){var _=v,N=v;if(v.alternate)for(;_.return;)_=_.return;else{v=_;do _=v,_.flags&4098&&(N=_.return),v=_.return;while(v)}return _.tag===3?N:null}function Ya(v){if(v.tag===13){var _=v.memoizedState;if(_===null&&(v=v.alternate,v!==null&&(_=v.memoizedState)),_!==null)return _.dehydrated}return null}function Jo(v){if(bs(v)!==v)throw Error(n(188))}function yh(v){var _=v.alternate;if(!_){if(_=bs(v),_===null)throw Error(n(188));return _!==v?null:v}for(var N=v,j=_;;){var Q=N.return;if(Q===null)break;var ie=Q.alternate;if(ie===null){if(j=Q.return,j!==null){N=j;continue}break}if(Q.child===ie.child){for(ie=Q.child;ie;){if(ie===N)return Jo(Q),v;if(ie===j)return Jo(Q),_;ie=ie.sibling}throw Error(n(188))}if(N.return!==j.return)N=Q,j=ie;else{for(var de=!1,ke=Q.child;ke;){if(ke===N){de=!0,N=Q,j=ie;break}if(ke===j){de=!0,j=Q,N=ie;break}ke=ke.sibling}if(!de){for(ke=ie.child;ke;){if(ke===N){de=!0,N=ie,j=Q;break}if(ke===j){de=!0,j=ie,N=Q;break}ke=ke.sibling}if(!de)throw Error(n(189))}}if(N.alternate!==j)throw Error(n(190))}if(N.tag!==3)throw Error(n(188));return N.stateNode.current===N?v:_}function md(v){return v=yh(v),v!==null?mf(v):null}function mf(v){if(v.tag===5||v.tag===6)return v;for(v=v.child;v!==null;){var _=mf(v);if(_!==null)return _;v=v.sibling}return null}var gf=t.unstable_scheduleCallback,xc=t.unstable_cancelCallback,_c=t.unstable_shouldYield,wc=t.unstable_requestPaint,Er=t.unstable_now,Ec=t.unstable_getCurrentPriorityLevel,xs=t.unstable_ImmediatePriority,Ka=t.unstable_UserBlockingPriority,As=t.unstable_NormalPriority,Nl=t.unstable_LowPriority,Sc=t.unstable_IdlePriority,Zo=null,qi=null;function ti(v){if(qi&&typeof qi.onCommitFiberRoot=="function")try{qi.onCommitFiberRoot(Zo,v,void 0,(v.current.flags&128)===128)}catch{}}var rr=Math.clz32?Math.clz32:Se,ve=Math.log,Ie=Math.LN2;function Se(v){return v>>>=0,v===0?32:31-(ve(v)/Ie|0)|0}var Be=64,ze=4194304;function De(v){switch(v&-v){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return v&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return v}}function ht(v,_){var N=v.pendingLanes;if(N===0)return 0;var j=0,Q=v.suspendedLanes,ie=v.pingedLanes,de=N&268435455;if(de!==0){var ke=de&~Q;ke!==0?j=De(ke):(ie&=de,ie!==0&&(j=De(ie)))}else de=N&~Q,de!==0?j=De(de):ie!==0&&(j=De(ie));if(j===0)return 0;if(_!==0&&_!==j&&!(_&Q)&&(Q=j&-j,ie=_&-_,Q>=ie||Q===16&&(ie&4194240)!==0))return _;if(j&4&&(j|=N&16),_=v.entangledLanes,_!==0)for(v=v.entanglements,_&=j;0<_;)N=31-rr(_),Q=1<<N,j|=v[N],_&=~Q;return j}function kt(v,_){switch(v){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nt(v,_){for(var N=v.suspendedLanes,j=v.pingedLanes,Q=v.expirationTimes,ie=v.pendingLanes;0<ie;){var de=31-rr(ie),ke=1<<de,Le=Q[de];Le===-1?(!(ke&N)||ke&j)&&(Q[de]=kt(ke,_)):Le<=_&&(v.expiredLanes|=ke),ie&=~ke}}function Rt(v){return v=v.pendingLanes&-1073741825,v!==0?v:v&1073741824?1073741824:0}function jt(){var v=Be;return Be<<=1,!(Be&4194240)&&(Be=64),v}function Zt(v){for(var _=[],N=0;31>N;N++)_.push(v);return _}function qn(v,_,N){v.pendingLanes|=_,_!==536870912&&(v.suspendedLanes=0,v.pingedLanes=0),v=v.eventTimes,_=31-rr(_),v[_]=N}function Sn(v,_){var N=v.pendingLanes&~_;v.pendingLanes=_,v.suspendedLanes=0,v.pingedLanes=0,v.expiredLanes&=_,v.mutableReadLanes&=_,v.entangledLanes&=_,_=v.entanglements;var j=v.eventTimes;for(v=v.expirationTimes;0<N;){var Q=31-rr(N),ie=1<<Q;_[Q]=0,j[Q]=-1,v[Q]=-1,N&=~ie}}function lr(v,_){var N=v.entangledLanes|=_;for(v=v.entanglements;N;){var j=31-rr(N),Q=1<<j;Q&_|v[j]&_&&(v[j]|=_),N&=~Q}}var _n=0;function br(v){return v&=-v,1<v?4<v?v&268435455?16:536870912:4:1}var ls,Ao,Dl,gd,Yu,yf=!1,to=[],Mi=null,ko=null,ea=null,cr=new Map,Ca=new Map,Aa=[],vp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ol(v,_){switch(v){case"focusin":case"focusout":Mi=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":ea=null;break;case"pointerover":case"pointerout":cr.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ca.delete(_.pointerId)}}function ks(v,_,N,j,Q,ie){return v===null||v.nativeEvent!==ie?(v={blockedOn:_,domEventName:N,eventSystemFlags:j,nativeEvent:ie,targetContainers:[Q]},_!==null&&(_=Na(_),_!==null&&Ao(_)),v):(v.eventSystemFlags|=j,_=v.targetContainers,Q!==null&&_.indexOf(Q)===-1&&_.push(Q),v)}function Rs(v,_,N,j,Q){switch(_){case"focusin":return Mi=ks(Mi,v,_,N,j,Q),!0;case"dragenter":return ko=ks(ko,v,_,N,j,Q),!0;case"mouseover":return ea=ks(ea,v,_,N,j,Q),!0;case"pointerover":var ie=Q.pointerId;return cr.set(ie,ks(cr.get(ie)||null,v,_,N,j,Q)),!0;case"gotpointercapture":return ie=Q.pointerId,Ca.set(ie,ks(Ca.get(ie)||null,v,_,N,j,Q)),!0}return!1}function yd(v){var _=Nc(v.target);if(_!==null){var N=bs(_);if(N!==null){if(_=N.tag,_===13){if(_=Ya(N),_!==null){v.blockedOn=_,Yu(v.priority,function(){Dl(N)});return}}else if(_===3&&N.stateNode.current.memoizedState.isDehydrated){v.blockedOn=N.tag===3?N.stateNode.containerInfo:null;return}}}v.blockedOn=null}function Tc(v){if(v.blockedOn!==null)return!1;for(var _=v.targetContainers;0<_.length;){var N=Or(v.domEventName,v.eventSystemFlags,_[0],v.nativeEvent);if(N===null){N=v.nativeEvent;var j=new N.constructor(N.type,N);Dr=j,N.target.dispatchEvent(j),Dr=null}else return _=Na(N),_!==null&&Ao(_),v.blockedOn=N,!1;_.shift()}return!0}function Ml(v,_,N){Tc(v)&&N.delete(_)}function X0(){yf=!1,Mi!==null&&Tc(Mi)&&(Mi=null),ko!==null&&Tc(ko)&&(ko=null),ea!==null&&Tc(ea)&&(ea=null),cr.forEach(Ml),Ca.forEach(Ml)}function xr(v,_){v.blockedOn===_&&(v.blockedOn=null,yf||(yf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,X0)))}function Gn(v){function _(Q){return xr(Q,v)}if(0<to.length){xr(to[0],v);for(var N=1;N<to.length;N++){var j=to[N];j.blockedOn===v&&(j.blockedOn=null)}}for(Mi!==null&&xr(Mi,v),ko!==null&&xr(ko,v),ea!==null&&xr(ea,v),cr.forEach(_),Ca.forEach(_),N=0;N<Aa.length;N++)j=Aa[N],j.blockedOn===v&&(j.blockedOn=null);for(;0<Aa.length&&(N=Aa[0],N.blockedOn===null);)yd(N),N.blockedOn===null&&Aa.shift()}var Cc=w.ReactCurrentBatchConfig,Ce=!0;function Ne(v,_,N,j){var Q=_n,ie=Cc.transition;Cc.transition=null;try{_n=1,hn(v,_,N,j)}finally{_n=Q,Cc.transition=ie}}function rt(v,_,N,j){var Q=_n,ie=Cc.transition;Cc.transition=null;try{_n=4,hn(v,_,N,j)}finally{_n=Q,Cc.transition=ie}}function hn(v,_,N,j){if(Ce){var Q=Or(v,_,N,j);if(Q===null)G1(v,_,j,ir,N),Ol(v,j);else if(Rs(Q,v,_,N,j))j.stopPropagation();else if(Ol(v,j),_&4&&-1<vp.indexOf(v)){for(;Q!==null;){var ie=Na(Q);if(ie!==null&&ls(ie),ie=Or(v,_,N,j),ie===null&&G1(v,_,j,ir,N),ie===Q)break;Q=ie}Q!==null&&j.stopPropagation()}else G1(v,_,j,null,N)}}var ir=null;function Or(v,_,N,j){if(ir=null,v=Co(j),v=Nc(v),v!==null)if(_=bs(v),_===null)v=null;else if(N=_.tag,N===13){if(v=Ya(_),v!==null)return v;v=null}else if(N===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;v=null}else _!==v&&(v=null);return ir=v,null}function gi(v){switch(v){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ec()){case xs:return 1;case Ka:return 4;case As:case Nl:return 16;case Sc:return 536870912;default:return 16}default:return 16}}var dn=null,Tr=null,Ir=null;function _s(){if(Ir)return Ir;var v,_=Tr,N=_.length,j,Q="value"in dn?dn.value:dn.textContent,ie=Q.length;for(v=0;v<N&&_[v]===Q[v];v++);var de=N-v;for(j=1;j<=de&&_[N-j]===Q[ie-j];j++);return Ir=Q.slice(v,1<j?1-j:void 0)}function ta(v){var _=v.keyCode;return"charCode"in v?(v=v.charCode,v===0&&_===13&&(v=13)):v=_,v===10&&(v=13),32<=v||v===13?v:0}function Mr(){return!0}function js(){return!1}function Li(v){function _(N,j,Q,ie,de){this._reactName=N,this._targetInst=Q,this.type=j,this.nativeEvent=ie,this.target=de,this.currentTarget=null;for(var ke in v)v.hasOwnProperty(ke)&&(N=v[ke],this[ke]=N?N(ie):ie[ke]);return this.isDefaultPrevented=(ie.defaultPrevented!=null?ie.defaultPrevented:ie.returnValue===!1)?Mr:js,this.isPropagationStopped=js,this}return X(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var N=this.nativeEvent;N&&(N.preventDefault?N.preventDefault():typeof N.returnValue!="unknown"&&(N.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var N=this.nativeEvent;N&&(N.stopPropagation?N.stopPropagation():typeof N.cancelBubble!="unknown"&&(N.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),_}var no={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(v){return v.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xa=Li(no),na=X({},no,{view:0,detail:0}),$g=Li(na),ro,Ac,oi,Ro=X({},na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xu,button:0,buttons:0,relatedTarget:function(v){return v.relatedTarget===void 0?v.fromElement===v.srcElement?v.toElement:v.fromElement:v.relatedTarget},movementX:function(v){return"movementX"in v?v.movementX:(v!==oi&&(oi&&v.type==="mousemove"?(ro=v.screenX-oi.screenX,Ac=v.screenY-oi.screenY):Ac=ro=0,oi=v),ro)},movementY:function(v){return"movementY"in v?v.movementY:Ac}}),yi=Li(Ro),ka=X({},Ro,{dataTransfer:0}),ra=Li(ka),vd=X({},na,{relatedTarget:0}),vi=Li(vd),Ku=X({},no,{animationName:0,elapsedTime:0,pseudoElement:0}),Xu=Li(Ku),Bg=X({},no,{clipboardData:function(v){return"clipboardData"in v?v.clipboardData:window.clipboardData}}),bd=Li(Bg),jg=X({},no,{data:0}),vf=Li(jg),vh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ra={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xd(v){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(v):(v=bf[v])?!!_[v]:!1}function xu(){return xd}var F=X({},na,{key:function(v){if(v.key){var _=vh[v.key]||v.key;if(_!=="Unidentified")return _}return v.type==="keypress"?(v=ta(v),v===13?"Enter":String.fromCharCode(v)):v.type==="keydown"||v.type==="keyup"?Ra[v.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xu,charCode:function(v){return v.type==="keypress"?ta(v):0},keyCode:function(v){return v.type==="keydown"||v.type==="keyup"?v.keyCode:0},which:function(v){return v.type==="keypress"?ta(v):v.type==="keydown"||v.type==="keyup"?v.keyCode:0}}),re=Li(F),le=X({},Ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),be=Li(le),Xe=X({},na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xu}),ut=Li(Xe),Xt=X({},no,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lr=Li(Xt),Us=X({},Ro,{deltaX:function(v){return"deltaX"in v?v.deltaX:"wheelDeltaX"in v?-v.wheelDeltaX:0},deltaY:function(v){return"deltaY"in v?v.deltaY:"wheelDeltaY"in v?-v.wheelDeltaY:"wheelDelta"in v?-v.wheelDelta:0},deltaZ:0,deltaMode:0}),Pr=Li(Us),ai=[9,13,27,32],cs=a&&"CompositionEvent"in window,Io=null;a&&"documentMode"in document&&(Io=document.documentMode);var yo=a&&"TextEvent"in window&&!Io,vo=a&&(!cs||Io&&8<Io&&11>=Io),Ll=" ",V1=!1;function px(v,_){switch(v){case"keyup":return ai.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kc(v){return v=v.detail,typeof v=="object"&&"data"in v?v.data:null}var Qu=!1;function bh(v,_){switch(v){case"compositionend":return kc(_);case"keypress":return _.which!==32?null:(V1=!0,Ll);case"textInput":return v=_.data,v===Ll&&V1?null:v;default:return null}}function a2(v,_){if(Qu)return v==="compositionend"||!cs&&px(v,_)?(v=_s(),Ir=Tr=dn=null,Qu=!1,v):null;switch(v){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return vo&&_.locale!=="ko"?null:_.data;default:return null}}var _d={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rc(v){var _=v&&v.nodeName&&v.nodeName.toLowerCase();return _==="input"?!!_d[v.type]:_==="textarea"}function Q0(v,_,N,j){mo(j),_=Y1(_,"onChange"),0<_.length&&(N=new Xa("onChange","change",null,N,j),v.push({event:N,listeners:_}))}var Ju=null,Ic=null;function u2(v){bx(v,0)}function xh(v){var _=Mn(v);if(me(_))return v}function Fl(v,_){if(v==="change")return _}var Pc=!1;if(a){var Po;if(a){var Zu="oninput"in document;if(!Zu){var H1=document.createElement("div");H1.setAttribute("oninput","return;"),Zu=typeof H1.oninput=="function"}Po=Zu}else Po=!1;Pc=Po&&(!document.documentMode||9<document.documentMode)}function bp(){Ju&&(Ju.detachEvent("onpropertychange",mx),Ic=Ju=null)}function mx(v){if(v.propertyName==="value"&&xh(Ic)){var _=[];Q0(_,Ic,v,Co(v)),Oi(u2,_)}}function gx(v,_,N){v==="focusin"?(bp(),Ju=_,Ic=N,Ju.attachEvent("onpropertychange",mx)):v==="focusout"&&bp()}function ws(v){if(v==="selectionchange"||v==="keyup"||v==="keydown")return xh(Ic)}function wd(v,_){if(v==="click")return xh(_)}function Ve(v,_){if(v==="input"||v==="change")return xh(_)}function mt(v,_){return v===_&&(v!==0||1/v===1/_)||v!==v&&_!==_}var et=typeof Object.is=="function"?Object.is:mt;function on(v,_){if(et(v,_))return!0;if(typeof v!="object"||v===null||typeof _!="object"||_===null)return!1;var N=Object.keys(v),j=Object.keys(_);if(N.length!==j.length)return!1;for(j=0;j<N.length;j++){var Q=N[j];if(!u.call(_,Q)||!et(v[Q],_[Q]))return!1}return!0}function Bn(v){for(;v&&v.firstChild;)v=v.firstChild;return v}function On(v,_){var N=Bn(v);v=0;for(var j;N;){if(N.nodeType===3){if(j=v+N.textContent.length,v<=_&&j>=_)return{node:N,offset:_-v};v=j}e:{for(;N;){if(N.nextSibling){N=N.nextSibling;break e}N=N.parentNode}N=void 0}N=Bn(N)}}function Cr(v,_){return v&&_?v===_?!0:v&&v.nodeType===3?!1:_&&_.nodeType===3?Cr(v,_.parentNode):"contains"in v?v.contains(_):v.compareDocumentPosition?!!(v.compareDocumentPosition(_)&16):!1:!1}function er(){for(var v=window,_=Oe();_ instanceof v.HTMLIFrameElement;){try{var N=typeof _.contentWindow.location.href=="string"}catch{N=!1}if(N)v=_.contentWindow;else break;_=Oe(v.document)}return _}function _h(v){var _=v&&v.nodeName&&v.nodeName.toLowerCase();return _&&(_==="input"&&(v.type==="text"||v.type==="search"||v.type==="tel"||v.type==="url"||v.type==="password")||_==="textarea"||v.contentEditable==="true")}function Ug(v){var _=er(),N=v.focusedElem,j=v.selectionRange;if(_!==N&&N&&N.ownerDocument&&Cr(N.ownerDocument.documentElement,N)){if(j!==null&&_h(N)){if(_=j.start,v=j.end,v===void 0&&(v=_),"selectionStart"in N)N.selectionStart=_,N.selectionEnd=Math.min(v,N.value.length);else if(v=(_=N.ownerDocument||document)&&_.defaultView||window,v.getSelection){v=v.getSelection();var Q=N.textContent.length,ie=Math.min(j.start,Q);j=j.end===void 0?ie:Math.min(j.end,Q),!v.extend&&ie>j&&(Q=j,j=ie,ie=Q),Q=On(N,ie);var de=On(N,j);Q&&de&&(v.rangeCount!==1||v.anchorNode!==Q.node||v.anchorOffset!==Q.offset||v.focusNode!==de.node||v.focusOffset!==de.offset)&&(_=_.createRange(),_.setStart(Q.node,Q.offset),v.removeAllRanges(),ie>j?(v.addRange(_),v.extend(de.node,de.offset)):(_.setEnd(de.node,de.offset),v.addRange(_)))}}for(_=[],v=N;v=v.parentNode;)v.nodeType===1&&_.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<_.length;N++)v=_[N],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}var Ia=a&&"documentMode"in document&&11>=document.documentMode,Ed=null,No=null,$l=null,wh=!1;function xp(v,_,N){var j=N.window===N?N.document:N.nodeType===9?N:N.ownerDocument;wh||Ed==null||Ed!==Oe(j)||(j=Ed,"selectionStart"in j&&_h(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),$l&&on($l,j)||($l=j,j=Y1(No,"onSelect"),0<j.length&&(_=new Xa("onSelect","select",null,_,N),v.push({event:_,listeners:j}),_.target=Ed)))}function mr(v,_){var N={};return N[v.toLowerCase()]=_.toLowerCase(),N["Webkit"+v]="webkit"+_,N["Moz"+v]="moz"+_,N}var ia={animationend:mr("Animation","AnimationEnd"),animationiteration:mr("Animation","AnimationIteration"),animationstart:mr("Animation","AnimationStart"),transitionend:mr("Transition","TransitionEnd")},Eh={},_p={};a&&(_p=document.createElement("div").style,"AnimationEvent"in window||(delete ia.animationend.animation,delete ia.animationiteration.animation,delete ia.animationstart.animation),"TransitionEvent"in window||delete ia.transitionend.transition);function J0(v){if(Eh[v])return Eh[v];if(!ia[v])return v;var _=ia[v],N;for(N in _)if(_.hasOwnProperty(N)&&N in _p)return Eh[v]=_[N];return v}var yx=J0("animationend"),vx=J0("animationiteration"),Z0=J0("animationstart"),xf=J0("transitionend"),em=new Map,q1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bl(v,_){em.set(v,_),s(_,[v])}for(var zg=0;zg<q1.length;zg++){var Sh=q1[zg],Vg=Sh.toLowerCase(),Hg=Sh[0].toUpperCase()+Sh.slice(1);Bl(Vg,"on"+Hg)}Bl(yx,"onAnimationEnd"),Bl(vx,"onAnimationIteration"),Bl(Z0,"onAnimationStart"),Bl("dblclick","onDoubleClick"),Bl("focusin","onFocus"),Bl("focusout","onBlur"),Bl(xf,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Th=new Set("cancel close invalid load scroll toggle".split(" ").concat(jl));function wp(v,_,N){var j=v.type||"unknown-event";v.currentTarget=N,Pl(j,_,void 0,v),v.currentTarget=null}function bx(v,_){_=(_&4)!==0;for(var N=0;N<v.length;N++){var j=v[N],Q=j.event;j=j.listeners;e:{var ie=void 0;if(_)for(var de=j.length-1;0<=de;de--){var ke=j[de],Le=ke.instance,st=ke.currentTarget;if(ke=ke.listener,Le!==ie&&Q.isPropagationStopped())break e;wp(Q,ke,st),ie=Le}else for(de=0;de<j.length;de++){if(ke=j[de],Le=ke.instance,st=ke.currentTarget,ke=ke.listener,Le!==ie&&Q.isPropagationStopped())break e;wp(Q,ke,st),ie=Le}}}if(Qo)throw v=Ta,Qo=!1,Ta=null,v}function Wi(v,_){var N=_[Kg];N===void 0&&(N=_[Kg]=new Set);var j=v+"__bubble";N.has(j)||(qg(_,v,2,!1),N.add(j))}function W1(v,_,N){var j=0;_&&(j|=4),qg(N,v,j,_)}var Ch="_reactListening"+Math.random().toString(36).slice(2);function _f(v){if(!v[Ch]){v[Ch]=!0,r.forEach(function(N){N!=="selectionchange"&&(Th.has(N)||W1(N,!1,v),W1(N,!0,v))});var _=v.nodeType===9?v:v.ownerDocument;_===null||_[Ch]||(_[Ch]=!0,W1("selectionchange",!1,_))}}function qg(v,_,N,j){switch(gi(_)){case 1:var Q=Ne;break;case 4:Q=rt;break;default:Q=hn}N=Q.bind(null,_,N,v),Q=void 0,!Zs||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(Q=!0),j?Q!==void 0?v.addEventListener(_,N,{capture:!0,passive:Q}):v.addEventListener(_,N,!0):Q!==void 0?v.addEventListener(_,N,{passive:Q}):v.addEventListener(_,N,!1)}function G1(v,_,N,j,Q){var ie=j;if(!(_&1)&&!(_&2)&&j!==null)e:for(;;){if(j===null)return;var de=j.tag;if(de===3||de===4){var ke=j.stateNode.containerInfo;if(ke===Q||ke.nodeType===8&&ke.parentNode===Q)break;if(de===4)for(de=j.return;de!==null;){var Le=de.tag;if((Le===3||Le===4)&&(Le=de.stateNode.containerInfo,Le===Q||Le.nodeType===8&&Le.parentNode===Q))return;de=de.return}for(;ke!==null;){if(de=Nc(ke),de===null)return;if(Le=de.tag,Le===5||Le===6){j=ie=de;continue e}ke=ke.parentNode}}j=j.return}Oi(function(){var st=ie,Ot=Co(N),Ut=[];e:{var Dt=em.get(v);if(Dt!==void 0){var pn=Xa,En=v;switch(v){case"keypress":if(ta(N)===0)break e;case"keydown":case"keyup":pn=re;break;case"focusin":En="focus",pn=vi;break;case"focusout":En="blur",pn=vi;break;case"beforeblur":case"afterblur":pn=vi;break;case"click":if(N.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pn=yi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pn=ra;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pn=ut;break;case yx:case vx:case Z0:pn=Xu;break;case xf:pn=Lr;break;case"scroll":pn=$g;break;case"wheel":pn=Pr;break;case"copy":case"cut":case"paste":pn=bd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pn=be}var Tn=(_&4)!==0,oo=!Tn&&v==="scroll",Je=Tn?Dt!==null?Dt+"Capture":null:Dt;Tn=[];for(var je=st,tt;je!==null;){tt=je;var Yt=tt.stateNode;if(tt.tag===5&&Yt!==null&&(tt=Yt,Je!==null&&(Yt=si(je,Je),Yt!=null&&Tn.push(Ep(je,Yt,tt)))),oo)break;je=je.return}0<Tn.length&&(Dt=new pn(Dt,En,null,N,Ot),Ut.push({event:Dt,listeners:Tn}))}}if(!(_&7)){e:{if(Dt=v==="mouseover"||v==="pointerover",pn=v==="mouseout"||v==="pointerout",Dt&&N!==Dr&&(En=N.relatedTarget||N.fromElement)&&(Nc(En)||En[_u]))break e;if((pn||Dt)&&(Dt=Ot.window===Ot?Ot:(Dt=Ot.ownerDocument)?Dt.defaultView||Dt.parentWindow:window,pn?(En=N.relatedTarget||N.toElement,pn=st,En=En?Nc(En):null,En!==null&&(oo=bs(En),En!==oo||En.tag!==5&&En.tag!==6)&&(En=null)):(pn=null,En=st),pn!==En)){if(Tn=yi,Yt="onMouseLeave",Je="onMouseEnter",je="mouse",(v==="pointerout"||v==="pointerover")&&(Tn=be,Yt="onPointerLeave",Je="onPointerEnter",je="pointer"),oo=pn==null?Dt:Mn(pn),tt=En==null?Dt:Mn(En),Dt=new Tn(Yt,je+"leave",pn,N,Ot),Dt.target=oo,Dt.relatedTarget=tt,Yt=null,Nc(Ot)===st&&(Tn=new Tn(Je,je+"enter",En,N,Ot),Tn.target=tt,Tn.relatedTarget=oo,Yt=Tn),oo=Yt,pn&&En)t:{for(Tn=pn,Je=En,je=0,tt=Tn;tt;tt=Sp(tt))je++;for(tt=0,Yt=Je;Yt;Yt=Sp(Yt))tt++;for(;0<je-tt;)Tn=Sp(Tn),je--;for(;0<tt-je;)Je=Sp(Je),tt--;for(;je--;){if(Tn===Je||Je!==null&&Tn===Je.alternate)break t;Tn=Sp(Tn),Je=Sp(Je)}Tn=null}else Tn=null;pn!==null&&io(Ut,Dt,pn,Tn,!1),En!==null&&oo!==null&&io(Ut,oo,En,Tn,!0)}}e:{if(Dt=st?Mn(st):window,pn=Dt.nodeName&&Dt.nodeName.toLowerCase(),pn==="select"||pn==="input"&&Dt.type==="file")var Cn=Fl;else if(Rc(Dt))if(Pc)Cn=Ve;else{Cn=ws;var jn=gx}else(pn=Dt.nodeName)&&pn.toLowerCase()==="input"&&(Dt.type==="checkbox"||Dt.type==="radio")&&(Cn=wd);if(Cn&&(Cn=Cn(v,st))){Q0(Ut,Cn,N,Ot);break e}jn&&jn(v,Dt,st),v==="focusout"&&(jn=Dt._wrapperState)&&jn.controlled&&Dt.type==="number"&&yt(Dt,"number",Dt.value)}switch(jn=st?Mn(st):window,v){case"focusin":(Rc(jn)||jn.contentEditable==="true")&&(Ed=jn,No=st,$l=null);break;case"focusout":$l=No=Ed=null;break;case"mousedown":wh=!0;break;case"contextmenu":case"mouseup":case"dragend":wh=!1,xp(Ut,N,Ot);break;case"selectionchange":if(Ia)break;case"keydown":case"keyup":xp(Ut,N,Ot)}var Un;if(cs)e:{switch(v){case"compositionstart":var Xn="onCompositionStart";break e;case"compositionend":Xn="onCompositionEnd";break e;case"compositionupdate":Xn="onCompositionUpdate";break e}Xn=void 0}else Qu?px(v,N)&&(Xn="onCompositionEnd"):v==="keydown"&&N.keyCode===229&&(Xn="onCompositionStart");Xn&&(vo&&N.locale!=="ko"&&(Qu||Xn!=="onCompositionStart"?Xn==="onCompositionEnd"&&Qu&&(Un=_s()):(dn=Ot,Tr="value"in dn?dn.value:dn.textContent,Qu=!0)),jn=Y1(st,Xn),0<jn.length&&(Xn=new vf(Xn,v,null,N,Ot),Ut.push({event:Xn,listeners:jn}),Un?Xn.data=Un:(Un=kc(N),Un!==null&&(Xn.data=Un)))),(Un=yo?bh(v,N):a2(v,N))&&(st=Y1(st,"onBeforeInput"),0<st.length&&(Ot=new vf("onBeforeInput","beforeinput",null,N,Ot),Ut.push({event:Ot,listeners:st}),Ot.data=Un))}bx(Ut,_)})}function Ep(v,_,N){return{instance:v,listener:_,currentTarget:N}}function Y1(v,_){for(var N=_+"Capture",j=[];v!==null;){var Q=v,ie=Q.stateNode;Q.tag===5&&ie!==null&&(Q=ie,ie=si(v,N),ie!=null&&j.unshift(Ep(v,ie,Q)),ie=si(v,_),ie!=null&&j.push(Ep(v,ie,Q))),v=v.return}return j}function Sp(v){if(v===null)return null;do v=v.return;while(v&&v.tag!==5);return v||null}function io(v,_,N,j,Q){for(var ie=_._reactName,de=[];N!==null&&N!==j;){var ke=N,Le=ke.alternate,st=ke.stateNode;if(Le!==null&&Le===j)break;ke.tag===5&&st!==null&&(ke=st,Q?(Le=si(N,ie),Le!=null&&de.unshift(Ep(N,Le,ke))):Q||(Le=si(N,ie),Le!=null&&de.push(Ep(N,Le,ke)))),N=N.return}de.length!==0&&v.push({event:_,listeners:de})}var Pa=/\r\n?/g,l2=/\u0000|\uFFFD/g;function xx(v){return(typeof v=="string"?v:""+v).replace(Pa,`
`).replace(l2,"")}function tm(v,_,N){if(_=xx(_),xx(v)!==_&&N)throw Error(n(425))}function Tp(){}var Wg=null,Cp=null;function Gg(v,_){return v==="textarea"||v==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var Do=typeof setTimeout=="function"?setTimeout:void 0,Ap=typeof clearTimeout=="function"?clearTimeout:void 0,Sd=typeof Promise=="function"?Promise:void 0,Yg=typeof queueMicrotask=="function"?queueMicrotask:typeof Sd<"u"?function(v){return Sd.resolve(null).then(v).catch(kp)}:Do;function kp(v){setTimeout(function(){throw v})}function K1(v,_){var N=_,j=0;do{var Q=N.nextSibling;if(v.removeChild(N),Q&&Q.nodeType===8)if(N=Q.data,N==="/$"){if(j===0){v.removeChild(Q),Gn(_);return}j--}else N!=="$"&&N!=="$?"&&N!=="$!"||j++;N=Q}while(N);Gn(_)}function wf(v){for(;v!=null;v=v.nextSibling){var _=v.nodeType;if(_===1||_===3)break;if(_===8){if(_=v.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return v}function Rp(v){v=v.previousSibling;for(var _=0;v;){if(v.nodeType===8){var N=v.data;if(N==="$"||N==="$!"||N==="$?"){if(_===0)return v;_--}else N==="/$"&&_++}v=v.previousSibling}return null}var Ah=Math.random().toString(36).slice(2),Ul="__reactFiber$"+Ah,kh="__reactProps$"+Ah,_u="__reactContainer$"+Ah,Kg="__reactEvents$"+Ah,ye="__reactListeners$"+Ah,Ip="__reactHandles$"+Ah;function Nc(v){var _=v[Ul];if(_)return _;for(var N=v.parentNode;N;){if(_=N[_u]||N[Ul]){if(N=_.alternate,_.child!==null||N!==null&&N.child!==null)for(v=Rp(v);v!==null;){if(N=v[Ul])return N;v=Rp(v)}return _}v=N,N=v.parentNode}return null}function Na(v){return v=v[Ul]||v[_u],!v||v.tag!==5&&v.tag!==6&&v.tag!==13&&v.tag!==3?null:v}function Mn(v){if(v.tag===5||v.tag===6)return v.stateNode;throw Error(n(33))}function Oo(v){return v[kh]||null}var X1=[],Pp=-1;function Qa(v){return{current:v}}function Gi(v){0>Pp||(v.current=X1[Pp],X1[Pp]=null,Pp--)}function Fi(v,_){Pp++,X1[Pp]=v.current,v.current=_}var Ef={},sa=Qa(Ef),Da=Qa(!1),Oa=Ef;function Np(v,_){var N=v.type.contextTypes;if(!N)return Ef;var j=v.stateNode;if(j&&j.__reactInternalMemoizedUnmaskedChildContext===_)return j.__reactInternalMemoizedMaskedChildContext;var Q={},ie;for(ie in N)Q[ie]=_[ie];return j&&(v=v.stateNode,v.__reactInternalMemoizedUnmaskedChildContext=_,v.__reactInternalMemoizedMaskedChildContext=Q),Q}function Ma(v){return v=v.childContextTypes,v!=null}function nm(){Gi(Da),Gi(sa)}function _x(v,_,N){if(sa.current!==Ef)throw Error(n(168));Fi(sa,_),Fi(Da,N)}function Q1(v,_,N){var j=v.stateNode;if(_=_.childContextTypes,typeof j.getChildContext!="function")return N;j=j.getChildContext();for(var Q in j)if(!(Q in _))throw Error(n(108,ce(v)||"Unknown",Q));return X({},N,j)}function Ja(v){return v=(v=v.stateNode)&&v.__reactInternalMemoizedMergedChildContext||Ef,Oa=sa.current,Fi(sa,v),Fi(Da,Da.current),!0}function c2(v,_,N){var j=v.stateNode;if(!j)throw Error(n(169));N?(v=Q1(v,_,Oa),j.__reactInternalMemoizedMergedChildContext=v,Gi(Da),Gi(sa),Fi(sa,v)):Gi(Da),Fi(Da,N)}var Sf=null,rm=!1,J1=!1;function Xg(v){Sf===null?Sf=[v]:Sf.push(v)}function Za(v){rm=!0,Xg(v)}function Rh(){if(!J1&&Sf!==null){J1=!0;var v=0,_=_n;try{var N=Sf;for(_n=1;v<N.length;v++){var j=N[v];do j=j(!0);while(j!==null)}Sf=null,rm=!1}catch(Q){throw Sf!==null&&(Sf=Sf.slice(v+1)),gf(xs,Rh),Q}finally{_n=_,J1=!1}}return null}var eu=[],oa=0,Ih=null,Ph=0,tu=[],nu=0,Nh=null,wu=1,es="";function Dp(v,_){eu[oa++]=Ph,eu[oa++]=Ih,Ih=v,Ph=_}function f2(v,_,N){tu[nu++]=wu,tu[nu++]=es,tu[nu++]=Nh,Nh=v;var j=wu;v=es;var Q=32-rr(j)-1;j&=~(1<<Q),N+=1;var ie=32-rr(_)+Q;if(30<ie){var de=Q-Q%5;ie=(j&(1<<de)-1).toString(32),j>>=de,Q-=de,wu=1<<32-rr(_)+Q|N<<Q|j,es=ie+v}else wu=1<<ie|N<<Q|j,es=v}function Dh(v){v.return!==null&&(Dp(v,1),f2(v,1,0))}function Is(v){for(;v===Ih;)Ih=eu[--oa],eu[oa]=null,Ph=eu[--oa],eu[oa]=null;for(;v===Nh;)Nh=tu[--nu],tu[nu]=null,es=tu[--nu],tu[nu]=null,wu=tu[--nu],tu[nu]=null}var La=null,nn=null,bi=!1,el=null;function Dc(v,_){var N=Of(5,null,null,0);N.elementType="DELETED",N.stateNode=_,N.return=v,_=v.deletions,_===null?(v.deletions=[N],v.flags|=16):_.push(N)}function Z1(v,_){switch(v.tag){case 5:var N=v.type;return _=_.nodeType!==1||N.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(v.stateNode=_,La=v,nn=wf(_.firstChild),!0):!1;case 6:return _=v.pendingProps===""||_.nodeType!==3?null:_,_!==null?(v.stateNode=_,La=v,nn=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(N=Nh!==null?{id:wu,overflow:es}:null,v.memoizedState={dehydrated:_,treeContext:N,retryLane:1073741824},N=Of(18,null,null,0),N.stateNode=_,N.return=v,v.child=N,La=v,nn=null,!0):!1;default:return!1}}function tl(v){return(v.mode&1)!==0&&(v.flags&128)===0}function aa(v){if(bi){var _=nn;if(_){var N=_;if(!Z1(v,_)){if(tl(v))throw Error(n(418));_=wf(N.nextSibling);var j=La;_&&Z1(v,_)?Dc(j,N):(v.flags=v.flags&-4097|2,bi=!1,La=v)}}else{if(tl(v))throw Error(n(418));v.flags=v.flags&-4097|2,bi=!1,La=v}}}function ev(v){for(v=v.return;v!==null&&v.tag!==5&&v.tag!==3&&v.tag!==13;)v=v.return;La=v}function im(v){if(v!==La)return!1;if(!bi)return ev(v),bi=!0,!1;var _;if((_=v.tag!==3)&&!(_=v.tag!==5)&&(_=v.type,_=_!=="head"&&_!=="body"&&!Gg(v.type,v.memoizedProps)),_&&(_=nn)){if(tl(v))throw tv(),Error(n(418));for(;_;)Dc(v,_),_=wf(_.nextSibling)}if(ev(v),v.tag===13){if(v=v.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));e:{for(v=v.nextSibling,_=0;v;){if(v.nodeType===8){var N=v.data;if(N==="/$"){if(_===0){nn=wf(v.nextSibling);break e}_--}else N!=="$"&&N!=="$!"&&N!=="$?"||_++}v=v.nextSibling}nn=null}}else nn=La?wf(v.stateNode.nextSibling):null;return!0}function tv(){for(var v=nn;v;)v=wf(v.nextSibling)}function Oc(){nn=La=null,bi=!1}function zl(v){el===null?el=[v]:el.push(v)}var nv=w.ReactCurrentBatchConfig;function zs(v,_,N){if(v=N.ref,v!==null&&typeof v!="function"&&typeof v!="object"){if(N._owner){if(N=N._owner,N){if(N.tag!==1)throw Error(n(309));var j=N.stateNode}if(!j)throw Error(n(147,v));var Q=j,ie=""+v;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===ie?_.ref:(_=function(de){var ke=Q.refs;de===null?delete ke[ie]:ke[ie]=de},_._stringRef=ie,_)}if(typeof v!="string")throw Error(n(284));if(!N._owner)throw Error(n(290,v))}return v}function ua(v,_){throw v=Object.prototype.toString.call(_),Error(n(31,v==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":v))}function Mc(v){var _=v._init;return _(v._payload)}function Qg(v){function _(Je,je){if(v){var tt=Je.deletions;tt===null?(Je.deletions=[je],Je.flags|=16):tt.push(je)}}function N(Je,je){if(!v)return null;for(;je!==null;)_(Je,je),je=je.sibling;return null}function j(Je,je){for(Je=new Map;je!==null;)je.key!==null?Je.set(je.key,je):Je.set(je.index,je),je=je.sibling;return Je}function Q(Je,je){return Je=Od(Je,je),Je.index=0,Je.sibling=null,Je}function ie(Je,je,tt){return Je.index=tt,v?(tt=Je.alternate,tt!==null?(tt=tt.index,tt<je?(Je.flags|=2,je):tt):(Je.flags|=2,je)):(Je.flags|=1048576,je)}function de(Je){return v&&Je.alternate===null&&(Je.flags|=2),Je}function ke(Je,je,tt,Yt){return je===null||je.tag!==6?(je=OC(tt,Je.mode,Yt),je.return=Je,je):(je=Q(je,tt),je.return=Je,je)}function Le(Je,je,tt,Yt){var Cn=tt.type;return Cn===R?Ot(Je,je,tt.props.children,Yt,tt.key):je!==null&&(je.elementType===Cn||typeof Cn=="object"&&Cn!==null&&Cn.$$typeof===G&&Mc(Cn)===je.type)?(Yt=Q(je,tt.props),Yt.ref=zs(Je,je,tt),Yt.return=Je,Yt):(Yt=k2(tt.type,tt.key,tt.props,null,Je.mode,Yt),Yt.ref=zs(Je,je,tt),Yt.return=Je,Yt)}function st(Je,je,tt,Yt){return je===null||je.tag!==4||je.stateNode.containerInfo!==tt.containerInfo||je.stateNode.implementation!==tt.implementation?(je=MC(tt,Je.mode,Yt),je.return=Je,je):(je=Q(je,tt.children||[]),je.return=Je,je)}function Ot(Je,je,tt,Yt,Cn){return je===null||je.tag!==7?(je=hy(tt,Je.mode,Yt,Cn),je.return=Je,je):(je=Q(je,tt),je.return=Je,je)}function Ut(Je,je,tt){if(typeof je=="string"&&je!==""||typeof je=="number")return je=OC(""+je,Je.mode,tt),je.return=Je,je;if(typeof je=="object"&&je!==null){switch(je.$$typeof){case S:return tt=k2(je.type,je.key,je.props,null,Je.mode,tt),tt.ref=zs(Je,null,je),tt.return=Je,tt;case C:return je=MC(je,Je.mode,tt),je.return=Je,je;case G:var Yt=je._init;return Ut(Je,Yt(je._payload),tt)}if(_t(je)||ue(je))return je=hy(je,Je.mode,tt,null),je.return=Je,je;ua(Je,je)}return null}function Dt(Je,je,tt,Yt){var Cn=je!==null?je.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number")return Cn!==null?null:ke(Je,je,""+tt,Yt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case S:return tt.key===Cn?Le(Je,je,tt,Yt):null;case C:return tt.key===Cn?st(Je,je,tt,Yt):null;case G:return Cn=tt._init,Dt(Je,je,Cn(tt._payload),Yt)}if(_t(tt)||ue(tt))return Cn!==null?null:Ot(Je,je,tt,Yt,null);ua(Je,tt)}return null}function pn(Je,je,tt,Yt,Cn){if(typeof Yt=="string"&&Yt!==""||typeof Yt=="number")return Je=Je.get(tt)||null,ke(je,Je,""+Yt,Cn);if(typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case S:return Je=Je.get(Yt.key===null?tt:Yt.key)||null,Le(je,Je,Yt,Cn);case C:return Je=Je.get(Yt.key===null?tt:Yt.key)||null,st(je,Je,Yt,Cn);case G:var jn=Yt._init;return pn(Je,je,tt,jn(Yt._payload),Cn)}if(_t(Yt)||ue(Yt))return Je=Je.get(tt)||null,Ot(je,Je,Yt,Cn,null);ua(je,Yt)}return null}function En(Je,je,tt,Yt){for(var Cn=null,jn=null,Un=je,Xn=je=0,fa=null;Un!==null&&Xn<tt.length;Xn++){Un.index>Xn?(fa=Un,Un=null):fa=Un.sibling;var xi=Dt(Je,Un,tt[Xn],Yt);if(xi===null){Un===null&&(Un=fa);break}v&&Un&&xi.alternate===null&&_(Je,Un),je=ie(xi,je,Xn),jn===null?Cn=xi:jn.sibling=xi,jn=xi,Un=fa}if(Xn===tt.length)return N(Je,Un),bi&&Dp(Je,Xn),Cn;if(Un===null){for(;Xn<tt.length;Xn++)Un=Ut(Je,tt[Xn],Yt),Un!==null&&(je=ie(Un,je,Xn),jn===null?Cn=Un:jn.sibling=Un,jn=Un);return bi&&Dp(Je,Xn),Cn}for(Un=j(Je,Un);Xn<tt.length;Xn++)fa=pn(Un,Je,Xn,tt[Xn],Yt),fa!==null&&(v&&fa.alternate!==null&&Un.delete(fa.key===null?Xn:fa.key),je=ie(fa,je,Xn),jn===null?Cn=fa:jn.sibling=fa,jn=fa);return v&&Un.forEach(function(ym){return _(Je,ym)}),bi&&Dp(Je,Xn),Cn}function Tn(Je,je,tt,Yt){var Cn=ue(tt);if(typeof Cn!="function")throw Error(n(150));if(tt=Cn.call(tt),tt==null)throw Error(n(151));for(var jn=Cn=null,Un=je,Xn=je=0,fa=null,xi=tt.next();Un!==null&&!xi.done;Xn++,xi=tt.next()){Un.index>Xn?(fa=Un,Un=null):fa=Un.sibling;var ym=Dt(Je,Un,xi.value,Yt);if(ym===null){Un===null&&(Un=fa);break}v&&Un&&ym.alternate===null&&_(Je,Un),je=ie(ym,je,Xn),jn===null?Cn=ym:jn.sibling=ym,jn=ym,Un=fa}if(xi.done)return N(Je,Un),bi&&Dp(Je,Xn),Cn;if(Un===null){for(;!xi.done;Xn++,xi=tt.next())xi=Ut(Je,xi.value,Yt),xi!==null&&(je=ie(xi,je,Xn),jn===null?Cn=xi:jn.sibling=xi,jn=xi);return bi&&Dp(Je,Xn),Cn}for(Un=j(Je,Un);!xi.done;Xn++,xi=tt.next())xi=pn(Un,Je,Xn,xi.value,Yt),xi!==null&&(v&&xi.alternate!==null&&Un.delete(xi.key===null?Xn:xi.key),je=ie(xi,je,Xn),jn===null?Cn=xi:jn.sibling=xi,jn=xi);return v&&Un.forEach(function(B7){return _(Je,B7)}),bi&&Dp(Je,Xn),Cn}function oo(Je,je,tt,Yt){if(typeof tt=="object"&&tt!==null&&tt.type===R&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case S:e:{for(var Cn=tt.key,jn=je;jn!==null;){if(jn.key===Cn){if(Cn=tt.type,Cn===R){if(jn.tag===7){N(Je,jn.sibling),je=Q(jn,tt.props.children),je.return=Je,Je=je;break e}}else if(jn.elementType===Cn||typeof Cn=="object"&&Cn!==null&&Cn.$$typeof===G&&Mc(Cn)===jn.type){N(Je,jn.sibling),je=Q(jn,tt.props),je.ref=zs(Je,jn,tt),je.return=Je,Je=je;break e}N(Je,jn);break}else _(Je,jn);jn=jn.sibling}tt.type===R?(je=hy(tt.props.children,Je.mode,Yt,tt.key),je.return=Je,Je=je):(Yt=k2(tt.type,tt.key,tt.props,null,Je.mode,Yt),Yt.ref=zs(Je,je,tt),Yt.return=Je,Je=Yt)}return de(Je);case C:e:{for(jn=tt.key;je!==null;){if(je.key===jn)if(je.tag===4&&je.stateNode.containerInfo===tt.containerInfo&&je.stateNode.implementation===tt.implementation){N(Je,je.sibling),je=Q(je,tt.children||[]),je.return=Je,Je=je;break e}else{N(Je,je);break}else _(Je,je);je=je.sibling}je=MC(tt,Je.mode,Yt),je.return=Je,Je=je}return de(Je);case G:return jn=tt._init,oo(Je,je,jn(tt._payload),Yt)}if(_t(tt))return En(Je,je,tt,Yt);if(ue(tt))return Tn(Je,je,tt,Yt);ua(Je,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"?(tt=""+tt,je!==null&&je.tag===6?(N(Je,je.sibling),je=Q(je,tt),je.return=Je,Je=je):(N(Je,je),je=OC(tt,Je.mode,Yt),je.return=Je,Je=je),de(Je)):N(Je,je)}return oo}var Es=Qg(!0),Eu=Qg(!1),sm=Qa(null),Ps=null,Oh=null,Op=null;function Tf(){Op=Oh=Ps=null}function Jg(v){var _=sm.current;Gi(sm),v._currentValue=_}function Mo(v,_,N){for(;v!==null;){var j=v.alternate;if((v.childLanes&_)!==_?(v.childLanes|=_,j!==null&&(j.childLanes|=_)):j!==null&&(j.childLanes&_)!==_&&(j.childLanes|=_),v===N)break;v=v.return}}function Lc(v,_){Ps=v,Op=Oh=null,v=v.dependencies,v!==null&&v.firstContext!==null&&(v.lanes&_&&(ae=!0),v.firstContext=null)}function ru(v){var _=v._currentValue;if(Op!==v)if(v={context:v,memoizedValue:_,next:null},Oh===null){if(Ps===null)throw Error(n(308));Oh=v,Ps.dependencies={lanes:0,firstContext:v}}else Oh=Oh.next=v;return _}var Cf=null;function om(v){Cf===null?Cf=[v]:Cf.push(v)}function Mp(v,_,N,j){var Q=_.interleaved;return Q===null?(N.next=N,om(_)):(N.next=Q.next,Q.next=N),_.interleaved=N,nl(v,j)}function nl(v,_){v.lanes|=_;var N=v.alternate;for(N!==null&&(N.lanes|=_),N=v,v=v.return;v!==null;)v.childLanes|=_,N=v.alternate,N!==null&&(N.childLanes|=_),N=v,v=v.return;return N.tag===3?N.stateNode:null}var Su=!1;function am(v){v.updateQueue={baseState:v.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rv(v,_){v=v.updateQueue,_.updateQueue===v&&(_.updateQueue={baseState:v.baseState,firstBaseUpdate:v.firstBaseUpdate,lastBaseUpdate:v.lastBaseUpdate,shared:v.shared,effects:v.effects})}function Af(v,_){return{eventTime:v,lane:_,tag:0,payload:null,callback:null,next:null}}function Tu(v,_,N){var j=v.updateQueue;if(j===null)return null;if(j=j.shared,ui&2){var Q=j.pending;return Q===null?_.next=_:(_.next=Q.next,Q.next=_),j.pending=_,nl(v,N)}return Q=j.interleaved,Q===null?(_.next=_,om(j)):(_.next=Q.next,Q.next=_),j.interleaved=_,nl(v,N)}function iv(v,_,N){if(_=_.updateQueue,_!==null&&(_=_.shared,(N&4194240)!==0)){var j=_.lanes;j&=v.pendingLanes,N|=j,_.lanes=N,lr(v,N)}}function Zg(v,_){var N=v.updateQueue,j=v.alternate;if(j!==null&&(j=j.updateQueue,N===j)){var Q=null,ie=null;if(N=N.firstBaseUpdate,N!==null){do{var de={eventTime:N.eventTime,lane:N.lane,tag:N.tag,payload:N.payload,callback:N.callback,next:null};ie===null?Q=ie=de:ie=ie.next=de,N=N.next}while(N!==null);ie===null?Q=ie=_:ie=ie.next=_}else Q=ie=_;N={baseState:j.baseState,firstBaseUpdate:Q,lastBaseUpdate:ie,shared:j.shared,effects:j.effects},v.updateQueue=N;return}v=N.lastBaseUpdate,v===null?N.firstBaseUpdate=_:v.next=_,N.lastBaseUpdate=_}function Mh(v,_,N,j){var Q=v.updateQueue;Su=!1;var ie=Q.firstBaseUpdate,de=Q.lastBaseUpdate,ke=Q.shared.pending;if(ke!==null){Q.shared.pending=null;var Le=ke,st=Le.next;Le.next=null,de===null?ie=st:de.next=st,de=Le;var Ot=v.alternate;Ot!==null&&(Ot=Ot.updateQueue,ke=Ot.lastBaseUpdate,ke!==de&&(ke===null?Ot.firstBaseUpdate=st:ke.next=st,Ot.lastBaseUpdate=Le))}if(ie!==null){var Ut=Q.baseState;de=0,Ot=st=Le=null,ke=ie;do{var Dt=ke.lane,pn=ke.eventTime;if((j&Dt)===Dt){Ot!==null&&(Ot=Ot.next={eventTime:pn,lane:0,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null});e:{var En=v,Tn=ke;switch(Dt=_,pn=N,Tn.tag){case 1:if(En=Tn.payload,typeof En=="function"){Ut=En.call(pn,Ut,Dt);break e}Ut=En;break e;case 3:En.flags=En.flags&-65537|128;case 0:if(En=Tn.payload,Dt=typeof En=="function"?En.call(pn,Ut,Dt):En,Dt==null)break e;Ut=X({},Ut,Dt);break e;case 2:Su=!0}}ke.callback!==null&&ke.lane!==0&&(v.flags|=64,Dt=Q.effects,Dt===null?Q.effects=[ke]:Dt.push(ke))}else pn={eventTime:pn,lane:Dt,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null},Ot===null?(st=Ot=pn,Le=Ut):Ot=Ot.next=pn,de|=Dt;if(ke=ke.next,ke===null){if(ke=Q.shared.pending,ke===null)break;Dt=ke,ke=Dt.next,Dt.next=null,Q.lastBaseUpdate=Dt,Q.shared.pending=null}}while(!0);if(Ot===null&&(Le=Ut),Q.baseState=Le,Q.firstBaseUpdate=st,Q.lastBaseUpdate=Ot,_=Q.shared.interleaved,_!==null){Q=_;do de|=Q.lane,Q=Q.next;while(Q!==_)}else ie===null&&(Q.shared.lanes=0);dm|=de,v.lanes=de,v.memoizedState=Ut}}function Ss(v,_,N){if(v=_.effects,_.effects=null,v!==null)for(_=0;_<v.length;_++){var j=v[_],Q=j.callback;if(Q!==null){if(j.callback=null,j=N,typeof Q!="function")throw Error(n(191,Q));Q.call(j)}}}var fr={},$i=Qa(fr),fs=Qa(fr),Ns=Qa(fr);function Vs(v){if(v===fr)throw Error(n(174));return v}function Lh(v,_){switch(Fi(Ns,_),Fi(fs,v),Fi($i,fr),v=_.nodeType,v){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:Qe(null,"");break;default:v=v===8?_.parentNode:_,_=v.namespaceURI||null,v=v.tagName,_=Qe(_,v)}Gi($i),Fi($i,_)}function Yi(){Gi($i),Gi(fs),Gi(Ns)}function Lp(v){Vs(Ns.current);var _=Vs($i.current),N=Qe(_,v.type);_!==N&&(Fi(fs,v),Fi($i,N))}function kf(v){fs.current===v&&(Gi($i),Gi(fs))}var Bi=Qa(0);function Td(v){for(var _=v;_!==null;){if(_.tag===13){var N=_.memoizedState;if(N!==null&&(N=N.dehydrated,N===null||N.data==="$?"||N.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===v)break;for(;_.sibling===null;){if(_.return===null||_.return===v)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var Fp=[];function la(){for(var v=0;v<Fp.length;v++)Fp[v]._workInProgressVersionPrimary=null;Fp.length=0}var $p=w.ReactCurrentDispatcher,ey=w.ReactCurrentBatchConfig,Fa=0,Ti=null,ds=null,Hs=null,rl=!1,Fh=!1,Cu=0,dr=0;function so(){throw Error(n(321))}function ty(v,_){if(_===null)return!1;for(var N=0;N<_.length&&N<v.length;N++)if(!et(v[N],_[N]))return!1;return!0}function Rf(v,_,N,j,Q,ie){if(Fa=ie,Ti=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,$p.current=v===null||v.memoizedState===null?vC:Bc,v=N(j,Q),Fh){ie=0;do{if(Fh=!1,Cu=0,25<=ie)throw Error(n(301));ie+=1,Hs=ds=null,_.updateQueue=null,$p.current=kd,v=N(j,Q)}while(Fh)}if($p.current=lm,_=ds!==null&&ds.next!==null,Fa=0,Hs=ds=Ti=null,rl=!1,_)throw Error(n(300));return v}function Bp(){var v=Cu!==0;return Cu=0,v}function ts(){var v={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hs===null?Ti.memoizedState=Hs=v:Hs=Hs.next=v,Hs}function bo(){if(ds===null){var v=Ti.alternate;v=v!==null?v.memoizedState:null}else v=ds.next;var _=Hs===null?Ti.memoizedState:Hs.next;if(_!==null)Hs=_,ds=v;else{if(v===null)throw Error(n(310));ds=v,v={memoizedState:ds.memoizedState,baseState:ds.baseState,baseQueue:ds.baseQueue,queue:ds.queue,next:null},Hs===null?Ti.memoizedState=Hs=v:Hs=Hs.next=v}return Hs}function ji(v,_){return typeof _=="function"?_(v):_}function $a(v){var _=bo(),N=_.queue;if(N===null)throw Error(n(311));N.lastRenderedReducer=v;var j=ds,Q=j.baseQueue,ie=N.pending;if(ie!==null){if(Q!==null){var de=Q.next;Q.next=ie.next,ie.next=de}j.baseQueue=Q=ie,N.pending=null}if(Q!==null){ie=Q.next,j=j.baseState;var ke=de=null,Le=null,st=ie;do{var Ot=st.lane;if((Fa&Ot)===Ot)Le!==null&&(Le=Le.next={lane:0,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),j=st.hasEagerState?st.eagerState:v(j,st.action);else{var Ut={lane:Ot,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null};Le===null?(ke=Le=Ut,de=j):Le=Le.next=Ut,Ti.lanes|=Ot,dm|=Ot}st=st.next}while(st!==null&&st!==ie);Le===null?de=j:Le.next=ke,et(j,_.memoizedState)||(ae=!0),_.memoizedState=j,_.baseState=de,_.baseQueue=Le,N.lastRenderedState=j}if(v=N.interleaved,v!==null){Q=v;do ie=Q.lane,Ti.lanes|=ie,dm|=ie,Q=Q.next;while(Q!==v)}else Q===null&&(N.lanes=0);return[_.memoizedState,N.dispatch]}function jp(v){var _=bo(),N=_.queue;if(N===null)throw Error(n(311));N.lastRenderedReducer=v;var j=N.dispatch,Q=N.pending,ie=_.memoizedState;if(Q!==null){N.pending=null;var de=Q=Q.next;do ie=v(ie,de.action),de=de.next;while(de!==Q);et(ie,_.memoizedState)||(ae=!0),_.memoizedState=ie,_.baseQueue===null&&(_.baseState=ie),N.lastRenderedState=ie}return[ie,j]}function um(){}function ny(v,_){var N=Ti,j=bo(),Q=_(),ie=!et(j.memoizedState,Q);if(ie&&(j.memoizedState=Q,ae=!0),j=j.queue,Pf(If.bind(null,N,j,v),[v]),j.getSnapshot!==_||ie||Hs!==null&&Hs.memoizedState.tag&1){if(N.flags|=2048,Up(9,qs.bind(null,N,j,Q,_),void 0,null),ja===null)throw Error(n(349));Fa&30||wx(N,_,Q)}return Q}function wx(v,_,N){v.flags|=16384,v={getSnapshot:_,value:N},_=Ti.updateQueue,_===null?(_={lastEffect:null,stores:null},Ti.updateQueue=_,_.stores=[v]):(N=_.stores,N===null?_.stores=[v]:N.push(v))}function qs(v,_,N,j){_.value=N,_.getSnapshot=j,ry(_)&&iy(v)}function If(v,_,N){return N(function(){ry(_)&&iy(v)})}function ry(v){var _=v.getSnapshot;v=v.value;try{var N=_();return!et(v,N)}catch{return!0}}function iy(v){var _=nl(v,1);_!==null&&Dd(_,v,1,-1)}function Fc(v){var _=ts();return typeof v=="function"&&(v=v()),_.memoizedState=_.baseState=v,v={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:v},_.queue=v,v=v.dispatch=kx.bind(null,Ti,v),[_.memoizedState,v]}function Up(v,_,N,j){return v={tag:v,create:_,destroy:N,deps:j,next:null},_=Ti.updateQueue,_===null?(_={lastEffect:null,stores:null},Ti.updateQueue=_,_.lastEffect=v.next=v):(N=_.lastEffect,N===null?_.lastEffect=v.next=v:(j=N.next,N.next=v,v.next=j,_.lastEffect=v)),v}function sy(){return bo().memoizedState}function zp(v,_,N,j){var Q=ts();Ti.flags|=v,Q.memoizedState=Up(1|_,N,void 0,j===void 0?null:j)}function Cd(v,_,N,j){var Q=bo();j=j===void 0?null:j;var ie=void 0;if(ds!==null){var de=ds.memoizedState;if(ie=de.destroy,j!==null&&ty(j,de.deps)){Q.memoizedState=Up(_,N,ie,j);return}}Ti.flags|=v,Q.memoizedState=Up(1|_,N,ie,j)}function sv(v,_){return zp(8390656,8,v,_)}function Pf(v,_){return Cd(2048,8,v,_)}function Ex(v,_){return Cd(4,2,v,_)}function Nf(v,_){return Cd(4,4,v,_)}function Ad(v,_){if(typeof _=="function")return v=v(),_(v),function(){_(null)};if(_!=null)return v=v(),_.current=v,function(){_.current=null}}function Sx(v,_,N){return N=N!=null?N.concat([v]):null,Cd(4,4,Ad.bind(null,_,v),N)}function $c(){}function Tx(v,_){var N=bo();_=_===void 0?null:_;var j=N.memoizedState;return j!==null&&_!==null&&ty(_,j[1])?j[0]:(N.memoizedState=[v,_],v)}function ns(v,_){var N=bo();_=_===void 0?null:_;var j=N.memoizedState;return j!==null&&_!==null&&ty(_,j[1])?j[0]:(v=v(),N.memoizedState=[v,_],v)}function d2(v,_,N){return Fa&21?(et(N,_)||(N=jt(),Ti.lanes|=N,dm|=N,v.baseState=!0),_):(v.baseState&&(v.baseState=!1,ae=!0),v.memoizedState=N)}function Cx(v,_){var N=_n;_n=N!==0&&4>N?N:4,v(!0);var j=ey.transition;ey.transition={};try{v(!1),_()}finally{_n=N,ey.transition=j}}function Ax(){return bo().memoizedState}function yC(v,_,N){var j=mm(v);if(N={lane:j,action:N,hasEagerState:!1,eagerState:null,next:null},ov(v))iu(_,N);else if(N=Mp(v,_,N,j),N!==null){var Q=ol();Dd(N,v,j,Q),Ds(N,_,j)}}function kx(v,_,N){var j=mm(v),Q={lane:j,action:N,hasEagerState:!1,eagerState:null,next:null};if(ov(v))iu(_,Q);else{var ie=v.alternate;if(v.lanes===0&&(ie===null||ie.lanes===0)&&(ie=_.lastRenderedReducer,ie!==null))try{var de=_.lastRenderedState,ke=ie(de,N);if(Q.hasEagerState=!0,Q.eagerState=ke,et(ke,de)){var Le=_.interleaved;Le===null?(Q.next=Q,om(_)):(Q.next=Le.next,Le.next=Q),_.interleaved=Q;return}}catch{}finally{}N=Mp(v,_,Q,j),N!==null&&(Q=ol(),Dd(N,v,j,Q),Ds(N,_,j))}}function ov(v){var _=v.alternate;return v===Ti||_!==null&&_===Ti}function iu(v,_){Fh=rl=!0;var N=v.pending;N===null?_.next=_:(_.next=N.next,N.next=_),v.pending=_}function Ds(v,_,N){if(N&4194240){var j=_.lanes;j&=v.pendingLanes,N|=j,_.lanes=N,lr(v,N)}}var lm={readContext:ru,useCallback:so,useContext:so,useEffect:so,useImperativeHandle:so,useInsertionEffect:so,useLayoutEffect:so,useMemo:so,useReducer:so,useRef:so,useState:so,useDebugValue:so,useDeferredValue:so,useTransition:so,useMutableSource:so,useSyncExternalStore:so,useId:so,unstable_isNewReconciler:!1},vC={readContext:ru,useCallback:function(v,_){return ts().memoizedState=[v,_===void 0?null:_],v},useContext:ru,useEffect:sv,useImperativeHandle:function(v,_,N){return N=N!=null?N.concat([v]):null,zp(4194308,4,Ad.bind(null,_,v),N)},useLayoutEffect:function(v,_){return zp(4194308,4,v,_)},useInsertionEffect:function(v,_){return zp(4,2,v,_)},useMemo:function(v,_){var N=ts();return _=_===void 0?null:_,v=v(),N.memoizedState=[v,_],v},useReducer:function(v,_,N){var j=ts();return _=N!==void 0?N(_):_,j.memoizedState=j.baseState=_,v={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:v,lastRenderedState:_},j.queue=v,v=v.dispatch=yC.bind(null,Ti,v),[j.memoizedState,v]},useRef:function(v){var _=ts();return v={current:v},_.memoizedState=v},useState:Fc,useDebugValue:$c,useDeferredValue:function(v){return ts().memoizedState=v},useTransition:function(){var v=Fc(!1),_=v[0];return v=Cx.bind(null,v[1]),ts().memoizedState=v,[_,v]},useMutableSource:function(){},useSyncExternalStore:function(v,_,N){var j=Ti,Q=ts();if(bi){if(N===void 0)throw Error(n(407));N=N()}else{if(N=_(),ja===null)throw Error(n(349));Fa&30||wx(j,_,N)}Q.memoizedState=N;var ie={value:N,getSnapshot:_};return Q.queue=ie,sv(If.bind(null,j,ie,v),[v]),j.flags|=2048,Up(9,qs.bind(null,j,ie,N,_),void 0,null),N},useId:function(){var v=ts(),_=ja.identifierPrefix;if(bi){var N=es,j=wu;N=(j&~(1<<32-rr(j)-1)).toString(32)+N,_=":"+_+"R"+N,N=Cu++,0<N&&(_+="H"+N.toString(32)),_+=":"}else N=dr++,_=":"+_+"r"+N.toString(32)+":";return v.memoizedState=_},unstable_isNewReconciler:!1},Bc={readContext:ru,useCallback:Tx,useContext:ru,useEffect:Pf,useImperativeHandle:Sx,useInsertionEffect:Ex,useLayoutEffect:Nf,useMemo:ns,useReducer:$a,useRef:sy,useState:function(){return $a(ji)},useDebugValue:$c,useDeferredValue:function(v){var _=bo();return d2(_,ds.memoizedState,v)},useTransition:function(){var v=$a(ji)[0],_=bo().memoizedState;return[v,_]},useMutableSource:um,useSyncExternalStore:ny,useId:Ax,unstable_isNewReconciler:!1},kd={readContext:ru,useCallback:Tx,useContext:ru,useEffect:Pf,useImperativeHandle:Sx,useInsertionEffect:Ex,useLayoutEffect:Nf,useMemo:ns,useReducer:jp,useRef:sy,useState:function(){return jp(ji)},useDebugValue:$c,useDeferredValue:function(v){var _=bo();return ds===null?_.memoizedState=v:d2(_,ds.memoizedState,v)},useTransition:function(){var v=jp(ji)[0],_=bo().memoizedState;return[v,_]},useMutableSource:um,useSyncExternalStore:ny,useId:Ax,unstable_isNewReconciler:!1};function Lo(v,_){if(v&&v.defaultProps){_=X({},_),v=v.defaultProps;for(var N in v)_[N]===void 0&&(_[N]=v[N]);return _}return _}function Vp(v,_,N,j){_=v.memoizedState,N=N(j,_),N=N==null?_:X({},_,N),v.memoizedState=N,v.lanes===0&&(v.updateQueue.baseState=N)}var cm={isMounted:function(v){return(v=v._reactInternals)?bs(v)===v:!1},enqueueSetState:function(v,_,N){v=v._reactInternals;var j=ol(),Q=mm(v),ie=Af(j,Q);ie.payload=_,N!=null&&(ie.callback=N),_=Tu(v,ie,Q),_!==null&&(Dd(_,v,Q,j),iv(_,v,Q))},enqueueReplaceState:function(v,_,N){v=v._reactInternals;var j=ol(),Q=mm(v),ie=Af(j,Q);ie.tag=1,ie.payload=_,N!=null&&(ie.callback=N),_=Tu(v,ie,Q),_!==null&&(Dd(_,v,Q,j),iv(_,v,Q))},enqueueForceUpdate:function(v,_){v=v._reactInternals;var N=ol(),j=mm(v),Q=Af(N,j);Q.tag=2,_!=null&&(Q.callback=_),_=Tu(v,Q,j),_!==null&&(Dd(_,v,j,N),iv(_,v,j))}};function oy(v,_,N,j,Q,ie,de){return v=v.stateNode,typeof v.shouldComponentUpdate=="function"?v.shouldComponentUpdate(j,ie,de):_.prototype&&_.prototype.isPureReactComponent?!on(N,j)||!on(Q,ie):!0}function Hp(v,_,N){var j=!1,Q=Ef,ie=_.contextType;return typeof ie=="object"&&ie!==null?ie=ru(ie):(Q=Ma(_)?Oa:sa.current,j=_.contextTypes,ie=(j=j!=null)?Np(v,Q):Ef),_=new _(N,ie),v.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=cm,v.stateNode=_,_._reactInternals=v,j&&(v=v.stateNode,v.__reactInternalMemoizedUnmaskedChildContext=Q,v.__reactInternalMemoizedMaskedChildContext=ie),_}function qp(v,_,N,j){v=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(N,j),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(N,j),_.state!==v&&cm.enqueueReplaceState(_,_.state,null)}function av(v,_,N,j){var Q=v.stateNode;Q.props=N,Q.state=v.memoizedState,Q.refs={},am(v);var ie=_.contextType;typeof ie=="object"&&ie!==null?Q.context=ru(ie):(ie=Ma(_)?Oa:sa.current,Q.context=Np(v,ie)),Q.state=v.memoizedState,ie=_.getDerivedStateFromProps,typeof ie=="function"&&(Vp(v,_,ie,N),Q.state=v.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof Q.getSnapshotBeforeUpdate=="function"||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(_=Q.state,typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount(),_!==Q.state&&cm.enqueueReplaceState(Q,Q.state,null),Mh(v,N,Q,j),Q.state=v.memoizedState),typeof Q.componentDidMount=="function"&&(v.flags|=4194308)}function $h(v,_){try{var N="",j=_;do N+=oe(j),j=j.return;while(j);var Q=N}catch(ie){Q=`
Error generating stack: `+ie.message+`
`+ie.stack}return{value:v,source:_,stack:Q,digest:null}}function ay(v,_,N){return{value:v,source:null,stack:N??null,digest:_??null}}function Rd(v,_){try{console.error(_.value)}catch(N){setTimeout(function(){throw N})}}var h2=typeof WeakMap=="function"?WeakMap:Map;function uy(v,_,N){N=Af(-1,N),N.tag=3,N.payload={element:null};var j=_.value;return N.callback=function(){_2||(_2=!0,AC=j),Rd(v,_)},N}function T(v,_,N){N=Af(-1,N),N.tag=3;var j=v.type.getDerivedStateFromError;if(typeof j=="function"){var Q=_.value;N.payload=function(){return j(Q)},N.callback=function(){Rd(v,_)}}var ie=v.stateNode;return ie!==null&&typeof ie.componentDidCatch=="function"&&(N.callback=function(){Rd(v,_),typeof j!="function"&&(hm===null?hm=new Set([this]):hm.add(this));var de=_.stack;this.componentDidCatch(_.value,{componentStack:de!==null?de:""})}),N}function A(v,_,N){var j=v.pingCache;if(j===null){j=v.pingCache=new h2;var Q=new Set;j.set(_,Q)}else Q=j.get(_),Q===void 0&&(Q=new Set,j.set(_,Q));Q.has(N)||(Q.add(N),v=I7.bind(null,v,_,N),_.then(v,v))}function $(v){do{var _;if((_=v.tag===13)&&(_=v.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return v;v=v.return}while(v!==null);return null}function Y(v,_,N,j,Q){return v.mode&1?(v.flags|=65536,v.lanes=Q,v):(v===_?v.flags|=65536:(v.flags|=128,N.flags|=131072,N.flags&=-52805,N.tag===1&&(N.alternate===null?N.tag=17:(_=Af(-1,1),_.tag=2,Tu(N,_,1))),N.lanes|=1),v)}var J=w.ReactCurrentOwner,ae=!1;function xe(v,_,N,j){_.child=v===null?Eu(_,null,N,j):Es(_,v.child,N,j)}function He(v,_,N,j,Q){N=N.render;var ie=_.ref;return Lc(_,Q),j=Rf(v,_,N,j,ie,Q),N=Bp(),v!==null&&!ae?(_.updateQueue=v.updateQueue,_.flags&=-2053,v.lanes&=~Q,$o(v,_,Q)):(bi&&N&&Dh(_),_.flags|=1,xe(v,_,j,Q),_.child)}function at(v,_,N,j,Q){if(v===null){var ie=N.type;return typeof ie=="function"&&!A2(ie)&&ie.defaultProps===void 0&&N.compare===null&&N.defaultProps===void 0?(_.tag=15,_.type=ie,Ft(v,_,ie,j,Q)):(v=k2(N.type,null,j,_,_.mode,Q),v.ref=_.ref,v.return=_,_.child=v)}if(ie=v.child,!(v.lanes&Q)){var de=ie.memoizedProps;if(N=N.compare,N=N!==null?N:on,N(de,j)&&v.ref===_.ref)return $o(v,_,Q)}return _.flags|=1,v=Od(ie,j),v.ref=_.ref,v.return=_,_.child=v}function Ft(v,_,N,j,Q){if(v!==null){var ie=v.memoizedProps;if(on(ie,j)&&v.ref===_.ref)if(ae=!1,_.pendingProps=j=ie,(v.lanes&Q)!==0)v.flags&131072&&(ae=!0);else return _.lanes=v.lanes,$o(v,_,Q)}return an(v,_,N,j,Q)}function yn(v,_,N){var j=_.pendingProps,Q=j.children,ie=v!==null?v.memoizedState:null;if(j.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fi(cv,Uc),Uc|=N;else{if(!(N&1073741824))return v=ie!==null?ie.baseLanes|N:N,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:v,cachePool:null,transitions:null},_.updateQueue=null,Fi(cv,Uc),Uc|=v,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},j=ie!==null?ie.baseLanes:N,Fi(cv,Uc),Uc|=j}else ie!==null?(j=ie.baseLanes|N,_.memoizedState=null):j=N,Fi(cv,Uc),Uc|=j;return xe(v,_,Q,N),_.child}function tr(v,_){var N=_.ref;(v===null&&N!==null||v!==null&&v.ref!==N)&&(_.flags|=512,_.flags|=2097152)}function an(v,_,N,j,Q){var ie=Ma(N)?Oa:sa.current;return ie=Np(_,ie),Lc(_,Q),N=Rf(v,_,N,j,ie,Q),j=Bp(),v!==null&&!ae?(_.updateQueue=v.updateQueue,_.flags&=-2053,v.lanes&=~Q,$o(v,_,Q)):(bi&&j&&Dh(_),_.flags|=1,xe(v,_,N,Q),_.child)}function Ui(v,_,N,j,Q){if(Ma(N)){var ie=!0;Ja(_)}else ie=!1;if(Lc(_,Q),_.stateNode===null)Br(v,_),Hp(_,N,j),av(_,N,j,Q),j=!0;else if(v===null){var de=_.stateNode,ke=_.memoizedProps;de.props=ke;var Le=de.context,st=N.contextType;typeof st=="object"&&st!==null?st=ru(st):(st=Ma(N)?Oa:sa.current,st=Np(_,st));var Ot=N.getDerivedStateFromProps,Ut=typeof Ot=="function"||typeof de.getSnapshotBeforeUpdate=="function";Ut||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(ke!==j||Le!==st)&&qp(_,de,j,st),Su=!1;var Dt=_.memoizedState;de.state=Dt,Mh(_,j,de,Q),Le=_.memoizedState,ke!==j||Dt!==Le||Da.current||Su?(typeof Ot=="function"&&(Vp(_,N,Ot,j),Le=_.memoizedState),(ke=Su||oy(_,N,ke,j,Dt,Le,st))?(Ut||typeof de.UNSAFE_componentWillMount!="function"&&typeof de.componentWillMount!="function"||(typeof de.componentWillMount=="function"&&de.componentWillMount(),typeof de.UNSAFE_componentWillMount=="function"&&de.UNSAFE_componentWillMount()),typeof de.componentDidMount=="function"&&(_.flags|=4194308)):(typeof de.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=j,_.memoizedState=Le),de.props=j,de.state=Le,de.context=st,j=ke):(typeof de.componentDidMount=="function"&&(_.flags|=4194308),j=!1)}else{de=_.stateNode,rv(v,_),ke=_.memoizedProps,st=_.type===_.elementType?ke:Lo(_.type,ke),de.props=st,Ut=_.pendingProps,Dt=de.context,Le=N.contextType,typeof Le=="object"&&Le!==null?Le=ru(Le):(Le=Ma(N)?Oa:sa.current,Le=Np(_,Le));var pn=N.getDerivedStateFromProps;(Ot=typeof pn=="function"||typeof de.getSnapshotBeforeUpdate=="function")||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(ke!==Ut||Dt!==Le)&&qp(_,de,j,Le),Su=!1,Dt=_.memoizedState,de.state=Dt,Mh(_,j,de,Q);var En=_.memoizedState;ke!==Ut||Dt!==En||Da.current||Su?(typeof pn=="function"&&(Vp(_,N,pn,j),En=_.memoizedState),(st=Su||oy(_,N,st,j,Dt,En,Le)||!1)?(Ot||typeof de.UNSAFE_componentWillUpdate!="function"&&typeof de.componentWillUpdate!="function"||(typeof de.componentWillUpdate=="function"&&de.componentWillUpdate(j,En,Le),typeof de.UNSAFE_componentWillUpdate=="function"&&de.UNSAFE_componentWillUpdate(j,En,Le)),typeof de.componentDidUpdate=="function"&&(_.flags|=4),typeof de.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof de.componentDidUpdate!="function"||ke===v.memoizedProps&&Dt===v.memoizedState||(_.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||ke===v.memoizedProps&&Dt===v.memoizedState||(_.flags|=1024),_.memoizedProps=j,_.memoizedState=En),de.props=j,de.state=En,de.context=Le,j=st):(typeof de.componentDidUpdate!="function"||ke===v.memoizedProps&&Dt===v.memoizedState||(_.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||ke===v.memoizedProps&&Dt===v.memoizedState||(_.flags|=1024),j=!1)}return Si(v,_,N,j,ie,Q)}function Si(v,_,N,j,Q,ie){tr(v,_);var de=(_.flags&128)!==0;if(!j&&!de)return Q&&c2(_,N,!1),$o(v,_,ie);j=_.stateNode,J.current=_;var ke=de&&typeof N.getDerivedStateFromError!="function"?null:j.render();return _.flags|=1,v!==null&&de?(_.child=Es(_,v.child,null,ie),_.child=Es(_,null,ke,ie)):xe(v,_,ke,ie),_.memoizedState=j.state,Q&&c2(_,N,!0),_.child}function su(v){var _=v.stateNode;_.pendingContext?_x(v,_.pendingContext,_.pendingContext!==_.context):_.context&&_x(v,_.context,!1),Lh(v,_.containerInfo)}function Fo(v,_,N,j,Q){return Oc(),zl(Q),_.flags|=256,xe(v,_,N,j),_.child}var it={dehydrated:null,treeContext:null,retryLane:0};function qe(v){return{baseLanes:v,cachePool:null,transitions:null}}function ct(v,_,N){var j=_.pendingProps,Q=Bi.current,ie=!1,de=(_.flags&128)!==0,ke;if((ke=de)||(ke=v!==null&&v.memoizedState===null?!1:(Q&2)!==0),ke?(ie=!0,_.flags&=-129):(v===null||v.memoizedState!==null)&&(Q|=1),Fi(Bi,Q&1),v===null)return aa(_),v=_.memoizedState,v!==null&&(v=v.dehydrated,v!==null)?(_.mode&1?v.data==="$!"?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(de=j.children,v=j.fallback,ie?(j=_.mode,ie=_.child,de={mode:"hidden",children:de},!(j&1)&&ie!==null?(ie.childLanes=0,ie.pendingProps=de):ie=R2(de,j,0,null),v=hy(v,j,N,null),ie.return=_,v.return=_,ie.sibling=v,_.child=ie,_.child.memoizedState=qe(N),_.memoizedState=it,v):rn(_,de));if(Q=v.memoizedState,Q!==null&&(ke=Q.dehydrated,ke!==null))return Gt(v,_,de,j,ke,Q,N);if(ie){ie=j.fallback,de=_.mode,Q=v.child,ke=Q.sibling;var Le={mode:"hidden",children:j.children};return!(de&1)&&_.child!==Q?(j=_.child,j.childLanes=0,j.pendingProps=Le,_.deletions=null):(j=Od(Q,Le),j.subtreeFlags=Q.subtreeFlags&14680064),ke!==null?ie=Od(ke,ie):(ie=hy(ie,de,N,null),ie.flags|=2),ie.return=_,j.return=_,j.sibling=ie,_.child=j,j=ie,ie=_.child,de=v.child.memoizedState,de=de===null?qe(N):{baseLanes:de.baseLanes|N,cachePool:null,transitions:de.transitions},ie.memoizedState=de,ie.childLanes=v.childLanes&~N,_.memoizedState=it,j}return ie=v.child,v=ie.sibling,j=Od(ie,{mode:"visible",children:j.children}),!(_.mode&1)&&(j.lanes=N),j.return=_,j.sibling=null,v!==null&&(N=_.deletions,N===null?(_.deletions=[v],_.flags|=16):N.push(v)),_.child=j,_.memoizedState=null,j}function rn(v,_){return _=R2({mode:"visible",children:_},v.mode,0,null),_.return=v,v.child=_}function kn(v,_,N,j){return j!==null&&zl(j),Es(_,v.child,null,N),v=rn(_,_.pendingProps.children),v.flags|=2,_.memoizedState=null,v}function Gt(v,_,N,j,Q,ie,de){if(N)return _.flags&256?(_.flags&=-257,j=ay(Error(n(422))),kn(v,_,de,j)):_.memoizedState!==null?(_.child=v.child,_.flags|=128,null):(ie=j.fallback,Q=_.mode,j=R2({mode:"visible",children:j.children},Q,0,null),ie=hy(ie,Q,de,null),ie.flags|=2,j.return=_,ie.return=_,j.sibling=ie,_.child=j,_.mode&1&&Es(_,v.child,null,de),_.child.memoizedState=qe(de),_.memoizedState=it,ie);if(!(_.mode&1))return kn(v,_,de,null);if(Q.data==="$!"){if(j=Q.nextSibling&&Q.nextSibling.dataset,j)var ke=j.dgst;return j=ke,ie=Error(n(419)),j=ay(ie,j,void 0),kn(v,_,de,j)}if(ke=(de&v.childLanes)!==0,ae||ke){if(j=ja,j!==null){switch(de&-de){case 4:Q=2;break;case 16:Q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Q=32;break;case 536870912:Q=268435456;break;default:Q=0}Q=Q&(j.suspendedLanes|de)?0:Q,Q!==0&&Q!==ie.retryLane&&(ie.retryLane=Q,nl(v,Q),Dd(j,v,Q,-1))}return DC(),j=ay(Error(n(421))),kn(v,_,de,j)}return Q.data==="$?"?(_.flags|=128,_.child=v.child,_=P7.bind(null,v),Q._reactRetry=_,null):(v=ie.treeContext,nn=wf(Q.nextSibling),La=_,bi=!0,el=null,v!==null&&(tu[nu++]=wu,tu[nu++]=es,tu[nu++]=Nh,wu=v.id,es=v.overflow,Nh=_),_=rn(_,j.children),_.flags|=4096,_)}function Kn(v,_,N){v.lanes|=_;var j=v.alternate;j!==null&&(j.lanes|=_),Mo(v.return,_,N)}function Fr(v,_,N,j,Q){var ie=v.memoizedState;ie===null?v.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:j,tail:N,tailMode:Q}:(ie.isBackwards=_,ie.rendering=null,ie.renderingStartTime=0,ie.last=j,ie.tail=N,ie.tailMode=Q)}function rs(v,_,N){var j=_.pendingProps,Q=j.revealOrder,ie=j.tail;if(xe(v,_,j.children,N),j=Bi.current,j&2)j=j&1|2,_.flags|=128;else{if(v!==null&&v.flags&128)e:for(v=_.child;v!==null;){if(v.tag===13)v.memoizedState!==null&&Kn(v,N,_);else if(v.tag===19)Kn(v,N,_);else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===_)break e;for(;v.sibling===null;){if(v.return===null||v.return===_)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}j&=1}if(Fi(Bi,j),!(_.mode&1))_.memoizedState=null;else switch(Q){case"forwards":for(N=_.child,Q=null;N!==null;)v=N.alternate,v!==null&&Td(v)===null&&(Q=N),N=N.sibling;N=Q,N===null?(Q=_.child,_.child=null):(Q=N.sibling,N.sibling=null),Fr(_,!1,Q,N,ie);break;case"backwards":for(N=null,Q=_.child,_.child=null;Q!==null;){if(v=Q.alternate,v!==null&&Td(v)===null){_.child=Q;break}v=Q.sibling,Q.sibling=N,N=Q,Q=v}Fr(_,!0,N,null,ie);break;case"together":Fr(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function Br(v,_){!(_.mode&1)&&v!==null&&(v.alternate=null,_.alternate=null,_.flags|=2)}function $o(v,_,N){if(v!==null&&(_.dependencies=v.dependencies),dm|=_.lanes,!(N&_.childLanes))return null;if(v!==null&&_.child!==v.child)throw Error(n(153));if(_.child!==null){for(v=_.child,N=Od(v,v.pendingProps),_.child=N,N.return=_;v.sibling!==null;)v=v.sibling,N=N.sibling=Od(v,v.pendingProps),N.return=_;N.sibling=null}return _.child}function p2(v,_,N){switch(_.tag){case 3:su(_),Oc();break;case 5:Lp(_);break;case 1:Ma(_.type)&&Ja(_);break;case 4:Lh(_,_.stateNode.containerInfo);break;case 10:var j=_.type._context,Q=_.memoizedProps.value;Fi(sm,j._currentValue),j._currentValue=Q;break;case 13:if(j=_.memoizedState,j!==null)return j.dehydrated!==null?(Fi(Bi,Bi.current&1),_.flags|=128,null):N&_.child.childLanes?ct(v,_,N):(Fi(Bi,Bi.current&1),v=$o(v,_,N),v!==null?v.sibling:null);Fi(Bi,Bi.current&1);break;case 19:if(j=(N&_.childLanes)!==0,v.flags&128){if(j)return rs(v,_,N);_.flags|=128}if(Q=_.memoizedState,Q!==null&&(Q.rendering=null,Q.tail=null,Q.lastEffect=null),Fi(Bi,Bi.current),j)break;return null;case 22:case 23:return _.lanes=0,yn(v,_,N)}return $o(v,_,N)}var ou,bC,DI,xC;ou=function(v,_){for(var N=_.child;N!==null;){if(N.tag===5||N.tag===6)v.appendChild(N.stateNode);else if(N.tag!==4&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===_)break;for(;N.sibling===null;){if(N.return===null||N.return===_)return;N=N.return}N.sibling.return=N.return,N=N.sibling}},bC=function(){},DI=function(v,_,N,j){var Q=v.memoizedProps;if(Q!==j){v=_.stateNode,Vs($i.current);var ie=null;switch(N){case"input":Q=Me(v,Q),j=Me(v,j),ie=[];break;case"select":Q=X({},Q,{value:void 0}),j=X({},j,{value:void 0}),ie=[];break;case"textarea":Q=Et(v,Q),j=Et(v,j),ie=[];break;default:typeof Q.onClick!="function"&&typeof j.onClick=="function"&&(v.onclick=Tp)}nr(N,j);var de;N=null;for(st in Q)if(!j.hasOwnProperty(st)&&Q.hasOwnProperty(st)&&Q[st]!=null)if(st==="style"){var ke=Q[st];for(de in ke)ke.hasOwnProperty(de)&&(N||(N={}),N[de]="")}else st!=="dangerouslySetInnerHTML"&&st!=="children"&&st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&st!=="autoFocus"&&(i.hasOwnProperty(st)?ie||(ie=[]):(ie=ie||[]).push(st,null));for(st in j){var Le=j[st];if(ke=Q!=null?Q[st]:void 0,j.hasOwnProperty(st)&&Le!==ke&&(Le!=null||ke!=null))if(st==="style")if(ke){for(de in ke)!ke.hasOwnProperty(de)||Le&&Le.hasOwnProperty(de)||(N||(N={}),N[de]="");for(de in Le)Le.hasOwnProperty(de)&&ke[de]!==Le[de]&&(N||(N={}),N[de]=Le[de])}else N||(ie||(ie=[]),ie.push(st,N)),N=Le;else st==="dangerouslySetInnerHTML"?(Le=Le?Le.__html:void 0,ke=ke?ke.__html:void 0,Le!=null&&ke!==Le&&(ie=ie||[]).push(st,Le)):st==="children"?typeof Le!="string"&&typeof Le!="number"||(ie=ie||[]).push(st,""+Le):st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&(i.hasOwnProperty(st)?(Le!=null&&st==="onScroll"&&Wi("scroll",v),ie||ke===Le||(ie=[])):(ie=ie||[]).push(st,Le))}N&&(ie=ie||[]).push("style",N);var st=ie;(_.updateQueue=st)&&(_.flags|=4)}},xC=function(v,_,N,j){N!==j&&(_.flags|=4)};function Rx(v,_){if(!bi)switch(v.tailMode){case"hidden":_=v.tail;for(var N=null;_!==null;)_.alternate!==null&&(N=_),_=_.sibling;N===null?v.tail=null:N.sibling=null;break;case"collapsed":N=v.tail;for(var j=null;N!==null;)N.alternate!==null&&(j=N),N=N.sibling;j===null?_||v.tail===null?v.tail=null:v.tail.sibling=null:j.sibling=null}}function au(v){var _=v.alternate!==null&&v.alternate.child===v.child,N=0,j=0;if(_)for(var Q=v.child;Q!==null;)N|=Q.lanes|Q.childLanes,j|=Q.subtreeFlags&14680064,j|=Q.flags&14680064,Q.return=v,Q=Q.sibling;else for(Q=v.child;Q!==null;)N|=Q.lanes|Q.childLanes,j|=Q.subtreeFlags,j|=Q.flags,Q.return=v,Q=Q.sibling;return v.subtreeFlags|=j,v.childLanes=N,_}function E7(v,_,N){var j=_.pendingProps;switch(Is(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return au(_),null;case 1:return Ma(_.type)&&nm(),au(_),null;case 3:return j=_.stateNode,Yi(),Gi(Da),Gi(sa),la(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(v===null||v.child===null)&&(im(_)?_.flags|=4:v===null||v.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,el!==null&&(IC(el),el=null))),bC(v,_),au(_),null;case 5:kf(_);var Q=Vs(Ns.current);if(N=_.type,v!==null&&_.stateNode!=null)DI(v,_,N,j,Q),v.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!j){if(_.stateNode===null)throw Error(n(166));return au(_),null}if(v=Vs($i.current),im(_)){j=_.stateNode,N=_.type;var ie=_.memoizedProps;switch(j[Ul]=_,j[kh]=ie,v=(_.mode&1)!==0,N){case"dialog":Wi("cancel",j),Wi("close",j);break;case"iframe":case"object":case"embed":Wi("load",j);break;case"video":case"audio":for(Q=0;Q<jl.length;Q++)Wi(jl[Q],j);break;case"source":Wi("error",j);break;case"img":case"image":case"link":Wi("error",j),Wi("load",j);break;case"details":Wi("toggle",j);break;case"input":Ye(j,ie),Wi("invalid",j);break;case"select":j._wrapperState={wasMultiple:!!ie.multiple},Wi("invalid",j);break;case"textarea":Ke(j,ie),Wi("invalid",j)}nr(N,ie),Q=null;for(var de in ie)if(ie.hasOwnProperty(de)){var ke=ie[de];de==="children"?typeof ke=="string"?j.textContent!==ke&&(ie.suppressHydrationWarning!==!0&&tm(j.textContent,ke,v),Q=["children",ke]):typeof ke=="number"&&j.textContent!==""+ke&&(ie.suppressHydrationWarning!==!0&&tm(j.textContent,ke,v),Q=["children",""+ke]):i.hasOwnProperty(de)&&ke!=null&&de==="onScroll"&&Wi("scroll",j)}switch(N){case"input":ge(j),nt(j,ie,!0);break;case"textarea":ge(j),sn(j);break;case"select":case"option":break;default:typeof ie.onClick=="function"&&(j.onclick=Tp)}j=Q,_.updateQueue=j,j!==null&&(_.flags|=4)}else{de=Q.nodeType===9?Q:Q.ownerDocument,v==="http://www.w3.org/1999/xhtml"&&(v=Fe(N)),v==="http://www.w3.org/1999/xhtml"?N==="script"?(v=de.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild)):typeof j.is=="string"?v=de.createElement(N,{is:j.is}):(v=de.createElement(N),N==="select"&&(de=v,j.multiple?de.multiple=!0:j.size&&(de.size=j.size))):v=de.createElementNS(v,N),v[Ul]=_,v[kh]=j,ou(v,_,!1,!1),_.stateNode=v;e:{switch(de=Ei(N,j),N){case"dialog":Wi("cancel",v),Wi("close",v),Q=j;break;case"iframe":case"object":case"embed":Wi("load",v),Q=j;break;case"video":case"audio":for(Q=0;Q<jl.length;Q++)Wi(jl[Q],v);Q=j;break;case"source":Wi("error",v),Q=j;break;case"img":case"image":case"link":Wi("error",v),Wi("load",v),Q=j;break;case"details":Wi("toggle",v),Q=j;break;case"input":Ye(v,j),Q=Me(v,j),Wi("invalid",v);break;case"option":Q=j;break;case"select":v._wrapperState={wasMultiple:!!j.multiple},Q=X({},j,{value:void 0}),Wi("invalid",v);break;case"textarea":Ke(v,j),Q=Et(v,j),Wi("invalid",v);break;default:Q=j}nr(N,Q),ke=Q;for(ie in ke)if(ke.hasOwnProperty(ie)){var Le=ke[ie];ie==="style"?wr(v,Le):ie==="dangerouslySetInnerHTML"?(Le=Le?Le.__html:void 0,Le!=null&&Vt(v,Le)):ie==="children"?typeof Le=="string"?(N!=="textarea"||Le!=="")&&Wt(v,Le):typeof Le=="number"&&Wt(v,""+Le):ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&ie!=="autoFocus"&&(i.hasOwnProperty(ie)?Le!=null&&ie==="onScroll"&&Wi("scroll",v):Le!=null&&x(v,ie,Le,de))}switch(N){case"input":ge(v),nt(v,j,!1);break;case"textarea":ge(v),sn(v);break;case"option":j.value!=null&&v.setAttribute("value",""+he(j.value));break;case"select":v.multiple=!!j.multiple,ie=j.value,ie!=null?It(v,!!j.multiple,ie,!1):j.defaultValue!=null&&It(v,!!j.multiple,j.defaultValue,!0);break;default:typeof Q.onClick=="function"&&(v.onclick=Tp)}switch(N){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}}j&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return au(_),null;case 6:if(v&&_.stateNode!=null)xC(v,_,v.memoizedProps,j);else{if(typeof j!="string"&&_.stateNode===null)throw Error(n(166));if(N=Vs(Ns.current),Vs($i.current),im(_)){if(j=_.stateNode,N=_.memoizedProps,j[Ul]=_,(ie=j.nodeValue!==N)&&(v=La,v!==null))switch(v.tag){case 3:tm(j.nodeValue,N,(v.mode&1)!==0);break;case 5:v.memoizedProps.suppressHydrationWarning!==!0&&tm(j.nodeValue,N,(v.mode&1)!==0)}ie&&(_.flags|=4)}else j=(N.nodeType===9?N:N.ownerDocument).createTextNode(j),j[Ul]=_,_.stateNode=j}return au(_),null;case 13:if(Gi(Bi),j=_.memoizedState,v===null||v.memoizedState!==null&&v.memoizedState.dehydrated!==null){if(bi&&nn!==null&&_.mode&1&&!(_.flags&128))tv(),Oc(),_.flags|=98560,ie=!1;else if(ie=im(_),j!==null&&j.dehydrated!==null){if(v===null){if(!ie)throw Error(n(318));if(ie=_.memoizedState,ie=ie!==null?ie.dehydrated:null,!ie)throw Error(n(317));ie[Ul]=_}else Oc(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;au(_),ie=!1}else el!==null&&(IC(el),el=null),ie=!0;if(!ie)return _.flags&65536?_:null}return _.flags&128?(_.lanes=N,_):(j=j!==null,j!==(v!==null&&v.memoizedState!==null)&&j&&(_.child.flags|=8192,_.mode&1&&(v===null||Bi.current&1?ca===0&&(ca=3):DC())),_.updateQueue!==null&&(_.flags|=4),au(_),null);case 4:return Yi(),bC(v,_),v===null&&_f(_.stateNode.containerInfo),au(_),null;case 10:return Jg(_.type._context),au(_),null;case 17:return Ma(_.type)&&nm(),au(_),null;case 19:if(Gi(Bi),ie=_.memoizedState,ie===null)return au(_),null;if(j=(_.flags&128)!==0,de=ie.rendering,de===null)if(j)Rx(ie,!1);else{if(ca!==0||v!==null&&v.flags&128)for(v=_.child;v!==null;){if(de=Td(v),de!==null){for(_.flags|=128,Rx(ie,!1),j=de.updateQueue,j!==null&&(_.updateQueue=j,_.flags|=4),_.subtreeFlags=0,j=N,N=_.child;N!==null;)ie=N,v=j,ie.flags&=14680066,de=ie.alternate,de===null?(ie.childLanes=0,ie.lanes=v,ie.child=null,ie.subtreeFlags=0,ie.memoizedProps=null,ie.memoizedState=null,ie.updateQueue=null,ie.dependencies=null,ie.stateNode=null):(ie.childLanes=de.childLanes,ie.lanes=de.lanes,ie.child=de.child,ie.subtreeFlags=0,ie.deletions=null,ie.memoizedProps=de.memoizedProps,ie.memoizedState=de.memoizedState,ie.updateQueue=de.updateQueue,ie.type=de.type,v=de.dependencies,ie.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),N=N.sibling;return Fi(Bi,Bi.current&1|2),_.child}v=v.sibling}ie.tail!==null&&Er()>ly&&(_.flags|=128,j=!0,Rx(ie,!1),_.lanes=4194304)}else{if(!j)if(v=Td(de),v!==null){if(_.flags|=128,j=!0,N=v.updateQueue,N!==null&&(_.updateQueue=N,_.flags|=4),Rx(ie,!0),ie.tail===null&&ie.tailMode==="hidden"&&!de.alternate&&!bi)return au(_),null}else 2*Er()-ie.renderingStartTime>ly&&N!==1073741824&&(_.flags|=128,j=!0,Rx(ie,!1),_.lanes=4194304);ie.isBackwards?(de.sibling=_.child,_.child=de):(N=ie.last,N!==null?N.sibling=de:_.child=de,ie.last=de)}return ie.tail!==null?(_=ie.tail,ie.rendering=_,ie.tail=_.sibling,ie.renderingStartTime=Er(),_.sibling=null,N=Bi.current,Fi(Bi,j?N&1|2:N&1),_):(au(_),null);case 22:case 23:return NC(),j=_.memoizedState!==null,v!==null&&v.memoizedState!==null!==j&&(_.flags|=8192),j&&_.mode&1?Uc&1073741824&&(au(_),_.subtreeFlags&6&&(_.flags|=8192)):au(_),null;case 24:return null;case 25:return null}throw Error(n(156,_.tag))}function S7(v,_){switch(Is(_),_.tag){case 1:return Ma(_.type)&&nm(),v=_.flags,v&65536?(_.flags=v&-65537|128,_):null;case 3:return Yi(),Gi(Da),Gi(sa),la(),v=_.flags,v&65536&&!(v&128)?(_.flags=v&-65537|128,_):null;case 5:return kf(_),null;case 13:if(Gi(Bi),v=_.memoizedState,v!==null&&v.dehydrated!==null){if(_.alternate===null)throw Error(n(340));Oc()}return v=_.flags,v&65536?(_.flags=v&-65537|128,_):null;case 19:return Gi(Bi),null;case 4:return Yi(),null;case 10:return Jg(_.type._context),null;case 22:case 23:return NC(),null;case 24:return null;default:return null}}var m2=!1,Os=!1,il=typeof WeakSet=="function"?WeakSet:Set,vn=null;function uv(v,_){var N=v.ref;if(N!==null)if(typeof N=="function")try{N(null)}catch(j){Ws(v,_,j)}else N.current=null}function Ix(v,_,N){try{N()}catch(j){Ws(v,_,j)}}var OI=!1;function T7(v,_){if(Wg=Ce,v=er(),_h(v)){if("selectionStart"in v)var N={start:v.selectionStart,end:v.selectionEnd};else e:{N=(N=v.ownerDocument)&&N.defaultView||window;var j=N.getSelection&&N.getSelection();if(j&&j.rangeCount!==0){N=j.anchorNode;var Q=j.anchorOffset,ie=j.focusNode;j=j.focusOffset;try{N.nodeType,ie.nodeType}catch{N=null;break e}var de=0,ke=-1,Le=-1,st=0,Ot=0,Ut=v,Dt=null;t:for(;;){for(var pn;Ut!==N||Q!==0&&Ut.nodeType!==3||(ke=de+Q),Ut!==ie||j!==0&&Ut.nodeType!==3||(Le=de+j),Ut.nodeType===3&&(de+=Ut.nodeValue.length),(pn=Ut.firstChild)!==null;)Dt=Ut,Ut=pn;for(;;){if(Ut===v)break t;if(Dt===N&&++st===Q&&(ke=de),Dt===ie&&++Ot===j&&(Le=de),(pn=Ut.nextSibling)!==null)break;Ut=Dt,Dt=Ut.parentNode}Ut=pn}N=ke===-1||Le===-1?null:{start:ke,end:Le}}else N=null}N=N||{start:0,end:0}}else N=null;for(Cp={focusedElem:v,selectionRange:N},Ce=!1,vn=_;vn!==null;)if(_=vn,v=_.child,(_.subtreeFlags&1028)!==0&&v!==null)v.return=_,vn=v;else for(;vn!==null;){_=vn;try{var En=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(En!==null){var Tn=En.memoizedProps,oo=En.memoizedState,Je=_.stateNode,je=Je.getSnapshotBeforeUpdate(_.elementType===_.type?Tn:Lo(_.type,Tn),oo);Je.__reactInternalSnapshotBeforeUpdate=je}break;case 3:var tt=_.stateNode.containerInfo;tt.nodeType===1?tt.textContent="":tt.nodeType===9&&tt.documentElement&&tt.removeChild(tt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Yt){Ws(_,_.return,Yt)}if(v=_.sibling,v!==null){v.return=_.return,vn=v;break}vn=_.return}return En=OI,OI=!1,En}function Wp(v,_,N){var j=_.updateQueue;if(j=j!==null?j.lastEffect:null,j!==null){var Q=j=j.next;do{if((Q.tag&v)===v){var ie=Q.destroy;Q.destroy=void 0,ie!==void 0&&Ix(_,N,ie)}Q=Q.next}while(Q!==j)}}function Px(v,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var N=_=_.next;do{if((N.tag&v)===v){var j=N.create;N.destroy=j()}N=N.next}while(N!==_)}}function g2(v){var _=v.ref;if(_!==null){var N=v.stateNode;switch(v.tag){case 5:v=N;break;default:v=N}typeof _=="function"?_(v):_.current=v}}function MI(v){var _=v.alternate;_!==null&&(v.alternate=null,MI(_)),v.child=null,v.deletions=null,v.sibling=null,v.tag===5&&(_=v.stateNode,_!==null&&(delete _[Ul],delete _[kh],delete _[Kg],delete _[ye],delete _[Ip])),v.stateNode=null,v.return=null,v.dependencies=null,v.memoizedProps=null,v.memoizedState=null,v.pendingProps=null,v.stateNode=null,v.updateQueue=null}function LI(v){return v.tag===5||v.tag===3||v.tag===4}function FI(v){e:for(;;){for(;v.sibling===null;){if(v.return===null||LI(v.return))return null;v=v.return}for(v.sibling.return=v.return,v=v.sibling;v.tag!==5&&v.tag!==6&&v.tag!==18;){if(v.flags&2||v.child===null||v.tag===4)continue e;v.child.return=v,v=v.child}if(!(v.flags&2))return v.stateNode}}function _C(v,_,N){var j=v.tag;if(j===5||j===6)v=v.stateNode,_?N.nodeType===8?N.parentNode.insertBefore(v,_):N.insertBefore(v,_):(N.nodeType===8?(_=N.parentNode,_.insertBefore(v,N)):(_=N,_.appendChild(v)),N=N._reactRootContainer,N!=null||_.onclick!==null||(_.onclick=Tp));else if(j!==4&&(v=v.child,v!==null))for(_C(v,_,N),v=v.sibling;v!==null;)_C(v,_,N),v=v.sibling}function y2(v,_,N){var j=v.tag;if(j===5||j===6)v=v.stateNode,_?N.insertBefore(v,_):N.appendChild(v);else if(j!==4&&(v=v.child,v!==null))for(y2(v,_,N),v=v.sibling;v!==null;)y2(v,_,N),v=v.sibling}var Ba=null,Id=!1;function Bh(v,_,N){for(N=N.child;N!==null;)wC(v,_,N),N=N.sibling}function wC(v,_,N){if(qi&&typeof qi.onCommitFiberUnmount=="function")try{qi.onCommitFiberUnmount(Zo,N)}catch{}switch(N.tag){case 5:Os||uv(N,_);case 6:var j=Ba,Q=Id;Ba=null,Bh(v,_,N),Ba=j,Id=Q,Ba!==null&&(Id?(v=Ba,N=N.stateNode,v.nodeType===8?v.parentNode.removeChild(N):v.removeChild(N)):Ba.removeChild(N.stateNode));break;case 18:Ba!==null&&(Id?(v=Ba,N=N.stateNode,v.nodeType===8?K1(v.parentNode,N):v.nodeType===1&&K1(v,N),Gn(v)):K1(Ba,N.stateNode));break;case 4:j=Ba,Q=Id,Ba=N.stateNode.containerInfo,Id=!0,Bh(v,_,N),Ba=j,Id=Q;break;case 0:case 11:case 14:case 15:if(!Os&&(j=N.updateQueue,j!==null&&(j=j.lastEffect,j!==null))){Q=j=j.next;do{var ie=Q,de=ie.destroy;ie=ie.tag,de!==void 0&&(ie&2||ie&4)&&Ix(N,_,de),Q=Q.next}while(Q!==j)}Bh(v,_,N);break;case 1:if(!Os&&(uv(N,_),j=N.stateNode,typeof j.componentWillUnmount=="function"))try{j.props=N.memoizedProps,j.state=N.memoizedState,j.componentWillUnmount()}catch(ke){Ws(N,_,ke)}Bh(v,_,N);break;case 21:Bh(v,_,N);break;case 22:N.mode&1?(Os=(j=Os)||N.memoizedState!==null,Bh(v,_,N),Os=j):Bh(v,_,N);break;default:Bh(v,_,N)}}function lv(v){var _=v.updateQueue;if(_!==null){v.updateQueue=null;var N=v.stateNode;N===null&&(N=v.stateNode=new il),_.forEach(function(j){var Q=N7.bind(null,v,j);N.has(j)||(N.add(j),j.then(Q,Q))})}}function jc(v,_){var N=_.deletions;if(N!==null)for(var j=0;j<N.length;j++){var Q=N[j];try{var ie=v,de=_,ke=de;e:for(;ke!==null;){switch(ke.tag){case 5:Ba=ke.stateNode,Id=!1;break e;case 3:Ba=ke.stateNode.containerInfo,Id=!0;break e;case 4:Ba=ke.stateNode.containerInfo,Id=!0;break e}ke=ke.return}if(Ba===null)throw Error(n(160));wC(ie,de,Q),Ba=null,Id=!1;var Le=Q.alternate;Le!==null&&(Le.return=null),Q.return=null}catch(st){Ws(Q,_,st)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)EC(_,v),_=_.sibling}function EC(v,_){var N=v.alternate,j=v.flags;switch(v.tag){case 0:case 11:case 14:case 15:if(jc(_,v),Pd(v),j&4){try{Wp(3,v,v.return),Px(3,v)}catch(Tn){Ws(v,v.return,Tn)}try{Wp(5,v,v.return)}catch(Tn){Ws(v,v.return,Tn)}}break;case 1:jc(_,v),Pd(v),j&512&&N!==null&&uv(N,N.return);break;case 5:if(jc(_,v),Pd(v),j&512&&N!==null&&uv(N,N.return),v.flags&32){var Q=v.stateNode;try{Wt(Q,"")}catch(Tn){Ws(v,v.return,Tn)}}if(j&4&&(Q=v.stateNode,Q!=null)){var ie=v.memoizedProps,de=N!==null?N.memoizedProps:ie,ke=v.type,Le=v.updateQueue;if(v.updateQueue=null,Le!==null)try{ke==="input"&&ie.type==="radio"&&ie.name!=null&&lt(Q,ie),Ei(ke,de);var st=Ei(ke,ie);for(de=0;de<Le.length;de+=2){var Ot=Le[de],Ut=Le[de+1];Ot==="style"?wr(Q,Ut):Ot==="dangerouslySetInnerHTML"?Vt(Q,Ut):Ot==="children"?Wt(Q,Ut):x(Q,Ot,Ut,st)}switch(ke){case"input":We(Q,ie);break;case"textarea":Lt(Q,ie);break;case"select":var Dt=Q._wrapperState.wasMultiple;Q._wrapperState.wasMultiple=!!ie.multiple;var pn=ie.value;pn!=null?It(Q,!!ie.multiple,pn,!1):Dt!==!!ie.multiple&&(ie.defaultValue!=null?It(Q,!!ie.multiple,ie.defaultValue,!0):It(Q,!!ie.multiple,ie.multiple?[]:"",!1))}Q[kh]=ie}catch(Tn){Ws(v,v.return,Tn)}}break;case 6:if(jc(_,v),Pd(v),j&4){if(v.stateNode===null)throw Error(n(162));Q=v.stateNode,ie=v.memoizedProps;try{Q.nodeValue=ie}catch(Tn){Ws(v,v.return,Tn)}}break;case 3:if(jc(_,v),Pd(v),j&4&&N!==null&&N.memoizedState.isDehydrated)try{Gn(_.containerInfo)}catch(Tn){Ws(v,v.return,Tn)}break;case 4:jc(_,v),Pd(v);break;case 13:jc(_,v),Pd(v),Q=v.child,Q.flags&8192&&(ie=Q.memoizedState!==null,Q.stateNode.isHidden=ie,!ie||Q.alternate!==null&&Q.alternate.memoizedState!==null||(CC=Er())),j&4&&lv(v);break;case 22:if(Ot=N!==null&&N.memoizedState!==null,v.mode&1?(Os=(st=Os)||Ot,jc(_,v),Os=st):jc(_,v),Pd(v),j&8192){if(st=v.memoizedState!==null,(v.stateNode.isHidden=st)&&!Ot&&v.mode&1)for(vn=v,Ot=v.child;Ot!==null;){for(Ut=vn=Ot;vn!==null;){switch(Dt=vn,pn=Dt.child,Dt.tag){case 0:case 11:case 14:case 15:Wp(4,Dt,Dt.return);break;case 1:uv(Dt,Dt.return);var En=Dt.stateNode;if(typeof En.componentWillUnmount=="function"){j=Dt,N=Dt.return;try{_=j,En.props=_.memoizedProps,En.state=_.memoizedState,En.componentWillUnmount()}catch(Tn){Ws(j,N,Tn)}}break;case 5:uv(Dt,Dt.return);break;case 22:if(Dt.memoizedState!==null){fm(Ut);continue}}pn!==null?(pn.return=Dt,vn=pn):fm(Ut)}Ot=Ot.sibling}e:for(Ot=null,Ut=v;;){if(Ut.tag===5){if(Ot===null){Ot=Ut;try{Q=Ut.stateNode,st?(ie=Q.style,typeof ie.setProperty=="function"?ie.setProperty("display","none","important"):ie.display="none"):(ke=Ut.stateNode,Le=Ut.memoizedProps.style,de=Le!=null&&Le.hasOwnProperty("display")?Le.display:null,ke.style.display=Zn("display",de))}catch(Tn){Ws(v,v.return,Tn)}}}else if(Ut.tag===6){if(Ot===null)try{Ut.stateNode.nodeValue=st?"":Ut.memoizedProps}catch(Tn){Ws(v,v.return,Tn)}}else if((Ut.tag!==22&&Ut.tag!==23||Ut.memoizedState===null||Ut===v)&&Ut.child!==null){Ut.child.return=Ut,Ut=Ut.child;continue}if(Ut===v)break e;for(;Ut.sibling===null;){if(Ut.return===null||Ut.return===v)break e;Ot===Ut&&(Ot=null),Ut=Ut.return}Ot===Ut&&(Ot=null),Ut.sibling.return=Ut.return,Ut=Ut.sibling}}break;case 19:jc(_,v),Pd(v),j&4&&lv(v);break;case 21:break;default:jc(_,v),Pd(v)}}function Pd(v){var _=v.flags;if(_&2){try{e:{for(var N=v.return;N!==null;){if(LI(N)){var j=N;break e}N=N.return}throw Error(n(160))}switch(j.tag){case 5:var Q=j.stateNode;j.flags&32&&(Wt(Q,""),j.flags&=-33);var ie=FI(v);y2(v,ie,Q);break;case 3:case 4:var de=j.stateNode.containerInfo,ke=FI(v);_C(v,ke,de);break;default:throw Error(n(161))}}catch(Le){Ws(v,v.return,Le)}v.flags&=-3}_&4096&&(v.flags&=-4097)}function v2(v,_,N){vn=v,SC(v)}function SC(v,_,N){for(var j=(v.mode&1)!==0;vn!==null;){var Q=vn,ie=Q.child;if(Q.tag===22&&j){var de=Q.memoizedState!==null||m2;if(!de){var ke=Q.alternate,Le=ke!==null&&ke.memoizedState!==null||Os;ke=m2;var st=Os;if(m2=de,(Os=Le)&&!st)for(vn=Q;vn!==null;)de=vn,Le=de.child,de.tag===22&&de.memoizedState!==null?$I(Q):Le!==null?(Le.return=de,vn=Le):$I(Q);for(;ie!==null;)vn=ie,SC(ie),ie=ie.sibling;vn=Q,m2=ke,Os=st}Nd(v)}else Q.subtreeFlags&8772&&ie!==null?(ie.return=Q,vn=ie):Nd(v)}}function Nd(v){for(;vn!==null;){var _=vn;if(_.flags&8772){var N=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:Os||Px(5,_);break;case 1:var j=_.stateNode;if(_.flags&4&&!Os)if(N===null)j.componentDidMount();else{var Q=_.elementType===_.type?N.memoizedProps:Lo(_.type,N.memoizedProps);j.componentDidUpdate(Q,N.memoizedState,j.__reactInternalSnapshotBeforeUpdate)}var ie=_.updateQueue;ie!==null&&Ss(_,ie,j);break;case 3:var de=_.updateQueue;if(de!==null){if(N=null,_.child!==null)switch(_.child.tag){case 5:N=_.child.stateNode;break;case 1:N=_.child.stateNode}Ss(_,de,N)}break;case 5:var ke=_.stateNode;if(N===null&&_.flags&4){N=ke;var Le=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":Le.autoFocus&&N.focus();break;case"img":Le.src&&(N.src=Le.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var st=_.alternate;if(st!==null){var Ot=st.memoizedState;if(Ot!==null){var Ut=Ot.dehydrated;Ut!==null&&Gn(Ut)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Os||_.flags&512&&g2(_)}catch(Dt){Ws(_,_.return,Dt)}}if(_===v){vn=null;break}if(N=_.sibling,N!==null){N.return=_.return,vn=N;break}vn=_.return}}function fm(v){for(;vn!==null;){var _=vn;if(_===v){vn=null;break}var N=_.sibling;if(N!==null){N.return=_.return,vn=N;break}vn=_.return}}function $I(v){for(;vn!==null;){var _=vn;try{switch(_.tag){case 0:case 11:case 15:var N=_.return;try{Px(4,_)}catch(Le){Ws(_,N,Le)}break;case 1:var j=_.stateNode;if(typeof j.componentDidMount=="function"){var Q=_.return;try{j.componentDidMount()}catch(Le){Ws(_,Q,Le)}}var ie=_.return;try{g2(_)}catch(Le){Ws(_,ie,Le)}break;case 5:var de=_.return;try{g2(_)}catch(Le){Ws(_,de,Le)}}}catch(Le){Ws(_,_.return,Le)}if(_===v){vn=null;break}var ke=_.sibling;if(ke!==null){ke.return=_.return,vn=ke;break}vn=_.return}}var BI=Math.ceil,b2=w.ReactCurrentDispatcher,TC=w.ReactCurrentOwner,Df=w.ReactCurrentBatchConfig,ui=0,ja=null,Bo=null,uu=0,Uc=0,cv=Qa(0),ca=0,Nx=null,dm=0,Dx=0,x2=0,Ox=null,Vl=null,CC=0,ly=1/0,Gp=null,_2=!1,AC=null,hm=null,w2=!1,pm=null,sl=0,Mx=0,kC=null,E2=-1,Lx=0;function ol(){return ui&6?Er():E2!==-1?E2:E2=Er()}function mm(v){return v.mode&1?ui&2&&uu!==0?uu&-uu:nv.transition!==null?(Lx===0&&(Lx=jt()),Lx):(v=_n,v!==0||(v=window.event,v=v===void 0?16:gi(v.type)),v):1}function Dd(v,_,N,j){if(50<Mx)throw Mx=0,kC=null,Error(n(185));qn(v,N,j),(!(ui&2)||v!==ja)&&(v===ja&&(!(ui&2)&&(Dx|=N),ca===4&&gm(v,uu)),Hl(v,j),N===1&&ui===0&&!(_.mode&1)&&(ly=Er()+500,rm&&Rh()))}function Hl(v,_){var N=v.callbackNode;Nt(v,_);var j=ht(v,v===ja?uu:0);if(j===0)N!==null&&xc(N),v.callbackNode=null,v.callbackPriority=0;else if(_=j&-j,v.callbackPriority!==_){if(N!=null&&xc(N),_===1)v.tag===0?Za(jI.bind(null,v)):Xg(jI.bind(null,v)),Yg(function(){!(ui&6)&&Rh()}),N=null;else{switch(br(j)){case 1:N=xs;break;case 4:N=Ka;break;case 16:N=As;break;case 536870912:N=Sc;break;default:N=As}N=GI(N,S2.bind(null,v))}v.callbackPriority=_,v.callbackNode=N}}function S2(v,_){if(E2=-1,Lx=0,ui&6)throw Error(n(327));var N=v.callbackNode;if(fv()&&v.callbackNode!==N)return null;var j=ht(v,v===ja?uu:0);if(j===0)return null;if(j&30||j&v.expiredLanes||_)_=T2(v,j);else{_=j;var Q=ui;ui|=2;var ie=zI();(ja!==v||uu!==_)&&(Gp=null,ly=Er()+500,fy(v,_));do try{k7();break}catch(ke){UI(v,ke)}while(!0);Tf(),b2.current=ie,ui=Q,Bo!==null?_=0:(ja=null,uu=0,_=ca)}if(_!==0){if(_===2&&(Q=Rt(v),Q!==0&&(j=Q,_=RC(v,Q))),_===1)throw N=Nx,fy(v,0),gm(v,j),Hl(v,Er()),N;if(_===6)gm(v,j);else{if(Q=v.current.alternate,!(j&30)&&!C7(Q)&&(_=T2(v,j),_===2&&(ie=Rt(v),ie!==0&&(j=ie,_=RC(v,ie))),_===1))throw N=Nx,fy(v,0),gm(v,j),Hl(v,Er()),N;switch(v.finishedWork=Q,v.finishedLanes=j,_){case 0:case 1:throw Error(n(345));case 2:dy(v,Vl,Gp);break;case 3:if(gm(v,j),(j&130023424)===j&&(_=CC+500-Er(),10<_)){if(ht(v,0)!==0)break;if(Q=v.suspendedLanes,(Q&j)!==j){ol(),v.pingedLanes|=v.suspendedLanes&Q;break}v.timeoutHandle=Do(dy.bind(null,v,Vl,Gp),_);break}dy(v,Vl,Gp);break;case 4:if(gm(v,j),(j&4194240)===j)break;for(_=v.eventTimes,Q=-1;0<j;){var de=31-rr(j);ie=1<<de,de=_[de],de>Q&&(Q=de),j&=~ie}if(j=Q,j=Er()-j,j=(120>j?120:480>j?480:1080>j?1080:1920>j?1920:3e3>j?3e3:4320>j?4320:1960*BI(j/1960))-j,10<j){v.timeoutHandle=Do(dy.bind(null,v,Vl,Gp),j);break}dy(v,Vl,Gp);break;case 5:dy(v,Vl,Gp);break;default:throw Error(n(329))}}}return Hl(v,Er()),v.callbackNode===N?S2.bind(null,v):null}function RC(v,_){var N=Ox;return v.current.memoizedState.isDehydrated&&(fy(v,_).flags|=256),v=T2(v,_),v!==2&&(_=Vl,Vl=N,_!==null&&IC(_)),v}function IC(v){Vl===null?Vl=v:Vl.push.apply(Vl,v)}function C7(v){for(var _=v;;){if(_.flags&16384){var N=_.updateQueue;if(N!==null&&(N=N.stores,N!==null))for(var j=0;j<N.length;j++){var Q=N[j],ie=Q.getSnapshot;Q=Q.value;try{if(!et(ie(),Q))return!1}catch{return!1}}}if(N=_.child,_.subtreeFlags&16384&&N!==null)N.return=_,_=N;else{if(_===v)break;for(;_.sibling===null;){if(_.return===null||_.return===v)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function gm(v,_){for(_&=~x2,_&=~Dx,v.suspendedLanes|=_,v.pingedLanes&=~_,v=v.expirationTimes;0<_;){var N=31-rr(_),j=1<<N;v[N]=-1,_&=~j}}function jI(v){if(ui&6)throw Error(n(327));fv();var _=ht(v,0);if(!(_&1))return Hl(v,Er()),null;var N=T2(v,_);if(v.tag!==0&&N===2){var j=Rt(v);j!==0&&(_=j,N=RC(v,j))}if(N===1)throw N=Nx,fy(v,0),gm(v,_),Hl(v,Er()),N;if(N===6)throw Error(n(345));return v.finishedWork=v.current.alternate,v.finishedLanes=_,dy(v,Vl,Gp),Hl(v,Er()),null}function PC(v,_){var N=ui;ui|=1;try{return v(_)}finally{ui=N,ui===0&&(ly=Er()+500,rm&&Rh())}}function cy(v){pm!==null&&pm.tag===0&&!(ui&6)&&fv();var _=ui;ui|=1;var N=Df.transition,j=_n;try{if(Df.transition=null,_n=1,v)return v()}finally{_n=j,Df.transition=N,ui=_,!(ui&6)&&Rh()}}function NC(){Uc=cv.current,Gi(cv)}function fy(v,_){v.finishedWork=null,v.finishedLanes=0;var N=v.timeoutHandle;if(N!==-1&&(v.timeoutHandle=-1,Ap(N)),Bo!==null)for(N=Bo.return;N!==null;){var j=N;switch(Is(j),j.tag){case 1:j=j.type.childContextTypes,j!=null&&nm();break;case 3:Yi(),Gi(Da),Gi(sa),la();break;case 5:kf(j);break;case 4:Yi();break;case 13:Gi(Bi);break;case 19:Gi(Bi);break;case 10:Jg(j.type._context);break;case 22:case 23:NC()}N=N.return}if(ja=v,Bo=v=Od(v.current,null),uu=Uc=_,ca=0,Nx=null,x2=Dx=dm=0,Vl=Ox=null,Cf!==null){for(_=0;_<Cf.length;_++)if(N=Cf[_],j=N.interleaved,j!==null){N.interleaved=null;var Q=j.next,ie=N.pending;if(ie!==null){var de=ie.next;ie.next=Q,j.next=de}N.pending=j}Cf=null}return v}function UI(v,_){do{var N=Bo;try{if(Tf(),$p.current=lm,rl){for(var j=Ti.memoizedState;j!==null;){var Q=j.queue;Q!==null&&(Q.pending=null),j=j.next}rl=!1}if(Fa=0,Hs=ds=Ti=null,Fh=!1,Cu=0,TC.current=null,N===null||N.return===null){ca=1,Nx=_,Bo=null;break}e:{var ie=v,de=N.return,ke=N,Le=_;if(_=uu,ke.flags|=32768,Le!==null&&typeof Le=="object"&&typeof Le.then=="function"){var st=Le,Ot=ke,Ut=Ot.tag;if(!(Ot.mode&1)&&(Ut===0||Ut===11||Ut===15)){var Dt=Ot.alternate;Dt?(Ot.updateQueue=Dt.updateQueue,Ot.memoizedState=Dt.memoizedState,Ot.lanes=Dt.lanes):(Ot.updateQueue=null,Ot.memoizedState=null)}var pn=$(de);if(pn!==null){pn.flags&=-257,Y(pn,de,ke,ie,_),pn.mode&1&&A(ie,st,_),_=pn,Le=st;var En=_.updateQueue;if(En===null){var Tn=new Set;Tn.add(Le),_.updateQueue=Tn}else En.add(Le);break e}else{if(!(_&1)){A(ie,st,_),DC();break e}Le=Error(n(426))}}else if(bi&&ke.mode&1){var oo=$(de);if(oo!==null){!(oo.flags&65536)&&(oo.flags|=256),Y(oo,de,ke,ie,_),zl($h(Le,ke));break e}}ie=Le=$h(Le,ke),ca!==4&&(ca=2),Ox===null?Ox=[ie]:Ox.push(ie),ie=de;do{switch(ie.tag){case 3:ie.flags|=65536,_&=-_,ie.lanes|=_;var Je=uy(ie,Le,_);Zg(ie,Je);break e;case 1:ke=Le;var je=ie.type,tt=ie.stateNode;if(!(ie.flags&128)&&(typeof je.getDerivedStateFromError=="function"||tt!==null&&typeof tt.componentDidCatch=="function"&&(hm===null||!hm.has(tt)))){ie.flags|=65536,_&=-_,ie.lanes|=_;var Yt=T(ie,ke,_);Zg(ie,Yt);break e}}ie=ie.return}while(ie!==null)}HI(N)}catch(Cn){_=Cn,Bo===N&&N!==null&&(Bo=N=N.return);continue}break}while(!0)}function zI(){var v=b2.current;return b2.current=lm,v===null?lm:v}function DC(){(ca===0||ca===3||ca===2)&&(ca=4),ja===null||!(dm&268435455)&&!(Dx&268435455)||gm(ja,uu)}function T2(v,_){var N=ui;ui|=2;var j=zI();(ja!==v||uu!==_)&&(Gp=null,fy(v,_));do try{A7();break}catch(Q){UI(v,Q)}while(!0);if(Tf(),ui=N,b2.current=j,Bo!==null)throw Error(n(261));return ja=null,uu=0,ca}function A7(){for(;Bo!==null;)VI(Bo)}function k7(){for(;Bo!==null&&!_c();)VI(Bo)}function VI(v){var _=WI(v.alternate,v,Uc);v.memoizedProps=v.pendingProps,_===null?HI(v):Bo=_,TC.current=null}function HI(v){var _=v;do{var N=_.alternate;if(v=_.return,_.flags&32768){if(N=S7(N,_),N!==null){N.flags&=32767,Bo=N;return}if(v!==null)v.flags|=32768,v.subtreeFlags=0,v.deletions=null;else{ca=6,Bo=null;return}}else if(N=E7(N,_,Uc),N!==null){Bo=N;return}if(_=_.sibling,_!==null){Bo=_;return}Bo=_=v}while(_!==null);ca===0&&(ca=5)}function dy(v,_,N){var j=_n,Q=Df.transition;try{Df.transition=null,_n=1,R7(v,_,N,j)}finally{Df.transition=Q,_n=j}return null}function R7(v,_,N,j){do fv();while(pm!==null);if(ui&6)throw Error(n(327));N=v.finishedWork;var Q=v.finishedLanes;if(N===null)return null;if(v.finishedWork=null,v.finishedLanes=0,N===v.current)throw Error(n(177));v.callbackNode=null,v.callbackPriority=0;var ie=N.lanes|N.childLanes;if(Sn(v,ie),v===ja&&(Bo=ja=null,uu=0),!(N.subtreeFlags&2064)&&!(N.flags&2064)||w2||(w2=!0,GI(As,function(){return fv(),null})),ie=(N.flags&15990)!==0,N.subtreeFlags&15990||ie){ie=Df.transition,Df.transition=null;var de=_n;_n=1;var ke=ui;ui|=4,TC.current=null,T7(v,N),EC(N,v),Ug(Cp),Ce=!!Wg,Cp=Wg=null,v.current=N,v2(N),wc(),ui=ke,_n=de,Df.transition=ie}else v.current=N;if(w2&&(w2=!1,pm=v,sl=Q),ie=v.pendingLanes,ie===0&&(hm=null),ti(N.stateNode),Hl(v,Er()),_!==null)for(j=v.onRecoverableError,N=0;N<_.length;N++)Q=_[N],j(Q.value,{componentStack:Q.stack,digest:Q.digest});if(_2)throw _2=!1,v=AC,AC=null,v;return sl&1&&v.tag!==0&&fv(),ie=v.pendingLanes,ie&1?v===kC?Mx++:(Mx=0,kC=v):Mx=0,Rh(),null}function fv(){if(pm!==null){var v=br(sl),_=Df.transition,N=_n;try{if(Df.transition=null,_n=16>v?16:v,pm===null)var j=!1;else{if(v=pm,pm=null,sl=0,ui&6)throw Error(n(331));var Q=ui;for(ui|=4,vn=v.current;vn!==null;){var ie=vn,de=ie.child;if(vn.flags&16){var ke=ie.deletions;if(ke!==null){for(var Le=0;Le<ke.length;Le++){var st=ke[Le];for(vn=st;vn!==null;){var Ot=vn;switch(Ot.tag){case 0:case 11:case 15:Wp(8,Ot,ie)}var Ut=Ot.child;if(Ut!==null)Ut.return=Ot,vn=Ut;else for(;vn!==null;){Ot=vn;var Dt=Ot.sibling,pn=Ot.return;if(MI(Ot),Ot===st){vn=null;break}if(Dt!==null){Dt.return=pn,vn=Dt;break}vn=pn}}}var En=ie.alternate;if(En!==null){var Tn=En.child;if(Tn!==null){En.child=null;do{var oo=Tn.sibling;Tn.sibling=null,Tn=oo}while(Tn!==null)}}vn=ie}}if(ie.subtreeFlags&2064&&de!==null)de.return=ie,vn=de;else e:for(;vn!==null;){if(ie=vn,ie.flags&2048)switch(ie.tag){case 0:case 11:case 15:Wp(9,ie,ie.return)}var Je=ie.sibling;if(Je!==null){Je.return=ie.return,vn=Je;break e}vn=ie.return}}var je=v.current;for(vn=je;vn!==null;){de=vn;var tt=de.child;if(de.subtreeFlags&2064&&tt!==null)tt.return=de,vn=tt;else e:for(de=je;vn!==null;){if(ke=vn,ke.flags&2048)try{switch(ke.tag){case 0:case 11:case 15:Px(9,ke)}}catch(Cn){Ws(ke,ke.return,Cn)}if(ke===de){vn=null;break e}var Yt=ke.sibling;if(Yt!==null){Yt.return=ke.return,vn=Yt;break e}vn=ke.return}}if(ui=Q,Rh(),qi&&typeof qi.onPostCommitFiberRoot=="function")try{qi.onPostCommitFiberRoot(Zo,v)}catch{}j=!0}return j}finally{_n=N,Df.transition=_}}return!1}function C2(v,_,N){_=$h(N,_),_=uy(v,_,1),v=Tu(v,_,1),_=ol(),v!==null&&(qn(v,1,_),Hl(v,_))}function Ws(v,_,N){if(v.tag===3)C2(v,v,N);else for(;_!==null;){if(_.tag===3){C2(_,v,N);break}else if(_.tag===1){var j=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(hm===null||!hm.has(j))){v=$h(N,v),v=T(_,v,1),_=Tu(_,v,1),v=ol(),_!==null&&(qn(_,1,v),Hl(_,v));break}}_=_.return}}function I7(v,_,N){var j=v.pingCache;j!==null&&j.delete(_),_=ol(),v.pingedLanes|=v.suspendedLanes&N,ja===v&&(uu&N)===N&&(ca===4||ca===3&&(uu&130023424)===uu&&500>Er()-CC?fy(v,0):x2|=N),Hl(v,_)}function qI(v,_){_===0&&(v.mode&1?(_=ze,ze<<=1,!(ze&130023424)&&(ze=4194304)):_=1);var N=ol();v=nl(v,_),v!==null&&(qn(v,_,N),Hl(v,N))}function P7(v){var _=v.memoizedState,N=0;_!==null&&(N=_.retryLane),qI(v,N)}function N7(v,_){var N=0;switch(v.tag){case 13:var j=v.stateNode,Q=v.memoizedState;Q!==null&&(N=Q.retryLane);break;case 19:j=v.stateNode;break;default:throw Error(n(314))}j!==null&&j.delete(_),qI(v,N)}var WI;WI=function(v,_,N){if(v!==null)if(v.memoizedProps!==_.pendingProps||Da.current)ae=!0;else{if(!(v.lanes&N)&&!(_.flags&128))return ae=!1,p2(v,_,N);ae=!!(v.flags&131072)}else ae=!1,bi&&_.flags&1048576&&f2(_,Ph,_.index);switch(_.lanes=0,_.tag){case 2:var j=_.type;Br(v,_),v=_.pendingProps;var Q=Np(_,sa.current);Lc(_,N),Q=Rf(null,_,j,v,Q,N);var ie=Bp();return _.flags|=1,typeof Q=="object"&&Q!==null&&typeof Q.render=="function"&&Q.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Ma(j)?(ie=!0,Ja(_)):ie=!1,_.memoizedState=Q.state!==null&&Q.state!==void 0?Q.state:null,am(_),Q.updater=cm,_.stateNode=Q,Q._reactInternals=_,av(_,j,v,N),_=Si(null,_,j,!0,ie,N)):(_.tag=0,bi&&ie&&Dh(_),xe(null,_,Q,N),_=_.child),_;case 16:j=_.elementType;e:{switch(Br(v,_),v=_.pendingProps,Q=j._init,j=Q(j._payload),_.type=j,Q=_.tag=O7(j),v=Lo(j,v),Q){case 0:_=an(null,_,j,v,N);break e;case 1:_=Ui(null,_,j,v,N);break e;case 11:_=He(null,_,j,v,N);break e;case 14:_=at(null,_,j,Lo(j.type,v),N);break e}throw Error(n(306,j,""))}return _;case 0:return j=_.type,Q=_.pendingProps,Q=_.elementType===j?Q:Lo(j,Q),an(v,_,j,Q,N);case 1:return j=_.type,Q=_.pendingProps,Q=_.elementType===j?Q:Lo(j,Q),Ui(v,_,j,Q,N);case 3:e:{if(su(_),v===null)throw Error(n(387));j=_.pendingProps,ie=_.memoizedState,Q=ie.element,rv(v,_),Mh(_,j,null,N);var de=_.memoizedState;if(j=de.element,ie.isDehydrated)if(ie={element:j,isDehydrated:!1,cache:de.cache,pendingSuspenseBoundaries:de.pendingSuspenseBoundaries,transitions:de.transitions},_.updateQueue.baseState=ie,_.memoizedState=ie,_.flags&256){Q=$h(Error(n(423)),_),_=Fo(v,_,j,N,Q);break e}else if(j!==Q){Q=$h(Error(n(424)),_),_=Fo(v,_,j,N,Q);break e}else for(nn=wf(_.stateNode.containerInfo.firstChild),La=_,bi=!0,el=null,N=Eu(_,null,j,N),_.child=N;N;)N.flags=N.flags&-3|4096,N=N.sibling;else{if(Oc(),j===Q){_=$o(v,_,N);break e}xe(v,_,j,N)}_=_.child}return _;case 5:return Lp(_),v===null&&aa(_),j=_.type,Q=_.pendingProps,ie=v!==null?v.memoizedProps:null,de=Q.children,Gg(j,Q)?de=null:ie!==null&&Gg(j,ie)&&(_.flags|=32),tr(v,_),xe(v,_,de,N),_.child;case 6:return v===null&&aa(_),null;case 13:return ct(v,_,N);case 4:return Lh(_,_.stateNode.containerInfo),j=_.pendingProps,v===null?_.child=Es(_,null,j,N):xe(v,_,j,N),_.child;case 11:return j=_.type,Q=_.pendingProps,Q=_.elementType===j?Q:Lo(j,Q),He(v,_,j,Q,N);case 7:return xe(v,_,_.pendingProps,N),_.child;case 8:return xe(v,_,_.pendingProps.children,N),_.child;case 12:return xe(v,_,_.pendingProps.children,N),_.child;case 10:e:{if(j=_.type._context,Q=_.pendingProps,ie=_.memoizedProps,de=Q.value,Fi(sm,j._currentValue),j._currentValue=de,ie!==null)if(et(ie.value,de)){if(ie.children===Q.children&&!Da.current){_=$o(v,_,N);break e}}else for(ie=_.child,ie!==null&&(ie.return=_);ie!==null;){var ke=ie.dependencies;if(ke!==null){de=ie.child;for(var Le=ke.firstContext;Le!==null;){if(Le.context===j){if(ie.tag===1){Le=Af(-1,N&-N),Le.tag=2;var st=ie.updateQueue;if(st!==null){st=st.shared;var Ot=st.pending;Ot===null?Le.next=Le:(Le.next=Ot.next,Ot.next=Le),st.pending=Le}}ie.lanes|=N,Le=ie.alternate,Le!==null&&(Le.lanes|=N),Mo(ie.return,N,_),ke.lanes|=N;break}Le=Le.next}}else if(ie.tag===10)de=ie.type===_.type?null:ie.child;else if(ie.tag===18){if(de=ie.return,de===null)throw Error(n(341));de.lanes|=N,ke=de.alternate,ke!==null&&(ke.lanes|=N),Mo(de,N,_),de=ie.sibling}else de=ie.child;if(de!==null)de.return=ie;else for(de=ie;de!==null;){if(de===_){de=null;break}if(ie=de.sibling,ie!==null){ie.return=de.return,de=ie;break}de=de.return}ie=de}xe(v,_,Q.children,N),_=_.child}return _;case 9:return Q=_.type,j=_.pendingProps.children,Lc(_,N),Q=ru(Q),j=j(Q),_.flags|=1,xe(v,_,j,N),_.child;case 14:return j=_.type,Q=Lo(j,_.pendingProps),Q=Lo(j.type,Q),at(v,_,j,Q,N);case 15:return Ft(v,_,_.type,_.pendingProps,N);case 17:return j=_.type,Q=_.pendingProps,Q=_.elementType===j?Q:Lo(j,Q),Br(v,_),_.tag=1,Ma(j)?(v=!0,Ja(_)):v=!1,Lc(_,N),Hp(_,j,Q),av(_,j,Q,N),Si(null,_,j,!0,v,N);case 19:return rs(v,_,N);case 22:return yn(v,_,N)}throw Error(n(156,_.tag))};function GI(v,_){return gf(v,_)}function D7(v,_,N,j){this.tag=v,this.key=N,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Of(v,_,N,j){return new D7(v,_,N,j)}function A2(v){return v=v.prototype,!(!v||!v.isReactComponent)}function O7(v){if(typeof v=="function")return A2(v)?1:0;if(v!=null){if(v=v.$$typeof,v===H)return 11;if(v===z)return 14}return 2}function Od(v,_){var N=v.alternate;return N===null?(N=Of(v.tag,_,v.key,v.mode),N.elementType=v.elementType,N.type=v.type,N.stateNode=v.stateNode,N.alternate=v,v.alternate=N):(N.pendingProps=_,N.type=v.type,N.flags=0,N.subtreeFlags=0,N.deletions=null),N.flags=v.flags&14680064,N.childLanes=v.childLanes,N.lanes=v.lanes,N.child=v.child,N.memoizedProps=v.memoizedProps,N.memoizedState=v.memoizedState,N.updateQueue=v.updateQueue,_=v.dependencies,N.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},N.sibling=v.sibling,N.index=v.index,N.ref=v.ref,N}function k2(v,_,N,j,Q,ie){var de=2;if(j=v,typeof v=="function")A2(v)&&(de=1);else if(typeof v=="string")de=5;else e:switch(v){case R:return hy(N.children,Q,ie,_);case I:de=8,Q|=8;break;case O:return v=Of(12,N,_,Q|2),v.elementType=O,v.lanes=ie,v;case D:return v=Of(13,N,_,Q),v.elementType=D,v.lanes=ie,v;case B:return v=Of(19,N,_,Q),v.elementType=B,v.lanes=ie,v;case Z:return R2(N,Q,ie,_);default:if(typeof v=="object"&&v!==null)switch(v.$$typeof){case M:de=10;break e;case L:de=9;break e;case H:de=11;break e;case z:de=14;break e;case G:de=16,j=null;break e}throw Error(n(130,v==null?v:typeof v,""))}return _=Of(de,N,_,Q),_.elementType=v,_.type=j,_.lanes=ie,_}function hy(v,_,N,j){return v=Of(7,v,j,_),v.lanes=N,v}function R2(v,_,N,j){return v=Of(22,v,j,_),v.elementType=Z,v.lanes=N,v.stateNode={isHidden:!1},v}function OC(v,_,N){return v=Of(6,v,null,_),v.lanes=N,v}function MC(v,_,N){return _=Of(4,v.children!==null?v.children:[],v.key,_),_.lanes=N,_.stateNode={containerInfo:v.containerInfo,pendingChildren:null,implementation:v.implementation},_}function M7(v,_,N,j,Q){this.tag=_,this.containerInfo=v,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zt(0),this.expirationTimes=Zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zt(0),this.identifierPrefix=j,this.onRecoverableError=Q,this.mutableSourceEagerHydrationData=null}function LC(v,_,N,j,Q,ie,de,ke,Le){return v=new M7(v,_,N,ke,Le),_===1?(_=1,ie===!0&&(_|=8)):_=0,ie=Of(3,null,null,_),v.current=ie,ie.stateNode=v,ie.memoizedState={element:j,isDehydrated:N,cache:null,transitions:null,pendingSuspenseBoundaries:null},am(ie),v}function L7(v,_,N){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:j==null?null:""+j,children:v,containerInfo:_,implementation:N}}function YI(v){if(!v)return Ef;v=v._reactInternals;e:{if(bs(v)!==v||v.tag!==1)throw Error(n(170));var _=v;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Ma(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(n(171))}if(v.tag===1){var N=v.type;if(Ma(N))return Q1(v,N,_)}return _}function KI(v,_,N,j,Q,ie,de,ke,Le){return v=LC(N,j,!0,v,Q,ie,de,ke,Le),v.context=YI(null),N=v.current,j=ol(),Q=mm(N),ie=Af(j,Q),ie.callback=_??null,Tu(N,ie,Q),v.current.lanes=Q,qn(v,Q,j),Hl(v,j),v}function I2(v,_,N,j){var Q=_.current,ie=ol(),de=mm(Q);return N=YI(N),_.context===null?_.context=N:_.pendingContext=N,_=Af(ie,de),_.payload={element:v},j=j===void 0?null:j,j!==null&&(_.callback=j),v=Tu(Q,_,de),v!==null&&(Dd(v,Q,de,ie),iv(v,Q,de)),de}function P2(v){if(v=v.current,!v.child)return null;switch(v.child.tag){case 5:return v.child.stateNode;default:return v.child.stateNode}}function XI(v,_){if(v=v.memoizedState,v!==null&&v.dehydrated!==null){var N=v.retryLane;v.retryLane=N!==0&&N<_?N:_}}function FC(v,_){XI(v,_),(v=v.alternate)&&XI(v,_)}var QI=typeof reportError=="function"?reportError:function(v){console.error(v)};function $C(v){this._internalRoot=v}Fx.prototype.render=$C.prototype.render=function(v){var _=this._internalRoot;if(_===null)throw Error(n(409));I2(v,_,null,null)},Fx.prototype.unmount=$C.prototype.unmount=function(){var v=this._internalRoot;if(v!==null){this._internalRoot=null;var _=v.containerInfo;cy(function(){I2(null,v,null,null)}),_[_u]=null}};function Fx(v){this._internalRoot=v}Fx.prototype.unstable_scheduleHydration=function(v){if(v){var _=gd();v={blockedOn:null,target:v,priority:_};for(var N=0;N<Aa.length&&_!==0&&_<Aa[N].priority;N++);Aa.splice(N,0,v),N===0&&yd(v)}};function N2(v){return!(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)}function D2(v){return!(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11&&(v.nodeType!==8||v.nodeValue!==" react-mount-point-unstable "))}function JI(){}function F7(v,_,N,j,Q){if(Q){if(typeof j=="function"){var ie=j;j=function(){var st=P2(de);ie.call(st)}}var de=KI(_,j,v,0,null,!1,!1,"",JI);return v._reactRootContainer=de,v[_u]=de.current,_f(v.nodeType===8?v.parentNode:v),cy(),de}for(;Q=v.lastChild;)v.removeChild(Q);if(typeof j=="function"){var ke=j;j=function(){var st=P2(Le);ke.call(st)}}var Le=LC(v,0,!1,null,null,!1,!1,"",JI);return v._reactRootContainer=Le,v[_u]=Le.current,_f(v.nodeType===8?v.parentNode:v),cy(function(){I2(_,Le,N,j)}),Le}function O2(v,_,N,j,Q){var ie=N._reactRootContainer;if(ie){var de=ie;if(typeof Q=="function"){var ke=Q;Q=function(){var Le=P2(de);ke.call(Le)}}I2(_,de,v,Q)}else de=F7(N,_,v,Q,j);return P2(de)}ls=function(v){switch(v.tag){case 3:var _=v.stateNode;if(_.current.memoizedState.isDehydrated){var N=De(_.pendingLanes);N!==0&&(lr(_,N|1),Hl(_,Er()),!(ui&6)&&(ly=Er()+500,Rh()))}break;case 13:cy(function(){var j=nl(v,1);if(j!==null){var Q=ol();Dd(j,v,1,Q)}}),FC(v,1)}},Ao=function(v){if(v.tag===13){var _=nl(v,134217728);if(_!==null){var N=ol();Dd(_,v,134217728,N)}FC(v,134217728)}},Dl=function(v){if(v.tag===13){var _=mm(v),N=nl(v,_);if(N!==null){var j=ol();Dd(N,v,_,j)}FC(v,_)}},gd=function(){return _n},Yu=function(v,_){var N=_n;try{return _n=v,_()}finally{_n=N}},Ji=function(v,_,N){switch(_){case"input":if(We(v,N),_=N.name,N.type==="radio"&&_!=null){for(N=v;N.parentNode;)N=N.parentNode;for(N=N.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<N.length;_++){var j=N[_];if(j!==v&&j.form===v.form){var Q=Oo(j);if(!Q)throw Error(n(90));me(j),We(j,Q)}}}break;case"textarea":Lt(v,N);break;case"select":_=N.value,_!=null&&It(v,!!N.multiple,_,!1)}},Ea=PC,Sa=cy;var M2={usingClientEntryPoint:!1,Events:[Na,Mn,Oo,mo,Gu,PC]},$x={findFiberByHostInstance:Nc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$7={bundleType:$x.bundleType,version:$x.version,rendererPackageName:$x.rendererPackageName,rendererConfig:$x.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(v){return v=md(v),v===null?null:v.stateNode},findFiberByHostInstance:$x.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var L2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!L2.isDisabled&&L2.supportsFiber)try{Zo=L2.inject($7),qi=L2}catch{}}return $f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M2,$f.createPortal=function(v,_){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!N2(_))throw Error(n(200));return L7(v,_,null,N)},$f.createRoot=function(v,_){if(!N2(v))throw Error(n(299));var N=!1,j="",Q=QI;return _!=null&&(_.unstable_strictMode===!0&&(N=!0),_.identifierPrefix!==void 0&&(j=_.identifierPrefix),_.onRecoverableError!==void 0&&(Q=_.onRecoverableError)),_=LC(v,1,!1,null,null,N,!1,j,Q),v[_u]=_.current,_f(v.nodeType===8?v.parentNode:v),new $C(_)},$f.findDOMNode=function(v){if(v==null)return null;if(v.nodeType===1)return v;var _=v._reactInternals;if(_===void 0)throw typeof v.render=="function"?Error(n(188)):(v=Object.keys(v).join(","),Error(n(268,v)));return v=md(_),v=v===null?null:v.stateNode,v},$f.flushSync=function(v){return cy(v)},$f.hydrate=function(v,_,N){if(!D2(_))throw Error(n(200));return O2(null,v,_,!0,N)},$f.hydrateRoot=function(v,_,N){if(!N2(v))throw Error(n(405));var j=N!=null&&N.hydratedSources||null,Q=!1,ie="",de=QI;if(N!=null&&(N.unstable_strictMode===!0&&(Q=!0),N.identifierPrefix!==void 0&&(ie=N.identifierPrefix),N.onRecoverableError!==void 0&&(de=N.onRecoverableError)),_=KI(_,null,v,1,N??null,Q,!1,ie,de),v[_u]=_.current,_f(v),j)for(v=0;v<j.length;v++)N=j[v],Q=N._getVersion,Q=Q(N._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[N,Q]:_.mutableSourceEagerHydrationData.push(N,Q);return new Fx(_)},$f.render=function(v,_,N){if(!D2(_))throw Error(n(200));return O2(null,v,_,!1,N)},$f.unmountComponentAtNode=function(v){if(!D2(v))throw Error(n(40));return v._reactRootContainer?(cy(function(){O2(null,null,v,!1,function(){v._reactRootContainer=null,v[_u]=null})}),!0):!1},$f.unstable_batchedUpdates=PC,$f.unstable_renderSubtreeIntoContainer=function(v,_,N,j){if(!D2(N))throw Error(n(200));if(v==null||v._reactInternals===void 0)throw Error(n(38));return O2(v,_,N,!1,j)},$f.version="18.3.1-next-f1338f8080-20240426",$f}var kte;function fme(){if(kte)return Z7.exports;kte=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Z7.exports=L8e(),Z7.exports}var Rte;function F8e(){if(Rte)return n6;Rte=1;var e=fme();return n6.createRoot=e.createRoot,n6.hydrateRoot=e.hydrateRoot,n6}var $8e=F8e();const B8e=gc($8e);var km=function(){return km=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},km.apply(this,arguments)};function eR(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function j8e(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var yP="right-scroll-bar-position",vP="width-before-scroll-bar",U8e="with-scroll-bars-hidden",z8e="--removed-body-scroll-bar-size";function nF(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function V8e(e,t){var n=U.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var H8e=typeof window<"u"?U.useLayoutEffect:U.useEffect,Ite=new WeakMap;function q8e(e,t){var n=V8e(null,function(r){return e.forEach(function(i){return nF(i,r)})});return H8e(function(){var r=Ite.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||nF(a,null)}),s.forEach(function(a){i.has(a)||nF(a,o)})}Ite.set(n,e)},[e]),n}function W8e(e){return e}function G8e(e,t){t===void 0&&(t=W8e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function Y8e(e){e===void 0&&(e={});var t=G8e(null);return t.options=km({async:!0,ssr:!1},e),t}var dme=function(e){var t=e.sideCar,n=eR(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return U.createElement(r,km({},n))};dme.isSideCarExport=!0;function K8e(e,t){return e.useMedium(t),dme}var hme=Y8e(),rF=function(){},OO=U.forwardRef(function(e,t){var n=U.useRef(null),r=U.useState({onScrollCapture:rF,onWheelCapture:rF,onTouchMoveCapture:rF}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,b=g===void 0?"div":g,y=e.gapMode,x=eR(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,S=q8e([n,t]),C=km(km({},x),i);return U.createElement(U.Fragment,null,c&&U.createElement(w,{sideCar:hme,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:y}),o?U.cloneElement(U.Children.only(a),km(km({},C),{ref:S})):U.createElement(b,km({},C,{className:u,ref:S}),a))});OO.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};OO.classNames={fullWidth:vP,zeroRight:yP};var pme=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function X8e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=pme();return t&&e.setAttribute("nonce",t),e}function Q8e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function J8e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Z8e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=X8e())&&(Q8e(t,n),J8e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},eDe=function(){var e=Z8e();return function(t,n){U.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},tDe=function(){var e=eDe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},nDe={left:0,top:0,right:0,gap:0},iF=function(e){return parseInt(e||"",10)||0},rDe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[iF(n),iF(r),iF(i)]},iDe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return nDe;var t=rDe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},sDe=tDe(),LE="data-scroll-locked",oDe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(U8e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(LE,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(yP,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(vP,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(yP," .").concat(yP,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(vP," .").concat(vP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(LE,`] {
    `).concat(z8e,": ").concat(a,`px;
  }
`)},Pte=function(){var e=parseInt(document.body.getAttribute(LE)||"0",10);return isFinite(e)?e:0},aDe=function(){U.useEffect(function(){return document.body.setAttribute(LE,(Pte()+1).toString()),function(){var e=Pte()-1;e<=0?document.body.removeAttribute(LE):document.body.setAttribute(LE,e.toString())}},[])},uDe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;aDe();var s=U.useMemo(function(){return iDe(i)},[i]);return U.createElement(sDe,{styles:oDe(s,!t,i,n?"":"!important")})};function lDe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=pme();return t&&e.setAttribute("nonce",t),e}function cDe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function fDe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var dDe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=lDe())&&(cDe(t,n),fDe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},hDe=function(){var e=dDe();return function(t,n){U.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},pDe=function(){var e=hDe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},Kj=!1;if(typeof window<"u")try{var r6=Object.defineProperty({},"passive",{get:function(){return Kj=!0,!0}});window.addEventListener("test",r6,r6),window.removeEventListener("test",r6,r6)}catch{Kj=!1}var B2=Kj?{passive:!1}:!1,mDe=function(e){return e.tagName==="TEXTAREA"},mme=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!mDe(e)&&n[t]==="visible")},gDe=function(e){return mme(e,"overflowY")},yDe=function(e){return mme(e,"overflowX")},Nte=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=gme(e,r);if(i){var s=yme(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},vDe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},bDe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},gme=function(e,t){return e==="v"?gDe(t):yDe(t)},yme=function(e,t){return e==="v"?vDe(t):bDe(t)},xDe=function(e,t){return e==="h"&&t==="rtl"?-1:1},_De=function(e,t,n,r,i){var s=xDe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=yme(e,a),p=h[0],m=h[1],g=h[2],b=m-g-s*p;(p||b)&&gme(e,a)&&(f+=b,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&Math.abs(f)<1||!c&&Math.abs(d)<1)&&(l=!0),l},i6=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Dte=function(e){return[e.deltaX,e.deltaY]},Ote=function(e){return e&&"current"in e?e.current:e},wDe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},EDe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},SDe=0,j2=[];function TDe(e){var t=U.useRef([]),n=U.useRef([0,0]),r=U.useRef(),i=U.useState(SDe++)[0],s=U.useState(pDe)[0],o=U.useRef(e);U.useEffect(function(){o.current=e},[e]),U.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=j8e([e.lockRef.current],(e.shards||[]).map(Ote),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=U.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var b=i6(m),y=n.current,x="deltaX"in m?m.deltaX:y[0]-b[0],w="deltaY"in m?m.deltaY:y[1]-b[1],S,C=m.target,R=Math.abs(x)>Math.abs(w)?"h":"v";if("touches"in m&&R==="h"&&C.type==="range")return!1;var I=Nte(R,C);if(!I)return!0;if(I?S=R:(S=R==="v"?"h":"v",I=Nte(R,C)),!I)return!1;if(!r.current&&"changedTouches"in m&&(x||w)&&(r.current=S),!S)return!0;var O=r.current||S;return _De(O,g,m,O==="h"?x:w)},[]),u=U.useCallback(function(m){var g=m;if(!(!j2.length||j2[j2.length-1]!==s)){var b="deltaY"in g?Dte(g):i6(g),y=t.current.filter(function(S){return S.name===g.type&&(S.target===g.target||g.target===S.shadowParent)&&wDe(S.delta,b)})[0];if(y&&y.should){g.cancelable&&g.preventDefault();return}if(!y){var x=(o.current.shards||[]).map(Ote).filter(Boolean).filter(function(S){return S.contains(g.target)}),w=x.length>0?a(g,x[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=U.useCallback(function(m,g,b,y){var x={name:m,delta:g,target:b,should:y,shadowParent:CDe(b)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(w){return w!==x})},1)},[]),c=U.useCallback(function(m){n.current=i6(m),r.current=void 0},[]),f=U.useCallback(function(m){l(m.type,Dte(m),m.target,a(m,e.lockRef.current))},[]),d=U.useCallback(function(m){l(m.type,i6(m),m.target,a(m,e.lockRef.current))},[]);U.useEffect(function(){return j2.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,B2),document.addEventListener("touchmove",u,B2),document.addEventListener("touchstart",c,B2),function(){j2=j2.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,B2),document.removeEventListener("touchmove",u,B2),document.removeEventListener("touchstart",c,B2)}},[]);var h=e.removeScrollBar,p=e.inert;return U.createElement(U.Fragment,null,p?U.createElement(s,{styles:EDe(i)}):null,h?U.createElement(uDe,{gapMode:e.gapMode}):null)}function CDe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ADe=K8e(hme,TDe);var uS=U.forwardRef(function(e,t){return U.createElement(OO,km({},e,{ref:t,sideCar:ADe}))});uS.classNames=OO.classNames;function Cs(e){return Object.keys(e)}function sF(e){return e&&typeof e=="object"&&!Array.isArray(e)}function aq(e,t){const n={...e},r=t;return sF(e)&&sF(t)&&Object.keys(t).forEach(i=>{sF(r[i])&&i in e?n[i]=aq(n[i],r[i]):n[i]=r[i]}),n}function kDe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function RDe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function Uk(e){const t=RDe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function oF(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function vme(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?oF(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?oF(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?oF(s):s}}return r}return n}const ot=vme("rem",{shouldScale:!0}),JN=vme("em");function Lb(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function bme(e){if(typeof e=="number")return!0;if(typeof e=="string"){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!=="")return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(r=>t.test(r))}return!1}function Fb(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==U.Fragment:!1}function Rl(e){const t=U.createContext(null);return[({children:i,value:s})=>k.jsx(t.Provider,{value:s,children:i}),()=>{const i=U.useContext(t);if(i===null)throw new Error(e);return i}]}function $b(e=null){const t=U.createContext(e);return[({children:i,value:s})=>k.jsx(t.Provider,{value:s,children:i}),()=>U.useContext(t)]}function ZN(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function e8(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function IDe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function PDe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function NDe(e,t,n){return e8(e,n)===e8(t,n)}function uq({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=e8(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>NDe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=PDe(l,u,r),f=IDe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const DDe={app:100,modal:200,popover:300,overlay:400,max:9999};function fd(e){return DDe[e]}const Xj=()=>{};function ODe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||Xj:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function _r(e,t="size",n=!0){if(e!==void 0)return bme(e)?n?ot(e):e:`var(--${t}-${e})`}function Ha(e){return _r(e,"mantine-spacing")}function as(e){return e===void 0?"var(--mantine-radius-default)":_r(e,"mantine-radius")}function _l(e){return _r(e,"mantine-font-size")}function xme(e){return _r(e,"mantine-line-height",!1)}function lq(e){if(e)return _r(e,"mantine-shadow",!1)}function Om(e,t){return n=>{e==null||e(n),t==null||t(n)}}function cq(e,t){return e in t?Uk(t[e]):Uk(e)}function zk(e,t){const n=e.map(r=>({value:r,px:cq(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function d0(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function MDe(e,t,n){var r;return n?Array.from(((r=e8(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function LDe(){const[e,t]=U.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Rm(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function FE(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}function Iv(e){const t=U.useRef(e);return U.useEffect(()=>{t.current=e}),U.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const FDe=()=>{};function MO(e,t){const n=typeof t=="number"?t:t.delay,r=typeof t=="number"?!1:t.flushOnUnmount,i=Iv(e),s=U.useRef(0),o=Object.assign(U.useCallback((...a)=>{window.clearTimeout(s.current);const u=()=>{s.current!==0&&(s.current=0,i(...a))};o.flush=u,s.current=window.setTimeout(u,n)},[i,n]),{flush:FDe});return U.useEffect(()=>()=>{window.clearTimeout(s.current),r&&o.flush()},[o,r]),o}const Mte=["mousedown","touchstart"];function $De(e,t,n){const r=U.useRef(null);return U.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Mte).forEach(s=>document.addEventListener(s,i)),()=>{(t||Mte).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function BDe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function jDe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function UDe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=U.useState(n?t:jDe(e)),s=U.useRef(null);return U.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),BDe(s.current,o=>i(o.matches))},[e]),r}const ww=typeof document<"u"?U.useLayoutEffect:U.useEffect;function tg(e,t){const n=U.useRef(!1);U.useEffect(()=>()=>{n.current=!1},[]),U.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function _me({opened:e,shouldReturnFocus:t=!0}){const n=U.useRef(null),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return tg(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}const zDe=/input|select|textarea|button|object/,wme="a, input, select, textarea, button, object, [tabindex]";function VDe(e){return e.style.display==="none"}function HDe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(VDe(n))return!1;n=n.parentNode}return!0}function Eme(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function Qj(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(Eme(e));return(zDe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&HDe(e)}function Sme(e){const t=Eme(e);return(Number.isNaN(t)||t>=0)&&Qj(e)}function qDe(e){return Array.from(e.querySelectorAll(wme)).filter(Sme)}function WDe(e,t){const n=qDe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function GDe(e=!0){const t=U.useRef(null),n=i=>{let s=i.querySelector("[data-autofocus]");if(!s){const o=Array.from(i.querySelectorAll(wme));s=o.find(Sme)||o.find(Qj)||null,!s&&Qj(i)&&(s=i)}s&&s.focus({preventScroll:!0})},r=U.useCallback(i=>{e&&i!==null&&t.current!==i&&(i?(setTimeout(()=>{i.getRootNode()&&n(i)}),t.current=i):t.current=null)},[e]);return U.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const i=s=>{s.key==="Tab"&&t.current&&WDe(t.current,s)};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[e]),r}const YDe=e=>(e+1)%1e6;function KDe(){const[,e]=U.useReducer(YDe,0);return e}const XDe=sr.useId||(()=>{});function QDe(){const e=XDe();return e?`mantine-${e.replace(/:/g,"")}`:""}function df(e){const t=QDe(),[n,r]=U.useState(t);return ww(()=>{r(FE())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function Tme(e,t,n){U.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function t8(e,t){if(typeof e=="function")return e(t);typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Cme(...e){const t=new Map;return n=>{if(e.forEach(r=>{const i=t8(r,n);i&&t.set(r,i)}),t.size>0)return()=>{e.forEach(r=>{const i=t.get(r);i?i():t8(r,null)}),t.clear()}}}function yu(...e){return U.useCallback(Cme(...e),e)}function JDe(e,t,n="ltr"){const r=U.useRef(null),i=U.useRef(!1),s=U.useRef(!1),o=U.useRef(0),[a,u]=U.useState(!1);return U.useEffect(()=>{i.current=!0},[]),U.useEffect(()=>{var y,x;const l=({x:w,y:S})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const C=r.current.getBoundingClientRect();if(C.width&&C.height){const R=Rm((w-C.left)/C.width,0,1);e({x:n==="ltr"?R:1-R,y:Rm((S-C.top)/C.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",b),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),b(w)},b=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(y=r.current)==null||y.addEventListener("mousedown",p),(x=r.current)==null||x.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function ju({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=U.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function LO(e,t){return UDe("(prefers-reduced-motion: reduce)",e,t)}const ZDe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function tR(e){const t=U.useRef(0),n=U.useRef(null),[r,i]=U.useState(ZDe),s=U.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return U.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function eOe(e){const[t,{width:n,height:r}]=tR(e);return{ref:t,width:n,height:r}}function fq(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=U.useState(e),o=U.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=U.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=U.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function tOe(e){const t=U.useRef(void 0);return U.useEffect(()=>{t.current=e},[e]),t.current}function nOe(e,t){const n=Iv(e),r=U.useRef(null),i=U.useRef(null),s=U.useRef(!0),o=U.useRef(t),a=U.useRef(-1),u=()=>window.clearTimeout(a.current),l=U.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=U.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=U.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return U.useEffect(()=>{o.current=t},[t]),[f,u]}function rOe(e,t){const[n,r]=U.useState(e),[i,s]=nOe(r,t);return U.useEffect(()=>s,[]),[n,i]}function iOe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function sOe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});ww(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>iOe(`${e}:${String(r)}`,i[0])}return[t,n]}var oOe={};function aOe(){return typeof process<"u"&&oOe?"production":"development"}function Lte(e,t){return t.length===0?e:t.reduce((n,r)=>Math.abs(r-e)<Math.abs(n-e)?r:n)}function FO(e){var n;const t=sr.version;return typeof sr.version!="string"||t.startsWith("18.")?e==null?void 0:e.ref:(n=e==null?void 0:e.props)==null?void 0:n.ref}function Ame(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Ame(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function va(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Ame(e))&&(r&&(r+=" "),r+=t);return r}const uOe={};function lOe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=va(t[r],i):t[r]=i})}),t}function $O({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||uOe);return lOe(s)}function n8({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const kme=U.createContext(null);function Bb(){const e=U.useContext(kme);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function cOe(){return Bb().cssVariablesResolver}function fOe(){return Bb().classNamesPrefix}function dq(){return Bb().getStyleNonce}function dOe(){return Bb().withStaticClasses}function hOe(){return Bb().headless}function pOe(){var e;return(e=Bb().stylesTransform)==null?void 0:e.sx}function mOe(){var e;return(e=Bb().stylesTransform)==null?void 0:e.styles}function gOe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function yOe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function vOe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function bOe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function hq(e){return gOe(e)?yOe(e):e.startsWith("rgb")?vOe(e):e.startsWith("hsl")?bOe(e):{r:0,g:0,b:0,a:1}}function s6(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=hq(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function Vk(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function aF(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function xOe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function _Oe(e){if(e.startsWith("oklch("))return(xOe(e)||0)/100;const{r:t,g:n,b:r}=hq(e),i=t/255,s=n/255,o=r/255,a=aF(i),u=aF(s),l=aF(o);return .2126*a+.7152*u+.0722*l}function UC(e,t=.179){return e.startsWith("var(")?!1:_Oe(e)>t}function vg({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:UC(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:UC(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:UC(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][Vk(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:UC(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:UC(e,t.luminanceThreshold),shade:s,variable:void 0}}function Fs(e,t){const n=vg({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function Jj(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Fs(n.from,t),i=Fs(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function wm(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=hq(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const U2=wm,wOe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=vg({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${ot(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${ot(1)} solid transparent`}:{background:e,hover:s6(e,.1),color:a,border:`${ot(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${ot(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:wm(a,.1),hover:wm(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ot(1)} solid transparent`}}return{background:wm(e,.1),hover:wm(e,.12),color:e,border:`${ot(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${ot(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:wm(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${ot(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:wm(e,.05),color:e,border:`${ot(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${ot(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:wm(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ot(1)} solid transparent`}}return{background:"transparent",hover:wm(e,.12),color:e,border:`${ot(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${ot(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ot(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${ot(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:s6(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${ot(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:s6(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${ot(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:s6(t.white,.01),color:e,border:`${ot(1)} solid transparent`}:n==="gradient"?{background:Jj(r,t),hover:Jj(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${ot(1)} solid var(--mantine-color-default-border)`}:{}},EOe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Fte="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",pq={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:EOe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:wOe,autoContrast:!1,luminanceThreshold:.3,fontFamily:Fte,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Fte,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:ot(34),lineHeight:"1.3"},h2:{fontSize:ot(26),lineHeight:"1.35"},h3:{fontSize:ot(22),lineHeight:"1.4"},h4:{fontSize:ot(18),lineHeight:"1.45"},h5:{fontSize:ot(16),lineHeight:"1.5"},h6:{fontSize:ot(14),lineHeight:"1.5"}}},fontSizes:{xs:ot(12),sm:ot(14),md:ot(16),lg:ot(18),xl:ot(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:ot(2),sm:ot(4),md:ot(8),lg:ot(16),xl:ot(32)},spacing:{xs:ot(10),sm:ot(12),md:ot(16),lg:ot(20),xl:ot(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), 0 ${ot(1)} ${ot(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ot(10)} ${ot(15)} ${ot(-5)}, rgba(0, 0, 0, 0.04) 0 ${ot(7)} ${ot(7)} ${ot(-5)}`,md:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ot(20)} ${ot(25)} ${ot(-5)}, rgba(0, 0, 0, 0.04) 0 ${ot(10)} ${ot(10)} ${ot(-5)}`,lg:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ot(28)} ${ot(23)} ${ot(-7)}, rgba(0, 0, 0, 0.04) 0 ${ot(12)} ${ot(12)} ${ot(-7)}`,xl:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ot(36)} ${ot(28)} ${ot(-7)}, rgba(0, 0, 0, 0.04) 0 ${ot(17)} ${ot(17)} ${ot(-7)}`},other:{},components:{}};function $te(e){return e==="auto"||e==="dark"||e==="light"}function SOe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return $te(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&$te(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const TOe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Bte="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function uF(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function jte(e){if(!(e.primaryColor in e.colors))throw new Error(TOe);if(typeof e.primaryShade=="object"&&(!uF(e.primaryShade.dark)||!uF(e.primaryShade.light)))throw new Error(Bte);if(typeof e.primaryShade=="number"&&!uF(e.primaryShade))throw new Error(Bte)}function COe(e,t){var r;if(!t)return jte(e),e;const n=aq(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),jte(n),n}const mq=U.createContext(null),AOe=()=>U.useContext(mq)||pq;function Wa(){const e=U.useContext(mq);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function Rme({theme:e,children:t,inherit:n=!0}){const r=AOe(),i=U.useMemo(()=>COe(n?r:pq,e),[e,r,n]);return k.jsx(mq.Provider,{value:i,children:t})}Rme.displayName="@mantine/core/MantineThemeProvider";function kOe(){const e=Wa(),t=dq(),n=Cs(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=Uk(e.breakpoints[i]),a=s?`${o-.1}px`:JN(o-.1),u=s?`${o}px`:JN(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return k.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function lF(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function zC(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function ROe(e,t){const n=lF(e.variables),r=n?zC(t,n):"",i=lF(e.dark),s=lF(e.light),o=i?zC(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,i):"",a=s?zC(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,s):"";return`${r}${o}${a}`}function Ew({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&vg({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Ute(e,t){return Ew({color:e.colors[e.primaryColor][Vk(e,t)],theme:e,autoContrast:null})}function o6({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=Vk(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:U2(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:U2(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:U2(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=Vk(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:U2(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:U2(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:U2(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function IOe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function z2(e,t,n){Cs(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const Ime=e=>{const t=Vk(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:ot(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Ute(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Ute(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};z2(r.variables,e.breakpoints,"breakpoint"),z2(r.variables,e.spacing,"spacing"),z2(r.variables,e.fontSizes,"font-size"),z2(r.variables,e.lineHeights,"line-height"),z2(r.variables,e.shadows,"shadow"),z2(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Cs(e.colors).forEach(s=>{const o=e.colors[s];if(IOe(o)){Object.assign(r.light,o6({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,o6({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,o6({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,o6({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Cs(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function POe({theme:e,generator:t}){const n=Ime(e),r=t==null?void 0:t(e);return r?aq(n,r):n}const cF=Ime(pq);function NOe(e){const t={variables:{},light:{},dark:{}};return Cs(e.variables).forEach(n=>{cF.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Cs(e.light).forEach(n=>{cF.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Cs(e.dark).forEach(n=>{cF.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function DOe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function Pme({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Wa(),r=dq(),i=cOe(),s=POe({theme:n,generator:i}),o=e===":root"&&t,a=o?NOe(s):s,u=ROe(a,e);return u?k.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":DOe(e)}`}}):null}Pme.displayName="@mantine/CssVariables";function OOe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function V2(e,t){var i;const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)").matches,r=e!=="auto"?e:n?"dark":"light";(i=t())==null||i.setAttribute("data-mantine-color-scheme",r)}function MOe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=U.useRef(null),[s,o]=U.useState(()=>e.get(t)),a=r||s,u=U.useCallback(c=>{r||(V2(c,n),o(c),e.set(c))},[e.set,a,r]),l=U.useCallback(()=>{o(t),V2(t,n),e.clear()},[e.clear,t]);return U.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),ww(()=>{V2(e.get(t),n)},[]),U.useEffect(()=>{var f;if(r)return V2(r,n),()=>{};r===void 0&&V2(s,n),typeof window<"u"&&"matchMedia"in window&&(i.current=window.matchMedia("(prefers-color-scheme: dark)"));const c=d=>{s==="auto"&&V2(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function LOe({respectReducedMotion:e,getRootElement:t}){ww(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}OOe();function Nme({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=SOe(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:b}=MOe({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return LOe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),k.jsx(kme.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:b,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:k.jsxs(Rme,{theme:e,children:[o&&k.jsx(Pme,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&k.jsx(kOe,{}),t]})})}Nme.displayName="@mantine/core/MantineProvider";function Sw({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Wa();return{resolvedClassNames:$O({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:n8({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const FOe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function $Oe({theme:e,options:t,unstyled:n}){return va((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||FOe[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function BOe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return $O({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function zte({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return $O({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function jOe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function UOe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function zOe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function VOe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=$O({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function HOe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function qOe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return va($Oe({theme:e,options:t,unstyled:a||h}),VOe({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),HOe({options:t,classes:o,selector:r,unstyled:a}),zte({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),zte({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),BOe({selector:r,stylesCtx:f,options:t,props:c,theme:e}),jOe({rootSelector:l,selector:r,className:u}),UOe({selector:r,classes:o,unstyled:a||h}),d&&!h&&zOe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function WOe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return n8({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function Zj({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...Zj({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function GOe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Lb(n[r])}}),t),{})}function YOe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=GOe([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function KOe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&WOe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&n8({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&n8({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...YOe({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?Zj({style:u,theme:e}):null,...Zj({style:r==null?void 0:r.style,theme:e})}}function XOe({props:e,stylesCtx:t,themeName:n}){var o;const r=Wa(),i=(o=mOe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function xn({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=Wa(),h=fOe(),p=dOe(),m=hOe(),g=(Array.isArray(e)?e:[e]).filter(x=>x),{withStylesTransform:b,getTransformedStyles:y}=XOe({props:n,stylesCtx:r,themeName:g});return(x,w)=>({className:qOe({theme:d,options:w,themeName:g,selector:x,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:y([w==null?void 0:w.styles,l])}),style:KOe({theme:d,themeName:g,selector:x,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:b})})}function cT(e,t){return typeof e=="boolean"?e:t.autoContrast}function dt(e,t,n){var o;const r=Wa(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Lb(n)}}function fF(e){return Cs(e).reduce((t,n)=>e[n]!==void 0?`${t}${kDe(n)}:${e[n]};`:t,"").trim()}function QOe({selector:e,styles:t,media:n,container:r}){const i=t?fF(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${fF(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${fF(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function Tw(e){const t=dq();return k.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:QOe(e)}})}function Cw(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:b,ps:y,bd:x,bg:w,c:S,opacity:C,ff:R,fz:I,fw:O,lts:M,ta:L,lh:H,fs:D,tt:B,td:z,w:G,miw:Z,maw:ne,h:ue,mih:X,mah:q,bgsz:te,bgp:W,bgr:ee,bga:oe,pos:pe,top:ce,left:he,bottom:Ee,right:Ae,inset:ge,display:me,flex:Oe,hiddenFrom:Me,visibleFrom:Ye,lightHidden:lt,darkHidden:We,sx:nt,...yt}=e;return{styleProps:Lb({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:b,ps:y,bd:x,bg:w,c:S,opacity:C,ff:R,fz:I,fw:O,lts:M,ta:L,lh:H,fs:D,tt:B,td:z,w:G,miw:Z,maw:ne,h:ue,mih:X,mah:q,bgsz:te,bgp:W,bgr:ee,bga:oe,pos:pe,top:ce,left:he,bottom:Ee,right:Ae,inset:ge,display:me,flex:Oe,hiddenFrom:Me,visibleFrom:Ye,lightHidden:lt,darkHidden:We,sx:nt}),rest:yt}}const JOe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function gq(e,t){const n=vg({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function ZOe(e,t){const n=vg({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:gq(e,t)}function e9e(e,t){if(typeof e=="number")return ot(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${ot(n)}`;return r&&(s+=` ${r}`),i.length>0&&(s+=` ${gq(i.join(" "),t)}`),s.trim()}return e}const Vte={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function t9e(e){return typeof e=="string"&&e in Vte?Vte[e]:e}const n9e=["h1","h2","h3","h4","h5","h6"];function r9e(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&n9e.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?ot(e):e}function i9e(e){return e}const s9e=["h1","h2","h3","h4","h5","h6"];function o9e(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&s9e.includes(e)?`var(--mantine-${e}-line-height)`:e}function a9e(e){return typeof e=="number"?ot(e):e}function u9e(e,t){if(typeof e=="number")return ot(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return ot(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const dF={color:gq,textColor:ZOe,fontSize:r9e,spacing:u9e,identity:i9e,size:a9e,lineHeight:o9e,fontFamily:t9e,border:e9e};function Hte(e){return e.replace("(min-width: ","").replace("em)","")}function l9e({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Hte(i))-Number(Hte(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function c9e(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function f9e(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function d9e(e){return typeof e=="object"&&e!==null?Cs(e).filter(t=>t!=="base"):[]}function h9e(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function Dme({styleProps:e,data:t,theme:n}){return l9e(Cs(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=f9e(e[i]);if(!c9e(e[i]))return o.forEach(l=>{r.inlineStyles[l]=dF[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=d9e(e[i]);return o.forEach(l=>{a&&(r.styles[l]=dF[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:dF[s.type](h9e(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function nR(){return`__m__-${U.useId().replace(/:/g,"")}`}function yq(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...yq(r,t)}),{}):typeof e=="function"?e(t):e??{}}function Ome(e){return e.startsWith("data-")?e:`data-${e}`}function p9e(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[Ome(n)]=e[n]),t},{})}function Mme(e){return e?typeof e=="string"?{[Ome(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...Mme(n)}),{}):p9e(e):null}function eU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...eU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function m9e({theme:e,style:t,vars:n,styleProps:r}){const i=eU(t,e),s=eU(n,e);return{...i,...s,...r}}const Lme=U.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var I;const m=Wa(),g=e||"div",{styleProps:b,rest:y}=Cw(h),x=pOe(),w=(I=x==null?void 0:x())==null?void 0:I(b.sx),S=nR(),C=Dme({styleProps:b,theme:m,data:JOe}),R={ref:p,style:m9e({theme:m,style:t,vars:n,styleProps:C.inlineStyles}),className:va(r,w,{[S]:C.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":bme(o)?void 0:o||void 0,size:d,...Mme(s),...y};return k.jsxs(k.Fragment,{children:[C.hasResponsiveStyles&&k.jsx(Tw,{selector:`.${S}`,styles:C.styles,media:C.media}),typeof f=="function"?f(R):k.jsx(g,{...R})]})});Lme.displayName="@mantine/core/Box";const Ue=Lme;function Fme(e){return e}function g9e(e){const t=e;return n=>{const r=U.forwardRef((i,s)=>k.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r}}function Bt(e){const t=U.forwardRef(e);return t.extend=Fme,t.withProps=n=>{const r=U.forwardRef((i,s)=>k.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function Ga(e){const t=U.forwardRef(e);return t.withProps=n=>{const r=U.forwardRef((i,s)=>k.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=Fme,t}const y9e=U.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function jb(){return U.useContext(y9e)}var BO=fme();const x3=gc(BO);function v9e(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function hF(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const VC=typeof window<"u"&&window.requestAnimationFrame;function b9e({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=U.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=U.useState(r?{}:o),l=p=>{BO.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||v9e(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}tg(()=>{typeof VC=="function"&&VC(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),VC(()=>{const p=hF(i);c({...f(p),height:p})})}:()=>{const p=hF(i);c({...f(p),willChange:"height",height:p}),VC(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=hF(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const b=g[m];return{"aria-hidden":!r,...g,[m]:Cme(i,b),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const x9e={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},jO=Bt((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=dt("Collapse",x9e,e),c=Wa(),f=LO(),h=(c.respectReducedMotion?f:!1)?0:i,p=b9e({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?k.jsx(Ue,{...l,children:n}):null:k.jsx(Ue,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...yq(o,c)},ref:t,...l}),children:n})});jO.displayName="@mantine/core/Collapse";const[_9e,ap]=Rl("ScrollArea.Root component was not found in tree");function lS(e,t){const n=Iv(t);ww(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const w9e=U.forwardRef((e,t)=>{const{style:n,...r}=e,i=ap(),[s,o]=U.useState(0),[a,u]=U.useState(0),l=!!(s&&a);return lS(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),lS(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?k.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),E9e=U.forwardRef((e,t)=>{const n=ap(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?k.jsx(w9e,{...e,ref:t}):null}),S9e={scrollHideDelay:1e3,type:"hover"},$me=U.forwardRef((e,t)=>{const n=dt("ScrollAreaRoot",S9e,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=U.useState(null),[l,c]=U.useState(null),[f,d]=U.useState(null),[h,p]=U.useState(null),[m,g]=U.useState(null),[b,y]=U.useState(0),[x,w]=U.useState(0),[S,C]=U.useState(!1),[R,I]=U.useState(!1),O=yu(t,M=>u(M));return k.jsx(_9e,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:S,onScrollbarXEnabledChange:C,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:R,onScrollbarYEnabledChange:I,onCornerWidthChange:y,onCornerHeightChange:w},children:k.jsx(Ue,{...o,ref:O,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${b}px`,"--sa-corner-height":s!=="xy"?"0px":`${x}px`}})})});$me.displayName="@mantine/core/ScrollAreaRoot";function Bme(e,t){const n=e/t;return Number.isNaN(n)?0:n}function UO(e){const t=Bme(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function jme(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function T9e(e,[t,n]){return Math.min(n,Math.max(t,e))}function qte(e,t,n="ltr"){const r=UO(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=T9e(e,u);return jme([0,o],[0,a])(l)}function C9e(e,t,n,r="ltr"){const i=UO(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return jme([u,l],f)(e)}function Ume(e,t){return e>0&&e<t}function r8(e){return e?parseInt(e,10):0}function I_(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[A9e,zme]=Rl("ScrollAreaScrollbar was not found in tree"),Vme=U.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=ap(),[h,p]=U.useState(null),m=yu(t,I=>p(I)),g=U.useRef(null),b=U.useRef(""),{viewport:y}=d,x=n.content-n.viewport,w=Iv(l),S=Iv(a),C=MO(c,10),R=I=>{if(g.current){const O=I.clientX-g.current.left,M=I.clientY-g.current.top;u({x:O,y:M})}};return U.useEffect(()=>{const I=O=>{const M=O.target;(h==null?void 0:h.contains(M))&&w(O,x)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[y,h,x,w]),U.useEffect(S,[n,S]),lS(h,C),lS(d.content,C),k.jsx(A9e,{value:{scrollbar:h,hasThumb:r,onThumbChange:Iv(i),onThumbPointerUp:Iv(s),onThumbPositionChange:S,onThumbPointerDown:Iv(o)},children:k.jsx("div",{...f,ref:m,"data-mantine-scrollbar":!0,style:{position:"absolute",...f.style},onPointerDown:I_(e.onPointerDown,I=>{I.preventDefault(),I.button===0&&(I.target.setPointerCapture(I.pointerId),g.current=h.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",R(I))}),onPointerMove:I_(e.onPointerMove,R),onPointerUp:I_(e.onPointerUp,I=>{I.preventDefault();const O=I.target;O.hasPointerCapture(I.pointerId)&&O.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=b.current,g.current=null})})})}),Hme=U.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=ap(),[a,u]=U.useState(),l=U.useRef(null),c=yu(t,l,o.onScrollbarXChange);return U.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),k.jsx(Vme,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${UO(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),Ume(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:r8(a.paddingLeft),paddingEnd:r8(a.paddingRight)}})}})});Hme.displayName="@mantine/core/ScrollAreaScrollbarX";const qme=U.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=ap(),[a,u]=U.useState(),l=U.useRef(null),c=yu(t,l,o.onScrollbarYChange);return U.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),k.jsx(Vme,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${UO(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),Ume(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:r8(a.paddingTop),paddingEnd:r8(a.paddingBottom)}})}})});qme.displayName="@mantine/core/ScrollAreaScrollbarY";const zO=U.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=jb(),s=ap(),o=U.useRef(null),a=U.useRef(0),[u,l]=U.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Bme(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>C9e(h,a.current,u,p);return n==="horizontal"?k.jsx(Hme,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=qte(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?k.jsx(qme,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=qte(h,u);u.scrollbar.size===0?o.current.style.setProperty("--thumb-opacity","0"):o.current.style.setProperty("--thumb-opacity","1"),o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null});zO.displayName="@mantine/core/ScrollAreaScrollbarVisible";const vq=U.forwardRef((e,t)=>{const n=ap(),{forceMount:r,...i}=e,[s,o]=U.useState(!1),a=e.orientation==="horizontal",u=MO(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return lS(n.viewport,u),lS(n.content,u),r||s?k.jsx(zO,{"data-state":s?"visible":"hidden",...i,ref:t}):null});vq.displayName="@mantine/core/ScrollAreaScrollbarAuto";const Wme=U.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ap(),[s,o]=U.useState(!1);return U.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?k.jsx(vq,{"data-state":s?"visible":"hidden",...r,ref:t}):null});Wme.displayName="@mantine/core/ScrollAreaScrollbarHover";const k9e=U.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ap(),s=e.orientation==="horizontal",[o,a]=U.useState("hidden"),u=MO(()=>a("idle"),100);return U.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),U.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?k.jsx(zO,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:I_(e.onPointerEnter,()=>a("interacting")),onPointerLeave:I_(e.onPointerLeave,()=>a("idle"))}):null}),tU=U.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ap(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return U.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?k.jsx(Wme,{...r,ref:t,forceMount:n}):i.type==="scroll"?k.jsx(k9e,{...r,ref:t,forceMount:n}):i.type==="auto"?k.jsx(vq,{...r,ref:t,forceMount:n}):i.type==="always"?k.jsx(zO,{...r,ref:t}):null});tU.displayName="@mantine/core/ScrollAreaScrollbar";function R9e(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const Gme=U.forwardRef((e,t)=>{const{style:n,...r}=e,i=ap(),s=zme(),{onThumbPositionChange:o}=s,a=yu(t,c=>s.onThumbChange(c)),u=U.useRef(void 0),l=MO(()=>{u.current&&(u.current(),u.current=void 0)},100);return U.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=R9e(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),k.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:I_(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:I_(e.onPointerUp,s.onThumbPointerUp)})});Gme.displayName="@mantine/core/ScrollAreaThumb";const nU=U.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=zme();return n||i.hasThumb?k.jsx(Gme,{ref:t,...r}):null});nU.displayName="@mantine/core/ScrollAreaThumb";const Yme=U.forwardRef(({children:e,style:t,...n},r)=>{const i=ap(),s=yu(r,i.onViewportChange);return k.jsx(Ue,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:k.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});Yme.displayName="@mantine/core/ScrollAreaViewport";var bq={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const Kme={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},I9e=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":ot(t)}}),a1=Bt((e,t)=>{const n=dt("ScrollArea",Kme,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:b,onBottomReached:y,onTopReached:x,...w}=n,[S,C]=U.useState(!1),R=xn({name:"ScrollArea",props:n,classes:bq,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:I9e});return k.jsxs($me,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:b,...R("root"),...w,children:[k.jsx(Yme,{...d,...R("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":b||void 0,onScroll:I=>{var H;(H=d==null?void 0:d.onScroll)==null||H.call(d,I),p==null||p({x:I.currentTarget.scrollLeft,y:I.currentTarget.scrollTop});const{scrollTop:O,scrollHeight:M,clientHeight:L}=I.currentTarget;O-(M-L)>=0&&(y==null||y()),O===0&&(x==null||x())},children:m}),(b==="xy"||b==="x")&&k.jsx(tU,{...R("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:k.jsx(nU,{...R("thumb")})}),(b==="xy"||b==="y")&&k.jsx(tU,{...R("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:k.jsx(nU,{...R("thumb")})}),k.jsx(E9e,{...R("corner"),"data-hovered":S||void 0,"data-hidden":c==="never"||void 0})]})});a1.displayName="@mantine/core/ScrollArea";const xq=Bt((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:b,onBottomReached:y,onTopReached:x,...w}=dt("ScrollAreaAutosize",Kme,e);return k.jsx(Ue,{...w,ref:t,style:[{display:"flex",overflow:"auto"},g],children:k.jsx(Ue,{style:{display:"flex",flexDirection:"column",flex:1},children:k.jsx(a1,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:b,scrollbars:m,onBottomReached:y,onTopReached:x,children:n})})})});a1.classes=bq;xq.displayName="@mantine/core/ScrollAreaAutosize";xq.classes=bq;a1.Autosize=xq;var Xme={root:"m_87cf2631"};const P9e={__staticSelector:"UnstyledButton"},sh=Ga((e,t)=>{const n=dt("UnstyledButton",P9e,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=xn({name:s,props:n,classes:Xme,className:r,style:l,classNames:a,styles:u,unstyled:o});return k.jsx(Ue,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});sh.classes=Xme;sh.displayName="@mantine/core/UnstyledButton";var Qme={root:"m_515a97f8"};const N9e={},_q=Bt((e,t)=>{const n=dt("VisuallyHidden",N9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=xn({name:"VisuallyHidden",classes:Qme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return k.jsx(Ue,{component:"span",ref:t,...c("root"),...l})});_q.classes=Qme;_q.displayName="@mantine/core/VisuallyHidden";var Jme={root:"m_1b7284a3"};const D9e={},O9e=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:as(t),"--paper-shadow":lq(n)}}),fT=Ga((e,t)=>{const n=dt("Paper",D9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=xn({name:"Paper",props:n,classes:Jme,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:O9e});return k.jsx(Ue,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});fT.classes=Jme;fT.displayName="@mantine/core/Paper";function VO(){return typeof window<"u"}function Zme(e){return ege(e)?(e.nodeName||"").toLowerCase():"#document"}function dT(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function M9e(e){var t;return(t=(ege(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ege(e){return VO()?e instanceof Node||e instanceof dT(e).Node:!1}function Yf(e){return VO()?e instanceof Element||e instanceof dT(e).Element:!1}function wq(e){return VO()?e instanceof HTMLElement||e instanceof dT(e).HTMLElement:!1}function rU(e){return!VO()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof dT(e).ShadowRoot}function L9e(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Wte(e){return["html","body","#document"].includes(Zme(e))}function F9e(e){return dT(e).getComputedStyle(e)}function $9e(e){if(Zme(e)==="html")return e;const t=e.assignedSlot||e.parentNode||rU(e)&&e.host||M9e(e);return rU(t)?t.host:t}function Gte(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Hk(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&rU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function tge(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function nge(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function B9e(e){return z9e()?!1:!Yte()&&e.width===0&&e.height===0||Yte()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function j9e(){return/apple/i.test(navigator.vendor)}function Yte(){const e=/android/i;return e.test(tge())||e.test(nge())}function U9e(){return tge().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function z9e(){return nge().includes("jsdom/")}function iU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function V9e(e){return"nativeEvent"in e}function H9e(e){return e.matches("html,body")}function x_(e){return(e==null?void 0:e.ownerDocument)||document}function pF(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function hE(e){return"composedPath"in e?e.composedPath()[0]:e.target}const q9e="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function W9e(e){return wq(e)&&e.matches(q9e)}const Wd=Math.min,ec=Math.max,i8=Math.round,a6=Math.floor,ab=e=>({x:e,y:e}),G9e={left:"right",right:"left",bottom:"top",top:"bottom"},Y9e={start:"end",end:"start"};function sU(e,t,n){return ec(e,Wd(t,n))}function u1(e,t){return typeof e=="function"?e(t):e}function T0(e){return e.split("-")[0]}function hT(e){return e.split("-")[1]}function Eq(e){return e==="x"?"y":"x"}function Sq(e){return e==="y"?"height":"width"}function Aw(e){return["top","bottom"].includes(T0(e))?"y":"x"}function Tq(e){return Eq(Aw(e))}function K9e(e,t,n){n===void 0&&(n=!1);const r=hT(e),i=Tq(e),s=Sq(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=s8(o)),[o,s8(o)]}function X9e(e){const t=s8(e);return[oU(e),t,oU(t)]}function oU(e){return e.replace(/start|end/g,t=>Y9e[t])}function Q9e(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function J9e(e,t,n,r){const i=hT(e);let s=Q9e(T0(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(oU)))),s}function s8(e){return e.replace(/left|right|bottom|top/g,t=>G9e[t])}function Z9e(e){return{top:0,right:0,bottom:0,left:0,...e}}function Cq(e){return typeof e!="number"?Z9e(e):{top:e,right:e,bottom:e,left:e}}function cS(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Kte(e,t,n){let{reference:r,floating:i}=e;const s=Aw(t),o=Tq(t),a=Sq(o),u=T0(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(hT(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const eMe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=Kte(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:b}=a[m],{x:y,y:x,data:w,reset:S}=await b({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=y??c,f=x??f,h={...h,[g]:{...h[g],...w}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(d=S.placement),S.rects&&(l=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:c,y:f}=Kte(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function Aq(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=u1(t,e),p=Cq(h),g=a[d?f==="floating"?"reference":"floating":f],b=cS(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),y=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},S=cS(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:x,strategy:u}):y);return{top:(b.top-S.top+p.top)/w.y,bottom:(S.bottom-b.bottom+p.bottom)/w.y,left:(b.left-S.left+p.left)/w.x,right:(S.right-b.right+p.right)/w.x}}const tMe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=u1(e,t)||{};if(l==null)return{};const f=Cq(c),d={x:n,y:r},h=Tq(i),p=Sq(h),m=await o.getDimensions(l),g=h==="y",b=g?"top":"left",y=g?"bottom":"right",x=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],S=d[h]-s.reference[h],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let R=C?C[x]:0;(!R||!await(o.isElement==null?void 0:o.isElement(C)))&&(R=a.floating[x]||s.floating[p]);const I=w/2-S/2,O=R/2-m[p]/2-1,M=Wd(f[b],O),L=Wd(f[y],O),H=M,D=R-m[p]-L,B=R/2-m[p]/2+I,z=sU(H,B,D),G=!u.arrow&&hT(i)!=null&&B!==z&&s.reference[p]/2-(B<H?M:L)-m[p]/2<0,Z=G?B<H?B-H:B-D:0;return{[h]:d[h]+Z,data:{[h]:z,centerOffset:B-z-Z,...G&&{alignmentOffset:Z}},reset:G}}}),nMe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=u1(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const b=T0(i),y=T0(a)===a,x=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(y||!m?[s8(a)]:X9e(a));!d&&p!=="none"&&w.push(...J9e(a,m,p,x));const S=[a,...w],C=await Aq(t,g),R=[];let I=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&R.push(C[b]),f){const H=K9e(i,o,x);R.push(C[H[0]],C[H[1]])}if(I=[...I,{placement:i,overflows:R}],!R.every(H=>H<=0)){var O,M;const H=(((O=s.flip)==null?void 0:O.index)||0)+1,D=S[H];if(D)return{data:{index:H,overflows:I},reset:{placement:D}};let B=(M=I.filter(z=>z.overflows[0]<=0).sort((z,G)=>z.overflows[1]-G.overflows[1])[0])==null?void 0:M.placement;if(!B)switch(h){case"bestFit":{var L;const z=(L=I.map(G=>[G.placement,G.overflows.filter(Z=>Z>0).reduce((Z,ne)=>Z+ne,0)]).sort((G,Z)=>G[1]-Z[1])[0])==null?void 0:L[0];z&&(B=z);break}case"initialPlacement":B=a;break}if(i!==B)return{reset:{placement:B}}}return{}}}};function rge(e){const t=Wd(...e.map(s=>s.left)),n=Wd(...e.map(s=>s.top)),r=ec(...e.map(s=>s.right)),i=ec(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function rMe(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>cS(rge(i)))}const iMe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=u1(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=rMe(c),d=cS(rge(c)),h=Cq(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(Aw(n)==="y"){const M=f[0],L=f[f.length-1],H=T0(n)==="top",D=M.top,B=L.bottom,z=H?M.left:L.left,G=H?M.right:L.right,Z=G-z,ne=B-D;return{top:D,bottom:B,left:z,right:G,width:Z,height:ne,x:z,y:D}}const g=T0(n)==="left",b=ec(...f.map(M=>M.right)),y=Wd(...f.map(M=>M.left)),x=f.filter(M=>g?M.left===y:M.right===b),w=x[0].top,S=x[x.length-1].bottom,C=y,R=b,I=R-C,O=S-w;return{top:w,bottom:S,left:C,right:R,width:I,height:O,x:C,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function sMe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=T0(n),a=hT(n),u=Aw(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=u1(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const oMe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await sMe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},aMe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:b,y}=g;return{x:b,y}}},...u}=u1(e,t),l={x:n,y:r},c=await Aq(t,u),f=Aw(T0(i)),d=Eq(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",b=d==="y"?"bottom":"right",y=h+c[g],x=h-c[b];h=sU(y,h,x)}if(o){const g=f==="y"?"top":"left",b=f==="y"?"bottom":"right",y=p+c[g],x=p-c[b];p=sU(y,p,x)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},uMe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=u1(e,t),c={x:n,y:r},f=Aw(i),d=Eq(f);let h=c[d],p=c[f];const m=u1(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const x=d==="y"?"height":"width",w=s.reference[d]-s.floating[x]+g.mainAxis,S=s.reference[d]+s.reference[x]-g.mainAxis;h<w?h=w:h>S&&(h=S)}if(l){var b,y;const x=d==="y"?"width":"height",w=["top","left"].includes(T0(i)),S=s.reference[f]-s.floating[x]+(w&&((b=o.offset)==null?void 0:b[f])||0)+(w?0:g.crossAxis),C=s.reference[f]+s.reference[x]+(w?0:((y=o.offset)==null?void 0:y[f])||0)-(w?g.crossAxis:0);p<S?p=S:p>C&&(p=C)}return{[d]:h,[f]:p}}}},lMe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=u1(e,t),u=await Aq(t,a),l=T0(n),c=hT(n),f=Aw(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,b=d-u.left-u.right,y=Wd(h-u[p],g),x=Wd(d-u[m],b),w=!t.middlewareData.shift;let S=y,C=x;if(f?C=c||w?Wd(x,b):b:S=c||w?Wd(y,g):g,w&&!c){const I=ec(u.left,0),O=ec(u.right,0),M=ec(u.top,0),L=ec(u.bottom,0);f?C=d-2*(I!==0||O!==0?I+O:ec(u.left,u.right)):S=h-2*(M!==0||L!==0?M+L:ec(u.top,u.bottom))}await o({...t,availableWidth:C,availableHeight:S});const R=await i.getDimensions(s.floating);return d!==R.width||h!==R.height?{reset:{rects:!0}}:{}}}};function pT(e){return ige(e)?(e.nodeName||"").toLowerCase():"#document"}function Jd(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function k1(e){var t;return(t=(ige(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ige(e){return e instanceof Node||e instanceof Jd(e).Node}function ng(e){return e instanceof Element||e instanceof Jd(e).Element}function rg(e){return e instanceof HTMLElement||e instanceof Jd(e).HTMLElement}function Xte(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Jd(e).ShadowRoot}function rR(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=C0(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function cMe(e){return["table","td","th"].includes(pT(e))}function kq(e){const t=Rq(),n=C0(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function fMe(e){let t=ub(e);for(;rg(t)&&!fS(t);){if(kq(t))return t;t=ub(t)}return null}function Rq(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function fS(e){return["html","body","#document"].includes(pT(e))}function C0(e){return Jd(e).getComputedStyle(e)}function HO(e){return ng(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function ub(e){if(pT(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Xte(e)&&e.host||k1(e);return Xte(t)?t.host:t}function sge(e){const t=ub(e);return fS(t)?e.ownerDocument?e.ownerDocument.body:e.body:rg(t)&&rR(t)?t:sge(t)}function Gy(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=sge(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Jd(i);return s?t.concat(o,o.visualViewport||[],rR(i)?i:[],o.frameElement&&n?Gy(o.frameElement):[]):t.concat(i,Gy(i,[],n))}function oge(e){const t=C0(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=rg(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=i8(n)!==s||i8(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Iq(e){return ng(e)?e:e.contextElement}function $E(e){const t=Iq(e);if(!rg(t))return ab(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=oge(t);let o=(s?i8(n.width):n.width)/r,a=(s?i8(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const dMe=ab(0);function age(e){const t=Jd(e);return!Rq()||!t.visualViewport?dMe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function hMe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Jd(e)?!1:t}function H_(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=Iq(e);let o=ab(1);t&&(r?ng(r)&&(o=$E(r)):o=$E(e));const a=hMe(s,n,r)?age(s):ab(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Jd(s),h=r&&ng(r)?Jd(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=$E(m),b=m.getBoundingClientRect(),y=C0(m),x=b.left+(m.clientLeft+parseFloat(y.paddingLeft))*g.x,w=b.top+(m.clientTop+parseFloat(y.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=x,l+=w,p=Jd(m),m=p.frameElement}}return cS({width:c,height:f,x:u,y:l})}const pMe=[":popover-open",":modal"];function Pq(e){return pMe.some(t=>{try{return e.matches(t)}catch{return!1}})}function mMe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=k1(r),a=t?Pq(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=ab(1);const c=ab(0),f=rg(r);if((f||!f&&!s)&&((pT(r)!=="body"||rR(o))&&(u=HO(r)),rg(r))){const d=H_(r);l=$E(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function gMe(e){return Array.from(e.getClientRects())}function uge(e){return H_(k1(e)).left+HO(e).scrollLeft}function yMe(e){const t=k1(e),n=HO(e),r=e.ownerDocument.body,i=ec(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ec(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+uge(e);const a=-n.scrollTop;return C0(r).direction==="rtl"&&(o+=ec(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function vMe(e,t){const n=Jd(e),r=k1(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=Rq();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function bMe(e,t){const n=H_(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=rg(e)?$E(e):ab(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function Qte(e,t,n){let r;if(t==="viewport")r=vMe(e,n);else if(t==="document")r=yMe(k1(e));else if(ng(t))r=bMe(t,n);else{const i=age(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return cS(r)}function lge(e,t){const n=ub(e);return n===t||!ng(n)||fS(n)?!1:C0(n).position==="fixed"||lge(n,t)}function xMe(e,t){const n=t.get(e);if(n)return n;let r=Gy(e,[],!1).filter(a=>ng(a)&&pT(a)!=="body"),i=null;const s=C0(e).position==="fixed";let o=s?ub(e):e;for(;ng(o)&&!fS(o);){const a=C0(o),u=kq(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||rR(o)&&!u&&lge(e,o))?r=r.filter(c=>c!==o):i=a,o=ub(o)}return t.set(e,r),r}function _Me(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?Pq(t)?[]:xMe(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=Qte(t,c,i);return l.top=ec(f.top,l.top),l.right=Wd(f.right,l.right),l.bottom=Wd(f.bottom,l.bottom),l.left=ec(f.left,l.left),l},Qte(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function wMe(e){const{width:t,height:n}=oge(e);return{width:t,height:n}}function EMe(e,t,n){const r=rg(t),i=k1(t),s=n==="fixed",o=H_(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=ab(0);if(r||!r&&!s)if((pT(t)!=="body"||rR(i))&&(a=HO(t)),r){const f=H_(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=uge(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function mF(e){return C0(e).position==="static"}function Jte(e,t){return!rg(e)||C0(e).position==="fixed"?null:t?t(e):e.offsetParent}function cge(e,t){const n=Jd(e);if(Pq(e))return n;if(!rg(e)){let i=ub(e);for(;i&&!fS(i);){if(ng(i)&&!mF(i))return i;i=ub(i)}return n}let r=Jte(e,t);for(;r&&cMe(r)&&mF(r);)r=Jte(r,t);return r&&fS(r)&&mF(r)&&!kq(r)?n:r||fMe(e)||n}const SMe=async function(e){const t=this.getOffsetParent||cge,n=this.getDimensions,r=await n(e.floating);return{reference:EMe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function TMe(e){return C0(e).direction==="rtl"}const CMe={convertOffsetParentRelativeRectToViewportRelativeRect:mMe,getDocumentElement:k1,getClippingRect:_Me,getOffsetParent:cge,getElementRects:SMe,getClientRects:gMe,getDimensions:wMe,getScale:$E,isElement:ng,isRTL:TMe};function AMe(e,t){let n=null,r;const i=k1(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=a6(c),p=a6(i.clientWidth-(l+f)),m=a6(i.clientHeight-(c+d)),g=a6(l),y={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:ec(0,Wd(1,u))||1};let x=!0;function w(S){const C=S[0].intersectionRatio;if(C!==u){if(!x)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}x=!1}try{n=new IntersectionObserver(w,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,y)}n.observe(e)}return o(!0),s}function kMe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=Iq(e),c=i||s?[...l?Gy(l):[],...Gy(t)]:[];c.forEach(b=>{i&&b.addEventListener("scroll",n,{passive:!0}),s&&b.addEventListener("resize",n)});const f=l&&a?AMe(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(b=>{let[y]=b;y&&y.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?H_(e):null;u&&g();function g(){const b=H_(e);m&&(b.x!==m.x||b.y!==m.y||b.width!==m.width||b.height!==m.height)&&n(),m=b,p=requestAnimationFrame(g)}return n(),()=>{var b;c.forEach(y=>{i&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),f==null||f(),(b=h)==null||b.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const RMe=oMe,IMe=aMe,PMe=nMe,NMe=lMe,Zte=tMe,DMe=iMe,OMe=uMe,MMe=(e,t,n)=>{const r=new Map,i={platform:CMe,...n},s={...i.platform,_c:r};return eMe(e,t,{...i,platform:s})};var bP=typeof document<"u"?U.useLayoutEffect:U.useEffect;function o8(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!o8(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!o8(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function fge(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ene(e,t){const n=fge(e);return Math.round(t*n)/n}function gF(e){const t=U.useRef(e);return bP(()=>{t.current=e}),t}function LMe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=U.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=U.useState(r);o8(d,r)||h(r);const[p,m]=U.useState(null),[g,b]=U.useState(null),y=U.useCallback(ne=>{ne!==C.current&&(C.current=ne,m(ne))},[]),x=U.useCallback(ne=>{ne!==R.current&&(R.current=ne,b(ne))},[]),w=s||p,S=o||g,C=U.useRef(null),R=U.useRef(null),I=U.useRef(c),O=u!=null,M=gF(u),L=gF(i),H=gF(l),D=U.useCallback(()=>{if(!C.current||!R.current)return;const ne={placement:t,strategy:n,middleware:d};L.current&&(ne.platform=L.current),MMe(C.current,R.current,ne).then(ue=>{const X={...ue,isPositioned:H.current!==!1};B.current&&!o8(I.current,X)&&(I.current=X,BO.flushSync(()=>{f(X)}))})},[d,t,n,L,H]);bP(()=>{l===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(ne=>({...ne,isPositioned:!1})))},[l]);const B=U.useRef(!1);bP(()=>(B.current=!0,()=>{B.current=!1}),[]),bP(()=>{if(w&&(C.current=w),S&&(R.current=S),w&&S){if(M.current)return M.current(w,S,D);D()}},[w,S,D,M,O]);const z=U.useMemo(()=>({reference:C,floating:R,setReference:y,setFloating:x}),[y,x]),G=U.useMemo(()=>({reference:w,floating:S}),[w,S]),Z=U.useMemo(()=>{const ne={position:n,left:0,top:0};if(!G.floating)return ne;const ue=ene(G.floating,c.x),X=ene(G.floating,c.y);return a?{...ne,transform:"translate("+ue+"px, "+X+"px)",...fge(G.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ue,top:X}},[n,a,G.floating,c.x,c.y]);return U.useMemo(()=>({...c,update:D,refs:z,elements:G,floatingStyles:Z}),[c,D,z,G,Z])}const FMe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Zte({element:r.current,padding:i}).fn(n):{}:r?Zte({element:r,padding:i}).fn(n):{}}}},dge=(e,t)=>({...RMe(e),options:[e,t]}),Nq=(e,t)=>({...IMe(e),options:[e,t]}),tne=(e,t)=>({...OMe(e),options:[e,t]}),a8=(e,t)=>({...PMe(e),options:[e,t]}),$Me=(e,t)=>({...NMe(e),options:[e,t]}),ak=(e,t)=>({...DMe(e),options:[e,t]}),hge=(e,t)=>({...FMe(e),options:[e,t]}),pge={...O8e},BMe=pge.useInsertionEffect,jMe=BMe||(e=>e());function Dy(e){const t=U.useRef(()=>{});return jMe(()=>{t.current=e}),U.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Um=typeof document<"u"?U.useLayoutEffect:U.useEffect;let nne=!1,UMe=0;const rne=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+UMe++;function zMe(){const[e,t]=U.useState(()=>nne?rne():void 0);return Um(()=>{e==null&&t(rne())},[]),U.useEffect(()=>{nne=!0},[]),e}const VMe=pge.useId,mge=VMe||zMe;function HMe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const qMe=U.createContext(null),WMe=U.createContext(null),Dq=()=>{var e;return((e=U.useContext(qMe))==null?void 0:e.id)||null},Oq=()=>U.useContext(WMe);function Mq(e){return"data-floating-ui-"+e}function yF(e){const t=U.useRef(e);return Um(()=>{t.current=e}),t}const ine=Mq("safe-polygon");function xP(e,t,n){return n&&!iU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function GMe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=e,{enabled:a=!0,delay:u=0,handleClose:l=null,mouseOnly:c=!1,restMs:f=0,move:d=!0}=t,h=Oq(),p=Dq(),m=yF(l),g=yF(u),b=yF(n),y=U.useRef(),x=U.useRef(-1),w=U.useRef(),S=U.useRef(-1),C=U.useRef(!0),R=U.useRef(!1),I=U.useRef(()=>{}),O=U.useRef(!1),M=U.useCallback(()=>{var Z;const ne=(Z=i.current.openEvent)==null?void 0:Z.type;return(ne==null?void 0:ne.includes("mouse"))&&ne!=="mousedown"},[i]);U.useEffect(()=>{if(!a)return;function Z(ne){let{open:ue}=ne;ue||(clearTimeout(x.current),clearTimeout(S.current),C.current=!0,O.current=!1)}return s.on("openchange",Z),()=>{s.off("openchange",Z)}},[a,s]),U.useEffect(()=>{if(!a||!m.current||!n)return;function Z(ue){M()&&r(!1,ue,"hover")}const ne=x_(o.floating).documentElement;return ne.addEventListener("mouseleave",Z),()=>{ne.removeEventListener("mouseleave",Z)}},[o.floating,n,r,a,m,M]);const L=U.useCallback(function(Z,ne,ue){ne===void 0&&(ne=!0),ue===void 0&&(ue="hover");const X=xP(g.current,"close",y.current);X&&!w.current?(clearTimeout(x.current),x.current=window.setTimeout(()=>r(!1,Z,ue),X)):ne&&(clearTimeout(x.current),r(!1,Z,ue))},[g,r]),H=Dy(()=>{I.current(),w.current=void 0}),D=Dy(()=>{if(R.current){const Z=x_(o.floating).body;Z.style.pointerEvents="",Z.removeAttribute(ine),R.current=!1}}),B=Dy(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);U.useEffect(()=>{if(!a)return;function Z(q){if(clearTimeout(x.current),C.current=!1,c&&!iU(y.current)||f>0&&!xP(g.current,"open"))return;const te=xP(g.current,"open",y.current);te?x.current=window.setTimeout(()=>{b.current||r(!0,q,"hover")},te):n||r(!0,q,"hover")}function ne(q){if(B())return;I.current();const te=x_(o.floating);if(clearTimeout(S.current),O.current=!1,m.current&&i.current.floatingContext){n||clearTimeout(x.current),w.current=m.current({...i.current.floatingContext,tree:h,x:q.clientX,y:q.clientY,onClose(){D(),H(),B()||L(q,!0,"safe-polygon")}});const ee=w.current;te.addEventListener("mousemove",ee),I.current=()=>{te.removeEventListener("mousemove",ee)};return}(y.current==="touch"?!Hk(o.floating,q.relatedTarget):!0)&&L(q)}function ue(q){B()||i.current.floatingContext&&(m.current==null||m.current({...i.current.floatingContext,tree:h,x:q.clientX,y:q.clientY,onClose(){D(),H(),B()||L(q)}})(q))}if(Yf(o.domReference)){var X;const q=o.domReference;return n&&q.addEventListener("mouseleave",ue),(X=o.floating)==null||X.addEventListener("mouseleave",ue),d&&q.addEventListener("mousemove",Z,{once:!0}),q.addEventListener("mouseenter",Z),q.addEventListener("mouseleave",ne),()=>{var te;n&&q.removeEventListener("mouseleave",ue),(te=o.floating)==null||te.removeEventListener("mouseleave",ue),d&&q.removeEventListener("mousemove",Z),q.removeEventListener("mouseenter",Z),q.removeEventListener("mouseleave",ne)}}},[o,a,e,c,f,d,L,H,D,r,n,b,h,g,m,i,B]),Um(()=>{var Z;if(a&&n&&(Z=m.current)!=null&&Z.__options.blockPointerEvents&&M()){R.current=!0;const ue=o.floating;if(Yf(o.domReference)&&ue){var ne;const X=x_(o.floating).body;X.setAttribute(ine,"");const q=o.domReference,te=h==null||(ne=h.nodesRef.current.find(W=>W.id===p))==null||(ne=ne.context)==null?void 0:ne.elements.floating;return te&&(te.style.pointerEvents=""),X.style.pointerEvents="none",q.style.pointerEvents="auto",ue.style.pointerEvents="auto",()=>{X.style.pointerEvents="",q.style.pointerEvents="",ue.style.pointerEvents=""}}}},[a,n,p,o,h,m,M]),Um(()=>{n||(y.current=void 0,O.current=!1,H(),D())},[n,H,D]),U.useEffect(()=>()=>{H(),clearTimeout(x.current),clearTimeout(S.current),D()},[a,o.domReference,H,D]);const z=U.useMemo(()=>{function Z(ne){y.current=ne.pointerType}return{onPointerDown:Z,onPointerEnter:Z,onMouseMove(ne){const{nativeEvent:ue}=ne;function X(){!C.current&&!b.current&&r(!0,ue,"hover")}c&&!iU(y.current)||n||f===0||O.current&&ne.movementX**2+ne.movementY**2<2||(clearTimeout(S.current),y.current==="touch"?X():(O.current=!0,S.current=window.setTimeout(X,f)))}}},[c,r,n,b,f]),G=U.useMemo(()=>({onMouseEnter(){clearTimeout(x.current)},onMouseLeave(Z){B()||L(Z.nativeEvent,!1)}}),[L,B]);return U.useMemo(()=>a?{reference:z,floating:G}:{},[a,z,G])}const aU=()=>{},gge=U.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:aU,setState:aU,isInstantPhase:!1}),yge=()=>U.useContext(gge);function YMe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=U.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=U.useRef(null),a=U.useCallback(u=>{s({currentId:u})},[]);return Um(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),U.createElement(gge.Provider,{value:U.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function KMe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s,enabled:o=!0}=t,a=s??i,u=yge(),{currentId:l,setCurrentId:c,initialDelay:f,setState:d,timeoutMs:h}=u;return Um(()=>{o&&l&&(d({delay:{open:1,close:xP(f,"close")}}),l!==a&&r(!1))},[o,a,r,d,l,f]),Um(()=>{function p(){r(!1),d({delay:f,currentId:null})}if(o&&l&&!n&&l===a){if(h){const m=window.setTimeout(p,h);return()=>{clearTimeout(m)}}p()}},[o,n,d,l,a,r,f,h]),Um(()=>{o&&(c===aU||!n||c(a))},[o,n,c,a]),u}function vF(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const XMe="data-floating-ui-focusable",QMe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},JMe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},sne=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function ZMe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:u=!0,outsidePressEvent:l="pointerdown",referencePress:c=!1,referencePressEvent:f="pointerdown",ancestorScroll:d=!1,bubbles:h,capture:p}=t,m=Oq(),g=Dy(typeof u=="function"?u:()=>!1),b=typeof u=="function"?g:u,y=U.useRef(!1),x=U.useRef(!1),{escapeKey:w,outsidePress:S}=sne(h),{escapeKey:C,outsidePress:R}=sne(p),I=U.useRef(!1),O=Dy(z=>{var G;if(!n||!o||!a||z.key!=="Escape"||I.current)return;const Z=(G=s.current.floatingContext)==null?void 0:G.nodeId,ne=m?vF(m.nodesRef.current,Z):[];if(!w&&(z.stopPropagation(),ne.length>0)){let ue=!0;if(ne.forEach(X=>{var q;if((q=X.context)!=null&&q.open&&!X.context.dataRef.current.__escapeKeyBubbles){ue=!1;return}}),!ue)return}r(!1,V9e(z)?z.nativeEvent:z,"escape-key")}),M=Dy(z=>{var G;const Z=()=>{var ne;O(z),(ne=hE(z))==null||ne.removeEventListener("keydown",Z)};(G=hE(z))==null||G.addEventListener("keydown",Z)}),L=Dy(z=>{var G;const Z=y.current;y.current=!1;const ne=x.current;if(x.current=!1,l==="click"&&ne||Z||typeof b=="function"&&!b(z))return;const ue=hE(z),X="["+Mq("inert")+"]",q=x_(i.floating).querySelectorAll(X);let te=Yf(ue)?ue:null;for(;te&&!Wte(te);){const pe=$9e(te);if(Wte(pe)||!Yf(pe))break;te=pe}if(q.length&&Yf(ue)&&!H9e(ue)&&!Hk(ue,i.floating)&&Array.from(q).every(pe=>!Hk(te,pe)))return;if(wq(ue)&&B){const pe=ue.clientWidth>0&&ue.scrollWidth>ue.clientWidth,ce=ue.clientHeight>0&&ue.scrollHeight>ue.clientHeight;let he=ce&&z.offsetX>ue.clientWidth;if(ce&&F9e(ue).direction==="rtl"&&(he=z.offsetX<=ue.offsetWidth-ue.clientWidth),he||pe&&z.offsetY>ue.clientHeight)return}const W=(G=s.current.floatingContext)==null?void 0:G.nodeId,ee=m&&vF(m.nodesRef.current,W).some(pe=>{var ce;return pF(z,(ce=pe.context)==null?void 0:ce.elements.floating)});if(pF(z,i.floating)||pF(z,i.domReference)||ee)return;const oe=m?vF(m.nodesRef.current,W):[];if(oe.length>0){let pe=!0;if(oe.forEach(ce=>{var he;if((he=ce.context)!=null&&he.open&&!ce.context.dataRef.current.__outsidePressBubbles){pe=!1;return}}),!pe)return}r(!1,z,"outside-press")}),H=Dy(z=>{var G;const Z=()=>{var ne;L(z),(ne=hE(z))==null||ne.removeEventListener(l,Z)};(G=hE(z))==null||G.addEventListener(l,Z)});U.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=w,s.current.__outsidePressBubbles=S;let z=-1;function G(q){r(!1,q,"ancestor-scroll")}function Z(){window.clearTimeout(z),I.current=!0}function ne(){z=window.setTimeout(()=>{I.current=!1},L9e()?5:0)}const ue=x_(i.floating);a&&(ue.addEventListener("keydown",C?M:O,C),ue.addEventListener("compositionstart",Z),ue.addEventListener("compositionend",ne)),b&&ue.addEventListener(l,R?H:L,R);let X=[];return d&&(Yf(i.domReference)&&(X=Gy(i.domReference)),Yf(i.floating)&&(X=X.concat(Gy(i.floating))),!Yf(i.reference)&&i.reference&&i.reference.contextElement&&(X=X.concat(Gy(i.reference.contextElement)))),X=X.filter(q=>{var te;return q!==((te=ue.defaultView)==null?void 0:te.visualViewport)}),X.forEach(q=>{q.addEventListener("scroll",G,{passive:!0})}),()=>{a&&(ue.removeEventListener("keydown",C?M:O,C),ue.removeEventListener("compositionstart",Z),ue.removeEventListener("compositionend",ne)),b&&ue.removeEventListener(l,R?H:L,R),X.forEach(q=>{q.removeEventListener("scroll",G)}),window.clearTimeout(z)}},[s,i,a,b,l,n,r,d,o,w,S,O,C,M,L,R,H]),U.useEffect(()=>{y.current=!1},[b,l]);const D=U.useMemo(()=>({onKeyDown:O,[QMe[f]]:z=>{c&&r(!1,z.nativeEvent,"reference-press")}}),[O,r,c,f]),B=U.useMemo(()=>({onKeyDown:O,onMouseDown(){x.current=!0},onMouseUp(){x.current=!0},[JMe[l]]:()=>{y.current=!0}}),[O,l]);return U.useMemo(()=>o?{reference:D,floating:B}:{},[o,D,B])}function eLe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=mge(),s=U.useRef({}),[o]=U.useState(()=>HMe()),a=Dq()!=null,[u,l]=U.useState(r.reference),c=Dy((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=U.useMemo(()=>({setPositionReference:l}),[]),d=U.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return U.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function Lq(e){e===void 0&&(e={});const{nodeId:t}=e,n=eLe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=U.useState(null),[a,u]=U.useState(null),c=(i==null?void 0:i.domReference)||s,f=U.useRef(null),d=Oq();Um(()=>{c&&(f.current=c)},[c]);const h=LMe({...e,elements:{...i,...a&&{reference:a}}}),p=U.useCallback(x=>{const w=Yf(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),contextElement:x}:x;u(w),h.refs.setReference(w)},[h.refs]),m=U.useCallback(x=>{(Yf(x)||x===null)&&(f.current=x,o(x)),(Yf(h.refs.reference.current)||h.refs.reference.current===null||x!==null&&!Yf(x))&&h.refs.setReference(x)},[h.refs]),g=U.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),b=U.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),y=U.useMemo(()=>({...h,...r,refs:g,elements:b,nodeId:t}),[h,g,b,t,r]);return Um(()=>{r.dataRef.current.floatingContext=y;const x=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);x&&(x.context=y)}),U.useMemo(()=>({...h,context:y,refs:g,elements:b}),[h,g,b,y])}function tLe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=U.useRef(!1),c=U.useRef(),f=U.useRef(!0);U.useEffect(()=>{if(!a)return;const h=dT(o.domReference);function p(){!n&&wq(o.domReference)&&o.domReference===Gte(x_(o.domReference))&&(l.current=!0)}function m(){f.current=!0}return h.addEventListener("blur",p),h.addEventListener("keydown",m,!0),()=>{h.removeEventListener("blur",p),h.removeEventListener("keydown",m,!0)}},[o.domReference,n,a]),U.useEffect(()=>{if(!a)return;function h(p){let{reason:m}=p;(m==="reference-press"||m==="escape-key")&&(l.current=!0)}return i.on("openchange",h),()=>{i.off("openchange",h)}},[i,a]),U.useEffect(()=>()=>{clearTimeout(c.current)},[]);const d=U.useMemo(()=>({onPointerDown(h){B9e(h.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(h){if(l.current)return;const p=hE(h.nativeEvent);if(u&&Yf(p))try{if(j9e()&&U9e())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!f.current&&!W9e(p))return}r(!0,h.nativeEvent,"focus")},onBlur(h){l.current=!1;const p=h.relatedTarget,m=h.nativeEvent,g=Yf(p)&&p.hasAttribute(Mq("focus-guard"))&&p.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var b;const y=Gte(o.domReference?o.domReference.ownerDocument:document);!p&&y===o.domReference||Hk((b=s.current.floatingContext)==null?void 0:b.refs.floating.current,y)||Hk(o.domReference,y)||g||r(!1,m,"focus")})}}),[s,o.domReference,r,u]);return U.useMemo(()=>a?{reference:d}:{},[a,d])}const one="active",ane="selected";function bF(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[one]:o,[ane]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1,[XMe]:""},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[one,ane].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function nLe(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=U.useCallback(a=>bF(a,e,"reference"),t),s=U.useCallback(a=>bF(a,e,"floating"),n),o=U.useCallback(a=>bF(a,e,"item"),r);return U.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}const rLe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function iLe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=rLe.get(o))!=null?n:o,u=mge(),c=Dq()!=null,f=U.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,i,c,r,u,o]),d=U.useMemo(()=>{const p={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":u}}},[a,i,u,o]),h=U.useCallback(p=>{let{active:m,selected:g}=p;const b={role:"option",...m&&{id:i+"-option"}};switch(o){case"select":return{...b,"aria-selected":m&&g};case"combobox":return{...b,...m&&{"aria-selected":!0}}}return{}},[i,o]);return U.useMemo(()=>s?{reference:f,floating:d,item:h}:{},[s,f,d,h])}function vge(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function une(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function lne(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const sLe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function oLe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[sLe[u]]:r},f=-t/2;return u==="left"?{...c,...une(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:u==="right"?{...c,...une(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:u==="top"?{...c,...lne(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:u==="bottom"?{...c,...lne(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const Fq=U.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=jb();return s?k.jsx("div",{...l,ref:c,style:{...u,...oLe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});Fq.displayName="@mantine/core/FloatingArrow";var bge={root:"m_9814e45f"};const aLe={zIndex:fd("modal")},uLe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&wm(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${ot(i)})`:void 0,"--overlay-radius":s===void 0?void 0:as(s),"--overlay-z-index":o==null?void 0:o.toString()}}),dS=Ga((e,t)=>{const n=dt("Overlay",aLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:b,mod:y,...x}=n,w=xn({name:"Overlay",props:n,classes:bge,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uLe});return k.jsx(Ue,{ref:t,...w("root"),mod:[{center:c,fixed:l},y],...x,children:f})});dS.classes=bge;dS.displayName="@mantine/core/Overlay";function lLe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const cLe={},xge=U.forwardRef((e,t)=>{const{children:n,target:r,...i}=dt("Portal",cLe,e),[s,o]=U.useState(!1),a=U.useRef(null);return ww(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:lLe(i),t8(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:BO.createPortal(k.jsx(k.Fragment,{children:n}),a.current)});xge.displayName="@mantine/core/Portal";function Ub({withinPortal:e=!0,children:t,...n}){return e?k.jsx(xge,{...n,children:t}):k.jsx(k.Fragment,{children:t})}Ub.displayName="@mantine/core/OptionalPortal";const HC=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${e==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),u6={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...HC("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...HC("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...HC("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...HC("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...HC("top"),common:{transformOrigin:"top right"}}},cne={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function fLe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in u6?{transitionProperty:u6[e].transitionProperty,...i,...u6[e].common,...u6[e][cne[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[cne[t]]}}function dLe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a,enterDelay:u,exitDelay:l}){const c=Wa(),f=LO(),d=c.respectReducedMotion?f:!1,[h,p]=U.useState(d?0:e),[m,g]=U.useState(r?"entered":"exited"),b=U.useRef(-1),y=U.useRef(-1),x=U.useRef(-1),w=C=>{const R=C?i:s,I=C?o:a;window.clearTimeout(b.current);const O=d?0:C?e:t;p(O),O===0?(typeof R=="function"&&R(),typeof I=="function"&&I(),g(C?"entered":"exited")):x.current=requestAnimationFrame(()=>{x3.flushSync(()=>{g(C?"pre-entering":"pre-exiting")}),x.current=requestAnimationFrame(()=>{typeof R=="function"&&R(),g(C?"entering":"exiting"),b.current=window.setTimeout(()=>{typeof I=="function"&&I(),g(C?"entered":"exited")},O)})})},S=C=>{if(window.clearTimeout(y.current),typeof(C?u:l)!="number"){w(C);return}y.current=window.setTimeout(()=>{w(C)},C?u:l)};return tg(()=>{S(r)},[r]),U.useEffect(()=>()=>{window.clearTimeout(b.current),cancelAnimationFrame(x.current)},[]),{transitionDuration:h,transitionStatus:m,transitionTimingFunction:n||"ease"}}function bg({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d}){const{transitionDuration:h,transitionStatus:p,transitionTimingFunction:m}=dLe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d});return h===0?i?k.jsx(k.Fragment,{children:s({})}):e?s({display:"none"}):null:p==="exited"?e?s({display:"none"}):null:k.jsx(k.Fragment,{children:s(fLe({transition:t,duration:h,state:p,timingFunction:m}))})}bg.displayName="@mantine/core/Transition";const[hLe,_ge]=Rl("Popover component was not found in the tree");function qO({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const i=GDe(t),s=yu(i,r);return Fb(e)?U.cloneElement(e,{[n]:s}):e}function wge(e){return k.jsx(_q,{tabIndex:-1,"data-autofocus":!0,...e})}qO.displayName="@mantine/core/FocusTrap";wge.displayName="@mantine/core/FocusTrapInitialFocus";qO.InitialFocus=wge;var Ege={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const pLe={},$q=Bt((e,t)=>{var g,b,y,x;const n=dt("PopoverDropdown",pLe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=_ge(),h=_me({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=yu(t,d.floating);return d.disabled?null:k.jsx(Ub,{...d.portalProps,withinPortal:d.withinPortal,children:k.jsx(bg,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((b=d.transitionProps)==null?void 0:b.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((y=d.transitionProps)==null?void 0:y.exitDuration)=="number"?d.transitionProps.exitDuration:(x=d.transitionProps)==null?void 0:x.duration,children:w=>k.jsx(qO,{active:d.trapFocus&&d.opened,innerRef:m,children:k.jsxs(Ue,{...p,...f,variant:u,onKeyDownCapture:ODe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,"data-fixed":d.floatingStrategy==="fixed"||void 0,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:ot(d.width)},d.resolvedStyles.dropdown,c==null?void 0:c.dropdown,i]}),children:[o,k.jsx(Fq,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});$q.classes=Ege;$q.displayName="@mantine/core/PopoverDropdown";const mLe={refProp:"ref",popupType:"dialog"},Sge=Bt((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=dt("PopoverTarget",mLe,e);if(!Fb(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=_ge(),u=yu(a.reference,FO(n),t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return U.cloneElement(n,{...o,...l,...a.targetProps,className:va(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});Sge.displayName="@mantine/core/PopoverTarget";function Tge({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=U.useState(0);U.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return kMe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),tg(()=>{t.update()},r),tg(()=>{s(o=>o+1)},[e])}function gLe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function yLe(e,t){const n=gLe(e.middlewares),r=[dge(e.offset)];return n.shift&&r.push(Nq(typeof n.shift=="boolean"?{limiter:tne(),padding:5}:{limiter:tne(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?a8():a8(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?ak():ak(n.inline)),r.push(hge({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push($Me({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o,...a}){var c;const l=((c=t().refs.floating.current)==null?void 0:c.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:i,availableWidth:s,availableHeight:o,...a}):Object.assign(l,{maxWidth:`${s}px`,maxHeight:`${o}px`})),e.width==="target"&&Object.assign(l,{width:`${i.reference.width}px`})}})),r}function vLe(e){const[t,n]=ju({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=U.useRef(t),i=()=>{t&&n(!1)},s=()=>n(!t),o=Lq({strategy:e.strategy,placement:e.position,middleware:yLe(e,()=>o)});return Tge({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:o}),tg(()=>{var a;(a=e.onPositionChange)==null||a.call(e,o.placement)},[o.placement]),tg(()=>{var a,u;t!==r.current&&(t?(u=e.onOpen)==null||u.call(e):(a=e.onClose)==null||a.call(e)),r.current=t},[t,e.onClose,e.onOpen]),{floating:o,controlled:typeof e.opened=="boolean",opened:t,onClose:i,onToggle:s}}const bLe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:fd("popover"),__staticSelector:"Popover",width:"max-content"},xLe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:as(t),"--popover-shadow":lq(n)}});function wl(e){var Lt,sn,Fe,Qe,wt,Vt;const t=dt("Popover",bLe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,onExitTransitionEnd:l,onEnterTransitionEnd:c,width:f,middlewares:d,withArrow:h,arrowSize:p,arrowOffset:m,arrowRadius:g,arrowPosition:b,unstyled:y,classNames:x,styles:w,closeOnClickOutside:S,withinPortal:C,portalProps:R,closeOnEscape:I,clickOutsideEvents:O,trapFocus:M,onClose:L,onOpen:H,onChange:D,zIndex:B,radius:z,shadow:G,id:Z,defaultOpened:ne,__staticSelector:ue,withRoles:X,disabled:q,returnFocus:te,variant:W,keepMounted:ee,vars:oe,floatingStrategy:pe,withOverlay:ce,overlayProps:he,...Ee}=t,Ae=xn({name:ue,props:t,classes:Ege,classNames:x,styles:w,unstyled:y,rootSelector:"dropdown",vars:oe,varsResolver:xLe}),{resolvedStyles:ge}=Sw({classNames:x,styles:w,props:t}),me=U.useRef(null),[Oe,Me]=U.useState(null),[Ye,lt]=U.useState(null),{dir:We}=jb(),nt=df(Z),yt=vLe({middlewares:d,width:f,position:vge(We,r),offset:typeof i=="number"?i+(h?p/2:0):i,arrowRef:me,arrowOffset:m,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:ne,onChange:D,onOpen:H,onClose:L,strategy:pe});$De(()=>S&&yt.onClose(),O,[Oe,Ye]);const _t=U.useCallback(Wt=>{Me(Wt),yt.floating.refs.setReference(Wt)},[yt.floating.refs.setReference]),It=U.useCallback(Wt=>{lt(Wt),yt.floating.refs.setFloating(Wt)},[yt.floating.refs.setFloating]),Et=U.useCallback(()=>{var Wt;(Wt=u==null?void 0:u.onExited)==null||Wt.call(u),l==null||l()},[u==null?void 0:u.onExited,l]),Ke=U.useCallback(()=>{var Wt;(Wt=u==null?void 0:u.onEntered)==null||Wt.call(u),c==null||c()},[u==null?void 0:u.onEntered,c]);return k.jsxs(hLe,{value:{returnFocus:te,disabled:q,controlled:yt.controlled,reference:_t,floating:It,x:yt.floating.x,y:yt.floating.y,arrowX:(Fe=(sn=(Lt=yt.floating)==null?void 0:Lt.middlewareData)==null?void 0:sn.arrow)==null?void 0:Fe.x,arrowY:(Vt=(wt=(Qe=yt.floating)==null?void 0:Qe.middlewareData)==null?void 0:wt.arrow)==null?void 0:Vt.y,opened:yt.opened,arrowRef:me,transitionProps:{...u,onExited:Et,onEntered:Ke},width:f,withArrow:h,arrowSize:p,arrowOffset:m,arrowRadius:g,arrowPosition:b,placement:yt.floating.placement,trapFocus:M,withinPortal:C,portalProps:R,zIndex:B,radius:z,shadow:G,closeOnEscape:I,onClose:yt.onClose,onToggle:yt.onToggle,getTargetId:()=>`${nt}-target`,getDropdownId:()=>`${nt}-dropdown`,withRoles:X,targetProps:Ee,__staticSelector:ue,classNames:x,styles:w,unstyled:y,variant:W,keepMounted:ee,getStyles:Ae,resolvedStyles:ge,floatingStrategy:pe},children:[n,ce&&k.jsx(bg,{transition:"fade",mounted:yt.opened,duration:(u==null?void 0:u.duration)||250,exitDuration:(u==null?void 0:u.exitDuration)||250,children:Wt=>k.jsx(Ub,{withinPortal:C,children:k.jsx(dS,{...he,...Ae("overlay",{className:he==null?void 0:he.className,style:[Wt,he==null?void 0:he.style]})})})})]})}wl.Target=Sge;wl.Dropdown=$q;wl.displayName="@mantine/core/Popover";wl.extend=e=>e;var h0={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const Cge=U.forwardRef(({className:e,...t},n)=>k.jsxs(Ue,{component:"span",className:va(h0.barsLoader,e),...t,ref:n,children:[k.jsx("span",{className:h0.bar}),k.jsx("span",{className:h0.bar}),k.jsx("span",{className:h0.bar})]}));Cge.displayName="@mantine/core/Bars";const Age=U.forwardRef(({className:e,...t},n)=>k.jsxs(Ue,{component:"span",className:va(h0.dotsLoader,e),...t,ref:n,children:[k.jsx("span",{className:h0.dot}),k.jsx("span",{className:h0.dot}),k.jsx("span",{className:h0.dot})]}));Age.displayName="@mantine/core/Dots";const kge=U.forwardRef(({className:e,...t},n)=>k.jsx(Ue,{component:"span",className:va(h0.ovalLoader,e),...t,ref:n}));kge.displayName="@mantine/core/Oval";const Rge={bars:Cge,oval:kge,dots:Age},_Le={loaders:Rge,type:"oval"},wLe=(e,{size:t,color:n})=>({root:{"--loader-size":_r(t,"loader-size"),"--loader-color":n?Fs(n,e):void 0}}),xg=Bt((e,t)=>{const n=dt("Loader",_Le,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=xn({name:"Loader",props:n,classes:h0,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:wLe});return p?k.jsx(Ue,{...g("root"),ref:t,...m,children:p}):k.jsx(Ue,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});xg.defaultLoaders=Rge;xg.classes=h0;xg.displayName="@mantine/core/Loader";var mT={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const fne={orientation:"horizontal"},ELe=(e,{borderWidth:t})=>({group:{"--ai-border-width":ot(t)}}),Bq=Bt((e,t)=>{const n=dt("ActionIconGroup",fne,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=dt("ActionIconGroup",fne,e),p=xn({name:"ActionIconGroup",props:n,classes:mT,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:ELe,rootSelector:"group"});return k.jsx(Ue,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});Bq.classes=mT;Bq.displayName="@mantine/core/ActionIconGroup";const dne={},SLe=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":_r(o,"section-height"),"--section-padding-x":_r(o,"section-padding-x"),"--section-fz":_l(o),"--section-radius":t===void 0?void 0:as(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},jq=Bt((e,t)=>{const n=dt("ActionIconGroupSection",dne,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,variant:l,gradient:c,radius:f,autoContrast:d,...h}=dt("ActionIconGroupSection",dne,e),p=xn({name:"ActionIconGroupSection",props:n,classes:mT,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:SLe,rootSelector:"groupSection"});return k.jsx(Ue,{...p("groupSection"),ref:t,variant:l,...h})});jq.classes=mT;jq.displayName="@mantine/core/ActionIconGroupSection";const TLe={},CLe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":_r(t,"ai-size"),"--ai-radius":n===void 0?void 0:as(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},zb=Ga((e,t)=>{const n=dt("ActionIcon",TLe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:b,disabled:y,"data-disabled":x,autoContrast:w,mod:S,...C}=n,R=xn({name:["ActionIcon",p],props:n,className:r,style:u,classes:mT,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:CLe});return k.jsxs(sh,{...R("root",{active:!y&&!l&&!x}),...C,unstyled:i,variant:s,size:f,disabled:y||l,ref:t,mod:[{loading:l,disabled:y||x},S],children:[k.jsx(bg,{mounted:!!l,transition:"slide-down",duration:150,children:I=>k.jsx(Ue,{component:"span",...R("loader",{style:I}),"aria-hidden":!0,children:k.jsx(xg,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),k.jsx(Ue,{component:"span",mod:{loading:l},...R("icon"),children:b})]})});zb.classes=mT;zb.displayName="@mantine/core/ActionIcon";zb.Group=Bq;zb.GroupSection=jq;const Ige=U.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>k.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:k.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));Ige.displayName="@mantine/core/CloseIcon";var Pge={root:"m_86a44da5","root--subtle":"m_220c80f2"};const ALe={variant:"subtle"},kLe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":_r(t,"cb-size"),"--cb-radius":n===void 0?void 0:as(n),"--cb-icon-size":ot(r)}}),Vb=Ga((e,t)=>{const n=dt("CloseButton",ALe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,__staticSelector:b,...y}=n,x=xn({name:b||"CloseButton",props:n,className:a,style:l,classes:Pge,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:kLe});return k.jsxs(sh,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...x("root",{variant:p,active:!h&&!d}),children:[m||k.jsx(Ige,{}),i]})});Vb.classes=Pge;Vb.displayName="@mantine/core/CloseButton";function RLe(e){return U.Children.toArray(e).filter(Boolean)}var Nge={root:"m_4081bf90"};const ILe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},PLe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Ha(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Js=Bt((e,t)=>{const n=dt("Group",ILe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:b,mod:y,...x}=n,w=RLe(u),S=w.length,C=Ha(l??"md"),I={childWidth:`calc(${100/S}% - (${C} - ${C} / ${S}))`},O=xn({name:"Group",props:n,stylesCtx:I,className:i,style:s,classes:Nge,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:PLe});return k.jsx(Ue,{...O("root"),ref:t,variant:g,mod:[{grow:h},y],size:b,...x,children:w})});Js.classes=Nge;Js.displayName="@mantine/core/Group";const[NLe,R1]=Rl("ModalBase component was not found in tree");function DLe({opened:e,transitionDuration:t}){const[n,r]=U.useState(e),i=U.useRef(-1),o=LO()?0:t;return U.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function OLe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=df(e),[u,l]=U.useState(!1),[c,f]=U.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=DLe({opened:n,transitionDuration:d});return Tme("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),_me({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const Dge=U.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,onExitTransitionEnd:s,onEnterTransitionEnd:o,trapFocus:a,closeOnEscape:u,returnFocus:l,closeOnClickOutside:c,withinPortal:f,portalProps:d,lockScroll:h,children:p,zIndex:m,shadow:g,padding:b,__vars:y,unstyled:x,removeScrollProps:w,...S},C)=>{const{_id:R,titleMounted:I,bodyMounted:O,shouldLockScroll:M,setTitleMounted:L,setBodyMounted:H}=OLe({id:r,transitionProps:i,opened:t,trapFocus:a,closeOnEscape:u,onClose:n,returnFocus:l}),{key:D,...B}=w||{};return k.jsx(Ub,{...d,withinPortal:f,children:k.jsx(NLe,{value:{opened:t,onClose:n,closeOnClickOutside:c,onExitTransitionEnd:s,onEnterTransitionEnd:o,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${R}-title`,getBodyId:()=>`${R}-body`,titleMounted:I,bodyMounted:O,setTitleMounted:L,setBodyMounted:H,trapFocus:a,closeOnEscape:u,zIndex:m,unstyled:x},children:k.jsx(uS,{enabled:M&&h,...B,children:k.jsx(Ue,{ref:C,...S,__vars:{...y,"--mb-z-index":(m||fd("modal")).toString(),"--mb-shadow":lq(g),"--mb-padding":Ha(b)},children:p})},D)})})});Dge.displayName="@mantine/core/ModalBase";function MLe(){const e=R1();return U.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var hS={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const Oge=U.forwardRef(({className:e,...t},n)=>{const r=MLe(),i=R1();return k.jsx(Ue,{ref:n,...t,id:r,className:va({[hS.body]:!i.unstyled},e)})});Oge.displayName="@mantine/core/ModalBaseBody";const Mge=U.forwardRef(({className:e,onClick:t,...n},r)=>{const i=R1();return k.jsx(Vb,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:va({[hS.close]:!i.unstyled},e),unstyled:i.unstyled})});Mge.displayName="@mantine/core/ModalBaseCloseButton";const Lge=U.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=R1();return k.jsx(bg,{mounted:a.opened,transition:"pop",...a.transitionProps,onExited:()=>{var u,l,c;(u=a.onExitTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onExited)==null||c.call(l)},onEntered:()=>{var u,l,c;(u=a.onEnterTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onEntered)==null||c.call(l)},...e,children:u=>k.jsx("div",{...n,className:va({[hS.inner]:!a.unstyled},n.className),children:k.jsx(qO,{active:a.opened&&a.trapFocus,innerRef:o,children:k.jsx(fT,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,style:[i,u],className:va({[hS.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})});Lge.displayName="@mantine/core/ModalBaseContent";const Fge=U.forwardRef(({className:e,...t},n)=>{const r=R1();return k.jsx(Ue,{component:"header",ref:n,className:va({[hS.header]:!r.unstyled},e),...t})});Fge.displayName="@mantine/core/ModalBaseHeader";const LLe={duration:200,timingFunction:"ease",transition:"fade"};function FLe(e){const t=R1();return{...LLe,...t.transitionProps,...e}}const $ge=U.forwardRef(({onClick:e,transitionProps:t,style:n,visible:r,...i},s)=>{const o=R1(),a=FLe(t);return k.jsx(bg,{mounted:r!==void 0?r:o.opened,...a,transition:"fade",children:u=>k.jsx(dS,{ref:s,fixed:!0,style:[n,u],zIndex:o.zIndex,unstyled:o.unstyled,onClick:l=>{e==null||e(l),o.closeOnClickOutside&&o.onClose()},...i})})});$ge.displayName="@mantine/core/ModalBaseOverlay";function $Le(){const e=R1();return U.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const Bge=U.forwardRef(({className:e,...t},n)=>{const r=$Le(),i=R1();return k.jsx(Ue,{component:"h2",ref:n,className:va({[hS.title]:!i.unstyled},e),...t,id:r})});Bge.displayName="@mantine/core/ModalBaseTitle";function BLe({children:e}){return k.jsx(k.Fragment,{children:e})}const[jLe,ULe]=$b({size:"sm"}),zLe={},jge=Bt((e,t)=>{const n=dt("InputClearButton",zLe,e),{size:r,variant:i,vars:s,classNames:o,styles:a,...u}=n,l=ULe(),{resolvedClassNames:c,resolvedStyles:f}=Sw({classNames:o,styles:a,props:n});return k.jsx(Vb,{variant:i||"transparent",ref:t,size:r||(l==null?void 0:l.size)||"sm",classNames:c,styles:f,__staticSelector:"InputClearButton",...u})});jge.displayName="@mantine/core/InputClearButton";const[VLe,gT]=$b({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var up={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const hne={},HLe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${_l(t)} - ${ot(2)})`}}),WO=Bt((e,t)=>{const n=dt("InputDescription",hne,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=dt("InputDescription",hne,n),p=gT(),m=xn({name:["InputWrapper",c],props:n,classes:up,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:HLe}),g=f&&(p==null?void 0:p.getStyles)||m;return k.jsx(Ue,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});WO.classes=up;WO.displayName="@mantine/core/InputDescription";const qLe={},WLe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${_l(t)} - ${ot(2)})`}}),GO=Bt((e,t)=>{const n=dt("InputError",qLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=xn({name:["InputWrapper",c],props:n,classes:up,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:WLe}),m=gT(),g=f&&(m==null?void 0:m.getStyles)||p;return k.jsx(Ue,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});GO.classes=up;GO.displayName="@mantine/core/InputError";const pne={labelElement:"label"},GLe=(e,{size:t})=>({label:{"--input-label-size":_l(t),"--input-asterisk-color":void 0}}),YO=Bt((e,t)=>{const n=dt("InputLabel",pne,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:b,...y}=dt("InputLabel",pne,n),x=xn({name:["InputWrapper",m],props:n,classes:up,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:GLe}),w=gT(),S=(w==null?void 0:w.getStyles)||x;return k.jsxs(Ue,{...S("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},b],onMouseDown:C=>{h==null||h(C),!C.defaultPrevented&&C.detail>1&&C.preventDefault()},...y,children:[p,f&&k.jsx("span",{...S("required"),"aria-hidden":!0,children:" *"})]})});YO.classes=up;YO.displayName="@mantine/core/InputLabel";const mne={},Uq=Bt((e,t)=>{const n=dt("InputPlaceholder",mne,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=dt("InputPlaceholder",mne,n),p=xn({name:["InputPlaceholder",l],props:n,classes:up,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return k.jsx(Ue,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});Uq.classes=up;Uq.displayName="@mantine/core/InputPlaceholder";function YLe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const KLe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},XLe=(e,{size:t})=>({label:{"--input-label-size":_l(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${_l(t)} - ${ot(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${_l(t)} - ${ot(2)})`}}),zq=Bt((e,t)=>{const n=dt("InputWrapper",KLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:b,descriptionProps:y,errorProps:x,labelElement:w,children:S,withAsterisk:C,id:R,required:I,__stylesApiProps:O,mod:M,...L}=n,H=xn({name:["InputWrapper",f],props:O||n,classes:up,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:XLe}),D={size:l,variant:c,__staticSelector:f},B=df(R),z=typeof C=="boolean"?C:I,G=(x==null?void 0:x.id)||`${B}-error`,Z=(y==null?void 0:y.id)||`${B}-description`,ne=B,ue=!!m&&typeof m!="boolean",X=!!g,q=`${ue?G:""} ${X?Z:""}`,te=q.trim().length>0?q.trim():void 0,W=(b==null?void 0:b.id)||`${B}-label`,ee=p&&k.jsx(YO,{labelElement:w,id:W,htmlFor:ne,required:z,...D,...b,children:p},"label"),oe=X&&k.jsx(WO,{...y,...D,size:(y==null?void 0:y.size)||D.size,id:(y==null?void 0:y.id)||Z,children:g},"description"),pe=k.jsx(U.Fragment,{children:d(S)},"input"),ce=ue&&U.createElement(GO,{...x,...D,size:(x==null?void 0:x.size)||D.size,key:"error",id:(x==null?void 0:x.id)||G},m),he=h.map(Ee=>{switch(Ee){case"label":return ee;case"input":return pe;case"description":return oe;case"error":return ce;default:return null}});return k.jsx(VLe,{value:{getStyles:H,describedBy:te,inputId:ne,labelId:W,...YLe(h,{hasDescription:X,hasError:ue})},children:k.jsx(Ue,{ref:t,variant:c,size:l,mod:[{error:!!m},M],...H("root"),...L,children:he})})});zq.classes=up;zq.displayName="@mantine/core/InputWrapper";const QLe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},JLe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":_r(t.size,"input-height"),"--input-fz":_l(t.size),"--input-radius":t.radius===void 0?void 0:as(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?ot(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?ot(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?_r(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),ys=Ga((e,t)=>{const n=dt("Input",QLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:b,rightSection:y,rightSectionProps:x,rightSectionWidth:w,rightSectionPointerEvents:S,leftSectionPointerEvents:C,variant:R,vars:I,pointer:O,multiline:M,radius:L,id:H,withAria:D,withErrorStyles:B,mod:z,inputSize:G,__clearSection:Z,__clearable:ne,__defaultRightSection:ue,...X}=n,{styleProps:q,rest:te}=Cw(X),W=gT(),ee={offsetBottom:W==null?void 0:W.offsetBottom,offsetTop:W==null?void 0:W.offsetTop},oe=xn({name:["Input",l],props:c||n,classes:up,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:ee,rootSelector:"wrapper",vars:I,varsResolver:JLe}),pe=D?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":W==null?void 0:W.describedBy,id:(W==null?void 0:W.inputId)||H}:{},ce=y||ne&&Z||ue;return k.jsx(jLe,{value:{size:f||"sm"},children:k.jsxs(Ue,{...oe("wrapper"),...q,...d,mod:[{error:!!h&&B,pointer:O,disabled:p,multiline:M,"data-with-right-section":!!y,"data-with-left-section":!!m},z],variant:R,size:f,children:[m&&k.jsx("div",{...g,"data-position":"left",...oe("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),k.jsx(Ue,{component:"input",...te,...pe,ref:t,required:u,mod:{disabled:p,error:!!h&&B},variant:R,__size:G,...oe("input")}),ce&&k.jsx("div",{...x,"data-position":"right",...oe("section",{className:x==null?void 0:x.className,style:x==null?void 0:x.style}),children:ce})]})})});ys.classes=up;ys.Wrapper=zq;ys.Label=YO;ys.Error=GO;ys.Description=WO;ys.Placeholder=Uq;ys.ClearButton=jge;ys.displayName="@mantine/core/Input";function ZLe(e,t,n){const r=dt(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:b,id:y,size:x,style:w,inputContainer:S,inputWrapperOrder:C,withAsterisk:R,variant:I,vars:O,mod:M,...L}=r,{styleProps:H,rest:D}=Cw(L),B={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:x,style:w,inputContainer:S,inputWrapperOrder:C,withAsterisk:R,variant:I,id:y,mod:M,...b};return{...D,classNames:u,styles:l,unstyled:f,wrapperProps:{...B,...H},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:x,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:I,id:y}}}const e7e={__staticSelector:"InputBase",withAria:!0},lp=Ga((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=ZLe("InputBase",e7e,e);return k.jsx(ys.Wrapper,{...r,children:k.jsx(ys,{...n,...i,ref:t})})});lp.classes={...ys.classes,...ys.Wrapper.classes};lp.displayName="@mantine/core/InputBase";const t7e={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Uge={root:"m_8bffd616"};const n7e={},An=Ga((e,t)=>{const n=dt("Flex",n7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,b=xn({name:"Flex",classes:Uge,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),y=Wa(),x=nR(),w=Dme({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:y,data:t7e});return k.jsxs(k.Fragment,{children:[w.hasResponsiveStyles&&k.jsx(Tw,{selector:`.${x}`,styles:w.styles,media:w.media}),k.jsx(Ue,{ref:t,...b("root",{className:x,style:Lb(w.inlineStyles)}),...g})]})});An.classes=Uge;An.displayName="@mantine/core/Flex";const[r7e,Vq]=Rl("Accordion component was not found in the tree");function KO({style:e,size:t=16,...n}){return k.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:ot(t),height:ot(t),display:"block"},...n,children:k.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}KO.displayName="@mantine/core/AccordionChevron";const[i7e,zge]=Rl("Accordion.Item component was not found in the tree");var iR={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const s7e={},Hq=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=dt("AccordionControl",s7e,e),{value:m}=zge(),g=Vq(),b=g.isItemActive(m),y=typeof g.order=="number",x=`h${g.order}`,w=k.jsxs(sh,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:b,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:S=>{l==null||l(S),g.onChange(m)},type:"button",disabled:d,"aria-expanded":b,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:uq({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[k.jsx(Ue,{component:"span",mod:{rotate:!g.disableChevronRotation&&b,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),k.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&k.jsx(Ue,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return y?k.jsx(x,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});Hq.displayName="@mantine/core/AccordionControl";Hq.classes=iR;const o7e={},qq=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=dt("AccordionItem",o7e,e),c=Vq();return k.jsx(i7e,{value:{value:a},children:k.jsx(Ue,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});qq.displayName="@mantine/core/AccordionItem";qq.classes=iR;const a7e={},Wq=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=dt("AccordionPanel",a7e,e),{value:l}=zge(),c=Vq();return k.jsx(jO,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:k.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});Wq.displayName="@mantine/core/AccordionPanel";Wq.classes=iR;const u7e={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:k.jsx(KO,{})},l7e=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:ot(n),"--accordion-radius":r===void 0?void 0:as(r)}});function Zl(e){const t=dt("Accordion",u7e,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:b,chevronSize:y,order:x,chevron:w,variant:S,radius:C,...R}=t,I=df(h),[O,M]=ju({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),L=B=>Array.isArray(O)?O.includes(B):B===O,H=B=>{const z=Array.isArray(O)?O.includes(B)?O.filter(G=>G!==B):[...O,B]:B===O?null:B;M(z)},D=xn({name:"Accordion",classes:iR,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:l7e});return k.jsx(r7e,{value:{isItemActive:L,onChange:H,getControlId:ZN(`${I}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:ZN(`${I}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:b,order:x,chevron:w,loop:p,getStyles:D,variant:S,unstyled:o},children:k.jsx(Ue,{...D("root"),id:I,...R,variant:S,"data-accordion":!0,children:u})})}const c7e=e=>e;Zl.extend=c7e;Zl.withProps=g9e(Zl);Zl.classes=iR;Zl.displayName="@mantine/core/Accordion";Zl.Item=qq;Zl.Panel=Wq;Zl.Control=Hq;Zl.Chevron=KO;var Vge={root:"m_7f854edf"};const f7e={position:{bottom:0,right:0},zIndex:fd("modal"),withinPortal:!0},d7e=(e,{zIndex:t,position:n})=>({root:{"--affix-z-index":t==null?void 0:t.toString(),"--affix-top":ot(n==null?void 0:n.top),"--affix-left":ot(n==null?void 0:n.left),"--affix-bottom":ot(n==null?void 0:n.bottom),"--affix-right":ot(n==null?void 0:n.right)}}),Gq=Bt((e,t)=>{const n=dt("Affix",f7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,portalProps:l,zIndex:c,withinPortal:f,position:d,...h}=n,p=xn({name:"Affix",classes:Vge,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:d7e});return k.jsx(Ub,{...l,withinPortal:f,children:k.jsx(Ue,{ref:t,...p("root"),...h})})});Gq.classes=Vge;Gq.displayName="@mantine/core/Affix";var Hge={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const h7e={},p7e=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:as(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},Yy=Bt((e,t)=>{const n=dt("Alert",h7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:b,variant:y,autoContrast:x,...w}=n,S=xn({name:"Alert",classes:Hge,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:p7e}),C=df(h),R=f&&`${C}-title`||void 0,I=`${C}-body`;return k.jsx(Ue,{id:C,...S("root",{variant:y}),variant:y,ref:t,...w,role:"alert","aria-describedby":I,"aria-labelledby":R,children:k.jsxs("div",{...S("wrapper"),children:[p&&k.jsx("div",{...S("icon"),children:p}),k.jsxs("div",{...S("body"),children:[f&&k.jsx("div",{...S("title"),"data-with-close-button":m||void 0,children:k.jsx("span",{id:R,...S("label"),children:f})}),d&&k.jsx("div",{id:I,...S("message"),"data-variant":y,children:d})]}),m&&k.jsx(Vb,{...S("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":b,unstyled:a})]})})});Yy.classes=Hge;Yy.displayName="@mantine/core/Alert";var qge={root:"m_b6d8b162"};function m7e(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const g7e={inherit:!1},y7e=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":_l(i),"--text-lh":xme(i),"--text-gradient":t==="gradient"?Jj(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Fs(s,e):void 0}}),At=Ga((e,t)=>{const n=dt("Text",g7e,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:b,size:y,...x}=n,w=xn({name:["Text",l],props:n,classes:qge,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:y7e});return k.jsx(Ue,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":m7e(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},b],size:y,...x})});At.classes=qge;At.displayName="@mantine/core/Text";var Wge={root:"m_849cf0da"};const v7e={underline:"hover"},kw=Ga((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=dt("Anchor",v7e,e);return k.jsx(At,{component:"a",ref:t,className:va({[Wge.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});kw.classes=Wge;kw.displayName="@mantine/core/Anchor";const[b7e,yT]=Rl("AppShell was not found in tree");var Hb={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const x7e={},Yq=Bt((e,t)=>{const n=dt("AppShellAside",x7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=yT();return h.disabled?null:k.jsx(Ue,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});Yq.classes=Hb;Yq.displayName="@mantine/core/AppShellAside";const _7e={},Kq=Bt((e,t)=>{var p;const n=dt("AppShellFooter",_7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=yT();return h.disabled?null:k.jsx(Ue,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:va({[uS.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});Kq.classes=Hb;Kq.displayName="@mantine/core/AppShellFooter";const w7e={},Xq=Bt((e,t)=>{var p;const n=dt("AppShellHeader",w7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=yT();return h.disabled?null:k.jsx(Ue,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:va({[uS.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});Xq.classes=Hb;Xq.displayName="@mantine/core/AppShellHeader";const E7e={},Qq=Bt((e,t)=>{const n=dt("AppShellMain",E7e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=yT();return k.jsx(Ue,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});Qq.classes=Hb;Qq.displayName="@mantine/core/AppShellMain";function sR(e){return typeof e=="object"?e.base:e}function oR(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function aR(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function S7e({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),oR(s)){const f=ot(sR(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(aR(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=ot(s.base),e["--app-shell-aside-offset"]=ot(s.base)),Cs(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=ot(s[f]),t[f]["--app-shell-aside-offset"]=ot(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=cq(r.breakpoint,i.breakpoints)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function T7e({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(oR(r)){const o=ot(sR(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}aR(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=ot(r.base),s&&(e["--app-shell-footer-offset"]=ot(r.base))),Cs(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=ot(r[o]),s&&(t[o]["--app-shell-footer-offset"]=ot(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function C7e({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(oR(r)){const o=ot(sR(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}aR(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=ot(r.base),s&&(e["--app-shell-header-offset"]=ot(r.base))),Cs(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=ot(r[o]),s&&(t[o]["--app-shell-header-offset"]=ot(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function A7e({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),oR(s)){const f=ot(sR(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(aR(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=ot(s.base),e["--app-shell-navbar-offset"]=ot(s.base)),Cs(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=ot(s[f]),t[f]["--app-shell-navbar-offset"]=ot(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=cq(r.breakpoint,i.breakpoints)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function xF(e){return Number(e)===0?"0px":Ha(e)}function k7e({padding:e,baseStyles:t,minMediaStyles:n}){oR(e)&&(t["--app-shell-padding"]=xF(sR(e))),aR(e)&&(e.base&&(t["--app-shell-padding"]=xF(e.base)),Cs(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=xF(e[r]))}))}function R7e({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};A7e({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),S7e({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),C7e({baseStyles:u,minMediaStyles:o,header:t}),T7e({baseStyles:u,minMediaStyles:o,footer:n}),k7e({baseStyles:u,minMediaStyles:o,padding:i});const l=zk(Cs(o),s.breakpoints).map(d=>({query:`(min-width: ${JN(d.px)})`,styles:o[d.value]})),c=zk(Cs(a),s.breakpoints).map(d=>({query:`(max-width: ${JN(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function I7e({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Wa(),o=Bb(),{media:a,baseStyles:u}=R7e({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return k.jsx(Tw,{media:a,styles:u,selector:o.cssVariablesSelector})}const P7e={},Jq=Bt((e,t)=>{const n=dt("AppShellNavbar",P7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=yT();return h.disabled?null:k.jsx(Ue,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});Jq.classes=Hb;Jq.displayName="@mantine/core/AppShellNavbar";const N7e={},Zq=Ga((e,t)=>{const n=dt("AppShellSection",N7e,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=yT();return k.jsx(Ue,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});Zq.classes=Hb;Zq.displayName="@mantine/core/AppShellSection";function D7e({transitionDuration:e,disabled:t}){const[n,r]=U.useState(!0),i=U.useRef(-1),s=U.useRef(-1);return Tme("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>U.startTransition(()=>{r(!1)}),200)}),ww(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>U.startTransition(()=>{r(!1)}),e||0)},[t,e]),n}const O7e={withBorder:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:fd("app")},M7e=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),hs=Bt((e,t)=>{const n=dt("AppShell",O7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:b,aside:y,footer:x,offsetScrollbars:w=g!=="alt",mod:S,...C}=n,R=xn({name:"AppShell",classes:Hb,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:M7e}),I=D7e({disabled:b,transitionDuration:d});return k.jsxs(b7e,{value:{getStyles:R,withBorder:c,zIndex:m,disabled:b,offsetScrollbars:w},children:[k.jsx(I7e,{navbar:l,header:p,aside:y,footer:x,padding:f}),k.jsx(Ue,{ref:t,...R("root"),mod:[{resizing:I,layout:g,disabled:b},S],...C})]})});hs.classes=Hb;hs.displayName="@mantine/core/AppShell";hs.Navbar=Jq;hs.Header=Xq;hs.Main=Qq;hs.Aside=Yq;hs.Footer=Kq;hs.Section=Zq;function Gge(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>Gge(t))}:e}function Yge(e){return e?e.map(t=>Gge(t)):[]}function eW(e){return e.reduce((t,n)=>"group"in n?{...t,...eW(n.items)}:(t[n.value]=n,t),{})}var id={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const L7e={error:null},F7e=(e,{size:t})=>({chevron:{"--combobox-chevron-size":_r(t,"combobox-chevron-size")}}),tW=Bt((e,t)=>{const n=dt("ComboboxChevron",L7e,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=xn({name:"ComboboxChevron",classes:id,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:F7e,rootSelector:"chevron"});return k.jsx(Ue,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:k.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});tW.classes=id;tW.displayName="@mantine/core/ComboboxChevron";const[$7e,cp]=Rl("Combobox component was not found in tree"),Kge=U.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>k.jsx(ys.ClearButton,{ref:s,tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));Kge.displayName="@mantine/core/ComboboxClearButton";const B7e={},nW=Bt((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=dt("ComboboxDropdown",B7e,e),u=cp();return k.jsx(wl.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});nW.classes=id;nW.displayName="@mantine/core/ComboboxDropdown";const j7e={refProp:"ref"},Xge=Bt((e,t)=>{const{children:n,refProp:r}=dt("ComboboxDropdownTarget",j7e,e);if(cp(),!Fb(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return k.jsx(wl.Target,{ref:t,refProp:r,children:n})});Xge.displayName="@mantine/core/ComboboxDropdownTarget";const U7e={},rW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=dt("ComboboxEmpty",U7e,e),u=cp();return k.jsx(Ue,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});rW.classes=id;rW.displayName="@mantine/core/ComboboxEmpty";function iW({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=cp(),[a,u]=U.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.dropdownOpened?o.store.listId:void 0,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const z7e={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Qge=Bt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=dt("ComboboxEventsTarget",z7e,e);if(!Fb(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=cp(),f=iW({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return U.cloneElement(n,{...f,...l,[r]:yu(t,c.store.targetRef,FO(n))})});Qge.displayName="@mantine/core/ComboboxEventsTarget";const V7e={},sW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=dt("ComboboxFooter",V7e,e),u=cp();return k.jsx(Ue,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});sW.classes=id;sW.displayName="@mantine/core/ComboboxFooter";const H7e={},oW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=dt("ComboboxGroup",H7e,e),c=cp();return k.jsxs(Ue,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&k.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});oW.classes=id;oW.displayName="@mantine/core/ComboboxGroup";const q7e={},aW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=dt("ComboboxHeader",q7e,e),u=cp();return k.jsx(Ue,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});aW.classes=id;aW.displayName="@mantine/core/ComboboxHeader";function Jge({value:e,valuesDivider:t=",",...n}){return k.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}Jge.displayName="@mantine/core/ComboboxHiddenInput";const W7e={},uW=Bt((e,t)=>{const n=dt("ComboboxOption",W7e,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,b=cp(),y=U.useId(),x=l||y;return k.jsx(Ue,{...b.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:x,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var S;h?w.preventDefault():((S=b.onOptionSubmit)==null||S.call(b,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{b.resetSelectionOnOptionHover&&b.store.resetSelectedOption(),d==null||d(w)}})});uW.classes=id;uW.displayName="@mantine/core/ComboboxOption";const G7e={},lW=Bt((e,t)=>{const n=dt("ComboboxOptions",G7e,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=cp(),d=df(a);return U.useEffect(()=>{f.store.setListId(d)},[d]),k.jsx(Ue,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});lW.classes=id;lW.displayName="@mantine/core/ComboboxOptions";const Y7e={withAriaAttributes:!0,withKeyboardNavigation:!0},cW=Bt((e,t)=>{const n=dt("ComboboxSearch",Y7e,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=cp(),h=d.getStyles("search"),p=iW({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return k.jsx(ys,{ref:yu(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});cW.classes=id;cW.displayName="@mantine/core/ComboboxSearch";const K7e={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Zge=Bt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=dt("ComboboxTarget",K7e,e);if(!Fb(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=cp(),f=iW({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=U.cloneElement(n,{...f,...l});return k.jsx(wl.Target,{ref:yu(t,c.store.targetRef),children:d})});Zge.displayName="@mantine/core/ComboboxTarget";function X7e(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Q7e(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function J7e(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function fW({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=ju({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=U.useRef(null),c=U.useRef(-1),f=U.useRef(null),d=U.useRef(null),h=U.useRef(-1),p=U.useRef(-1),m=U.useRef(-1),g=U.useCallback((G="unknown")=>{a||(u(!0),i==null||i(G))},[u,i,a]),b=U.useCallback((G="unknown")=>{a&&(u(!1),r==null||r(G))},[u,r,a]),y=U.useCallback((G="unknown")=>{a?b(G):g(G)},[b,g,a]),x=U.useCallback(()=>{const G=document.querySelector(`#${l.current} [data-combobox-selected]`);G==null||G.removeAttribute("data-combobox-selected"),G==null||G.removeAttribute("aria-selected")},[]),w=U.useCallback(G=>{const Z=document.getElementById(l.current),ne=Z==null?void 0:Z.querySelectorAll("[data-combobox-option]");if(!ne)return null;const ue=G>=ne.length?0:G<0?ne.length-1:G;return c.current=ue,ne!=null&&ne[ue]&&!ne[ue].hasAttribute("data-combobox-disabled")?(x(),ne[ue].setAttribute("data-combobox-selected","true"),ne[ue].setAttribute("aria-selected","true"),ne[ue].scrollIntoView({block:"nearest",behavior:o}),ne[ue].id):null},[o,x]),S=U.useCallback(()=>{const G=document.querySelector(`#${l.current} [data-combobox-active]`);if(G){const Z=document.querySelectorAll(`#${l.current} [data-combobox-option]`),ne=Array.from(Z).findIndex(ue=>ue===G);return w(ne)}return w(0)},[w]),C=U.useCallback(()=>w(Q7e(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),R=U.useCallback(()=>w(X7e(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),I=U.useCallback(()=>w(J7e(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),O=U.useCallback((G="selected",Z)=>{m.current=window.setTimeout(()=>{var X;const ne=document.querySelectorAll(`#${l.current} [data-combobox-option]`),ue=Array.from(ne).findIndex(q=>q.hasAttribute(`data-combobox-${G}`));c.current=ue,Z!=null&&Z.scrollIntoView&&((X=ne[ue])==null||X.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),M=U.useCallback(()=>{c.current=-1,x()},[x]),L=U.useCallback(()=>{const G=document.querySelectorAll(`#${l.current} [data-combobox-option]`),Z=G==null?void 0:G[c.current];Z==null||Z.click()},[]),H=U.useCallback(G=>{l.current=G},[]),D=U.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),B=U.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),z=U.useCallback(()=>c.current,[]);return U.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:b,toggleDropdown:y,selectedOptionIndex:c.current,getSelectedOptionIndex:z,selectOption:w,selectFirstOption:I,selectActiveOption:S,selectNextOption:C,selectPreviousOption:R,resetSelectedOption:M,updateSelectedOptionIndex:O,listId:l.current,setListId:H,clickSelectedOption:L,searchRef:f,focusSearchInput:D,targetRef:d,focusTarget:B}}const Z7e={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},eFe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":_l(t),"--combobox-option-padding":_r(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:ot(n),"--combobox-option-fz":_l(t),"--combobox-option-padding":_r(t,"combobox-option-padding")}});function di(e){const t=dt("Combobox",Z7e,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=fW(),b=o||g,y=xn({name:h||"Combobox",classes:id,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:eFe}),x=()=>{l==null||l(),b.closeDropdown()};return k.jsx($7e,{value:{getStyles:y,store:b,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:k.jsx(wl,{opened:b.dropdownOpened,...m,onChange:w=>!w&&x(),withRoles:!1,unstyled:i,children:s})})}const tFe=e=>e;di.extend=tFe;di.classes=id;di.displayName="@mantine/core/Combobox";di.Target=Zge;di.Dropdown=nW;di.Options=lW;di.Option=uW;di.Search=cW;di.Empty=rW;di.Chevron=tW;di.Footer=sW;di.Header=aW;di.EventsTarget=Qge;di.DropdownTarget=Xge;di.Group=oW;di.ClearButton=Kge;di.HiddenInput=Jge;var eye={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const tye=eye,XO=U.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:b,vars:y,mod:x,...w},S)=>{const C=xn({name:e,props:t,className:n,style:b,classes:eye,classNames:r,styles:i,unstyled:s});return k.jsx(Ue,{...C("root"),ref:S,__vars:{"--label-fz":_l(d),"--label-lh":_r(d,"label-lh")},mod:[{"label-position":h},x],variant:g,size:d,...w,children:k.jsxs(Ue,{component:p,htmlFor:p==="label"?l:void 0,...C("body"),children:[o,k.jsxs("div",{...C("labelWrapper"),"data-disabled":c||void 0,children:[a&&k.jsx(Ue,{component:m,htmlFor:m==="label"?l:void 0,...C("label"),"data-disabled":c||void 0,children:a}),u&&k.jsx(ys.Description,{size:d,__inheritStyles:!1,...C("description"),children:u}),f&&typeof f!="boolean"&&k.jsx(ys.Error,{size:d,__inheritStyles:!1,...C("error"),children:f})]})]})})});XO.displayName="@mantine/core/InlineInput";const nye=U.createContext(null),nFe=nye.Provider,rye=()=>U.useContext(nye),[rFe,iFe]=$b();var iye={card:"m_26775b0a"};const sFe={withBorder:!0},oFe=(e,{radius:t})=>({card:{"--card-radius":as(t)}}),dW=Bt((e,t)=>{const n=dt("CheckboxCard",sFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,defaultChecked:p,onChange:m,...g}=n,b=xn({name:"CheckboxCard",classes:iye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oFe,rootSelector:"card"}),y=rye(),x=typeof l=="boolean"?l:y?y.value.includes(d||""):void 0,[w,S]=ju({value:x,defaultValue:p,finalValue:!1,onChange:m});return k.jsx(rFe,{value:{checked:w},children:k.jsx(sh,{ref:t,mod:[{"with-border":f,checked:w},c],...b("card"),...g,role:"checkbox","aria-checked":w,onClick:C=>{h==null||h(C),y==null||y.onChange(d||""),S(!w)}})})});dW.displayName="@mantine/core/CheckboxCard";dW.classes=iye;function hW({children:e,role:t}){const n=gT();return n?k.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):k.jsx(k.Fragment,{children:e})}const aFe={},pW=Bt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=dt("CheckboxGroup",aFe,e),[c,f]=ju({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return k.jsx(nFe,{value:{value:c,onChange:d,size:s},children:k.jsx(ys.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:k.jsx(hW,{role:"group",children:a})})})});pW.classes=ys.Wrapper.classes;pW.displayName="@mantine/core/CheckboxGroup";function sye({size:e,style:t,...n}){const r=e!==void 0?{width:ot(e),height:ot(e),...t}:t;return k.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:k.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function oye({indeterminate:e,...t}){return e?k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:k.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):k.jsx(sye,{...t})}var aye={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const uFe={icon:oye},lFe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=vg({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":_r(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:as(t),"--checkbox-color":s==="outline"?u:Fs(n,e),"--checkbox-icon-color":i?Fs(i,e):cT(o,e)?Ew({color:n,theme:e,autoContrast:o}):void 0}}},mW=Bt((e,t)=>{const n=dt("CheckboxIndicator",uFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:b,disabled:y,...x}=n,w=l,S=xn({name:"CheckboxIndicator",classes:aye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:lFe,rootSelector:"indicator"}),C=iFe(),R=typeof m=="boolean"||typeof c=="boolean"?m||c:(C==null?void 0:C.checked)||!1;return k.jsx(Ue,{ref:t,...S("indicator",{variant:b}),variant:b,mod:[{checked:R,disabled:y},g],...x,children:k.jsx(w,{indeterminate:c,...S("icon")})})});mW.displayName="@mantine/core/CheckboxIndicator";mW.classes=aye;var uye={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const cFe={labelPosition:"right",icon:oye},fFe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=vg({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":_r(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:as(t),"--checkbox-color":s==="outline"?u:Fs(n,e),"--checkbox-icon-color":i?Fs(i,e):cT(o,e)?Ew({color:n,theme:e,autoContrast:o}):void 0}}},ic=Bt((e,t)=>{const n=dt("Checkbox",cFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,checked:m,labelPosition:g,description:b,error:y,disabled:x,variant:w,indeterminate:S,icon:C,rootRef:R,iconColor:I,onChange:O,autoContrast:M,mod:L,...H}=n,D=rye(),B=d||(D==null?void 0:D.size),z=C,G=xn({name:"Checkbox",props:n,classes:uye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fFe}),{styleProps:Z,rest:ne}=Cw(H),ue=df(f),X=D?{checked:D.value.includes(ne.value),onChange:q=>{D.onChange(q),O==null||O(q)}}:{};return k.jsx(XO,{...G("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:ue,size:B,labelPosition:g,label:c,description:b,error:y,disabled:x,classNames:r,styles:o,unstyled:a,"data-checked":X.checked||m||void 0,variant:w,ref:R,mod:L,...Z,...p,children:k.jsxs(Ue,{...G("inner"),mod:{"data-label-position":g},children:[k.jsx(Ue,{component:"input",id:ue,ref:t,checked:m,disabled:x,mod:{error:!!y,indeterminate:S},...G("input",{focusable:!0,variant:w}),onChange:O,...ne,...X,type:"checkbox"}),k.jsx(z,{indeterminate:S,...G("icon")})]})})});ic.classes={...uye,...tye};ic.displayName="@mantine/core/Checkbox";ic.Group=pW;ic.Indicator=mW;ic.Card=dW;function pS(e){return"group"in e}function lye({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;pS(o)&&i.push({group:o.group,items:lye({options:o.items,search:t,limit:n-i.length})}),pS(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function dFe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function cye(e,t=new Set){if(Array.isArray(e))for(const n of e)if(pS(n))cye(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function hFe(e,t){return Array.isArray(e)?e.includes(t):e===t}function fye({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!pS(e)){const a=hFe(n,e.value),u=t&&a&&k.jsx(sye,{className:id.optionsDropdownCheckIcon}),l=k.jsxs(k.Fragment,{children:[r==="left"&&u,k.jsx("span",{children:e.label}),r==="right"&&u]});return k.jsx(di.Option,{value:e.value,disabled:e.disabled,className:va({[id.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>k.jsx(fye,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return k.jsx(di.Group,{label:e.group,children:o})}function dye({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":b}){cye(e);const x=typeof i=="string"?(r||lye)({options:e,search:u?i:"",limit:s??1/0}):e,w=dFe(x),S=x.map(C=>k.jsx(fye,{data:C,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},pS(C)?C.group:C.value));return k.jsx(di.Dropdown,{hidden:t||n&&w,children:k.jsxs(di.Options,{labelledBy:p,"aria-label":b,children:[a?k.jsx(a1.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:S}):S,w&&d&&k.jsx(di.Empty,{children:d})]})})}var hye={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const pFe={},mFe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":_r(s,"badge-height"),"--badge-padding-x":_r(s,"badge-padding-x"),"--badge-fz":_r(s,"badge-fz"),"--badge-radius":t===void 0?void 0:as(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Fs(n,e):void 0}}},v0=Ga((e,t)=>{const n=dt("Badge",pFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:b,circle:y,mod:x,...w}=n,S=xn({name:"Badge",props:n,classes:hye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mFe});return k.jsxs(Ue,{variant:m,mod:[{block:g,circle:y,"with-right-section":!!h,"with-left-section":!!d},x],...S("root",{variant:m}),ref:t,...w,children:[d&&k.jsx("span",{...S("section"),"data-position":"left",children:d}),k.jsx("span",{...S("label"),children:p}),h&&k.jsx("span",{...S("section"),"data-position":"right",children:h})]})});v0.classes=hye;v0.displayName="@mantine/core/Badge";var vT={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const gne={orientation:"horizontal"},gFe=(e,{borderWidth:t})=>({group:{"--button-border-width":ot(t)}}),gW=Bt((e,t)=>{const n=dt("ButtonGroup",gne,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=dt("ButtonGroup",gne,e),p=xn({name:"ButtonGroup",props:n,classes:vT,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:gFe,rootSelector:"group"});return k.jsx(Ue,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});gW.classes=vT;gW.displayName="@mantine/core/ButtonGroup";const yne={},yFe=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":_r(o,"section-height"),"--section-padding-x":_r(o,"section-padding-x"),"--section-fz":o!=null&&o.includes("compact")?_l(o.replace("compact-","")):_l(o),"--section-radius":t===void 0?void 0:as(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},yW=Bt((e,t)=>{const n=dt("ButtonGroupSection",yne,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,variant:l,gradient:c,radius:f,autoContrast:d,...h}=dt("ButtonGroupSection",yne,e),p=xn({name:"ButtonGroupSection",props:n,classes:vT,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:yFe,rootSelector:"groupSection"});return k.jsx(Ue,{...p("groupSection"),ref:t,variant:l,...h})});yW.classes=vT;yW.displayName="@mantine/core/ButtonGroupSection";const vFe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${ot(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},bFe={},xFe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":_r(s,"button-height"),"--button-padding-x":_r(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?_l(s.replace("compact-","")):_l(s),"--button-radius":t===void 0?void 0:as(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},Nn=Ga((e,t)=>{const n=dt("Button",bFe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:b,styles:y,unstyled:x,"data-disabled":w,autoContrast:S,mod:C,...R}=n,I=xn({name:"Button",props:n,classes:vT,className:s,style:r,classNames:b,styles:y,unstyled:x,vars:i,varsResolver:xFe}),O=!!l,M=!!c;return k.jsxs(sh,{ref:t,...I("root",{active:!a&&!p&&!w}),unstyled:x,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":O,"with-right-section":M},C],...R,children:[k.jsx(bg,{mounted:!!p,transition:vFe,duration:150,children:L=>k.jsx(Ue,{component:"span",...I("loader",{style:L}),"aria-hidden":!0,children:k.jsx(xg,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),k.jsxs("span",{...I("inner"),children:[l&&k.jsx(Ue,{component:"span",...I("section"),mod:{position:"left"},children:l}),k.jsx(Ue,{component:"span",mod:{loading:p},...I("label"),children:u}),c&&k.jsx(Ue,{component:"span",...I("section"),mod:{position:"right"},children:c})]})]})});Nn.classes=vT;Nn.displayName="@mantine/core/Button";Nn.Group=gW;Nn.GroupSection=yW;const[_Fe,wFe]=Rl("Card component was not found in tree");var vW={root:"m_e615b15f",section:"m_599a2148"};const EFe={},QO=Ga((e,t)=>{const n=dt("CardSection",EFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=wFe();return k.jsx(Ue,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});QO.classes=vW;QO.displayName="@mantine/core/CardSection";const SFe={},TFe=(e,{padding:t})=>({root:{"--card-padding":Ha(t)}}),bT=Ga((e,t)=>{const n=dt("Card",SFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=xn({name:"Card",props:n,classes:vW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:TFe}),h=U.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===QO?U.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return k.jsx(_Fe,{value:{getStyles:d},children:k.jsx(fT,{ref:t,unstyled:a,...d("root"),...f,children:p})})});bT.classes=vW;bT.displayName="@mantine/core/Card";bT.Section=QO;var pye={root:"m_4451eb3a"};const CFe={},l1=Ga((e,t)=>{const n=dt("Center",CFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=xn({name:"Center",props:n,classes:pye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return k.jsx(Ue,{ref:t,mod:[{inline:l},c],...d("root"),...f})});l1.classes=pye;l1.displayName="@mantine/core/Center";var mye={root:"m_b183c0a2"};const AFe={},kFe=(e,{color:t})=>({root:{"--code-bg":t?Fs(t,e):void 0}}),uk=Bt((e,t)=>{const n=dt("Code",AFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=xn({name:"Code",props:n,classes:mye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kFe});return k.jsx(Ue,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});uk.classes=mye;uk.displayName="@mantine/core/Code";var gye={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const vne={withShadow:!0},RFe=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:as(t),"--cs-size":ot(n)}}),bW=Ga((e,t)=>{const n=dt("ColorSwatch",vne,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,size:c,radius:f,withShadow:d,children:h,variant:p,...m}=dt("ColorSwatch",vne,n),g=xn({name:"ColorSwatch",props:n,classes:gye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:RFe});return k.jsxs(Ue,{ref:t,variant:p,size:c,...g("root",{focusable:!0}),...m,children:[k.jsx("span",{...g("alphaOverlay")}),d&&k.jsx("span",{...g("shadowOverlay")}),k.jsx("span",{...g("colorOverlay",{style:{backgroundColor:l}})}),k.jsx("span",{...g("childrenOverlay"),children:h})]})});bW.classes=gye;bW.displayName="@mantine/core/ColorSwatch";var yye={root:"m_7485cace"};const IFe={},PFe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:_r(t,"container-size")}}),c1=Bt((e,t)=>{const n=dt("Container",IFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=xn({name:"Container",classes:yye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:PFe});return k.jsx(Ue,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});c1.classes=yye;c1.displayName="@mantine/core/Container";var vye={root:"m_3eebeb36",label:"m_9e365f20"};const NFe={orientation:"horizontal"},DFe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Fs(t,e):void 0,"--divider-border-style":n,"--divider-size":_r(r,"divider-size")}}),Zd=Bt((e,t)=>{const n=dt("Divider",NFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=xn({name:"Divider",classes:vye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:DFe});return k.jsx(Ue,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&k.jsx(Ue,{component:"span",mod:{position:d},...m("label"),children:f})})});Zd.classes=vye;Zd.displayName="@mantine/core/Divider";function OFe({open:e,close:t,openDelay:n,closeDelay:r}){const i=U.useRef(-1),s=U.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return U.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[bne,bye]=Rl("Grid component was not found in tree"),uU=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,xne=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":uU(e,t),_ne=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},wne=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function MFe({span:e,order:t,offset:n,selector:r}){var h;const i=Wa(),s=bye(),o=s.breakpoints||i.breakpoints,u=d0(e)===void 0?12:d0(e),l=Lb({"--col-order":(h=d0(t))==null?void 0:h.toString(),"--col-flex-grow":_ne(u,s.grow),"--col-flex-basis":uU(u,s.columns),"--col-width":u==="content"?"auto":void 0,"--col-max-width":xne(u,s.columns,s.grow),"--col-offset":wne(d0(n),s.columns)}),c=Cs(o).reduce((p,m)=>{var g;return p[m]||(p[m]={}),typeof t=="object"&&t[m]!==void 0&&(p[m]["--col-order"]=(g=t[m])==null?void 0:g.toString()),typeof e=="object"&&e[m]!==void 0&&(p[m]["--col-flex-grow"]=_ne(e[m],s.grow),p[m]["--col-flex-basis"]=uU(e[m],s.columns),p[m]["--col-width"]=e[m]==="content"?"auto":void 0,p[m]["--col-max-width"]=xne(e[m],s.columns,s.grow)),typeof n=="object"&&n[m]!==void 0&&(p[m]["--col-offset"]=wne(n[m],s.columns)),p},{}),d=zk(Cs(c),o).filter(p=>Cs(c[p.value]).length>0).map(p=>({query:s.type==="container"?`mantine-grid (min-width: ${o[p.value]})`:`(min-width: ${o[p.value]})`,styles:c[p.value]}));return k.jsx(Tw,{styles:l,media:s.type==="container"?void 0:d,container:s.type==="container"?d:void 0,selector:r})}var xW={container:"m_8478a6da",root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const LFe={span:12},_W=Bt((e,t)=>{const n=dt("GridCol",LFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=bye(),h=nR();return k.jsxs(k.Fragment,{children:[k.jsx(MFe,{selector:`.${h}`,span:u,order:l,offset:c}),k.jsx(Ue,{ref:t,...d.getStyles("col",{className:va(i,h),style:s,classNames:r,styles:o}),...f})]})});_W.classes=xW;_W.displayName="@mantine/core/GridCol";function Ene({gutter:e,selector:t,breakpoints:n,type:r}){const i=Wa(),s=n||i.breakpoints,o=Lb({"--grid-gutter":Ha(d0(e))}),a=Cs(s).reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--grid-gutter"]=Ha(e[f])),c),{}),l=zk(Cs(a),s).filter(c=>Cs(a[c.value]).length>0).map(c=>({query:r==="container"?`mantine-grid (min-width: ${s[c.value]})`:`(min-width: ${s[c.value]})`,styles:a[c.value]}));return k.jsx(Tw,{styles:o,media:r==="container"?void 0:l,container:r==="container"?l:void 0,selector:t})}const FFe={gutter:"md",grow:!1,columns:12},$Fe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Mm=Bt((e,t)=>{const n=dt("Grid",FFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,breakpoints:m,type:g,...b}=n,y=xn({name:"Grid",classes:xW,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$Fe}),x=nR();return g==="container"&&m?k.jsxs(bne,{value:{getStyles:y,grow:l,columns:f||12,breakpoints:m,type:g},children:[k.jsx(Ene,{selector:`.${x}`,...n}),k.jsx("div",{...y("container"),children:k.jsx(Ue,{ref:t,...y("root",{className:x}),...b,children:k.jsx("div",{...y("inner"),children:p})})})]}):k.jsxs(bne,{value:{getStyles:y,grow:l,columns:f||12,breakpoints:m,type:g},children:[k.jsx(Ene,{selector:`.${x}`,...n}),k.jsx(Ue,{ref:t,...y("root",{className:x}),...b,children:k.jsx("div",{...y("inner"),children:p})})]})});Mm.classes=xW;Mm.displayName="@mantine/core/Grid";Mm.Col=_W;var xye={root:"m_9e117634"};const BFe={},jFe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:as(t),"--image-object-fit":n}}),qb=Ga((e,t)=>{const n=dt("Image",BFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,b]=U.useState(!c);U.useEffect(()=>b(!c),[c]);const y=xn({name:"Image",classes:xye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jFe});return g&&h?k.jsx(Ue,{component:"img",ref:t,src:h,...y("root"),onError:l,mod:["fallback",p],...m}):k.jsx(Ue,{component:"img",ref:t,...y("root"),src:c,onError:x=>{l==null||l(x),b(!0)},mod:p,...m})});qb.classes=xye;qb.displayName="@mantine/core/Image";function lU(){return lU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lU.apply(null,arguments)}function UFe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var zFe=U.useLayoutEffect,VFe=function(t){var n=U.useRef(t);return zFe(function(){n.current=t}),n},Sne=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},HFe=function(t,n){var r=U.useRef();return U.useCallback(function(i){t.current=i,r.current&&Sne(r.current,null),r.current=n,n&&Sne(n,i)},[n])},Tne={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},qFe=function(t){Object.keys(Tne).forEach(function(n){t.style.setProperty(n,Tne[n],"important")})},Cne=qFe,Hc=null,Ane=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function WFe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Hc||(Hc=document.createElement("textarea"),Hc.setAttribute("tabindex","-1"),Hc.setAttribute("aria-hidden","true"),Cne(Hc)),Hc.parentNode===null&&document.body.appendChild(Hc);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Hc.style[h]=o[h]}),Cne(Hc),Hc.value=t;var u=Ane(Hc,e);Hc.value=t,u=Ane(Hc,e),Hc.value="x";var l=Hc.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var kne=function(){},GFe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},YFe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],KFe=!!document.documentElement.currentStyle,XFe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=GFe(YFe,n),i=r.boxSizing;if(i==="")return null;KFe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},QFe=XFe;function _ye(e,t,n){var r=VFe(n);U.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var JFe=function(t){_ye(window,"resize",t)},ZFe=function(t){_ye(document.fonts,"loadingdone",t)},e$e=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],t$e=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?kne:o,u=t.onHeightChange,l=u===void 0?kne:u,c=UFe(t,e$e),f=c.value!==void 0,d=U.useRef(null),h=HFe(d,n),p=U.useRef(0),m=U.useRef(),g=function(){var x=d.current,w=r&&m.current?m.current:QFe(x);if(w){m.current=w;var S=WFe(w,x.value||x.placeholder||"x",s,i),C=S[0],R=S[1];p.current!==C&&(p.current=C,x.style.setProperty("height",C+"px","important"),l(C,{rowHeight:R}))}},b=function(x){f||g(),a(x)};return U.useLayoutEffect(g),JFe(g),ZFe(g),U.createElement("textarea",lU({},c,{onChange:b,ref:h}))},n$e=U.forwardRef(t$e);const r$e={},wW=Bt((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=dt("Textarea",r$e,e),u=n&&aOe()!=="test",l=u?{maxRows:r,minRows:i}:{};return k.jsx(lp,{component:u?n$e:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});wW.classes=lp.classes;wW.displayName="@mantine/core/Textarea";const[i$e,s$e]=Rl("List component was not found in tree");var EW={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const o$e={},SW=Bt((e,t)=>{const n=dt("ListItem",o$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=s$e(),h=u||d.icon,p={classNames:r,styles:o};return k.jsx(Ue,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:k.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&k.jsx("span",{...d.getStyles("itemIcon",p),children:h}),k.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});SW.classes=EW;SW.displayName="@mantine/core/ListItem";const a$e={type:"unordered"},u$e=(e,{size:t,spacing:n})=>({root:{"--list-fz":_l(t),"--list-lh":xme(t),"--list-spacing":Ha(n)}}),b0=Bt((e,t)=>{const n=dt("List",a$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...b}=n,y=xn({name:"List",classes:EW,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:u$e});return k.jsx(i$e,{value:{center:p,icon:d,getStyles:y},children:k.jsx(Ue,{...y("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...b,children:l})})});b0.classes=EW;b0.displayName="@mantine/core/List";b0.Item=SW;var wye={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Rne={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:fd("overlay")},l$e=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),oh=Bt((e,t)=>{const n=dt("LoadingOverlay",Rne,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=Wa(),g=xn({name:"LoadingOverlay",classes:wye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:l$e}),b={...Rne.overlayProps,...f};return k.jsx(bg,{transition:"fade",...l,mounted:!!d,children:y=>k.jsxs(Ue,{...g("root",{style:y}),ref:t,...p,children:[k.jsx(xg,{...g("loader"),unstyled:a,...c}),k.jsx(dS,{...b,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),k.jsx(dS,{...b,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});oh.classes=wye;oh.displayName="@mantine/core/LoadingOverlay";const[c$e,uR]=Rl("Menu component was not found in the tree");var xT={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const f$e={},TW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=dt("MenuDivider",f$e,e),u=uR();return k.jsx(Ue,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});TW.classes=xT;TW.displayName="@mantine/core/MenuDivider";const d$e={},CW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,onKeyDown:l,children:c,...f}=dt("MenuDropdown",d$e,e),d=U.useRef(null),h=uR(),p=Om(l,b=>{var y,x;(b.key==="ArrowUp"||b.key==="ArrowDown")&&(b.preventDefault(),(x=(y=d.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||x.focus())}),m=Om(a,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.openDropdown()),g=Om(u,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.closeDropdown());return k.jsxs(wl.Dropdown,{...f,onMouseEnter:m,onMouseLeave:g,role:"menu","aria-orientation":"vertical",ref:yu(t,d),...h.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:p,children:[k.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),c]})});CW.classes=xT;CW.displayName="@mantine/core/MenuDropdown";const h$e={},AW=Ga((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=dt("MenuItem",h$e,e),p=uR(),m=Wa(),{dir:g}=jb(),b=U.useRef(null),y=p.getItemIndex(b.current),x=h,w=Om(x.onMouseLeave,()=>p.setHovered(-1)),S=Om(x.onMouseEnter,()=>p.setHovered(p.getItemIndex(b.current))),C=Om(x.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),R=Om(x.onFocus,()=>p.setHovered(p.getItemIndex(b.current))),I=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,O=a?vg({color:a,theme:m}):null;return k.jsxs(sh,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:R,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:yu(b,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===y?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:S,onMouseLeave:w,onClick:C,onKeyDown:uq({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:x.onKeyDown}),__vars:{"--menu-item-color":O!=null&&O.isThemeColor&&(O==null?void 0:O.shade)===void 0?`var(--mantine-color-${O.color}-6)`:I==null?void 0:I.color,"--menu-item-hover":I==null?void 0:I.hover},children:[l&&k.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&k.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&k.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});AW.classes=xT;AW.displayName="@mantine/core/MenuItem";const p$e={},kW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=dt("MenuLabel",p$e,e),u=uR();return k.jsx(Ue,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});kW.classes=xT;kW.displayName="@mantine/core/MenuLabel";const m$e={refProp:"ref"},Eye=U.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=dt("MenuTarget",m$e,e);if(!Fb(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=uR(),o=n.props,a=Om(o.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),u=Om(o.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),l=Om(o.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return k.jsx(wl.Target,{refProp:r,popupType:"menu",ref:t,...i,children:U.cloneElement(n,{onClick:a,onMouseEnter:u,onMouseLeave:l,"data-expanded":s.opened?!0:void 0})})});Eye.displayName="@mantine/core/MenuTarget";const g$e={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Xc(e){const t=dt("Menu",g$e,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:b,variant:y,vars:x,menuItemTabIndex:w,keepMounted:S,...C}=t,R=xn({name:"Menu",classes:xT,props:t,classNames:m,styles:g,unstyled:b}),[I,{setHovered:O,resetHovered:M}]=LDe(),[L,H]=ju({value:s,defaultValue:o,finalValue:!1,onChange:u}),[D,B]=U.useState(!1),z=()=>{H(!1),B(!1),L&&(i==null||i())},G=()=>{H(!0),!L&&(r==null||r())},Z=()=>{L?z():G()},{openDropdown:ne,closeDropdown:ue}=OFe({open:G,close:z,closeDelay:p,openDelay:h}),X=W=>MDe("[data-menu-item]","[data-menu-dropdown]",W),{resolvedClassNames:q,resolvedStyles:te}=Sw({classNames:m,styles:g,props:t});return tg(()=>{M()},[L]),k.jsx(c$e,{value:{getStyles:R,opened:L,toggleDropdown:Z,getItemIndex:X,hovered:I,setHovered:O,openedViaClick:D,setOpenedViaClick:B,closeOnItemClick:l,closeDropdown:d==="click"?z:ue,openDropdown:d==="click"?G:ne,closeDropdownImmediately:z,loop:c,trigger:d,unstyled:b,menuItemTabIndex:w},children:k.jsx(wl,{...C,opened:L,onChange:Z,defaultOpened:o,trapFocus:S?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:q,styles:te,unstyled:b,variant:y,keepMounted:S,children:n})})}Xc.extend=e=>e;Xc.classes=xT;Xc.displayName="@mantine/core/Menu";Xc.Item=AW;Xc.Label=kW;Xc.Dropdown=CW;Xc.Target=Eye;Xc.Divider=TW;const[y$e,_T]=Rl("Modal component was not found in tree");var I1={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const v$e={},JO=Bt((e,t)=>{const n=dt("ModalBody",v$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=_T();return k.jsx(Oge,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});JO.classes=I1;JO.displayName="@mantine/core/ModalBody";const b$e={},ZO=Bt((e,t)=>{const n=dt("ModalCloseButton",b$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=_T();return k.jsx(Mge,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});ZO.classes=I1;ZO.displayName="@mantine/core/ModalCloseButton";const x$e={},e9=Bt((e,t)=>{const n=dt("ModalContent",x$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,__hidden:l,...c}=n,f=_T(),d=f.scrollAreaComponent||BLe;return k.jsx(Lge,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":f.fullScreen||void 0,"data-modal-content":!0,"data-hidden":l||void 0,ref:t,...c,children:k.jsx(d,{style:{maxHeight:f.fullScreen?"100dvh":`calc(100dvh - (${ot(f.yOffset)} * 2))`},children:u})})});e9.classes=I1;e9.displayName="@mantine/core/ModalContent";const _$e={},t9=Bt((e,t)=>{const n=dt("ModalHeader",_$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=_T();return k.jsx(Fge,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});t9.classes=I1;t9.displayName="@mantine/core/ModalHeader";const w$e={},n9=Bt((e,t)=>{const n=dt("ModalOverlay",w$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=_T();return k.jsx($ge,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});n9.classes=I1;n9.displayName="@mantine/core/ModalOverlay";const E$e={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:fd("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},S$e=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:as(t),"--modal-size":_r(n,"modal-size"),"--modal-y-offset":ot(r),"--modal-x-offset":ot(i)}}),r9=Bt((e,t)=>{const n=dt("ModalRoot",E$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,b=xn({name:m,classes:I1,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:S$e});return k.jsx(y$e,{value:{yOffset:l,scrollAreaComponent:c,getStyles:b,fullScreen:d},children:k.jsx(Dge,{ref:t,...b("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});r9.classes=I1;r9.displayName="@mantine/core/ModalRoot";const[T$e,C$e]=$b();function Sye({children:e}){const[t,n]=U.useState([]),[r,i]=U.useState(fd("modal"));return k.jsx(T$e,{value:{stack:t,addModal:(s,o)=>{n(a=>[...new Set([...a,s])]),i(a=>typeof o=="number"&&typeof a=="number"?Math.max(a,o):a)},removeModal:s=>n(o=>o.filter(a=>a!==s)),getZIndex:s=>`calc(${r} + ${t.indexOf(s)} + 1)`,currentId:t[t.length-1],maxZIndex:r},children:e})}Sye.displayName="@mantine/core/ModalStack";const A$e={},i9=Bt((e,t)=>{const n=dt("ModalTitle",A$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=_T();return k.jsx(Bge,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});i9.classes=I1;i9.displayName="@mantine/core/ModalTitle";const k$e={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:fd("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Eo=Bt((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,opened:l,stackId:c,zIndex:f,...d}=dt("Modal",k$e,e),h=C$e(),p=!!n||s,m=h&&c?{closeOnEscape:h.currentId===c,trapFocus:h.currentId===c,zIndex:h.getZIndex(c)}:{},g=r===!1?!1:c&&h?h.currentId===c:l;return U.useEffect(()=>{h&&c&&(l?h.addModal(c,f||fd("modal")):h.removeModal(c))},[l,c,f]),k.jsxs(r9,{ref:t,radius:u,opened:l,zIndex:h&&c?h.getZIndex(c):f,...d,...m,children:[r&&k.jsx(n9,{visible:g,transitionProps:h&&c?{duration:0}:void 0,...i}),k.jsxs(e9,{radius:u,__hidden:h&&c&&l?c!==h.currentId:!1,children:[p&&k.jsxs(t9,{children:[n&&k.jsx(i9,{children:n}),s&&k.jsx(ZO,{...o})]}),k.jsx(JO,{children:a})]})]})});Eo.classes=I1;Eo.displayName="@mantine/core/Modal";Eo.Root=r9;Eo.Overlay=n9;Eo.Content=e9;Eo.Body=JO;Eo.Header=t9;Eo.Title=i9;Eo.CloseButton=ZO;Eo.Stack=Sye;const[R$e,RW]=$b(),[I$e,P$e]=$b();var s9={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const N$e={},D$e=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?_r(t):_r(n,"pg-gap")}}),IW=Bt((e,t)=>{const n=dt("PillGroup",N$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=RW(),h=(d==null?void 0:d.size)||l||void 0,p=xn({name:"PillGroup",classes:s9,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:D$e,stylesCtx:{size:h},rootSelector:"group"});return k.jsx(I$e,{value:{size:h,disabled:c},children:k.jsx(Ue,{ref:t,size:h,...p("group"),...f})})});IW.classes=s9;IW.displayName="@mantine/core/PillGroup";const O$e={variant:"default"},M$e=(e,{radius:t},{size:n})=>({root:{"--pill-fz":_r(n,"pill-fz"),"--pill-height":_r(n,"pill-height"),"--pill-radius":t===void 0?void 0:as(t)}}),qk=Bt((e,t)=>{const n=dt("Pill",O$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:b,...y}=n,x=P$e(),w=RW(),S=m||(x==null?void 0:x.size)||void 0,C=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",R=xn({name:"Pill",classes:s9,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:M$e,stylesCtx:{size:S}});return k.jsxs(Ue,{component:"span",ref:t,variant:C,size:S,...R("root",{variant:C}),mod:[{"with-remove":f&&!g,disabled:g||(x==null?void 0:x.disabled)},b],...y,children:[k.jsx("span",{...R("label"),children:c}),f&&k.jsx(Vb,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...R("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:I=>{var O;I.preventDefault(),I.stopPropagation(),(O=h==null?void 0:h.onMouseDown)==null||O.call(h,I)},onClick:I=>{var O;I.stopPropagation(),d==null||d(),(O=h==null?void 0:h.onClick)==null||O.call(h,I)}})]})});qk.classes=s9;qk.displayName="@mantine/core/Pill";qk.Group=IW;var Tye={field:"m_45c4369d"};const L$e={type:"visible"},PW=Bt((e,t)=>{const n=dt("PillsInputField",L$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=RW(),g=gT(),b=xn({name:"PillsInputField",classes:Tye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),y=c||(m==null?void 0:m.disabled);return k.jsx(Ue,{component:"input",ref:yu(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:y,mod:[{disabled:y,pointer:d},h],...b("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:x=>!d&&x.stopPropagation()})});PW.classes=Tye;PW.displayName="@mantine/core/PillsInputField";const F$e={},u8=Bt((e,t)=>{const n=dt("PillsInput",F$e,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=U.useRef(null);return k.jsx(R$e,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:k.jsx(lp,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});u8.displayName="@mantine/core/PillsInput";u8.Field=PW;function $$e({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(pS(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const B$e={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},NW=Bt((e,t)=>{const n=dt("MultiSelect",B$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:b,onDropdownOpen:y,onDropdownClose:x,selectFirstOptionOnChange:w,onOptionSubmit:S,comboboxProps:C,filter:R,limit:I,withScrollArea:O,maxDropdownHeight:M,searchValue:L,defaultSearchValue:H,onSearchChange:D,readOnly:B,disabled:z,onFocus:G,onBlur:Z,onPaste:ne,radius:ue,rightSection:X,rightSectionWidth:q,rightSectionPointerEvents:te,rightSectionProps:W,leftSection:ee,leftSectionWidth:oe,leftSectionPointerEvents:pe,leftSectionProps:ce,inputContainer:he,inputWrapperOrder:Ee,withAsterisk:Ae,labelProps:ge,descriptionProps:me,errorProps:Oe,wrapperProps:Me,description:Ye,label:lt,error:We,maxValues:nt,searchable:yt,nothingFoundMessage:_t,withCheckIcon:It,checkIconPosition:Et,hidePickedOptions:Ke,withErrorStyles:Lt,name:sn,form:Fe,id:Qe,clearable:wt,clearButtonProps:Vt,hiddenInputProps:Wt,placeholder:bn,hiddenInputValuesDivider:Dn,required:Zn,mod:wr,renderOption:Hn,onRemove:nr,onClear:Ei,scrollAreaProps:Dr,...Co}=n,Ji=df(Qe),Di=Yge(m),Zi=eW(Di),ei=fW({opened:g,defaultOpened:b,onDropdownOpen:y,onDropdownClose:()=>{x==null||x(),ei.resetSelectedOption()}}),{styleProps:mo,rest:{type:Gu,autoComplete:Ea,...Sa}}=Cw(Co),[Kr,Oi]=ju({value:c,defaultValue:f,finalValue:[],onChange:d}),[si,Zs]=ju({value:L,defaultValue:H,finalValue:"",onChange:D}),Xr=xn({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Hi,resolvedStyles:eo}=Sw({props:n,styles:o,classNames:r}),go=Hr=>{h==null||h(Hr),Hr.key===" "&&!yt&&(Hr.preventDefault(),ei.toggleDropdown()),Hr.key==="Backspace"&&si.length===0&&Kr.length>0&&(nr==null||nr(Kr[Kr.length-1]),Oi(Kr.slice(0,Kr.length-1)))},Qo=Kr.map((Hr,Pl)=>{var bs,Ya;return k.jsx(qk,{withRemoveButton:!B&&!((bs=Zi[Hr])!=null&&bs.disabled),onRemove:()=>{Oi(Kr.filter(Jo=>Hr!==Jo)),nr==null||nr(Hr)},unstyled:a,disabled:z,...Xr("pill"),children:((Ya=Zi[Hr])==null?void 0:Ya.label)||Hr},`${Hr}-${Pl}`)});U.useEffect(()=>{w&&ei.selectFirstOption()},[w,Kr]);const Ta=k.jsx(di.ClearButton,{...Vt,onClear:()=>{Ei==null||Ei(),Oi([]),Zs("")}}),pd=$$e({data:Di,value:Kr});return k.jsxs(k.Fragment,{children:[k.jsxs(di,{store:ei,classNames:Hi,styles:eo,unstyled:a,size:l,readOnly:B,__staticSelector:"MultiSelect",onOptionSubmit:Hr=>{S==null||S(Hr),Zs(""),ei.updateSelectedOptionIndex("selected"),Kr.includes(Zi[Hr].value)?(Oi(Kr.filter(Pl=>Pl!==Zi[Hr].value)),nr==null||nr(Zi[Hr].value)):Kr.length<nt&&Oi([...Kr,Zi[Hr].value])},...C,children:[k.jsx(di.DropdownTarget,{children:k.jsx(u8,{...mo,__staticSelector:"MultiSelect",classNames:Hi,styles:eo,unstyled:a,size:l,className:i,style:s,variant:p,disabled:z,radius:ue,__defaultRightSection:k.jsx(di.Chevron,{size:l,error:We,unstyled:a}),__clearSection:Ta,__clearable:wt&&Kr.length>0&&!z&&!B,rightSection:X,rightSectionPointerEvents:te||(Ta?"all":"none"),rightSectionWidth:q,rightSectionProps:W,leftSection:ee,leftSectionWidth:oe,leftSectionPointerEvents:pe,leftSectionProps:ce,inputContainer:he,inputWrapperOrder:Ee,withAsterisk:Ae,labelProps:ge,descriptionProps:me,errorProps:Oe,wrapperProps:Me,description:Ye,label:lt,error:We,multiline:!0,withErrorStyles:Lt,__stylesApiProps:{...n,rightSectionPointerEvents:te||(Ta?"all":"none"),multiline:!0},pointer:!yt,onClick:()=>yt?ei.openDropdown():ei.toggleDropdown(),"data-expanded":ei.dropdownOpened||void 0,id:Ji,required:Zn,mod:wr,children:k.jsxs(qk.Group,{disabled:z,unstyled:a,...Xr("pillsList"),children:[Qo,k.jsx(di.EventsTarget,{autoComplete:Ea,children:k.jsx(u8.Field,{...Sa,ref:t,id:Ji,placeholder:bn,type:!yt&&!bn?"hidden":"visible",...Xr("inputField"),unstyled:a,onFocus:Hr=>{G==null||G(Hr),yt&&ei.openDropdown()},onBlur:Hr=>{Z==null||Z(Hr),ei.closeDropdown(),Zs("")},onKeyDown:go,value:si,onChange:Hr=>{Zs(Hr.currentTarget.value),yt&&ei.openDropdown(),w&&ei.selectFirstOption()},disabled:z,readOnly:B||!yt,pointer:!yt})})]})})}),k.jsx(dye,{data:Ke?pd:Di,hidden:B||z,filter:R,search:si,limit:I,hiddenWhenEmpty:!_t,withScrollArea:O,maxDropdownHeight:M,filterOptions:yt,value:Kr,checkIconPosition:Et,withCheckIcon:It,nothingFoundMessage:_t,unstyled:a,labelId:lt?`${Ji}-label`:void 0,"aria-label":lt?void 0:Co["aria-label"],renderOption:Hn,scrollAreaProps:Dr})]}),k.jsx(di.HiddenInput,{name:sn,valuesDivider:Dn,value:Kr,form:Fe,disabled:z,...Wt})]})});NW.classes={...lp.classes,...di.classes};NW.displayName="@mantine/core/MultiSelect";var Cye={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const j$e={},U$e=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":Ha(r)}}},o9=Ga((e,t)=>{const n=dt("NavLink",j$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:b,label:y,description:x,disableRightSectionRotation:w,noWrap:S,childrenOffset:C,onKeyDown:R,autoContrast:I,mod:O,...M}=n,L=xn({name:"NavLink",props:n,classes:Cye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:U$e}),[H,D]=ju({value:l,defaultValue:c,finalValue:!1,onChange:f}),B=!!d,z=G=>{h==null||h(G),B&&(G.preventDefault(),D(!H))};return k.jsxs(k.Fragment,{children:[k.jsxs(sh,{...L("root"),component:"a",ref:t,onClick:z,onKeyDown:G=>{R==null||R(G),G.nativeEvent.code==="Space"&&B&&(G.preventDefault(),D(!H))},unstyled:a,mod:[{disabled:m,active:p,expanded:H},O],...M,children:[g&&k.jsx(Ue,{component:"span",...L("section"),mod:{position:"left"},children:g}),k.jsxs(Ue,{...L("body"),mod:{"no-wrap":S},children:[k.jsx(Ue,{component:"span",...L("label"),children:y}),k.jsx(Ue,{component:"span",mod:{active:p},...L("description"),children:x})]}),(B||b)&&k.jsx(Ue,{...L("section"),component:"span",mod:{rotate:H&&!w,position:"right"},children:B?b||k.jsx(KO,{...L("chevron")}):b})]}),B&&k.jsx(jO,{in:H,...L("collapse"),children:k.jsx("div",{...L("children"),children:d})})]})});o9.classes=Cye;o9.displayName="@mantine/core/NavLink";var Aye={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const z$e={withCloseButton:!0},V$e=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:as(t),"--notification-color":n?Fs(n,e):void 0}}),DW=Bt((e,t)=>{const n=dt("Notification",z$e,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:b,variant:y,vars:x,mod:w,...S}=n,C=xn({name:"Notification",classes:Aye,props:n,className:r,style:m,classNames:p,styles:g,unstyled:b,vars:x,varsResolver:V$e});return k.jsxs(Ue,{...C("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},w],ref:t,variant:y,...S,role:"alert",children:[c&&!o&&k.jsx("div",{...C("icon"),children:c}),o&&k.jsx(xg,{size:28,color:i,...C("loader")}),k.jsxs("div",{...C("body"),children:[l&&k.jsx("div",{...C("title"),children:l}),k.jsx(Ue,{...C("description"),mod:{"data-with-title":!!l},children:f})]}),a&&k.jsx(Vb,{iconSize:16,color:"gray",...h,unstyled:b,onClick:d,...C("closeButton")})]})});DW.classes=Aye;DW.displayName="@mantine/core/Notification";function kye(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var Wk;(function(e){e.event="event",e.props="prop"})(Wk||(Wk={}));function Pv(){}function H$e(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function Gk(e){return!!(e||"").match(/\d/)}function BE(e){return e==null}function q$e(e){return typeof e=="number"&&isNaN(e)}function Rye(e){return BE(e)||q$e(e)||typeof e=="number"&&!isFinite(e)}function Iye(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function W$e(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function G$e(e,t,n){var r=W$e(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function Y$e(e){var t=U.useRef(e);t.current=e;var n=U.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function OW(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function K$e(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function Pye(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Ine(e,t){return Array(t+1).join(e)}function Nye(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Ine("0",Math.abs(o))+i:o>=a?i=i+Ine("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Pne(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=OW(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,b){return m.length>b?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=Pye(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function d_(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Dye=H$e(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),X$e=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function Q$e(e,t,n){return Math.min(Math.max(e,t),n)}function _F(e){return Math.max(e.selectionStart,e.selectionEnd)}function J$e(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Z$e(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function eBe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function tBe(e,t,n,r,i,s,o){o===void 0&&(o=eBe);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var b=r;b<l&&(d[b]===-1||!s(n[b]));)b++;var y=b===l||d[b]===-1?c:d[b];for(b=r-1;b>0&&d[b]===-1;)b--;var x=b===-1||d[b]===-1?0:d[b]+1;return x>y?y:r-x<y-r?x:y}function Nne(e,t,n,r){var i=e.length;if(t=Q$e(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function nBe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(Gk(e[n])||Gk(e[n-1]));return t}function Oye(e,t,n,r,i,s){s===void 0&&(s=Pv);var o=Y$e(function(p,m){var g,b;return Rye(p)?(b="",g=""):typeof p=="number"||m?(b=typeof p=="number"?Nye(p):p,g=r(b)):(b=i(p,void 0),g=r(b)),{formattedValue:g,numAsString:b}}),a=U.useState(function(){return o(BE(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;BE(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return U.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function rBe(e){return e.replace(/[^0-9]/g,"")}function iBe(e){return e}function sBe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=iBe);var a=e.removeFormatting;a===void 0&&(a=rBe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=Pv);var h=e.onKeyDown;h===void 0&&(h=Pv);var p=e.onMouseUp;p===void 0&&(p=Pv);var m=e.onFocus;m===void 0&&(m=Pv);var g=e.onBlur;g===void 0&&(g=Pv);var b=e.value,y=e.getCaretBoundary;y===void 0&&(y=nBe);var x=e.isValidInputCharacter;x===void 0&&(x=Gk);var w=e.isCharacterSame,S=kye(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),C=Oye(b,u,!!l,o,a,c),R=C[0],I=R.formattedValue,O=R.numAsString,M=C[1],L=U.useRef(),H=U.useRef({formattedValue:I,numAsString:O}),D=function(We,nt){H.current={formattedValue:We.formattedValue,numAsString:We.value},M(We,nt)},B=U.useState(!1),z=B[0],G=B[1],Z=U.useRef(null),ne=U.useRef({setCaretTimeout:null,focusTimeout:null});U.useEffect(function(){return G(!0),function(){clearTimeout(ne.current.setCaretTimeout),clearTimeout(ne.current.focusTimeout)}},[]);var ue=o,X=function(We,nt){var yt=parseFloat(nt);return{formattedValue:We,value:nt,floatValue:isNaN(yt)?void 0:yt}},q=function(We,nt,yt){We.selectionStart===0&&We.selectionEnd===We.value.length||(d_(We,nt),ne.current.setCaretTimeout=setTimeout(function(){We.value===yt&&We.selectionStart!==nt&&d_(We,nt)},0))},te=function(We,nt,yt){return Nne(We,nt,y(We),yt)},W=function(We,nt,yt){var _t=y(nt),It=tBe(nt,I,We,yt,_t,x,w);return It=Nne(nt,It,_t),It},ee=function(We){var nt=We.formattedValue;nt===void 0&&(nt="");var yt=We.input,_t=We.source,It=We.event,Et=We.numAsString,Ke;if(yt){var Lt=We.inputValue||yt.value,sn=_F(yt);yt.value=nt,Ke=W(Lt,nt,sn),Ke!==void 0&&q(yt,Ke,nt)}nt!==I&&D(X(nt,Et),{event:It,source:_t})};U.useEffect(function(){var We=H.current,nt=We.formattedValue,yt=We.numAsString;(I!==nt||O!==yt)&&D(X(I,O),{event:void 0,source:Wk.props})},[I,O]);var oe=Z.current?_F(Z.current):void 0,pe=typeof window<"u"?U.useLayoutEffect:U.useEffect;pe(function(){var We=Z.current;if(I!==H.current.formattedValue&&We){var nt=W(H.current.formattedValue,I,oe);We.value=I,q(We,nt,I)}},[I]);var ce=function(We,nt,yt){var _t=nt.target,It=L.current?X$e(L.current,_t.selectionEnd):Dye(I,We),Et=Object.assign(Object.assign({},It),{lastValue:I}),Ke=a(We,Et),Lt=ue(Ke);if(Ke=a(Lt,void 0),f&&!f(X(Lt,Ke))){var sn=nt.target,Fe=_F(sn),Qe=W(We,I,Fe);return sn.value=I,q(sn,Qe,I),!1}return ee({formattedValue:Lt,numAsString:Ke,inputValue:We,event:nt,source:yt,input:nt.target}),!0},he=function(We,nt){nt===void 0&&(nt=0);var yt=We.selectionStart,_t=We.selectionEnd;L.current={selectionStart:yt,selectionEnd:_t+nt}},Ee=function(We){var nt=We.target,yt=nt.value,_t=ce(yt,We,Wk.event);_t&&d(We),L.current=void 0},Ae=function(We){var nt=We.target,yt=We.key,_t=nt.selectionStart,It=nt.selectionEnd,Et=nt.value;Et===void 0&&(Et="");var Ke;yt==="ArrowLeft"||yt==="Backspace"?Ke=Math.max(_t-1,0):yt==="ArrowRight"?Ke=Math.min(_t+1,Et.length):yt==="Delete"&&(Ke=_t);var Lt=0;yt==="Delete"&&_t===It&&(Lt=1);var sn=yt==="ArrowLeft"||yt==="ArrowRight";if(Ke===void 0||_t!==It&&!sn){h(We),he(nt,Lt);return}var Fe=Ke;if(sn){var Qe=yt==="ArrowLeft"?"left":"right";Fe=te(Et,Ke,Qe),Fe!==Ke&&We.preventDefault()}else yt==="Delete"&&!x(Et[Ke])?Fe=te(Et,Ke,"right"):yt==="Backspace"&&!x(Et[Ke])&&(Fe=te(Et,Ke,"left"));Fe!==Ke&&q(nt,Fe,Et),h(We),he(nt,Lt)},ge=function(We){var nt=We.target,yt=function(){var _t=nt.selectionStart,It=nt.selectionEnd,Et=nt.value;if(Et===void 0&&(Et=""),_t===It){var Ke=te(Et,_t);Ke!==_t&&q(nt,Ke,Et)}};yt(),requestAnimationFrame(function(){yt()}),p(We),he(nt)},me=function(We){We.persist&&We.persist();var nt=We.target,yt=We.currentTarget;Z.current=nt,ne.current.focusTimeout=setTimeout(function(){var _t=nt.selectionStart,It=nt.selectionEnd,Et=nt.value;Et===void 0&&(Et="");var Ke=te(Et,_t);Ke!==_t&&!(_t===0&&It===Et.length)&&q(nt,Ke,Et),m(Object.assign(Object.assign({},We),{currentTarget:yt}))},0)},Oe=function(We){Z.current=null,clearTimeout(ne.current.focusTimeout),clearTimeout(ne.current.setCaretTimeout),g(We)},Me=z&&J$e()?"numeric":void 0,Ye=Object.assign({inputMode:Me},S,{type:t,value:I,onChange:Ee,onKeyDown:Ae,onMouseUp:ge,onFocus:me,onBlur:Oe});if(n==="text")return i?sr.createElement(sr.Fragment,null,i(I,S)||null):sr.createElement("span",Object.assign({},S,{ref:s}),I);if(r){var lt=r;return sr.createElement(lt,Object.assign({},Ye,{ref:s}))}return sr.createElement("input",Object.assign({},Ye,{ref:s}))}function Dne(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=a9(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=OW(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=Pye(p,n,!!r)),l&&(h=G$e(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function a9(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function oBe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function aBe(e,t){return new RegExp("(^-)|[0-9]|"+Iye(e),"g")}function uBe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function lBe(e,t,n){var r;t===void 0&&(t=Z$e(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=a9(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(Gk(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var b=function(Z,ne,ue){var X=!1,q=!1;s.startsWith("-")?X=!1:Z.startsWith("--")?(X=!1,q=!0):o.startsWith("-")&&Z.length===o.length?X=!1:Z[0]==="-"&&(X=!0);var te=X?1:0;return q&&(te=2),te&&(Z=Z.substring(te),ne-=te,ue-=te),{value:Z,start:ne,end:ue,hasNegation:X}},y=b(e,c,f),x=y.hasNegation;r=y,e=r.value,c=r.start,f=r.end;var w=b(t.lastValue,u.start,u.end),S=w.start,C=w.end,R=w.value,I=e.substring(c,f);e.length&&R.length&&(S>R.length-o.length||C<s.length)&&!(I&&o.startsWith(I))&&(e=R);var O=0;e.startsWith(s)?O+=s.length:c<s.length&&(O=c),e=e.substring(O),f-=O;var M=e.length,L=e.length-o.length;e.endsWith(o)?M=L:(f>L||f>e.length-o.length)&&(M=f),e=e.substring(0,M),e=oBe(x?"-"+e:e,i),e=(e.match(aBe(p))||[]).join("");var H=e.indexOf(p);e=e.replace(new RegExp(Iye(p),"g"),function(Z,ne){return ne===H?".":""});var D=OW(e,i),B=D.beforeDecimal,z=D.afterDecimal,G=D.addNegation;return l.end-l.start<u.end-u.start&&B===""&&m&&!parseFloat(z)&&(e=G?"-":""),e}function cBe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function fBe(e){var t=a9(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function dBe(e){e=fBe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Pv);var s=e.onBlur;s===void 0&&(s=Pv);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=kye(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=a9(e),g=m.decimalSeparator,b=m.allowedDecimalSeparators,y=function(G){return Dne(G,e)},x=function(G,Z){return lBe(G,Z,e)},w=BE(f)?c:f,S=d??uBe(w,l,t);BE(f)?BE(c)||(S=S||typeof c=="number"):S=S||typeof f=="number";var C=function(G){return Rye(G)?G:(typeof G=="number"&&(G=Nye(G)),S&&typeof a=="number"?Pne(G,a,!!u):G)},R=Oye(C(f),C(c),!!S,y,x,h),I=R[0],O=I.numAsString,M=I.formattedValue,L=R[1],H=function(G){var Z=G.target,ne=G.key,ue=Z.selectionStart,X=Z.selectionEnd,q=Z.value;if(q===void 0&&(q=""),(ne==="Backspace"||ne==="Delete")&&X<l.length){G.preventDefault();return}if(ue!==X){i(G);return}ne==="Backspace"&&q[0]==="-"&&ue===l.length+1&&n&&d_(Z,1),a&&u&&(ne==="Backspace"&&q[ue-1]===g?(d_(Z,ue-1),G.preventDefault()):ne==="Delete"&&q[ue]===g&&G.preventDefault()),b!=null&&b.includes(ne)&&q[ue]===g&&d_(Z,ue+1);var te=o===!0?",":o;ne==="Backspace"&&q[ue-1]===te&&d_(Z,ue-1),ne==="Delete"&&q[ue]===te&&d_(Z,ue+1),i(G)},D=function(G){var Z=O;if(Z.match(/\d/g)||(Z=""),r||(Z=K$e(Z)),u&&a&&(Z=Pne(Z,a,u)),Z!==O){var ne=Dne(Z,e);L({formattedValue:ne,value:Z,floatValue:parseFloat(Z)},{event:G,source:Wk.event})}s(G)},B=function(G){return G===g?!0:Gk(G)},z=function(G){var Z=G.currentValue,ne=G.lastValue,ue=G.formattedValue,X=G.currentValueIndex,q=G.formattedValueIndex,te=Z[X],W=ue[q],ee=Dye(ne,Z),oe=ee.to,pe=function(ce){return x(ce).indexOf(".")+l.length};return f===0&&u&&a&&Z[oe.start]===g&&pe(Z)<X&&pe(ue)>q?!1:X>=oe.start&&X<oe.end&&b&&b.includes(te)&&W===g?!0:te===W};return Object.assign(Object.assign({},p),{value:M,valueIsNumericString:!1,isValidInputCharacter:B,isCharacterSame:z,onValueChange:L,format:y,removeFormatting:x,getCaretBoundary:function(G){return cBe(G,e)},onKeyDown:H,onBlur:D})}function hBe(e){var t=dBe(e);return sr.createElement(sBe,Object.assign({},t))}function One({direction:e,style:t,...n}){return k.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:k.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var cU={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const pBe=/^(0\.0*|-0(\.0*)?)$/,mBe=/^-?0\d+(\.\d+)?\.?$/;function fU(e){return typeof e=="string"&&e!==""&&!Number.isNaN(Number(e))}function wF(e){return typeof e=="number"?e<Number.MAX_SAFE_INTEGER:e===""||fU(e)&&Number(e)<Number.MAX_SAFE_INTEGER}function gBe(e){return e.toString().replace(".","").length}function yBe(e,t){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)&&gBe(t)<14&&t!==""}function Mne(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const vBe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},bBe=(e,{size:t})=>({controls:{"--ni-chevron-size":_r(t,"ni-chevron-size")}}),MW=Bt((e,t)=>{const n=dt("NumberInput",vBe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:b,clampBehavior:y,onBlur:x,allowDecimal:w,decimalScale:S,onKeyDown:C,onKeyDownCapture:R,handlersRef:I,startValue:O,disabled:M,rightSectionPointerEvents:L,allowNegative:H,readOnly:D,size:B,rightSectionWidth:z,stepHoldInterval:G,stepHoldDelay:Z,allowLeadingZeros:ne,withKeyboardEvents:ue,trimLeadingZeroesOnBlur:X,...q}=n,te=xn({name:"NumberInput",classes:cU,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:bBe}),{resolvedClassNames:W,resolvedStyles:ee}=Sw({classNames:i,styles:s,props:n}),[oe,pe]=ju({value:c,defaultValue:f,finalValue:"",onChange:u}),ce=Z!==void 0&&G!==void 0,he=U.useRef(null),Ee=U.useRef(null),Ae=U.useRef(0),ge=(Ke,Lt)=>{Lt.source==="event"&&pe(yBe(Ke.floatValue,Ke.value)&&!pBe.test(Ke.value)&&!(ne&&mBe.test(Ke.value))?Ke.floatValue:Ke.value),l==null||l(Ke,Lt)},me=Ke=>{const Lt=String(Ke).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return Lt?Math.max(0,(Lt[1]?Lt[1].length:0)-(Lt[2]?+Lt[2]:0)):0},Oe=Ke=>{he.current&&typeof Ke<"u"&&he.current.setSelectionRange(Ke,Ke)},Me=U.useRef(Xj);Me.current=()=>{if(!wF(oe))return;let Ke;const Lt=me(oe),sn=me(p),Fe=Math.max(Lt,sn),Qe=10**Fe;if(!fU(oe)&&(typeof oe!="number"||Number.isNaN(oe)))Ke=Rm(O,h,d);else if(d!==void 0){const Vt=(Math.round(Number(oe)*Qe)+Math.round(p*Qe))/Qe;Ke=Vt<=d?Vt:d}else Ke=(Math.round(Number(oe)*Qe)+Math.round(p*Qe))/Qe;const wt=Ke.toFixed(Fe);pe(parseFloat(wt)),l==null||l({floatValue:parseFloat(wt),formattedValue:wt,value:wt},{source:"increment"}),setTimeout(()=>{var Vt;return Oe((Vt=he.current)==null?void 0:Vt.value.length)},0)};const Ye=U.useRef(Xj);Ye.current=()=>{if(!wF(oe))return;let Ke;const Lt=h!==void 0?h:H?Number.MIN_SAFE_INTEGER:0,sn=me(oe),Fe=me(p),Qe=Math.max(sn,Fe),wt=10**Qe;if(!fU(oe)&&typeof oe!="number"||Number.isNaN(oe))Ke=Rm(O,Lt,d);else{const Wt=(Math.round(Number(oe)*wt)-Math.round(p*wt))/wt;Ke=Lt!==void 0&&Wt<Lt?Lt:Wt}const Vt=Ke.toFixed(Qe);pe(parseFloat(Vt)),l==null||l({floatValue:parseFloat(Vt),formattedValue:Vt,value:Vt},{source:"decrement"}),setTimeout(()=>{var Wt;return Oe((Wt=he.current)==null?void 0:Wt.value.length)},0)};const lt=Ke=>{C==null||C(Ke),!(D||!ue)&&(Ke.key==="ArrowUp"&&(Ke.preventDefault(),Me.current()),Ke.key==="ArrowDown"&&(Ke.preventDefault(),Ye.current()))},We=Ke=>{if(R==null||R(Ke),Ke.key==="Backspace"){const Lt=he.current;Lt.selectionStart===0&&Lt.selectionStart===Lt.selectionEnd&&(Ke.preventDefault(),window.setTimeout(()=>Oe(0),0))}};t8(I,{increment:Me.current,decrement:Ye.current});const nt=Ke=>{Ke?Me.current():Ye.current(),Ae.current+=1},yt=Ke=>{if(nt(Ke),ce){const Lt=typeof G=="number"?G:G(Ae.current);Ee.current=window.setTimeout(()=>yt(Ke),Lt)}},_t=(Ke,Lt)=>{var sn;Ke.preventDefault(),(sn=he.current)==null||sn.focus(),nt(Lt),ce&&(Ee.current=window.setTimeout(()=>yt(Lt),Z))},It=()=>{Ee.current&&window.clearTimeout(Ee.current),Ee.current=null,Ae.current=0},Et=k.jsxs("div",{...te("controls"),children:[k.jsx(sh,{...te("control"),tabIndex:-1,"aria-hidden":!0,disabled:M||typeof oe=="number"&&d!==void 0&&oe>=d,mod:{direction:"up"},onMouseDown:Ke=>Ke.preventDefault(),onPointerDown:Ke=>{_t(Ke,!0)},onPointerUp:It,onPointerLeave:It,children:k.jsx(One,{direction:"up"})}),k.jsx(sh,{...te("control"),tabIndex:-1,"aria-hidden":!0,disabled:M||typeof oe=="number"&&h!==void 0&&oe<=h,mod:{direction:"down"},onMouseDown:Ke=>Ke.preventDefault(),onPointerDown:Ke=>{_t(Ke,!1)},onPointerUp:It,onPointerLeave:It,children:k.jsx(One,{direction:"down"})})]});return k.jsx(lp,{component:hBe,allowNegative:H,className:va(cU.root,r),size:B,...q,readOnly:D,disabled:M,value:oe,getInputRef:yu(t,he),onValueChange:ge,rightSection:m||D||!wF(oe)?g:g||Et,classNames:W,styles:ee,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?S:0,onKeyDown:lt,onKeyDownCapture:We,rightSectionPointerEvents:L??(M?"none":void 0),rightSectionWidth:z??`var(--ni-right-section-width-${B||"sm"})`,allowLeadingZeros:ne,onBlur:Ke=>{if(x==null||x(Ke),y==="blur"&&typeof oe=="number"&&Rm(oe,h,d)!==oe&&pe(Rm(oe,h,d)),X&&typeof oe=="string"&&me(oe)<15){const Lt=oe.replace(/^0+/,""),sn=parseFloat(Lt);pe(Number.isNaN(sn)||sn>Number.MAX_SAFE_INTEGER?Lt:Rm(sn,h,d))}},isAllowed:Ke=>y==="strict"?b?b(Ke)&&Mne(Ke.floatValue,h,d):Mne(Ke.floatValue,h,d):b?b(Ke):!0})});MW.classes={...lp.classes,...cU};MW.displayName="@mantine/core/NumberInput";const[xBe,Mye]=Rl("Progress.Root component was not found in tree");var lR={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const _Be={},LW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=dt("ProgressLabel",_Be,e),u=Mye();return k.jsx(Ue,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});LW.classes=lR;LW.displayName="@mantine/core/ProgressLabel";const wBe={},EBe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":_r(t,"progress-size"),"--progress-radius":n===void 0?void 0:as(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),u9=Bt((e,t)=>{const n=dt("ProgressRoot",wBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=xn({name:"Progress",classes:lR,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EBe});return k.jsx(xBe,{value:{getStyles:d,autoContrast:l},children:k.jsx(Ue,{ref:t,...d("root"),...f})})});u9.classes=lR;u9.displayName="@mantine/core/ProgressRoot";const SBe={withAria:!0},l9=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=dt("ProgressSection",SBe,e),p=Mye(),m=Wa(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return k.jsx(Ue,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Fs(l,m),"--progress-label-color":cT(p.autoContrast,m)?Ew({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});l9.classes=lR;l9.displayName="@mantine/core/ProgressSection";const TBe={},wT=Bt((e,t)=>{const n=dt("Progress",TBe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=Sw({classNames:i,styles:s,props:n});return k.jsx(u9,{ref:t,classNames:d,styles:h,vars:o,...f,children:k.jsx(l9,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});wT.classes=lR;wT.displayName="@mantine/core/Progress";wT.Section=l9;wT.Root=u9;wT.Label=LW;const[CBe,Lye]=$b(),[ABe,kBe]=$b();var Fye={card:"m_9dc8ae12"};const RBe={withBorder:!0},IBe=(e,{radius:t})=>({card:{"--card-radius":as(t)}}),FW=Bt((e,t)=>{const n=dt("RadioCard",RBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,b=xn({name:"RadioCard",classes:Fye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:IBe,rootSelector:"card"}),{dir:y}=jb(),x=Lye(),w=typeof l=="boolean"?l:(x==null?void 0:x.value)===d||!1,S=p||(x==null?void 0:x.name),C=R=>{if(m==null||m(R),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(R.nativeEvent.code)){R.preventDefault();const I=Array.from(document.querySelectorAll(`[role="radio"][name="${S||"__mantine"}"]`)),O=I.findIndex(H=>H===R.target),M=O+1>=I.length?0:O+1,L=O-1<0?I.length-1:O-1;R.nativeEvent.code==="ArrowDown"&&(I[M].focus(),I[M].click()),R.nativeEvent.code==="ArrowUp"&&(I[L].focus(),I[L].click()),R.nativeEvent.code==="ArrowLeft"&&(I[y==="ltr"?L:M].focus(),I[y==="ltr"?L:M].click()),R.nativeEvent.code==="ArrowRight"&&(I[y==="ltr"?M:L].focus(),I[y==="ltr"?M:L].click())}};return k.jsx(ABe,{value:{checked:w},children:k.jsx(sh,{ref:t,mod:[{"with-border":f,checked:w},c],...b("card"),...g,role:"radio","aria-checked":w,name:S,onClick:R=>{h==null||h(R),x==null||x.onChange(d||"")},onKeyDown:C})})});FW.displayName="@mantine/core/RadioCard";FW.classes=Fye;const PBe={},$W=Bt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=dt("RadioGroup",PBe,e),f=df(u),[d,h]=ju({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return k.jsx(CBe,{value:{value:d,onChange:p,size:s,name:f},children:k.jsx(ys.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:k.jsx(hW,{role:"radiogroup",children:a})})})});$W.classes=ys.Wrapper.classes;$W.displayName="@mantine/core/RadioGroup";function $ye({size:e,style:t,...n}){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:ot(e),height:ot(e),...t},"aria-hidden":!0,...n,children:k.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var Bye={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const NBe={icon:$ye},DBe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=vg({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":_r(r,"radio-size"),"--radio-radius":t===void 0?void 0:as(t),"--radio-color":s==="outline"?u:Fs(n,e),"--radio-icon-size":_r(r,"radio-icon-size"),"--radio-icon-color":i?Fs(i,e):cT(o,e)?Ew({color:n,theme:e,autoContrast:o}):void 0}}},BW=Bt((e,t)=>{const n=dt("RadioIndicator",NBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:b,...y}=n,x=l,w=xn({name:"RadioIndicator",classes:Bye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:DBe,rootSelector:"indicator"}),S=kBe(),C=typeof p=="boolean"?p:(S==null?void 0:S.checked)||!1;return k.jsx(Ue,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:C,disabled:b},m],...y,children:k.jsx(x,{...w("icon")})})});BW.displayName="@mantine/core/RadioIndicator";BW.classes=Bye;var jye={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const OBe={labelPosition:"right"},MBe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=vg({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":_r(t,"radio-size"),"--radio-radius":n===void 0?void 0:as(n),"--radio-color":s==="outline"?u:Fs(r,e),"--radio-icon-color":i?Fs(i,e):cT(o,e)?Ew({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":_r(t,"radio-icon-size")}}},ac=Bt((e,t)=>{const n=dt("Radio",OBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:b,disabled:y,wrapperProps:x,icon:w=$ye,rootRef:S,iconColor:C,onChange:R,mod:I,...O}=n,M=xn({name:"Radio",classes:jye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:MBe}),L=Lye(),H=(L==null?void 0:L.size)??c,D=n.size?c:H,{styleProps:B,rest:z}=Cw(O),G=df(l),Z=L?{checked:L.value===z.value,name:z.name??L.name,onChange:ne=>{L.onChange(ne),R==null||R(ne)}}:{};return k.jsx(XO,{...M("root"),__staticSelector:"Radio",__stylesApiProps:n,id:G,size:D,labelPosition:d,label:f,description:h,error:p,disabled:y,classNames:r,styles:o,unstyled:a,"data-checked":Z.checked||void 0,variant:b,ref:S,mod:I,...B,...x,children:k.jsxs(Ue,{...M("inner"),mod:{"label-position":d},children:[k.jsx(Ue,{...M("radio",{focusable:!0,variant:b}),onChange:R,...z,...Z,component:"input",mod:{error:!!p},ref:t,id:G,disabled:y,type:"radio"}),k.jsx(w,{...M("icon"),"aria-hidden":!0})]})})});ac.classes=jye;ac.displayName="@mantine/core/Radio";ac.Group=$W;ac.Card=FW;ac.Indicator=BW;const LBe={duration:100,transition:"fade"};function FBe(e,t){return{...LBe,...t,...e}}function $Be({offset:e,position:t,defaultOpened:n}){const[r,i]=U.useState(n),s=U.useRef(null),{x:o,y:a,elements:u,refs:l,update:c,placement:f}=Lq({placement:t,middleware:[Nq({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,p=U.useCallback(({clientX:m,clientY:g})=>{l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+d,top:g+h,right:m,bottom:g}}})},[u.reference]);return U.useEffect(()=>{if(l.floating.current){const m=s.current;m.addEventListener("mousemove",p);const g=Gy(l.floating.current);return g.forEach(b=>{b.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(b=>{b.removeEventListener("scroll",c)})}}},[u.reference,l.floating.current,c,p,r]),{handleMouseMove:p,x:o,y:a,opened:r,setOpened:i,boundaryRef:s,floating:l.setFloating}}var c9={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const BBe={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:fd("popover")},jBe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:as(t),"--tooltip-bg":n?Fs(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),jW=Bt((e,t)=>{const n=dt("TooltipFloating",BBe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:b,disabled:y,defaultOpened:x,variant:w,vars:S,portalProps:C,...R}=n,I=Wa(),O=xn({name:"TooltipFloating",props:n,classes:c9,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:S,varsResolver:jBe}),{handleMouseMove:M,x:L,y:H,opened:D,boundaryRef:B,floating:z,setOpened:G}=$Be({offset:p,position:m,defaultOpened:x});if(!Fb(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Z=yu(B,FO(r),t),ne=r.props,ue=q=>{var te;(te=ne.onMouseEnter)==null||te.call(ne,q),M(q),G(!0)},X=q=>{var te;(te=ne.onMouseLeave)==null||te.call(ne,q),G(!1)};return k.jsxs(k.Fragment,{children:[k.jsx(Ub,{...C,withinPortal:s,children:k.jsx(Ue,{...R,...O("tooltip",{style:{...yq(o,I),zIndex:b,display:!y&&D?"block":"none",top:(H&&Math.round(H))??"",left:(L&&Math.round(L))??""}}),variant:w,ref:z,mod:{multiline:g},children:h})}),U.cloneElement(r,{...ne,[i]:Z,onMouseEnter:ue,onMouseLeave:X})]})});jW.classes=c9;jW.displayName="@mantine/core/TooltipFloating";const Uye=U.createContext(!1),UBe=Uye.Provider,zBe=()=>U.useContext(Uye),VBe={openDelay:0,closeDelay:0};function UW(e){const{openDelay:t,closeDelay:n,children:r}=dt("TooltipGroup",VBe,e);return k.jsx(UBe,{value:!0,children:k.jsx(YMe,{delay:{open:t,close:n},children:r})})}UW.displayName="@mantine/core/TooltipGroup";UW.extend=e=>e;function HBe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function qBe(e){const t=HBe(e.middlewares),n=[dge(e.offset)];return t.shift&&n.push(Nq(typeof t.shift=="boolean"?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?a8():a8(t.flip)),n.push(hge({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push(typeof t.inline=="boolean"?ak():ak(t.inline)):e.inline&&n.push(ak()),n}function WBe(e){var C,R,I;const[t,n]=U.useState(e.defaultOpened),i=typeof e.opened=="boolean"?e.opened:t,s=zBe(),o=df(),{delay:a,currentId:u,setCurrentId:l}=yge(),c=U.useCallback(O=>{n(O),O&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:b,y}={}}}=Lq({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:qBe(e)});KMe(h,{id:o});const{getReferenceProps:x,getFloatingProps:w}=nLe([GMe(h,{enabled:(C=e.events)==null?void 0:C.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((R=e.events)!=null&&R.touch)}),tLe(h,{enabled:(I=e.events)==null?void 0:I.focus,visibleOnly:!0}),iLe(h,{role:"tooltip"}),ZMe(h,{enabled:typeof e.opened>"u"})]);Tge({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),tg(()=>{var O;(O=e.onPositionChange)==null||O.call(e,g)},[g]);const S=i&&u&&u!==o;return{x:f,y:d,arrowX:b,arrowY:y,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:x,isGroupPhase:S,opened:i,placement:g}}const Lne={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:fd("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},GBe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:as(t),"--tooltip-bg":n?Fs(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Ys=Bt((e,t)=>{const n=dt("Tooltip",Lne,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,defaultOpened:f,withinPortal:d,radius:h,color:p,classNames:m,styles:g,unstyled:b,style:y,className:x,withArrow:w,arrowSize:S,arrowOffset:C,arrowRadius:R,arrowPosition:I,offset:O,transitionProps:M,multiline:L,events:H,zIndex:D,disabled:B,positionDependencies:z,onClick:G,onMouseEnter:Z,onMouseLeave:ne,inline:ue,variant:X,keepMounted:q,vars:te,portalProps:W,mod:ee,floatingStrategy:oe,middlewares:pe,...ce}=dt("Tooltip",Lne,n),{dir:he}=jb(),Ee=U.useRef(null),Ae=WBe({position:vge(he,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,defaultOpened:f,events:H,arrowRef:Ee,arrowOffset:C,offset:typeof O=="number"?O+(w?S/2:0):O,positionDependencies:[...z,r],inline:ue,strategy:oe,middlewares:pe}),ge=xn({name:"Tooltip",props:n,classes:c9,className:x,style:y,classNames:m,styles:g,unstyled:b,rootSelector:"tooltip",vars:te,varsResolver:GBe});if(!Fb(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const me=yu(Ae.reference,FO(r),t),Oe=FBe(M,{duration:100,transition:"fade"}),Me=r.props;return k.jsxs(k.Fragment,{children:[k.jsx(Ub,{...W,withinPortal:d,children:k.jsx(bg,{...Oe,keepMounted:q,mounted:!B&&!!Ae.opened,duration:Ae.isGroupPhase?10:Oe.duration,children:Ye=>k.jsxs(Ue,{...ce,"data-fixed":oe==="fixed"||void 0,variant:X,mod:[{multiline:L},ee],...Ae.getFloatingProps({ref:Ae.floating,className:ge("tooltip").className,style:{...ge("tooltip").style,...Ye,zIndex:D,top:Ae.y??0,left:Ae.x??0}}),children:[o,k.jsx(Fq,{ref:Ee,arrowX:Ae.arrowX,arrowY:Ae.arrowY,visible:w,position:Ae.placement,arrowSize:S,arrowOffset:C,arrowRadius:R,arrowPosition:I,...ge("arrow")})]})})}),U.cloneElement(r,Ae.getReferenceProps({onClick:G,onMouseEnter:Z,onMouseLeave:ne,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:me,className:va(x,Me.className),...Me}))]})});Ys.classes=c9;Ys.displayName="@mantine/core/Tooltip";Ys.Floating=jW;Ys.Group=UW;const YBe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},ET=Bt((e,t)=>{const n=dt("Select",YBe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:b,selectFirstOptionOnChange:y,onOptionSubmit:x,comboboxProps:w,readOnly:S,disabled:C,filter:R,limit:I,withScrollArea:O,maxDropdownHeight:M,size:L,searchable:H,rightSection:D,checkIconPosition:B,withCheckIcon:z,nothingFoundMessage:G,name:Z,form:ne,searchValue:ue,defaultSearchValue:X,onSearchChange:q,allowDeselect:te,error:W,rightSectionPointerEvents:ee,id:oe,clearable:pe,clearButtonProps:ce,hiddenInputProps:he,renderOption:Ee,onClear:Ae,autoComplete:ge,scrollAreaProps:me,__defaultRightSection:Oe,__clearSection:Me,__clearable:Ye,...lt}=n,We=U.useMemo(()=>Yge(m),[m]),nt=U.useMemo(()=>eW(We),[We]),yt=df(oe),[_t,It,Et]=ju({value:g,defaultValue:b,finalValue:null,onChange:p}),Ke=typeof _t=="string"?nt[_t]:void 0,Lt=tOe(Ke),[sn,Fe]=ju({value:ue,defaultValue:X,finalValue:Ke?Ke.label:"",onChange:q}),Qe=fW({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),Qe.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),Qe.resetSelectedOption()}}),{resolvedClassNames:wt,resolvedStyles:Vt}=Sw({props:n,styles:i,classNames:r});U.useEffect(()=>{y&&Qe.selectFirstOption()},[y,_t]),U.useEffect(()=>{g===null&&Fe(""),typeof g=="string"&&Ke&&((Lt==null?void 0:Lt.value)!==Ke.value||(Lt==null?void 0:Lt.label)!==Ke.label)&&Fe(Ke.label)},[g,Ke]);const Wt=k.jsx(di.ClearButton,{...ce,onClear:()=>{It(null,null),Fe(""),Ae==null||Ae()}});return k.jsxs(k.Fragment,{children:[k.jsxs(di,{store:Qe,__staticSelector:"Select",classNames:wt,styles:Vt,unstyled:s,readOnly:S,onOptionSubmit:bn=>{x==null||x(bn);const Dn=te&&nt[bn].value===_t?null:nt[bn],Zn=Dn?Dn.value:null;Zn!==_t&&It(Zn,Dn),!Et&&Fe(typeof Zn=="string"&&(Dn==null?void 0:Dn.label)||""),Qe.closeDropdown()},size:L,...w,children:[k.jsx(di.Target,{targetType:H?"input":"button",autoComplete:ge,children:k.jsx(lp,{id:yt,ref:t,__defaultRightSection:k.jsx(di.Chevron,{size:L,error:W,unstyled:s}),__clearSection:Wt,__clearable:pe&&!!_t&&!C&&!S,rightSection:D,rightSectionPointerEvents:ee||(Wt?"all":"none"),...lt,size:L,__staticSelector:"Select",disabled:C,readOnly:S||!H,value:sn,onChange:bn=>{Fe(bn.currentTarget.value),Qe.openDropdown(),y&&Qe.selectFirstOption()},onFocus:bn=>{H&&Qe.openDropdown(),f==null||f(bn)},onBlur:bn=>{var Dn;H&&Qe.closeDropdown(),Fe(_t!=null&&((Dn=nt[_t])==null?void 0:Dn.label)||""),d==null||d(bn)},onClick:bn=>{H?Qe.openDropdown():Qe.toggleDropdown(),h==null||h(bn)},classNames:wt,styles:Vt,unstyled:s,pointer:!H,error:W})}),k.jsx(dye,{data:We,hidden:S||C,filter:R,search:sn,limit:I,hiddenWhenEmpty:!G,withScrollArea:O,maxDropdownHeight:M,filterOptions:H&&(Ke==null?void 0:Ke.label)!==sn,value:_t,checkIconPosition:B,withCheckIcon:z,nothingFoundMessage:G,unstyled:s,labelId:lt.label?`${yt}-label`:void 0,"aria-label":lt.label?void 0:lt["aria-label"],renderOption:Ee,scrollAreaProps:me})]}),k.jsx(di.HiddenInput,{value:_t,name:Z,form:ne,disabled:C,...he})]})});ET.classes={...lp.classes,...di.classes};ET.displayName="@mantine/core/Select";function KBe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=Wa(),s=t===void 0?e:t,o=Lb({"--sg-spacing-x":Ha(d0(e)),"--sg-spacing-y":Ha(d0(s)),"--sg-cols":(c=d0(n))==null?void 0:c.toString()}),a=Cs(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=Ha(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=Ha(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=zk(Cs(a),i.breakpoints).filter(f=>Cs(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return k.jsx(Tw,{styles:o,media:l,selector:r})}function EF(e){return typeof e=="object"&&e!==null?Cs(e):[]}function XBe(e){return e.sort((t,n)=>Uk(t)-Uk(n))}function QBe({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...EF(e),...EF(t),...EF(n)]));return XBe(r)}function JBe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=Lb({"--sg-spacing-x":Ha(d0(e)),"--sg-spacing-y":Ha(d0(i)),"--sg-cols":(l=d0(n))==null?void 0:l.toString()}),o=QBe({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=Ha(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=Ha(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return k.jsx(Tw,{styles:s,container:u,selector:r})}var zye={container:"m_925c2d2c",root:"m_2415a157"};const ZBe={cols:1,spacing:"md",type:"media"},zW=Bt((e,t)=>{const n=dt("SimpleGrid",ZBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=xn({name:"SimpleGrid",classes:zye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=nR();return d==="container"?k.jsxs(k.Fragment,{children:[k.jsx(JBe,{...n,selector:`.${m}`}),k.jsx("div",{...p("container"),children:k.jsx(Ue,{ref:t,...p("root",{className:m}),...h})})]}):k.jsxs(k.Fragment,{children:[k.jsx(KBe,{...n,selector:`.${m}`}),k.jsx(Ue,{ref:t,...p("root",{className:m}),...h})]})});zW.classes=zye;zW.displayName="@mantine/core/SimpleGrid";const[eje,f9]=Rl("SliderProvider was not found in tree"),Vye=U.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=f9();return k.jsx(Ue,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});Vye.displayName="@mantine/core/SliderRoot";const Hye=U.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},b)=>{const{getStyles:y}=f9(),[x,w]=U.useState(!1),S=l||s||x||h&&p;return k.jsxs(Ue,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:b,__vars:{"--slider-thumb-offset":`${r}%`},...y("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:C=>{w(!0),typeof f=="function"&&f(C)},onBlur:C=>{w(!1),typeof d=="function"&&d(C)},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:C=>C.stopPropagation(),children:[m,k.jsx(bg,{mounted:i!=null&&!!S,transition:"fade",duration:0,...u,children:C=>k.jsx("div",{...y("label",{style:C}),children:i})})]})});Hye.displayName="@mantine/core/SliderThumb";function qye({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function tje({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function Wye({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=f9();if(!e)return null;const u=e.map((l,c)=>U.createElement(Ue,{...a("markWrapper"),__vars:{"--mark-offset":`${qye({value:l.value,min:t,max:n})}%`},key:c},k.jsx(Ue,{...a("mark"),mod:{filled:tje({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&k.jsx("div",{...a("markLabel"),children:l.label})));return k.jsx("div",{children:u})}Wye.displayName="@mantine/core/SliderMarks";function Gye({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=f9();return k.jsx(Ue,{...u("trackContainer"),mod:{disabled:r},...o,children:k.jsxs(Ue,{...u("track"),mod:{inverted:s,disabled:r},children:[k.jsx(Ue,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,k.jsx(Wye,{...a,offset:i,disabled:r,inverted:s})]})})}Gye.displayName="@mantine/core/SliderTrack";function nje({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function l6(e,t){return parseFloat(e.toFixed(t))}function rje(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}function SF(e,t){const r=[...t].sort((i,s)=>i.value-s.value).find(i=>i.value>e);return r?r.value:e}function TF(e,t){const r=[...t].sort((i,s)=>s.value-i.value).find(i=>i.value<e);return r?r.value:e}function Fne(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[0].value:0}function $ne(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[t.length-1].value:100}var Yye={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const ije={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},sje=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":_r(t,"slider-size"),"--slider-color":n?Fs(n,e):void 0,"--slider-radius":i===void 0?void 0:as(i),"--slider-thumb-size":r!==void 0?ot(r):"calc(var(--slider-size) * 2)"}}),d9=Bt((e,t)=>{const n=dt("Slider",ije,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:b,labelAlwaysOn:y,thumbLabel:x,showLabelOnHover:w,thumbChildren:S,disabled:C,unstyled:R,scale:I,inverted:O,className:M,style:L,vars:H,hiddenInputProps:D,restrictToMarks:B,thumbProps:z,...G}=n,Z=xn({name:"Slider",props:n,classes:Yye,classNames:r,className:M,styles:i,style:L,vars:H,varsResolver:sje,unstyled:R}),{dir:ne}=jb(),[ue,X]=U.useState(!1),[q,te]=ju({value:typeof s=="number"?Rm(s,l,c):s,defaultValue:typeof h=="number"?Rm(h,l,c):h,finalValue:Rm(0,l,c),onChange:o}),W=U.useRef(q),ee=U.useRef(null),oe=U.useRef(null),pe=qye({value:q,min:l,max:c}),ce=I(q),he=typeof g=="function"?g(ce):g,Ee=d??rje(f),Ae=U.useCallback(({x:Me})=>{if(!C){const Ye=nje({value:Me,min:l,max:c,step:f,precision:Ee});te(B&&(m!=null&&m.length)?Lte(Ye,m.map(lt=>lt.value)):Ye),W.current=Ye}},[C,l,c,f,Ee,te,m,B]),{ref:ge,active:me}=JDe(Ae,{onScrubEnd:()=>a==null?void 0:a(B&&(m!=null&&m.length)?Lte(W.current,m.map(Me=>Me.value)):W.current)},ne),Oe=Me=>{var Ye,lt,We,nt,yt,_t;if(!C)switch(Me.key){case"ArrowUp":{if(Me.preventDefault(),(Ye=oe.current)==null||Ye.focus(),B&&m){const Et=SF(q,m);te(Et),a==null||a(Et);break}const It=l6(Math.min(Math.max(q+f,l),c),Ee);te(It),a==null||a(It);break}case"ArrowRight":{if(Me.preventDefault(),(lt=oe.current)==null||lt.focus(),B&&m){const Et=ne==="rtl"?TF(q,m):SF(q,m);te(Et),a==null||a(Et);break}const It=l6(Math.min(Math.max(ne==="rtl"?q-f:q+f,l),c),Ee);te(It),a==null||a(It);break}case"ArrowDown":{if(Me.preventDefault(),(We=oe.current)==null||We.focus(),B&&m){const Et=TF(q,m);te(Et),a==null||a(Et);break}const It=l6(Math.min(Math.max(q-f,l),c),Ee);te(It),a==null||a(It);break}case"ArrowLeft":{if(Me.preventDefault(),(nt=oe.current)==null||nt.focus(),B&&m){const Et=ne==="rtl"?SF(q,m):TF(q,m);te(Et),a==null||a(Et);break}const It=l6(Math.min(Math.max(ne==="rtl"?q+f:q-f,l),c),Ee);te(It),a==null||a(It);break}case"Home":{if(Me.preventDefault(),(yt=oe.current)==null||yt.focus(),B&&m){te(Fne(m)),a==null||a(Fne(m));break}te(l),a==null||a(l);break}case"End":{if(Me.preventDefault(),(_t=oe.current)==null||_t.focus(),B&&m){te($ne(m)),a==null||a($ne(m));break}te(c),a==null||a(c);break}}};return k.jsx(eje,{value:{getStyles:Z},children:k.jsxs(Vye,{...G,ref:yu(t,ee),onKeyDownCapture:Oe,onMouseDownCapture:()=>{var Me;return(Me=ee.current)==null?void 0:Me.focus()},size:u,disabled:C,children:[k.jsx(Gye,{inverted:O,offset:0,filled:pe,marks:m,min:l,max:c,value:ce,disabled:C,containerProps:{ref:ge,onMouseEnter:w?()=>X(!0):void 0,onMouseLeave:w?()=>X(!1):void 0},children:k.jsx(Hye,{max:c,min:l,value:ce,position:pe,dragging:me,label:he,ref:oe,labelTransitionProps:b,labelAlwaysOn:y,thumbLabel:x,showLabelOnHover:w,isHovered:ue,disabled:C,...z,children:S})}),k.jsx("input",{type:"hidden",name:p,value:ce,...D})]})})});d9.classes=Yye;d9.displayName="@mantine/core/Slider";const oje={},eh=Bt((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=dt("Space",oje,e);return k.jsx(Ue,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});eh.displayName="@mantine/core/Space";var Kye={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const aje={maxHeight:100,initialState:!1},uje=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),VW=Bt((e,t)=>{const n=dt("Spoiler",aje,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,expanded:b,onExpandedChange:y,...x}=n,w=xn({name:"Spoiler",classes:Kye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uje}),S=df(g),C=`${S}-region`,[R,I]=ju({value:b,defaultValue:l,finalValue:!1,onChange:y}),{ref:O,height:M}=eOe(),L=R?f:d,H=L!==null&&c<M;return k.jsxs(Ue,{...w("root"),id:S,ref:t,"data-has-spoiler":H||void 0,...x,children:[H&&k.jsx(kw,{component:"button",type:"button",ref:p,onClick:()=>I(!R),"aria-expanded":R,"aria-controls":C,...w("control"),children:L}),k.jsx("div",{...w("content",{style:{maxHeight:R?M?ot(M):void 0:ot(c)}}),"data-reduce-motion":!0,role:"region",id:C,children:k.jsx("div",{ref:O,children:h})})]})});VW.classes=Kye;VW.displayName="@mantine/core/Spoiler";var Xye={root:"m_6d731127"};const lje={gap:"md",align:"stretch",justify:"flex-start"},cje=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Ha(t),"--stack-align":n,"--stack-justify":r}}),El=Bt((e,t)=>{const n=dt("Stack",lje,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=xn({name:"Stack",props:n,classes:Xye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:cje});return k.jsx(Ue,{ref:t,...p("root"),variant:d,...h})});El.classes=Xye;El.displayName="@mantine/core/Stack";const Qye=U.createContext(null),fje=Qye.Provider,dje=()=>U.useContext(Qye),hje={},HW=Bt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=dt("SwitchGroup",hje,e),[c,f]=ju({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return k.jsx(fje,{value:{value:c,onChange:d,size:s},children:k.jsx(ys.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:k.jsx(hW,{role:"group",children:a})})})});HW.classes=ys.Wrapper.classes;HW.displayName="@mantine/core/SwitchGroup";var Jye={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const pje={labelPosition:"right"},mje=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:as(t),"--switch-height":_r(r,"switch-height"),"--switch-width":_r(r,"switch-width"),"--switch-thumb-size":_r(r,"switch-thumb-size"),"--switch-label-font-size":_r(r,"switch-label-font-size"),"--switch-track-label-padding":_r(r,"switch-track-label-padding"),"--switch-color":n?Fs(n,e):void 0}}),P_=Bt((e,t)=>{const n=dt("Switch",pje,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,thumbIcon:b,checked:y,defaultChecked:x,onChange:w,labelPosition:S,description:C,error:R,disabled:I,variant:O,rootRef:M,mod:L,...H}=n,D=dje(),B=p||(D==null?void 0:D.size),z=xn({name:"Switch",props:n,classes:Jye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mje}),{styleProps:G,rest:Z}=Cw(H),ne=df(h),ue=D?{checked:D.value.includes(Z.value),onChange:D.onChange}:{},[X,q]=ju({value:ue.checked??y,defaultValue:x,finalValue:!1});return k.jsxs(XO,{...z("root"),__staticSelector:"Switch",__stylesApiProps:n,id:ne,size:B,labelPosition:S,label:c,description:C,error:R,disabled:I,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":ue.checked||y||void 0,variant:O,ref:M,mod:L,...G,...g,children:[k.jsx("input",{...Z,disabled:I,checked:X,"data-checked":ue.checked||y||void 0,onChange:te=>{var W;D?(W=ue.onChange)==null||W.call(ue,te):w==null||w(te),q(te.currentTarget.checked)},id:ne,ref:t,type:"checkbox",role:"switch",...z("input")}),k.jsxs(Ue,{"aria-hidden":"true",mod:{error:R,"label-position":S,"without-labels":!d&&!f},...z("track"),children:[k.jsx(Ue,{component:"span",mod:"reduce-motion",...z("thumb"),children:b}),k.jsx("span",{...z("trackLabel"),children:X?d:f})]})]})});P_.classes={...Jye,...tye};P_.displayName="@mantine/core/Switch";P_.Group=HW;const[gje,yje]=Rl("Table component was not found in the tree");var cR={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function vje(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Rw(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Bt((i,s)=>{const o=dt(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=yje();return k.jsx(Ue,{component:e,ref:s,...vje(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=cR,r}const dU=Rw("th",{columnBorder:!0}),Zye=Rw("td",{columnBorder:!0}),_P=Rw("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),e1e=Rw("thead",{stickyHeader:!0}),t1e=Rw("tbody"),n1e=Rw("tfoot"),r1e=Rw("caption",{captionSide:!0});function qW({data:e}){return k.jsxs(k.Fragment,{children:[e.caption&&k.jsx(r1e,{children:e.caption}),e.head&&k.jsx(e1e,{children:k.jsx(_P,{children:e.head.map((t,n)=>k.jsx(dU,{children:t},n))})}),e.body&&k.jsx(t1e,{children:e.body.map((t,n)=>k.jsx(_P,{children:t.map((r,i)=>k.jsx(Zye,{children:r},i))},n))}),e.foot&&k.jsx(n1e,{children:k.jsx(_P,{children:e.foot.map((t,n)=>k.jsx(dU,{children:t},n))})})]})}qW.displayName="@mantine/core/TableDataRenderer";const bje={type:"scrollarea"},xje=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":ot(t),"--table-overflow":n==="native"?"auto":void 0}}),WW=Bt((e,t)=>{const n=dt("TableScrollContainer",bje,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=xn({name:"TableScrollContainer",classes:cR,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xje,rootSelector:"scrollContainer"});return k.jsx(Ue,{component:f==="scrollarea"?a1:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:k.jsx("div",{...h("scrollContainerInner"),children:l})})});WW.classes=cR;WW.displayName="@mantine/core/TableScrollContainer";const _je={withRowBorders:!0,verticalSpacing:7},wje=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Ha(r),"--table-vertical-spacing":Ha(i),"--table-border-color":s?Fs(s,e):void 0,"--table-striped-color":u&&o?Fs(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Fs(a,e):void 0,"--table-sticky-header-offset":f?ot(c):void 0}}),zn=Bt((e,t)=>{const n=dt("Table",_je,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:b,withTableBorder:y,borderColor:x,layout:w,variant:S,data:C,children:R,stickyHeader:I,stickyHeaderOffset:O,mod:M,tabularNums:L,...H}=n,D=xn({name:"Table",props:n,className:i,style:s,classes:cR,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:wje});return k.jsx(gje,{value:{getStyles:D,stickyHeader:I,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:b,captionSide:f||"bottom"},children:k.jsx(Ue,{component:"table",variant:S,ref:t,mod:[{"data-with-table-border":y,"data-tabular-nums":L},M],...D("table"),...H,children:R||!!C&&k.jsx(qW,{data:C})})})});zn.classes=cR;zn.displayName="@mantine/core/Table";zn.Td=Zye;zn.Th=dU;zn.Tr=_P;zn.Thead=e1e;zn.Tbody=t1e;zn.Tfoot=n1e;zn.Caption=r1e;zn.ScrollContainer=WW;zn.DataRenderer=qW;const[Eje,GW]=Rl("Tabs component was not found in the tree");var fR={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const Sje={},YW=Bt((e,t)=>{const n=dt("TabsList",Sje,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=GW();return k.jsx(Ue,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});YW.classes=fR;YW.displayName="@mantine/core/TabsList";const Tje={},KW=Bt((e,t)=>{const n=dt("TabsPanel",Tje,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,keepMounted:c,...f}=n,d=GW(),h=d.value===s,p=d.keepMounted||c||h?r:null;return k.jsx(Ue,{...f,...d.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,h?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:d.orientation},l],role:"tabpanel",id:d.getPanelId(s),"aria-labelledby":d.getTabId(s),children:p})});KW.classes=fR;KW.displayName="@mantine/core/TabsPanel";const Cje={},XW=Bt((e,t)=>{const n=dt("TabsTab",Cje,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,tabIndex:b,...y}=n,x=Wa(),{dir:w}=jb(),S=GW(),C=a===S.value,R=O=>{S.onChange(S.allowTabDeactivation&&a===S.value?null:a),u==null||u(O)},I={classNames:h,styles:p,props:n};return k.jsxs(sh,{...y,...S.getStyles("tab",{className:r,style:d,variant:S.variant,...I}),disabled:c,unstyled:S.unstyled,variant:S.variant,mod:[{active:C,disabled:c,orientation:S.orientation,inverted:S.inverted,placement:S.orientation==="vertical"&&S.placement},g],ref:t,role:"tab",id:S.getTabId(a),"aria-selected":C,tabIndex:b||C||S.value===null?0:-1,"aria-controls":S.getPanelId(a),onClick:R,__vars:{"--tabs-color":f?Fs(f,x):void 0},onKeyDown:uq({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:S.activateTabWithKeyboard,loop:S.loop,orientation:S.orientation||"horizontal",dir:w,onKeyDown:l}),children:[o&&k.jsx("span",{...S.getStyles("tabSection",I),"data-position":"left",children:o}),i&&k.jsx("span",{...S.getStyles("tabLabel",I),children:i}),s&&k.jsx("span",{...S.getStyles("tabSection",I),"data-position":"right",children:s})]})});XW.classes=fR;XW.displayName="@mantine/core/TabsTab";const Bne="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",Aje={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},kje=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":as(t),"--tabs-color":Fs(n,e),"--tabs-text-color":cT(r,e)?Ew({color:n,theme:e,autoContrast:r}):void 0}}),ci=Bt((e,t)=>{const n=dt("Tabs",Aje,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:b,classNames:y,styles:x,unstyled:w,className:S,style:C,vars:R,autoContrast:I,mod:O,...M}=n,L=df(l),[H,D]=ju({value:i,defaultValue:r,finalValue:null,onChange:s}),B=xn({name:"Tabs",props:n,classes:fR,className:S,style:C,classNames:y,styles:x,unstyled:w,vars:R,varsResolver:kje});return k.jsx(Eje,{value:{placement:g,value:H,orientation:o,id:L,loop:u,activateTabWithKeyboard:c,getTabId:ZN(`${L}-tab`,Bne),getPanelId:ZN(`${L}-panel`,Bne),onChange:D,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:b,unstyled:w,getStyles:B},children:k.jsx(Ue,{ref:t,id:L,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},O],...B("root"),...M,children:a})})});ci.classes=fR;ci.displayName="@mantine/core/Tabs";ci.Tab=XW;ci.Panel=KW;ci.List=YW;const Rje={},Fy=Bt((e,t)=>{const n=dt("TextInput",Rje,e);return k.jsx(lp,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});Fy.classes=lp.classes;Fy.displayName="@mantine/core/TextInput";const Ije=["h1","h2","h3","h4","h5","h6"],Pje=["xs","sm","md","lg","xl"];function Nje(e,t){const n=t!==void 0?t:`h${e}`;return Ije.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:Pje.includes(n)?{fontSize:`var(--mantine-font-size-${n})`,fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}:{fontSize:ot(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var i1e={root:"m_8a5d1357"};const Dje={order:1},Oje=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=Nje(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},co=Bt((e,t)=>{const n=dt("Title",Dje,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=xn({name:"Title",props:n,classes:i1e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Oje});return[1,2,3,4,5,6].includes(u)?k.jsx(Ue,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});co.classes=i1e;co.displayName="@mantine/core/Title";function Mje(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function Lje(e){return U.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function Fje(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const $je=()=>Mje({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),Iw=$je(),Bje=(e=Iw)=>Lje(e);function ST(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=Fje(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function jje(e,t=Iw){const n=e.id||FE();return ST(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function s1e(e,t=Iw){return ST(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function Uje(e,t=Iw){return ST(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function zje(e=Iw){ST(e,()=>[])}function Vje(e=Iw){ST(e,t=>t.slice(0,e.getState().limit))}const Pw={show:jje,hide:s1e,update:Uje,clean:zje,cleanQueue:Vje,updateState:ST};function hU(){return hU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hU.apply(null,arguments)}function o1e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function pU(e,t){return pU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},pU(e,t)}function a1e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,pU(e,t)}var CF={exports:{}},AF,jne;function Hje(){if(jne)return AF;jne=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return AF=e,AF}var kF,Une;function qje(){if(Une)return kF;Une=1;var e=Hje();function t(){}function n(){}return n.resetWarningCache=t,kF=function(){function r(o,a,u,l,c,f){if(f!==e){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s},kF}var zne;function Wje(){return zne||(zne=1,CF.exports=qje()()),CF.exports}var Gje=Wje();const Vne=gc(Gje),Hne={disabled:!1},l8=sr.createContext(null);var Yje=function(t){return t.scrollTop},_3="unmounted",t_="exited",n_="entering",pE="entered",mU="exiting",P1=function(e){a1e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=t_,s.appearStatus=n_):u=pE:r.unmountOnExit||r.mountOnEnter?u=_3:u=t_,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===_3?{status:t_}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==n_&&o!==pE&&(s=n_):(o===n_||o===pE)&&(s=mU)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===n_){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:x3.findDOMNode(this);o&&Yje(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===t_&&this.setState({status:_3})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[x3.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||Hne.disabled){this.safeSetState({status:pE},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:n_},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:pE},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:x3.findDOMNode(this);if(!s||Hne.disabled){this.safeSetState({status:t_},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:mU},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:t_},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:x3.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===_3)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=o1e(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return sr.createElement(l8.Provider,{value:null},typeof o=="function"?o(i,a):sr.cloneElement(sr.Children.only(o),a))},t}(sr.Component);P1.contextType=l8;P1.propTypes={};function H2(){}P1.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:H2,onEntering:H2,onEntered:H2,onExit:H2,onExiting:H2,onExited:H2};P1.UNMOUNTED=_3;P1.EXITED=t_;P1.ENTERING=n_;P1.ENTERED=pE;P1.EXITING=mU;function Kje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QW(e,t){var n=function(s){return t&&U.isValidElement(s)?t(s):s},r=Object.create(null);return e&&U.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function Xje(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function __(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Qje(e,t){return QW(e.children,function(n){return U.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:__(n,"appear",e),enter:__(n,"enter",e),exit:__(n,"exit",e)})})}function Jje(e,t,n){var r=QW(e.children),i=Xje(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(U.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=U.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=U.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:__(o,"exit",e),enter:__(o,"enter",e)}):!u&&a&&!c?i[s]=U.cloneElement(o,{in:!1}):u&&a&&U.isValidElement(l)&&(i[s]=U.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:__(o,"exit",e),enter:__(o,"enter",e)}))}}),i}var Zje=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},eUe={component:"div",childFactory:function(t){return t}},Sv=function(e){a1e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(Kje(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?Qje(i,a):Jje(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=QW(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=hU({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=o1e(i,["component","childFactory"]),u=this.state.contextValue,l=Zje(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?sr.createElement(l8.Provider,{value:u},l):sr.createElement(l8.Provider,{value:u},sr.createElement(s,a,l))},t}(sr.Component);Sv.propTypes={};Sv.defaultProps=eUe;const u1e=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function tUe(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),u1e.reduce((n,r)=>(n[r]=[],n),{}))}const qne={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},nUe={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function rUe({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:qne[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:nUe[o]},l={opacity:0,maxHeight:0,transform:qne[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function iUe(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const l1e=U.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=iUe(n,e.autoClose),l=U.useRef(-1),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return U.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),U.useEffect(()=>(d(),c),[u]),k.jsx(DW,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});l1e.displayName="@mantine/notifications/NotificationContainer";var c1e={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const sUe=P1,oUe={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:fd("overlay"),store:Iw,withinPortal:!0},aUe=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":ot(n)}}),N1=Bt((e,t)=>{const n=dt("Notifications",oUe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:b,withinPortal:y,...x}=n,w=Wa(),S=Bje(g),C=KDe(),R=LO(),I=U.useRef({}),O=U.useRef(0),L=(w.respectReducedMotion?R:!1)?1:f,H=xn({name:"Notifications",classes:c1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aUe});U.useEffect(()=>{g==null||g.updateState(z=>({...z,limit:p||5,defaultPosition:l}))},[p,l]),tg(()=>{S.notifications.length>O.current&&setTimeout(()=>C(),0),O.current=S.notifications.length},[S.notifications]);const D=tUe(S.notifications,l),B=u1e.reduce((z,G)=>(z[G]=D[G].map(({style:Z,...ne})=>k.jsx(sUe,{timeout:L,onEnter:()=>I.current[ne.id].offsetHeight,nodeRef:{current:I.current[ne.id]},children:ue=>k.jsx(l1e,{ref:X=>{I.current[ne.id]=X},data:ne,onHide:X=>s1e(X,g),autoClose:c,...H("notification",{style:{...rUe({state:ue,position:G,transitionDuration:L,maxHeight:h}),...Z}})})},ne.id)),z),{});return k.jsxs(Ub,{withinPortal:y,...b,children:[k.jsx(Ue,{...H("root"),"data-position":"top-center",ref:t,...x,children:k.jsx(Sv,{children:B["top-center"]})}),k.jsx(Ue,{...H("root"),"data-position":"top-left",...x,children:k.jsx(Sv,{children:B["top-left"]})}),k.jsx(Ue,{...H("root",{className:uS.classNames.fullWidth}),"data-position":"top-right",...x,children:k.jsx(Sv,{children:B["top-right"]})}),k.jsx(Ue,{...H("root",{className:uS.classNames.fullWidth}),"data-position":"bottom-right",...x,children:k.jsx(Sv,{children:B["bottom-right"]})}),k.jsx(Ue,{...H("root"),"data-position":"bottom-left",...x,children:k.jsx(Sv,{children:B["bottom-left"]})}),k.jsx(Ue,{...H("root"),"data-position":"bottom-center",...x,children:k.jsx(Sv,{children:B["bottom-center"]})})]})});N1.classes=c1e;N1.displayName="@mantine/notifications/Notifications";N1.show=Pw.show;N1.hide=Pw.hide;N1.update=Pw.update;N1.clean=Pw.clean;N1.cleanQueue=Pw.cleanQueue;N1.updateState=Pw.updateState;const f1e=U.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Yo=()=>U.useContext(f1e);function uUe({children:e}){const[t,n]=U.useState(void 0),r=U.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return k.jsx(f1e.Provider,{value:r,children:e})}var qC={},Wne;function lUe(){if(Wne)return qC;Wne=1,Object.defineProperty(qC,"__esModule",{value:!0}),qC.parse=o,qC.serialize=l;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const d=function(){};return d.prototype=Object.create(null),d})();function o(d,h){const p=new s,m=d.length;if(m<2)return p;const g=(h==null?void 0:h.decode)||c;let b=0;do{const y=d.indexOf("=",b);if(y===-1)break;const x=d.indexOf(";",b),w=x===-1?m:x;if(y>w){b=d.lastIndexOf(";",y-1)+1;continue}const S=a(d,b,y),C=u(d,y,S),R=d.slice(S,C);if(p[R]===void 0){let I=a(d,y+1,w),O=u(d,w,I);const M=g(d.slice(I,O));p[R]=M}b=w+1}while(b<m);return p}function a(d,h,p){do{const m=d.charCodeAt(h);if(m!==32&&m!==9)return h}while(++h<p);return p}function u(d,h,p){for(;h>p;){const m=d.charCodeAt(--h);if(m!==32&&m!==9)return h+1}return p}function l(d,h,p){const m=(p==null?void 0:p.encode)||encodeURIComponent;if(!e.test(d))throw new TypeError(`argument name is invalid: ${d}`);const g=m(h);if(!t.test(g))throw new TypeError(`argument val is invalid: ${h}`);let b=d+"="+g;if(!p)return b;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);b+="; Max-Age="+p.maxAge}if(p.domain){if(!n.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);b+="; Domain="+p.domain}if(p.path){if(!r.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);b+="; Path="+p.path}if(p.expires){if(!f(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);b+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(b+="; HttpOnly"),p.secure&&(b+="; Secure"),p.partitioned&&(b+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return b}function c(d){if(d.indexOf("%")===-1)return d;try{return decodeURIComponent(d)}catch{return d}}function f(d){return i.call(d)==="[object Date]"}return qC}lUe();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Gne="popstate";function cUe(e={}){function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return gU("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Yk(i)}return dUe(t,n,null,e)}function ho(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Zh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function fUe(){return Math.random().toString(36).substring(2,10)}function Yne(e,t){return{usr:e.state,key:e.key,idx:t}}function gU(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?TT(t):t,state:n,key:t&&t.key||r||fUe()}}function Yk({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function TT(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function dUe(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",u=null,l=c();l==null&&(l=0,o.replaceState({...o.state,idx:l},""));function c(){return(o.state||{idx:null}).idx}function f(){a="POP";let g=c(),b=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:b})}function d(g,b){a="PUSH";let y=gU(m.location,g,b);l=c()+1;let x=Yne(y,l),w=m.createHref(y);try{o.pushState(x,"",w)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,b){a="REPLACE";let y=gU(m.location,g,b);l=c();let x=Yne(y,l),w=m.createHref(y);o.replaceState(x,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let b=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof g=="string"?g:Yk(g);return y=y.replace(/ $/,"%20"),ho(b,`No window.location.(origin|href) available to create URL for href: ${y}`),new URL(y,b)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Gne,f),u=g,()=>{i.removeEventListener(Gne,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let b=p(g);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}function d1e(e,t,n="/"){return hUe(e,t,n,!1)}function hUe(e,t,n,r){let i=typeof t=="string"?TT(t):t,s=lb(i.pathname||"/",n);if(s==null)return null;let o=h1e(e);pUe(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let l=TUe(s);a=EUe(o[u],l,r)}return a}function h1e(e,t=[],n=[],r=""){let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(ho(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let l=Ky([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(ho(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),h1e(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:_Ue(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of p1e(s.path))i(s,o,u)}),t}function p1e(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=p1e(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function pUe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:wUe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var mUe=/^:[\w-]+$/,gUe=3,yUe=2,vUe=1,bUe=10,xUe=-2,Kne=e=>e==="*";function _Ue(e,t){let n=e.split("/"),r=n.length;return n.some(Kne)&&(r+=xUe),t&&(r+=yUe),n.filter(i=>!Kne(i)).reduce((i,s)=>i+(mUe.test(s)?gUe:s===""?vUe:bUe),r)}function wUe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function EUe(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],l=a===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",f=c8({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),d=u.route;if(!f&&l&&n&&!r[r.length-1].route.index&&(f=c8({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Ky([s,f.pathname]),pathnameBase:RUe(Ky([s,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(s=Ky([s,f.pathnameBase]))}return o}function c8(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=SUe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,{paramName:c,isOptional:f},d)=>{if(c==="*"){let p=a[d]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const h=a[d];return f&&!h?l[c]=void 0:l[c]=(h||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function SUe(e,t=!1,n=!0){Zh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function TUe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Zh(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function lb(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function CUe(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?TT(e):e;return{pathname:n?n.startsWith("/")?n:AUe(n,t):t,search:IUe(r),hash:PUe(i)}}function AUe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function RF(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kUe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function JW(e){let t=kUe(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function ZW(e,t,n,r=!1){let i;typeof e=="string"?i=TT(e):(i={...e},ho(!i.pathname||!i.pathname.includes("?"),RF("?","pathname","search",i)),ho(!i.pathname||!i.pathname.includes("#"),RF("#","pathname","hash",i)),ho(!i.search||!i.search.includes("#"),RF("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=CUe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}var Ky=e=>e.join("/").replace(/\/\/+/g,"/"),RUe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),IUe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,PUe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function NUe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var m1e=["POST","PUT","PATCH","DELETE"];new Set(m1e);var DUe=["GET",...m1e];new Set(DUe);var CT=U.createContext(null);CT.displayName="DataRouter";var h9=U.createContext(null);h9.displayName="DataRouterState";var g1e=U.createContext({isTransitioning:!1});g1e.displayName="ViewTransition";var OUe=U.createContext(new Map);OUe.displayName="Fetchers";var MUe=U.createContext(null);MUe.displayName="Await";var L0=U.createContext(null);L0.displayName="Navigation";var dR=U.createContext(null);dR.displayName="Location";var fp=U.createContext({outlet:null,matches:[],isDataRoute:!1});fp.displayName="Route";var eG=U.createContext(null);eG.displayName="RouteError";function tG(e,{relative:t}={}){ho(AT(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=U.useContext(L0),{hash:i,pathname:s,search:o}=hR(e,{relative:t}),a=s;return n!=="/"&&(a=s==="/"?n:Ky([n,s])),r.createHref({pathname:a,search:o,hash:i})}function AT(){return U.useContext(dR)!=null}function dp(){return ho(AT(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(dR).location}var y1e="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function v1e(e){U.useContext(L0).static||U.useLayoutEffect(e)}function F0(){let{isDataRoute:e}=U.useContext(fp);return e?KUe():LUe()}function LUe(){ho(AT(),"useNavigate() may be used only in the context of a <Router> component.");let e=U.useContext(CT),{basename:t,navigator:n}=U.useContext(L0),{matches:r}=U.useContext(fp),{pathname:i}=dp(),s=JSON.stringify(JW(r)),o=U.useRef(!1);return v1e(()=>{o.current=!0}),U.useCallback((u,l={})=>{if(Zh(o.current,y1e),!o.current)return;if(typeof u=="number"){n.go(u);return}let c=ZW(u,JSON.parse(s),i,l.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:Ky([t,c.pathname])),(l.replace?n.replace:n.push)(c,l.state,l)},[t,n,s,i,e])}var FUe=U.createContext(null);function $Ue(e){let t=U.useContext(fp).outlet;return t&&U.createElement(FUe.Provider,{value:e},t)}function ig(){let{matches:e}=U.useContext(fp),t=e[e.length-1];return t?t.params:{}}function hR(e,{relative:t}={}){let{matches:n}=U.useContext(fp),{pathname:r}=dp(),i=JSON.stringify(JW(n));return U.useMemo(()=>ZW(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function b1e(e,t){return x1e(e,t)}function x1e(e,t,n,r){var b;ho(AT(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=U.useContext(L0),{matches:s}=U.useContext(fp),o=s[s.length-1],a=o?o.params:{},u=o?o.pathname:"/",l=o?o.pathnameBase:"/",c=o&&o.route;{let y=c&&c.path||"";_1e(u,!c||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=dp(),d;if(t){let y=typeof t=="string"?TT(t):t;ho(l==="/"||((b=y.pathname)==null?void 0:b.startsWith(l)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${l}" but pathname "${y.pathname}" was given in the \`location\` prop.`),d=y}else d=f;let h=d.pathname||"/",p=h;if(l!=="/"){let y=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=d1e(e,{pathname:p});Zh(c||m!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),Zh(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=VUe(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Ky([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Ky([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,n,r);return t&&g?U.createElement(dR.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},g):g}function BUe(){let e=YUe(),t=NUe(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:s},"ErrorBoundary")," or"," ",U.createElement("code",{style:s},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},t),n?U.createElement("pre",{style:i},n):null,o)}var jUe=U.createElement(BUe,null),UUe=class extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?U.createElement(fp.Provider,{value:this.props.routeContext},U.createElement(eG.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zUe({routeContext:e,match:t,children:n}){let r=U.useContext(CT);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),U.createElement(fp.Provider,{value:e},n)}function VUe(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=n==null?void 0:n.errors;if(s!=null){let u=i.findIndex(l=>l.route.id&&(s==null?void 0:s[l.route.id])!==void 0);ho(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,a=-1;if(n)for(let u=0;u<i.length;u++){let l=i[u];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(a=u),l.route.id){let{loaderData:c,errors:f}=n,d=l.route.loader&&!c.hasOwnProperty(l.route.id)&&(!f||f[l.route.id]===void 0);if(l.route.lazy||d){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((u,l,c)=>{let f,d=!1,h=null,p=null;n&&(f=s&&l.route.id?s[l.route.id]:void 0,h=l.route.errorElement||jUe,o&&(a<0&&c===0?(_1e("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):a===c&&(d=!0,p=l.route.hydrateFallbackElement||null)));let m=t.concat(i.slice(0,c+1)),g=()=>{let b;return f?b=h:d?b=p:l.route.Component?b=U.createElement(l.route.Component,null):l.route.element?b=l.route.element:b=u,U.createElement(zUe,{match:l,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:b})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?U.createElement(UUe,{location:n.location,revalidation:n.revalidation,component:h,error:f,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}function nG(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HUe(e){let t=U.useContext(CT);return ho(t,nG(e)),t}function qUe(e){let t=U.useContext(h9);return ho(t,nG(e)),t}function WUe(e){let t=U.useContext(fp);return ho(t,nG(e)),t}function rG(e){let t=WUe(e),n=t.matches[t.matches.length-1];return ho(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function GUe(){return rG("useRouteId")}function YUe(){var r;let e=U.useContext(eG),t=qUe("useRouteError"),n=rG("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function KUe(){let{router:e}=HUe("useNavigate"),t=rG("useNavigate"),n=U.useRef(!1);return v1e(()=>{n.current=!0}),U.useCallback(async(i,s={})=>{Zh(n.current,y1e),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var Xne={};function _1e(e,t,n){!t&&!Xne[e]&&(Xne[e]=!0,Zh(!1,n))}U.memo(XUe);function XUe({routes:e,future:t,state:n}){return x1e(e,void 0,n,t)}function iG({to:e,replace:t,state:n,relative:r}){ho(AT(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=U.useContext(L0);Zh(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=U.useContext(fp),{pathname:o}=dp(),a=F0(),u=ZW(e,JW(s),o,r==="path"),l=JSON.stringify(u);return U.useEffect(()=>{a(JSON.parse(l),{replace:t,state:n,relative:r})},[a,l,r,t,n]),null}function QUe(e){return $Ue(e.context)}function r_(e){ho(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function JUe({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){ho(!AT(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=U.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=TT(n));let{pathname:u="/",search:l="",hash:c="",state:f=null,key:d="default"}=n,h=U.useMemo(()=>{let p=lb(u,o);return p==null?null:{location:{pathname:p,search:l,hash:c,state:f,key:d},navigationType:r}},[o,u,l,c,f,d,r]);return Zh(h!=null,`<Router basename="${o}"> is not able to match the URL "${u}${l}${c}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:U.createElement(L0.Provider,{value:a},U.createElement(dR.Provider,{children:t,value:h}))}function ZUe({children:e,location:t}){return b1e(yU(e),t)}function yU(e,t=[]){let n=[];return U.Children.forEach(e,(r,i)=>{if(!U.isValidElement(r))return;let s=[...t,i];if(r.type===U.Fragment){n.push.apply(n,yU(r.props.children,s));return}ho(r.type===r_,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ho(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=yU(r.props.children,s)),n.push(o)}),n}var wP="get",EP="application/x-www-form-urlencoded";function p9(e){return e!=null&&typeof e.tagName=="string"}function eze(e){return p9(e)&&e.tagName.toLowerCase()==="button"}function tze(e){return p9(e)&&e.tagName.toLowerCase()==="form"}function nze(e){return p9(e)&&e.tagName.toLowerCase()==="input"}function rze(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ize(e,t){return e.button===0&&(!t||t==="_self")&&!rze(e)}function vU(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function sze(e,t){let n=vU(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}var c6=null;function oze(){if(c6===null)try{new FormData(document.createElement("form"),0),c6=!1}catch{c6=!0}return c6}var aze=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function IF(e){return e!=null&&!aze.has(e)?(Zh(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${EP}"`),null):e}function uze(e,t){let n,r,i,s,o;if(tze(e)){let a=e.getAttribute("action");r=a?lb(a,t):null,n=e.getAttribute("method")||wP,i=IF(e.getAttribute("enctype"))||EP,s=new FormData(e)}else if(eze(e)||nze(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||a.getAttribute("action");if(r=u?lb(u,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||wP,i=IF(e.getAttribute("formenctype"))||IF(a.getAttribute("enctype"))||EP,s=new FormData(a,e),!oze()){let{name:l,type:c,value:f}=e;if(c==="image"){let d=l?`${l}.`:"";s.append(`${d}x`,"0"),s.append(`${d}y`,"0")}else l&&s.append(l,f)}}else{if(p9(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=wP,r=null,i=EP,o=e}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function sG(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function lze(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cze(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function fze(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let o=await lze(s,n);return o.links?o.links():[]}return[]}));return mze(r.flat(1).filter(cze).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Qne(e,t,n,r,i,s){let o=(u,l)=>n[l]?u.route.id!==n[l].route.id:!0,a=(u,l)=>{var c;return n[l].pathname!==u.pathname||((c=n[l].route.path)==null?void 0:c.endsWith("*"))&&n[l].params["*"]!==u.params["*"]};return s==="assets"?t.filter((u,l)=>o(u,l)||a(u,l)):s==="data"?t.filter((u,l)=>{var f;let c=r.routes[u.route.id];if(!c||!c.hasLoader)return!1;if(o(u,l)||a(u,l))return!0;if(u.route.shouldRevalidate){let d=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function dze(e,t){return hze(e.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function hze(e){return[...new Set(e)]}function pze(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function mze(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify(pze(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function gze(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function yze(){let e=U.useContext(CT);return sG(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function vze(){let e=U.useContext(h9);return sG(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var oG=U.createContext(void 0);oG.displayName="FrameworkContext";function w1e(){let e=U.useContext(oG);return sG(e,"You must render this element inside a <HydratedRouter> element"),e}function bze(e,t){let n=U.useContext(oG),[r,i]=U.useState(!1),[s,o]=U.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:l,onMouseLeave:c,onTouchStart:f}=t,d=U.useRef(null);U.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let m=b=>{b.forEach(y=>{o(y.isIntersecting)})},g=new IntersectionObserver(m,{threshold:.5});return d.current&&g.observe(d.current),()=>{g.disconnect()}}},[e]),U.useEffect(()=>{if(r){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[r]);let h=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?e!=="intent"?[s,d,{}]:[s,d,{onFocus:WC(a,h),onBlur:WC(u,p),onMouseEnter:WC(l,h),onMouseLeave:WC(c,p),onTouchStart:WC(f,h)}]:[!1,d,{}]}function WC(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function xze({page:e,...t}){let{router:n}=yze(),r=U.useMemo(()=>d1e(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?U.createElement(wze,{page:e,matches:r,...t}):null}function _ze(e){let{manifest:t,routeModules:n}=w1e(),[r,i]=U.useState([]);return U.useEffect(()=>{let s=!1;return fze(e,t,n).then(o=>{s||i(o)}),()=>{s=!0}},[e,t,n]),r}function wze({page:e,matches:t,...n}){let r=dp(),{manifest:i,routeModules:s}=w1e(),{loaderData:o,matches:a}=vze(),u=U.useMemo(()=>Qne(e,t,a,i,r,"data"),[e,t,a,i,r]),l=U.useMemo(()=>Qne(e,t,a,i,r,"assets"),[e,t,a,i,r]),c=U.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let h=new Set,p=!1;if(t.forEach(g=>{var y;let b=i.routes[g.route.id];!b||!b.hasLoader||(!u.some(x=>x.route.id===g.route.id)&&g.route.id in o&&((y=s[g.route.id])!=null&&y.shouldRevalidate)||b.hasClientLoader?p=!0:h.add(g.route.id))}),h.size===0)return[];let m=gze(e);return p&&h.size>0&&m.searchParams.set("_routes",t.filter(g=>h.has(g.route.id)).map(g=>g.route.id).join(",")),[m.pathname+m.search]},[o,r,i,u,t,e,s]),f=U.useMemo(()=>dze(l,i),[l,i]),d=_ze(l);return U.createElement(U.Fragment,null,c.map(h=>U.createElement("link",{key:h,rel:"prefetch",as:"fetch",href:h,...n})),f.map(h=>U.createElement("link",{key:h,rel:"modulepreload",href:h,...n})),d.map(({key:h,link:p})=>U.createElement("link",{key:h,...p})))}function Eze(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var E1e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{E1e&&(window.__reactRouterVersion="7.1.3")}catch{}function Sze({basename:e,children:t,window:n}){let r=U.useRef();r.current==null&&(r.current=cUe({window:n,v5Compat:!0}));let i=r.current,[s,o]=U.useState({action:i.action,location:i.location}),a=U.useCallback(u=>{U.startTransition(()=>o(u))},[o]);return U.useLayoutEffect(()=>i.listen(a),[i,a]),U.createElement(JUe,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var S1e=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,T1e=U.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:u,to:l,preventScrollReset:c,viewTransition:f,...d},h){let{basename:p}=U.useContext(L0),m=typeof l=="string"&&S1e.test(l),g,b=!1;if(typeof l=="string"&&m&&(g=l,E1e))try{let O=new URL(window.location.href),M=l.startsWith("//")?new URL(O.protocol+l):new URL(l),L=lb(M.pathname,p);M.origin===O.origin&&L!=null?l=L+M.search+M.hash:b=!0}catch{Zh(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=tG(l,{relative:i}),[x,w,S]=bze(r,d),C=kze(l,{replace:o,state:a,target:u,preventScrollReset:c,relative:i,viewTransition:f});function R(O){t&&t(O),O.defaultPrevented||C(O)}let I=U.createElement("a",{...d,...S,href:g||y,onClick:b||s?t:R,ref:Eze(h,w),target:u,"data-discover":!m&&n==="render"?"true":void 0});return x&&!m?U.createElement(U.Fragment,null,I,U.createElement(xze,{page:y})):I});T1e.displayName="Link";var Tze=U.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:u,...l},c){let f=hR(o,{relative:l.relative}),d=dp(),h=U.useContext(h9),{navigator:p,basename:m}=U.useContext(L0),g=h!=null&&Dze(f)&&a===!0,b=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,y=d.pathname,x=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(y=y.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase()),x&&m&&(x=lb(x,m)||x);const w=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let S=y===b||!i&&y.startsWith(b)&&y.charAt(w)==="/",C=x!=null&&(x===b||!i&&x.startsWith(b)&&x.charAt(b.length)==="/"),R={isActive:S,isPending:C,isTransitioning:g},I=S?t:void 0,O;typeof r=="function"?O=r(R):O=[r,S?"active":null,C?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let M=typeof s=="function"?s(R):s;return U.createElement(T1e,{...l,"aria-current":I,className:O,ref:c,style:M,to:o,viewTransition:a},typeof u=="function"?u(R):u)});Tze.displayName="NavLink";var Cze=U.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:o=wP,action:a,onSubmit:u,relative:l,preventScrollReset:c,viewTransition:f,...d},h)=>{let p=Pze(),m=Nze(a,{relative:l}),g=o.toLowerCase()==="get"?"get":"post",b=typeof a=="string"&&S1e.test(a),y=x=>{if(u&&u(x),x.defaultPrevented)return;x.preventDefault();let w=x.nativeEvent.submitter,S=(w==null?void 0:w.getAttribute("formmethod"))||o;p(w||x.currentTarget,{fetcherKey:t,method:S,navigate:n,replace:i,state:s,relative:l,preventScrollReset:c,viewTransition:f})};return U.createElement("form",{ref:h,method:g,action:m,onSubmit:r?u:y,...d,"data-discover":!b&&e==="render"?"true":void 0})});Cze.displayName="Form";function Aze(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function C1e(e){let t=U.useContext(CT);return ho(t,Aze(e)),t}function kze(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=F0(),u=dp(),l=hR(e,{relative:s});return U.useCallback(c=>{if(ize(c,t)){c.preventDefault();let f=n!==void 0?n:Yk(u)===Yk(l);a(e,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[u,a,l,n,r,t,e,i,s,o])}function D1(e){Zh(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=U.useRef(vU(e)),n=U.useRef(!1),r=dp(),i=U.useMemo(()=>sze(r.search,n.current?null:t.current),[r.search]),s=F0(),o=U.useCallback((a,u)=>{const l=vU(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}var Rze=0,Ize=()=>`__${String(++Rze)}__`;function Pze(){let{router:e}=C1e("useSubmit"),{basename:t}=U.useContext(L0),n=GUe();return U.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:u,body:l}=uze(r,t);if(i.navigate===!1){let c=i.fetcherKey||Ize();await e.fetch(c,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function Nze(e,{relative:t}={}){let{basename:n}=U.useContext(L0),r=U.useContext(fp);ho(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...hR(e||".",{relative:t})},o=dp();if(e==null){s.search=o.search;let a=new URLSearchParams(s.search),u=a.getAll("index");if(u.some(c=>c==="")){a.delete("index"),u.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();s.search=c?`?${c}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Ky([n,s.pathname])),Yk(s)}function Dze(e,t={}){let n=U.useContext(g1e);ho(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=C1e("useViewTransitionState"),i=hR(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=lb(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=lb(n.nextLocation.pathname,r)||n.nextLocation.pathname;return c8(i.pathname,o)!=null||c8(i.pathname,s)!=null}new TextEncoder;const aG=U.createContext(null);aG.displayName="@mantine/modals/ModalsContext";function Oze(){const e=U.useContext(aG);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function Mze({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=Oze(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return k.jsxs(k.Fragment,{children:[l&&k.jsx(Ue,{mb:"md",children:l}),k.jsxs(Js,{mt:l?0:"md",justify:"flex-end",...o,children:[k.jsx(Nn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),k.jsx(Nn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[Lze,uG]=sOe("mantine-modals"),Jne=e=>{const t=e.modalId||FE();return uG("openConfirmModal")({...e,modalId:t}),t};uG("closeModal");uG("closeAllModals");function Zne(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function Fze(e,t){var n;switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const r=e.modals.find(s=>s.id===t.modalId);if(!r)return e;Zne(r,t.canceled);const i=e.modals.filter(s=>s.id!==t.modalId);return{current:i[i.length-1]||e.current,modals:i}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(r=>{Zne(r,t.canceled)}),{current:e.current,modals:[]}):e;case"UPDATE":{const{modalId:r,newProps:i}=t,s=e.modals.map(a=>a.id!==r?a:a.type==="content"||a.type==="confirm"?{...a,props:{...a.props,...i}}:a.type==="context"?{...a,props:{...a.props,...i,innerProps:{...a.props.innerProps,...i.innerProps}}}:a),o=((n=e.current)==null?void 0:n.id)===r&&s.find(a=>a.id===r)||e.current;return{...e,modals:s,current:o}}default:return e}}function $ze(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function Bze({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=U.useReducer(Fze,{modals:[],current:null}),o=U.useRef(i);o.current=i;const a=U.useCallback(y=>{s({type:"CLOSE_ALL",canceled:y})},[o,s]),u=U.useCallback(({modalId:y,...x})=>{const w=y||FE();return s({type:"OPEN",modal:{id:w,type:"content",props:x}}),w},[s]),l=U.useCallback(({modalId:y,...x})=>{const w=y||FE();return s({type:"OPEN",modal:{id:w,type:"confirm",props:x}}),w},[s]),c=U.useCallback((y,{modalId:x,...w})=>{const S=x||FE();return s({type:"OPEN",modal:{id:S,type:"context",props:w,ctx:y}}),S},[s]),f=U.useCallback((y,x)=>{s({type:"CLOSE",modalId:y,canceled:x})},[o,s]),d=U.useCallback(({modalId:y,...x})=>{s({type:"UPDATE",modalId:y,newProps:x})},[s]),h=U.useCallback(({modalId:y,...x})=>{s({type:"UPDATE",modalId:y,newProps:x})},[s]);Lze({openModal:u,openConfirmModal:l,openContextModal:({modal:y,...x})=>c(y,x),closeModal:f,closeContextModal:f,closeAllModals:a,updateModal:d,updateContextModal:h});const p={modalProps:t||{},modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a,updateModal:d,updateContextModal:h},m=()=>{const y=o.current.current;switch(y==null?void 0:y.type){case"context":{const{innerProps:x,...w}=y.props,S=r[y.ctx];return{modalProps:w,content:k.jsx(S,{innerProps:x,context:p,id:y.id})}}case"confirm":{const{modalProps:x,confirmProps:w}=$ze(y.props);return{modalProps:x,content:k.jsx(Mze,{...w,id:y.id,labels:y.props.labels||n})}}case"content":{const{children:x,...w}=y.props;return{modalProps:w,content:x}}default:return{modalProps:{},content:null}}},{modalProps:g,content:b}=m();return k.jsxs(aG.Provider,{value:p,children:[k.jsx(Eo,{zIndex:fd("modal")+1,...t,...g,opened:i.modals.length>0,onClose:()=>{var y;return f((y=i.current)==null?void 0:y.id)},children:b}),e]})}/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jze={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=(e,t,n,r)=>{const i=U.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,title:u,className:l,children:c,...f},d)=>U.createElement("svg",{ref:d,...jze[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,l].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...f},[u&&U.createElement("title",{key:"svg-title"},u),...r.map(([h,p])=>U.createElement(h,p)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Uze=pr("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zze=pr("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lk=pr("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ere=pr("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tre=pr("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vze=pr("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hze=pr("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qze=pr("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wze=pr("outline","brand-python","IconBrandPython",[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gze=pr("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yze=pr("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var A1e=pr("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var m9=pr("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kze=pr("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xze=pr("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qze=pr("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jze=pr("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zze=pr("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var k1e=pr("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eVe=pr("outline","hourglass-empty","IconHourglassEmpty",[["path",{d:"M6 20v-2a6 6 0 1 1 12 0v2a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M6 4v2a6 6 0 1 0 12 0v-2a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tVe=pr("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lG=pr("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nVe=pr("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var R1e=pr("outline","list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rVe=pr("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var iVe=pr("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sVe=pr("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oVe=pr("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aVe=pr("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var I1e=pr("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uVe=pr("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lVe=pr("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cVe=pr("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fVe=pr("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dVe=pr("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var P1e=pr("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hVe=pr("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var N1e=pr("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pVe=pr("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var D1e=pr("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cG=pr("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nre=pr("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pR=pr("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mVe=pr("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gVe=pr("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yVe=pr("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function O1e(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Uu="/Revisit-Study/";function rre(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function M1e(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const vVe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,bVe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,xVe={};function ire(e,t){return(xVe.jsx?bVe:vVe).test(e)}const _Ve=/[ \t\n\f\r]/g;function wVe(e){return typeof e=="object"?e.type==="text"?sre(e.value):!1:sre(e)}function sre(e){return e.replace(_Ve,"")===""}class mR{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}mR.prototype.property={};mR.prototype.normal={};mR.prototype.space=null;function L1e(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new mR(n,r,t)}function Kk(e){return e.toLowerCase()}let hp=class{constructor(t,n){this.property=t,this.attribute=n}};hp.prototype.space=null;hp.prototype.boolean=!1;hp.prototype.booleanish=!1;hp.prototype.overloadedBoolean=!1;hp.prototype.number=!1;hp.prototype.commaSeparated=!1;hp.prototype.spaceSeparated=!1;hp.prototype.commaOrSpaceSeparated=!1;hp.prototype.mustUseProperty=!1;hp.prototype.defined=!1;let EVe=0;const Ar=Nw(),za=Nw(),F1e=Nw(),Qt=Nw(),Ms=Nw(),jE=Nw(),jd=Nw();function Nw(){return 2**++EVe}const bU=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ar,booleanish:za,commaOrSpaceSeparated:jd,commaSeparated:jE,number:Qt,overloadedBoolean:F1e,spaceSeparated:Ms},Symbol.toStringTag,{value:"Module"})),PF=Object.keys(bU);class fG extends hp{constructor(t,n,r,i){let s=-1;if(super(t,n),ore(this,"space",i),typeof r=="number")for(;++s<PF.length;){const o=PF[s];ore(this,PF[s],(r&bU[o])===bU[o])}}}fG.prototype.defined=!0;function ore(e,t,n){n&&(e[t]=n)}const SVe={}.hasOwnProperty;function kT(e){const t={},n={};let r;for(r in e.properties)if(SVe.call(e.properties,r)){const i=e.properties[r],s=new fG(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[Kk(r)]=r,n[Kk(s.attribute)]=r}return new mR(t,n,e.space)}const $1e=kT({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),B1e=kT({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function j1e(e,t){return t in e?e[t]:t}function U1e(e,t){return j1e(e,t.toLowerCase())}const z1e=kT({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:U1e,properties:{xmlns:null,xmlnsXLink:null}}),V1e=kT({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:za,ariaAutoComplete:null,ariaBusy:za,ariaChecked:za,ariaColCount:Qt,ariaColIndex:Qt,ariaColSpan:Qt,ariaControls:Ms,ariaCurrent:null,ariaDescribedBy:Ms,ariaDetails:null,ariaDisabled:za,ariaDropEffect:Ms,ariaErrorMessage:null,ariaExpanded:za,ariaFlowTo:Ms,ariaGrabbed:za,ariaHasPopup:null,ariaHidden:za,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ms,ariaLevel:Qt,ariaLive:null,ariaModal:za,ariaMultiLine:za,ariaMultiSelectable:za,ariaOrientation:null,ariaOwns:Ms,ariaPlaceholder:null,ariaPosInSet:Qt,ariaPressed:za,ariaReadOnly:za,ariaRelevant:null,ariaRequired:za,ariaRoleDescription:Ms,ariaRowCount:Qt,ariaRowIndex:Qt,ariaRowSpan:Qt,ariaSelected:za,ariaSetSize:Qt,ariaSort:null,ariaValueMax:Qt,ariaValueMin:Qt,ariaValueNow:Qt,ariaValueText:null,role:null}}),TVe=kT({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:U1e,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:jE,acceptCharset:Ms,accessKey:Ms,action:null,allow:null,allowFullScreen:Ar,allowPaymentRequest:Ar,allowUserMedia:Ar,alt:null,as:null,async:Ar,autoCapitalize:null,autoComplete:Ms,autoFocus:Ar,autoPlay:Ar,blocking:Ms,capture:null,charSet:null,checked:Ar,cite:null,className:Ms,cols:Qt,colSpan:null,content:null,contentEditable:za,controls:Ar,controlsList:Ms,coords:Qt|jE,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ar,defer:Ar,dir:null,dirName:null,disabled:Ar,download:F1e,draggable:za,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ar,formTarget:null,headers:Ms,height:Qt,hidden:Ar,high:Qt,href:null,hrefLang:null,htmlFor:Ms,httpEquiv:Ms,id:null,imageSizes:null,imageSrcSet:null,inert:Ar,inputMode:null,integrity:null,is:null,isMap:Ar,itemId:null,itemProp:Ms,itemRef:Ms,itemScope:Ar,itemType:Ms,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ar,low:Qt,manifest:null,max:null,maxLength:Qt,media:null,method:null,min:null,minLength:Qt,multiple:Ar,muted:Ar,name:null,nonce:null,noModule:Ar,noValidate:Ar,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ar,optimum:Qt,pattern:null,ping:Ms,placeholder:null,playsInline:Ar,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ar,referrerPolicy:null,rel:Ms,required:Ar,reversed:Ar,rows:Qt,rowSpan:Qt,sandbox:Ms,scope:null,scoped:Ar,seamless:Ar,selected:Ar,shadowRootClonable:Ar,shadowRootDelegatesFocus:Ar,shadowRootMode:null,shape:null,size:Qt,sizes:null,slot:null,span:Qt,spellCheck:za,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Qt,step:null,style:null,tabIndex:Qt,target:null,title:null,translate:null,type:null,typeMustMatch:Ar,useMap:null,value:za,width:Qt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ms,axis:null,background:null,bgColor:null,border:Qt,borderColor:null,bottomMargin:Qt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ar,declare:Ar,event:null,face:null,frame:null,frameBorder:null,hSpace:Qt,leftMargin:Qt,link:null,longDesc:null,lowSrc:null,marginHeight:Qt,marginWidth:Qt,noResize:Ar,noHref:Ar,noShade:Ar,noWrap:Ar,object:null,profile:null,prompt:null,rev:null,rightMargin:Qt,rules:null,scheme:null,scrolling:za,standby:null,summary:null,text:null,topMargin:Qt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Qt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ar,disableRemotePlayback:Ar,prefix:null,property:null,results:Qt,security:null,unselectable:null}}),CVe=kT({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:j1e,properties:{about:jd,accentHeight:Qt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Qt,amplitude:Qt,arabicForm:null,ascent:Qt,attributeName:null,attributeType:null,azimuth:Qt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Qt,by:null,calcMode:null,capHeight:Qt,className:Ms,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Qt,diffuseConstant:Qt,direction:null,display:null,dur:null,divisor:Qt,dominantBaseline:null,download:Ar,dx:null,dy:null,edgeMode:null,editable:null,elevation:Qt,enableBackground:null,end:null,event:null,exponent:Qt,externalResourcesRequired:null,fill:null,fillOpacity:Qt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:jE,g2:jE,glyphName:jE,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Qt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Qt,horizOriginX:Qt,horizOriginY:Qt,id:null,ideographic:Qt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Qt,k:Qt,k1:Qt,k2:Qt,k3:Qt,k4:Qt,kernelMatrix:jd,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Qt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Qt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Qt,overlineThickness:Qt,paintOrder:null,panose1:null,path:null,pathLength:Qt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ms,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Qt,pointsAtY:Qt,pointsAtZ:Qt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:jd,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:jd,rev:jd,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:jd,requiredFeatures:jd,requiredFonts:jd,requiredFormats:jd,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Qt,specularExponent:Qt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Qt,strikethroughThickness:Qt,string:null,stroke:null,strokeDashArray:jd,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Qt,strokeOpacity:Qt,strokeWidth:null,style:null,surfaceScale:Qt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:jd,tabIndex:Qt,tableValues:null,target:null,targetX:Qt,targetY:Qt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:jd,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Qt,underlineThickness:Qt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Qt,values:null,vAlphabetic:Qt,vMathematical:Qt,vectorEffect:null,vHanging:Qt,vIdeographic:Qt,version:null,vertAdvY:Qt,vertOriginX:Qt,vertOriginY:Qt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Qt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),AVe=/^data[-\w.:]+$/i,are=/-[a-z]/g,kVe=/[A-Z]/g;function g9(e,t){const n=Kk(t);let r=t,i=hp;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&AVe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(are,IVe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!are.test(s)){let o=s.replace(kVe,RVe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=fG}return new i(r,t)}function RVe(e){return"-"+e.toLowerCase()}function IVe(e){return e.charAt(1).toUpperCase()}const PVe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},gR=L1e([B1e,$1e,z1e,V1e,TVe],"html"),Wb=L1e([B1e,$1e,z1e,V1e,CVe],"svg");function ure(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function H1e(e){return e.join(" ").trim()}var GC={},NF,lre;function NVe(){if(lre)return NF;lre=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,u=`
`,l="/",c="*",f="",d="comment",h="declaration";NF=function(m,g){if(typeof m!="string")throw new TypeError("First argument must be a string");if(!m)return[];g=g||{};var b=1,y=1;function x(D){var B=D.match(t);B&&(b+=B.length);var z=D.lastIndexOf(u);y=~z?D.length-z:y+D.length}function w(){var D={line:b,column:y};return function(B){return B.position=new S(D),I(),B}}function S(D){this.start=D,this.end={line:b,column:y},this.source=g.source}S.prototype.content=m;function C(D){var B=new Error(g.source+":"+b+":"+y+": "+D);if(B.reason=D,B.filename=g.source,B.line=b,B.column=y,B.source=m,!g.silent)throw B}function R(D){var B=D.exec(m);if(B){var z=B[0];return x(z),m=m.slice(z.length),B}}function I(){R(n)}function O(D){var B;for(D=D||[];B=M();)B!==!1&&D.push(B);return D}function M(){var D=w();if(!(l!=m.charAt(0)||c!=m.charAt(1))){for(var B=2;f!=m.charAt(B)&&(c!=m.charAt(B)||l!=m.charAt(B+1));)++B;if(B+=2,f===m.charAt(B-1))return C("End of comment missing");var z=m.slice(2,B-2);return y+=2,x(z),m=m.slice(B),y+=2,D({type:d,comment:z})}}function L(){var D=w(),B=R(r);if(B){if(M(),!R(i))return C("property missing ':'");var z=R(s),G=D({type:h,property:p(B[0].replace(e,f)),value:z?p(z[0].replace(e,f)):f});return R(o),G}}function H(){var D=[];O(D);for(var B;B=L();)B!==!1&&(D.push(B),O(D));return D}return I(),H()};function p(m){return m?m.replace(a,f):f}return NF}var cre;function DVe(){if(cre)return GC;cre=1;var e=GC.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(GC,"__esModule",{value:!0});var t=e(NVe());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var o=(0,t.default)(r),a=typeof i=="function";return o.forEach(function(u){if(u.type==="declaration"){var l=u.property,c=u.value;a?i(l,c,u):c&&(s=s||{},s[l]=c)}}),s}return GC.default=n,GC}var OVe=DVe();const fre=gc(OVe),MVe=fre.default||fre,y9=q1e("end"),_g=q1e("start");function q1e(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function LVe(e){const t=_g(e),n=y9(e);if(t&&n)return{start:t,end:n}}function ck(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?dre(e.position):"start"in e||"end"in e?dre(e):"line"in e||"column"in e?xU(e):""}function xU(e){return hre(e&&e.line)+":"+hre(e&&e.column)}function dre(e){return xU(e&&e.start)+"-"+xU(e&&e.end)}function hre(e){return e&&typeof e=="number"?e:1}class yc extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=ck(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}yc.prototype.file="";yc.prototype.name="";yc.prototype.reason="";yc.prototype.message="";yc.prototype.stack="";yc.prototype.column=void 0;yc.prototype.line=void 0;yc.prototype.ancestors=void 0;yc.prototype.cause=void 0;yc.prototype.fatal=void 0;yc.prototype.place=void 0;yc.prototype.ruleId=void 0;yc.prototype.source=void 0;const dG={}.hasOwnProperty,FVe=new Map,$Ve=/[A-Z]/g,BVe=/-([a-z])/g,jVe=new Set(["table","tbody","thead","tfoot","tr"]),UVe=new Set(["td","th"]),W1e="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function zVe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=XVe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=KVe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Wb:gR,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=G1e(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function G1e(e,t,n){if(t.type==="element")return VVe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return HVe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return WVe(e,t,n);if(t.type==="mdxjsEsm")return qVe(e,t);if(t.type==="root")return GVe(e,t,n);if(t.type==="text")return YVe(e,t)}function VVe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Wb,e.schema=i),e.ancestors.push(t);const s=K1e(e,t.tagName,!1),o=QVe(e,t);let a=pG(e,t);return jVe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!wVe(u):!0})),Y1e(e,o,s,t),hG(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function HVe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Xk(e,t.position)}function qVe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Xk(e,t.position)}function WVe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Wb,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:K1e(e,t.name,!0),o=JVe(e,t),a=pG(e,t);return Y1e(e,o,s,t),hG(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function GVe(e,t,n){const r={};return hG(r,pG(e,t)),e.create(t,e.Fragment,r,n)}function YVe(e,t){return t.value}function Y1e(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function hG(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function KVe(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function XVe(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=_g(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function QVe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&dG.call(t.properties,i)){const s=ZVe(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&UVe.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function JVe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else Xk(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else Xk(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function pG(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:FVe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=G1e(e,s,o);a!==void 0&&n.push(a)}return n}function ZVe(e,t,n){const r=g9(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?M1e(n):H1e(n)),r.property==="style"){let i=typeof n=="object"?n:eHe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=tHe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?PVe[r.property]||r.property:r.attribute,n]}}function eHe(e,t){const n={};try{MVe(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new yc("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=W1e+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(BVe,rHe)),n[o]=s}}function K1e(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=ire(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=ire(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return dG.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);Xk(e)}function Xk(e,t){const n=new yc("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=W1e+"#cannot-handle-mdx-estrees-without-createevaluater",n}function tHe(e){const t={};let n;for(n in e)dG.call(e,n)&&(t[nHe(n)]=e[n]);return t}function nHe(e){let t=e.replace($Ve,iHe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function rHe(e,t){return t.toUpperCase()}function iHe(e){return"-"+e.toLowerCase()}const DF={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},sHe={};function oHe(e,t){const n=sHe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return X1e(e,r,i)}function X1e(e,t,n){if(aHe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return pre(e.children,t,n)}return Array.isArray(e)?pre(e,t,n):""}function pre(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=X1e(e[i],t,n);return r.join("")}function aHe(e){return!!(e&&typeof e=="object")}const mre=document.createElement("i");function mG(e){const t="&"+e+";";mre.innerHTML=t;const n=mre.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function f1(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Vh(e,t){return e.length>0?(f1(e,e.length,0,t),e):t}const gre={}.hasOwnProperty;function uHe(e){const t={};let n=-1;for(;++n<e.length;)lHe(t,e[n]);return t}function lHe(e,t){let n;for(n in t){const i=(gre.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){gre.call(i,o)||(i[o]=[]);const a=s[o];cHe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function cHe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);f1(e,0,0,r)}function Q1e(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function UE(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Im=Gb(/[A-Za-z]/),Gd=Gb(/[\dA-Za-z]/),fHe=Gb(/[#-'*+\--9=?A-Z^-~]/);function _U(e){return e!==null&&(e<32||e===127)}const wU=Gb(/\d/),dHe=Gb(/[\dA-Fa-f]/),hHe=Gb(/[!-/:-@[-`{-~]/);function or(e){return e!==null&&e<-2}function td(e){return e!==null&&(e<0||e===32)}function zi(e){return e===-2||e===-1||e===32}const pHe=Gb(new RegExp("\\p{P}|\\p{S}","u")),mHe=Gb(/\s/);function Gb(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function RT(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Gd(e.charCodeAt(n+1))&&Gd(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Ls(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return zi(u)?(e.enter(n),a(u)):t(u)}function a(u){return zi(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const gHe={tokenize:yHe};function yHe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Ls(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return or(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const vHe={tokenize:bHe},yre={tokenize:xHe};function bHe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(x){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(x)}return l(x)}function u(x){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&y();const w=t.events.length;let S=w,C;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){C=t.events[S][1].end;break}b(r);let R=w;for(;R<t.events.length;)t.events[R][1].end=Object.assign({},C),R++;return f1(t.events,S+1,0,t.events.slice(w)),t.events.length=R,l(x)}return a(x)}function l(x){if(r===n.length){if(!i)return d(x);if(i.currentConstruct&&i.currentConstruct.concrete)return p(x);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(yre,c,f)(x)}function c(x){return i&&y(),b(r),d(x)}function f(x){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(x)}function d(x){return t.containerState={},e.attempt(yre,h,p)(x)}function h(x){return r++,n.push([t.currentConstruct,t.containerState]),d(x)}function p(x){if(x===null){i&&y(),b(0),e.consume(x);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(x)}function m(x){if(x===null){g(e.exit("chunkFlow"),!0),b(0),e.consume(x);return}return or(x)?(e.consume(x),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(x),m)}function g(x,w){const S=t.sliceStream(x);if(w&&S.push(null),x.previous=s,s&&(s.next=x),s=x,i.defineSkip(x.start),i.write(S),t.parser.lazy[x.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<o&&(!i.events[C][1].end||i.events[C][1].end.offset>o))return;const R=t.events.length;let I=R,O,M;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){if(O){M=t.events[I][1].end;break}O=!0}for(b(r),C=R;C<t.events.length;)t.events[C][1].end=Object.assign({},M),C++;f1(t.events,I+1,0,t.events.slice(R)),t.events.length=C}}function b(x){let w=n.length;for(;w-- >x;){const S=n[w];t.containerState=S[1],S[0].exit.call(t,e)}n.length=x}function y(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function xHe(e,t,n){return Ls(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function vre(e){if(e===null||td(e)||mHe(e))return 1;if(pHe(e))return 2}function gG(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const EU={name:"attention",tokenize:wHe,resolveAll:_He};function _He(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);bre(f,-u),bre(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Vh(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Vh(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Vh(l,gG(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Vh(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Vh(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,f1(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function wHe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=vre(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=vre(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function bre(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const EHe={name:"autolink",tokenize:SHe};function SHe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Im(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||Gd(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||Gd(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||_U(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):fHe(h)?(e.consume(h),l):n(h)}function c(h){return Gd(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||Gd(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const v9={tokenize:THe,partial:!0};function THe(e,t,n){return r;function r(s){return zi(s)?Ls(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||or(s)?t(s):n(s)}}const J1e={name:"blockQuote",tokenize:CHe,continuation:{tokenize:AHe},exit:kHe};function CHe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return zi(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function AHe(e,t,n){const r=this;return i;function i(o){return zi(o)?Ls(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(J1e,t,n)(o)}}function kHe(e){e.exit("blockQuote")}const Z1e={name:"characterEscape",tokenize:RHe};function RHe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return hHe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const eve={name:"characterReference",tokenize:IHe};function IHe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Gd,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=dHe,c):(e.enter("characterReferenceValue"),s=7,o=wU,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===Gd&&!mG(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const xre={tokenize:NHe,partial:!0},_re={name:"codeFenced",tokenize:PHe,concrete:!0};function PHe(e,t,n){const r=this,i={tokenize:S,partial:!0};let s=0,o=0,a;return u;function u(C){return l(C)}function l(C){const R=r.events[r.events.length-1];return s=R&&R[1].type==="linePrefix"?R[2].sliceSerialize(R[1],!0).length:0,a=C,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(C)}function c(C){return C===a?(o++,e.consume(C),c):o<3?n(C):(e.exit("codeFencedFenceSequence"),zi(C)?Ls(e,f,"whitespace")(C):f(C))}function f(C){return C===null||or(C)?(e.exit("codeFencedFence"),r.interrupt?t(C):e.check(xre,m,w)(C)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(C))}function d(C){return C===null||or(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(C)):zi(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ls(e,h,"whitespace")(C)):C===96&&C===a?n(C):(e.consume(C),d)}function h(C){return C===null||or(C)?f(C):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(C))}function p(C){return C===null||or(C)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(C)):C===96&&C===a?n(C):(e.consume(C),p)}function m(C){return e.attempt(i,w,g)(C)}function g(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),b}function b(C){return s>0&&zi(C)?Ls(e,y,"linePrefix",s+1)(C):y(C)}function y(C){return C===null||or(C)?e.check(xre,m,w)(C):(e.enter("codeFlowValue"),x(C))}function x(C){return C===null||or(C)?(e.exit("codeFlowValue"),y(C)):(e.consume(C),x)}function w(C){return e.exit("codeFenced"),t(C)}function S(C,R,I){let O=0;return M;function M(z){return C.enter("lineEnding"),C.consume(z),C.exit("lineEnding"),L}function L(z){return C.enter("codeFencedFence"),zi(z)?Ls(C,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):H(z)}function H(z){return z===a?(C.enter("codeFencedFenceSequence"),D(z)):I(z)}function D(z){return z===a?(O++,C.consume(z),D):O>=o?(C.exit("codeFencedFenceSequence"),zi(z)?Ls(C,B,"whitespace")(z):B(z)):I(z)}function B(z){return z===null||or(z)?(C.exit("codeFencedFence"),R(z)):I(z)}}}function NHe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const OF={name:"codeIndented",tokenize:OHe},DHe={tokenize:MHe,partial:!0};function OHe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Ls(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):or(l)?e.attempt(DHe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||or(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function MHe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):or(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Ls(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):or(o)?i(o):n(o)}}const LHe={name:"codeText",tokenize:BHe,resolve:FHe,previous:$He};function FHe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function $He(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function BHe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):or(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||or(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class jHe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&YC(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),YC(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),YC(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);YC(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);YC(this.left,n.reverse())}}}function YC(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function tve(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new jHe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,UHe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return f1(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function UHe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const b=a.slice(g[d],g[d+1]),y=s.pop();u.push([y,y+b.length-1]),e.splice(y,2,b)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const zHe={tokenize:qHe,resolve:HHe},VHe={tokenize:WHe,partial:!0};function HHe(e){return tve(e),e}function qHe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):or(a)?e.check(VHe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function WHe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Ls(e,s,"linePrefix")}function s(o){if(o===null||or(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function nve(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(b){return b===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(b),e.exit(s),d):b===null||b===32||b===41||_U(b)?n(b):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(b))}function d(b){return b===62?(e.enter(s),e.consume(b),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(b))}function h(b){return b===62?(e.exit("chunkString"),e.exit(a),d(b)):b===null||b===60||or(b)?n(b):(e.consume(b),b===92?p:h)}function p(b){return b===60||b===62||b===92?(e.consume(b),h):h(b)}function m(b){return!c&&(b===null||b===41||td(b))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(b)):c<l&&b===40?(e.consume(b),c++,m):b===41?(e.consume(b),c--,m):b===null||b===32||b===40||_U(b)?n(b):(e.consume(b),b===92?g:m)}function g(b){return b===40||b===41||b===92?(e.consume(b),m):m(b)}}function rve(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):or(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||or(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!zi(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function ive(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):or(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Ls(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||or(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function fk(e,t){let n;return r;function r(i){return or(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):zi(i)?Ls(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const GHe={name:"definition",tokenize:KHe},YHe={tokenize:XHe,partial:!0};function KHe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return rve.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=UE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return td(h)?fk(e,l)(h):l(h)}function l(h){return nve(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(YHe,f,f)(h)}function f(h){return zi(h)?Ls(e,d,"whitespace")(h):d(h)}function d(h){return h===null||or(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function XHe(e,t,n){return r;function r(a){return td(a)?fk(e,i)(a):n(a)}function i(a){return ive(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return zi(a)?Ls(e,o,"whitespace")(a):o(a)}function o(a){return a===null||or(a)?t(a):n(a)}}const QHe={name:"hardBreakEscape",tokenize:JHe};function JHe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return or(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const ZHe={name:"headingAtx",tokenize:tqe,resolve:eqe};function eqe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},f1(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function tqe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||td(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||or(c)?(e.exit("atxHeading"),t(c)):zi(c)?Ls(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||td(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const nqe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],wre=["pre","script","style","textarea"],rqe={name:"htmlFlow",tokenize:aqe,resolveTo:oqe,concrete:!0},iqe={tokenize:lqe,partial:!0},sqe={tokenize:uqe,partial:!0};function oqe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function aqe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(W){return c(W)}function c(W){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(W),f}function f(W){return W===33?(e.consume(W),d):W===47?(e.consume(W),s=!0,m):W===63?(e.consume(W),i=3,r.interrupt?t:X):Im(W)?(e.consume(W),o=String.fromCharCode(W),g):n(W)}function d(W){return W===45?(e.consume(W),i=2,h):W===91?(e.consume(W),i=5,a=0,p):Im(W)?(e.consume(W),i=4,r.interrupt?t:X):n(W)}function h(W){return W===45?(e.consume(W),r.interrupt?t:X):n(W)}function p(W){const ee="CDATA[";return W===ee.charCodeAt(a++)?(e.consume(W),a===ee.length?r.interrupt?t:H:p):n(W)}function m(W){return Im(W)?(e.consume(W),o=String.fromCharCode(W),g):n(W)}function g(W){if(W===null||W===47||W===62||td(W)){const ee=W===47,oe=o.toLowerCase();return!ee&&!s&&wre.includes(oe)?(i=1,r.interrupt?t(W):H(W)):nqe.includes(o.toLowerCase())?(i=6,ee?(e.consume(W),b):r.interrupt?t(W):H(W)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(W):s?y(W):x(W))}return W===45||Gd(W)?(e.consume(W),o+=String.fromCharCode(W),g):n(W)}function b(W){return W===62?(e.consume(W),r.interrupt?t:H):n(W)}function y(W){return zi(W)?(e.consume(W),y):M(W)}function x(W){return W===47?(e.consume(W),M):W===58||W===95||Im(W)?(e.consume(W),w):zi(W)?(e.consume(W),x):M(W)}function w(W){return W===45||W===46||W===58||W===95||Gd(W)?(e.consume(W),w):S(W)}function S(W){return W===61?(e.consume(W),C):zi(W)?(e.consume(W),S):x(W)}function C(W){return W===null||W===60||W===61||W===62||W===96?n(W):W===34||W===39?(e.consume(W),u=W,R):zi(W)?(e.consume(W),C):I(W)}function R(W){return W===u?(e.consume(W),u=null,O):W===null||or(W)?n(W):(e.consume(W),R)}function I(W){return W===null||W===34||W===39||W===47||W===60||W===61||W===62||W===96||td(W)?S(W):(e.consume(W),I)}function O(W){return W===47||W===62||zi(W)?x(W):n(W)}function M(W){return W===62?(e.consume(W),L):n(W)}function L(W){return W===null||or(W)?H(W):zi(W)?(e.consume(W),L):n(W)}function H(W){return W===45&&i===2?(e.consume(W),G):W===60&&i===1?(e.consume(W),Z):W===62&&i===4?(e.consume(W),q):W===63&&i===3?(e.consume(W),X):W===93&&i===5?(e.consume(W),ue):or(W)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(iqe,te,D)(W)):W===null||or(W)?(e.exit("htmlFlowData"),D(W)):(e.consume(W),H)}function D(W){return e.check(sqe,B,te)(W)}function B(W){return e.enter("lineEnding"),e.consume(W),e.exit("lineEnding"),z}function z(W){return W===null||or(W)?D(W):(e.enter("htmlFlowData"),H(W))}function G(W){return W===45?(e.consume(W),X):H(W)}function Z(W){return W===47?(e.consume(W),o="",ne):H(W)}function ne(W){if(W===62){const ee=o.toLowerCase();return wre.includes(ee)?(e.consume(W),q):H(W)}return Im(W)&&o.length<8?(e.consume(W),o+=String.fromCharCode(W),ne):H(W)}function ue(W){return W===93?(e.consume(W),X):H(W)}function X(W){return W===62?(e.consume(W),q):W===45&&i===2?(e.consume(W),X):H(W)}function q(W){return W===null||or(W)?(e.exit("htmlFlowData"),te(W)):(e.consume(W),q)}function te(W){return e.exit("htmlFlow"),t(W)}}function uqe(e,t,n){const r=this;return i;function i(o){return or(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function lqe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(v9,t,n)}}const cqe={name:"htmlText",tokenize:fqe};function fqe(e,t,n){const r=this;let i,s,o;return a;function a(X){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(X),u}function u(X){return X===33?(e.consume(X),l):X===47?(e.consume(X),S):X===63?(e.consume(X),x):Im(X)?(e.consume(X),I):n(X)}function l(X){return X===45?(e.consume(X),c):X===91?(e.consume(X),s=0,p):Im(X)?(e.consume(X),y):n(X)}function c(X){return X===45?(e.consume(X),h):n(X)}function f(X){return X===null?n(X):X===45?(e.consume(X),d):or(X)?(o=f,Z(X)):(e.consume(X),f)}function d(X){return X===45?(e.consume(X),h):f(X)}function h(X){return X===62?G(X):X===45?d(X):f(X)}function p(X){const q="CDATA[";return X===q.charCodeAt(s++)?(e.consume(X),s===q.length?m:p):n(X)}function m(X){return X===null?n(X):X===93?(e.consume(X),g):or(X)?(o=m,Z(X)):(e.consume(X),m)}function g(X){return X===93?(e.consume(X),b):m(X)}function b(X){return X===62?G(X):X===93?(e.consume(X),b):m(X)}function y(X){return X===null||X===62?G(X):or(X)?(o=y,Z(X)):(e.consume(X),y)}function x(X){return X===null?n(X):X===63?(e.consume(X),w):or(X)?(o=x,Z(X)):(e.consume(X),x)}function w(X){return X===62?G(X):x(X)}function S(X){return Im(X)?(e.consume(X),C):n(X)}function C(X){return X===45||Gd(X)?(e.consume(X),C):R(X)}function R(X){return or(X)?(o=R,Z(X)):zi(X)?(e.consume(X),R):G(X)}function I(X){return X===45||Gd(X)?(e.consume(X),I):X===47||X===62||td(X)?O(X):n(X)}function O(X){return X===47?(e.consume(X),G):X===58||X===95||Im(X)?(e.consume(X),M):or(X)?(o=O,Z(X)):zi(X)?(e.consume(X),O):G(X)}function M(X){return X===45||X===46||X===58||X===95||Gd(X)?(e.consume(X),M):L(X)}function L(X){return X===61?(e.consume(X),H):or(X)?(o=L,Z(X)):zi(X)?(e.consume(X),L):O(X)}function H(X){return X===null||X===60||X===61||X===62||X===96?n(X):X===34||X===39?(e.consume(X),i=X,D):or(X)?(o=H,Z(X)):zi(X)?(e.consume(X),H):(e.consume(X),B)}function D(X){return X===i?(e.consume(X),i=void 0,z):X===null?n(X):or(X)?(o=D,Z(X)):(e.consume(X),D)}function B(X){return X===null||X===34||X===39||X===60||X===61||X===96?n(X):X===47||X===62||td(X)?O(X):(e.consume(X),B)}function z(X){return X===47||X===62||td(X)?O(X):n(X)}function G(X){return X===62?(e.consume(X),e.exit("htmlTextData"),e.exit("htmlText"),t):n(X)}function Z(X){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(X),e.exit("lineEnding"),ne}function ne(X){return zi(X)?Ls(e,ue,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(X):ue(X)}function ue(X){return e.enter("htmlTextData"),o(X)}}const yG={name:"labelEnd",tokenize:yqe,resolveTo:gqe,resolveAll:mqe},dqe={tokenize:vqe},hqe={tokenize:bqe},pqe={tokenize:xqe};function mqe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function gqe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Vh(a,e.slice(s+1,s+r+3)),a=Vh(a,[["enter",c,t]]),a=Vh(a,gG(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Vh(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Vh(a,e.slice(o+1)),a=Vh(a,[["exit",u,t]]),f1(e,s,e.length,a),e}function yqe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(UE(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(dqe,c,o?c:f)(d):d===91?e.attempt(hqe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(pqe,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function vqe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return td(f)?fk(e,s)(f):s(f)}function s(f){return f===41?c(f):nve(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return td(f)?fk(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?ive(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return td(f)?fk(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function bqe(e,t,n){const r=this;return i;function i(a){return rve.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(UE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function xqe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const _qe={name:"labelStartImage",tokenize:wqe,resolveAll:yG.resolveAll};function wqe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Eqe={name:"labelStartLink",tokenize:Sqe,resolveAll:yG.resolveAll};function Sqe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const MF={name:"lineEnding",tokenize:Tqe};function Tqe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Ls(e,t,"linePrefix")}}const SP={name:"thematicBreak",tokenize:Cqe};function Cqe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||or(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),zi(l)?Ls(e,a,"whitespace")(l):a(l))}}const zf={name:"list",tokenize:Rqe,continuation:{tokenize:Iqe},exit:Nqe},Aqe={tokenize:Dqe,partial:!0},kqe={tokenize:Pqe,partial:!0};function Rqe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:wU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(SP,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return wU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(v9,r.interrupt?n:c,e.attempt(Aqe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return zi(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function Iqe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(v9,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ls(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!zi(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(kqe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ls(e,e.attempt(zf,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Pqe(e,t,n){const r=this;return Ls(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function Nqe(e){e.exit(this.containerState.type)}function Dqe(e,t,n){const r=this;return Ls(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!zi(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Ere={name:"setextUnderline",tokenize:Mqe,resolveTo:Oqe};function Oqe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function Mqe(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),zi(l)?Ls(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||or(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const Lqe={tokenize:Fqe};function Fqe(e){const t=this,n=e.attempt(v9,r,e.attempt(this.parser.constructs.flowInitial,i,Ls(e,e.attempt(this.parser.constructs.flow,i,e.attempt(zHe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const $qe={resolveAll:ove()},Bqe=sve("string"),jqe=sve("text");function sve(e){return{tokenize:t,resolveAll:ove(e==="text"?Uqe:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function ove(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Uqe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function zqe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:y,enter:x,exit:w,attempt:R(S),check:R(C),interrupt:R(C,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(L){return o=Vh(o,L),g(),o[o.length-1]!==null?[]:(I(t,0),l.events=gG(s,l.events,l),l.events)}function d(L,H){return Hqe(h(L),H)}function h(L){return Vqe(o,L)}function p(){const{line:L,column:H,offset:D,_index:B,_bufferIndex:z}=r;return{line:L,column:H,offset:D,_index:B,_bufferIndex:z}}function m(L){i[L.line]=L.column,M()}function g(){let L;for(;r._index<o.length;){const H=o[r._index];if(typeof H=="string")for(L=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===L&&r._bufferIndex<H.length;)b(H.charCodeAt(r._bufferIndex));else b(H)}}function b(L){c=c(L)}function y(L){or(L)?(r.line++,r.column=1,r.offset+=L===-3?2:1,M()):L!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=L}function x(L,H){const D=H||{};return D.type=L,D.start=p(),l.events.push(["enter",D,l]),a.push(D),D}function w(L){const H=a.pop();return H.end=p(),l.events.push(["exit",H,l]),H}function S(L,H){I(L,H.from)}function C(L,H){H.restore()}function R(L,H){return D;function D(B,z,G){let Z,ne,ue,X;return Array.isArray(B)?te(B):"tokenize"in B?te([B]):q(B);function q(pe){return ce;function ce(he){const Ee=he!==null&&pe[he],Ae=he!==null&&pe.null,ge=[...Array.isArray(Ee)?Ee:Ee?[Ee]:[],...Array.isArray(Ae)?Ae:Ae?[Ae]:[]];return te(ge)(he)}}function te(pe){return Z=pe,ne=0,pe.length===0?G:W(pe[ne])}function W(pe){return ce;function ce(he){return X=O(),ue=pe,pe.partial||(l.currentConstruct=pe),pe.name&&l.parser.constructs.disable.null.includes(pe.name)?oe():pe.tokenize.call(H?Object.assign(Object.create(l),H):l,u,ee,oe)(he)}}function ee(pe){return L(ue,X),z}function oe(pe){return X.restore(),++ne<Z.length?W(Z[ne]):G}}}function I(L,H){L.resolveAll&&!s.includes(L)&&s.push(L),L.resolve&&f1(l.events,H,l.events.length-H,L.resolve(l.events.slice(H),l)),L.resolveTo&&(l.events=L.resolveTo(l.events,l))}function O(){const L=p(),H=l.previous,D=l.currentConstruct,B=l.events.length,z=Array.from(a);return{restore:G,from:B};function G(){r=L,l.previous=H,l.currentConstruct=D,l.events.length=B,a=z,M()}}function M(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Vqe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function Hqe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const qqe={42:zf,43:zf,45:zf,48:zf,49:zf,50:zf,51:zf,52:zf,53:zf,54:zf,55:zf,56:zf,57:zf,62:J1e},Wqe={91:GHe},Gqe={[-2]:OF,[-1]:OF,32:OF},Yqe={35:ZHe,42:SP,45:[Ere,SP],60:rqe,61:Ere,95:SP,96:_re,126:_re},Kqe={38:eve,92:Z1e},Xqe={[-5]:MF,[-4]:MF,[-3]:MF,33:_qe,38:eve,42:EU,60:[EHe,cqe],91:Eqe,92:[QHe,Z1e],93:yG,95:EU,96:LHe},Qqe={null:[EU,$qe]},Jqe={null:[42,95]},Zqe={null:[]},eWe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Jqe,contentInitial:Wqe,disable:Zqe,document:qqe,flow:Yqe,flowInitial:Gqe,insideSpan:Qqe,string:Kqe,text:Xqe},Symbol.toStringTag,{value:"Module"}));function tWe(e){const n=uHe([eWe,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(gHe),document:i(vHe),flow:i(Lqe),string:i(Bqe),text:i(jqe)};return r;function i(s){return o;function o(a){return zqe(r,s,a)}}}function nWe(e){for(;!tve(e););return e}const Sre=/[\0\t\n\r]/g;function rWe(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Sre.lastIndex=f,l=Sre.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const iWe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function sWe(e){return e.replace(iWe,oWe)}function oWe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Q1e(n.slice(s?2:1),s?16:10)}return mG(n)||e}const ave={}.hasOwnProperty;function aWe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),uWe(n)(nWe(tWe(n).document().write(rWe()(e,t,!0))))}function uWe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(yt),autolinkProtocol:O,autolinkEmail:O,atxHeading:s(Ye),blockQuote:s(Ae),characterEscape:O,characterReference:O,codeFenced:s(ge),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ge,o),codeText:s(me,o),codeTextData:O,data:O,codeFlowValue:O,definition:s(Oe),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Me),hardBreakEscape:s(lt),hardBreakTrailing:s(lt),htmlFlow:s(We,o),htmlFlowData:O,htmlText:s(We,o),htmlTextData:O,image:s(nt),label:o,link:s(yt),listItem:s(It),listItemValue:d,listOrdered:s(_t,f),listUnordered:s(_t),paragraph:s(Et),reference:W,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Ye),strong:s(Ke),thematicBreak:s(sn)},exit:{atxHeading:u(),atxHeadingSequence:S,autolink:u(),autolinkEmail:Ee,autolinkProtocol:he,blockQuote:u(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:oe,characterReferenceMarkerNumeric:oe,characterReferenceValue:pe,characterReference:ce,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:M,codeIndented:u(b),codeText:u(z),codeTextData:M,data:M,definition:u(),definitionDestinationString:w,definitionLabelString:y,definitionTitleString:x,emphasis:u(),hardBreakEscape:u(H),hardBreakTrailing:u(H),htmlFlow:u(D),htmlFlowData:M,htmlText:u(B),htmlTextData:M,image:u(Z),label:ue,labelText:ne,lineEnding:L,link:u(G),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:ee,resourceDestinationString:X,resourceTitleString:q,resource:te,setextHeading:u(I),setextHeadingLineSequence:R,setextHeadingText:C,strong:u(),thematicBreak:u()}};uve(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(Fe){let Qe={type:"root",children:[]};const wt={stack:[Qe],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},Vt=[];let Wt=-1;for(;++Wt<Fe.length;)if(Fe[Wt][1].type==="listOrdered"||Fe[Wt][1].type==="listUnordered")if(Fe[Wt][0]==="enter")Vt.push(Wt);else{const bn=Vt.pop();Wt=i(Fe,bn,Wt)}for(Wt=-1;++Wt<Fe.length;){const bn=t[Fe[Wt][0]];ave.call(bn,Fe[Wt][1].type)&&bn[Fe[Wt][1].type].call(Object.assign({sliceSerialize:Fe[Wt][2].sliceSerialize},wt),Fe[Wt][1])}if(wt.tokenStack.length>0){const bn=wt.tokenStack[wt.tokenStack.length-1];(bn[1]||Tre).call(wt,void 0,bn[0])}for(Qe.position={start:hv(Fe.length>0?Fe[0][1].start:{line:1,column:1,offset:0}),end:hv(Fe.length>0?Fe[Fe.length-2][1].end:{line:1,column:1,offset:0})},Wt=-1;++Wt<t.transforms.length;)Qe=t.transforms[Wt](Qe)||Qe;return Qe}function i(Fe,Qe,wt){let Vt=Qe-1,Wt=-1,bn=!1,Dn,Zn,wr,Hn;for(;++Vt<=wt;){const nr=Fe[Vt];switch(nr[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{nr[0]==="enter"?Wt++:Wt--,Hn=void 0;break}case"lineEndingBlank":{nr[0]==="enter"&&(Dn&&!Hn&&!Wt&&!wr&&(wr=Vt),Hn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Hn=void 0}if(!Wt&&nr[0]==="enter"&&nr[1].type==="listItemPrefix"||Wt===-1&&nr[0]==="exit"&&(nr[1].type==="listUnordered"||nr[1].type==="listOrdered")){if(Dn){let Ei=Vt;for(Zn=void 0;Ei--;){const Dr=Fe[Ei];if(Dr[1].type==="lineEnding"||Dr[1].type==="lineEndingBlank"){if(Dr[0]==="exit")continue;Zn&&(Fe[Zn][1].type="lineEndingBlank",bn=!0),Dr[1].type="lineEnding",Zn=Ei}else if(!(Dr[1].type==="linePrefix"||Dr[1].type==="blockQuotePrefix"||Dr[1].type==="blockQuotePrefixWhitespace"||Dr[1].type==="blockQuoteMarker"||Dr[1].type==="listItemIndent"))break}wr&&(!Zn||wr<Zn)&&(Dn._spread=!0),Dn.end=Object.assign({},Zn?Fe[Zn][1].start:nr[1].end),Fe.splice(Zn||Vt,0,["exit",Dn,nr[2]]),Vt++,wt++}if(nr[1].type==="listItemPrefix"){const Ei={type:"listItem",_spread:!1,start:Object.assign({},nr[1].start),end:void 0};Dn=Ei,Fe.splice(Vt,0,["enter",Ei,nr[2]]),Vt++,wt++,wr=void 0,Hn=!0}}}return Fe[Qe][1]._spread=bn,wt}function s(Fe,Qe){return wt;function wt(Vt){a.call(this,Fe(Vt),Vt),Qe&&Qe.call(this,Vt)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Fe,Qe,wt){this.stack[this.stack.length-1].children.push(Fe),this.stack.push(Fe),this.tokenStack.push([Qe,wt]),Fe.position={start:hv(Qe.start),end:void 0}}function u(Fe){return Qe;function Qe(wt){Fe&&Fe.call(this,wt),l.call(this,wt)}}function l(Fe,Qe){const wt=this.stack.pop(),Vt=this.tokenStack.pop();if(Vt)Vt[0].type!==Fe.type&&(Qe?Qe.call(this,Fe,Vt[0]):(Vt[1]||Tre).call(this,Fe,Vt[0]));else throw new Error("Cannot close `"+Fe.type+"` ("+ck({start:Fe.start,end:Fe.end})+"): its not open");wt.position.end=hv(Fe.end)}function c(){return oHe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(Fe){if(this.data.expectingFirstListItemValue){const Qe=this.stack[this.stack.length-2];Qe.start=Number.parseInt(this.sliceSerialize(Fe),10),this.data.expectingFirstListItemValue=void 0}}function h(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.lang=Fe}function p(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.meta=Fe}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=Fe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=Fe.replace(/(\r?\n|\r)$/g,"")}function y(Fe){const Qe=this.resume(),wt=this.stack[this.stack.length-1];wt.label=Qe,wt.identifier=UE(this.sliceSerialize(Fe)).toLowerCase()}function x(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.title=Fe}function w(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.url=Fe}function S(Fe){const Qe=this.stack[this.stack.length-1];if(!Qe.depth){const wt=this.sliceSerialize(Fe).length;Qe.depth=wt}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function R(Fe){const Qe=this.stack[this.stack.length-1];Qe.depth=this.sliceSerialize(Fe).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function O(Fe){const wt=this.stack[this.stack.length-1].children;let Vt=wt[wt.length-1];(!Vt||Vt.type!=="text")&&(Vt=Lt(),Vt.position={start:hv(Fe.start),end:void 0},wt.push(Vt)),this.stack.push(Vt)}function M(Fe){const Qe=this.stack.pop();Qe.value+=this.sliceSerialize(Fe),Qe.position.end=hv(Fe.end)}function L(Fe){const Qe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const wt=Qe.children[Qe.children.length-1];wt.position.end=hv(Fe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Qe.type)&&(O.call(this,Fe),M.call(this,Fe))}function H(){this.data.atHardBreak=!0}function D(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=Fe}function B(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=Fe}function z(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=Fe}function G(){const Fe=this.stack[this.stack.length-1];if(this.data.inReference){const Qe=this.data.referenceType||"shortcut";Fe.type+="Reference",Fe.referenceType=Qe,delete Fe.url,delete Fe.title}else delete Fe.identifier,delete Fe.label;this.data.referenceType=void 0}function Z(){const Fe=this.stack[this.stack.length-1];if(this.data.inReference){const Qe=this.data.referenceType||"shortcut";Fe.type+="Reference",Fe.referenceType=Qe,delete Fe.url,delete Fe.title}else delete Fe.identifier,delete Fe.label;this.data.referenceType=void 0}function ne(Fe){const Qe=this.sliceSerialize(Fe),wt=this.stack[this.stack.length-2];wt.label=sWe(Qe),wt.identifier=UE(Qe).toLowerCase()}function ue(){const Fe=this.stack[this.stack.length-1],Qe=this.resume(),wt=this.stack[this.stack.length-1];if(this.data.inReference=!0,wt.type==="link"){const Vt=Fe.children;wt.children=Vt}else wt.alt=Qe}function X(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.url=Fe}function q(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.title=Fe}function te(){this.data.inReference=void 0}function W(){this.data.referenceType="collapsed"}function ee(Fe){const Qe=this.resume(),wt=this.stack[this.stack.length-1];wt.label=Qe,wt.identifier=UE(this.sliceSerialize(Fe)).toLowerCase(),this.data.referenceType="full"}function oe(Fe){this.data.characterReferenceType=Fe.type}function pe(Fe){const Qe=this.sliceSerialize(Fe),wt=this.data.characterReferenceType;let Vt;wt?(Vt=Q1e(Qe,wt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Vt=mG(Qe);const Wt=this.stack[this.stack.length-1];Wt.value+=Vt}function ce(Fe){const Qe=this.stack.pop();Qe.position.end=hv(Fe.end)}function he(Fe){M.call(this,Fe);const Qe=this.stack[this.stack.length-1];Qe.url=this.sliceSerialize(Fe)}function Ee(Fe){M.call(this,Fe);const Qe=this.stack[this.stack.length-1];Qe.url="mailto:"+this.sliceSerialize(Fe)}function Ae(){return{type:"blockquote",children:[]}}function ge(){return{type:"code",lang:null,meta:null,value:""}}function me(){return{type:"inlineCode",value:""}}function Oe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Me(){return{type:"emphasis",children:[]}}function Ye(){return{type:"heading",depth:0,children:[]}}function lt(){return{type:"break"}}function We(){return{type:"html",value:""}}function nt(){return{type:"image",title:null,url:"",alt:null}}function yt(){return{type:"link",title:null,url:"",children:[]}}function _t(Fe){return{type:"list",ordered:Fe.type==="listOrdered",start:null,spread:Fe._spread,children:[]}}function It(Fe){return{type:"listItem",spread:Fe._spread,checked:null,children:[]}}function Et(){return{type:"paragraph",children:[]}}function Ke(){return{type:"strong",children:[]}}function Lt(){return{type:"text",value:""}}function sn(){return{type:"thematicBreak"}}}function hv(e){return{line:e.line,column:e.column,offset:e.offset}}function uve(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?uve(e,r):lWe(e,r)}}function lWe(e,t){let n;for(n in t)if(ave.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Tre(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+ck({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+ck({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+ck({start:t.start,end:t.end})+") is still open")}function cWe(e){const t=this;t.parser=n;function n(r){return aWe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function fWe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function dWe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function hWe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function pWe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function mWe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function gWe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=RT(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function yWe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function vWe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function lve(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function bWe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return lve(e,t);const i={src:RT(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function xWe(e,t){const n={src:RT(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function _We(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function wWe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return lve(e,t);const i={href:RT(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function EWe(e,t){const n={href:RT(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function SWe(e,t,n){const r=e.all(t),i=n?TWe(n):cve(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function TWe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=cve(n[r])}return t}function cve(e){const t=e.spread;return t??e.children.length>1}function CWe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function AWe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function kWe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function RWe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function IWe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=_g(t.children[1]),u=y9(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function PWe(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function NWe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Cre=9,Are=32;function DWe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(kre(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(kre(t.slice(i),i>0,!1)),s.join("")}function kre(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Cre||s===Are;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Cre||s===Are;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function OWe(e,t){const n={type:"text",value:DWe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function MWe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const LWe={blockquote:fWe,break:dWe,code:hWe,delete:pWe,emphasis:mWe,footnoteReference:gWe,heading:yWe,html:vWe,imageReference:bWe,image:xWe,inlineCode:_We,linkReference:wWe,link:EWe,listItem:SWe,list:CWe,paragraph:AWe,root:kWe,strong:RWe,table:IWe,tableCell:NWe,tableRow:PWe,text:OWe,thematicBreak:MWe,toml:f6,yaml:f6,definition:f6,footnoteDefinition:f6};function f6(){}const fve=-1,b9=0,f8=1,d8=2,vG=3,bG=4,xG=5,_G=6,dve=7,hve=8,Rre=typeof self=="object"?self:globalThis,FWe=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case b9:case fve:return n(o,i);case f8:{const a=n([],i);for(const u of o)a.push(r(u));return a}case d8:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case vG:return n(new Date(o),i);case bG:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case xG:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case _G:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case dve:{const{name:a,message:u}=o;return n(new Rre[a](u),i)}case hve:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Rre[s](o),i)};return r},Ire=e=>FWe(new Map,e)(0),q2="",{toString:$We}={},{keys:BWe}=Object,KC=e=>{const t=typeof e;if(t!=="object"||!e)return[b9,t];const n=$We.call(e).slice(8,-1);switch(n){case"Array":return[f8,q2];case"Object":return[d8,q2];case"Date":return[vG,q2];case"RegExp":return[bG,q2];case"Map":return[xG,q2];case"Set":return[_G,q2]}return n.includes("Array")?[f8,n]:n.includes("Error")?[dve,n]:[d8,n]},d6=([e,t])=>e===b9&&(t==="function"||t==="symbol"),jWe=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=KC(o);switch(a){case b9:{let c=o;switch(u){case"bigint":a=hve,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([fve],o)}return i([a,c],o)}case f8:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case d8:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of BWe(o))(e||!d6(KC(o[d])))&&c.push([s(d),s(o[d])]);return f}case vG:return i([a,o.toISOString()],o);case bG:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case xG:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(d6(KC(d))||d6(KC(h))))&&c.push([s(d),s(h)]);return f}case _G:{const c=[],f=i([a,c],o);for(const d of o)(e||!d6(KC(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Pre=(e,{json:t,lossy:n}={})=>{const r=[];return jWe(!(t||n),!!t,new Map,r)(e),r},mS=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Ire(Pre(e,t)):structuredClone(e):(e,t)=>Ire(Pre(e,t));function UWe(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function zWe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function VWe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||UWe,r=e.options.footnoteBackLabel||zWe,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=RT(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let y=typeof n=="string"?n:n(u,h);typeof y=="string"&&(y={type:"text",value:y}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(y)?y:[y]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const y=g.children[g.children.length-1];y&&y.type==="text"?y.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const b={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,b),a.push(b)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...mS(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const pve=function(e){if(e==null)return GWe;if(typeof e=="function")return x9(e);if(typeof e=="object")return Array.isArray(e)?HWe(e):qWe(e);if(typeof e=="string")return WWe(e);throw new Error("Expected function, string, or object as test")};function HWe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=pve(e[n]);return x9(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function qWe(e){const t=e;return x9(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function WWe(e){return x9(t);function t(n){return n&&n.type===e}}function x9(e){return t;function t(n,r,i){return!!(YWe(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function GWe(){return!0}function YWe(e){return e!==null&&typeof e=="object"&&"type"in e}const mve=[],KWe=!0,Nre=!1,XWe="skip";function QWe(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=pve(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=mve,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=JWe(n(u,c)),h[0]===Nre))return h;if("children"in u&&u.children){const b=u;if(b.children&&h[0]!==XWe)for(m=(r?b.children.length:-1)+o,g=c.concat(b);m>-1&&m<b.children.length;){const y=b.children[m];if(p=a(y,m,g)(),p[0]===Nre)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function JWe(e){return Array.isArray(e)?e:typeof e=="number"?[KWe,e]:e==null?mve:[e]}function wG(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),QWe(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const SU={}.hasOwnProperty,ZWe={};function eGe(e,t){const n=t||ZWe,r=new Map,i=new Map,s=new Map,o={...LWe,...n.handlers},a={all:l,applyData:nGe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:tGe,wrap:iGe};return wG(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(SU.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,b=mS(g);return b.children=a.all(c),b}return mS(c)}return(a.options.unknownHandler||rGe)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Dre(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=Dre(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function tGe(e,t){e.position&&(t.position=LVe(e))}function nGe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,mS(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function rGe(e,t){const n=t.data||{},r="value"in t&&!(SU.call(n,"hProperties")||SU.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function iGe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Dre(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Ore(e,t){const n=eGe(e,t),r=n.one(e,void 0),i=VWe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function sGe(e,t){return e&&"run"in e?async function(n,r){const i=Ore(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Ore(n,{file:r,...t||e})}}function Mre(e){if(e)throw e}var LF,Lre;function oGe(){if(Lre)return LF;Lre=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(l){return typeof Array.isArray=="function"?Array.isArray(l):t.call(l)==="[object Array]"},s=function(l){if(!l||t.call(l)!=="[object Object]")return!1;var c=e.call(l,"constructor"),f=l.constructor&&l.constructor.prototype&&e.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!c&&!f)return!1;var d;for(d in l);return typeof d>"u"||e.call(l,d)},o=function(l,c){n&&c.name==="__proto__"?n(l,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):l[c.name]=c.newValue},a=function(l,c){if(c==="__proto__")if(e.call(l,c)){if(r)return r(l,c).value}else return;return l[c]};return LF=function u(){var l,c,f,d,h,p,m=arguments[0],g=1,b=arguments.length,y=!1;for(typeof m=="boolean"&&(y=m,m=arguments[1]||{},g=2),(m==null||typeof m!="object"&&typeof m!="function")&&(m={});g<b;++g)if(l=arguments[g],l!=null)for(c in l)f=a(m,c),d=a(l,c),m!==d&&(y&&d&&(s(d)||(h=i(d)))?(h?(h=!1,p=f&&i(f)?f:[]):p=f&&s(f)?f:{},o(m,{name:c,newValue:u(y,p,d)})):typeof d<"u"&&o(m,{name:c,newValue:d}));return m},LF}var aGe=oGe();const FF=gc(aGe);function TU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function uGe(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?lGe(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function lGe(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Em={basename:cGe,dirname:fGe,extname:dGe,join:hGe,sep:"/"};function cGe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');yR(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function fGe(e){if(yR(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function dGe(e){yR(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function hGe(...e){let t=-1,n;for(;++t<e.length;)yR(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":pGe(n)}function pGe(e){yR(e);const t=e.codePointAt(0)===47;let n=mGe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function mGe(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function yR(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const gGe={cwd:yGe};function yGe(){return"/"}function CU(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function vGe(e){if(typeof e=="string")e=new URL(e);else if(!CU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return bGe(e)}function bGe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const $F=["history","path","basename","stem","extname","dirname"];class gve{constructor(t){let n;t?CU(t)?n={path:t}:typeof t=="string"||xGe(t)?n={value:t}:n=t:n={},this.cwd=gGe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<$F.length;){const s=$F[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)$F.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Em.basename(this.path):void 0}set basename(t){jF(t,"basename"),BF(t,"basename"),this.path=Em.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Em.dirname(this.path):void 0}set dirname(t){Fre(this.basename,"dirname"),this.path=Em.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Em.extname(this.path):void 0}set extname(t){if(BF(t,"extname"),Fre(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Em.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){CU(t)&&(t=vGe(t)),jF(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Em.basename(this.path,this.extname):void 0}set stem(t){jF(t,"stem"),BF(t,"stem"),this.path=Em.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new yc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function BF(e,t){if(e&&e.includes(Em.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Em.sep+"`")}function jF(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Fre(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function xGe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const _Ge=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},wGe={}.hasOwnProperty;class EG extends _Ge{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=uGe()}copy(){const t=new EG;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(FF(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(VF("data",this.frozen),this.namespace[t]=n,this):wGe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(VF("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=h6(t),r=this.parser||this.Parser;return UF("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),UF("process",this.parser||this.Parser),zF("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=h6(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);TGe(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),UF("processSync",this.parser||this.Parser),zF("processSync",this.compiler||this.Compiler),this.process(t,i),Bre("processSync","process",n),r;function i(s,o){n=!0,Mre(s),r=o}}run(t,n,r){$re(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=h6(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),Bre("runSync","run",r),i;function s(o,a){Mre(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=h6(n),i=this.compiler||this.Compiler;return zF("stringify",i),$re(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(VF("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=FF(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];TU(m)&&TU(h)&&(h=FF(!0,m,h)),r[d]=[l,h,...p]}}}}const EGe=new EG().freeze();function UF(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function zF(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function VF(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function $re(e){if(!TU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Bre(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function h6(e){return SGe(e)?e:new gve(e)}function SGe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function TGe(e){return typeof e=="string"||CGe(e)}function CGe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const AGe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",jre=[],Ure={allowDangerousHtml:!0},kGe=/^(https?|ircs?|mailto|xmpp)$/i,RGe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function IGe(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||jre,u=e.remarkPlugins||jre,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Ure}:Ure,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||PGe,h=EGe().use(cWe).use(u).use(sGe,l).use(a),p=new gve;typeof r=="string"&&(p.value=r);for(const y of RGe)Object.hasOwn(e,y.from)&&(""+y.from+(y.to?"use `"+y.to+"` instead":"remove it")+AGe+y.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),wG(g,b),zVe(g,{Fragment:k.Fragment,components:s,ignoreInvalidStyle:!0,jsx:k.jsx,jsxs:k.jsxs,passKeys:!0,passNode:!0});function b(y,x,w){if(y.type==="raw"&&w&&typeof x=="number")return c?w.children.splice(x,1):w.children[x]={type:"text",value:y.value},x;if(y.type==="element"){let S;for(S in DF)if(Object.hasOwn(DF,S)&&Object.hasOwn(y.properties,S)){const C=y.properties[S],R=DF[S];(R===null||R.includes(y.tagName))&&(y.properties[S]=d(String(C||""),S,y))}}if(y.type==="element"){let S=t?!t.includes(y.tagName):o?o.includes(y.tagName):!1;if(!S&&n&&typeof x=="number"&&(S=!n(y,x,w)),S&&w&&typeof x=="number")return f&&y.children?w.children.splice(x,1,...y.children):w.children.splice(x,1),x}}}function PGe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||kGe.test(e.slice(0,t))?e:""}const zre=/[#.]/g;function NGe(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){zre.lastIndex=i;const a=zre.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const DGe=new Set(["button","menu","reset","submit"]),AU={}.hasOwnProperty;function yve(e,t,n){const r=n&&FGe(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=NGe(s,t),l.tagName=l.tagName.toLowerCase(),r&&AU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),OGe(o,l.tagName)){let c;for(c in o)AU.call(o,c)&&MGe(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)kU(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function OGe(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?DGe.has(e.type.toLowerCase()):!("value"in e)}function MGe(e,t,n,r){const i=g9(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=ure(r):i.commaSeparated?o=rre(r):i.commaOrSpaceSeparated?o=ure(rre(r).join(" ")):o=Vre(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?LGe(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=Vre(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function kU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)kU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?kU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Vre(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||Kk(n)===Kk(t)))return!0}return n}function LGe(e){const t=[];let n;for(n in e)AU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function FGe(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const $Ge=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],BGe=yve(gR,"div"),jGe=yve(Wb,"g",$Ge),HF=/\r?\n|\r/g;function UGe(e){const t=String(e),n=[];for(HF.lastIndex=0;HF.test(t);)n.push(HF.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const w_={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},vve={}.hasOwnProperty,zGe=Object.prototype;function VGe(e,t){const n=t;return SG({file:n.file||void 0,location:!1,schema:n.space==="svg"?Wb:gR,verbose:n.verbose||!1},e)}function SG(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},TP(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:bve(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=UGe(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},TP(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},TP(e,r,n),n}default:return n=HGe(e,t),n}}function bve(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=SG(e,t[n]);r.push(i)}return r}function HGe(e,t){const n=e.schema;e.schema=t.namespaceURI===w_.svg?Wb:gR;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;vve.call(zGe,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?jGe:BGe)(t.tagName,i,bve(e,t.childNodes));if(TP(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&TE(u.startTag),c=u&&u.endTag&&TE(u.endTag),f=SG(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function TP(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=qGe(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function qGe(e,t,n){const r=TE(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)vve.call(n.attrs,o)&&(s[g9(e.schema,o).property]=TE(n.attrs[o]));n.startTag;const a=TE(n.startTag),u=n.endTag?TE(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function TE(e){const t=Hre({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Hre({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Hre(e){return e.line&&e.column?e:void 0}const qre={}.hasOwnProperty;function xve(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&qre.call(i,e)){const u=String(i[e]);o=qre.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const WGe={}.hasOwnProperty,_ve=xve("type",{handlers:{root:YGe,element:ZGe,text:QGe,comment:JGe,doctype:XGe}});function GGe(e,t){const r=t.space;return _ve(e,r==="svg"?Wb:gR)}function YGe(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=TG(e.children,n,t),IT(e,n),n}function KGe(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=TG(e.children,n,t),IT(e,n),n}function XGe(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return IT(e,t),t}function QGe(e){const t={nodeName:"#text",value:e.value,parentNode:null};return IT(e,t),t}function JGe(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return IT(e,t),t}function ZGe(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Wb);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&WGe.call(e.properties,s)){const u=eYe(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:w_[o],childNodes:[],parentNode:null};return a.childNodes=TG(e.children,a,r),IT(e,a),e.tagName==="template"&&e.content&&(a.content=KGe(e.content,r)),a}function eYe(e,t,n){const r=g9(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?M1e(n):H1e(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=w_[r.space]}return i}function TG(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=_ve(e[r],n);s.parentNode=t,i.push(s)}return i}function IT(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const tYe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],nYe=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),ao="";var we;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(we=we||(we={}));const Bf={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function wve(e){return e>=55296&&e<=57343}function rYe(e){return e>=56320&&e<=57343}function iYe(e,t){return(e-55296)*1024+9216+t}function Eve(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function Sve(e){return e>=64976&&e<=65007||nYe.has(e)}var ft;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ft=ft||(ft={}));const sYe=65536;class oYe{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=sYe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(rYe(n))return this.pos++,this._addGap(),iYe(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,we.EOF;return this._err(ft.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,we.EOF;const r=this.html.charCodeAt(n);return r===we.CARRIAGE_RETURN?we.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,we.EOF;let t=this.html.charCodeAt(this.pos);return t===we.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,we.LINE_FEED):t===we.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,wve(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===we.LINE_FEED||t===we.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){Eve(t)?this._err(ft.controlCharacterInInputStream):Sve(t)&&this._err(ft.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Ur;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Ur=Ur||(Ur={}));function Tve(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const bv=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),aYe=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var qF;const uYe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),lYe=(qF=String.fromCodePoint)!==null&&qF!==void 0?qF:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function cYe(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=uYe.get(e))!==null&&t!==void 0?t:e}var Nu;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Nu||(Nu={}));const fYe=32;var Lm;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Lm||(Lm={}));function RU(e){return e>=Nu.ZERO&&e<=Nu.NINE}function dYe(e){return e>=Nu.UPPER_A&&e<=Nu.UPPER_F||e>=Nu.LOWER_A&&e<=Nu.LOWER_F}function hYe(e){return e>=Nu.UPPER_A&&e<=Nu.UPPER_Z||e>=Nu.LOWER_A&&e<=Nu.LOWER_Z||RU(e)}function pYe(e){return e===Nu.EQUALS||hYe(e)}var ku;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(ku||(ku={}));var h_;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(h_||(h_={}));class mYe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=ku.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=h_.Strict}startEntity(t){this.decodeMode=t,this.state=ku.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case ku.EntityStart:return t.charCodeAt(n)===Nu.NUM?(this.state=ku.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=ku.NamedEntity,this.stateNamedEntity(t,n));case ku.NumericStart:return this.stateNumericStart(t,n);case ku.NumericDecimal:return this.stateNumericDecimal(t,n);case ku.NumericHex:return this.stateNumericHex(t,n);case ku.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|fYe)===Nu.LOWER_X?(this.state=ku.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=ku.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(RU(i)||dYe(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(RU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Nu.SEMI)this.consumed+=1;else if(this.decodeMode===h_.Strict)return 0;return this.emitCodePoint(cYe(this.result),this.consumed),this.errors&&(t!==Nu.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Lm.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=Ave(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===h_.Attribute&&(s===0||pYe(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Lm.VALUE_LENGTH)>>14,s!==0){if(o===Nu.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==h_.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Lm.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Lm.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case ku.NamedEntity:return this.result!==0&&(this.decodeMode!==h_.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ku.NumericDecimal:return this.emitNumericEntity(0,2);case ku.NumericHex:return this.emitNumericEntity(0,3);case ku.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ku.EntityStart:return 0}}}function Cve(e){let t="";const n=new mYe(e,r=>t+=lYe(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function Ave(e,t,n,r){const i=(t&Lm.BRANCH_LENGTH)>>7,s=t&Lm.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}Cve(bv);Cve(aYe);var bt;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(bt=bt||(bt={}));var Yv;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(Yv=Yv||(Yv={}));var Vd;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Vd=Vd||(Vd={}));var Ze;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ze=Ze||(Ze={}));var K;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(K=K||(K={}));const gYe=new Map([[Ze.A,K.A],[Ze.ADDRESS,K.ADDRESS],[Ze.ANNOTATION_XML,K.ANNOTATION_XML],[Ze.APPLET,K.APPLET],[Ze.AREA,K.AREA],[Ze.ARTICLE,K.ARTICLE],[Ze.ASIDE,K.ASIDE],[Ze.B,K.B],[Ze.BASE,K.BASE],[Ze.BASEFONT,K.BASEFONT],[Ze.BGSOUND,K.BGSOUND],[Ze.BIG,K.BIG],[Ze.BLOCKQUOTE,K.BLOCKQUOTE],[Ze.BODY,K.BODY],[Ze.BR,K.BR],[Ze.BUTTON,K.BUTTON],[Ze.CAPTION,K.CAPTION],[Ze.CENTER,K.CENTER],[Ze.CODE,K.CODE],[Ze.COL,K.COL],[Ze.COLGROUP,K.COLGROUP],[Ze.DD,K.DD],[Ze.DESC,K.DESC],[Ze.DETAILS,K.DETAILS],[Ze.DIALOG,K.DIALOG],[Ze.DIR,K.DIR],[Ze.DIV,K.DIV],[Ze.DL,K.DL],[Ze.DT,K.DT],[Ze.EM,K.EM],[Ze.EMBED,K.EMBED],[Ze.FIELDSET,K.FIELDSET],[Ze.FIGCAPTION,K.FIGCAPTION],[Ze.FIGURE,K.FIGURE],[Ze.FONT,K.FONT],[Ze.FOOTER,K.FOOTER],[Ze.FOREIGN_OBJECT,K.FOREIGN_OBJECT],[Ze.FORM,K.FORM],[Ze.FRAME,K.FRAME],[Ze.FRAMESET,K.FRAMESET],[Ze.H1,K.H1],[Ze.H2,K.H2],[Ze.H3,K.H3],[Ze.H4,K.H4],[Ze.H5,K.H5],[Ze.H6,K.H6],[Ze.HEAD,K.HEAD],[Ze.HEADER,K.HEADER],[Ze.HGROUP,K.HGROUP],[Ze.HR,K.HR],[Ze.HTML,K.HTML],[Ze.I,K.I],[Ze.IMG,K.IMG],[Ze.IMAGE,K.IMAGE],[Ze.INPUT,K.INPUT],[Ze.IFRAME,K.IFRAME],[Ze.KEYGEN,K.KEYGEN],[Ze.LABEL,K.LABEL],[Ze.LI,K.LI],[Ze.LINK,K.LINK],[Ze.LISTING,K.LISTING],[Ze.MAIN,K.MAIN],[Ze.MALIGNMARK,K.MALIGNMARK],[Ze.MARQUEE,K.MARQUEE],[Ze.MATH,K.MATH],[Ze.MENU,K.MENU],[Ze.META,K.META],[Ze.MGLYPH,K.MGLYPH],[Ze.MI,K.MI],[Ze.MO,K.MO],[Ze.MN,K.MN],[Ze.MS,K.MS],[Ze.MTEXT,K.MTEXT],[Ze.NAV,K.NAV],[Ze.NOBR,K.NOBR],[Ze.NOFRAMES,K.NOFRAMES],[Ze.NOEMBED,K.NOEMBED],[Ze.NOSCRIPT,K.NOSCRIPT],[Ze.OBJECT,K.OBJECT],[Ze.OL,K.OL],[Ze.OPTGROUP,K.OPTGROUP],[Ze.OPTION,K.OPTION],[Ze.P,K.P],[Ze.PARAM,K.PARAM],[Ze.PLAINTEXT,K.PLAINTEXT],[Ze.PRE,K.PRE],[Ze.RB,K.RB],[Ze.RP,K.RP],[Ze.RT,K.RT],[Ze.RTC,K.RTC],[Ze.RUBY,K.RUBY],[Ze.S,K.S],[Ze.SCRIPT,K.SCRIPT],[Ze.SECTION,K.SECTION],[Ze.SELECT,K.SELECT],[Ze.SOURCE,K.SOURCE],[Ze.SMALL,K.SMALL],[Ze.SPAN,K.SPAN],[Ze.STRIKE,K.STRIKE],[Ze.STRONG,K.STRONG],[Ze.STYLE,K.STYLE],[Ze.SUB,K.SUB],[Ze.SUMMARY,K.SUMMARY],[Ze.SUP,K.SUP],[Ze.TABLE,K.TABLE],[Ze.TBODY,K.TBODY],[Ze.TEMPLATE,K.TEMPLATE],[Ze.TEXTAREA,K.TEXTAREA],[Ze.TFOOT,K.TFOOT],[Ze.TD,K.TD],[Ze.TH,K.TH],[Ze.THEAD,K.THEAD],[Ze.TITLE,K.TITLE],[Ze.TR,K.TR],[Ze.TRACK,K.TRACK],[Ze.TT,K.TT],[Ze.U,K.U],[Ze.UL,K.UL],[Ze.SVG,K.SVG],[Ze.VAR,K.VAR],[Ze.WBR,K.WBR],[Ze.XMP,K.XMP]]);function PT(e){var t;return(t=gYe.get(e))!==null&&t!==void 0?t:K.UNKNOWN}const Ht=K,yYe={[bt.HTML]:new Set([Ht.ADDRESS,Ht.APPLET,Ht.AREA,Ht.ARTICLE,Ht.ASIDE,Ht.BASE,Ht.BASEFONT,Ht.BGSOUND,Ht.BLOCKQUOTE,Ht.BODY,Ht.BR,Ht.BUTTON,Ht.CAPTION,Ht.CENTER,Ht.COL,Ht.COLGROUP,Ht.DD,Ht.DETAILS,Ht.DIR,Ht.DIV,Ht.DL,Ht.DT,Ht.EMBED,Ht.FIELDSET,Ht.FIGCAPTION,Ht.FIGURE,Ht.FOOTER,Ht.FORM,Ht.FRAME,Ht.FRAMESET,Ht.H1,Ht.H2,Ht.H3,Ht.H4,Ht.H5,Ht.H6,Ht.HEAD,Ht.HEADER,Ht.HGROUP,Ht.HR,Ht.HTML,Ht.IFRAME,Ht.IMG,Ht.INPUT,Ht.LI,Ht.LINK,Ht.LISTING,Ht.MAIN,Ht.MARQUEE,Ht.MENU,Ht.META,Ht.NAV,Ht.NOEMBED,Ht.NOFRAMES,Ht.NOSCRIPT,Ht.OBJECT,Ht.OL,Ht.P,Ht.PARAM,Ht.PLAINTEXT,Ht.PRE,Ht.SCRIPT,Ht.SECTION,Ht.SELECT,Ht.SOURCE,Ht.STYLE,Ht.SUMMARY,Ht.TABLE,Ht.TBODY,Ht.TD,Ht.TEMPLATE,Ht.TEXTAREA,Ht.TFOOT,Ht.TH,Ht.THEAD,Ht.TITLE,Ht.TR,Ht.TRACK,Ht.UL,Ht.WBR,Ht.XMP]),[bt.MATHML]:new Set([Ht.MI,Ht.MO,Ht.MN,Ht.MS,Ht.MTEXT,Ht.ANNOTATION_XML]),[bt.SVG]:new Set([Ht.TITLE,Ht.FOREIGN_OBJECT,Ht.DESC]),[bt.XLINK]:new Set,[bt.XML]:new Set,[bt.XMLNS]:new Set};function kve(e){return e===Ht.H1||e===Ht.H2||e===Ht.H3||e===Ht.H4||e===Ht.H5||e===Ht.H6}Ze.STYLE,Ze.SCRIPT,Ze.XMP,Ze.IFRAME,Ze.NOEMBED,Ze.NOFRAMES,Ze.PLAINTEXT;const vYe=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var Te;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(Te||(Te={}));const ga={DATA:Te.DATA,RCDATA:Te.RCDATA,RAWTEXT:Te.RAWTEXT,SCRIPT_DATA:Te.SCRIPT_DATA,PLAINTEXT:Te.PLAINTEXT,CDATA_SECTION:Te.CDATA_SECTION};function dk(e){return e>=we.DIGIT_0&&e<=we.DIGIT_9}function w3(e){return e>=we.LATIN_CAPITAL_A&&e<=we.LATIN_CAPITAL_Z}function bYe(e){return e>=we.LATIN_SMALL_A&&e<=we.LATIN_SMALL_Z}function xv(e){return bYe(e)||w3(e)}function IU(e){return xv(e)||dk(e)}function Rve(e){return e>=we.LATIN_CAPITAL_A&&e<=we.LATIN_CAPITAL_F}function Ive(e){return e>=we.LATIN_SMALL_A&&e<=we.LATIN_SMALL_F}function xYe(e){return dk(e)||Rve(e)||Ive(e)}function p6(e){return e+32}function Pve(e){return e===we.SPACE||e===we.LINE_FEED||e===we.TABULATION||e===we.FORM_FEED}function _Ye(e){return e===we.EQUALS_SIGN||IU(e)}function Wre(e){return Pve(e)||e===we.SOLIDUS||e===we.GREATER_THAN_SIGN}class wYe{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Te.DATA,this.returnState=Te.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new oYe(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Ur.START_TAG,tagName:"",tagID:K.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Ur.END_TAG,tagName:"",tagID:K.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Ur.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Ur.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(Tve(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ft.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=PT(t.tagName),t.type===Ur.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(ft.endTagWithAttributes),t.selfClosing&&this._err(ft.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Ur.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Ur.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Ur.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Ur.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=Pve(t)?Ur.WHITESPACE_CHARACTER:t===we.NULL?Ur.NULL_CHARACTER:Ur.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Ur.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=bv[0];s>=0&&(s=Ave(bv,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=bv[s];const a=o&Lm.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==we.SEMICOLON&&this._isCharacterReferenceInAttribute()&&_Ye(this.preprocessor.peek(1))?(n=[we.AMPERSAND],s+=u):(n=u===0?[bv[s]&~Lm.VALUE_LENGTH]:u===1?[bv[++s]]:[bv[++s],bv[++s]],r=0,i=t!==we.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(ft.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===Te.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Te.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Te.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case Te.DATA:{this._stateData(t);break}case Te.RCDATA:{this._stateRcdata(t);break}case Te.RAWTEXT:{this._stateRawtext(t);break}case Te.SCRIPT_DATA:{this._stateScriptData(t);break}case Te.PLAINTEXT:{this._statePlaintext(t);break}case Te.TAG_OPEN:{this._stateTagOpen(t);break}case Te.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case Te.TAG_NAME:{this._stateTagName(t);break}case Te.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case Te.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case Te.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case Te.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case Te.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case Te.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case Te.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case Te.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case Te.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case Te.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case Te.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case Te.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case Te.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case Te.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case Te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case Te.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case Te.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case Te.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case Te.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case Te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case Te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case Te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case Te.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case Te.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case Te.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case Te.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case Te.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case Te.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case Te.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case Te.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case Te.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case Te.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case Te.BOGUS_COMMENT:{this._stateBogusComment(t);break}case Te.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case Te.COMMENT_START:{this._stateCommentStart(t);break}case Te.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case Te.COMMENT:{this._stateComment(t);break}case Te.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case Te.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case Te.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case Te.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case Te.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case Te.COMMENT_END:{this._stateCommentEnd(t);break}case Te.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case Te.DOCTYPE:{this._stateDoctype(t);break}case Te.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case Te.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case Te.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case Te.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case Te.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case Te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case Te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case Te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case Te.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case Te.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case Te.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case Te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case Te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case Te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case Te.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case Te.CDATA_SECTION:{this._stateCdataSection(t);break}case Te.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case Te.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case Te.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case Te.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case Te.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case Te.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case Te.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case Te.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case Te.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case Te.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case we.LESS_THAN_SIGN:{this.state=Te.TAG_OPEN;break}case we.AMPERSAND:{this.returnState=Te.DATA,this.state=Te.CHARACTER_REFERENCE;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitCodePoint(t);break}case we.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case we.AMPERSAND:{this.returnState=Te.RCDATA,this.state=Te.CHARACTER_REFERENCE;break}case we.LESS_THAN_SIGN:{this.state=Te.RCDATA_LESS_THAN_SIGN;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitChars(ao);break}case we.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case we.LESS_THAN_SIGN:{this.state=Te.RAWTEXT_LESS_THAN_SIGN;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitChars(ao);break}case we.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_LESS_THAN_SIGN;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitChars(ao);break}case we.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitChars(ao);break}case we.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(xv(t))this._createStartTagToken(),this.state=Te.TAG_NAME,this._stateTagName(t);else switch(t){case we.EXCLAMATION_MARK:{this.state=Te.MARKUP_DECLARATION_OPEN;break}case we.SOLIDUS:{this.state=Te.END_TAG_OPEN;break}case we.QUESTION_MARK:{this._err(ft.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Te.BOGUS_COMMENT,this._stateBogusComment(t);break}case we.EOF:{this._err(ft.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ft.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Te.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(xv(t))this._createEndTagToken(),this.state=Te.TAG_NAME,this._stateTagName(t);else switch(t){case we.GREATER_THAN_SIGN:{this._err(ft.missingEndTagName),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ft.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Te.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this.state=Te.BEFORE_ATTRIBUTE_NAME;break}case we.SOLIDUS:{this.state=Te.SELF_CLOSING_START_TAG;break}case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentTagToken();break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.tagName+=ao;break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(w3(t)?p6(t):t)}}_stateRcdataLessThanSign(t){t===we.SOLIDUS?this.state=Te.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Te.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){xv(t)?(this.state=Te.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=Te.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Te.BEFORE_ATTRIBUTE_NAME,!1;case we.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Te.SELF_CLOSING_START_TAG,!1;case we.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Te.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Te.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===we.SOLIDUS?this.state=Te.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Te.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){xv(t)?(this.state=Te.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=Te.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Te.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case we.SOLIDUS:{this.state=Te.SCRIPT_DATA_END_TAG_OPEN;break}case we.EXCLAMATION_MARK:{this.state=Te.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=Te.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){xv(t)?(this.state=Te.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=Te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===we.HYPHEN_MINUS?(this.state=Te.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===we.HYPHEN_MINUS?(this.state=Te.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case we.HYPHEN_MINUS:{this.state=Te.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitChars(ao);break}case we.EOF:{this._err(ft.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case we.HYPHEN_MINUS:{this.state=Te.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.state=Te.SCRIPT_DATA_ESCAPED,this._emitChars(ao);break}case we.EOF:{this._err(ft.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Te.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case we.HYPHEN_MINUS:{this._emitChars("-");break}case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case we.GREATER_THAN_SIGN:{this.state=Te.SCRIPT_DATA,this._emitChars(">");break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.state=Te.SCRIPT_DATA_ESCAPED,this._emitChars(ao);break}case we.EOF:{this._err(ft.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Te.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===we.SOLIDUS?this.state=Te.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:xv(t)?(this._emitChars("<"),this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=Te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){xv(t)?(this.state=Te.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=Te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Bf.SCRIPT,!1)&&Wre(this.preprocessor.peek(Bf.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Bf.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case we.HYPHEN_MINUS:{this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitChars(ao);break}case we.EOF:{this._err(ft.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case we.HYPHEN_MINUS:{this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ao);break}case we.EOF:{this._err(ft.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case we.HYPHEN_MINUS:{this._emitChars("-");break}case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case we.GREATER_THAN_SIGN:{this.state=Te.SCRIPT_DATA,this._emitChars(">");break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ao);break}case we.EOF:{this._err(ft.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===we.SOLIDUS?(this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Bf.SCRIPT,!1)&&Wre(this.preprocessor.peek(Bf.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Bf.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Te.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.SOLIDUS:case we.GREATER_THAN_SIGN:case we.EOF:{this.state=Te.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case we.EQUALS_SIGN:{this._err(ft.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Te.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=Te.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:case we.SOLIDUS:case we.GREATER_THAN_SIGN:case we.EOF:{this._leaveAttrName(),this.state=Te.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case we.EQUALS_SIGN:{this._leaveAttrName(),this.state=Te.BEFORE_ATTRIBUTE_VALUE;break}case we.QUOTATION_MARK:case we.APOSTROPHE:case we.LESS_THAN_SIGN:{this._err(ft.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.currentAttr.name+=ao;break}default:this.currentAttr.name+=String.fromCodePoint(w3(t)?p6(t):t)}}_stateAfterAttributeName(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.SOLIDUS:{this.state=Te.SELF_CLOSING_START_TAG;break}case we.EQUALS_SIGN:{this.state=Te.BEFORE_ATTRIBUTE_VALUE;break}case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentTagToken();break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=Te.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.QUOTATION_MARK:{this.state=Te.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case we.APOSTROPHE:{this.state=Te.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case we.GREATER_THAN_SIGN:{this._err(ft.missingAttributeValue),this.state=Te.DATA,this.emitCurrentTagToken();break}default:this.state=Te.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case we.QUOTATION_MARK:{this.state=Te.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case we.AMPERSAND:{this.returnState=Te.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=Te.CHARACTER_REFERENCE;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.currentAttr.value+=ao;break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case we.APOSTROPHE:{this.state=Te.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case we.AMPERSAND:{this.returnState=Te.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=Te.CHARACTER_REFERENCE;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.currentAttr.value+=ao;break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this._leaveAttrValue(),this.state=Te.BEFORE_ATTRIBUTE_NAME;break}case we.AMPERSAND:{this.returnState=Te.ATTRIBUTE_VALUE_UNQUOTED,this.state=Te.CHARACTER_REFERENCE;break}case we.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Te.DATA,this.emitCurrentTagToken();break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.currentAttr.value+=ao;break}case we.QUOTATION_MARK:case we.APOSTROPHE:case we.LESS_THAN_SIGN:case we.EQUALS_SIGN:case we.GRAVE_ACCENT:{this._err(ft.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this._leaveAttrValue(),this.state=Te.BEFORE_ATTRIBUTE_NAME;break}case we.SOLIDUS:{this._leaveAttrValue(),this.state=Te.SELF_CLOSING_START_TAG;break}case we.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Te.DATA,this.emitCurrentTagToken();break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:this._err(ft.missingWhitespaceBetweenAttributes),this.state=Te.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case we.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=Te.DATA,this.emitCurrentTagToken();break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:this._err(ft.unexpectedSolidusInTag),this.state=Te.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentComment(n);break}case we.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.data+=ao;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Bf.DASH_DASH,!0)?(this._createCommentToken(Bf.DASH_DASH.length+1),this.state=Te.COMMENT_START):this._consumeSequenceIfMatch(Bf.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Bf.DOCTYPE.length+1),this.state=Te.DOCTYPE):this._consumeSequenceIfMatch(Bf.CDATA_START,!0)?this.inForeignNode?this.state=Te.CDATA_SECTION:(this._err(ft.cdataInHtmlContent),this._createCommentToken(Bf.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=Te.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ft.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Te.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case we.HYPHEN_MINUS:{this.state=Te.COMMENT_START_DASH;break}case we.GREATER_THAN_SIGN:{this._err(ft.abruptClosingOfEmptyComment),this.state=Te.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=Te.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case we.HYPHEN_MINUS:{this.state=Te.COMMENT_END;break}case we.GREATER_THAN_SIGN:{this._err(ft.abruptClosingOfEmptyComment),this.state=Te.DATA,this.emitCurrentComment(n);break}case we.EOF:{this._err(ft.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Te.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case we.HYPHEN_MINUS:{this.state=Te.COMMENT_END_DASH;break}case we.LESS_THAN_SIGN:{n.data+="<",this.state=Te.COMMENT_LESS_THAN_SIGN;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.data+=ao;break}case we.EOF:{this._err(ft.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case we.EXCLAMATION_MARK:{n.data+="!",this.state=Te.COMMENT_LESS_THAN_SIGN_BANG;break}case we.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=Te.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===we.HYPHEN_MINUS?this.state=Te.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Te.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===we.HYPHEN_MINUS?this.state=Te.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Te.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==we.GREATER_THAN_SIGN&&t!==we.EOF&&this._err(ft.nestedComment),this.state=Te.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case we.HYPHEN_MINUS:{this.state=Te.COMMENT_END;break}case we.EOF:{this._err(ft.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Te.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentComment(n);break}case we.EXCLAMATION_MARK:{this.state=Te.COMMENT_END_BANG;break}case we.HYPHEN_MINUS:{n.data+="-";break}case we.EOF:{this._err(ft.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=Te.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case we.HYPHEN_MINUS:{n.data+="--!",this.state=Te.COMMENT_END_DASH;break}case we.GREATER_THAN_SIGN:{this._err(ft.incorrectlyClosedComment),this.state=Te.DATA,this.emitCurrentComment(n);break}case we.EOF:{this._err(ft.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=Te.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this.state=Te.BEFORE_DOCTYPE_NAME;break}case we.GREATER_THAN_SIGN:{this.state=Te.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case we.EOF:{this._err(ft.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingWhitespaceBeforeDoctypeName),this.state=Te.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(w3(t))this._createDoctypeToken(String.fromCharCode(p6(t))),this.state=Te.DOCTYPE_NAME;else switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.NULL:{this._err(ft.unexpectedNullCharacter),this._createDoctypeToken(ao),this.state=Te.DOCTYPE_NAME;break}case we.GREATER_THAN_SIGN:{this._err(ft.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=Te.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this.state=Te.AFTER_DOCTYPE_NAME;break}case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.name+=ao;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(w3(t)?p6(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Bf.PUBLIC,!1)?this.state=Te.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Bf.SYSTEM,!1)?this.state=Te.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ft.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this.state=Te.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case we.QUOTATION_MARK:{this._err(ft.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case we.APOSTROPHE:{this._err(ft.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case we.GREATER_THAN_SIGN:{this._err(ft.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.QUOTATION_MARK:{n.publicId="",this.state=Te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case we.APOSTROPHE:{n.publicId="",this.state=Te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case we.GREATER_THAN_SIGN:{this._err(ft.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case we.QUOTATION_MARK:{this.state=Te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.publicId+=ao;break}case we.GREATER_THAN_SIGN:{this._err(ft.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case we.APOSTROPHE:{this.state=Te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.publicId+=ao;break}case we.GREATER_THAN_SIGN:{this._err(ft.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this.state=Te.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.QUOTATION_MARK:{this._err(ft.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case we.APOSTROPHE:{this._err(ft.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.QUOTATION_MARK:{n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case we.APOSTROPHE:{n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this.state=Te.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case we.QUOTATION_MARK:{this._err(ft.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case we.APOSTROPHE:{this._err(ft.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case we.GREATER_THAN_SIGN:{this._err(ft.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.QUOTATION_MARK:{n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case we.APOSTROPHE:{n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case we.GREATER_THAN_SIGN:{this._err(ft.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case we.QUOTATION_MARK:{this.state=Te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.systemId+=ao;break}case we.GREATER_THAN_SIGN:{this._err(ft.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case we.APOSTROPHE:{this.state=Te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.systemId+=ao;break}case we.GREATER_THAN_SIGN:{this._err(ft.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case we.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.NULL:{this._err(ft.unexpectedNullCharacter);break}case we.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case we.RIGHT_SQUARE_BRACKET:{this.state=Te.CDATA_SECTION_BRACKET;break}case we.EOF:{this._err(ft.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===we.RIGHT_SQUARE_BRACKET?this.state=Te.CDATA_SECTION_END:(this._emitChars("]"),this.state=Te.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case we.GREATER_THAN_SIGN:{this.state=Te.DATA;break}case we.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=Te.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===we.NUMBER_SIGN?this.state=Te.NUMERIC_CHARACTER_REFERENCE:IU(t)?(this.state=Te.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(we.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(we.AMPERSAND),this.state=Te.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){IU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===we.SEMICOLON&&this._err(ft.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===we.LATIN_SMALL_X||t===we.LATIN_CAPITAL_X?this.state=Te.HEXADEMICAL_CHARACTER_REFERENCE_START:dk(t)?(this.state=Te.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(ft.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(we.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(we.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){xYe(t)?(this.state=Te.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(ft.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(we.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(we.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){Rve(t)?this.charRefCode=this.charRefCode*16+t-55:Ive(t)?this.charRefCode=this.charRefCode*16+t-87:dk(t)?this.charRefCode=this.charRefCode*16+t-48:t===we.SEMICOLON?this.state=Te.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ft.missingSemicolonAfterCharacterReference),this.state=Te.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){dk(t)?this.charRefCode=this.charRefCode*10+t-48:t===we.SEMICOLON?this.state=Te.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ft.missingSemicolonAfterCharacterReference),this.state=Te.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===we.NULL)this._err(ft.nullCharacterReference),this.charRefCode=we.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(ft.characterReferenceOutsideUnicodeRange),this.charRefCode=we.REPLACEMENT_CHARACTER;else if(wve(this.charRefCode))this._err(ft.surrogateCharacterReference),this.charRefCode=we.REPLACEMENT_CHARACTER;else if(Sve(this.charRefCode))this._err(ft.noncharacterCharacterReference);else if(Eve(this.charRefCode)||this.charRefCode===we.CARRIAGE_RETURN){this._err(ft.controlCharacterReference);const n=vYe.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const Nve=new Set([K.DD,K.DT,K.LI,K.OPTGROUP,K.OPTION,K.P,K.RB,K.RP,K.RT,K.RTC]),Gre=new Set([...Nve,K.CAPTION,K.COLGROUP,K.TBODY,K.TD,K.TFOOT,K.TH,K.THEAD,K.TR]),m6=new Map([[K.APPLET,bt.HTML],[K.CAPTION,bt.HTML],[K.HTML,bt.HTML],[K.MARQUEE,bt.HTML],[K.OBJECT,bt.HTML],[K.TABLE,bt.HTML],[K.TD,bt.HTML],[K.TEMPLATE,bt.HTML],[K.TH,bt.HTML],[K.ANNOTATION_XML,bt.MATHML],[K.MI,bt.MATHML],[K.MN,bt.MATHML],[K.MO,bt.MATHML],[K.MS,bt.MATHML],[K.MTEXT,bt.MATHML],[K.DESC,bt.SVG],[K.FOREIGN_OBJECT,bt.SVG],[K.TITLE,bt.SVG]]),EYe=[K.H1,K.H2,K.H3,K.H4,K.H5,K.H6],SYe=[K.TR,K.TEMPLATE,K.HTML],TYe=[K.TBODY,K.TFOOT,K.THEAD,K.TEMPLATE,K.HTML],CYe=[K.TABLE,K.TEMPLATE,K.HTML],AYe=[K.TD,K.TH];class kYe{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=K.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===K.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===bt.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==bt.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(EYe,bt.HTML)}popUntilTableCellPopped(){this.popUntilPopped(AYe,bt.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(CYe,bt.HTML)}clearBackToTableBodyContext(){this.clearBackTo(TYe,bt.HTML)}clearBackToTableRowContext(){this.clearBackTo(SYe,bt.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===K.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===K.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===bt.HTML)return!0;if(m6.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(kve(n)&&r===bt.HTML)return!0;if(m6.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===bt.HTML)return!0;if((r===K.UL||r===K.OL)&&i===bt.HTML||m6.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===bt.HTML)return!0;if(r===K.BUTTON&&i===bt.HTML||m6.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===bt.HTML){if(r===t)return!0;if(r===K.TABLE||r===K.TEMPLATE||r===K.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===bt.HTML){if(n===K.TBODY||n===K.THEAD||n===K.TFOOT)return!0;if(n===K.TABLE||n===K.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===bt.HTML){if(r===t)return!0;if(r!==K.OPTION&&r!==K.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;Nve.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Gre.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Gre.has(this.currentTagId);)this.pop()}}const WF=3;var i0;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(i0=i0||(i0={}));const Yre={type:i0.Marker};class RYe{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===i0.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<WF)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<WF)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=WF&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Yre)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:i0.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:i0.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Yre);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===i0.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===i0.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===i0.Element&&n.element===t)}}function Kre(e){return{nodeName:"#text",value:e,parentNode:null}}const mE={createDocument(){return{nodeName:"#document",mode:Vd.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};mE.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(mE.isTextNode(n)){n.value+=t;return}}mE.appendChild(e,Kre(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&mE.isTextNode(r)?r.value+=t:mE.insertBefore(e,Kre(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},Dve="html",IYe="about:legacy-compat",PYe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Ove=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],NYe=[...Ove,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],DYe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Mve=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],OYe=[...Mve,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Xre(e,t){return t.some(n=>e.startsWith(n))}function MYe(e){return e.name===Dve&&e.publicId===null&&(e.systemId===null||e.systemId===IYe)}function LYe(e){if(e.name!==Dve)return Vd.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===PYe)return Vd.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),DYe.has(n))return Vd.QUIRKS;let r=t===null?NYe:Ove;if(Xre(n,r))return Vd.QUIRKS;if(r=t===null?Mve:OYe,Xre(n,r))return Vd.LIMITED_QUIRKS}return Vd.NO_QUIRKS}const Qre={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},FYe="definitionurl",$Ye="definitionURL",BYe=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),jYe=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:bt.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:bt.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:bt.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:bt.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:bt.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:bt.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:bt.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:bt.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:bt.XML}],["xml:space",{prefix:"xml",name:"space",namespace:bt.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:bt.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:bt.XMLNS}]]),UYe=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),zYe=new Set([K.B,K.BIG,K.BLOCKQUOTE,K.BODY,K.BR,K.CENTER,K.CODE,K.DD,K.DIV,K.DL,K.DT,K.EM,K.EMBED,K.H1,K.H2,K.H3,K.H4,K.H5,K.H6,K.HEAD,K.HR,K.I,K.IMG,K.LI,K.LISTING,K.MENU,K.META,K.NOBR,K.OL,K.P,K.PRE,K.RUBY,K.S,K.SMALL,K.SPAN,K.STRONG,K.STRIKE,K.SUB,K.SUP,K.TABLE,K.TT,K.U,K.UL,K.VAR]);function VYe(e){const t=e.tagID;return t===K.FONT&&e.attrs.some(({name:r})=>r===Yv.COLOR||r===Yv.SIZE||r===Yv.FACE)||zYe.has(t)}function Lve(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===FYe){e.attrs[t].name=$Ye;break}}function Fve(e){for(let t=0;t<e.attrs.length;t++){const n=BYe.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function CG(e){for(let t=0;t<e.attrs.length;t++){const n=jYe.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function HYe(e){const t=UYe.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=PT(e.tagName))}function qYe(e,t){return t===bt.MATHML&&(e===K.MI||e===K.MO||e===K.MN||e===K.MS||e===K.MTEXT)}function WYe(e,t,n){if(t===bt.MATHML&&e===K.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Yv.ENCODING){const i=n[r].value.toLowerCase();return i===Qre.TEXT_HTML||i===Qre.APPLICATION_XML}}return t===bt.SVG&&(e===K.FOREIGN_OBJECT||e===K.DESC||e===K.TITLE)}function GYe(e,t,n,r){return(!r||r===bt.HTML)&&WYe(e,t,n)||(!r||r===bt.MATHML)&&qYe(e,t)}const YYe="hidden",KYe=8,XYe=3;var Pe;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(Pe||(Pe={}));const QYe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},$ve=new Set([K.TABLE,K.TBODY,K.TFOOT,K.THEAD,K.TR]),Jre={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:mE,onParseError:null};class Zre{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=Pe.INITIAL,this.originalInsertionMode=Pe.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Jre,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new wYe(this.options,this),this.activeFormattingElements=new RYe(this.treeAdapter),this.fragmentContextID=r?PT(this.treeAdapter.getTagName(r)):K.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new kYe(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Jre,...n};t??(t=r.treeAdapter.createElement(Ze.TEMPLATE,bt.HTML,[]));const i=r.treeAdapter.createElement("documentmock",bt.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===K.TEMPLATE&&s.tmplInsertionModeStack.unshift(Pe.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:QYe,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===bt.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,bt.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=Pe.TEXT}switchToPlaintextParsing(){this.insertionMode=Pe.TEXT,this.originalInsertionMode=Pe.IN_BODY,this.tokenizer.state=ga.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ze.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==bt.HTML))switch(this.fragmentContextID){case K.TITLE:case K.TEXTAREA:{this.tokenizer.state=ga.RCDATA;break}case K.STYLE:case K.XMP:case K.IFRAME:case K.NOEMBED:case K.NOFRAMES:case K.NOSCRIPT:{this.tokenizer.state=ga.RAWTEXT;break}case K.SCRIPT:{this.tokenizer.state=ga.SCRIPT_DATA;break}case K.PLAINTEXT:{this.tokenizer.state=ga.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,bt.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,bt.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ze.HTML,bt.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,K.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Ur.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===K.SVG&&this.treeAdapter.getTagName(n)===Ze.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===bt.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===K.MGLYPH||t.tagID===K.MALIGNMARK)&&!this._isIntegrationPoint(r,n,bt.HTML)}_processToken(t){switch(t.type){case Ur.CHARACTER:{this.onCharacter(t);break}case Ur.NULL_CHARACTER:{this.onNullCharacter(t);break}case Ur.COMMENT:{this.onComment(t);break}case Ur.DOCTYPE:{this.onDoctype(t);break}case Ur.START_TAG:{this._processStartTag(t);break}case Ur.END_TAG:{this.onEndTag(t);break}case Ur.EOF:{this.onEof(t);break}case Ur.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return GYe(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===i0.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=Pe.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(K.P),this.openElements.popUntilTagNamePopped(K.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case K.TR:{this.insertionMode=Pe.IN_ROW;return}case K.TBODY:case K.THEAD:case K.TFOOT:{this.insertionMode=Pe.IN_TABLE_BODY;return}case K.CAPTION:{this.insertionMode=Pe.IN_CAPTION;return}case K.COLGROUP:{this.insertionMode=Pe.IN_COLUMN_GROUP;return}case K.TABLE:{this.insertionMode=Pe.IN_TABLE;return}case K.BODY:{this.insertionMode=Pe.IN_BODY;return}case K.FRAMESET:{this.insertionMode=Pe.IN_FRAMESET;return}case K.SELECT:{this._resetInsertionModeForSelect(t);return}case K.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case K.HTML:{this.insertionMode=this.headElement?Pe.AFTER_HEAD:Pe.BEFORE_HEAD;return}case K.TD:case K.TH:{if(t>0){this.insertionMode=Pe.IN_CELL;return}break}case K.HEAD:{if(t>0){this.insertionMode=Pe.IN_HEAD;return}break}}this.insertionMode=Pe.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===K.TEMPLATE)break;if(r===K.TABLE){this.insertionMode=Pe.IN_SELECT_IN_TABLE;return}}this.insertionMode=Pe.IN_SELECT}_isElementCausesFosterParenting(t){return $ve.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case K.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===bt.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case K.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return yYe[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){AXe(this,t);return}switch(this.insertionMode){case Pe.INITIAL:{XC(this,t);break}case Pe.BEFORE_HTML:{hk(this,t);break}case Pe.BEFORE_HEAD:{pk(this,t);break}case Pe.IN_HEAD:{mk(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{gk(this,t);break}case Pe.AFTER_HEAD:{yk(this,t);break}case Pe.IN_BODY:case Pe.IN_CAPTION:case Pe.IN_CELL:case Pe.IN_TEMPLATE:{jve(this,t);break}case Pe.TEXT:case Pe.IN_SELECT:case Pe.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case Pe.IN_TABLE:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:{GF(this,t);break}case Pe.IN_TABLE_TEXT:{Wve(this,t);break}case Pe.IN_COLUMN_GROUP:{h8(this,t);break}case Pe.AFTER_BODY:{p8(this,t);break}case Pe.AFTER_AFTER_BODY:{CP(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){CXe(this,t);return}switch(this.insertionMode){case Pe.INITIAL:{XC(this,t);break}case Pe.BEFORE_HTML:{hk(this,t);break}case Pe.BEFORE_HEAD:{pk(this,t);break}case Pe.IN_HEAD:{mk(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{gk(this,t);break}case Pe.AFTER_HEAD:{yk(this,t);break}case Pe.TEXT:{this._insertCharacters(t);break}case Pe.IN_TABLE:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:{GF(this,t);break}case Pe.IN_COLUMN_GROUP:{h8(this,t);break}case Pe.AFTER_BODY:{p8(this,t);break}case Pe.AFTER_AFTER_BODY:{CP(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){PU(this,t);return}switch(this.insertionMode){case Pe.INITIAL:case Pe.BEFORE_HTML:case Pe.BEFORE_HEAD:case Pe.IN_HEAD:case Pe.IN_HEAD_NO_SCRIPT:case Pe.AFTER_HEAD:case Pe.IN_BODY:case Pe.IN_TABLE:case Pe.IN_CAPTION:case Pe.IN_COLUMN_GROUP:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:case Pe.IN_CELL:case Pe.IN_SELECT:case Pe.IN_SELECT_IN_TABLE:case Pe.IN_TEMPLATE:case Pe.IN_FRAMESET:case Pe.AFTER_FRAMESET:{PU(this,t);break}case Pe.IN_TABLE_TEXT:{QC(this,t);break}case Pe.AFTER_BODY:{iKe(this,t);break}case Pe.AFTER_AFTER_BODY:case Pe.AFTER_AFTER_FRAMESET:{sKe(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case Pe.INITIAL:{oKe(this,t);break}case Pe.BEFORE_HEAD:case Pe.IN_HEAD:case Pe.IN_HEAD_NO_SCRIPT:case Pe.AFTER_HEAD:{this._err(t,ft.misplacedDoctype);break}case Pe.IN_TABLE_TEXT:{QC(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,ft.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?kXe(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case Pe.INITIAL:{XC(this,t);break}case Pe.BEFORE_HTML:{aKe(this,t);break}case Pe.BEFORE_HEAD:{lKe(this,t);break}case Pe.IN_HEAD:{$0(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{dKe(this,t);break}case Pe.AFTER_HEAD:{pKe(this,t);break}case Pe.IN_BODY:{vc(this,t);break}case Pe.IN_TABLE:{gS(this,t);break}case Pe.IN_TABLE_TEXT:{QC(this,t);break}case Pe.IN_CAPTION:{cXe(this,t);break}case Pe.IN_COLUMN_GROUP:{RG(this,t);break}case Pe.IN_TABLE_BODY:{E9(this,t);break}case Pe.IN_ROW:{S9(this,t);break}case Pe.IN_CELL:{hXe(this,t);break}case Pe.IN_SELECT:{Kve(this,t);break}case Pe.IN_SELECT_IN_TABLE:{mXe(this,t);break}case Pe.IN_TEMPLATE:{yXe(this,t);break}case Pe.AFTER_BODY:{bXe(this,t);break}case Pe.IN_FRAMESET:{xXe(this,t);break}case Pe.AFTER_FRAMESET:{wXe(this,t);break}case Pe.AFTER_AFTER_BODY:{SXe(this,t);break}case Pe.AFTER_AFTER_FRAMESET:{TXe(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?RXe(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case Pe.INITIAL:{XC(this,t);break}case Pe.BEFORE_HTML:{uKe(this,t);break}case Pe.BEFORE_HEAD:{cKe(this,t);break}case Pe.IN_HEAD:{fKe(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{hKe(this,t);break}case Pe.AFTER_HEAD:{mKe(this,t);break}case Pe.IN_BODY:{w9(this,t);break}case Pe.TEXT:{eXe(this,t);break}case Pe.IN_TABLE:{Qk(this,t);break}case Pe.IN_TABLE_TEXT:{QC(this,t);break}case Pe.IN_CAPTION:{fXe(this,t);break}case Pe.IN_COLUMN_GROUP:{dXe(this,t);break}case Pe.IN_TABLE_BODY:{NU(this,t);break}case Pe.IN_ROW:{Yve(this,t);break}case Pe.IN_CELL:{pXe(this,t);break}case Pe.IN_SELECT:{Xve(this,t);break}case Pe.IN_SELECT_IN_TABLE:{gXe(this,t);break}case Pe.IN_TEMPLATE:{vXe(this,t);break}case Pe.AFTER_BODY:{Jve(this,t);break}case Pe.IN_FRAMESET:{_Xe(this,t);break}case Pe.AFTER_FRAMESET:{EXe(this,t);break}case Pe.AFTER_AFTER_BODY:{CP(this,t);break}}}onEof(t){switch(this.insertionMode){case Pe.INITIAL:{XC(this,t);break}case Pe.BEFORE_HTML:{hk(this,t);break}case Pe.BEFORE_HEAD:{pk(this,t);break}case Pe.IN_HEAD:{mk(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{gk(this,t);break}case Pe.AFTER_HEAD:{yk(this,t);break}case Pe.IN_BODY:case Pe.IN_TABLE:case Pe.IN_CAPTION:case Pe.IN_COLUMN_GROUP:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:case Pe.IN_CELL:case Pe.IN_SELECT:case Pe.IN_SELECT_IN_TABLE:{Hve(this,t);break}case Pe.TEXT:{tXe(this,t);break}case Pe.IN_TABLE_TEXT:{QC(this,t);break}case Pe.IN_TEMPLATE:{Qve(this,t);break}case Pe.AFTER_BODY:case Pe.IN_FRAMESET:case Pe.AFTER_FRAMESET:case Pe.AFTER_AFTER_BODY:case Pe.AFTER_AFTER_FRAMESET:{kG(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===we.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case Pe.IN_HEAD:case Pe.IN_HEAD_NO_SCRIPT:case Pe.AFTER_HEAD:case Pe.TEXT:case Pe.IN_COLUMN_GROUP:case Pe.IN_SELECT:case Pe.IN_SELECT_IN_TABLE:case Pe.IN_FRAMESET:case Pe.AFTER_FRAMESET:{this._insertCharacters(t);break}case Pe.IN_BODY:case Pe.IN_CAPTION:case Pe.IN_CELL:case Pe.IN_TEMPLATE:case Pe.AFTER_BODY:case Pe.AFTER_AFTER_BODY:case Pe.AFTER_AFTER_FRAMESET:{Bve(this,t);break}case Pe.IN_TABLE:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:{GF(this,t);break}case Pe.IN_TABLE_TEXT:{qve(this,t);break}}}}function JYe(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Vve(e,t),n}function ZYe(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function eKe(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=XYe;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=tKe(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function tKe(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function nKe(e,t,n){const r=e.treeAdapter.getTagName(t),i=PT(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===K.TEMPLATE&&s===bt.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function rKe(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function AG(e,t){for(let n=0;n<KYe;n++){const r=JYe(e,t);if(!r)break;const i=ZYe(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=eKe(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&nKe(e,o,s),rKe(e,i,r)}}function PU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function iKe(e,t){e._appendCommentNode(t,e.openElements.items[0])}function sKe(e,t){e._appendCommentNode(t,e.document)}function kG(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function oKe(e,t){e._setDocumentType(t);const n=t.forceQuirks?Vd.QUIRKS:LYe(t);MYe(t)||e._err(t,ft.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=Pe.BEFORE_HTML}function XC(e,t){e._err(t,ft.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Vd.QUIRKS),e.insertionMode=Pe.BEFORE_HTML,e._processToken(t)}function aKe(e,t){t.tagID===K.HTML?(e._insertElement(t,bt.HTML),e.insertionMode=Pe.BEFORE_HEAD):hk(e,t)}function uKe(e,t){const n=t.tagID;(n===K.HTML||n===K.HEAD||n===K.BODY||n===K.BR)&&hk(e,t)}function hk(e,t){e._insertFakeRootElement(),e.insertionMode=Pe.BEFORE_HEAD,e._processToken(t)}function lKe(e,t){switch(t.tagID){case K.HTML:{vc(e,t);break}case K.HEAD:{e._insertElement(t,bt.HTML),e.headElement=e.openElements.current,e.insertionMode=Pe.IN_HEAD;break}default:pk(e,t)}}function cKe(e,t){const n=t.tagID;n===K.HEAD||n===K.BODY||n===K.HTML||n===K.BR?pk(e,t):e._err(t,ft.endTagWithoutMatchingOpenElement)}function pk(e,t){e._insertFakeElement(Ze.HEAD,K.HEAD),e.headElement=e.openElements.current,e.insertionMode=Pe.IN_HEAD,e._processToken(t)}function $0(e,t){switch(t.tagID){case K.HTML:{vc(e,t);break}case K.BASE:case K.BASEFONT:case K.BGSOUND:case K.LINK:case K.META:{e._appendElement(t,bt.HTML),t.ackSelfClosing=!0;break}case K.TITLE:{e._switchToTextParsing(t,ga.RCDATA);break}case K.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,ga.RAWTEXT):(e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_HEAD_NO_SCRIPT);break}case K.NOFRAMES:case K.STYLE:{e._switchToTextParsing(t,ga.RAWTEXT);break}case K.SCRIPT:{e._switchToTextParsing(t,ga.SCRIPT_DATA);break}case K.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=Pe.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(Pe.IN_TEMPLATE);break}case K.HEAD:{e._err(t,ft.misplacedStartTagForHeadElement);break}default:mk(e,t)}}function fKe(e,t){switch(t.tagID){case K.HEAD:{e.openElements.pop(),e.insertionMode=Pe.AFTER_HEAD;break}case K.BODY:case K.BR:case K.HTML:{mk(e,t);break}case K.TEMPLATE:{Dw(e,t);break}default:e._err(t,ft.endTagWithoutMatchingOpenElement)}}function Dw(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==K.TEMPLATE&&e._err(t,ft.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(K.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,ft.endTagWithoutMatchingOpenElement)}function mk(e,t){e.openElements.pop(),e.insertionMode=Pe.AFTER_HEAD,e._processToken(t)}function dKe(e,t){switch(t.tagID){case K.HTML:{vc(e,t);break}case K.BASEFONT:case K.BGSOUND:case K.HEAD:case K.LINK:case K.META:case K.NOFRAMES:case K.STYLE:{$0(e,t);break}case K.NOSCRIPT:{e._err(t,ft.nestedNoscriptInHead);break}default:gk(e,t)}}function hKe(e,t){switch(t.tagID){case K.NOSCRIPT:{e.openElements.pop(),e.insertionMode=Pe.IN_HEAD;break}case K.BR:{gk(e,t);break}default:e._err(t,ft.endTagWithoutMatchingOpenElement)}}function gk(e,t){const n=t.type===Ur.EOF?ft.openElementsLeftAfterEof:ft.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=Pe.IN_HEAD,e._processToken(t)}function pKe(e,t){switch(t.tagID){case K.HTML:{vc(e,t);break}case K.BODY:{e._insertElement(t,bt.HTML),e.framesetOk=!1,e.insertionMode=Pe.IN_BODY;break}case K.FRAMESET:{e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_FRAMESET;break}case K.BASE:case K.BASEFONT:case K.BGSOUND:case K.LINK:case K.META:case K.NOFRAMES:case K.SCRIPT:case K.STYLE:case K.TEMPLATE:case K.TITLE:{e._err(t,ft.abandonedHeadElementChild),e.openElements.push(e.headElement,K.HEAD),$0(e,t),e.openElements.remove(e.headElement);break}case K.HEAD:{e._err(t,ft.misplacedStartTagForHeadElement);break}default:yk(e,t)}}function mKe(e,t){switch(t.tagID){case K.BODY:case K.HTML:case K.BR:{yk(e,t);break}case K.TEMPLATE:{Dw(e,t);break}default:e._err(t,ft.endTagWithoutMatchingOpenElement)}}function yk(e,t){e._insertFakeElement(Ze.BODY,K.BODY),e.insertionMode=Pe.IN_BODY,_9(e,t)}function _9(e,t){switch(t.type){case Ur.CHARACTER:{jve(e,t);break}case Ur.WHITESPACE_CHARACTER:{Bve(e,t);break}case Ur.COMMENT:{PU(e,t);break}case Ur.START_TAG:{vc(e,t);break}case Ur.END_TAG:{w9(e,t);break}case Ur.EOF:{Hve(e,t);break}}}function Bve(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function jve(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function gKe(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function yKe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function vKe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_FRAMESET)}function bKe(e,t){e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._insertElement(t,bt.HTML)}function xKe(e,t){e.openElements.hasInButtonScope(K.P)&&e._closePElement(),kve(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,bt.HTML)}function _Ke(e,t){e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._insertElement(t,bt.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function wKe(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._insertElement(t,bt.HTML),n||(e.formElement=e.openElements.current))}function EKe(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===K.LI&&i===K.LI||(n===K.DD||n===K.DT)&&(i===K.DD||i===K.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==K.ADDRESS&&i!==K.DIV&&i!==K.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._insertElement(t,bt.HTML)}function SKe(e,t){e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._insertElement(t,bt.HTML),e.tokenizer.state=ga.PLAINTEXT}function TKe(e,t){e.openElements.hasInScope(K.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(K.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML),e.framesetOk=!1}function CKe(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ze.A);n&&(AG(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function AKe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function kKe(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(K.NOBR)&&(AG(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,bt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function RKe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function IKe(e,t){e.treeAdapter.getDocumentMode(e.document)!==Vd.QUIRKS&&e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._insertElement(t,bt.HTML),e.framesetOk=!1,e.insertionMode=Pe.IN_TABLE}function Uve(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,bt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function zve(e){const t=Tve(e,Yv.TYPE);return t!=null&&t.toLowerCase()===YYe}function PKe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,bt.HTML),zve(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function NKe(e,t){e._appendElement(t,bt.HTML),t.ackSelfClosing=!0}function DKe(e,t){e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._appendElement(t,bt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function OKe(e,t){t.tagName=Ze.IMG,t.tagID=K.IMG,Uve(e,t)}function MKe(e,t){e._insertElement(t,bt.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ga.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=Pe.TEXT}function LKe(e,t){e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ga.RAWTEXT)}function FKe(e,t){e.framesetOk=!1,e._switchToTextParsing(t,ga.RAWTEXT)}function eie(e,t){e._switchToTextParsing(t,ga.RAWTEXT)}function $Ke(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===Pe.IN_TABLE||e.insertionMode===Pe.IN_CAPTION||e.insertionMode===Pe.IN_TABLE_BODY||e.insertionMode===Pe.IN_ROW||e.insertionMode===Pe.IN_CELL?Pe.IN_SELECT_IN_TABLE:Pe.IN_SELECT}function BKe(e,t){e.openElements.currentTagId===K.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML)}function jKe(e,t){e.openElements.hasInScope(K.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,bt.HTML)}function UKe(e,t){e.openElements.hasInScope(K.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(K.RTC),e._insertElement(t,bt.HTML)}function zKe(e,t){e._reconstructActiveFormattingElements(),Lve(t),CG(t),t.selfClosing?e._appendElement(t,bt.MATHML):e._insertElement(t,bt.MATHML),t.ackSelfClosing=!0}function VKe(e,t){e._reconstructActiveFormattingElements(),Fve(t),CG(t),t.selfClosing?e._appendElement(t,bt.SVG):e._insertElement(t,bt.SVG),t.ackSelfClosing=!0}function tie(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML)}function vc(e,t){switch(t.tagID){case K.I:case K.S:case K.B:case K.U:case K.EM:case K.TT:case K.BIG:case K.CODE:case K.FONT:case K.SMALL:case K.STRIKE:case K.STRONG:{AKe(e,t);break}case K.A:{CKe(e,t);break}case K.H1:case K.H2:case K.H3:case K.H4:case K.H5:case K.H6:{xKe(e,t);break}case K.P:case K.DL:case K.OL:case K.UL:case K.DIV:case K.DIR:case K.NAV:case K.MAIN:case K.MENU:case K.ASIDE:case K.CENTER:case K.FIGURE:case K.FOOTER:case K.HEADER:case K.HGROUP:case K.DIALOG:case K.DETAILS:case K.ADDRESS:case K.ARTICLE:case K.SECTION:case K.SUMMARY:case K.FIELDSET:case K.BLOCKQUOTE:case K.FIGCAPTION:{bKe(e,t);break}case K.LI:case K.DD:case K.DT:{EKe(e,t);break}case K.BR:case K.IMG:case K.WBR:case K.AREA:case K.EMBED:case K.KEYGEN:{Uve(e,t);break}case K.HR:{DKe(e,t);break}case K.RB:case K.RTC:{jKe(e,t);break}case K.RT:case K.RP:{UKe(e,t);break}case K.PRE:case K.LISTING:{_Ke(e,t);break}case K.XMP:{LKe(e,t);break}case K.SVG:{VKe(e,t);break}case K.HTML:{gKe(e,t);break}case K.BASE:case K.LINK:case K.META:case K.STYLE:case K.TITLE:case K.SCRIPT:case K.BGSOUND:case K.BASEFONT:case K.TEMPLATE:{$0(e,t);break}case K.BODY:{yKe(e,t);break}case K.FORM:{wKe(e,t);break}case K.NOBR:{kKe(e,t);break}case K.MATH:{zKe(e,t);break}case K.TABLE:{IKe(e,t);break}case K.INPUT:{PKe(e,t);break}case K.PARAM:case K.TRACK:case K.SOURCE:{NKe(e,t);break}case K.IMAGE:{OKe(e,t);break}case K.BUTTON:{TKe(e,t);break}case K.APPLET:case K.OBJECT:case K.MARQUEE:{RKe(e,t);break}case K.IFRAME:{FKe(e,t);break}case K.SELECT:{$Ke(e,t);break}case K.OPTION:case K.OPTGROUP:{BKe(e,t);break}case K.NOEMBED:{eie(e,t);break}case K.FRAMESET:{vKe(e,t);break}case K.TEXTAREA:{MKe(e,t);break}case K.NOSCRIPT:{e.options.scriptingEnabled?eie(e,t):tie(e,t);break}case K.PLAINTEXT:{SKe(e,t);break}case K.COL:case K.TH:case K.TD:case K.TR:case K.HEAD:case K.FRAME:case K.TBODY:case K.TFOOT:case K.THEAD:case K.CAPTION:case K.COLGROUP:break;default:tie(e,t)}}function HKe(e,t){if(e.openElements.hasInScope(K.BODY)&&(e.insertionMode=Pe.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function qKe(e,t){e.openElements.hasInScope(K.BODY)&&(e.insertionMode=Pe.AFTER_BODY,Jve(e,t))}function WKe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function GKe(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(K.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(K.FORM):n&&e.openElements.remove(n))}function YKe(e){e.openElements.hasInButtonScope(K.P)||e._insertFakeElement(Ze.P,K.P),e._closePElement()}function KKe(e){e.openElements.hasInListItemScope(K.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(K.LI),e.openElements.popUntilTagNamePopped(K.LI))}function XKe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function QKe(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function JKe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function ZKe(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ze.BR,K.BR),e.openElements.pop(),e.framesetOk=!1}function Vve(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==K.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function w9(e,t){switch(t.tagID){case K.A:case K.B:case K.I:case K.S:case K.U:case K.EM:case K.TT:case K.BIG:case K.CODE:case K.FONT:case K.NOBR:case K.SMALL:case K.STRIKE:case K.STRONG:{AG(e,t);break}case K.P:{YKe(e);break}case K.DL:case K.UL:case K.OL:case K.DIR:case K.DIV:case K.NAV:case K.PRE:case K.MAIN:case K.MENU:case K.ASIDE:case K.BUTTON:case K.CENTER:case K.FIGURE:case K.FOOTER:case K.HEADER:case K.HGROUP:case K.DIALOG:case K.ADDRESS:case K.ARTICLE:case K.DETAILS:case K.SECTION:case K.SUMMARY:case K.LISTING:case K.FIELDSET:case K.BLOCKQUOTE:case K.FIGCAPTION:{WKe(e,t);break}case K.LI:{KKe(e);break}case K.DD:case K.DT:{XKe(e,t);break}case K.H1:case K.H2:case K.H3:case K.H4:case K.H5:case K.H6:{QKe(e);break}case K.BR:{ZKe(e);break}case K.BODY:{HKe(e,t);break}case K.HTML:{qKe(e,t);break}case K.FORM:{GKe(e);break}case K.APPLET:case K.OBJECT:case K.MARQUEE:{JKe(e,t);break}case K.TEMPLATE:{Dw(e,t);break}default:Vve(e,t)}}function Hve(e,t){e.tmplInsertionModeStack.length>0?Qve(e,t):kG(e,t)}function eXe(e,t){var n;t.tagID===K.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function tXe(e,t){e._err(t,ft.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function GF(e,t){if($ve.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=Pe.IN_TABLE_TEXT,t.type){case Ur.CHARACTER:{Wve(e,t);break}case Ur.WHITESPACE_CHARACTER:{qve(e,t);break}}else vR(e,t)}function nXe(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_CAPTION}function rXe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_COLUMN_GROUP}function iXe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ze.COLGROUP,K.COLGROUP),e.insertionMode=Pe.IN_COLUMN_GROUP,RG(e,t)}function sXe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_TABLE_BODY}function oXe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ze.TBODY,K.TBODY),e.insertionMode=Pe.IN_TABLE_BODY,E9(e,t)}function aXe(e,t){e.openElements.hasInTableScope(K.TABLE)&&(e.openElements.popUntilTagNamePopped(K.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function uXe(e,t){zve(t)?e._appendElement(t,bt.HTML):vR(e,t),t.ackSelfClosing=!0}function lXe(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,bt.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function gS(e,t){switch(t.tagID){case K.TD:case K.TH:case K.TR:{oXe(e,t);break}case K.STYLE:case K.SCRIPT:case K.TEMPLATE:{$0(e,t);break}case K.COL:{iXe(e,t);break}case K.FORM:{lXe(e,t);break}case K.TABLE:{aXe(e,t);break}case K.TBODY:case K.TFOOT:case K.THEAD:{sXe(e,t);break}case K.INPUT:{uXe(e,t);break}case K.CAPTION:{nXe(e,t);break}case K.COLGROUP:{rXe(e,t);break}default:vR(e,t)}}function Qk(e,t){switch(t.tagID){case K.TABLE:{e.openElements.hasInTableScope(K.TABLE)&&(e.openElements.popUntilTagNamePopped(K.TABLE),e._resetInsertionMode());break}case K.TEMPLATE:{Dw(e,t);break}case K.BODY:case K.CAPTION:case K.COL:case K.COLGROUP:case K.HTML:case K.TBODY:case K.TD:case K.TFOOT:case K.TH:case K.THEAD:case K.TR:break;default:vR(e,t)}}function vR(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,_9(e,t),e.fosterParentingEnabled=n}function qve(e,t){e.pendingCharacterTokens.push(t)}function Wve(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function QC(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)vR(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Gve=new Set([K.CAPTION,K.COL,K.COLGROUP,K.TBODY,K.TD,K.TFOOT,K.TH,K.THEAD,K.TR]);function cXe(e,t){const n=t.tagID;Gve.has(n)?e.openElements.hasInTableScope(K.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(K.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Pe.IN_TABLE,gS(e,t)):vc(e,t)}function fXe(e,t){const n=t.tagID;switch(n){case K.CAPTION:case K.TABLE:{e.openElements.hasInTableScope(K.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(K.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Pe.IN_TABLE,n===K.TABLE&&Qk(e,t));break}case K.BODY:case K.COL:case K.COLGROUP:case K.HTML:case K.TBODY:case K.TD:case K.TFOOT:case K.TH:case K.THEAD:case K.TR:break;default:w9(e,t)}}function RG(e,t){switch(t.tagID){case K.HTML:{vc(e,t);break}case K.COL:{e._appendElement(t,bt.HTML),t.ackSelfClosing=!0;break}case K.TEMPLATE:{$0(e,t);break}default:h8(e,t)}}function dXe(e,t){switch(t.tagID){case K.COLGROUP:{e.openElements.currentTagId===K.COLGROUP&&(e.openElements.pop(),e.insertionMode=Pe.IN_TABLE);break}case K.TEMPLATE:{Dw(e,t);break}case K.COL:break;default:h8(e,t)}}function h8(e,t){e.openElements.currentTagId===K.COLGROUP&&(e.openElements.pop(),e.insertionMode=Pe.IN_TABLE,e._processToken(t))}function E9(e,t){switch(t.tagID){case K.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_ROW;break}case K.TH:case K.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ze.TR,K.TR),e.insertionMode=Pe.IN_ROW,S9(e,t);break}case K.CAPTION:case K.COL:case K.COLGROUP:case K.TBODY:case K.TFOOT:case K.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE,gS(e,t));break}default:gS(e,t)}}function NU(e,t){const n=t.tagID;switch(t.tagID){case K.TBODY:case K.TFOOT:case K.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE);break}case K.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE,Qk(e,t));break}case K.BODY:case K.CAPTION:case K.COL:case K.COLGROUP:case K.HTML:case K.TD:case K.TH:case K.TR:break;default:Qk(e,t)}}function S9(e,t){switch(t.tagID){case K.TH:case K.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_CELL,e.activeFormattingElements.insertMarker();break}case K.CAPTION:case K.COL:case K.COLGROUP:case K.TBODY:case K.TFOOT:case K.THEAD:case K.TR:{e.openElements.hasInTableScope(K.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE_BODY,E9(e,t));break}default:gS(e,t)}}function Yve(e,t){switch(t.tagID){case K.TR:{e.openElements.hasInTableScope(K.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE_BODY);break}case K.TABLE:{e.openElements.hasInTableScope(K.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE_BODY,NU(e,t));break}case K.TBODY:case K.TFOOT:case K.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(K.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE_BODY,NU(e,t));break}case K.BODY:case K.CAPTION:case K.COL:case K.COLGROUP:case K.HTML:case K.TD:case K.TH:break;default:Qk(e,t)}}function hXe(e,t){const n=t.tagID;Gve.has(n)?(e.openElements.hasInTableScope(K.TD)||e.openElements.hasInTableScope(K.TH))&&(e._closeTableCell(),S9(e,t)):vc(e,t)}function pXe(e,t){const n=t.tagID;switch(n){case K.TD:case K.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Pe.IN_ROW);break}case K.TABLE:case K.TBODY:case K.TFOOT:case K.THEAD:case K.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),Yve(e,t));break}case K.BODY:case K.CAPTION:case K.COL:case K.COLGROUP:case K.HTML:break;default:w9(e,t)}}function Kve(e,t){switch(t.tagID){case K.HTML:{vc(e,t);break}case K.OPTION:{e.openElements.currentTagId===K.OPTION&&e.openElements.pop(),e._insertElement(t,bt.HTML);break}case K.OPTGROUP:{e.openElements.currentTagId===K.OPTION&&e.openElements.pop(),e.openElements.currentTagId===K.OPTGROUP&&e.openElements.pop(),e._insertElement(t,bt.HTML);break}case K.INPUT:case K.KEYGEN:case K.TEXTAREA:case K.SELECT:{e.openElements.hasInSelectScope(K.SELECT)&&(e.openElements.popUntilTagNamePopped(K.SELECT),e._resetInsertionMode(),t.tagID!==K.SELECT&&e._processStartTag(t));break}case K.SCRIPT:case K.TEMPLATE:{$0(e,t);break}}}function Xve(e,t){switch(t.tagID){case K.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===K.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===K.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===K.OPTGROUP&&e.openElements.pop();break}case K.OPTION:{e.openElements.currentTagId===K.OPTION&&e.openElements.pop();break}case K.SELECT:{e.openElements.hasInSelectScope(K.SELECT)&&(e.openElements.popUntilTagNamePopped(K.SELECT),e._resetInsertionMode());break}case K.TEMPLATE:{Dw(e,t);break}}}function mXe(e,t){const n=t.tagID;n===K.CAPTION||n===K.TABLE||n===K.TBODY||n===K.TFOOT||n===K.THEAD||n===K.TR||n===K.TD||n===K.TH?(e.openElements.popUntilTagNamePopped(K.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Kve(e,t)}function gXe(e,t){const n=t.tagID;n===K.CAPTION||n===K.TABLE||n===K.TBODY||n===K.TFOOT||n===K.THEAD||n===K.TR||n===K.TD||n===K.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(K.SELECT),e._resetInsertionMode(),e.onEndTag(t)):Xve(e,t)}function yXe(e,t){switch(t.tagID){case K.BASE:case K.BASEFONT:case K.BGSOUND:case K.LINK:case K.META:case K.NOFRAMES:case K.SCRIPT:case K.STYLE:case K.TEMPLATE:case K.TITLE:{$0(e,t);break}case K.CAPTION:case K.COLGROUP:case K.TBODY:case K.TFOOT:case K.THEAD:{e.tmplInsertionModeStack[0]=Pe.IN_TABLE,e.insertionMode=Pe.IN_TABLE,gS(e,t);break}case K.COL:{e.tmplInsertionModeStack[0]=Pe.IN_COLUMN_GROUP,e.insertionMode=Pe.IN_COLUMN_GROUP,RG(e,t);break}case K.TR:{e.tmplInsertionModeStack[0]=Pe.IN_TABLE_BODY,e.insertionMode=Pe.IN_TABLE_BODY,E9(e,t);break}case K.TD:case K.TH:{e.tmplInsertionModeStack[0]=Pe.IN_ROW,e.insertionMode=Pe.IN_ROW,S9(e,t);break}default:e.tmplInsertionModeStack[0]=Pe.IN_BODY,e.insertionMode=Pe.IN_BODY,vc(e,t)}}function vXe(e,t){t.tagID===K.TEMPLATE&&Dw(e,t)}function Qve(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(K.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):kG(e,t)}function bXe(e,t){t.tagID===K.HTML?vc(e,t):p8(e,t)}function Jve(e,t){var n;if(t.tagID===K.HTML){if(e.fragmentContext||(e.insertionMode=Pe.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===K.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else p8(e,t)}function p8(e,t){e.insertionMode=Pe.IN_BODY,_9(e,t)}function xXe(e,t){switch(t.tagID){case K.HTML:{vc(e,t);break}case K.FRAMESET:{e._insertElement(t,bt.HTML);break}case K.FRAME:{e._appendElement(t,bt.HTML),t.ackSelfClosing=!0;break}case K.NOFRAMES:{$0(e,t);break}}}function _Xe(e,t){t.tagID===K.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==K.FRAMESET&&(e.insertionMode=Pe.AFTER_FRAMESET))}function wXe(e,t){switch(t.tagID){case K.HTML:{vc(e,t);break}case K.NOFRAMES:{$0(e,t);break}}}function EXe(e,t){t.tagID===K.HTML&&(e.insertionMode=Pe.AFTER_AFTER_FRAMESET)}function SXe(e,t){t.tagID===K.HTML?vc(e,t):CP(e,t)}function CP(e,t){e.insertionMode=Pe.IN_BODY,_9(e,t)}function TXe(e,t){switch(t.tagID){case K.HTML:{vc(e,t);break}case K.NOFRAMES:{$0(e,t);break}}}function CXe(e,t){t.chars=ao,e._insertCharacters(t)}function AXe(e,t){e._insertCharacters(t),e.framesetOk=!1}function Zve(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==bt.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function kXe(e,t){if(VYe(t))Zve(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===bt.MATHML?Lve(t):r===bt.SVG&&(HYe(t),Fve(t)),CG(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function RXe(e,t){if(t.tagID===K.P||t.tagID===K.BR){Zve(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===bt.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ze.AREA,Ze.BASE,Ze.BASEFONT,Ze.BGSOUND,Ze.BR,Ze.COL,Ze.EMBED,Ze.FRAME,Ze.HR,Ze.IMG,Ze.INPUT,Ze.KEYGEN,Ze.LINK,Ze.META,Ze.PARAM,Ze.SOURCE,Ze.TRACK,Ze.WBR;const IXe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),nie={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function ebe(e,t){const n=jXe(e),r=xve("type",{handlers:{root:PXe,element:NXe,text:DXe,comment:nbe,doctype:OXe,raw:LXe},unknown:FXe}),i={parser:n?new Zre(nie):Zre.getFragmentParser(void 0,nie),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),NT(i,_g());const s=n?i.parser.document:i.parser.getFragment(),o=VGe(s,{file:i.options.file});return i.stitches&&wG(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function tbe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function PXe(e,t){tbe(e.children,t)}function NXe(e,t){$Xe(e,t),tbe(e.children,t),BXe(e,t)}function DXe(e,t){const n={type:Ur.CHARACTER,chars:e.value,location:bR(e)};NT(t,_g(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function OXe(e,t){const n={type:Ur.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:bR(e)};NT(t,_g(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function MXe(e,t){t.stitches=!0;const n=UXe(e);if("children"in e&&"children"in n){const r=ebe({type:"root",children:e.children},t.options);n.children=r.children}nbe({type:"comment",value:{stitch:n}},t)}function nbe(e,t){const n=e.value,r={type:Ur.COMMENT,data:n,location:bR(e)};NT(t,_g(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function LXe(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,rbe(t,_g(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function FXe(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))MXe(n,t);else{let r="";throw IXe.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function NT(e,t){rbe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=ga.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function rbe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function $Xe(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===ga.PLAINTEXT)return;NT(t,_g(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:w_.html;i===w_.html&&n==="svg"&&(i=w_.svg);const s=GGe({...e,children:[]},{space:i===w_.svg?"svg":"html"}),o={type:Ur.START_TAG,tagName:n,tagID:PT(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:bR(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function BXe(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&tYe.includes(n)||t.parser.tokenizer.state===ga.PLAINTEXT)return;NT(t,y9(e));const r={type:Ur.END_TAG,tagName:n,tagID:PT(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:bR(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===ga.RCDATA||t.parser.tokenizer.state===ga.RAWTEXT||t.parser.tokenizer.state===ga.SCRIPT_DATA)&&(t.parser.tokenizer.state=ga.DATA)}function jXe(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function bR(e){const t=_g(e)||{line:void 0,column:void 0,offset:void 0},n=y9(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function UXe(e){return"children"in e?mS({...e,children:[]}):mS(e)}function zXe(e){return function(t,n){return ebe(t,{...e,file:n})}}function dc({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return k.jsx(qb,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return k.jsx(At,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return k.jsx(co,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return k.jsx(co,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return k.jsx(co,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return k.jsx(co,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return k.jsx(co,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return k.jsx(co,{...s,order:6,...s,pb:12})},a({node:i,...s}){return k.jsx(kw,{...s,ref:void 0})},ul({node:i,...s}){return k.jsx(b0,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return k.jsx(b0,{type:"ordered",withPadding:!0,...o,pb:8})}};return k.jsx(IGe,{components:n,rehypePlugins:[zXe],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function AP({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return k.jsx(dc,{text:n})}const W2=14;function VXe({completed:e,inProgress:t,rejected:n}){return k.jsxs(An,{ml:4,gap:4,children:[k.jsx(Ys,{label:"Completed",children:k.jsx(v0,{variant:"light",color:"green",leftSection:k.jsx(m9,{width:W2,height:W2,style:{paddingTop:1}}),pb:1,children:e})}),k.jsx(Ys,{label:"In Progress",children:k.jsx(v0,{variant:"light",color:"orange",leftSection:k.jsx(I1e,{width:W2,height:W2,style:{paddingTop:1}}),pb:1,children:t})}),k.jsx(Ys,{label:"Rejected",children:k.jsx(v0,{variant:"light",color:"red",leftSection:k.jsx(pR,{width:W2,height:W2,style:{paddingTop:1}}),pb:1,children:n})})]})}const HXe={},qXe=Object.freeze(Object.defineProperty({__proto__:null,default:HXe},Symbol.toStringTag,{value:"Module"})),ibe=I8e(qXe);var YF,rie;function T9(){if(rie)return YF;rie=1;var e=ibe;function t(o,a){var u,l="",c=0,f=!0,d=0,h;function p(){return h=o.charAt(d),d++,h}for(p(),h==="-"&&(l="-",p());h>="0"&&h<="9";)f&&(h=="0"?c++:f=!1),l+=h,p();if(f&&c--,h===".")for(l+=".";p()&&h>="0"&&h<="9";)l+=h;if(h==="e"||h==="E")for(l+=h,p(),(h==="-"||h==="+")&&(l+=h,p());h>="0"&&h<="9";)l+=h,p();for(;h&&h<=" ";)p();if(a&&(h===","||h==="}"||h==="]"||h==="#"||h==="/"&&(o[d]==="/"||o[d]==="*"))&&(h=0),u=+l,!(h||c||!isFinite(u)))return u}function n(o,a){return Object.defineProperty&&Object.defineProperty(o,"__COMMENTS__",{enumerable:!1,writable:!0}),o.__COMMENTS__=a||{}}function r(o){Object.defineProperty(o,"__COMMENTS__",{value:void 0})}function i(o){return o.__COMMENTS__}function s(o){if(!o)return"";var a=o.split(`
`),u,l,c,f;for(c=0;c<a.length;c++)for(u=a[c],f=u.length,l=0;l<f;l++){var d=u[l];if(d==="#")break;if(d==="/"&&(u[l+1]==="/"||u[l+1]==="*")){u[l+1]==="*"&&(c=a.length);break}else if(d>" "){a[c]="# "+u;break}}return a.join(`
`)}return YF={EOL:e.EOL||`
`,tryParseNumber:t,createComment:n,removeComment:r,getComment:i,forceComment:s},YF}var KF,iie;function WXe(){return iie||(iie=1,KF="3.2.1"),KF}var XF,sie;function IG(){if(sie)return XF;sie=1;function e(a,u){if(Object.prototype.toString.apply(a)!=="[object Array]"){if(a)throw new Error("dsf option must contain an array!");return n}else if(a.length===0)return n;var l=[];function c(f){return{}.toString.call(f)==="[object Function]"}return a.forEach(function(f){if(!f.name||!c(f.parse)||!c(f.stringify))throw new Error("extension does not match the DSF interface");l.push(function(){try{if(u=="parse")return f.parse.apply(null,arguments);if(u=="stringify"){var d=f.stringify.apply(null,arguments);if(d!==void 0&&(typeof d!="string"||d.length===0||d[0]==='"'||[].some.call(d,function(h){return r(h)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+d);return d}else throw new Error("Invalid type")}catch(h){throw new Error("DSF-"+f.name+" failed; "+h.message)}})}),t.bind(null,l)}function t(a,u){if(a)for(var l=0;l<a.length;l++){var c=a[l](u);if(c!==void 0)return c}}function n(){}function r(a){return a==="{"||a==="}"||a==="["||a==="]"||a===","}function i(){return{name:"math",parse:function(a){switch(a){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(a){if(typeof a=="number"){if(1/a===-1/0)return"-0";if(a===1/0)return"Inf";if(a===-1/0)return"-Inf";if(isNaN(a))return"NaN"}}}}i.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function s(a){var u=a&&a.out;return{name:"hex",parse:function(l){if(/^0x[0-9A-Fa-f]+$/.test(l))return parseInt(l,16)},stringify:function(l){if(u&&Number.isInteger(l))return"0x"+l.toString(16)}}}s.description="parse hexadecimal numbers prefixed with 0x";function o(){return{name:"date",parse:function(a){if(/^\d{4}-\d{2}-\d{2}$/.test(a)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(a)){var u=Date.parse(a);if(!isNaN(u))return new Date(u)}},stringify:function(a){if(Object.prototype.toString.call(a)==="[object Date]"){var u=a.toISOString();return u.indexOf("T00:00:00.000Z",u.length-14)!==-1?u.substr(0,10):u}}}}return o.description="support ISO dates",XF={loadDsf:e,std:{math:i,hex:s,date:o}},XF}var QF,oie;function GXe(){return oie||(oie=1,QF=function(e,t){var n=T9(),r=IG(),i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(B){return B==="{"||B==="}"||B==="["||B==="]"||B===","||B===":"}function d(B){var z,G=0,Z=1;for(z=s-1;z>0&&i[z]!==`
`;z--,G++);for(;z>0;z--)i[z]===`
`&&Z++;throw new Error(B+" at line "+Z+","+G+" >>>"+i.substr(s-G,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(B){return i.charAt(s+B)}function m(B){for(var z="",G=o;h();){if(o===G)return h(),B&&G==="'"&&o==="'"&&z.length===0?(h(),g()):z;if(o==="\\")if(h(),o==="u"){for(var Z=0,ne=0;ne<4;ne++){h();var ue=o.charCodeAt(0),X;o>="0"&&o<="9"?X=ue-48:o>="a"&&o<="f"?X=ue-97+10:o>="A"&&o<="F"?X=ue-65+10:d("Bad \\u char "+o),Z=Z*16+X}z+=String.fromCharCode(Z)}else if(typeof a[o]=="string")z+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):z+=o}d("Bad string")}function g(){for(var B="",z=0,G=0;;){var Z=p(-G-5);if(!Z||Z===`
`)break;G++}function ne(){for(var ue=G;o&&o<=" "&&o!==`
`&&ue-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),ne());;){if(!o)d("Bad multiline string");else if(o==="'"){if(z++,h(),z===3)return B.slice(-1)===`
`&&(B=B.slice(0,-1)),B;continue}else for(;z>0;)B+="'",z--;o===`
`?(B+=`
`,h(),ne()):(o!=="\r"&&(B+=o),h())}}function b(){if(o==='"'||o==="'")return m(!1);for(var B="",z=s,G=-1;;){if(o===":")return B?G>=0&&G!==B.length&&(s=z+G,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),B;o<=" "?o?G<0&&(G=B.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):B+=o,h()}}function y(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function x(){var B=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var z=o==="\r"||o===`
`||o==="";if(z||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var G=B[0];switch(G){case"f":if(B.trim()==="false")return!1;break;case"n":if(B.trim()==="null")return null;break;case"t":if(B.trim()==="true")return!0;break;default:if(G==="-"||G>="0"&&G<="9"){var Z=n.tryParseNumber(B);if(Z!==void 0)return Z}}if(z){B=B.trim();var ne=l(B);return ne!==void 0?ne:B}}B+=o}}function w(B,z){var G;for(B--,G=s-2;G>B&&i[G]<=" "&&i[G]!==`
`;G--);i[G]===`
`&&G--,i[G]==="\r"&&G--;var Z=i.substr(B,G-B+1);for(G=0;G<Z.length;G++)if(Z[G]>" "){var ne=Z.indexOf(`
`);if(ne>=0){var ue=[Z.substr(0,ne),Z.substr(ne+1)];return z&&ue[0].trim().length===0&&ue.shift(),ue}else return[Z]}return[]}function S(B){function z(Z,ne){var ue,X,q,te;switch(typeof Z){case"string":Z.indexOf(ne)>=0&&(te=Z);break;case"object":if(Object.prototype.toString.apply(Z)==="[object Array]")for(ue=0,q=Z.length;ue<q;ue++)te=z(Z[ue],ne)||te;else for(X in Z)Object.prototype.hasOwnProperty.call(Z,X)&&(te=z(Z[X],ne)||te)}return te}function G(Z){var ne=z(B,Z);return ne?"found '"+Z+`' in a string value, your mistake could be with:
  > `+ne+`
  (unquoted strings contain everything up to the next line!)`:""}return G("}")||G("]")}function C(){var B=[],z,G,Z;try{if(u&&(z=n.createComment(B,{a:[]})),h(),G=s,y(),z&&(Z=w(G,!0).join(`
`)),o==="]")return h(),z&&(z.e=[Z]),B;for(;o;){if(B.push(I()),G=s,y(),o===","&&(h(),G=s,y()),z){var ne=w(G);z.a.push([Z||"",ne[0]||""]),Z=ne[1]}if(o==="]")return h(),z&&(z.a[z.a.length-1][1]+=Z||""),B;y()}d("End of input while parsing an array (missing ']')")}catch(ue){throw ue.hint=ue.hint||S(B),ue}}function R(B){var z="",G={},Z,ne,ue;try{if(u&&(Z=n.createComment(G,{c:{},o:[]})),B?ne=1:(h(),ne=s),y(),Z&&(ue=w(ne,!0).join(`
`)),o==="}"&&!B)return Z&&(Z.e=[ue]),h(),G;for(;o;){if(z=b(),y(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),G[z]=I(),ne=s,y(),o===","&&(h(),ne=s,y()),Z){var X=w(ne);Z.c[z]=[ue||"",X[0]||""],ue=X[1],Z.o.push(z)}if(o==="}"&&!B)return h(),Z&&(Z.c[z][1]+=ue||""),G;y()}if(B)return G;d("End of input while parsing an object (missing '}')")}catch(q){throw q.hint=q.hint||S(G),q}}function I(){switch(y(),o){case"{":return R();case"[":return C();case"'":case'"':return m(!0);default:return x()}}function O(B,z){var G=s;if(y(),o&&d("Syntax error, found trailing characters"),u){var Z=z.join(`
`),ne=w(G).join(`
`);if(ne||Z){var ue=n.createComment(B,n.getComment(B));ue.r=[Z,ne]}}return B}function M(){y();var B=u?w(1):null;switch(o){case"{":return O(R(),B);case"[":return O(C(),B);default:return O(I(),B)}}function L(){y();var B=u?w(1):null;switch(o){case"{":return O(R(),B);case"[":return O(C(),B)}try{return O(R(!0),B)}catch(z){c();try{return O(I(),B)}catch{throw z}}}if(typeof e!="string")throw new Error("source is not a string");var H=null,D=!0;return t&&typeof t=="object"&&(u=t.keepWsc,H=t.dsf,D=t.legacyRoot!==!1),l=r.loadDsf(H,"parse"),i=e,c(),D?L():M()}),QF}var JF,aie;function YXe(){return aie||(aie=1,JF=function(e,t){var n=T9(),r=IG(),i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var b,y=Object.keys(i);for(b=y.length-1;b>=0;b--){var x=y[b];g[x].push(i[x][0].length,i[x][1].length)}}var w,S="---\u2028--\uFEFF-",C=new RegExp('[\\\\\\"\0-'+S+"]","g"),R=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+S+"]","g"),I=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+S+"]","g"),O=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),M={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},L=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,H="",D=0;function B(te,W){return D+=te[0].length+te[1].length-te[2]-te[3],te[0]+W+te[1]}function z(te){return te.replace(C,function(W){var ee=M[W];return typeof ee=="string"?B(g.esc,ee):B(g.uni,("0000"+W.charCodeAt(0).toString(16)).slice(-4))})}function G(te,W,ee,oe){return te?(R.lastIndex=0,O.lastIndex=0,c||ee||R.test(te)||n.tryParseNumber(te,!0)!==void 0||O.test(te)?(C.lastIndex=0,I.lastIndex=0,C.test(te)?!I.test(te)&&!oe&&d?Z(te,W):B(g.qstr,z(te)):B(g.qstr,te)):B(g.str,te)):B(g.qstr,"")}function Z(te,W){var ee,oe=te.replace(/\r/g,"").split(`
`);if(W+=o,oe.length===1)return B(g.mstr,oe[0]);var pe=s+W+g.mstr[0];for(ee=0;ee<oe.length;ee++)pe+=s,oe[ee]&&(pe+=W+oe[ee]);return pe+s+W+g.mstr[1]}function ne(te){return te?l||L.test(te)?(C.lastIndex=0,B(g.qkey,C.test(te)?z(te):te)):B(g.key,te):'""'}function ue(te,W,ee,oe){function pe(Hn){return Hn&&Hn[Hn[0]==="\r"?1:0]===`
`}function ce(Hn){return Hn&&!pe(Hn)}function he(Hn,nr,Ei){if(!Hn)return"";Hn=n.forceComment(Hn);var Dr,Co=Hn.length;for(Dr=0;Dr<Co&&Hn[Dr]<=" ";Dr++);return Ei&&Dr>0&&(Hn=Hn.substr(Dr)),Dr<Co?nr+B(g.rem,Hn):Hn}var Ee=w(te);if(Ee!==void 0)return B(g.dsf,Ee);switch(typeof te){case"string":return G(te,H,W,oe);case"number":return isFinite(te)?B(g.num,String(te)):B(g.lit,"null");case"boolean":return B(g.lit,String(te));case"object":if(!te)return B(g.lit,"null");var Ae;a&&(Ae=n.getComment(te));var ge=Object.prototype.toString.apply(te)==="[object Array]",me=H;H+=o;var Oe=s+me,Me=s+H,Ye=ee||u?"":Oe,lt=[],We,nt=f?[]:null,yt=c,_t=d,It=h?"":g.com[0],Et=0,Ke,Lt,sn,Fe,Qe,wt,Vt,Wt,bn;if(ge){for(Ke=0,Lt=te.length;Ke<Lt;Ke++){if(We=Ke<Lt-1,Ae?(wt=Ae.a[Ke]||[],Vt=ce(wt[1]),lt.push(he(wt[0],`
`)+Me),nt&&(wt[0]||wt[1]||Vt)&&(nt=null)):lt.push(Me),D=0,Fe=te[Ke],lt.push(ue(Fe,Ae?Vt:!1,!0)+(We?h:"")),nt){switch(typeof Fe){case"string":D=0,c=!0,d=0,nt.push(ue(Fe,!1,!0)+(We?g.com[0]:"")),c=yt,d=_t;break;case"object":if(Fe){nt=null;break}default:nt.push(lt[lt.length-1]+(We?It:""));break}We&&(D+=g.com[0].length-g.com[2]),Et+=D}Ae&&wt[1]&&lt.push(he(wt[1],Vt?" ":`
`,Vt))}Lt===0?Ae&&Ae.e&&lt.push(he(Ae.e[0],`
`)+Oe):lt.push(Oe),lt.length===0?Wt=B(g.arr,""):(Wt=Ye+B(g.arr,lt.join("")),nt&&(bn=nt.join(" "),bn.length-Et<=f&&(Wt=B(g.arr,bn))))}else{var Dn=Ae?Ae.o.slice():[],Zn=[];for(sn in te)Object.prototype.hasOwnProperty.call(te,sn)&&Dn.indexOf(sn)<0&&Zn.push(sn);m&&Zn.sort();var wr=Dn.concat(Zn);for(Ke=0,Lt=wr.length;Ke<Lt;Ke++)if(We=Ke<Lt-1,sn=wr[Ke],Ae?(wt=Ae.c[sn]||[],Vt=ce(wt[1]),lt.push(he(wt[0],`
`)+Me),nt&&(wt[0]||wt[1]||Vt)&&(nt=null)):lt.push(Me),D=0,Fe=te[sn],Qe=ue(Fe,Ae&&Vt),lt.push(ne(sn)+g.col[0]+(pe(Qe)?"":" ")+Qe+(We?h:"")),Ae&&wt[1]&&lt.push(he(wt[1],Vt?" ":`
`,Vt)),nt){switch(typeof Fe){case"string":D=0,c=!0,d=0,Qe=ue(Fe,!1),c=yt,d=_t,nt.push(ne(sn)+g.col[0]+" "+Qe+(We?g.com[0]:""));break;case"object":if(Fe){nt=null;break}default:nt.push(lt[lt.length-1]+(We?It:""));break}D+=g.col[0].length-g.col[2],We&&(D+=g.com[0].length-g.com[2]),Et+=D}Lt===0?Ae&&Ae.e&&lt.push(he(Ae.e[0],`
`)+Oe):lt.push(Oe),lt.length===0?Wt=B(g.obj,""):(Wt=Ye+B(g.obj,lt.join("")),nt&&(bn=nt.join(" "),bn.length-Et<=f&&(Wt=B(g.obj,bn))))}return H=me,Wt}}w=r.loadDsf(p,"stringify");var X="",q=a?q=(n.getComment(e)||{}).r:null;return q&&q[0]&&(X=q[0]+`
`),X+=ue(e,null,!0,!0),q&&(X+=q[1]||""),X}),JF}var ZF,uie;function KXe(){if(uie)return ZF;uie=1;var e=T9();function t(c,f,d){var h;return c&&(h={b:c}),f&&((h=h||{}).a=f),d&&((h=h||{}).x=d),h}function n(c,f){if(!(c===null||typeof c!="object")){var d=e.getComment(c);d&&e.removeComment(c);var h,p,m,g;if(Object.prototype.toString.apply(c)==="[object Array]"){for(g={a:{}},h=0,p=c.length;h<p;h++)s(g.a,h,d.a[h],n(c[h]))&&(m=!0);!m&&d.e&&(g.e=t(d.e[0],d.e[1]),m=!0)}else{g={s:{}};var b,y=Object.keys(c);for(d&&d.o?(b=[],d.o.concat(y).forEach(function(w){Object.prototype.hasOwnProperty.call(c,w)&&b.indexOf(w)<0&&b.push(w)})):b=y,g.o=b,h=0,p=b.length;h<p;h++){var x=b[h];s(g.s,x,d.c[x],n(c[x]))&&(m=!0)}!m&&d.e&&(g.e=t(d.e[0],d.e[1]),m=!0)}return f&&d&&d.r&&(g.r=t(d.r[0],d.r[1])),m?g:void 0}}function r(){var c="";return[].forEach.call(arguments,function(f){f&&f.trim()!==""&&(c&&(c+="; "),c+=f.trim())}),c}function i(c,f){var d=[];if(u(c,f,d,[]),d.length>0){var h=l(f,null,1);h+=`
# Orphaned comments:
`,d.forEach(function(p){h+=("# "+p.path.join("/")+": "+r(p.b,p.a,p.e)).replace(`
`,"\\n ")+`
`}),l(f,h,1)}}function s(c,f,d,h){var p=t(d?d[0]:void 0,d?d[1]:void 0,h);return p&&(c[f]=p),p}function o(c,f){var d=t(f.b,f.a);return d.path=c,d}function a(c,f,d){if(c){var h,p;if(c.a)for(h=0,p=c.a.length;h<p;h++){var m=d.slice().concat([h]),g=c.a[h];g&&(f.push(o(m,g)),a(g.x,f,m))}else c.o&&c.o.forEach(function(b){var y=d.slice().concat([b]),x=c.s[b];x&&(f.push(o(y,x)),a(x.x,f,y))});c.e&&f.push(o(d,c.e))}}function u(c,f,d,h){if(c){if(f===null||typeof f!="object"){a(c,d,h);return}var p,m=e.createComment(f);if(h.length===0&&c.r&&(m.r=[c.r.b,c.r.a]),Object.prototype.toString.apply(f)==="[object Array]"){m.a=[];var g=c.a||{};for(var b in g)if(g.hasOwnProperty(b)){p=parseInt(b);var y=c.a[b];if(y){var x=h.slice().concat([p]);p<f.length?(m.a[p]=[y.b,y.a],u(y.x,f[p],d,x)):(d.push(o(x,y)),a(y.x,d,x))}}p===0&&c.e&&(m.e=[c.e.b,c.e.a])}else m.c={},m.o=[],(c.o||[]).forEach(function(w){var S=h.slice().concat([w]),C=c.s[w];Object.prototype.hasOwnProperty.call(f,w)?(m.o.push(w),C&&(m.c[w]=[C.b,C.a],u(C.x,f[w],d,S))):C&&(d.push(o(S,C)),a(C.x,d,S))}),c.e&&(m.e=[c.e.b,c.e.a])}}function l(c,f,d){var h=e.createComment(c,e.getComment(c));return h.r||(h.r=["",""]),(f||f==="")&&(h.r[d]=e.forceComment(f)),h.r[d]||""}return ZF={extract:function(c){return n(c,!0)},merge:i,header:function(c,f){return l(c,f,0)},footer:function(c,f){return l(c,f,1)}},ZF}/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var e$,lie;function XXe(){if(lie)return e$;lie=1;var e=T9(),t=WXe(),n=GXe(),r=YXe(),i=KXe(),s=IG();return e$={parse:n,stringify:r,endOfLine:function(){return e.EOL},setEndOfLine:function(o){(o===`
`||o===`\r
`)&&(e.EOL=o)},version:t,rt:{parse:function(o,a){return(a=a||{}).keepWsc=!0,n(o,a)},stringify:function(o,a){return(a=a||{}).keepWsc=!0,r(o,a)}},comments:i,dsf:s.std},e$}var QXe=XXe(),cie={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sbe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},JXe=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},PG={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(sbe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):JXe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new ZXe;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ZXe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eQe=function(e){const t=sbe(e);return PG.encodeByteArray(t,!0)},m8=function(e){return eQe(e).replace(/\./g,"")},obe=function(e){try{return PG.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function abe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tQe=()=>abe().__FIREBASE_DEFAULTS__,nQe=()=>{if(typeof process>"u"||typeof cie>"u")return;const e=cie.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},rQe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&obe(e[1]);return t&&JSON.parse(t)},C9=()=>{try{return tQe()||nQe()||rQe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},ube=e=>{var t,n;return(n=(t=C9())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},iQe=e=>{const t=ube(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},lbe=()=>{var e;return(e=C9())===null||e===void 0?void 0:e.config},cbe=e=>{var t;return(t=C9())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sQe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[m8(JSON.stringify(n)),m8(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oQe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hc())}function aQe(){var e;const t=(e=C9())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uQe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lQe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function cQe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fQe(){const e=hc();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function dQe(){return!aQe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NG(){try{return typeof indexedDB=="object"}catch{return!1}}function hQe(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pQe="FirebaseError";class wg extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=pQe,Object.setPrototypeOf(this,wg.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,DT.prototype.create)}}class DT{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?mQe(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new wg(i,a,r)}}function mQe(e,t){return e.replace(gQe,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const gQe=/\{\$([^}]+)}/g;function yQe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Zk(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(fie(s)&&fie(o)){if(!Zk(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function fie(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function vQe(e,t){const n=new bQe(e,t);return n.subscribe.bind(n)}class bQe{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xQe(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=t$),i.error===void 0&&(i.error=t$),i.complete===void 0&&(i.complete=t$);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xQe(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function t$(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Qe=1e3,wQe=2,EQe=4*60*60*1e3,SQe=.5;function TQe(e,t=_Qe,n=wQe){const r=t*Math.pow(n,e),i=Math.round(SQe*r*(Math.random()-.5)*2);return Math.min(EQe,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(e){return e&&e._delegate?e._delegate:e}class sg{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CQe=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Jk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(kQe(t))try{this.getOrInitializeService({instanceIdentifier:i_})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=i_){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=i_){return this.instances.has(t)}getOptions(t=i_){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AQe(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=i_){return this.component?this.component.multipleInstances?t:i_:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function AQe(e){return e===i_?void 0:e}function kQe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RQe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new CQe(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ni;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ni||(ni={}));const IQe={debug:ni.DEBUG,verbose:ni.VERBOSE,info:ni.INFO,warn:ni.WARN,error:ni.ERROR,silent:ni.SILENT},PQe=ni.INFO,NQe={[ni.DEBUG]:"log",[ni.VERBOSE]:"log",[ni.INFO]:"info",[ni.WARN]:"warn",[ni.ERROR]:"error"},DQe=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=NQe[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class A9{constructor(t){this.name=t,this._logLevel=PQe,this._logHandler=DQe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ni))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?IQe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ni.DEBUG,...t),this._logHandler(this,ni.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ni.VERBOSE,...t),this._logHandler(this,ni.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ni.INFO,...t),this._logHandler(this,ni.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ni.WARN,...t),this._logHandler(this,ni.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ni.ERROR,...t),this._logHandler(this,ni.ERROR,...t)}}const OQe=(e,t)=>t.some(n=>e instanceof n);let die,hie;function MQe(){return die||(die=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LQe(){return hie||(hie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fbe=new WeakMap,DU=new WeakMap,dbe=new WeakMap,n$=new WeakMap,DG=new WeakMap;function FQe(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(Kv(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&fbe.set(n,e)}).catch(()=>{}),DG.set(t,e),t}function $Qe(e){if(DU.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});DU.set(e,t)}let OU={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return DU.get(e);if(t==="objectStoreNames")return e.objectStoreNames||dbe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kv(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function BQe(e){OU=e(OU)}function jQe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(r$(this),t,...n);return dbe.set(r,t.sort?t.sort():[t]),Kv(r)}:LQe().includes(e)?function(...t){return e.apply(r$(this),t),Kv(fbe.get(this))}:function(...t){return Kv(e.apply(r$(this),t))}}function UQe(e){return typeof e=="function"?jQe(e):(e instanceof IDBTransaction&&$Qe(e),OQe(e,MQe())?new Proxy(e,OU):e)}function Kv(e){if(e instanceof IDBRequest)return FQe(e);if(n$.has(e))return n$.get(e);const t=UQe(e);return t!==e&&(n$.set(e,t),DG.set(t,e)),t}const r$=e=>DG.get(e);function zQe(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=Kv(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Kv(o.result),u.oldVersion,u.newVersion,Kv(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const VQe=["get","getKey","getAll","getAllKeys","count"],HQe=["put","add","delete","clear"],i$=new Map;function pie(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(i$.get(t))return i$.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=HQe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||VQe.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return i$.set(t,s),s}BQe(e=>({...e,get:(t,n,r)=>pie(t,n)||e.get(t,n,r),has:(t,n)=>!!pie(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(WQe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function WQe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const MU="@firebase/app",mie="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=new A9("@firebase/app"),GQe="@firebase/app-compat",YQe="@firebase/analytics-compat",KQe="@firebase/analytics",XQe="@firebase/app-check-compat",QQe="@firebase/app-check",JQe="@firebase/auth",ZQe="@firebase/auth-compat",eJe="@firebase/database",tJe="@firebase/data-connect",nJe="@firebase/database-compat",rJe="@firebase/functions",iJe="@firebase/functions-compat",sJe="@firebase/installations",oJe="@firebase/installations-compat",aJe="@firebase/messaging",uJe="@firebase/messaging-compat",lJe="@firebase/performance",cJe="@firebase/performance-compat",fJe="@firebase/remote-config",dJe="@firebase/remote-config-compat",hJe="@firebase/storage",pJe="@firebase/storage-compat",mJe="@firebase/firestore",gJe="@firebase/vertexai",yJe="@firebase/firestore-compat",vJe="firebase",bJe="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU="[DEFAULT]",xJe={[MU]:"fire-core",[GQe]:"fire-core-compat",[KQe]:"fire-analytics",[YQe]:"fire-analytics-compat",[QQe]:"fire-app-check",[XQe]:"fire-app-check-compat",[JQe]:"fire-auth",[ZQe]:"fire-auth-compat",[eJe]:"fire-rtdb",[tJe]:"fire-data-connect",[nJe]:"fire-rtdb-compat",[rJe]:"fire-fn",[iJe]:"fire-fn-compat",[sJe]:"fire-iid",[oJe]:"fire-iid-compat",[aJe]:"fire-fcm",[uJe]:"fire-fcm-compat",[lJe]:"fire-perf",[cJe]:"fire-perf-compat",[fJe]:"fire-rc",[dJe]:"fire-rc-compat",[hJe]:"fire-gcs",[pJe]:"fire-gcs-compat",[mJe]:"fire-fst",[yJe]:"fire-fst-compat",[gJe]:"fire-vertex","fire-js":"fire-js",[vJe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g8=new Map,_Je=new Map,FU=new Map;function gie(e,t){try{e.container.addComponent(t)}catch(n){d1.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function h1(e){const t=e.name;if(FU.has(t))return d1.debug(`There were multiple attempts to register component ${t}.`),!1;FU.set(t,e);for(const n of g8.values())gie(n,e);for(const n of _Je.values())gie(n,e);return!0}function OT(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Fm(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wJe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xv=new DT("app","Firebase",wJe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EJe{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sg("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Xv.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=bJe;function hbe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:LU,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Xv.create("bad-app-name",{appName:String(i)});if(n||(n=lbe()),!n)throw Xv.create("no-options");const s=g8.get(i);if(s){if(Zk(n,s.options)&&Zk(r,s.config))return s;throw Xv.create("duplicate-app",{appName:i})}const o=new RQe(i);for(const u of FU.values())o.addComponent(u);const a=new EJe(n,r,o);return g8.set(i,a),a}function OG(e=LU){const t=g8.get(e);if(!t&&e===LU&&lbe())return hbe();if(!t)throw Xv.create("no-app",{appName:e});return t}function x0(e,t,n){var r;let i=(r=xJe[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),d1.warn(a.join(" "));return}h1(new sg(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SJe="firebase-heartbeat-database",TJe=1,e4="firebase-heartbeat-store";let s$=null;function pbe(){return s$||(s$=zQe(SJe,TJe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(e4)}catch(n){console.warn(n)}}}}).catch(e=>{throw Xv.create("idb-open",{originalErrorMessage:e.message})})),s$}async function CJe(e){try{const n=(await pbe()).transaction(e4),r=await n.objectStore(e4).get(mbe(e));return await n.done,r}catch(t){if(t instanceof wg)d1.warn(t.message);else{const n=Xv.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});d1.warn(n.message)}}}async function yie(e,t){try{const r=(await pbe()).transaction(e4,"readwrite");await r.objectStore(e4).put(t,mbe(e)),await r.done}catch(n){if(n instanceof wg)d1.warn(n.message);else{const r=Xv.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});d1.warn(r.message)}}}function mbe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AJe=1024,kJe=30*24*60*60*1e3;class RJe{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new PJe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=vie();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=kJe}),this._storage.overwrite(this._heartbeatsCache))}catch(r){d1.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vie(),{heartbeatsToSend:r,unsentEntries:i}=IJe(this._heartbeatsCache.heartbeats),s=m8(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return d1.warn(n),""}}}function vie(){return new Date().toISOString().substring(0,10)}function IJe(e,t=AJe){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),bie(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),bie(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class PJe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NG()?hQe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CJe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yie(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yie(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function bie(e){return m8(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NJe(e){h1(new sg("platform-logger",t=>new qQe(t),"PRIVATE")),h1(new sg("heartbeat",t=>new RJe(t),"PRIVATE")),x0(MU,mie,e),x0(MU,mie,"esm2017"),x0("fire-js","")}NJe("");var DJe="firebase",OJe="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */x0(DJe,OJe,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gbe="firebasestorage.googleapis.com",ybe="storageBucket",MJe=2*60*1e3,LJe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko extends wg{constructor(t,n,r=0){super(o$(t),`Firebase Storage: ${n} (${o$(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ko.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return o$(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Go;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Go||(Go={}));function o$(e){return"storage/"+e}function MG(){const e="An unknown error occurred, please check the error payload for server response.";return new Ko(Go.UNKNOWN,e)}function FJe(e){return new Ko(Go.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function $Je(e){return new Ko(Go.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function BJe(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ko(Go.UNAUTHENTICATED,e)}function jJe(){return new Ko(Go.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function UJe(e){return new Ko(Go.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function zJe(){return new Ko(Go.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function VJe(){return new Ko(Go.CANCELED,"User canceled the upload/download.")}function HJe(e){return new Ko(Go.INVALID_URL,"Invalid URL '"+e+"'.")}function qJe(e){return new Ko(Go.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function WJe(){return new Ko(Go.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ybe+"' property when initializing the app?")}function GJe(){return new Ko(Go.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function YJe(){return new Ko(Go.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function KJe(e){return new Ko(Go.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function $U(e){return new Ko(Go.INVALID_ARGUMENT,e)}function vbe(){return new Ko(Go.APP_DELETED,"The Firebase app was deleted.")}function XJe(e){return new Ko(Go.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vk(e,t){return new Ko(Go.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function JC(e){throw new Ko(Go.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=nf.makeFromUrl(t,n)}catch{return new nf(t,"")}if(r.path==="")return r;throw qJe(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===gbe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",b=new RegExp(`^https?://${m}/${i}/${g}`,"i"),x=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:b,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<x.length;w++){const S=x[w],C=S.regex.exec(t);if(C){const R=C[S.indices.bucket];let I=C[S.indices.path];I||(I=""),r=new nf(R,I),S.postModify(r);break}}if(r==null)throw HJe(t);return r}}class QJe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JJe(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...b){if(l){d();return}if(g){d(),c.call(null,g,...b);return}if(u()||o){d(),c.call(null,g,...b);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,f(x)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function ZJe(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eZe(e){return e!==void 0}function tZe(e){return typeof e=="object"&&!Array.isArray(e)}function LG(e){return typeof e=="string"||e instanceof String}function xie(e){return FG()&&e instanceof Blob}function FG(){return typeof Blob<"u"}function BU(e,t,n,r){if(r<t)throw $U(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw $U(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function bbe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var N_;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(N_||(N_={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nZe(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZe{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new g6(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===N_.NO_ERROR,u=s.getStatus();if(!a||nZe(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===N_.ABORT;r(!1,new g6(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new g6(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());eZe(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=MG();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?vbe():VJe();o(u)}else{const u=zJe();o(u)}};this.canceled_?n(!1,new g6(!1,null,!0)):this.backoffId_=JJe(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&ZJe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class g6{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function iZe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function sZe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function oZe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function aZe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function uZe(e,t,n,r,i,s,o=!0){const a=bbe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return oZe(l,t),iZe(l,n),sZe(l,s),aZe(l,r),new rZe(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lZe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function cZe(...e){const t=lZe();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(FG())return new Blob(e);throw new Ko(Go.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function fZe(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dZe(e){if(typeof atob>"u")throw KJe("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class a${constructor(t,n){this.data=t,this.contentType=n||null}}function hZe(e,t){switch(e){case $m.RAW:return new a$(xbe(t));case $m.BASE64:case $m.BASE64URL:return new a$(_be(e,t));case $m.DATA_URL:return new a$(mZe(t),gZe(t))}throw MG()}function xbe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function pZe(e){let t;try{t=decodeURIComponent(e)}catch{throw vk($m.DATA_URL,"Malformed data URL.")}return xbe(t)}function _be(e,t){switch(e){case $m.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw vk(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case $m.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw vk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=dZe(t)}catch(i){throw i.message.includes("polyfill")?i:vk(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class wbe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw vk($m.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=yZe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function mZe(e){const t=new wbe(e);return t.base64?_be($m.BASE64,t.rest):pZe(t.rest)}function gZe(e){return new wbe(e).contentType}function yZe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(t,n){let r=0,i="";xie(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(xie(this.data_)){const r=this.data_,i=fZe(r,t,n);return i===null?null:new Nv(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Nv(r,!0)}}static getBlob(...t){if(FG()){const n=t.map(r=>r instanceof Nv?r.data_:r);return new Nv(cZe.apply(null,n))}else{const n=t.map(o=>LG(o)?hZe($m.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Nv(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $G(e){let t;try{t=JSON.parse(e)}catch{return null}return tZe(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vZe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function bZe(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function Ebe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xZe(e,t){return t}class qc{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||xZe}}let y6=null;function _Ze(e){return!LG(e)||e.length<2?e:Ebe(e)}function Sbe(){if(y6)return y6;const e=[];e.push(new qc("bucket")),e.push(new qc("generation")),e.push(new qc("metageneration")),e.push(new qc("name","fullPath",!0));function t(s,o){return _Ze(o)}const n=new qc("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new qc("size");return i.xform=r,e.push(i),e.push(new qc("timeCreated")),e.push(new qc("updated")),e.push(new qc("md5Hash",null,!0)),e.push(new qc("cacheControl",null,!0)),e.push(new qc("contentDisposition",null,!0)),e.push(new qc("contentEncoding",null,!0)),e.push(new qc("contentLanguage",null,!0)),e.push(new qc("contentType",null,!0)),e.push(new qc("metadata","customMetadata",!0)),y6=e,y6}function wZe(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new nf(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function EZe(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return wZe(r,e),r}function Tbe(e,t,n){const r=$G(t);return r===null?null:EZe(e,r,n)}function SZe(e,t,n,r){const i=$G(t);if(i===null||!LG(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=_R(d,n,r),p=bbe({alt:"media",token:l});return h+p})[0]}function TZe(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ie="prefixes",wie="items";function CZe(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[_ie])for(const i of n[_ie]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new nf(t,s));r.prefixes.push(o)}if(n[wie])for(const i of n[wie]){const s=e._makeStorageReference(new nf(t,i.name));r.items.push(s)}return r}function AZe(e,t,n){const r=$G(n);return r===null?null:CZe(e,t,r)}class k9{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BG(e){if(!e)throw MG()}function kZe(e,t){function n(r,i){const s=Tbe(e,i,t);return BG(s!==null),s}return n}function RZe(e,t){function n(r,i){const s=AZe(e,t,i);return BG(s!==null),s}return n}function IZe(e,t){function n(r,i){const s=Tbe(e,i,t);return BG(s!==null),SZe(s,i,e.host,e._protocol)}return n}function jG(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=jJe():i=BJe():n.getStatus()===402?i=$Je(e.bucket):n.getStatus()===403?i=UJe(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function Cbe(e){const t=jG(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=FJe(e.path)),s.serverResponse=i.serverResponse,s}return n}function PZe(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=_R(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new k9(a,u,RZe(e,t.bucket),l);return c.urlParams=s,c.errorHandler=jG(t),c}function NZe(e,t,n){const r=t.fullServerUrl(),i=_R(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new k9(i,s,IZe(e,n),o);return a.errorHandler=Cbe(t),a}function DZe(e,t){const n=t.fullServerUrl(),r=_R(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new k9(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Cbe(t),a}function OZe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function MZe(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=OZe(null,t)),r}function LZe(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let w=0;w<2;w++)x=x+Math.random().toString().slice(2);return x}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=MZe(t,r,i),c=TZe(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Nv.getBlob(f,r,d);if(h===null)throw GJe();const p={name:l.fullPath},m=_R(s,e.host,e._protocol),g="POST",b=e.maxUploadRetryTime,y=new k9(m,g,kZe(e,n),b);return y.urlParams=p,y.headers=o,y.body=h.uploadData(),y.errorHandler=jG(t),y}class FZe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=N_.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=N_.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=N_.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw JC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw JC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw JC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw JC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw JC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class $Ze extends FZe{initXhr(){this.xhr_.responseType="text"}}function R9(){return new $Ze}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(t,n){this._service=t,n instanceof nf?this._location=n:this._location=nf.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new q_(t,n)}get root(){const t=new nf(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ebe(this._location.path)}get storage(){return this._service}get parent(){const t=vZe(this._location.path);if(t===null)return null;const n=new nf(this._location.bucket,t);return new q_(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw XJe(t)}}function BZe(e,t,n){e._throwIfRoot("uploadBytes");const r=LZe(e.storage,e._location,Sbe(),new Nv(t,!0),n);return e.storage.makeRequestWithTokens(r,R9).then(i=>({metadata:i,ref:e}))}function jZe(e){const t={prefixes:[],items:[]};return Abe(e,t).then(()=>t)}async function Abe(e,t,n){const i=await UZe(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await Abe(e,t,i.nextPageToken)}function UZe(e,t){t!=null&&typeof t.maxResults=="number"&&BU("options.maxResults",1,1e3,t.maxResults);const n=t,r=PZe(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,R9)}function zZe(e){e._throwIfRoot("getDownloadURL");const t=NZe(e.storage,e._location,Sbe());return e.storage.makeRequestWithTokens(t,R9).then(n=>{if(n===null)throw YJe();return n})}function VZe(e){e._throwIfRoot("deleteObject");const t=DZe(e.storage,e._location);return e.storage.makeRequestWithTokens(t,R9)}function HZe(e,t){const n=bZe(e._location.path,t),r=new nf(e._location.bucket,n);return new q_(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qZe(e){return/^[A-Za-z]+:\/\//.test(e)}function WZe(e,t){return new q_(e,t)}function kbe(e,t){if(e instanceof UG){const n=e;if(n._bucket==null)throw WJe();const r=new q_(n,n._bucket);return t!=null?kbe(r,t):r}else return t!==void 0?HZe(e,t):e}function GZe(e,t){if(t&&qZe(t)){if(e instanceof UG)return WZe(e,t);throw $U("To use ref(service, url), the first argument must be a Storage instance.")}else return kbe(e,t)}function Eie(e,t){const n=t==null?void 0:t[ybe];return n==null?null:nf.makeFromBucketSpec(n,e)}function YZe(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:sQe(i,e.app.options.projectId))}class UG{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=gbe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=MJe,this._maxUploadRetryTime=LJe,this._requests=new Set,i!=null?this._bucket=nf.makeFromBucketSpec(i,this._host):this._bucket=Eie(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=nf.makeFromBucketSpec(this._url,t):this._bucket=Eie(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){BU("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){BU("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new q_(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new QJe(vbe());{const o=uZe(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const Sie="@firebase/storage",Tie="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rbe="storage";function v6(e,t,n){return e=$s(e),BZe(e,t,n)}function ZC(e){return e=$s(e),jZe(e)}function b6(e){return e=$s(e),zZe(e)}function Cie(e){return e=$s(e),VZe(e)}function $d(e,t){return e=$s(e),GZe(e,t)}function Aie(e=OG(),t){e=$s(e);const r=OT(e,Rbe).getImmediate({identifier:t}),i=iQe("storage");return i&&KZe(r,...i),r}function KZe(e,t,n,r={}){YZe(e,t,n,r)}function XZe(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new UG(n,r,i,t,Ow)}function QZe(){h1(new sg(Rbe,XZe,"PUBLIC").setMultipleInstances(!0)),x0(Sie,Tie,""),x0(Sie,Tie,"esm2017")}QZe();var kie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qv,Ibe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(R,I){function O(){}O.prototype=I.prototype,R.D=I.prototype,R.prototype=new O,R.prototype.constructor=R,R.C=function(M,L,H){for(var D=Array(arguments.length-2),B=2;B<arguments.length;B++)D[B-2]=arguments[B];return I.prototype[L].apply(M,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,I,O){O||(O=0);var M=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)M[L]=I.charCodeAt(O++)|I.charCodeAt(O++)<<8|I.charCodeAt(O++)<<16|I.charCodeAt(O++)<<24;else for(L=0;16>L;++L)M[L]=I[O++]|I[O++]<<8|I[O++]<<16|I[O++]<<24;I=R.g[0],O=R.g[1],L=R.g[2];var H=R.g[3],D=I+(H^O&(L^H))+M[0]+3614090360&4294967295;I=O+(D<<7&4294967295|D>>>25),D=H+(L^I&(O^L))+M[1]+3905402710&4294967295,H=I+(D<<12&4294967295|D>>>20),D=L+(O^H&(I^O))+M[2]+606105819&4294967295,L=H+(D<<17&4294967295|D>>>15),D=O+(I^L&(H^I))+M[3]+3250441966&4294967295,O=L+(D<<22&4294967295|D>>>10),D=I+(H^O&(L^H))+M[4]+4118548399&4294967295,I=O+(D<<7&4294967295|D>>>25),D=H+(L^I&(O^L))+M[5]+1200080426&4294967295,H=I+(D<<12&4294967295|D>>>20),D=L+(O^H&(I^O))+M[6]+2821735955&4294967295,L=H+(D<<17&4294967295|D>>>15),D=O+(I^L&(H^I))+M[7]+4249261313&4294967295,O=L+(D<<22&4294967295|D>>>10),D=I+(H^O&(L^H))+M[8]+1770035416&4294967295,I=O+(D<<7&4294967295|D>>>25),D=H+(L^I&(O^L))+M[9]+2336552879&4294967295,H=I+(D<<12&4294967295|D>>>20),D=L+(O^H&(I^O))+M[10]+4294925233&4294967295,L=H+(D<<17&4294967295|D>>>15),D=O+(I^L&(H^I))+M[11]+2304563134&4294967295,O=L+(D<<22&4294967295|D>>>10),D=I+(H^O&(L^H))+M[12]+1804603682&4294967295,I=O+(D<<7&4294967295|D>>>25),D=H+(L^I&(O^L))+M[13]+4254626195&4294967295,H=I+(D<<12&4294967295|D>>>20),D=L+(O^H&(I^O))+M[14]+2792965006&4294967295,L=H+(D<<17&4294967295|D>>>15),D=O+(I^L&(H^I))+M[15]+1236535329&4294967295,O=L+(D<<22&4294967295|D>>>10),D=I+(L^H&(O^L))+M[1]+4129170786&4294967295,I=O+(D<<5&4294967295|D>>>27),D=H+(O^L&(I^O))+M[6]+3225465664&4294967295,H=I+(D<<9&4294967295|D>>>23),D=L+(I^O&(H^I))+M[11]+643717713&4294967295,L=H+(D<<14&4294967295|D>>>18),D=O+(H^I&(L^H))+M[0]+3921069994&4294967295,O=L+(D<<20&4294967295|D>>>12),D=I+(L^H&(O^L))+M[5]+3593408605&4294967295,I=O+(D<<5&4294967295|D>>>27),D=H+(O^L&(I^O))+M[10]+38016083&4294967295,H=I+(D<<9&4294967295|D>>>23),D=L+(I^O&(H^I))+M[15]+3634488961&4294967295,L=H+(D<<14&4294967295|D>>>18),D=O+(H^I&(L^H))+M[4]+3889429448&4294967295,O=L+(D<<20&4294967295|D>>>12),D=I+(L^H&(O^L))+M[9]+568446438&4294967295,I=O+(D<<5&4294967295|D>>>27),D=H+(O^L&(I^O))+M[14]+3275163606&4294967295,H=I+(D<<9&4294967295|D>>>23),D=L+(I^O&(H^I))+M[3]+4107603335&4294967295,L=H+(D<<14&4294967295|D>>>18),D=O+(H^I&(L^H))+M[8]+1163531501&4294967295,O=L+(D<<20&4294967295|D>>>12),D=I+(L^H&(O^L))+M[13]+2850285829&4294967295,I=O+(D<<5&4294967295|D>>>27),D=H+(O^L&(I^O))+M[2]+4243563512&4294967295,H=I+(D<<9&4294967295|D>>>23),D=L+(I^O&(H^I))+M[7]+1735328473&4294967295,L=H+(D<<14&4294967295|D>>>18),D=O+(H^I&(L^H))+M[12]+2368359562&4294967295,O=L+(D<<20&4294967295|D>>>12),D=I+(O^L^H)+M[5]+4294588738&4294967295,I=O+(D<<4&4294967295|D>>>28),D=H+(I^O^L)+M[8]+2272392833&4294967295,H=I+(D<<11&4294967295|D>>>21),D=L+(H^I^O)+M[11]+1839030562&4294967295,L=H+(D<<16&4294967295|D>>>16),D=O+(L^H^I)+M[14]+4259657740&4294967295,O=L+(D<<23&4294967295|D>>>9),D=I+(O^L^H)+M[1]+2763975236&4294967295,I=O+(D<<4&4294967295|D>>>28),D=H+(I^O^L)+M[4]+1272893353&4294967295,H=I+(D<<11&4294967295|D>>>21),D=L+(H^I^O)+M[7]+4139469664&4294967295,L=H+(D<<16&4294967295|D>>>16),D=O+(L^H^I)+M[10]+3200236656&4294967295,O=L+(D<<23&4294967295|D>>>9),D=I+(O^L^H)+M[13]+681279174&4294967295,I=O+(D<<4&4294967295|D>>>28),D=H+(I^O^L)+M[0]+3936430074&4294967295,H=I+(D<<11&4294967295|D>>>21),D=L+(H^I^O)+M[3]+3572445317&4294967295,L=H+(D<<16&4294967295|D>>>16),D=O+(L^H^I)+M[6]+76029189&4294967295,O=L+(D<<23&4294967295|D>>>9),D=I+(O^L^H)+M[9]+3654602809&4294967295,I=O+(D<<4&4294967295|D>>>28),D=H+(I^O^L)+M[12]+3873151461&4294967295,H=I+(D<<11&4294967295|D>>>21),D=L+(H^I^O)+M[15]+530742520&4294967295,L=H+(D<<16&4294967295|D>>>16),D=O+(L^H^I)+M[2]+3299628645&4294967295,O=L+(D<<23&4294967295|D>>>9),D=I+(L^(O|~H))+M[0]+4096336452&4294967295,I=O+(D<<6&4294967295|D>>>26),D=H+(O^(I|~L))+M[7]+1126891415&4294967295,H=I+(D<<10&4294967295|D>>>22),D=L+(I^(H|~O))+M[14]+2878612391&4294967295,L=H+(D<<15&4294967295|D>>>17),D=O+(H^(L|~I))+M[5]+4237533241&4294967295,O=L+(D<<21&4294967295|D>>>11),D=I+(L^(O|~H))+M[12]+1700485571&4294967295,I=O+(D<<6&4294967295|D>>>26),D=H+(O^(I|~L))+M[3]+2399980690&4294967295,H=I+(D<<10&4294967295|D>>>22),D=L+(I^(H|~O))+M[10]+4293915773&4294967295,L=H+(D<<15&4294967295|D>>>17),D=O+(H^(L|~I))+M[1]+2240044497&4294967295,O=L+(D<<21&4294967295|D>>>11),D=I+(L^(O|~H))+M[8]+1873313359&4294967295,I=O+(D<<6&4294967295|D>>>26),D=H+(O^(I|~L))+M[15]+4264355552&4294967295,H=I+(D<<10&4294967295|D>>>22),D=L+(I^(H|~O))+M[6]+2734768916&4294967295,L=H+(D<<15&4294967295|D>>>17),D=O+(H^(L|~I))+M[13]+1309151649&4294967295,O=L+(D<<21&4294967295|D>>>11),D=I+(L^(O|~H))+M[4]+4149444226&4294967295,I=O+(D<<6&4294967295|D>>>26),D=H+(O^(I|~L))+M[11]+3174756917&4294967295,H=I+(D<<10&4294967295|D>>>22),D=L+(I^(H|~O))+M[2]+718787259&4294967295,L=H+(D<<15&4294967295|D>>>17),D=O+(H^(L|~I))+M[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,R.g[2]=R.g[2]+L&4294967295,R.g[3]=R.g[3]+H&4294967295}r.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var O=I-this.blockSize,M=this.B,L=this.h,H=0;H<I;){if(L==0)for(;H<=O;)i(this,R,H),H+=this.blockSize;if(typeof R=="string"){for(;H<I;)if(M[L++]=R.charCodeAt(H++),L==this.blockSize){i(this,M),L=0;break}}else for(;H<I;)if(M[L++]=R[H++],L==this.blockSize){i(this,M),L=0;break}}this.h=L,this.o+=I},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var O=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=O&255,O/=256;for(this.u(R),R=Array(16),I=O=0;4>I;++I)for(var M=0;32>M;M+=8)R[O++]=this.g[I]>>>M&255;return R};function s(R,I){var O=a;return Object.prototype.hasOwnProperty.call(O,R)?O[R]:O[R]=I(R)}function o(R,I){this.h=I;for(var O=[],M=!0,L=R.length-1;0<=L;L--){var H=R[L]|0;M&&H==I||(O[L]=H,M=!1)}this.g=O}var a={};function u(R){return-128<=R&&128>R?s(R,function(I){return new o([I|0],0>I?-1:0)}):new o([R|0],0>R?-1:0)}function l(R){if(isNaN(R)||!isFinite(R))return f;if(0>R)return g(l(-R));for(var I=[],O=1,M=0;R>=O;M++)I[M]=R/O|0,O*=4294967296;return new o(I,0)}function c(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return g(c(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=l(Math.pow(I,8)),M=f,L=0;L<R.length;L+=8){var H=Math.min(8,R.length-L),D=parseInt(R.substring(L,L+H),I);8>H?(H=l(Math.pow(I,H)),M=M.j(H).add(l(D))):(M=M.j(O),M=M.add(l(D)))}return M}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var R=0,I=1,O=0;O<this.g.length;O++){var M=this.i(O);R+=(0<=M?M:4294967296+M)*I,I*=4294967296}return R},e.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(p(this))return"0";if(m(this))return"-"+g(this).toString(R);for(var I=l(Math.pow(R,6)),O=this,M="";;){var L=w(O,I).g;O=b(O,L.j(I));var H=((0<O.g.length?O.g[0]:O.h)>>>0).toString(R);if(O=L,p(O))return H+M;for(;6>H.length;)H="0"+H;M=H+M}},e.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function p(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function m(R){return R.h==-1}e.l=function(R){return R=b(this,R),m(R)?-1:p(R)?0:1};function g(R){for(var I=R.g.length,O=[],M=0;M<I;M++)O[M]=~R.g[M];return new o(O,~R.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(R){for(var I=Math.max(this.g.length,R.g.length),O=[],M=0,L=0;L<=I;L++){var H=M+(this.i(L)&65535)+(R.i(L)&65535),D=(H>>>16)+(this.i(L)>>>16)+(R.i(L)>>>16);M=D>>>16,H&=65535,D&=65535,O[L]=D<<16|H}return new o(O,O[O.length-1]&-2147483648?-1:0)};function b(R,I){return R.add(g(I))}e.j=function(R){if(p(this)||p(R))return f;if(m(this))return m(R)?g(this).j(g(R)):g(g(this).j(R));if(m(R))return g(this.j(g(R)));if(0>this.l(h)&&0>R.l(h))return l(this.m()*R.m());for(var I=this.g.length+R.g.length,O=[],M=0;M<2*I;M++)O[M]=0;for(M=0;M<this.g.length;M++)for(var L=0;L<R.g.length;L++){var H=this.i(M)>>>16,D=this.i(M)&65535,B=R.i(L)>>>16,z=R.i(L)&65535;O[2*M+2*L]+=D*z,y(O,2*M+2*L),O[2*M+2*L+1]+=H*z,y(O,2*M+2*L+1),O[2*M+2*L+1]+=D*B,y(O,2*M+2*L+1),O[2*M+2*L+2]+=H*B,y(O,2*M+2*L+2)}for(M=0;M<I;M++)O[M]=O[2*M+1]<<16|O[2*M];for(M=I;M<2*I;M++)O[M]=0;return new o(O,0)};function y(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function x(R,I){this.g=R,this.h=I}function w(R,I){if(p(I))throw Error("division by zero");if(p(R))return new x(f,f);if(m(R))return I=w(g(R),I),new x(g(I.g),g(I.h));if(m(I))return I=w(R,g(I)),new x(g(I.g),I.h);if(30<R.g.length){if(m(R)||m(I))throw Error("slowDivide_ only works with positive integers.");for(var O=d,M=I;0>=M.l(R);)O=S(O),M=S(M);var L=C(O,1),H=C(M,1);for(M=C(M,2),O=C(O,2);!p(M);){var D=H.add(M);0>=D.l(R)&&(L=L.add(O),H=D),M=C(M,1),O=C(O,1)}return I=b(R,L.j(I)),new x(L,I)}for(L=f;0<=R.l(I);){for(O=Math.max(1,Math.floor(R.m()/I.m())),M=Math.ceil(Math.log(O)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),H=l(O),D=H.j(I);m(D)||0<D.l(R);)O-=M,H=l(O),D=H.j(I);p(H)&&(H=d),L=L.add(H),R=b(R,D)}return new x(L,R)}e.A=function(R){return w(this,R).h},e.and=function(R){for(var I=Math.max(this.g.length,R.g.length),O=[],M=0;M<I;M++)O[M]=this.i(M)&R.i(M);return new o(O,this.h&R.h)},e.or=function(R){for(var I=Math.max(this.g.length,R.g.length),O=[],M=0;M<I;M++)O[M]=this.i(M)|R.i(M);return new o(O,this.h|R.h)},e.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),O=[],M=0;M<I;M++)O[M]=this.i(M)^R.i(M);return new o(O,this.h^R.h)};function S(R){for(var I=R.g.length+1,O=[],M=0;M<I;M++)O[M]=R.i(M)<<1|R.i(M-1)>>>31;return new o(O,R.h)}function C(R,I){var O=I>>5;I%=32;for(var M=R.g.length-O,L=[],H=0;H<M;H++)L[H]=0<I?R.i(H+O)>>>I|R.i(H+O+1)<<32-I:R.i(H+O);return new o(L,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ibe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,Qv=o}).apply(typeof kie<"u"?kie:typeof self<"u"?self:typeof window<"u"?window:{});var x6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pbe,E3,Nbe,kP,jU,Dbe,Obe,Mbe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(F,re,le){return F==Array.prototype||F==Object.prototype||(F[re]=le.value),F};function n(F){F=[typeof globalThis=="object"&&globalThis,F,typeof window=="object"&&window,typeof self=="object"&&self,typeof x6=="object"&&x6];for(var re=0;re<F.length;++re){var le=F[re];if(le&&le.Math==Math)return le}throw Error("Cannot find global object")}var r=n(this);function i(F,re){if(re)e:{var le=r;F=F.split(".");for(var be=0;be<F.length-1;be++){var Xe=F[be];if(!(Xe in le))break e;le=le[Xe]}F=F[F.length-1],be=le[F],re=re(be),re!=be&&re!=null&&t(le,F,{configurable:!0,writable:!0,value:re})}}function s(F,re){F instanceof String&&(F+="");var le=0,be=!1,Xe={next:function(){if(!be&&le<F.length){var ut=le++;return{value:re(ut,F[ut]),done:!1}}return be=!0,{done:!0,value:void 0}}};return Xe[Symbol.iterator]=function(){return Xe},Xe}i("Array.prototype.values",function(F){return F||function(){return s(this,function(re,le){return le})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(F){var re=typeof F;return re=re!="object"?re:F?Array.isArray(F)?"array":re:"null",re=="array"||re=="object"&&typeof F.length=="number"}function l(F){var re=typeof F;return re=="object"&&F!=null||re=="function"}function c(F,re,le){return F.call.apply(F.bind,arguments)}function f(F,re,le){if(!F)throw Error();if(2<arguments.length){var be=Array.prototype.slice.call(arguments,2);return function(){var Xe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Xe,be),F.apply(re,Xe)}}return function(){return F.apply(re,arguments)}}function d(F,re,le){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(F,re){var le=Array.prototype.slice.call(arguments,1);return function(){var be=le.slice();return be.push.apply(be,arguments),F.apply(this,be)}}function p(F,re){function le(){}le.prototype=re.prototype,F.aa=re.prototype,F.prototype=new le,F.prototype.constructor=F,F.Qb=function(be,Xe,ut){for(var Xt=Array(arguments.length-2),Lr=2;Lr<arguments.length;Lr++)Xt[Lr-2]=arguments[Lr];return re.prototype[Xe].apply(be,Xt)}}function m(F){const re=F.length;if(0<re){const le=Array(re);for(let be=0;be<re;be++)le[be]=F[be];return le}return[]}function g(F,re){for(let le=1;le<arguments.length;le++){const be=arguments[le];if(u(be)){const Xe=F.length||0,ut=be.length||0;F.length=Xe+ut;for(let Xt=0;Xt<ut;Xt++)F[Xe+Xt]=be[Xt]}else F.push(be)}}class b{constructor(re,le){this.i=re,this.j=le,this.h=0,this.g=null}get(){let re;return 0<this.h?(this.h--,re=this.g,this.g=re.next,re.next=null):re=this.i(),re}}function y(F){return/^[\s\xa0]*$/.test(F)}function x(){var F=a.navigator;return F&&(F=F.userAgent)?F:""}function w(F){return w[" "](F),F}w[" "]=function(){};var S=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function C(F,re,le){for(const be in F)re.call(le,F[be],be,F)}function R(F,re){for(const le in F)re.call(void 0,F[le],le,F)}function I(F){const re={};for(const le in F)re[le]=F[le];return re}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(F,re){let le,be;for(let Xe=1;Xe<arguments.length;Xe++){be=arguments[Xe];for(le in be)F[le]=be[le];for(let ut=0;ut<O.length;ut++)le=O[ut],Object.prototype.hasOwnProperty.call(be,le)&&(F[le]=be[le])}}function L(F){var re=1;F=F.split(":");const le=[];for(;0<re&&F.length;)le.push(F.shift()),re--;return F.length&&le.push(F.join(":")),le}function H(F){a.setTimeout(()=>{throw F},0)}function D(){var F=ue;let re=null;return F.g&&(re=F.g,F.g=F.g.next,F.g||(F.h=null),re.next=null),re}class B{constructor(){this.h=this.g=null}add(re,le){const be=z.get();be.set(re,le),this.h?this.h.next=be:this.g=be,this.h=be}}var z=new b(()=>new G,F=>F.reset());class G{constructor(){this.next=this.g=this.h=null}set(re,le){this.h=re,this.g=le,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,ne=!1,ue=new B,X=()=>{const F=a.Promise.resolve(void 0);Z=()=>{F.then(q)}};var q=()=>{for(var F;F=D();){try{F.h.call(F.g)}catch(le){H(le)}var re=z;re.j(F),100>re.h&&(re.h++,F.next=re.g,re.g=F)}ne=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(F,re){this.type=F,this.g=this.target=re,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var F=!1,re=Object.defineProperty({},"passive",{get:function(){F=!0}});try{const le=()=>{};a.addEventListener("test",le,re),a.removeEventListener("test",le,re)}catch{}return F}();function oe(F,re){if(W.call(this,F?F.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,F){var le=this.type=F.type,be=F.changedTouches&&F.changedTouches.length?F.changedTouches[0]:null;if(this.target=F.target||F.srcElement,this.g=re,re=F.relatedTarget){if(S){e:{try{w(re.nodeName);var Xe=!0;break e}catch{}Xe=!1}Xe||(re=null)}}else le=="mouseover"?re=F.fromElement:le=="mouseout"&&(re=F.toElement);this.relatedTarget=re,be?(this.clientX=be.clientX!==void 0?be.clientX:be.pageX,this.clientY=be.clientY!==void 0?be.clientY:be.pageY,this.screenX=be.screenX||0,this.screenY=be.screenY||0):(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0),this.button=F.button,this.key=F.key||"",this.ctrlKey=F.ctrlKey,this.altKey=F.altKey,this.shiftKey=F.shiftKey,this.metaKey=F.metaKey,this.pointerId=F.pointerId||0,this.pointerType=typeof F.pointerType=="string"?F.pointerType:pe[F.pointerType]||"",this.state=F.state,this.i=F,F.defaultPrevented&&oe.aa.h.call(this)}}p(oe,W);var pe={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var F=this.i;F.preventDefault?F.preventDefault():F.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),he=0;function Ee(F,re,le,be,Xe){this.listener=F,this.proxy=null,this.src=re,this.type=le,this.capture=!!be,this.ha=Xe,this.key=++he,this.da=this.fa=!1}function Ae(F){F.da=!0,F.listener=null,F.proxy=null,F.src=null,F.ha=null}function ge(F){this.src=F,this.g={},this.h=0}ge.prototype.add=function(F,re,le,be,Xe){var ut=F.toString();F=this.g[ut],F||(F=this.g[ut]=[],this.h++);var Xt=Oe(F,re,be,Xe);return-1<Xt?(re=F[Xt],le||(re.fa=!1)):(re=new Ee(re,this.src,ut,!!be,Xe),re.fa=le,F.push(re)),re};function me(F,re){var le=re.type;if(le in F.g){var be=F.g[le],Xe=Array.prototype.indexOf.call(be,re,void 0),ut;(ut=0<=Xe)&&Array.prototype.splice.call(be,Xe,1),ut&&(Ae(re),F.g[le].length==0&&(delete F.g[le],F.h--))}}function Oe(F,re,le,be){for(var Xe=0;Xe<F.length;++Xe){var ut=F[Xe];if(!ut.da&&ut.listener==re&&ut.capture==!!le&&ut.ha==be)return Xe}return-1}var Me="closure_lm_"+(1e6*Math.random()|0),Ye={};function lt(F,re,le,be,Xe){if(Array.isArray(re)){for(var ut=0;ut<re.length;ut++)lt(F,re[ut],le,be,Xe);return null}return le=sn(le),F&&F[ce]?F.K(re,le,l(be)?!!be.capture:!1,Xe):We(F,re,le,!1,be,Xe)}function We(F,re,le,be,Xe,ut){if(!re)throw Error("Invalid event type");var Xt=l(Xe)?!!Xe.capture:!!Xe,Lr=Ke(F);if(Lr||(F[Me]=Lr=new ge(F)),le=Lr.add(re,le,be,Xt,ut),le.proxy)return le;if(be=nt(),le.proxy=be,be.src=F,be.listener=le,F.addEventListener)ee||(Xe=Xt),Xe===void 0&&(Xe=!1),F.addEventListener(re.toString(),be,Xe);else if(F.attachEvent)F.attachEvent(It(re.toString()),be);else if(F.addListener&&F.removeListener)F.addListener(be);else throw Error("addEventListener and attachEvent are unavailable.");return le}function nt(){function F(le){return re.call(F.src,F.listener,le)}const re=Et;return F}function yt(F,re,le,be,Xe){if(Array.isArray(re))for(var ut=0;ut<re.length;ut++)yt(F,re[ut],le,be,Xe);else be=l(be)?!!be.capture:!!be,le=sn(le),F&&F[ce]?(F=F.i,re=String(re).toString(),re in F.g&&(ut=F.g[re],le=Oe(ut,le,be,Xe),-1<le&&(Ae(ut[le]),Array.prototype.splice.call(ut,le,1),ut.length==0&&(delete F.g[re],F.h--)))):F&&(F=Ke(F))&&(re=F.g[re.toString()],F=-1,re&&(F=Oe(re,le,be,Xe)),(le=-1<F?re[F]:null)&&_t(le))}function _t(F){if(typeof F!="number"&&F&&!F.da){var re=F.src;if(re&&re[ce])me(re.i,F);else{var le=F.type,be=F.proxy;re.removeEventListener?re.removeEventListener(le,be,F.capture):re.detachEvent?re.detachEvent(It(le),be):re.addListener&&re.removeListener&&re.removeListener(be),(le=Ke(re))?(me(le,F),le.h==0&&(le.src=null,re[Me]=null)):Ae(F)}}}function It(F){return F in Ye?Ye[F]:Ye[F]="on"+F}function Et(F,re){if(F.da)F=!0;else{re=new oe(re,this);var le=F.listener,be=F.ha||F.src;F.fa&&_t(F),F=le.call(be,re)}return F}function Ke(F){return F=F[Me],F instanceof ge?F:null}var Lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function sn(F){return typeof F=="function"?F:(F[Lt]||(F[Lt]=function(re){return F.handleEvent(re)}),F[Lt])}function Fe(){te.call(this),this.i=new ge(this),this.M=this,this.F=null}p(Fe,te),Fe.prototype[ce]=!0,Fe.prototype.removeEventListener=function(F,re,le,be){yt(this,F,re,le,be)};function Qe(F,re){var le,be=F.F;if(be)for(le=[];be;be=be.F)le.push(be);if(F=F.M,be=re.type||re,typeof re=="string")re=new W(re,F);else if(re instanceof W)re.target=re.target||F;else{var Xe=re;re=new W(be,F),M(re,Xe)}if(Xe=!0,le)for(var ut=le.length-1;0<=ut;ut--){var Xt=re.g=le[ut];Xe=wt(Xt,be,!0,re)&&Xe}if(Xt=re.g=F,Xe=wt(Xt,be,!0,re)&&Xe,Xe=wt(Xt,be,!1,re)&&Xe,le)for(ut=0;ut<le.length;ut++)Xt=re.g=le[ut],Xe=wt(Xt,be,!1,re)&&Xe}Fe.prototype.N=function(){if(Fe.aa.N.call(this),this.i){var F=this.i,re;for(re in F.g){for(var le=F.g[re],be=0;be<le.length;be++)Ae(le[be]);delete F.g[re],F.h--}}this.F=null},Fe.prototype.K=function(F,re,le,be){return this.i.add(String(F),re,!1,le,be)},Fe.prototype.L=function(F,re,le,be){return this.i.add(String(F),re,!0,le,be)};function wt(F,re,le,be){if(re=F.i.g[String(re)],!re)return!0;re=re.concat();for(var Xe=!0,ut=0;ut<re.length;++ut){var Xt=re[ut];if(Xt&&!Xt.da&&Xt.capture==le){var Lr=Xt.listener,Us=Xt.ha||Xt.src;Xt.fa&&me(F.i,Xt),Xe=Lr.call(Us,be)!==!1&&Xe}}return Xe&&!be.defaultPrevented}function Vt(F,re,le){if(typeof F=="function")le&&(F=d(F,le));else if(F&&typeof F.handleEvent=="function")F=d(F.handleEvent,F);else throw Error("Invalid listener argument");return 2147483647<Number(re)?-1:a.setTimeout(F,re||0)}function Wt(F){F.g=Vt(()=>{F.g=null,F.i&&(F.i=!1,Wt(F))},F.l);const re=F.h;F.h=null,F.m.apply(null,re)}class bn extends te{constructor(re,le){super(),this.m=re,this.l=le,this.h=null,this.i=!1,this.g=null}j(re){this.h=arguments,this.g?this.i=!0:Wt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dn(F){te.call(this),this.h=F,this.g={}}p(Dn,te);var Zn=[];function wr(F){C(F.g,function(re,le){this.g.hasOwnProperty(le)&&_t(re)},F),F.g={}}Dn.prototype.N=function(){Dn.aa.N.call(this),wr(this)},Dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hn=a.JSON.stringify,nr=a.JSON.parse,Ei=class{stringify(F){return a.JSON.stringify(F,void 0)}parse(F){return a.JSON.parse(F,void 0)}};function Dr(){}Dr.prototype.h=null;function Co(F){return F.h||(F.h=F.i())}function Ji(){}var Di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zi(){W.call(this,"d")}p(Zi,W);function ei(){W.call(this,"c")}p(ei,W);var mo={},Gu=null;function Ea(){return Gu=Gu||new Fe}mo.La="serverreachability";function Sa(F){W.call(this,mo.La,F)}p(Sa,W);function Kr(F){const re=Ea();Qe(re,new Sa(re))}mo.STAT_EVENT="statevent";function Oi(F,re){W.call(this,mo.STAT_EVENT,F),this.stat=re}p(Oi,W);function si(F){const re=Ea();Qe(re,new Oi(re,F))}mo.Ma="timingevent";function Zs(F,re){W.call(this,mo.Ma,F),this.size=re}p(Zs,W);function Xr(F,re){if(typeof F!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){F()},re)}function Hi(){this.g=!0}Hi.prototype.xa=function(){this.g=!1};function eo(F,re,le,be,Xe,ut){F.info(function(){if(F.g)if(ut)for(var Xt="",Lr=ut.split("&"),Us=0;Us<Lr.length;Us++){var Pr=Lr[Us].split("=");if(1<Pr.length){var ai=Pr[0];Pr=Pr[1];var cs=ai.split("_");Xt=2<=cs.length&&cs[1]=="type"?Xt+(ai+"="+Pr+"&"):Xt+(ai+"=redacted&")}}else Xt=null;else Xt=ut;return"XMLHTTP REQ ("+be+") [attempt "+Xe+"]: "+re+`
`+le+`
`+Xt})}function go(F,re,le,be,Xe,ut,Xt){F.info(function(){return"XMLHTTP RESP ("+be+") [ attempt "+Xe+"]: "+re+`
`+le+`
`+ut+" "+Xt})}function Qo(F,re,le,be){F.info(function(){return"XMLHTTP TEXT ("+re+"): "+pd(F,le)+(be?" "+be:"")})}function Ta(F,re){F.info(function(){return"TIMEOUT: "+re})}Hi.prototype.info=function(){};function pd(F,re){if(!F.g)return re;if(!re)return null;try{var le=JSON.parse(re);if(le){for(F=0;F<le.length;F++)if(Array.isArray(le[F])){var be=le[F];if(!(2>be.length)){var Xe=be[1];if(Array.isArray(Xe)&&!(1>Xe.length)){var ut=Xe[0];if(ut!="noop"&&ut!="stop"&&ut!="close")for(var Xt=1;Xt<Xe.length;Xt++)Xe[Xt]=""}}}}return Hn(le)}catch{return re}}var Hr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bs;function Ya(){}p(Ya,Dr),Ya.prototype.g=function(){return new XMLHttpRequest},Ya.prototype.i=function(){return{}},bs=new Ya;function Jo(F,re,le,be){this.j=F,this.i=re,this.l=le,this.R=be||1,this.U=new Dn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yh}function yh(){this.i=null,this.g="",this.h=!1}var md={},mf={};function gf(F,re,le){F.L=1,F.v=lr(Rt(re)),F.m=le,F.P=!0,xc(F,null)}function xc(F,re){F.F=Date.now(),Er(F),F.A=Rt(F.v);var le=F.A,be=F.R;Array.isArray(be)||(be=[String(be)]),cr(le.i,"t",be),F.C=0,le=F.j.J,F.h=new yh,F.g=jg(F.j,le?re:null,!F.m),0<F.O&&(F.M=new bn(d(F.Y,F,F.g),F.O)),re=F.U,le=F.g,be=F.ca;var Xe="readystatechange";Array.isArray(Xe)||(Xe&&(Zn[0]=Xe.toString()),Xe=Zn);for(var ut=0;ut<Xe.length;ut++){var Xt=lt(le,Xe[ut],be||re.handleEvent,!1,re.h||re);if(!Xt)break;re.g[Xt.key]=Xt}re=F.H?I(F.H):{},F.m?(F.u||(F.u="POST"),re["Content-Type"]="application/x-www-form-urlencoded",F.g.ea(F.A,F.u,F.m,re)):(F.u="GET",F.g.ea(F.A,F.u,null,re)),Kr(),eo(F.i,F.u,F.A,F.l,F.R,F.m)}Jo.prototype.ca=function(F){F=F.target;const re=this.M;re&&Ir(F)==3?re.j():this.Y(F)},Jo.prototype.Y=function(F){try{if(F==this.g)e:{const cs=Ir(this.g);var re=this.g.Ba();const Io=this.g.Z();if(!(3>cs)&&(cs!=3||this.g&&(this.h.h||this.g.oa()||_s(this.g)))){this.J||cs!=4||re==7||(re==8||0>=Io?Kr(3):Kr(2)),xs(this);var le=this.g.Z();this.X=le;t:if(_c(this)){var be=_s(this.g);F="";var Xe=be.length,ut=Ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){As(this),Ka(this);var Xt="";break t}this.h.i=new a.TextDecoder}for(re=0;re<Xe;re++)this.h.h=!0,F+=this.h.i.decode(be[re],{stream:!(ut&&re==Xe-1)});be.length=0,this.h.g+=F,this.C=0,Xt=this.h.g}else Xt=this.g.oa();if(this.o=le==200,go(this.i,this.u,this.A,this.l,this.R,cs,le),this.o){if(this.T&&!this.K){t:{if(this.g){var Lr,Us=this.g;if((Lr=Us.g?Us.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Lr)){var Pr=Lr;break t}}Pr=null}if(le=Pr)Qo(this.i,this.l,le,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nl(this,le);else{this.o=!1,this.s=3,si(12),As(this),Ka(this);break e}}if(this.P){le=!0;let yo;for(;!this.J&&this.C<Xt.length;)if(yo=wc(this,Xt),yo==mf){cs==4&&(this.s=4,si(14),le=!1),Qo(this.i,this.l,null,"[Incomplete Response]");break}else if(yo==md){this.s=4,si(15),Qo(this.i,this.l,Xt,"[Invalid Chunk]"),le=!1;break}else Qo(this.i,this.l,yo,null),Nl(this,yo);if(_c(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),cs!=4||Xt.length!=0||this.h.h||(this.s=1,si(16),le=!1),this.o=this.o&&le,!le)Qo(this.i,this.l,Xt,"[Invalid Chunked Response]"),As(this),Ka(this);else if(0<Xt.length&&!this.W){this.W=!0;var ai=this.j;ai.g==this&&ai.ba&&!ai.M&&(ai.j.info("Great, no buffering proxy detected. Bytes received: "+Xt.length),ka(ai),ai.M=!0,si(11))}}else Qo(this.i,this.l,Xt,null),Nl(this,Xt);cs==4&&As(this),this.o&&!this.J&&(cs==4?vi(this.j,this):(this.o=!1,Er(this)))}else ta(this.g),le==400&&0<Xt.indexOf("Unknown SID")?(this.s=3,si(12)):(this.s=0,si(13)),As(this),Ka(this)}}}catch{}finally{}};function _c(F){return F.g?F.u=="GET"&&F.L!=2&&F.j.Ca:!1}function wc(F,re){var le=F.C,be=re.indexOf(`
`,le);return be==-1?mf:(le=Number(re.substring(le,be)),isNaN(le)?md:(be+=1,be+le>re.length?mf:(re=re.slice(be,be+le),F.C=be+le,re)))}Jo.prototype.cancel=function(){this.J=!0,As(this)};function Er(F){F.S=Date.now()+F.I,Ec(F,F.I)}function Ec(F,re){if(F.B!=null)throw Error("WatchDog timer not null");F.B=Xr(d(F.ba,F),re)}function xs(F){F.B&&(a.clearTimeout(F.B),F.B=null)}Jo.prototype.ba=function(){this.B=null;const F=Date.now();0<=F-this.S?(Ta(this.i,this.A),this.L!=2&&(Kr(),si(17)),As(this),this.s=2,Ka(this)):Ec(this,this.S-F)};function Ka(F){F.j.G==0||F.J||vi(F.j,F)}function As(F){xs(F);var re=F.M;re&&typeof re.ma=="function"&&re.ma(),F.M=null,wr(F.U),F.g&&(re=F.g,F.g=null,re.abort(),re.ma())}function Nl(F,re){try{var le=F.j;if(le.G!=0&&(le.g==F||rr(le.h,F))){if(!F.K&&rr(le.h,F)&&le.G==3){try{var be=le.Da.g.parse(re)}catch{be=null}if(Array.isArray(be)&&be.length==3){var Xe=be;if(Xe[0]==0){e:if(!le.u){if(le.g)if(le.g.F+3e3<F.F)vd(le),no(le);else break e;yi(le),si(18)}}else le.za=Xe[1],0<le.za-le.T&&37500>Xe[2]&&le.F&&le.v==0&&!le.C&&(le.C=Xr(d(le.Za,le),6e3));if(1>=ti(le.h)&&le.ca){try{le.ca()}catch{}le.ca=void 0}}else Xu(le,11)}else if((F.K||le.g==F)&&vd(le),!y(re))for(Xe=le.Da.g.parse(re),re=0;re<Xe.length;re++){let Pr=Xe[re];if(le.T=Pr[0],Pr=Pr[1],le.G==2)if(Pr[0]=="c"){le.K=Pr[1],le.ia=Pr[2];const ai=Pr[3];ai!=null&&(le.la=ai,le.j.info("VER="+le.la));const cs=Pr[4];cs!=null&&(le.Aa=cs,le.j.info("SVER="+le.Aa));const Io=Pr[5];Io!=null&&typeof Io=="number"&&0<Io&&(be=1.5*Io,le.L=be,le.j.info("backChannelRequestTimeoutMs_="+be)),be=le;const yo=F.g;if(yo){const vo=yo.g?yo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vo){var ut=be.h;ut.g||vo.indexOf("spdy")==-1&&vo.indexOf("quic")==-1&&vo.indexOf("h2")==-1||(ut.j=ut.l,ut.g=new Set,ut.h&&(ve(ut,ut.h),ut.h=null))}if(be.D){const Ll=yo.g?yo.g.getResponseHeader("X-HTTP-Session-Id"):null;Ll&&(be.ya=Ll,Sn(be.I,be.D,Ll))}}le.G=3,le.l&&le.l.ua(),le.ba&&(le.R=Date.now()-F.F,le.j.info("Handshake RTT: "+le.R+"ms")),be=le;var Xt=F;if(be.qa=bd(be,be.J?be.ia:null,be.W),Xt.K){Ie(be.h,Xt);var Lr=Xt,Us=be.L;Us&&(Lr.I=Us),Lr.B&&(xs(Lr),Er(Lr)),be.g=Xt}else Ro(be);0<le.i.length&&na(le)}else Pr[0]!="stop"&&Pr[0]!="close"||Xu(le,7);else le.G==3&&(Pr[0]=="stop"||Pr[0]=="close"?Pr[0]=="stop"?Xu(le,7):Li(le):Pr[0]!="noop"&&le.l&&le.l.ta(Pr),le.v=0)}}Kr(4)}catch{}}var Sc=class{constructor(F,re){this.g=F,this.map=re}};function Zo(F){this.l=F||10,a.PerformanceNavigationTiming?(F=a.performance.getEntriesByType("navigation"),F=0<F.length&&(F[0].nextHopProtocol=="hq"||F[0].nextHopProtocol=="h2")):F=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=F?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qi(F){return F.h?!0:F.g?F.g.size>=F.j:!1}function ti(F){return F.h?1:F.g?F.g.size:0}function rr(F,re){return F.h?F.h==re:F.g?F.g.has(re):!1}function ve(F,re){F.g?F.g.add(re):F.h=re}function Ie(F,re){F.h&&F.h==re?F.h=null:F.g&&F.g.has(re)&&F.g.delete(re)}Zo.prototype.cancel=function(){if(this.i=Se(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const F of this.g.values())F.cancel();this.g.clear()}};function Se(F){if(F.h!=null)return F.i.concat(F.h.D);if(F.g!=null&&F.g.size!==0){let re=F.i;for(const le of F.g.values())re=re.concat(le.D);return re}return m(F.i)}function Be(F){if(F.V&&typeof F.V=="function")return F.V();if(typeof Map<"u"&&F instanceof Map||typeof Set<"u"&&F instanceof Set)return Array.from(F.values());if(typeof F=="string")return F.split("");if(u(F)){for(var re=[],le=F.length,be=0;be<le;be++)re.push(F[be]);return re}re=[],le=0;for(be in F)re[le++]=F[be];return re}function ze(F){if(F.na&&typeof F.na=="function")return F.na();if(!F.V||typeof F.V!="function"){if(typeof Map<"u"&&F instanceof Map)return Array.from(F.keys());if(!(typeof Set<"u"&&F instanceof Set)){if(u(F)||typeof F=="string"){var re=[];F=F.length;for(var le=0;le<F;le++)re.push(le);return re}re=[],le=0;for(const be in F)re[le++]=be;return re}}}function De(F,re){if(F.forEach&&typeof F.forEach=="function")F.forEach(re,void 0);else if(u(F)||typeof F=="string")Array.prototype.forEach.call(F,re,void 0);else for(var le=ze(F),be=Be(F),Xe=be.length,ut=0;ut<Xe;ut++)re.call(void 0,be[ut],le&&le[ut],F)}var ht=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kt(F,re){if(F){F=F.split("&");for(var le=0;le<F.length;le++){var be=F[le].indexOf("="),Xe=null;if(0<=be){var ut=F[le].substring(0,be);Xe=F[le].substring(be+1)}else ut=F[le];re(ut,Xe?decodeURIComponent(Xe.replace(/\+/g," ")):"")}}}function Nt(F){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,F instanceof Nt){this.h=F.h,jt(this,F.j),this.o=F.o,this.g=F.g,Zt(this,F.s),this.l=F.l;var re=F.i,le=new to;le.i=re.i,re.g&&(le.g=new Map(re.g),le.h=re.h),qn(this,le),this.m=F.m}else F&&(re=String(F).match(ht))?(this.h=!1,jt(this,re[1]||"",!0),this.o=_n(re[2]||""),this.g=_n(re[3]||"",!0),Zt(this,re[4]),this.l=_n(re[5]||"",!0),qn(this,re[6]||"",!0),this.m=_n(re[7]||"")):(this.h=!1,this.i=new to(null,this.h))}Nt.prototype.toString=function(){var F=[],re=this.j;re&&F.push(br(re,Ao,!0),":");var le=this.g;return(le||re=="file")&&(F.push("//"),(re=this.o)&&F.push(br(re,Ao,!0),"@"),F.push(encodeURIComponent(String(le)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),le=this.s,le!=null&&F.push(":",String(le))),(le=this.l)&&(this.g&&le.charAt(0)!="/"&&F.push("/"),F.push(br(le,le.charAt(0)=="/"?gd:Dl,!0))),(le=this.i.toString())&&F.push("?",le),(le=this.m)&&F.push("#",br(le,yf)),F.join("")};function Rt(F){return new Nt(F)}function jt(F,re,le){F.j=le?_n(re,!0):re,F.j&&(F.j=F.j.replace(/:$/,""))}function Zt(F,re){if(re){if(re=Number(re),isNaN(re)||0>re)throw Error("Bad port number "+re);F.s=re}else F.s=null}function qn(F,re,le){re instanceof to?(F.i=re,Aa(F.i,F.h)):(le||(re=br(re,Yu)),F.i=new to(re,F.h))}function Sn(F,re,le){F.i.set(re,le)}function lr(F){return Sn(F,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),F}function _n(F,re){return F?re?decodeURI(F.replace(/%25/g,"%2525")):decodeURIComponent(F):""}function br(F,re,le){return typeof F=="string"?(F=encodeURI(F).replace(re,ls),le&&(F=F.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F):null}function ls(F){return F=F.charCodeAt(0),"%"+(F>>4&15).toString(16)+(F&15).toString(16)}var Ao=/[#\/\?@]/g,Dl=/[#\?:]/g,gd=/[#\?]/g,Yu=/[#\?@]/g,yf=/#/g;function to(F,re){this.h=this.g=null,this.i=F||null,this.j=!!re}function Mi(F){F.g||(F.g=new Map,F.h=0,F.i&&kt(F.i,function(re,le){F.add(decodeURIComponent(re.replace(/\+/g," ")),le)}))}e=to.prototype,e.add=function(F,re){Mi(this),this.i=null,F=Ca(this,F);var le=this.g.get(F);return le||this.g.set(F,le=[]),le.push(re),this.h+=1,this};function ko(F,re){Mi(F),re=Ca(F,re),F.g.has(re)&&(F.i=null,F.h-=F.g.get(re).length,F.g.delete(re))}function ea(F,re){return Mi(F),re=Ca(F,re),F.g.has(re)}e.forEach=function(F,re){Mi(this),this.g.forEach(function(le,be){le.forEach(function(Xe){F.call(re,Xe,be,this)},this)},this)},e.na=function(){Mi(this);const F=Array.from(this.g.values()),re=Array.from(this.g.keys()),le=[];for(let be=0;be<re.length;be++){const Xe=F[be];for(let ut=0;ut<Xe.length;ut++)le.push(re[be])}return le},e.V=function(F){Mi(this);let re=[];if(typeof F=="string")ea(this,F)&&(re=re.concat(this.g.get(Ca(this,F))));else{F=Array.from(this.g.values());for(let le=0;le<F.length;le++)re=re.concat(F[le])}return re},e.set=function(F,re){return Mi(this),this.i=null,F=Ca(this,F),ea(this,F)&&(this.h-=this.g.get(F).length),this.g.set(F,[re]),this.h+=1,this},e.get=function(F,re){return F?(F=this.V(F),0<F.length?String(F[0]):re):re};function cr(F,re,le){ko(F,re),0<le.length&&(F.i=null,F.g.set(Ca(F,re),m(le)),F.h+=le.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const F=[],re=Array.from(this.g.keys());for(var le=0;le<re.length;le++){var be=re[le];const ut=encodeURIComponent(String(be)),Xt=this.V(be);for(be=0;be<Xt.length;be++){var Xe=ut;Xt[be]!==""&&(Xe+="="+encodeURIComponent(String(Xt[be]))),F.push(Xe)}}return this.i=F.join("&")};function Ca(F,re){return re=String(re),F.j&&(re=re.toLowerCase()),re}function Aa(F,re){re&&!F.j&&(Mi(F),F.i=null,F.g.forEach(function(le,be){var Xe=be.toLowerCase();be!=Xe&&(ko(this,be),cr(this,Xe,le))},F)),F.j=re}function vp(F,re){const le=new Hi;if(a.Image){const be=new Image;be.onload=h(ks,le,"TestLoadImage: loaded",!0,re,be),be.onerror=h(ks,le,"TestLoadImage: error",!1,re,be),be.onabort=h(ks,le,"TestLoadImage: abort",!1,re,be),be.ontimeout=h(ks,le,"TestLoadImage: timeout",!1,re,be),a.setTimeout(function(){be.ontimeout&&be.ontimeout()},1e4),be.src=F}else re(!1)}function Ol(F,re){const le=new Hi,be=new AbortController,Xe=setTimeout(()=>{be.abort(),ks(le,"TestPingServer: timeout",!1,re)},1e4);fetch(F,{signal:be.signal}).then(ut=>{clearTimeout(Xe),ut.ok?ks(le,"TestPingServer: ok",!0,re):ks(le,"TestPingServer: server error",!1,re)}).catch(()=>{clearTimeout(Xe),ks(le,"TestPingServer: error",!1,re)})}function ks(F,re,le,be,Xe){try{Xe&&(Xe.onload=null,Xe.onerror=null,Xe.onabort=null,Xe.ontimeout=null),be(le)}catch{}}function Rs(){this.g=new Ei}function yd(F,re,le){const be=le||"";try{De(F,function(Xe,ut){let Xt=Xe;l(Xe)&&(Xt=Hn(Xe)),re.push(be+ut+"="+encodeURIComponent(Xt))})}catch(Xe){throw re.push(be+"type="+encodeURIComponent("_badmap")),Xe}}function Tc(F){this.l=F.Ub||null,this.j=F.eb||!1}p(Tc,Dr),Tc.prototype.g=function(){return new Ml(this.l,this.j)},Tc.prototype.i=function(F){return function(){return F}}({});function Ml(F,re){Fe.call(this),this.D=F,this.o=re,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Ml,Fe),e=Ml.prototype,e.open=function(F,re){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=F,this.A=re,this.readyState=1,Gn(this)},e.send=function(F){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const re={headers:this.u,method:this.B,credentials:this.m,cache:void 0};F&&(re.body=F),(this.D||a).fetch(new Request(this.A,re)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xr(this)),this.readyState=0},e.Sa=function(F){if(this.g&&(this.l=F,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=F.headers,this.readyState=2,Gn(this)),this.g&&(this.readyState=3,Gn(this),this.g)))if(this.responseType==="arraybuffer")F.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in F){if(this.j=F.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;X0(this)}else F.text().then(this.Ra.bind(this),this.ga.bind(this))};function X0(F){F.j.read().then(F.Pa.bind(F)).catch(F.ga.bind(F))}e.Pa=function(F){if(this.g){if(this.o&&F.value)this.response.push(F.value);else if(!this.o){var re=F.value?F.value:new Uint8Array(0);(re=this.v.decode(re,{stream:!F.done}))&&(this.response=this.responseText+=re)}F.done?xr(this):Gn(this),this.readyState==3&&X0(this)}},e.Ra=function(F){this.g&&(this.response=this.responseText=F,xr(this))},e.Qa=function(F){this.g&&(this.response=F,xr(this))},e.ga=function(){this.g&&xr(this)};function xr(F){F.readyState=4,F.l=null,F.j=null,F.v=null,Gn(F)}e.setRequestHeader=function(F,re){this.u.append(F,re)},e.getResponseHeader=function(F){return this.h&&this.h.get(F.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const F=[],re=this.h.entries();for(var le=re.next();!le.done;)le=le.value,F.push(le[0]+": "+le[1]),le=re.next();return F.join(`\r
`)};function Gn(F){F.onreadystatechange&&F.onreadystatechange.call(F)}Object.defineProperty(Ml.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(F){this.m=F?"include":"same-origin"}});function Cc(F){let re="";return C(F,function(le,be){re+=be,re+=":",re+=le,re+=`\r
`}),re}function Ce(F,re,le){e:{for(be in le){var be=!1;break e}be=!0}be||(le=Cc(le),typeof F=="string"?le!=null&&encodeURIComponent(String(le)):Sn(F,re,le))}function Ne(F){Fe.call(this),this.headers=new Map,this.o=F||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(Ne,Fe);var rt=/^https?$/i,hn=["POST","PUT"];e=Ne.prototype,e.Ha=function(F){this.J=F},e.ea=function(F,re,le,be){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+F);re=re?re.toUpperCase():"GET",this.D=F,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bs.g(),this.v=this.o?Co(this.o):Co(bs),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(re,String(F),!0),this.B=!1}catch(ut){ir(this,ut);return}if(F=le||"",le=new Map(this.headers),be)if(Object.getPrototypeOf(be)===Object.prototype)for(var Xe in be)le.set(Xe,be[Xe]);else if(typeof be.keys=="function"&&typeof be.get=="function")for(const ut of be.keys())le.set(ut,be.get(ut));else throw Error("Unknown input type for opt_headers: "+String(be));be=Array.from(le.keys()).find(ut=>ut.toLowerCase()=="content-type"),Xe=a.FormData&&F instanceof a.FormData,!(0<=Array.prototype.indexOf.call(hn,re,void 0))||be||Xe||le.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ut,Xt]of le)this.g.setRequestHeader(ut,Xt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Tr(this),this.u=!0,this.g.send(F),this.u=!1}catch(ut){ir(this,ut)}};function ir(F,re){F.h=!1,F.g&&(F.j=!0,F.g.abort(),F.j=!1),F.l=re,F.m=5,Or(F),dn(F)}function Or(F){F.A||(F.A=!0,Qe(F,"complete"),Qe(F,"error"))}e.abort=function(F){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=F||7,Qe(this,"complete"),Qe(this,"abort"),dn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dn(this,!0)),Ne.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?gi(this):this.bb())},e.bb=function(){gi(this)};function gi(F){if(F.h&&typeof o<"u"&&(!F.v[1]||Ir(F)!=4||F.Z()!=2)){if(F.u&&Ir(F)==4)Vt(F.Ea,0,F);else if(Qe(F,"readystatechange"),Ir(F)==4){F.h=!1;try{const Xt=F.Z();e:switch(Xt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var re=!0;break e;default:re=!1}var le;if(!(le=re)){var be;if(be=Xt===0){var Xe=String(F.D).match(ht)[1]||null;!Xe&&a.self&&a.self.location&&(Xe=a.self.location.protocol.slice(0,-1)),be=!rt.test(Xe?Xe.toLowerCase():"")}le=be}if(le)Qe(F,"complete"),Qe(F,"success");else{F.m=6;try{var ut=2<Ir(F)?F.g.statusText:""}catch{ut=""}F.l=ut+" ["+F.Z()+"]",Or(F)}}finally{dn(F)}}}}function dn(F,re){if(F.g){Tr(F);const le=F.g,be=F.v[0]?()=>{}:null;F.g=null,F.v=null,re||Qe(F,"ready");try{le.onreadystatechange=be}catch{}}}function Tr(F){F.I&&(a.clearTimeout(F.I),F.I=null)}e.isActive=function(){return!!this.g};function Ir(F){return F.g?F.g.readyState:0}e.Z=function(){try{return 2<Ir(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(F){if(this.g){var re=this.g.responseText;return F&&re.indexOf(F)==0&&(re=re.substring(F.length)),nr(re)}};function _s(F){try{if(!F.g)return null;if("response"in F.g)return F.g.response;switch(F.H){case"":case"text":return F.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in F.g)return F.g.mozResponseArrayBuffer}return null}catch{return null}}function ta(F){const re={};F=(F.g&&2<=Ir(F)&&F.g.getAllResponseHeaders()||"").split(`\r
`);for(let be=0;be<F.length;be++){if(y(F[be]))continue;var le=L(F[be]);const Xe=le[0];if(le=le[1],typeof le!="string")continue;le=le.trim();const ut=re[Xe]||[];re[Xe]=ut,ut.push(le)}R(re,function(be){return be.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mr(F,re,le){return le&&le.internalChannelParams&&le.internalChannelParams[F]||re}function js(F){this.Aa=0,this.i=[],this.j=new Hi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mr("failFast",!1,F),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mr("baseRetryDelayMs",5e3,F),this.cb=Mr("retryDelaySeedMs",1e4,F),this.Wa=Mr("forwardChannelMaxRetries",2,F),this.wa=Mr("forwardChannelRequestTimeoutMs",2e4,F),this.pa=F&&F.xmlHttpFactory||void 0,this.Xa=F&&F.Tb||void 0,this.Ca=F&&F.useFetchStreams||!1,this.L=void 0,this.J=F&&F.supportsCrossDomainXhr||!1,this.K="",this.h=new Zo(F&&F.concurrentRequestLimit),this.Da=new Rs,this.P=F&&F.fastHandshake||!1,this.O=F&&F.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=F&&F.Rb||!1,F&&F.xa&&this.j.xa(),F&&F.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&F&&F.detectBufferingProxy||!1,this.ja=void 0,F&&F.longPollingTimeout&&0<F.longPollingTimeout&&(this.ja=F.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=js.prototype,e.la=8,e.G=1,e.connect=function(F,re,le,be){si(0),this.W=F,this.H=re||{},le&&be!==void 0&&(this.H.OSID=le,this.H.OAID=be),this.F=this.X,this.I=bd(this,null,this.W),na(this)};function Li(F){if(Xa(F),F.G==3){var re=F.U++,le=Rt(F.I);if(Sn(le,"SID",F.K),Sn(le,"RID",re),Sn(le,"TYPE","terminate"),Ac(F,le),re=new Jo(F,F.j,re),re.L=2,re.v=lr(Rt(le)),le=!1,a.navigator&&a.navigator.sendBeacon)try{le=a.navigator.sendBeacon(re.v.toString(),"")}catch{}!le&&a.Image&&(new Image().src=re.v,le=!0),le||(re.g=jg(re.j,null),re.g.ea(re.v)),re.F=Date.now(),Er(re)}Bg(F)}function no(F){F.g&&(ka(F),F.g.cancel(),F.g=null)}function Xa(F){no(F),F.u&&(a.clearTimeout(F.u),F.u=null),vd(F),F.h.cancel(),F.s&&(typeof F.s=="number"&&a.clearTimeout(F.s),F.s=null)}function na(F){if(!qi(F.h)&&!F.s){F.s=!0;var re=F.Ga;Z||X(),ne||(Z(),ne=!0),ue.add(re,F),F.B=0}}function $g(F,re){return ti(F.h)>=F.h.j-(F.s?1:0)?!1:F.s?(F.i=re.D.concat(F.i),!0):F.G==1||F.G==2||F.B>=(F.Va?0:F.Wa)?!1:(F.s=Xr(d(F.Ga,F,re),Ku(F,F.B)),F.B++,!0)}e.Ga=function(F){if(this.s)if(this.s=null,this.G==1){if(!F){this.U=Math.floor(1e5*Math.random()),F=this.U++;const Xe=new Jo(this,this.j,F);let ut=this.o;if(this.S&&(ut?(ut=I(ut),M(ut,this.S)):ut=this.S),this.m!==null||this.O||(Xe.H=ut,ut=null),this.P)e:{for(var re=0,le=0;le<this.i.length;le++){t:{var be=this.i[le];if("__data__"in be.map&&(be=be.map.__data__,typeof be=="string")){be=be.length;break t}be=void 0}if(be===void 0)break;if(re+=be,4096<re){re=le;break e}if(re===4096||le===this.i.length-1){re=le+1;break e}}re=1e3}else re=1e3;re=oi(this,Xe,re),le=Rt(this.I),Sn(le,"RID",F),Sn(le,"CVER",22),this.D&&Sn(le,"X-HTTP-Session-Id",this.D),Ac(this,le),ut&&(this.O?re="headers="+encodeURIComponent(String(Cc(ut)))+"&"+re:this.m&&Ce(le,this.m,ut)),ve(this.h,Xe),this.Ua&&Sn(le,"TYPE","init"),this.P?(Sn(le,"$req",re),Sn(le,"SID","null"),Xe.T=!0,gf(Xe,le,null)):gf(Xe,le,re),this.G=2}}else this.G==3&&(F?ro(this,F):this.i.length==0||qi(this.h)||ro(this))};function ro(F,re){var le;re?le=re.l:le=F.U++;const be=Rt(F.I);Sn(be,"SID",F.K),Sn(be,"RID",le),Sn(be,"AID",F.T),Ac(F,be),F.m&&F.o&&Ce(be,F.m,F.o),le=new Jo(F,F.j,le,F.B+1),F.m===null&&(le.H=F.o),re&&(F.i=re.D.concat(F.i)),re=oi(F,le,1e3),le.I=Math.round(.5*F.wa)+Math.round(.5*F.wa*Math.random()),ve(F.h,le),gf(le,be,re)}function Ac(F,re){F.H&&C(F.H,function(le,be){Sn(re,be,le)}),F.l&&De({},function(le,be){Sn(re,be,le)})}function oi(F,re,le){le=Math.min(F.i.length,le);var be=F.l?d(F.l.Na,F.l,F):null;e:{var Xe=F.i;let ut=-1;for(;;){const Xt=["count="+le];ut==-1?0<le?(ut=Xe[0].g,Xt.push("ofs="+ut)):ut=0:Xt.push("ofs="+ut);let Lr=!0;for(let Us=0;Us<le;Us++){let Pr=Xe[Us].g;const ai=Xe[Us].map;if(Pr-=ut,0>Pr)ut=Math.max(0,Xe[Us].g-100),Lr=!1;else try{yd(ai,Xt,"req"+Pr+"_")}catch{be&&be(ai)}}if(Lr){be=Xt.join("&");break e}}}return F=F.i.splice(0,le),re.D=F,be}function Ro(F){if(!F.g&&!F.u){F.Y=1;var re=F.Fa;Z||X(),ne||(Z(),ne=!0),ue.add(re,F),F.v=0}}function yi(F){return F.g||F.u||3<=F.v?!1:(F.Y++,F.u=Xr(d(F.Fa,F),Ku(F,F.v)),F.v++,!0)}e.Fa=function(){if(this.u=null,ra(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var F=2*this.R;this.j.info("BP detection timer enabled: "+F),this.A=Xr(d(this.ab,this),F)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,si(10),no(this),ra(this))};function ka(F){F.A!=null&&(a.clearTimeout(F.A),F.A=null)}function ra(F){F.g=new Jo(F,F.j,"rpc",F.Y),F.m===null&&(F.g.H=F.o),F.g.O=0;var re=Rt(F.qa);Sn(re,"RID","rpc"),Sn(re,"SID",F.K),Sn(re,"AID",F.T),Sn(re,"CI",F.F?"0":"1"),!F.F&&F.ja&&Sn(re,"TO",F.ja),Sn(re,"TYPE","xmlhttp"),Ac(F,re),F.m&&F.o&&Ce(re,F.m,F.o),F.L&&(F.g.I=F.L);var le=F.g;F=F.ia,le.L=1,le.v=lr(Rt(re)),le.m=null,le.P=!0,xc(le,F)}e.Za=function(){this.C!=null&&(this.C=null,no(this),yi(this),si(19))};function vd(F){F.C!=null&&(a.clearTimeout(F.C),F.C=null)}function vi(F,re){var le=null;if(F.g==re){vd(F),ka(F),F.g=null;var be=2}else if(rr(F.h,re))le=re.D,Ie(F.h,re),be=1;else return;if(F.G!=0){if(re.o)if(be==1){le=re.m?re.m.length:0,re=Date.now()-re.F;var Xe=F.B;be=Ea(),Qe(be,new Zs(be,le)),na(F)}else Ro(F);else if(Xe=re.s,Xe==3||Xe==0&&0<re.X||!(be==1&&$g(F,re)||be==2&&yi(F)))switch(le&&0<le.length&&(re=F.h,re.i=re.i.concat(le)),Xe){case 1:Xu(F,5);break;case 4:Xu(F,10);break;case 3:Xu(F,6);break;default:Xu(F,2)}}}function Ku(F,re){let le=F.Ta+Math.floor(Math.random()*F.cb);return F.isActive()||(le*=2),le*re}function Xu(F,re){if(F.j.info("Error code "+re),re==2){var le=d(F.fb,F),be=F.Xa;const Xe=!be;be=new Nt(be||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||jt(be,"https"),lr(be),Xe?vp(be.toString(),le):Ol(be.toString(),le)}else si(2);F.G=0,F.l&&F.l.sa(re),Bg(F),Xa(F)}e.fb=function(F){F?(this.j.info("Successfully pinged google.com"),si(2)):(this.j.info("Failed to ping google.com"),si(1))};function Bg(F){if(F.G=0,F.ka=[],F.l){const re=Se(F.h);(re.length!=0||F.i.length!=0)&&(g(F.ka,re),g(F.ka,F.i),F.h.i.length=0,m(F.i),F.i.length=0),F.l.ra()}}function bd(F,re,le){var be=le instanceof Nt?Rt(le):new Nt(le);if(be.g!="")re&&(be.g=re+"."+be.g),Zt(be,be.s);else{var Xe=a.location;be=Xe.protocol,re=re?re+"."+Xe.hostname:Xe.hostname,Xe=+Xe.port;var ut=new Nt(null);be&&jt(ut,be),re&&(ut.g=re),Xe&&Zt(ut,Xe),le&&(ut.l=le),be=ut}return le=F.D,re=F.ya,le&&re&&Sn(be,le,re),Sn(be,"VER",F.la),Ac(F,be),be}function jg(F,re,le){if(re&&!F.J)throw Error("Can't create secondary domain capable XhrIo object.");return re=F.Ca&&!F.pa?new Ne(new Tc({eb:le})):new Ne(F.pa),re.Ha(F.J),re}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function vf(){}e=vf.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function vh(){}vh.prototype.g=function(F,re){return new Ra(F,re)};function Ra(F,re){Fe.call(this),this.g=new js(re),this.l=F,this.h=re&&re.messageUrlParams||null,F=re&&re.messageHeaders||null,re&&re.clientProtocolHeaderRequired&&(F?F["X-Client-Protocol"]="webchannel":F={"X-Client-Protocol":"webchannel"}),this.g.o=F,F=re&&re.initMessageHeaders||null,re&&re.messageContentType&&(F?F["X-WebChannel-Content-Type"]=re.messageContentType:F={"X-WebChannel-Content-Type":re.messageContentType}),re&&re.va&&(F?F["X-WebChannel-Client-Profile"]=re.va:F={"X-WebChannel-Client-Profile":re.va}),this.g.S=F,(F=re&&re.Sb)&&!y(F)&&(this.g.m=F),this.v=re&&re.supportsCrossDomainXhr||!1,this.u=re&&re.sendRawJson||!1,(re=re&&re.httpSessionIdParam)&&!y(re)&&(this.g.D=re,F=this.h,F!==null&&re in F&&(F=this.h,re in F&&delete F[re])),this.j=new xu(this)}p(Ra,Fe),Ra.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ra.prototype.close=function(){Li(this.g)},Ra.prototype.o=function(F){var re=this.g;if(typeof F=="string"){var le={};le.__data__=F,F=le}else this.u&&(le={},le.__data__=Hn(F),F=le);re.i.push(new Sc(re.Ya++,F)),re.G==3&&na(re)},Ra.prototype.N=function(){this.g.l=null,delete this.j,Li(this.g),delete this.g,Ra.aa.N.call(this)};function bf(F){Zi.call(this),F.__headers__&&(this.headers=F.__headers__,this.statusCode=F.__status__,delete F.__headers__,delete F.__status__);var re=F.__sm__;if(re){e:{for(const le in re){F=le;break e}F=void 0}(this.i=F)&&(F=this.i,re=re!==null&&F in re?re[F]:void 0),this.data=re}else this.data=F}p(bf,Zi);function xd(){ei.call(this),this.status=1}p(xd,ei);function xu(F){this.g=F}p(xu,vf),xu.prototype.ua=function(){Qe(this.g,"a")},xu.prototype.ta=function(F){Qe(this.g,new bf(F))},xu.prototype.sa=function(F){Qe(this.g,new xd)},xu.prototype.ra=function(){Qe(this.g,"b")},vh.prototype.createWebChannel=vh.prototype.g,Ra.prototype.send=Ra.prototype.o,Ra.prototype.open=Ra.prototype.m,Ra.prototype.close=Ra.prototype.close,Mbe=function(){return new vh},Obe=function(){return Ea()},Dbe=mo,jU={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hr.NO_ERROR=0,Hr.TIMEOUT=8,Hr.HTTP_ERROR=6,kP=Hr,Pl.COMPLETE="complete",Nbe=Pl,Ji.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",Fe.prototype.listen=Fe.prototype.K,E3=Ji,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,Pbe=Ne}).apply(typeof x6<"u"?x6:typeof self<"u"?self:typeof window<"u"?window:{});const Rie="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}qf.UNAUTHENTICATED=new qf(null),qf.GOOGLE_CREDENTIALS=new qf("google-credentials-uid"),qf.FIRST_PARTY=new qf("first-party-uid"),qf.MOCK_USER=new qf("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MT="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=new A9("@firebase/firestore");function gE(){return W_.logLevel}function wn(e,...t){if(W_.logLevel<=ni.DEBUG){const n=t.map(zG);W_.debug(`Firestore (${MT}): ${e}`,...n)}}function p1(e,...t){if(W_.logLevel<=ni.ERROR){const n=t.map(zG);W_.error(`Firestore (${MT}): ${e}`,...n)}}function t4(e,...t){if(W_.logLevel<=ni.WARN){const n=t.map(zG);W_.warn(`Firestore (${MT}): ${e}`,...n)}}function zG(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(e="Unexpected state"){const t=`FIRESTORE (${MT}) INTERNAL ASSERTION FAILED: `+e;throw p1(t),new Error(t)}function Qi(e,t){e||ar()}function vr(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mn extends wg{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JZe{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class ZZe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(qf.UNAUTHENTICATED))}shutdown(){}}class eet{constructor(t){this.t=t,this.currentUser=qf.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Qi(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Xy;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xy,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{wn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(wn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xy)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(wn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qi(typeof r.accessToken=="string"),new JZe(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Qi(t===null||typeof t=="string"),new qf(t)}}class tet{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=qf.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class net{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new tet(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(qf.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ret{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iet{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){Qi(this.o===void 0);const r=s=>{s.error!=null&&wn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,wn("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{wn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):wn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Qi(typeof n.token=="string"),this.R=n.token,new ret(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function set(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lbe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=set(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function fi(e,t){return e<t?-1:e>t?1:0}function yS(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{static now(){return hu.fromMillis(Date.now())}static fromDate(t){return hu.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new hu(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new mn(Tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new mn(Tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new mn(Tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mn(Tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?fi(this.nanoseconds,t.nanoseconds):fi(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{static fromTimestamp(t){return new yr(t)}static min(){return new yr(new hu(0,0))}static max(){return new yr(new hu(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(t,n,r){n===void 0?n=0:n>t.length&&ar(),r===void 0?r=t.length-n:r>t.length-n&&ar(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Sm.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Sm?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=Sm.compareSegments(t.get(i),n.get(i));if(s!==0)return s}return Math.sign(t.length-n.length)}static compareSegments(t,n){const r=Sm.isNumericId(t),i=Sm.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Sm.extractNumericId(t).compare(Sm.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Qv.fromString(t.substring(4,t.length-2))}}class Ks extends Sm{construct(t,n,r){return new Ks(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new mn(Tt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ks(n)}static emptyPath(){return new Ks([])}}const oet=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gl extends Sm{construct(t,n,r){return new gl(t,n,r)}static isValidIdentifier(t){return oet.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gl.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new gl(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new mn(Tt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new mn(Tt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new mn(Tt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new mn(Tt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new gl(n)}static emptyPath(){return new gl([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t){this.path=t}static fromPath(t){return new Vn(Ks.fromString(t))}static fromName(t){return new Vn(Ks.fromString(t).popFirst(5))}static empty(){return new Vn(Ks.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ks.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ks.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Vn(new Ks(t.slice()))}}function aet(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=yr.fromTimestamp(r===1e9?new hu(n+1,0):new hu(n,r));return new cb(i,Vn.empty(),t)}function uet(e){return new cb(e.readTime,e.key,-1)}class cb{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new cb(yr.min(),Vn.empty(),-1)}static max(){return new cb(yr.max(),Vn.empty(),-1)}}function cet(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Vn.comparator(e.documentKey,t.documentKey),n!==0?n:fi(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fet="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class det{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LT(e){if(e.code!==Tt.FAILED_PRECONDITION||e.message!==fet)throw e;wn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&ar(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Pt((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Pt?n:Pt.resolve(n)}catch(n){return Pt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Pt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Pt.reject(n)}static resolve(t){return new Pt((n,r)=>{n(t)})}static reject(t){return new Pt((n,r)=>{r(t)})}static waitFor(t){return new Pt((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Pt.resolve(!1);for(const r of t)n=n.next(i=>i?Pt.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Pt((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Pt((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function het(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function FT(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}I9.oe=-1;function P9(e){return e==null}function y8(e){return e===0&&1/e==-1/0}function pet(e){return typeof e=="number"&&Number.isInteger(e)&&!y8(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function met(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Iie(t)),t=get(e.get(n),t);return Iie(t)}function get(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const s=e.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Iie(e){return e+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pie(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Yb(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Fbe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t,n){this.comparator=t,this.root=n||dl.EMPTY}insert(t,n){return new To(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,dl.BLACK,null,null))}remove(t){return new To(this.comparator,this.root.remove(t,this.comparator).copy(null,null,dl.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new _6(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new _6(this.root,t,this.comparator,!1)}getReverseIterator(){return new _6(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new _6(this.root,t,this.comparator,!0)}}class _6{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class dl{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??dl.RED,this.left=i??dl.EMPTY,this.right=s??dl.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new dl(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return dl.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return dl.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,dl.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,dl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ar();const t=this.left.check();if(t!==this.right.check())throw ar();return t+(this.isRed()?0:1)}}dl.EMPTY=null,dl.RED=!0,dl.BLACK=!1;dl.EMPTY=new class{constructor(){this.size=0}get key(){throw ar()}get value(){throw ar()}get color(){throw ar()}get left(){throw ar()}get right(){throw ar()}copy(t,n,r,i,s){return this}insert(t,n,r){return new dl(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(t){this.comparator=t,this.data=new To(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nie(this.data.getIterator())}getIteratorFrom(t){return new Nie(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof pu)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new pu(this.comparator);return n.data=t,n}}class Nie{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(t){this.fields=t,t.sort(gl.comparator)}static empty(){return new Yd([])}unionWith(t){let n=new pu(gl.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Yd(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return yS(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $be extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new $be("Invalid base64 string: "+s):s}}(t);return new Cl(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Cl(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return fi(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Cl.EMPTY_BYTE_STRING=new Cl("");const yet=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fb(e){if(Qi(!!e),typeof e=="string"){let t=0;const n=yet.exec(e);if(Qi(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ma(e.seconds),nanos:ma(e.nanos)}}function ma(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function db(e){return typeof e=="string"?Cl.fromBase64String(e):Cl.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VG(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function N9(e){const t=e.mapValue.fields.__previous_value__;return VG(t)?N9(t):t}function n4(e){const t=fb(e.mapValue.fields.__local_write_time__.timestampValue);return new hu(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vet{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class r4{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new r4("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof r4&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function hb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?VG(e)?4:xet(e)?9007199254740991:bet(e)?10:11:ar()}function og(e,t){if(e===t)return!0;const n=hb(e);if(n!==hb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return n4(e).isEqual(n4(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=fb(i.timestampValue),a=fb(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return db(i.bytesValue).isEqual(db(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return ma(i.geoPointValue.latitude)===ma(s.geoPointValue.latitude)&&ma(i.geoPointValue.longitude)===ma(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ma(i.integerValue)===ma(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ma(i.doubleValue),a=ma(s.doubleValue);return o===a?y8(o)===y8(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return yS(e.arrayValue.values||[],t.arrayValue.values||[],og);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Pie(o)!==Pie(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!og(o[u],a[u])))return!1;return!0}(e,t);default:return ar()}}function i4(e,t){return(e.values||[]).find(n=>og(n,t))!==void 0}function vS(e,t){if(e===t)return 0;const n=hb(e),r=hb(t);if(n!==r)return fi(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fi(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=ma(s.integerValue||s.doubleValue),u=ma(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Die(e.timestampValue,t.timestampValue);case 4:return Die(n4(e),n4(t));case 5:return fi(e.stringValue,t.stringValue);case 6:return function(s,o){const a=db(s),u=db(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=fi(a[l],u[l]);if(c!==0)return c}return fi(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=fi(ma(s.latitude),ma(o.latitude));return a!==0?a:fi(ma(s.longitude),ma(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Oie(e.arrayValue,t.arrayValue);case 10:return function(s,o){var a,u,l,c;const f=s.fields||{},d=o.fields||{},h=(a=f.value)===null||a===void 0?void 0:a.arrayValue,p=(u=d.value)===null||u===void 0?void 0:u.arrayValue,m=fi(((l=h==null?void 0:h.values)===null||l===void 0?void 0:l.length)||0,((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0);return m!==0?m:Oie(h,p)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===w6.mapValue&&o===w6.mapValue)return 0;if(s===w6.mapValue)return 1;if(o===w6.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=fi(u[f],c[f]);if(d!==0)return d;const h=vS(a[u[f]],l[c[f]]);if(h!==0)return h}return fi(u.length,c.length)}(e.mapValue,t.mapValue);default:throw ar()}}function Die(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return fi(e,t);const n=fb(e),r=fb(t),i=fi(n.seconds,r.seconds);return i!==0?i:fi(n.nanos,r.nanos)}function Oie(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=vS(n[i],r[i]);if(s)return s}return fi(n.length,r.length)}function bS(e){return UU(e)}function UU(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=fb(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return db(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Vn.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=UU(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${UU(n.fields[o])}`;return i+"}"}(e.mapValue):ar()}function RP(e){switch(hb(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=N9(e);return t?16+RP(t):16;case 5:return 2*e.stringValue.length;case 6:return db(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+RP(s),0)}(e.arrayValue);case 10:case 11:return function(r){let i=0;return Yb(r.fields,(s,o)=>{i+=s.length+RP(o)}),i}(e.mapValue);default:throw ar()}}function Mie(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function zU(e){return!!e&&"integerValue"in e}function HG(e){return!!e&&"arrayValue"in e}function Lie(e){return!!e&&"nullValue"in e}function Fie(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function IP(e){return!!e&&"mapValue"in e}function bet(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function bk(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Yb(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=bk(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=bk(e.arrayValue.values[n]);return t}return Object.assign({},e)}function xet(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(t){this.value=t}static empty(){return new Xf({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!IP(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=bk(n)}setAll(t){let n=gl.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=bk(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());IP(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return og(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];IP(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Yb(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Xf(bk(this.value))}}function Bbe(e){const t=[];return Yb(e.fields,(n,r)=>{const i=new gl([n]);if(IP(r)){const s=Bbe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Yd(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new tc(t,0,yr.min(),yr.min(),yr.min(),Xf.empty(),0)}static newFoundDocument(t,n,r,i){return new tc(t,1,n,yr.min(),r,i,0)}static newNoDocument(t,n){return new tc(t,2,n,yr.min(),yr.min(),Xf.empty(),0)}static newUnknownDocument(t,n){return new tc(t,3,n,yr.min(),yr.min(),Xf.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(yr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Xf.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Xf.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof tc&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new tc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v8=class{constructor(t,n){this.position=t,this.inclusive=n}};function $ie(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Vn.comparator(Vn.fromName(o.referenceValue),n.key):r=vS(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Bie(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!og(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(t,n="asc"){this.field=t,this.dir=n}}function _et(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jbe=class{};class Va extends jbe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Eet(t,n,r):n==="array-contains"?new Aet(t,r):n==="in"?new ket(t,r):n==="not-in"?new Ret(t,r):n==="array-contains-any"?new Iet(t,r):new Va(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Tet(t,r):new Cet(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(vS(n,this.value)):n!==null&&hb(this.value)===hb(n)&&this.matchesComparison(vS(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ar()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class A0 extends jbe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new A0(t,n)}matches(t){return Ube(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ube(e){return e.op==="and"}function zbe(e){return wet(e)&&Ube(e)}function wet(e){for(const t of e.filters)if(t instanceof A0)return!1;return!0}function VU(e){if(e instanceof Va)return e.field.canonicalString()+e.op.toString()+bS(e.value);if(zbe(e))return e.filters.map(t=>VU(t)).join(",");{const t=e.filters.map(n=>VU(n)).join(",");return`${e.op}(${t})`}}function Vbe(e,t){return e instanceof Va?function(r,i){return i instanceof Va&&r.op===i.op&&r.field.isEqual(i.field)&&og(r.value,i.value)}(e,t):e instanceof A0?function(r,i){return i instanceof A0&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Vbe(o,i.filters[a]),!0):!1}(e,t):void ar()}function Hbe(e){return e instanceof Va?function(n){return`${n.field.canonicalString()} ${n.op} ${bS(n.value)}`}(e):e instanceof A0?function(n){return n.op.toString()+" {"+n.getFilters().map(Hbe).join(" ,")+"}"}(e):"Filter"}class Eet extends Va{constructor(t,n,r){super(t,n,r),this.key=Vn.fromName(r.referenceValue)}matches(t){const n=Vn.comparator(t.key,this.key);return this.matchesComparison(n)}}class Tet extends Va{constructor(t,n){super(t,"in",n),this.keys=qbe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Cet extends Va{constructor(t,n){super(t,"not-in",n),this.keys=qbe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function qbe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Vn.fromName(r.referenceValue))}class Aet extends Va{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return HG(n)&&i4(n.arrayValue,this.value)}}class ket extends Va{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&i4(this.value.arrayValue,n)}}class Ret extends Va{constructor(t,n){super(t,"not-in",n)}matches(t){if(i4(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!i4(this.value.arrayValue,n)}}class Iet extends Va{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!HG(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>i4(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pet{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function jie(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Pet(e,t,n,r,i,s,o)}function qG(e){const t=vr(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>VU(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),P9(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>bS(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>bS(r)).join(",")),t.ue=n}return t.ue}function WG(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!_et(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Vbe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Bie(e.startAt,t.startAt)&&Bie(e.endAt,t.endAt)}function HU(e){return Vn.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Net(e,t,n,r,i,s,o,a){return new $T(e,t,n,r,i,s,o,a)}function GG(e){return new $T(e)}function Uie(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Wbe(e){return e.collectionGroup!==null}function xk(e){const t=vr(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new pu(gl.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new s4(s,r))}),n.has(gl.keyField().canonicalString())||t.ce.push(new s4(gl.keyField(),r))}return t.ce}function zm(e){const t=vr(e);return t.le||(t.le=Det(t,xk(e))),t.le}function Det(e,t){if(e.limitType==="F")return jie(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new s4(i.field,s)});const n=e.endAt?new v8(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new v8(e.startAt.position,e.startAt.inclusive):null;return jie(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function qU(e,t){const n=e.filters.concat([t]);return new $T(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function WU(e,t,n){return new $T(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function D9(e,t){return WG(zm(e),zm(t))&&e.limitType===t.limitType}function Gbe(e){return`${qG(zm(e))}|lt:${e.limitType}`}function yE(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Hbe(i)).join(", ")}]`),P9(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>bS(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>bS(i)).join(",")),`Target(${r})`}(zm(e))}; limitType=${e.limitType})`}function O9(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Vn.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of xk(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=$ie(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,xk(r),i)||r.endAt&&!function(o,a,u){const l=$ie(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,xk(r),i))}(e,t)}function Oet(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ybe(e){return(t,n)=>{let r=!1;for(const i of xk(e)){const s=Met(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Met(e,t,n){const r=e.field.isKeyField()?Vn.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?vS(u,l):ar()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ar()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Yb(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return Fbe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Let=new To(Vn.comparator);function m1(){return Let}const Kbe=new To(Vn.comparator);function S3(...e){let t=Kbe;for(const n of e)t=t.insert(n.key,n);return t}function Xbe(e){let t=Kbe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function E_(){return _k()}function Qbe(){return _k()}function _k(){return new Mw(e=>e.toString(),(e,t)=>e.isEqual(t))}const Fet=new To(Vn.comparator),$et=new pu(Vn.comparator);function ri(...e){let t=$et;for(const n of e)t=t.add(n);return t}const Bet=new pu(fi);function jet(){return Bet}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YG(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:y8(t)?"-0":t}}function Jbe(e){return{integerValue:""+e}}function Uet(e,t){return pet(t)?Jbe(t):YG(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(){this._=void 0}}function zet(e,t,n){return e instanceof o4?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&VG(s)&&(s=N9(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof a4?exe(e,t):e instanceof u4?txe(e,t):function(i,s){const o=Zbe(i,s),a=zie(o)+zie(i.Pe);return zU(o)&&zU(i.Pe)?Jbe(a):YG(i.serializer,a)}(e,t)}function Vet(e,t,n){return e instanceof a4?exe(e,t):e instanceof u4?txe(e,t):n}function Zbe(e,t){return e instanceof b8?function(r){return zU(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class o4 extends M9{}class a4 extends M9{constructor(t){super(),this.elements=t}}function exe(e,t){const n=nxe(t);for(const r of e.elements)n.some(i=>og(i,r))||n.push(r);return{arrayValue:{values:n}}}class u4 extends M9{constructor(t){super(),this.elements=t}}function txe(e,t){let n=nxe(t);for(const r of e.elements)n=n.filter(i=>!og(i,r));return{arrayValue:{values:n}}}class b8 extends M9{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function zie(e){return ma(e.integerValue||e.doubleValue)}function nxe(e){return HG(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Het{constructor(t,n){this.field=t,this.transform=n}}function qet(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof a4&&i instanceof a4||r instanceof u4&&i instanceof u4?yS(r.elements,i.elements,og):r instanceof b8&&i instanceof b8?og(r.Pe,i.Pe):r instanceof o4&&i instanceof o4}(e.transform,t.transform)}class Wet{constructor(t,n){this.version=t,this.transformResults=n}}class th{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new th}static exists(t){return new th(void 0,t)}static updateTime(t){return new th(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function PP(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class L9{}function rxe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new KG(e.key,th.none()):new wR(e.key,e.data,th.none());{const n=e.data,r=Xf.empty();let i=new pu(gl.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Kb(e.key,r,new Yd(i.toArray()),th.none())}}function Get(e,t,n){e instanceof wR?function(i,s,o){const a=i.value.clone(),u=Hie(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Kb?function(i,s,o){if(!PP(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Hie(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(ixe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function wk(e,t,n,r){return e instanceof wR?function(s,o,a,u){if(!PP(s.precondition,o))return a;const l=s.value.clone(),c=qie(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Kb?function(s,o,a,u){if(!PP(s.precondition,o))return a;const l=qie(s.fieldTransforms,u,o),c=o.data;return c.setAll(ixe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return PP(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function Yet(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=Zbe(r.transform,i||null);s!=null&&(n===null&&(n=Xf.empty()),n.set(r.field,s))}return n||null}function Vie(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&yS(r,i,(s,o)=>qet(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class wR extends L9{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Kb extends L9{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ixe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Hie(e,t,n){const r=new Map;Qi(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Vet(o,a,n[i]))}return r}function qie(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,zet(s,o,t))}return r}class KG extends L9{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ket extends L9{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xet{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&Get(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=wk(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=wk(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Qbe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=rxe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(yr.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ri())}isEqual(t){return this.batchId===t.batchId&&yS(this.mutations,t.mutations,(n,r)=>Vie(n,r))&&yS(this.baseMutations,t.baseMutations,(n,r)=>Vie(n,r))}}class XG{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Qi(t.mutations.length===r.length);let i=function(){return Fet}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new XG(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qet{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jet{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ua,_i;function Zet(e){switch(e){default:return ar();case Tt.CANCELLED:case Tt.UNKNOWN:case Tt.DEADLINE_EXCEEDED:case Tt.RESOURCE_EXHAUSTED:case Tt.INTERNAL:case Tt.UNAVAILABLE:case Tt.UNAUTHENTICATED:return!1;case Tt.INVALID_ARGUMENT:case Tt.NOT_FOUND:case Tt.ALREADY_EXISTS:case Tt.PERMISSION_DENIED:case Tt.FAILED_PRECONDITION:case Tt.ABORTED:case Tt.OUT_OF_RANGE:case Tt.UNIMPLEMENTED:case Tt.DATA_LOSS:return!0}}function sxe(e){if(e===void 0)return p1("GRPC error has no .code"),Tt.UNKNOWN;switch(e){case Ua.OK:return Tt.OK;case Ua.CANCELLED:return Tt.CANCELLED;case Ua.UNKNOWN:return Tt.UNKNOWN;case Ua.DEADLINE_EXCEEDED:return Tt.DEADLINE_EXCEEDED;case Ua.RESOURCE_EXHAUSTED:return Tt.RESOURCE_EXHAUSTED;case Ua.INTERNAL:return Tt.INTERNAL;case Ua.UNAVAILABLE:return Tt.UNAVAILABLE;case Ua.UNAUTHENTICATED:return Tt.UNAUTHENTICATED;case Ua.INVALID_ARGUMENT:return Tt.INVALID_ARGUMENT;case Ua.NOT_FOUND:return Tt.NOT_FOUND;case Ua.ALREADY_EXISTS:return Tt.ALREADY_EXISTS;case Ua.PERMISSION_DENIED:return Tt.PERMISSION_DENIED;case Ua.FAILED_PRECONDITION:return Tt.FAILED_PRECONDITION;case Ua.ABORTED:return Tt.ABORTED;case Ua.OUT_OF_RANGE:return Tt.OUT_OF_RANGE;case Ua.UNIMPLEMENTED:return Tt.UNIMPLEMENTED;case Ua.DATA_LOSS:return Tt.DATA_LOSS;default:return ar()}}(_i=Ua||(Ua={}))[_i.OK=0]="OK",_i[_i.CANCELLED=1]="CANCELLED",_i[_i.UNKNOWN=2]="UNKNOWN",_i[_i.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_i[_i.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_i[_i.NOT_FOUND=5]="NOT_FOUND",_i[_i.ALREADY_EXISTS=6]="ALREADY_EXISTS",_i[_i.PERMISSION_DENIED=7]="PERMISSION_DENIED",_i[_i.UNAUTHENTICATED=16]="UNAUTHENTICATED",_i[_i.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_i[_i.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_i[_i.ABORTED=10]="ABORTED",_i[_i.OUT_OF_RANGE=11]="OUT_OF_RANGE",_i[_i.UNIMPLEMENTED=12]="UNIMPLEMENTED",_i[_i.INTERNAL=13]="INTERNAL",_i[_i.UNAVAILABLE=14]="UNAVAILABLE",_i[_i.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ett(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ttt=new Qv([4294967295,4294967295],0);function Wie(e){const t=ett().encode(e),n=new Ibe;return n.update(t),new Uint8Array(n.digest())}function Gie(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Qv([n,r],0),new Qv([i,s],0)]}class QG{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new T3(`Invalid padding: ${n}`);if(r<0)throw new T3(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new T3(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new T3(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ie=Qv.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(Qv.fromNumber(r)));return i.compare(ttt)===1&&(i=new Qv([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=Wie(t),[r,i]=Gie(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ee(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new QG(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=Wie(t),[r,i]=Gie(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class T3 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,ER.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new F9(yr.min(),i,new To(fi),m1(),ri())}}class ER{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new ER(r,n,ri(),ri(),ri())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class oxe{constructor(t,n){this.targetId=t,this.me=n}}class axe{constructor(t,n,r=Cl.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Yie{constructor(){this.fe=0,this.ge=Kie(),this.pe=Cl.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=ri(),n=ri(),r=ri();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ar()}}),new ER(this.pe,this.ye,t,n,r)}Ce(){this.we=!1,this.ge=Kie()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Qi(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ntt{constructor(t){this.Be=t,this.Le=new Map,this.ke=m1(),this.qe=E6(),this.Qe=E6(),this.Ke=new To(fi)}$e(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.Ue(n,t.Ve):this.We(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.We(n,t.key,t.Ve)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(t.resumeToken));break;default:ar()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Le.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){const n=t.targetId,r=t.me.count,i=this.Ye(n);if(i){const s=i.target;if(HU(s))if(r===0){const o=new Vn(s.path);this.We(n,o,tc.newNoDocument(o,yr.min()))}else Qi(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),u=a?this.et(a,t,o):1;if(u!==0){this.He(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=db(r).toUint8Array()}catch(u){if(u instanceof $be)return t4("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new QG(o,i,s)}catch(u){return t4(u instanceof T3?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(t,n,r){return n.me.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.We(n,s,null),i++)}),i}it(t){const n=new Map;this.Le.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&HU(a.target)){const u=new Vn(a.target.path);this.st(u).has(o)||this.ot(o,u)||this.We(o,u,tc.newNoDocument(u,t))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ri();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new F9(t,n,this.Ke,this.ke,r);return this.ke=m1(),this.qe=E6(),this.Qe=E6(),this.Ke=new To(fi),i}Ue(t,n){if(!this.je(t))return;const r=this.ot(t,n.key)?2:0;this.ze(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const i=this.ze(t);this.ot(t,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(t)),this.Qe=this.Qe.insert(n,this._t(n).add(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Le.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.ze(t).xe()}ze(t){let n=this.Le.get(t);return n||(n=new Yie,this.Le.set(t,n)),n}_t(t){let n=this.Qe.get(t);return n||(n=new pu(fi),this.Qe=this.Qe.insert(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new pu(fi),this.qe=this.qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||wn("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.Le.get(t);return n&&n.Se?null:this.Be.ut(t)}He(t){this.Le.set(t,new Yie),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}ot(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}}function E6(){return new To(Vn.comparator)}function Kie(){return new To(Vn.comparator)}const rtt={asc:"ASCENDING",desc:"DESCENDING"},itt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},stt={and:"AND",or:"OR"};class ott{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function GU(e,t){return e.useProto3Json||P9(t)?t:{value:t}}function x8(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function uxe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function att(e,t){return x8(e,t.toTimestamp())}function Vm(e){return Qi(!!e),yr.fromTimestamp(function(n){const r=fb(n);return new hu(r.seconds,r.nanos)}(e))}function JG(e,t){return YU(e,t).canonicalString()}function YU(e,t){const n=function(i){return new Ks(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function lxe(e){const t=Ks.fromString(e);return Qi(pxe(t)),t}function KU(e,t){return JG(e.databaseId,t.path)}function u$(e,t){const n=lxe(t);if(n.get(1)!==e.databaseId.projectId)throw new mn(Tt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new mn(Tt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Vn(fxe(n))}function cxe(e,t){return JG(e.databaseId,t)}function utt(e){const t=lxe(e);return t.length===4?Ks.emptyPath():fxe(t)}function XU(e){return new Ks(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function fxe(e){return Qi(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Xie(e,t,n){return{name:KU(e,t),fields:n.value.mapValue.fields}}function ltt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ar()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Qi(c===void 0||typeof c=="string"),Cl.fromBase64String(c||"")):(Qi(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Cl.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Tt.UNKNOWN:sxe(l.code);return new mn(c,l.message||"")}(o);n=new axe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=u$(e,r.document.name),s=Vm(r.document.updateTime),o=r.document.createTime?Vm(r.document.createTime):yr.min(),a=new Xf({mapValue:{fields:r.document.fields}}),u=tc.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new NP(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=u$(e,r.document),s=r.readTime?Vm(r.readTime):yr.min(),o=tc.newNoDocument(i,s),a=r.removedTargetIds||[];n=new NP([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=u$(e,r.document),s=r.removedTargetIds||[];n=new NP([],s,i,null)}else{if(!("filter"in t))return ar();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Jet(i,s),a=r.targetId;n=new oxe(a,o)}}return n}function ctt(e,t){let n;if(t instanceof wR)n={update:Xie(e,t.key,t.value)};else if(t instanceof KG)n={delete:KU(e,t.key)};else if(t instanceof Kb)n={update:Xie(e,t.key,t.data),updateMask:btt(t.fieldMask)};else{if(!(t instanceof Ket))return ar();n={verify:KU(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof o4)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof a4)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof u4)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof b8)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ar()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:att(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ar()}(e,t.precondition)),n}function ftt(e,t){return e&&e.length>0?(Qi(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?Vm(i.updateTime):Vm(s);return o.isEqual(yr.min())&&(o=Vm(s)),new Wet(o,i.transformResults||[])}(n,t))):[]}function dtt(e,t){return{documents:[cxe(e,t.path)]}}function htt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=cxe(e,i);const s=function(l){if(l.length!==0)return hxe(A0.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:vE(d.field),direction:gtt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=GU(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ct:n,parent:i}}function ptt(e){let t=utt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qi(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=dxe(f);return d instanceof A0&&zbe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new s4(bE(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,P9(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new v8(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new v8(h,d)}(n.endAt)),Net(t,i,o,s,a,"F",u,l)}function mtt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ar()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function dxe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bE(n.unaryFilter.field);return Va.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=bE(n.unaryFilter.field);return Va.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=bE(n.unaryFilter.field);return Va.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=bE(n.unaryFilter.field);return Va.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ar()}}(e):e.fieldFilter!==void 0?function(n){return Va.create(bE(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ar()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return A0.create(n.compositeFilter.filters.map(r=>dxe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ar()}}(n.compositeFilter.op))}(e):ar()}function gtt(e){return rtt[e]}function ytt(e){return itt[e]}function vtt(e){return stt[e]}function vE(e){return{fieldPath:e.canonicalString()}}function bE(e){return gl.fromServerFormat(e.fieldPath)}function hxe(e){return e instanceof Va?function(n){if(n.op==="=="){if(Fie(n.value))return{unaryFilter:{field:vE(n.field),op:"IS_NAN"}};if(Lie(n.value))return{unaryFilter:{field:vE(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Fie(n.value))return{unaryFilter:{field:vE(n.field),op:"IS_NOT_NAN"}};if(Lie(n.value))return{unaryFilter:{field:vE(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vE(n.field),op:ytt(n.op),value:n.value}}}(e):e instanceof A0?function(n){const r=n.getFilters().map(i=>hxe(i));return r.length===1?r[0]:{compositeFilter:{op:vtt(n.op),filters:r}}}(e):ar()}function btt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function pxe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(t,n,r,i,s=yr.min(),o=yr.min(),a=Cl.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new $v(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new $v(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new $v(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new $v(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xtt{constructor(t){this.ht=t}}function _tt(e){const t=ptt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?WU(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wtt{constructor(){this.ln=new Ett}addToCollectionParentIndex(t,n){return this.ln.add(n),Pt.resolve()}getCollectionParents(t,n){return Pt.resolve(this.ln.getEntries(n))}addFieldIndex(t,n){return Pt.resolve()}deleteFieldIndex(t,n){return Pt.resolve()}deleteAllFieldIndexes(t){return Pt.resolve()}createTargetIndexes(t,n){return Pt.resolve()}getDocumentsMatchingTarget(t,n){return Pt.resolve(null)}getIndexType(t,n){return Pt.resolve(0)}getFieldIndexes(t,n){return Pt.resolve([])}getNextCollectionGroupToUpdate(t){return Pt.resolve(null)}getMinOffset(t,n){return Pt.resolve(cb.min())}getMinOffsetFromCollectionGroup(t,n){return Pt.resolve(cb.min())}updateCollectionGroup(t,n,r){return Pt.resolve()}updateIndexEntries(t,n){return Pt.resolve()}}class Ett{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new pu(Ks.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new pu(Ks.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qie={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Wf{static withCacheSize(t){return new Wf(t,Wf.DEFAULT_COLLECTION_PERCENTILE,Wf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wf.DEFAULT_COLLECTION_PERCENTILE=10,Wf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wf.DEFAULT=new Wf(41943040,Wf.DEFAULT_COLLECTION_PERCENTILE,Wf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wf.DISABLED=new Wf(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new xS(0)}static Qn(){return new xS(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jie([e,t],[n,r]){const i=fi(e,n);return i===0?fi(t,r):i}class Stt{constructor(t){this.Gn=t,this.buffer=new pu(Jie),this.zn=0}jn(){return++this.zn}Hn(t){const n=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Jie(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Ttt{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(t){wn("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){FT(n)?wn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await LT(n)}await this.Yn(3e5)})}}class Ctt{constructor(t,n){this.Zn=t,this.params=n}calculateTargetCount(t,n){return this.Zn.Xn(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return Pt.resolve(I9.oe);const r=new Stt(n);return this.Zn.forEachTarget(t,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(t,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.Zn.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Zn.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(wn("LruGarbageCollector","Garbage collection skipped; disabled"),Pt.resolve(Qie)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(wn("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qie):this.tr(t,n))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,n){let r,i,s,o,a,u,l;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(wn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(t,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(t,r,n))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(t,r))).next(f=>(l=Date.now(),gE()<=ni.DEBUG&&wn("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-c}ms`),Pt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function Att(e,t){return new Ctt(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ktt{constructor(){this.changes=new Mw(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,tc.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Pt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rtt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Itt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&wk(r.mutation,i,Yd.empty(),hu.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,ri()).next(()=>r))}getLocalViewOfDocuments(t,n,r=ri()){const i=E_();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=S3();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=E_();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,ri()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=m1();const o=_k(),a=function(){return _k()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Kb)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),wk(c.mutation,l,c.mutation.getFieldMask(),hu.now())):o.set(l.key,Yd.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new Rtt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=_k();let i=new To((o,a)=>o-a),s=ri();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Yd.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||ri()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=Qbe();c.forEach(d=>{if(!s.has(d)){const h=rxe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Pt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Vn.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Wbe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Pt.resolve(E_());let a=-1,u=s;return o.next(l=>Pt.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Pt.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,ri())).next(c=>({batchId:a,changes:Xbe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Vn(n)).next(r=>{let i=S3();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=S3();return this.indexManager.getCollectionParents(t,s).next(a=>Pt.forEach(a,u=>{const l=function(f,d){return new $T(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,tc.newInvalidDocument(c)))});let a=S3();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&wk(c.mutation,l,Yd.empty(),hu.now()),O9(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ptt{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,n){return Pt.resolve(this.Tr.get(n))}saveBundleMetadata(t,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Vm(i.createTime)}}(n)),Pt.resolve()}getNamedQuery(t,n){return Pt.resolve(this.Ir.get(n))}saveNamedQuery(t,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:_tt(i.bundledQuery),readTime:Vm(i.readTime)}}(n)),Pt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ntt{constructor(){this.overlays=new To(Vn.comparator),this.dr=new Map}getOverlay(t,n){return Pt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=E_();return Pt.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.Tt(t,n,s)}),Pt.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.dr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.dr.delete(r)),Pt.resolve()}getOverlaysForCollection(t,n,r){const i=E_(),s=n.length+1,o=new Vn(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Pt.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new To((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=E_(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=E_(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Pt.resolve(a)}Tt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Qet(n,r));let s=this.dr.get(n);s===void 0&&(s=ri(),this.dr.set(n,s)),this.dr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dtt{constructor(){this.sessionToken=Cl.EMPTY_BYTE_STRING}getSessionToken(t){return Pt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,Pt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZG{constructor(){this.Er=new pu(Iu.Ar),this.Rr=new pu(Iu.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(t,n){const r=new Iu(t,n);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.gr(new Iu(t,n))}pr(t,n){t.forEach(r=>this.removeReference(r,n))}yr(t){const n=new Vn(new Ks([])),r=new Iu(n,t),i=new Iu(n,t+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.Er.forEach(t=>this.gr(t))}gr(t){this.Er=this.Er.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){const n=new Vn(new Ks([])),r=new Iu(n,t),i=new Iu(n,t+1);let s=ri();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Iu(t,0),r=this.Er.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Iu{constructor(t,n){this.key=t,this.br=n}static Ar(t,n){return Vn.comparator(t.key,n.key)||fi(t.br,n.br)}static Vr(t,n){return fi(t.br,n.br)||Vn.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ott{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new pu(Iu.Ar)}checkEmpty(t){return Pt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Xet(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new Iu(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Pt.resolve(o)}lookupMutationBatch(t,n){return Pt.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return Pt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Pt.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(t){return Pt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Iu(n,0),i=new Iu(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),Pt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new pu(fi);return n.forEach(i=>{const s=new Iu(i,0),o=new Iu(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),Pt.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Vn.isDocumentKey(s)||(s=s.child(""));const o=new Iu(new Vn(s),0);let a=new pu(fi);return this.vr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.br)),!0)},o),Pt.resolve(this.Mr(a))}Mr(t){const n=[];return t.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Qi(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return Pt.forEach(n.mutations,i=>{const s=new Iu(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.vr=r})}Bn(t){}containsKey(t,n){const r=new Iu(n,0),i=this.vr.firstAfterOrEqual(r);return Pt.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Pt.resolve()}Or(t,n){return this.Fr(t)}Fr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Cr(t){const n=this.Fr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mtt{constructor(t){this.Nr=t,this.docs=function(){return new To(Vn.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Pt.resolve(r?r.document.mutableCopy():tc.newInvalidDocument(n))}getEntries(t,n){let r=m1();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():tc.newInvalidDocument(i))}),Pt.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=m1();const o=n.path,a=new Vn(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||cet(uet(c),r)<=0||(i.has(c.key)||O9(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Pt.resolve(s)}getAllFromCollectionGroup(t,n,r,i){ar()}Br(t,n){return Pt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Ltt(this)}getSize(t){return Pt.resolve(this.size)}}class Ltt extends ktt{constructor(t){super(),this.hr=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(t,i)):this.hr.removeEntry(r)}),Pt.waitFor(n)}getFromCache(t,n){return this.hr.getEntry(t,n)}getAllFromCache(t,n){return this.hr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ftt{constructor(t){this.persistence=t,this.Lr=new Mw(n=>qG(n),WG),this.lastRemoteSnapshotVersion=yr.min(),this.highestTargetId=0,this.kr=0,this.qr=new ZG,this.targetCount=0,this.Qr=xS.qn()}forEachTarget(t,n){return this.Lr.forEach((r,i)=>n(i)),Pt.resolve()}getLastRemoteSnapshotVersion(t){return Pt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Pt.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),Pt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),Pt.resolve()}Un(t){this.Lr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Qr=new xS(n),this.highestTargetId=n),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,n){return this.Un(n),this.targetCount+=1,Pt.resolve()}updateTargetData(t,n){return this.Un(n),Pt.resolve()}removeTargetData(t,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,Pt.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Lr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Lr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Pt.waitFor(s).next(()=>i)}getTargetCount(t){return Pt.resolve(this.targetCount)}getTargetData(t,n){const r=this.Lr.get(n)||null;return Pt.resolve(r)}addMatchingKeys(t,n,r){return this.qr.mr(n,r),Pt.resolve()}removeMatchingKeys(t,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Pt.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.qr.yr(n),Pt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.qr.Sr(n);return Pt.resolve(r)}containsKey(t,n){return Pt.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mxe{constructor(t,n){this.Kr={},this.overlays={},this.$r=new I9(0),this.Ur=!1,this.Ur=!0,this.Wr=new Dtt,this.referenceDelegate=t(this),this.Gr=new Ftt(this),this.indexManager=new wtt,this.remoteDocumentCache=function(i){return new Mtt(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new xtt(n),this.jr=new Ptt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Ntt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Kr[t.toKey()];return r||(r=new Ott(n,this.referenceDelegate),this.Kr[t.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,n,r){wn("MemoryPersistence","Starting transaction:",t);const i=new $tt(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(t,n){return Pt.or(Object.values(this.Kr).map(r=>()=>r.containsKey(t,n)))}}class $tt extends det{constructor(t){super(),this.currentSequenceNumber=t}}class eY{constructor(t){this.persistence=t,this.Zr=new ZG,this.Xr=null}static ei(t){return new eY(t)}get ti(){if(this.Xr)return this.Xr;throw ar()}addReference(t,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),Pt.resolve()}removeReference(t,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),Pt.resolve()}markPotentiallyOrphaned(t,n){return this.ti.add(n.toString()),Pt.resolve()}removeTarget(t,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Hr(){this.Xr=new Set}Jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pt.forEach(this.ti,r=>{const i=Vn.fromPath(r);return this.ni(t,i).next(s=>{s||n.removeEntry(i,yr.min())})}).next(()=>(this.Xr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ni(t,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(t){return 0}ni(t,n){return Pt.or([()=>Pt.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Yr(t,n)])}}class _8{constructor(t,n){this.persistence=t,this.ri=new Mw(r=>met(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Att(this,n)}static ei(t,n){return new _8(t,n)}Hr(){}Jr(t){return Pt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}Xn(t){const n=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(i=>r+i))}nr(t){let n=0;return this.er(t,r=>{n++}).next(()=>n)}er(t,n){return Pt.forEach(this.ri,(r,i)=>this.ir(t,r,i).next(s=>s?Pt.resolve():n(i)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Br(t,o=>this.ir(t,o,n).next(a=>{a||(r++,s.removeEntry(o,yr.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.ri.set(n,t.currentSequenceNumber),Pt.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),Pt.resolve()}removeReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),Pt.resolve()}updateLimboDocument(t,n){return this.ri.set(n,t.currentSequenceNumber),Pt.resolve()}zr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=RP(t.data.value)),n}ir(t,n,r){return Pt.or([()=>this.persistence.Yr(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.ri.get(n);return Pt.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tY{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(t,n){let r=ri(),i=ri();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new tY(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Btt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jtt{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return dQe()?8:het(hc())>0?6:4}()}initialize(t,n){this.Zi=t,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.Xi(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Btt;return this.ts(t,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(t,n,o,a.size)})}).next(()=>s.result)}ns(t,n,r,i){return r.documentReadCount<this.Ji?(gE()<=ni.DEBUG&&wn("QueryEngine","SDK will not create cache indexes for query:",yE(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),Pt.resolve()):(gE()<=ni.DEBUG&&wn("QueryEngine","Query:",yE(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(gE()<=ni.DEBUG&&wn("QueryEngine","The SDK decides to create cache indexes for query:",yE(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,zm(n))):Pt.resolve())}Xi(t,n){if(Uie(n))return Pt.resolve(null);let r=zm(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=WU(n,null,"F"),r=zm(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=ri(...s);return this.Zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.rs(n,a);return this.ss(n,l,o,u.readTime)?this.Xi(t,WU(n,null,"F")):this.os(t,l,n,u)}))})))}es(t,n,r,i){return Uie(n)||i.isEqual(yr.min())?Pt.resolve(null):this.Zi.getDocuments(t,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?Pt.resolve(null):(gE()<=ni.DEBUG&&wn("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yE(n)),this.os(t,o,n,aet(i,-1)).next(a=>a))})}rs(t,n){let r=new pu(Ybe(t));return n.forEach((i,s)=>{O9(t,s)&&(r=r.add(s))}),r}ss(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(t,n,r){return gE()<=ni.DEBUG&&wn("QueryEngine","Using full collection scan to execute query:",yE(n)),this.Zi.getDocumentsMatchingQuery(t,n,cb.min(),r)}os(t,n,r,i){return this.Zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Utt{constructor(t,n,r,i){this.persistence=t,this._s=n,this.serializer=i,this.us=new To(fi),this.cs=new Mw(s=>qG(s),WG),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(r)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Itt(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.us))}}function ztt(e,t,n,r){return new Utt(e,t,n,r)}async function gxe(e,t){const n=vr(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ri();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ts:l,removedBatchIds:o,addedBatchIds:a}))})})}function Vtt(e,t){const n=vr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Pt.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);Qi(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ri();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function yxe(e){const t=vr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Gr.getLastRemoteSnapshotVersion(n))}function Htt(e,t){const n=vr(e),r=t.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Gr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Cl.EMPTY_BYTE_STRING,yr.min()).withLastLimboFreeSnapshotVersion(yr.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,b){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(d,h,c)&&a.push(n.Gr.updateTargetData(s,h))});let u=m1(),l=ri();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(qtt(s,o,t.documentUpdates).next(c=>{u=c.Is,l=c.ds})),!r.isEqual(yr.min())){const c=n.Gr.getLastRemoteSnapshotVersion(s).next(f=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Pt.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.us=i,s))}function qtt(e,t,n){let r=ri(),i=ri();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=m1();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(yr.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):wn("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Is:o,ds:i}})}function Wtt(e,t){const n=vr(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Gtt(e,t){const n=vr(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,t).next(s=>s?(i=s,Pt.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new $v(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(t,r.targetId)),r})}async function QU(e,t,n){const r=vr(e),i=r.us.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!FT(o))throw o;wn("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.us=r.us.remove(t),r.cs.delete(i.target)}function Zie(e,t,n){const r=vr(e);let i=yr.min(),s=ri();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=vr(u),d=f.cs.get(c);return d!==void 0?Pt.resolve(f.us.get(d)):f.Gr.getTargetData(l,c)}(r,o,zm(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r._s.getDocumentsMatchingQuery(o,t,n?i:yr.min(),n?s:ri())).next(a=>(Ytt(r,Oet(t),a),{documents:a,Es:s})))}function Ytt(e,t,n){let r=e.ls.get(t)||yr.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ls.set(t,r)}class ese{constructor(){this.activeTargetIds=jet()}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Ktt{constructor(){this._o=new ese,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,n,r){this.ao[t]=n}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new ese,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xtt{uo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tse{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){wn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.To)t(0)}Po(){wn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.To)t(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S6=null;function l$(){return S6===null?S6=function(){return 268435456+Math.round(2147483648*Math.random())}():S6++,"0x"+S6.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qtt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jtt{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql="WebChannelConnection";class Ztt extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=l$(),u=this.No(n,r.toUriEncodedString());wn("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(l,s,o),this.Lo(n,u,l,i).then(c=>(wn("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw t4("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+MT}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=Qtt[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Lo(t,n,r,i){const s=l$();return new Promise((o,a)=>{const u=new Pbe;u.setWithCredentials(!0),u.listenOnce(Nbe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case kP.NO_ERROR:const c=u.getResponseJson();wn(ql,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case kP.TIMEOUT:wn(ql,`RPC '${t}' ${s} timed out`),a(new mn(Tt.DEADLINE_EXCEEDED,"Request time out"));break;case kP.HTTP_ERROR:const f=u.getStatus();if(wn(ql,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const b=g.toLowerCase().replace(/_/g,"-");return Object.values(Tt).indexOf(b)>=0?b:Tt.UNKNOWN}(h.status);a(new mn(p,h.message))}else a(new mn(Tt.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new mn(Tt.UNAVAILABLE,"Connection failed."));break;default:ar()}}finally{wn(ql,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);wn(ql,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}qo(t,n,r){const i=l$(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Mbe(),a=Obe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");wn(ql,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new Jtt({Eo:g=>{h?wn(ql,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(wn(ql,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),wn(ql,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},Ao:()=>f.close()}),m=(g,b,y)=>{g.listen(b,x=>{try{y(x)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,E3.EventType.OPEN,()=>{h||(wn(ql,`RPC '${t}' stream ${i} transport opened.`),p.So())}),m(f,E3.EventType.CLOSE,()=>{h||(h=!0,wn(ql,`RPC '${t}' stream ${i} transport closed`),p.Do())}),m(f,E3.EventType.ERROR,g=>{h||(h=!0,t4(ql,`RPC '${t}' stream ${i} transport errored:`,g),p.Do(new mn(Tt.UNAVAILABLE,"The operation could not be completed")))}),m(f,E3.EventType.MESSAGE,g=>{var b;if(!h){const y=g.data[0];Qi(!!y);const x=y,w=(x==null?void 0:x.error)||((b=x[0])===null||b===void 0?void 0:b.error);if(w){wn(ql,`RPC '${t}' stream ${i} received error:`,w);const S=w.status;let C=function(O){const M=Ua[O];if(M!==void 0)return sxe(M)}(S),R=w.message;C===void 0&&(C=Tt.INTERNAL,R="Unknown error status: "+S+" with message "+w.message),h=!0,p.Do(new mn(C,R)),f.close()}else wn(ql,`RPC '${t}' stream ${i} received:`,y),p.vo(y)}}),m(a,Dbe.STAT_EVENT,g=>{g.stat===jU.PROXY?wn(ql,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===jU.NOPROXY&&wn(ql,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.bo()},0),p}}function c$(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $9(e){return new ott(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vxe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.li=t,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&wn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bxe{constructor(t,n,r,i,s,o,a,u){this.li=t,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new vxe(t,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(t){this.l_(),this.stream.send(t)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(t,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,t!==4?this.r_.reset():n&&n.code===Tt.RESOURCE_EXHAUSTED?(p1(n.toString()),p1("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===Tt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.po(n)}P_(){}auth(){this.state=1;const t=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{t(()=>{const i=new mn(Tt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(t,n){const r=this.T_(this.Xo);this.stream=this.E_(t,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(t){return wn("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return n=>{this.li.enqueueAndForget(()=>this.Xo===t?n():(wn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ent extends bxe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}E_(t,n){return this.connection.qo("Listen",t,n)}A_(t){return this.onNext(t)}onNext(t){this.r_.reset();const n=ltt(this.serializer,t),r=function(s){if(!("targetChange"in s))return yr.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?yr.min():o.readTime?Vm(o.readTime):yr.min()}(t);return this.listener.R_(n,r)}V_(t){const n={};n.database=XU(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=HU(u)?{documents:dtt(s,u)}:{query:htt(s,u).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=uxe(s,o.resumeToken);const l=GU(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(yr.min())>0){a.readTime=x8(s,o.snapshotVersion.toTimestamp());const l=GU(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=mtt(this.serializer,t);r&&(n.labels=r),this.c_(n)}m_(t){const n={};n.database=XU(this.serializer),n.removeTarget=t,this.c_(n)}}class tnt extends bxe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(t,n){return this.connection.qo("Write",t,n)}A_(t){return Qi(!!t.streamToken),this.lastStreamToken=t.streamToken,Qi(!t.writeResults||t.writeResults.length===0),this.listener.p_()}onNext(t){Qi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.r_.reset();const n=ftt(t.writeResults,t.commitTime),r=Vm(t.commitTime);return this.listener.y_(r,n)}w_(){const t={};t.database=XU(this.serializer),this.c_(t)}g_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>ctt(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nnt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new mn(Tt.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(t,YU(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new mn(Tt.UNKNOWN,s.toString())})}ko(t,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(t,YU(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new mn(Tt.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class rnt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(t){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,t==="Online"&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(p1(n),this.C_=!1):wn("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class int{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{Lw(this)&&(wn("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=vr(u);l.k_.add(4),await TR(l),l.K_.set("Unknown"),l.k_.delete(4),await SR(l)}(this))})}),this.K_=new rnt(r,i)}}async function SR(e){if(Lw(e))for(const t of e.q_)await t(!0)}async function TR(e){for(const t of e.q_)await t(!1)}function xxe(e,t){const n=vr(e);n.L_.has(t.targetId)||(n.L_.set(t.targetId,t),sY(n)?iY(n):BT(n).s_()&&rY(n,t))}function nY(e,t){const n=vr(e),r=BT(n);n.L_.delete(t),r.s_()&&_xe(n,t),n.L_.size===0&&(r.s_()?r.a_():Lw(n)&&n.K_.set("Unknown"))}function rY(e,t){if(e.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(yr.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}BT(e).V_(t)}function _xe(e,t){e.U_.xe(t),BT(e).m_(t)}function iY(e){e.U_=new ntt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>e.L_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),BT(e).start(),e.K_.F_()}function sY(e){return Lw(e)&&!BT(e).i_()&&e.L_.size>0}function Lw(e){return vr(e).k_.size===0}function wxe(e){e.U_=void 0}async function snt(e){e.K_.set("Online")}async function ont(e){e.L_.forEach((t,n)=>{rY(e,t)})}async function ant(e,t){wxe(e),sY(e)?(e.K_.O_(t),iY(e)):e.K_.set("Unknown")}async function unt(e,t,n){if(e.K_.set("Online"),t instanceof axe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.L_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.L_.delete(a),i.U_.removeTarget(a))}(e,t)}catch(r){wn("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await w8(e,r)}else if(t instanceof NP?e.U_.$e(t):t instanceof oxe?e.U_.Je(t):e.U_.Ge(t),!n.isEqual(yr.min()))try{const r=await yxe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.L_.get(l);c&&s.L_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.L_.get(u);if(!c)return;s.L_.set(u,c.withResumeToken(Cl.EMPTY_BYTE_STRING,c.snapshotVersion)),_xe(s,u);const f=new $v(c.target,u,l,c.sequenceNumber);rY(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){wn("RemoteStore","Failed to raise snapshot:",r),await w8(e,r)}}async function w8(e,t,n){if(!FT(t))throw t;e.k_.add(1),await TR(e),e.K_.set("Offline"),n||(n=()=>yxe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{wn("RemoteStore","Retrying IndexedDB access"),await n(),e.k_.delete(1),await SR(e)})}function Exe(e,t){return t().catch(n=>w8(e,n,t))}async function B9(e){const t=vr(e),n=pb(t);let r=t.B_.length>0?t.B_[t.B_.length-1].batchId:-1;for(;lnt(t);)try{const i=await Wtt(t.localStore,r);if(i===null){t.B_.length===0&&n.a_();break}r=i.batchId,cnt(t,i)}catch(i){await w8(t,i)}Sxe(t)&&Txe(t)}function lnt(e){return Lw(e)&&e.B_.length<10}function cnt(e,t){e.B_.push(t);const n=pb(e);n.s_()&&n.f_&&n.g_(t.mutations)}function Sxe(e){return Lw(e)&&!pb(e).i_()&&e.B_.length>0}function Txe(e){pb(e).start()}async function fnt(e){pb(e).w_()}async function dnt(e){const t=pb(e);for(const n of e.B_)t.g_(n.mutations)}async function hnt(e,t,n){const r=e.B_.shift(),i=XG.from(r,t,n);await Exe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await B9(e)}async function pnt(e,t){t&&pb(e).f_&&await async function(r,i){if(function(o){return Zet(o)&&o!==Tt.ABORTED}(i.code)){const s=r.B_.shift();pb(r).__(),await Exe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await B9(r)}}(e,t),Sxe(e)&&Txe(e)}async function nse(e,t){const n=vr(e);n.asyncQueue.verifyOperationInProgress(),wn("RemoteStore","RemoteStore received new credentials");const r=Lw(n);n.k_.add(3),await TR(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.k_.delete(3),await SR(n)}async function mnt(e,t){const n=vr(e);t?(n.k_.delete(2),await SR(n)):t||(n.k_.add(2),await TR(n),n.K_.set("Unknown"))}function BT(e){return e.W_||(e.W_=function(n,r,i){const s=vr(n);return s.b_(),new ent(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Ro:snt.bind(null,e),mo:ont.bind(null,e),po:ant.bind(null,e),R_:unt.bind(null,e)}),e.q_.push(async t=>{t?(e.W_.__(),sY(e)?iY(e):e.K_.set("Unknown")):(await e.W_.stop(),wxe(e))})),e.W_}function pb(e){return e.G_||(e.G_=function(n,r,i){const s=vr(n);return s.b_(),new tnt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Ro:()=>Promise.resolve(),mo:fnt.bind(null,e),po:pnt.bind(null,e),p_:dnt.bind(null,e),y_:hnt.bind(null,e)}),e.q_.push(async t=>{t?(e.G_.__(),await B9(e)):(await e.G_.stop(),e.B_.length>0&&(wn("RemoteStore",`Stopping write stream with ${e.B_.length} pending writes`),e.B_=[]))})),e.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oY{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Xy,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new oY(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new mn(Tt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function aY(e,t){if(p1("AsyncQueue",`${t}: ${e}`),FT(e))return new mn(Tt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{static emptySet(t){return new zE(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Vn.comparator(n.key,r.key):(n,r)=>Vn.comparator(n.key,r.key),this.keyedMap=S3(),this.sortedSet=new To(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof zE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new zE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rse{constructor(){this.z_=new To(Vn.comparator)}track(t){const n=t.doc.key,r=this.z_.get(n);r?t.type!==0&&r.type===3?this.z_=this.z_.insert(n,t):t.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.z_=this.z_.remove(n):t.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):ar():this.z_=this.z_.insert(n,t)}j_(){const t=[];return this.z_.inorderTraversal((n,r)=>{t.push(r)}),t}}class _S{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new _S(t,n,zE.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&D9(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gnt{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(t=>t.Z_())}}class ynt{constructor(){this.queries=ise(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=vr(n),s=i.queries;i.queries=ise(),s.forEach((o,a)=>{for(const u of a.J_)u.onError(r)})})(this,new mn(Tt.ABORTED,"Firestore shutting down"))}}function ise(){return new Mw(e=>Gbe(e),D9)}async function Cxe(e,t){const n=vr(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Y_()&&t.Z_()&&(r=2):(s=new gnt,r=t.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=aY(o,`Initialization of query '${yE(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.J_.push(t),t.ea(n.onlineState),s.H_&&t.ta(s.H_)&&uY(n)}async function Axe(e,t){const n=vr(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(t);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=t.Z_()?0:1:!s.Y_()&&t.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vnt(e,t){const n=vr(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&uY(n)}function bnt(e,t,n){const r=vr(e),i=r.queries.get(t);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(t)}function uY(e){e.X_.forEach(t=>{t.next()})}var JU,sse;(sse=JU||(JU={})).na="default",sse.Cache="cache";class kxe{constructor(t,n,r){this.query=t,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new _S(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ia?this.oa(t)&&(this.ra.next(t),n=!0):this._a(t,this.onlineState)&&(this.aa(t),n=!0),this.sa=t,n}onError(t){this.ra.error(t)}ea(t){this.onlineState=t;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,t)&&(this.aa(this.sa),n=!0),n}_a(t,n){if(!t.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}oa(t){if(t.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(t){t=_S.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ia=!0,this.ra.next(t)}Z_(){return this.options.source!==JU.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rxe{constructor(t){this.key=t}}class Ixe{constructor(t){this.key=t}}class xnt{constructor(t,n){this.query=t,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=ri(),this.mutatedKeys=ri(),this.Va=Ybe(t),this.ma=new zE(this.Va)}get fa(){return this.Ea}ga(t,n){const r=n?n.pa:new rse,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=O9(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.ya(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Va(h,u)>0||l&&this.Va(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.ma;this.ma=t.ma,this.mutatedKeys=t.mutatedKeys;const o=t.pa.j_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ar()}};return m(h)-m(p)}(c.type,f.type)||this.Va(c.doc,f.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],u=this.Ra.size===0&&this.current&&!i?1:0,l=u!==this.Aa;return this.Aa=u,o.length!==0||l?{snapshot:new _S(this.query,t.ma,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new rse,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(t){return!this.Ea.has(t)&&!!this.ma.has(t)&&!this.ma.get(t).hasLocalMutations}wa(t){t&&(t.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=t.current)}Sa(){if(!this.current)return[];const t=this.Ra;this.Ra=ri(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return t.forEach(r=>{this.Ra.has(r)||n.push(new Ixe(r))}),this.Ra.forEach(r=>{t.has(r)||n.push(new Rxe(r))}),n}va(t){this.Ea=t.Es,this.Ra=ri();const n=this.ga(t.documents);return this.applyChanges(n,!0)}Ca(){return _S.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class _nt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class wnt{constructor(t){this.key=t,this.Fa=!1}}class Ent{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new Mw(a=>Gbe(a),D9),this.Oa=new Map,this.Na=new Set,this.Ba=new To(Vn.comparator),this.La=new Map,this.ka=new ZG,this.qa={},this.Qa=new Map,this.Ka=xS.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function Snt(e,t,n=!0){const r=Lxe(e);let i;const s=r.xa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await Pxe(r,t,n,!0),i}async function Tnt(e,t){const n=Lxe(e);await Pxe(n,t,!0,!1)}async function Pxe(e,t,n,r){const i=await Gtt(e.localStore,zm(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Cnt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&xxe(e.remoteStore,i),a}async function Cnt(e,t,n,r,i){e.Ua=(f,d,h)=>async function(m,g,b,y){let x=g.view.ga(b);x.ss&&(x=await Zie(m.localStore,g.query,!1).then(({documents:R})=>g.view.ga(R,x)));const w=y&&y.targetChanges.get(g.targetId),S=y&&y.targetMismatches.get(g.targetId)!=null,C=g.view.applyChanges(x,m.isPrimaryClient,w,S);return ase(m,g.targetId,C.ba),C.snapshot}(e,f,d,h);const s=await Zie(e.localStore,t,!0),o=new xnt(t,s.Es),a=o.ga(s.documents),u=ER.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);ase(e,n,l.ba);const c=new _nt(t,n,o);return e.xa.set(t,c),e.Oa.has(n)?e.Oa.get(n).push(t):e.Oa.set(n,[t]),l.snapshot}async function Ant(e,t,n){const r=vr(e),i=r.xa.get(t),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!D9(o,t))),void r.xa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await QU(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&nY(r.remoteStore,i.targetId),ZU(r,i.targetId)}).catch(LT)):(ZU(r,i.targetId),await QU(r.localStore,i.targetId,!0))}async function knt(e,t){const n=vr(e),r=n.xa.get(t),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),nY(n.remoteStore,r.targetId))}async function Rnt(e,t,n){const r=Lnt(e);try{const i=await function(o,a){const u=vr(o),l=hu.now(),c=a.reduce((h,p)=>h.add(p.key),ri());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=m1(),m=ri();return u.hs.getEntries(h,c).next(g=>{p=g,p.forEach((b,y)=>{y.isValidDocument()||(m=m.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const b=[];for(const y of a){const x=Yet(y,f.get(y.key).overlayedDocument);x!=null&&b.push(new Kb(y.key,x,Bbe(x.value.mapValue),th.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,b,a)}).next(g=>{d=g;const b=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,b)})}).then(()=>({batchId:d.batchId,changes:Xbe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.qa[o.currentUser.toKey()];l||(l=new To(fi)),l=l.insert(a,u),o.qa[o.currentUser.toKey()]=l}(r,i.batchId,n),await CR(r,i.changes),await B9(r.remoteStore)}catch(i){const s=aY(i,"Failed to persist write");n.reject(s)}}async function Nxe(e,t){const n=vr(e);try{const r=await Htt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.La.get(s);o&&(Qi(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?Qi(o.Fa):i.removedDocuments.size>0&&(Qi(o.Fa),o.Fa=!1))}),await CR(n,r,t)}catch(r){await LT(r)}}function ose(e,t,n){const r=vr(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=vr(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.J_)d.ea(a)&&(l=!0)}),l&&uY(u)}(r.eventManager,t),i.length&&r.Ma.R_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Int(e,t,n){const r=vr(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.La.get(t),s=i&&i.key;if(s){let o=new To(Vn.comparator);o=o.insert(s,tc.newNoDocument(s,yr.min()));const a=ri().add(s),u=new F9(yr.min(),new Map,new To(fi),o,a);await Nxe(r,u),r.Ba=r.Ba.remove(s),r.La.delete(t),lY(r)}else await QU(r.localStore,t,!1).then(()=>ZU(r,t,n)).catch(LT)}async function Pnt(e,t){const n=vr(e),r=t.batch.batchId;try{const i=await Vtt(n.localStore,t);Oxe(n,r,null),Dxe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await CR(n,i)}catch(i){await LT(i)}}async function Nnt(e,t,n){const r=vr(e);try{const i=await function(o,a){const u=vr(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Qi(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);Oxe(r,t,n),Dxe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await CR(r,i)}catch(i){await LT(i)}}function Dxe(e,t){(e.Qa.get(t)||[]).forEach(n=>{n.resolve()}),e.Qa.delete(t)}function Oxe(e,t,n){const r=vr(e);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.qa[r.currentUser.toKey()]=i}}function ZU(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Oa.get(t))e.xa.delete(r),n&&e.Ma.Wa(r,n);e.Oa.delete(t),e.isPrimaryClient&&e.ka.yr(t).forEach(r=>{e.ka.containsKey(r)||Mxe(e,r)})}function Mxe(e,t){e.Na.delete(t.path.canonicalString());const n=e.Ba.get(t);n!==null&&(nY(e.remoteStore,n),e.Ba=e.Ba.remove(t),e.La.delete(n),lY(e))}function ase(e,t,n){for(const r of n)r instanceof Rxe?(e.ka.addReference(r.key,t),Dnt(e,r)):r instanceof Ixe?(wn("SyncEngine","Document no longer in limbo: "+r.key),e.ka.removeReference(r.key,t),e.ka.containsKey(r.key)||Mxe(e,r.key)):ar()}function Dnt(e,t){const n=t.key,r=n.path.canonicalString();e.Ba.get(n)||e.Na.has(r)||(wn("SyncEngine","New document in limbo: "+n),e.Na.add(r),lY(e))}function lY(e){for(;e.Na.size>0&&e.Ba.size<e.maxConcurrentLimboResolutions;){const t=e.Na.values().next().value;e.Na.delete(t);const n=new Vn(Ks.fromString(t)),r=e.Ka.next();e.La.set(r,new wnt(n)),e.Ba=e.Ba.insert(n,r),xxe(e.remoteStore,new $v(zm(GG(n.path)),r,"TargetPurposeLimboResolution",I9.oe))}}async function CR(e,t,n){const r=vr(e),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,u)=>{o.push(r.Ua(u,t,n).then(l=>{var c;if((l||n)&&r.isPrimaryClient){const f=l?!l.fromCache:(c=n==null?void 0:n.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);const f=tY.zi(u.targetId,l);s.push(f)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(u,l){const c=vr(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Pt.forEach(l,d=>Pt.forEach(d.Wi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Pt.forEach(d.Gi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!FT(f))throw f;wn("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.us.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.us=c.us.insert(d,m)}}}(r.localStore,s))}async function Ont(e,t){const n=vr(e);if(!n.currentUser.isEqual(t)){wn("SyncEngine","User change. New user:",t.toKey());const r=await gxe(n.localStore,t);n.currentUser=t,function(s,o){s.Qa.forEach(a=>{a.forEach(u=>{u.reject(new mn(Tt.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await CR(n,r.Ts)}}function Mnt(e,t){const n=vr(e),r=n.La.get(t);if(r&&r.Fa)return ri().add(r.key);{let i=ri();const s=n.Oa.get(t);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function Lxe(e){const t=vr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Nxe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mnt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Int.bind(null,t),t.Ma.R_=vnt.bind(null,t.eventManager),t.Ma.Wa=bnt.bind(null,t.eventManager),t}function Lnt(e){const t=vr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Pnt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Nnt.bind(null,t),t}class E8{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=$9(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),await this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)}Ja(t,n){return null}Ya(t,n){return null}Ha(t){return ztt(this.persistence,new jtt,t.initialUser,this.serializer)}ja(t){return new mxe(eY.ei,this.serializer)}za(t){return new Ktt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}E8.provider={build:()=>new E8};class Fnt extends E8{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,n){Qi(this.persistence.referenceDelegate instanceof _8);const r=this.persistence.referenceDelegate.garbageCollector;return new Ttt(r,t.asyncQueue,n)}ja(t){const n=this.cacheSizeBytes!==void 0?Wf.withCacheSize(this.cacheSizeBytes):Wf.DEFAULT;return new mxe(r=>_8.ei(r,n),this.serializer)}}class ez{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ose(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ont.bind(null,this.syncEngine),await mnt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new ynt}()}createDatastore(t){const n=$9(t.databaseInfo.databaseId),r=function(s){return new Ztt(s)}(t.databaseInfo);return function(s,o,a,u){return new nnt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new int(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>ose(this.syncEngine,n,0),function(){return tse.p()?new tse:new Xtt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new Ent(i,s,o,a,u,l);return c&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const s=vr(i);wn("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await TR(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ez.provider={build:()=>new ez};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fxe{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Xa(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Xa(this.observer.error,t):p1("Uncaught Error in snapshot listener:",t.toString()))}eu(){this.muted=!0}Xa(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $nt{constructor(t,n,r,i,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=qf.UNAUTHENTICATED,this.clientId=Lbe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{wn("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(wn("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Xy;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=aY(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function f$(e,t){e.asyncQueue.verifyOperationInProgress(),wn("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await gxe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function use(e,t){e.asyncQueue.verifyOperationInProgress();const n=await $xe(e);wn("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>nse(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>nse(t.remoteStore,i)),e._onlineComponents=t}async function $xe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){wn("FirestoreClient","Using user provided OfflineComponentProvider");try{await f$(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===Tt.FAILED_PRECONDITION||i.code===Tt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;t4("Error using user provided cache. Falling back to memory cache: "+n),await f$(e,new E8)}}else wn("FirestoreClient","Using default OfflineComponentProvider"),await f$(e,new Fnt(void 0));return e._offlineComponents}async function cY(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(wn("FirestoreClient","Using user provided OnlineComponentProvider"),await use(e,e._uninitializedComponentsProvider._online)):(wn("FirestoreClient","Using default OnlineComponentProvider"),await use(e,new ez))),e._onlineComponents}function Bnt(e){return $xe(e).then(t=>t.persistence)}function jnt(e){return cY(e).then(t=>t.remoteStore)}function Unt(e){return cY(e).then(t=>t.syncEngine)}async function Bxe(e){const t=await cY(e),n=t.eventManager;return n.onListen=Snt.bind(null,t.syncEngine),n.onUnlisten=Ant.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Tnt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=knt.bind(null,t.syncEngine),n}function znt(e){return e.asyncQueue.enqueue(async()=>{const t=await Bnt(e),n=await jnt(e);return t.setNetworkEnabled(!0),function(i){const s=vr(i);return s.k_.delete(0),SR(s)}(n)})}function Vnt(e,t,n={}){const r=new Xy;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new Fxe({next:d=>{c.eu(),o.enqueueAndForget(()=>Axe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new mn(Tt.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new mn(Tt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new kxe(GG(a.path),c,{includeMetadataChanges:!0,ua:!0});return Cxe(s,f)}(await Bxe(e),e.asyncQueue,t,n,r)),r.promise}function Hnt(e,t,n={}){const r=new Xy;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new Fxe({next:d=>{c.eu(),o.enqueueAndForget(()=>Axe(s,f)),d.fromCache&&u.source==="server"?l.reject(new mn(Tt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new kxe(a,c,{includeMetadataChanges:!0,ua:!0});return Cxe(s,f)}(await Bxe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jxe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lse=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uxe(e,t,n){if(!n)throw new mn(Tt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function qnt(e,t,n,r){if(t===!0&&r===!0)throw new mn(Tt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function cse(e){if(!Vn.isDocumentKey(e))throw new mn(Tt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function fse(e){if(Vn.isDocumentKey(e))throw new mn(Tt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function j9(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":ar()}function ag(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new mn(Tt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=j9(e);throw new mn(Tt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dse{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new mn(Tt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new mn(Tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}qnt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jxe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new mn(Tt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new mn(Tt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new mn(Tt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class fY{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dse({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new mn(Tt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new mn(Tt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dse(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ZZe;switch(r.type){case"firstParty":return new net(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new mn(Tt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=lse.get(n);r&&(wn("ComponentProvider","Removing Datastore"),lse.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Fw(this.firestore,t,this._query)}}class of{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jv(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new of(this.firestore,t,this._key)}}class Jv extends Fw{constructor(t,n,r){super(t,n,GG(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new of(this.firestore,null,new Vn(t))}withConverter(t){return new Jv(this.firestore,t,this._path)}}function jf(e,t,...n){if(e=$s(e),Uxe("collection","path",t),e instanceof fY){const r=Ks.fromString(t,...n);return fse(r),new Jv(e,null,r)}{if(!(e instanceof of||e instanceof Jv))throw new mn(Tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ks.fromString(t,...n));return fse(r),new Jv(e.firestore,null,r)}}function Gs(e,t,...n){if(e=$s(e),arguments.length===1&&(t=Lbe.newId()),Uxe("doc","path",t),e instanceof fY){const r=Ks.fromString(t,...n);return cse(r),new of(e,null,new Vn(r))}{if(!(e instanceof of||e instanceof Jv))throw new mn(Tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ks.fromString(t,...n));return cse(r),new of(e.firestore,e instanceof Jv?e.converter:null,new Vn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hse{constructor(t=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new vxe(this,"async_queue_retry"),this.fu=()=>{const r=c$();r&&wn("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=t;const n=c$();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.du){this.du=!0,this.Vu=t||!1;const n=c$();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.du)return new Promise(()=>{});const n=new Xy;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!FT(t))throw t;wn("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(t){const n=this.gu.then(()=>(this.Ru=!0,t().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw p1("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(t,n,r){this.pu(),this.mu.indexOf(t)>-1&&(n=0);const i=oY.createAndSchedule(this,t,n,r,s=>this.Su(s));return this.Eu.push(i),i}pu(){this.Au&&ar()}verifyOperationInProgress(){}async bu(){let t;do t=this.gu,await t;while(t!==this.gu)}Du(t){for(const n of this.Eu)if(n.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{this.Eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){const n=this.Eu.indexOf(t);this.Eu.splice(n,1)}}class $w extends fY{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new hse,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new hse(t),this._firestoreClient=void 0,await t}}}function Wnt(e,t,n){n||(n="(default)");const r=OT(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Zk(s,t))return i;throw new mn(Tt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new mn(Tt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new mn(Tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function AR(e){if(e._terminated)throw new mn(Tt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Gnt(e),e._firestoreClient}function Gnt(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new vet(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,jxe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new $nt(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(e._componentsProvider))}function Ynt(e){return znt(AR(e=ag(e,$w)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(t){this._byteString=t}static fromBase64String(t){try{return new wS(Cl.fromBase64String(t))}catch(n){throw new mn(Tt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new wS(Cl.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new mn(Tt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gl(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dY=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new mn(Tt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new mn(Tt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return fi(this._lat,t._lat)||fi(this._long,t._long)}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hY{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Knt=/^__.*__$/;class Xnt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Kb(t,this.data,this.fieldMask,n,this.fieldTransforms):new wR(t,this.data,n,this.fieldTransforms)}}class zxe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Kb(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Vxe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ar()}}class pY{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new pY(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Bu(t),i}Lu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return S8(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Bu(this.path.get(t))}Bu(t){if(t.length===0)throw this.qu("Document fields must not be empty");if(Vxe(this.Mu)&&Knt.test(t))throw this.qu('Document fields cannot begin and end with "__"')}}class Qnt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||$9(t)}$u(t,n,r,i=!1){return new pY({Mu:t,methodName:n,Ku:r,path:gl.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function z9(e){const t=e._freezeSettings(),n=$9(e._databaseId);return new Qnt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Hxe(e,t,n,r,i,s={}){const o=e.$u(s.merge||s.mergeFields?2:0,t,n,i);gY("Data must be an object, but it was:",o,r);const a=Gxe(r,o);let u,l;if(s.merge)u=new Yd(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=tz(t,f,n);if(!o.contains(d))throw new mn(Tt.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);Kxe(c,d)||c.push(d)}u=new Yd(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new Xnt(new Xf(a),u,l)}class V9 extends U9{_toFieldTransform(t){if(t.Mu!==2)throw t.Mu===1?t.qu(`${this._methodName}() can only appear at the top level of your update data`):t.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof V9}}class mY extends U9{_toFieldTransform(t){return new Het(t.path,new o4)}isEqual(t){return t instanceof mY}}function qxe(e,t,n,r){const i=e.$u(1,t,n);gY("Data must be an object, but it was:",i,r);const s=[],o=Xf.empty();Yb(r,(u,l)=>{const c=yY(t,u,n);l=$s(l);const f=i.Lu(c);if(l instanceof V9)s.push(c);else{const d=RR(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Yd(s);return new zxe(o,a,i.fieldTransforms)}function Wxe(e,t,n,r,i,s){const o=e.$u(1,t,n),a=[tz(t,r,n)],u=[i];if(s.length%2!=0)throw new mn(Tt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(tz(t,s[d])),u.push(s[d+1]);const l=[],c=Xf.empty();for(let d=a.length-1;d>=0;--d)if(!Kxe(l,a[d])){const h=a[d];let p=u[d];p=$s(p);const m=o.Lu(h);if(p instanceof V9)l.push(h);else{const g=RR(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Yd(l);return new zxe(c,f,o.fieldTransforms)}function Jnt(e,t,n,r=!1){return RR(n,e.$u(r?4:3,t))}function RR(e,t){if(Yxe(e=$s(e)))return gY("Unsupported field value:",t,e),Gxe(e,t);if(e instanceof U9)return function(r,i){if(!Vxe(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Nu&&t.Mu!==4)throw t.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=RR(a,i.ku(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=$s(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Uet(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=hu.fromDate(r);return{timestampValue:x8(i.serializer,s)}}if(r instanceof hu){const s=new hu(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:x8(i.serializer,s)}}if(r instanceof dY)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wS)return{bytesValue:uxe(i.serializer,r._byteString)};if(r instanceof of){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:JG(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof hY)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.qu("VectorValues must only contain numeric values.");return YG(a.serializer,u)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${j9(r)}`)}(e,t)}function Gxe(e,t){const n={};return Fbe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yb(e,(r,i)=>{const s=RR(i,t.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Yxe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof hu||e instanceof dY||e instanceof wS||e instanceof of||e instanceof U9||e instanceof hY)}function gY(e,t,n){if(!Yxe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=j9(n);throw r==="an object"?t.qu(e+" a custom object"):t.qu(e+" "+r)}}function tz(e,t,n){if((t=$s(t))instanceof kR)return t._internalPath;if(typeof t=="string")return yY(e,t);throw S8("Field path arguments must be of type string or ",e,!1,void 0,n)}const Znt=new RegExp("[~\\*/\\[\\]]");function yY(e,t,n){if(t.search(Znt)>=0)throw S8(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new kR(...t.split("."))._internalPath}catch{throw S8(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function S8(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new mn(Tt.INVALID_ARGUMENT,a+e+u)}function Kxe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xxe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new of(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new ert(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(H9("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ert extends Xxe{data(){return super.data()}}function H9(e,t){return typeof t=="string"?yY(e,t):t instanceof kR?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function trt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new mn(Tt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vY{}class Qxe extends vY{}function d$(e,t,...n){let r=[];t instanceof vY&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof bY).length,a=s.filter(u=>u instanceof q9).length;if(o>1||o>0&&a>0)throw new mn(Tt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class q9 extends Qxe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new q9(t,n,r)}_apply(t){const n=this._parse(t);return Jxe(t._query,n),new Fw(t.firestore,t.converter,qU(t._query,n))}_parse(t){const n=z9(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new mn(Tt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){yse(f,c);const h=[];for(const p of f)h.push(gse(u,s,p));d={arrayValue:{values:h}}}else d=gse(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||yse(f,c),d=Jnt(a,o,f,c==="in"||c==="not-in");return Va.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function pse(e,t,n){const r=t,i=H9("where",e);return q9._create(i,r,n)}class bY extends vY{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new bY(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:A0.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)Jxe(o,u),o=qU(o,u)}(t._query,n),new Fw(t.firestore,t.converter,qU(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xY extends Qxe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new xY(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new mn(Tt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new mn(Tt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new s4(s,o)}(t._query,this._field,this._direction);return new Fw(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new $T(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function mse(e,t="asc"){const n=t,r=H9("orderBy",e);return xY._create(r,n)}function gse(e,t,n){if(typeof(n=$s(n))=="string"){if(n==="")throw new mn(Tt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wbe(t)&&n.indexOf("/")!==-1)throw new mn(Tt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ks.fromString(n));if(!Vn.isDocumentKey(r))throw new mn(Tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Mie(e,new Vn(r))}if(n instanceof of)return Mie(e,n._key);throw new mn(Tt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${j9(n)}.`)}function yse(e,t){if(!Array.isArray(e)||e.length===0)throw new mn(Tt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Jxe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new mn(Tt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new mn(Tt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class nrt{convertValue(t,n="none"){switch(hb(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ma(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(db(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw ar()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Yb(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(t){var n,r,i;const s=(i=(r=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ma(o.doubleValue));return new hY(s)}convertGeoPoint(t){return new dY(ma(t.latitude),ma(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=N9(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(n4(t));default:return null}}convertTimestamp(t){const n=fb(t);return new hu(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Ks.fromString(t);Qi(pxe(r));const i=new r4(r.get(1),r.get(3)),s=new Vn(r.popFirst(5));return i.isEqual(n)||p1(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zxe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class e_e extends Xxe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new DP(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(H9("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class DP extends e_e{data(t={}){return super.data(t)}}class rrt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new C3(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new DP(this._firestore,this._userDataWriter,r.key,r,new C3(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new mn(Tt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new DP(i._firestore,i._userDataWriter,a.doc.key,a.doc,new C3(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new DP(i._firestore,i._userDataWriter,a.doc.key,a.doc,new C3(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:irt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function irt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ar()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T6(e){e=ag(e,of);const t=ag(e.firestore,$w);return Vnt(AR(t),e._key).then(n=>srt(t,e,n))}class t_e extends nrt{constructor(t){super(),this.firestore=t}convertBytes(t){return new wS(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new of(this.firestore,null,n)}}function G2(e){e=ag(e,Fw);const t=ag(e.firestore,$w),n=AR(t),r=new t_e(t);return trt(e._query),Hnt(n,e._query).then(i=>new rrt(t,r,e,i))}function Wl(e,t,n){e=ag(e,of);const r=ag(e.firestore,$w),i=Zxe(e.converter,t,n);return _Y(r,[Hxe(z9(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,th.none())])}function vse(e,t,n,...r){e=ag(e,of);const i=ag(e.firestore,$w),s=z9(i);let o;return o=typeof(t=$s(t))=="string"||t instanceof kR?Wxe(s,"updateDoc",e._key,t,n,r):qxe(s,"updateDoc",e._key,t),_Y(i,[o.toMutation(e._key,th.exists(!0))])}function _Y(e,t){return function(r,i){const s=new Xy;return r.asyncQueue.enqueueAndForget(async()=>Rnt(await Unt(r),i,s)),s.promise}(AR(e),t)}function srt(e,t,n){const r=n.docs.get(t._key),i=new t_e(e);return new e_e(e,i,t._key,r,new C3(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ort{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=z9(t)}set(t,n,r){this._verifyNotCommitted();const i=h$(t,this._firestore),s=Zxe(i.converter,n,r),o=Hxe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,th.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=h$(t,this._firestore);let o;return o=typeof(n=$s(n))=="string"||n instanceof kR?Wxe(this._dataReader,"WriteBatch.update",s._key,n,r,i):qxe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,th.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=h$(t,this._firestore);return this._mutations=this._mutations.concat(new KG(n._key,th.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new mn(Tt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function h$(e,t){if((e=$s(e)).firestore!==t)throw new mn(Tt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function C6(){return new mY("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bse(e){return AR(e=ag(e,$w)),new ort(e,t=>_Y(e,t))}(function(t,n=!0){(function(i){MT=i})(Ow),h1(new sg("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new $w(new eet(r.getProvider("auth-internal")),new iet(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new mn(Tt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new r4(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),x0(Rie,"4.7.6",t),x0(Rie,"4.7.6","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz=new Map,n_e={activated:!1,tokenObservers:[]},art={initialized:!1,enabled:!1};function mu(e){return nz.get(e)||Object.assign({},n_e)}function urt(e,t){return nz.set(e,t),nz.get(e)}function W9(){return art}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_e="https://content-firebaseappcheck.googleapis.com/v1",lrt="exchangeRecaptchaV3Token",crt="exchangeDebugToken",xse={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},frt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class drt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new Jk,this.pending.promise.catch(n=>{}),await hrt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new Jk,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function hrt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const prt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Jf=new DT("appCheck","AppCheck",prt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _se(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function wY(e){if(!mu(e).activated)throw Jf.create("use-before-activation",{appName:e.name})}function i_e(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=A6(n)+"d:"),r&&(o+=A6(r)+"h:"),o+=A6(i)+"m:"+A6(s)+"s",o}function A6(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EY({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Jf.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Jf.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Jf.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Jf.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function mrt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${r_e}/projects/${n}/apps/${r}:${lrt}?key=${i}`,body:{recaptcha_v3_token:t}}}function s_e(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${r_e}/projects/${n}/apps/${r}:${crt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const grt="firebase-app-check-database",yrt=1,l4="firebase-app-check-store",o_e="debug-token";let k6=null;function a_e(){return k6||(k6=new Promise((e,t)=>{try{const n=indexedDB.open(grt,yrt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Jf.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(l4,{keyPath:"compositeKey"})}}}catch(n){t(Jf.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),k6)}function vrt(e){return l_e(c_e(e))}function brt(e,t){return u_e(c_e(e),t)}function xrt(e){return u_e(o_e,e)}function _rt(){return l_e(o_e)}async function u_e(e,t){const r=(await a_e()).transaction(l4,"readwrite"),s=r.objectStore(l4).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Jf.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function l_e(e){const n=(await a_e()).transaction(l4,"readonly"),i=n.objectStore(l4).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Jf.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function c_e(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=new A9("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wrt(e){if(NG()){let t;try{t=await vrt(e)}catch(n){c4.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function p$(e,t){return NG()?brt(e,t).catch(n=>{c4.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function Ert(){let e;try{e=await _rt()}catch{}if(e)return e;{const t=crypto.randomUUID();return xrt(t).catch(n=>c4.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SY(){return W9().enabled}async function TY(){const e=W9();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function Srt(){const e=abe(),t=W9();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new Jk;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(Ert())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Trt={error:"UNKNOWN_ERROR"};function Crt(e){return PG.encodeString(JSON.stringify(e),!1)}async function rz(e,t=!1){const n=e.app;wY(n);const r=mu(n);let i=r.token,s;if(i&&!CE(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(CE(u)?i=u:await p$(n,void 0))}if(!t&&i&&CE(i))return{token:i.token};let o=!1;if(SY()){r.exchangeTokenPromise||(r.exchangeTokenPromise=EY(s_e(n,await TY()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await p$(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await mu(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?c4.warn(u.message):c4.error(u),s=u}let a;return i?s?CE(i)?a={token:i.token,internalError:s}:a=Ese(s):(a={token:i.token},r.token=i,await p$(n,i)):a=Ese(s),o&&h_e(n,a),a}async function Art(e){const t=e.app;wY(t);const{provider:n}=mu(t);if(SY()){const r=await TY(),{token:i}=await EY(s_e(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function f_e(e,t,n,r){const{app:i}=e,s=mu(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&CE(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),wse(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>wse(e))}function d_e(e,t){const n=mu(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function wse(e){const{app:t}=e,n=mu(t);let r=n.tokenRefresher;r||(r=krt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function krt(e){const{app:t}=e;return new drt(async()=>{const n=mu(t);let r;if(n.token?r=await rz(e,!0):r=await rz(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=mu(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},xse.RETRIAL_MIN_WAIT,xse.RETRIAL_MAX_WAIT)}function h_e(e,t){const n=mu(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function CE(e){return e.expireTimeMillis-Date.now()>0}function Ese(e){return{token:Crt(Trt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rrt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=mu(this.app);for(const n of t)d_e(this.app,n.next);return Promise.resolve()}}function Irt(e,t){return new Rrt(e,t)}function Prt(e){return{getToken:t=>rz(e,t),getLimitedUseToken:()=>Art(e),addTokenListener:t=>f_e(e,"INTERNAL",t),removeTokenListener:t=>d_e(e.app,t)}}const Nrt="@firebase/app-check",Drt="0.8.11";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ort="https://www.google.com/recaptcha/api.js";function Mrt(e,t){const n=new Jk,r=mu(e);r.reCAPTCHAState={initialized:n};const i=Lrt(e),s=_se(!1);return s?Sse(e,t,s,i,n):Brt(()=>{const o=_se(!1);if(!o)throw new Error("no recaptcha");Sse(e,t,o,i,n)}),n.promise}function Sse(e,t,n,r,i){n.ready(()=>{$rt(e,t,n,r),i.resolve(n)})}function Lrt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function Frt(e){wY(e);const n=await mu(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=mu(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function $rt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{mu(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{mu(e).reCAPTCHAState.succeeded=!1}}),s=mu(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function Brt(e){const t=document.createElement("script");t.src=Ort,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CY{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;Urt(this._throttleData);const i=await Frt(this._app).catch(o=>{throw Jf.create("recaptcha-error")});if(!(!((t=mu(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Jf.create("recaptcha-error");let s;try{s=await EY(mrt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=jrt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Jf.create("throttled",{time:i_e(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=OT(t,"heartbeat"),Mrt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof CY?this._siteKey===t._siteKey:!1}}function jrt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+frt,httpStatus:e};{const n=t?t.backoffCount:0,r=TQe(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function Urt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Jf.create("throttled",{time:i_e(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zrt(e=OG(),t){e=$s(e);const n=OT(e,"app-check");if(W9().initialized||Srt(),SY()&&TY().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Jf.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return Vrt(e,t.provider,t.isTokenAutoRefreshEnabled),mu(e).isTokenAutoRefreshEnabled&&f_e(r,"INTERNAL",()=>{}),r}function Vrt(e,t,n){const r=urt(e,Object.assign({},n_e));r.activated=!0,r.provider=t,r.cachedTokenPromise=wrt(e).then(i=>(i&&CE(i)&&(r.token=i,h_e(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const Hrt="app-check",Tse="app-check-internal";function qrt(){h1(new sg(Hrt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return Irt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Tse).initialize()})),h1(new sg(Tse,e=>{const t=e.getProvider("app-check").getImmediate();return Prt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),x0(Nrt,Drt)}qrt();function p_e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Wrt=p_e,m_e=new DT("auth","Firebase",p_e());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8=new A9("@firebase/auth");function Grt(e,...t){T8.logLevel<=ni.WARN&&T8.warn(`Auth (${Ow}): ${e}`,...t)}function OP(e,...t){T8.logLevel<=ni.ERROR&&T8.error(`Auth (${Ow}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(e,...t){throw kY(e,...t)}function _0(e,...t){return kY(e,...t)}function AY(e,t,n){const r=Object.assign(Object.assign({},Wrt()),{[t]:n});return new DT("auth","Firebase",r).create(t,{appName:e.name})}function Zv(e){return AY(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Yrt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&ug(e,"argument-error"),AY(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kY(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return m_e.create(e,...t)}function hr(e,t,...n){if(!e)throw kY(t,...n)}function $y(e){const t="INTERNAL ASSERTION FAILED: "+e;throw OP(t),new Error(t)}function g1(e,t){e||$y(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iz(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Krt(){return Cse()==="http:"||Cse()==="https:"}function Cse(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xrt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Krt()||lQe()||"connection"in navigator)?navigator.onLine:!0}function Qrt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(t,n){this.shortDelay=t,this.longDelay=n,g1(n>t,"Short delay should be less than long delay!"),this.isMobile=oQe()||cQe()}get(){return Xrt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RY(e,t){g1(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_e{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$y("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$y("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$y("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jrt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zrt=new IR(3e4,6e4);function G9(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function jT(e,t,n,r,i={}){return y_e(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=xR(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:u},s);return uQe()||(l.referrerPolicy="no-referrer"),g_e.fetch()(b_e(e,e.config.apiHost,n,a),l)})}async function y_e(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Jrt),t);try{const i=new eit(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw R6(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw R6(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw R6(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw R6(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw AY(e,c,l);ug(e,c)}}catch(i){if(i instanceof wg)throw i;ug(e,"network-request-failed",{message:String(i)})}}async function v_e(e,t,n,r,i={}){const s=await jT(e,t,n,r,i);return"mfaPendingCredential"in s&&ug(e,"multi-factor-auth-required",{_serverResponse:s}),s}function b_e(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?RY(e.config,i):`${e.config.apiScheme}://${i}`}class eit{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_0(this.auth,"network-request-failed")),Zrt.get())})}}function R6(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=_0(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tit(e,t){return jT(e,"POST","/v1/accounts:delete",t)}async function x_e(e,t){return jT(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function nit(e,t=!1){const n=$s(e),r=await n.getIdToken(t),i=IY(r);hr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ek(m$(i.auth_time)),issuedAtTime:Ek(m$(i.iat)),expirationTime:Ek(m$(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function m$(e){return Number(e)*1e3}function IY(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return OP("JWT malformed, contained fewer than 3 sections"),null;try{const i=obe(n);return i?JSON.parse(i):(OP("Failed to decode base64 JWT payload"),null)}catch(i){return OP("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Ase(e){const t=IY(e);return hr(t,"internal-error"),hr(typeof t.exp<"u","internal-error"),hr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f4(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof wg&&rit(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function rit({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iit{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ek(this.lastLoginAt),this.creationTime=Ek(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C8(e){var t;const n=e.auth,r=await e.getIdToken(),i=await f4(e,x_e(n,{idToken:r}));hr(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?__e(s.providerUserInfo):[],a=oit(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new sz(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function sit(e){const t=$s(e);await C8(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function oit(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function __e(e){return e.map(t=>{var{providerId:n}=t,r=eR(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ait(e,t){const n=await y_e(e,{},async()=>{const r=xR({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=b_e(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",g_e.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uit(e,t){return jT(e,"POST","/v2/accounts:revokeToken",G9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){hr(t.idToken,"internal-error"),hr(typeof t.idToken<"u","internal-error"),hr(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Ase(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){hr(t.length!==0,"internal-error");const n=Ase(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(hr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await ait(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new VE;return r&&(hr(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(hr(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(hr(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new VE,this.toJSON())}_performRefresh(){return $y("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(e,t){hr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class By{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=eR(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iit(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new sz(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await f4(this,this.stsTokenManager.getToken(this.auth,t));return hr(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return nit(this,t)}reload(){return sit(this)}_assign(t){this!==t&&(hr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new By(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){hr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await C8(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fm(this.auth.app))return Promise.reject(Zv(this.auth));const t=await this.getIdToken();return await f4(this,tit(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,b=(l=n.createdAt)!==null&&l!==void 0?l:void 0,y=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:x,emailVerified:w,isAnonymous:S,providerData:C,stsTokenManager:R}=n;hr(x&&R,t,"internal-error");const I=VE.fromJSON(this.name,R);hr(typeof x=="string",t,"internal-error"),pv(f,t.name),pv(d,t.name),hr(typeof w=="boolean",t,"internal-error"),hr(typeof S=="boolean",t,"internal-error"),pv(h,t.name),pv(p,t.name),pv(m,t.name),pv(g,t.name),pv(b,t.name),pv(y,t.name);const O=new By({uid:x,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:S,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:I,createdAt:b,lastLoginAt:y});return C&&Array.isArray(C)&&(O.providerData=C.map(M=>Object.assign({},M))),g&&(O._redirectEventId=g),O}static async _fromIdTokenResponse(t,n,r=!1){const i=new VE;i.updateFromServerResponse(n);const s=new By({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await C8(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];hr(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?__e(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new VE;a.updateFromIdToken(r);const u=new By({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new sz(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kse=new Map;function jy(e){g1(e instanceof Function,"Expected a class definition");let t=kse.get(e);return t?(g1(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,kse.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_e{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}w_e.type="NONE";const Rse=w_e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(e,t,n){return`firebase:${e}:${t}:${n}`}class HE{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=MP(this.userKey,i.apiKey,s),this.fullPersistenceKey=MP("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?By._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new HE(jy(Rse),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||jy(Rse);const o=MP(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=By._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new HE(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new HE(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ise(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(C_e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(E_e(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(k_e(t))return"Blackberry";if(R_e(t))return"Webos";if(S_e(t))return"Safari";if((t.includes("chrome/")||T_e(t))&&!t.includes("edge/"))return"Chrome";if(A_e(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function E_e(e=hc()){return/firefox\//i.test(e)}function S_e(e=hc()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function T_e(e=hc()){return/crios\//i.test(e)}function C_e(e=hc()){return/iemobile/i.test(e)}function A_e(e=hc()){return/android/i.test(e)}function k_e(e=hc()){return/blackberry/i.test(e)}function R_e(e=hc()){return/webos/i.test(e)}function PY(e=hc()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function lit(e=hc()){var t;return PY(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function cit(){return fQe()&&document.documentMode===10}function I_e(e=hc()){return PY(e)||A_e(e)||R_e(e)||k_e(e)||/windows phone/i.test(e)||C_e(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_e(e,t=[]){let n;switch(e){case"Browser":n=Ise(hc());break;case"Worker":n=`${Ise(hc())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ow}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fit{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dit(e,t={}){return jT(e,"GET","/v2/passwordPolicy",G9(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hit=6;class pit{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:hit,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mit{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pse(this),this.idTokenSubscription=new Pse(this),this.beforeStateQueue=new fit(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m_e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=jy(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await HE.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await x_e(this,{idToken:t}),r=await By._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Fm(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return hr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await C8(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Qrt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Fm(this.app))return Promise.reject(Zv(this));const n=t?$s(t):null;return n&&hr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&hr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Fm(this.app)?Promise.reject(Zv(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Fm(this.app)?Promise.reject(Zv(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jy(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await dit(this),n=new pit(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new DT("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await uit(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&jy(t)||this._popupRedirectResolver;hr(n,this,"argument-error"),this.redirectPersistenceManager=await HE.create(this,[jy(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(hr(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return hr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=P_e(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Grt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function PR(e){return $s(e)}class Pse{constructor(t){this.auth=t,this.observer=null,this.addObserver=vQe(n=>this.observer=n)}get next(){return hr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NY={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function git(e){NY=e}function yit(e){return NY.loadJS(e)}function vit(){return NY.gapiScript}function bit(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xit(e,t){const n=OT(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Zk(s,t??{}))return i;ug(i,"already-initialized")}return n.initialize({options:t})}function _it(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jy);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function wit(e,t,n){const r=PR(e);hr(r._canInitEmulator,r,"emulator-config-failed"),hr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=N_e(t),{host:o,port:a}=Eit(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Sit()}function N_e(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Eit(e){const t=N_e(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Nse(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Nse(o)}}}function Nse(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Sit(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_e{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return $y("not implemented")}_getIdTokenResponse(t){return $y("not implemented")}_linkToIdToken(t,n){return $y("not implemented")}_getReauthenticationResolver(t){return $y("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qE(e,t){return v_e(e,"POST","/v1/accounts:signInWithIdp",G9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tit="http://localhost";class G_ extends D_e{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new G_(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):ug("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=eR(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new G_(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return qE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,qE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,qE(t,n)}buildRequest(){const t={requestUri:Tit,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=xR(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DY{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR extends DY{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv extends NR{constructor(){super("facebook.com")}static credential(t){return G_._fromParams({providerId:Dv.PROVIDER_ID,signInMethod:Dv.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Dv.credentialFromTaggedObject(t)}static credentialFromError(t){return Dv.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Dv.credential(t.oauthAccessToken)}catch{return null}}}Dv.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dv.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy extends NR{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return G_._fromParams({providerId:Oy.PROVIDER_ID,signInMethod:Oy.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Oy.credentialFromTaggedObject(t)}static credentialFromError(t){return Oy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Oy.credential(n,r)}catch{return null}}}Oy.GOOGLE_SIGN_IN_METHOD="google.com";Oy.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov extends NR{constructor(){super("github.com")}static credential(t){return G_._fromParams({providerId:Ov.PROVIDER_ID,signInMethod:Ov.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ov.credentialFromTaggedObject(t)}static credentialFromError(t){return Ov.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ov.credential(t.oauthAccessToken)}catch{return null}}}Ov.GITHUB_SIGN_IN_METHOD="github.com";Ov.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv extends NR{constructor(){super("twitter.com")}static credential(t,n){return G_._fromParams({providerId:Mv.PROVIDER_ID,signInMethod:Mv.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Mv.credentialFromTaggedObject(t)}static credentialFromError(t){return Mv.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Mv.credential(n,r)}catch{return null}}}Mv.TWITTER_SIGN_IN_METHOD="twitter.com";Mv.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cit(e,t){return v_e(e,"POST","/v1/accounts:signUp",G9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await By._fromIdTokenResponse(t,r,i),o=Dse(r);return new mb({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Dse(r);return new mb({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Dse(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ait(e){var t;if(Fm(e.app))return Promise.reject(Zv(e));const n=PR(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new mb({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Cit(n,{returnSecureToken:!0}),i=await mb._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8 extends wg{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,A8.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new A8(t,n,r,i)}}function O_e(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?A8._fromErrorAndOperation(e,s,t,r):s})}async function kit(e,t,n=!1){const r=await f4(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return mb._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rit(e,t,n=!1){const{auth:r}=e;if(Fm(r.app))return Promise.reject(Zv(r));const i="reauthenticate";try{const s=await f4(e,O_e(r,i,t,e),n);hr(s.idToken,r,"internal-error");const o=IY(s.idToken);hr(o,r,"internal-error");const{sub:a}=o;return hr(e.uid===a,r,"user-mismatch"),mb._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ug(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iit(e,t,n=!1){if(Fm(e.app))return Promise.reject(Zv(e));const r="signIn",i=await O_e(e,r,t),s=await mb._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Pit(e,t,n,r){return $s(e).onIdTokenChanged(t,n,r)}function Nit(e,t,n){return $s(e).beforeAuthStateChanged(t,n)}function Dit(e,t,n,r){return $s(e).onAuthStateChanged(t,n,r)}function Oit(e){return $s(e).signOut()}const k8="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_e{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(k8,"1"),this.storage.removeItem(k8),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mit=1e3,Lit=10;class L_e extends M_e{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=I_e(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);cit()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,Lit):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},Mit)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}L_e.type="LOCAL";const Fit=L_e;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_e extends M_e{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}F_e.type="SESSION";const $_e=F_e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $it(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new Y9(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await $it(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Y9.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OY(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bit{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=OY("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(){return window}function jit(e){Hm().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_e(){return typeof Hm().WorkerGlobalScope<"u"&&typeof Hm().importScripts=="function"}async function Uit(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zit(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Vit(){return B_e()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_e="firebaseLocalStorageDb",Hit=1,R8="firebaseLocalStorage",U_e="fbase_key";class DR{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function K9(e,t){return e.transaction([R8],t?"readwrite":"readonly").objectStore(R8)}function qit(){const e=indexedDB.deleteDatabase(j_e);return new DR(e).toPromise()}function oz(){const e=indexedDB.open(j_e,Hit);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(R8,{keyPath:U_e})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(R8)?t(r):(r.close(),await qit(),t(await oz()))})})}async function Ose(e,t,n){const r=K9(e,!0).put({[U_e]:t,value:n});return new DR(r).toPromise()}async function Wit(e,t){const n=K9(e,!1).get(t),r=await new DR(n).toPromise();return r===void 0?null:r.value}function Mse(e,t){const n=K9(e,!0).delete(t);return new DR(n).toPromise()}const Git=800,Yit=3;class z_e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await oz(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>Yit)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B_e()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Y9._getInstance(Vit()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Uit(),!this.activeServiceWorker)return;this.sender=new Bit(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||zit()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await oz();return await Ose(t,k8,"1"),await Mse(t,k8),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ose(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>Wit(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Mse(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=K9(i,!1).getAll();return new DR(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Git)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}z_e.type="LOCAL";const Kit=z_e;new IR(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_e(e,t){return t?jy(t):(hr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MY extends D_e{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return qE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return qE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return qE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Xit(e){return Iit(e.auth,new MY(e),e.bypassAuthState)}function Qit(e){const{auth:t,user:n}=e;return hr(n,t,"internal-error"),Rit(n,new MY(e),e.bypassAuthState)}async function Jit(e){const{auth:t,user:n}=e;return hr(n,t,"internal-error"),kit(n,new MY(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_e{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Xit;case"linkViaPopup":case"linkViaRedirect":return Jit;case"reauthViaPopup":case"reauthViaRedirect":return Qit;default:ug(this.auth,"internal-error")}}resolve(t){g1(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){g1(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zit=new IR(2e3,1e4);async function est(e,t,n){if(Fm(e.app))return Promise.reject(_0(e,"operation-not-supported-in-this-environment"));const r=PR(e);Yrt(e,t,DY);const i=V_e(r,n);return new S_(r,"signInViaPopup",t,i).executeNotNull()}class S_ extends H_e{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,S_.currentPopupAction&&S_.currentPopupAction.cancel(),S_.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return hr(t,this.auth,"internal-error"),t}async onExecution(){g1(this.filter.length===1,"Popup operations only handle one event");const t=OY();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_0(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(_0(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,S_.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_0(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Zit.get())};t()}}S_.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tst="pendingRedirect",LP=new Map;class nst extends H_e{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=LP.get(this.auth._key());if(!t){try{const r=await rst(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}LP.set(this.auth._key(),t)}return this.bypassAuthState||LP.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rst(e,t){const n=ost(t),r=sst(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function ist(e,t){LP.set(e._key(),t)}function sst(e){return jy(e._redirectPersistence)}function ost(e){return MP(tst,e.config.apiKey,e.name)}async function ast(e,t,n=!1){if(Fm(e.app))return Promise.reject(Zv(e));const r=PR(e),i=V_e(r,t),o=await new nst(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ust=10*60*1e3;class lst{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!cst(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!q_e(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(_0(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=ust&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lse(t))}saveEventToCache(t){this.cachedEventUids.add(Lse(t)),this.lastProcessedEventTime=Date.now()}}function Lse(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function q_e({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function cst(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return q_e(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fst(e,t={}){return jT(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dst=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hst=/^https?/;async function pst(e){if(e.config.emulator)return;const{authorizedDomains:t}=await fst(e);for(const n of t)try{if(mst(n))return}catch{}ug(e,"unauthorized-domain")}function mst(e){const t=iz(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!hst.test(n))return!1;if(dst.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gst=new IR(3e4,6e4);function Fse(){const e=Hm().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function yst(e){return new Promise((t,n)=>{var r,i,s;function o(){Fse(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Fse(),n(_0(e,"network-request-failed"))},timeout:gst.get()})}if(!((i=(r=Hm().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Hm().gapi)===null||s===void 0)&&s.load)o();else{const a=bit("iframefcb");return Hm()[a]=()=>{gapi.load?o():n(_0(e,"network-request-failed"))},yit(`${vit()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw FP=null,t})}let FP=null;function vst(e){return FP=FP||yst(e),FP}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bst=new IR(5e3,15e3),xst="__/auth/iframe",_st="emulator/auth/iframe",wst={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Est=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sst(e){const t=e.config;hr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?RY(t,_st):`https://${e.config.authDomain}/${xst}`,r={apiKey:t.apiKey,appName:e.name,v:Ow},i=Est.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${xR(r).slice(1)}`}async function Tst(e){const t=await vst(e),n=Hm().gapi;return hr(n,e,"internal-error"),t.open({where:document.body,url:Sst(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wst,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=_0(e,"network-request-failed"),a=Hm().setTimeout(()=>{s(o)},bst.get());function u(){Hm().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cst={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ast=500,kst=600,Rst="_blank",Ist="http://localhost";class $se{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Pst(e,t,n,r=Ast,i=kst){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Cst),{width:r.toString(),height:i.toString(),top:s,left:o}),l=hc().toLowerCase();n&&(a=T_e(l)?Rst:n),E_e(l)&&(t=t||Ist,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(lit(l)&&a!=="_self")return Nst(t||"",a),new $se(null);const f=window.open(t||"",a,c);hr(f,e,"popup-blocked");try{f.focus()}catch{}return new $se(f)}function Nst(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dst="__/auth/handler",Ost="emulator/auth/handler",Mst=encodeURIComponent("fac");async function Bse(e,t,n,r,i,s){hr(e.config.authDomain,e,"auth-domain-config-required"),hr(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ow,eventId:i};if(t instanceof DY){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",yQe(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof NR){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${Mst}=${encodeURIComponent(u)}`:"";return`${Lst(e)}?${xR(a).slice(1)}${l}`}function Lst({config:e}){return e.emulator?RY(e,Ost):`https://${e.authDomain}/${Dst}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g$="webStorageSupport";class Fst{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$_e,this._completeRedirectFn=ast,this._overrideRedirectResult=ist}async _openPopup(t,n,r,i){var s;g1((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Bse(t,n,r,iz(),i);return Pst(t,o,OY())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Bse(t,n,r,iz(),i);return jit(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(g1(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await Tst(t),r=new lst(t);return n.register("authEvent",i=>(hr(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(g$,{type:g$},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[g$];o!==void 0&&n(!!o),ug(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pst(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return I_e()||S_e()||PY()}}const W_e=Fst;var jse="@firebase/auth",Use="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $st{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){hr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bst(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jst(e){h1(new sg("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;hr(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:P_e(e)},l=new mit(r,i,s,u);return _it(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),h1(new sg("auth-internal",t=>{const n=PR(t.getProvider("auth").getImmediate());return(r=>new $st(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),x0(jse,Use,Bst(e)),x0(jse,Use,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ust=5*60,zst=cbe("authIdTokenMaxAge")||Ust;let zse=null;const Vst=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>zst)return;const i=n==null?void 0:n.token;zse!==i&&(zse=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function I8(e=OG()){const t=OT(e,"auth");if(t.isInitialized())return t.getImmediate();const n=xit(e,{popupRedirectResolver:W_e,persistence:[Kit,Fit,$_e]}),r=cbe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Vst(s.toString());Nit(n,o,()=>o(n.currentUser)),Pit(n,a=>o(a))}}const i=ube("auth");return i&&wit(n,`http://${i}`),n}function Hst(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}git({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=_0("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Hst().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jst("Browser");function A3(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var y$={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var Vse;function qst(){return Vse||(Vse=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof A3=="function"&&A3;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof A3=="function"&&A3,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,b,y=h.length;y;){for(b=h,h=[],g=-1;++g<y;)b[g]();y=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof ya<"u"?ya:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,S!==o&&m(this,S)}f.prototype.catch=function(S){return this.then(null,S)},f.prototype.then=function(S,C){if(typeof S!="function"&&this.state===l||typeof C!="function"&&this.state===u)return this;var R=new this.constructor(o);if(this.state!==c){var I=this.state===l?S:C;h(R,I,this.outcome)}else this.queue.push(new d(R,S,C));return R};function d(S,C,R){this.promise=S,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(S){a.resolve(this.promise,S)},d.prototype.otherCallFulfilled=function(S){h(this.promise,this.onFulfilled,S)},d.prototype.callRejected=function(S){a.reject(this.promise,S)},d.prototype.otherCallRejected=function(S){h(this.promise,this.onRejected,S)};function h(S,C,R){s(function(){var I;try{I=C(R)}catch(O){return a.reject(S,O)}I===S?a.reject(S,new TypeError("Cannot resolve promise with itself")):a.resolve(S,I)})}a.resolve=function(S,C){var R=g(p,C);if(R.status==="error")return a.reject(S,R.value);var I=R.value;if(I)m(S,I);else{S.state=l,S.outcome=C;for(var O=-1,M=S.queue.length;++O<M;)S.queue[O].callFulfilled(C)}return S},a.reject=function(S,C){S.state=u,S.outcome=C;for(var R=-1,I=S.queue.length;++R<I;)S.queue[R].callRejected(C);return S};function p(S){var C=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof C=="function")return function(){C.apply(S,arguments)}}function m(S,C){var R=!1;function I(H){R||(R=!0,a.reject(S,H))}function O(H){R||(R=!0,a.resolve(S,H))}function M(){C(O,I)}var L=g(M);L.status==="error"&&I(L.value)}function g(S,C){var R={};try{R.value=S(C),R.status="success"}catch(I){R.status="error",R.value=I}return R}f.resolve=b;function b(S){return S instanceof this?S:a.resolve(new this(o),S)}f.reject=y;function y(S){var C=new this(o);return a.reject(C,S)}f.all=x;function x(S){var C=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=S.length,I=!1;if(!R)return this.resolve([]);for(var O=new Array(R),M=0,L=-1,H=new this(o);++L<R;)D(S[L],L);return H;function D(B,z){C.resolve(B).then(G,function(Z){I||(I=!0,a.reject(H,Z))});function G(Z){O[z]=Z,++M===R&&!I&&(I=!0,a.resolve(H,O))}}}f.race=w;function w(S){var C=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=S.length,I=!1;if(!R)return this.resolve([]);for(var O=-1,M=new this(o);++O<R;)L(S[O]);return M;function L(H){C.resolve(H).then(function(D){I||(I=!0,a.resolve(M,D))},function(D){I||(I=!0,a.reject(M,D))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof ya<"u"?ya:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ve){return typeof ve}:function(ve){return ve&&typeof Symbol=="function"&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve};function o(ve,Ie){if(!(ve instanceof Ie))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var ve=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),Ie=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!ve||Ie)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(ve,Ie){ve=ve||[],Ie=Ie||{};try{return new Blob(ve,Ie)}catch(De){if(De.name!=="TypeError")throw De;for(var Se=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,Be=new Se,ze=0;ze<ve.length;ze+=1)Be.append(ve[ze]);return Be.getBlob(Ie.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(ve,Ie){Ie&&ve.then(function(Se){Ie(null,Se)},function(Se){Ie(Se)})}function h(ve,Ie,Se){typeof Ie=="function"&&ve.then(Ie),typeof Se=="function"&&ve.catch(Se)}function p(ve){return typeof ve!="string"&&(console.warn(ve+" used as a key, but it is not a string."),ve=String(ve)),ve}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",b=void 0,y={},x=Object.prototype.toString,w="readonly",S="readwrite";function C(ve){for(var Ie=ve.length,Se=new ArrayBuffer(Ie),Be=new Uint8Array(Se),ze=0;ze<Ie;ze++)Be[ze]=ve.charCodeAt(ze);return Se}function R(ve){return new f(function(Ie){var Se=ve.transaction(g,S),Be=c([""]);Se.objectStore(g).put(Be,"key"),Se.onabort=function(ze){ze.preventDefault(),ze.stopPropagation(),Ie(!1)},Se.oncomplete=function(){var ze=navigator.userAgent.match(/Chrome\/(\d+)/),De=navigator.userAgent.match(/Edge\//);Ie(De||!ze||parseInt(ze[1],10)>=43)}}).catch(function(){return!1})}function I(ve){return typeof b=="boolean"?f.resolve(b):R(ve).then(function(Ie){return b=Ie,b})}function O(ve){var Ie=y[ve.name],Se={};Se.promise=new f(function(Be,ze){Se.resolve=Be,Se.reject=ze}),Ie.deferredOperations.push(Se),Ie.dbReady?Ie.dbReady=Ie.dbReady.then(function(){return Se.promise}):Ie.dbReady=Se.promise}function M(ve){var Ie=y[ve.name],Se=Ie.deferredOperations.pop();if(Se)return Se.resolve(),Se.promise}function L(ve,Ie){var Se=y[ve.name],Be=Se.deferredOperations.pop();if(Be)return Be.reject(Ie),Be.promise}function H(ve,Ie){return new f(function(Se,Be){if(y[ve.name]=y[ve.name]||te(),ve.db)if(Ie)O(ve),ve.db.close();else return Se(ve.db);var ze=[ve.name];Ie&&ze.push(ve.version);var De=u.open.apply(u,ze);Ie&&(De.onupgradeneeded=function(ht){var kt=De.result;try{kt.createObjectStore(ve.storeName),ht.oldVersion<=1&&kt.createObjectStore(g)}catch(Nt){if(Nt.name==="ConstraintError")console.warn('The database "'+ve.name+'" has been upgraded from version '+ht.oldVersion+" to version "+ht.newVersion+', but the storage "'+ve.storeName+'" already exists.');else throw Nt}}),De.onerror=function(ht){ht.preventDefault(),Be(De.error)},De.onsuccess=function(){var ht=De.result;ht.onversionchange=function(kt){kt.target.close()},Se(ht),M(ve)}})}function D(ve){return H(ve,!1)}function B(ve){return H(ve,!0)}function z(ve,Ie){if(!ve.db)return!0;var Se=!ve.db.objectStoreNames.contains(ve.storeName),Be=ve.version<ve.db.version,ze=ve.version>ve.db.version;if(Be&&(ve.version!==Ie&&console.warn('The database "'+ve.name+`" can't be downgraded from version `+ve.db.version+" to version "+ve.version+"."),ve.version=ve.db.version),ze||Se){if(Se){var De=ve.db.version+1;De>ve.version&&(ve.version=De)}return!0}return!1}function G(ve){return new f(function(Ie,Se){var Be=new FileReader;Be.onerror=Se,Be.onloadend=function(ze){var De=btoa(ze.target.result||"");Ie({__local_forage_encoded_blob:!0,data:De,type:ve.type})},Be.readAsBinaryString(ve)})}function Z(ve){var Ie=C(atob(ve.data));return c([Ie],{type:ve.type})}function ne(ve){return ve&&ve.__local_forage_encoded_blob}function ue(ve){var Ie=this,Se=Ie._initReady().then(function(){var Be=y[Ie._dbInfo.name];if(Be&&Be.dbReady)return Be.dbReady});return h(Se,ve,ve),Se}function X(ve){O(ve);for(var Ie=y[ve.name],Se=Ie.forages,Be=0;Be<Se.length;Be++){var ze=Se[Be];ze._dbInfo.db&&(ze._dbInfo.db.close(),ze._dbInfo.db=null)}return ve.db=null,D(ve).then(function(De){return ve.db=De,z(ve)?B(ve):De}).then(function(De){ve.db=Ie.db=De;for(var ht=0;ht<Se.length;ht++)Se[ht]._dbInfo.db=De}).catch(function(De){throw L(ve,De),De})}function q(ve,Ie,Se,Be){Be===void 0&&(Be=1);try{var ze=ve.db.transaction(ve.storeName,Ie);Se(null,ze)}catch(De){if(Be>0&&(!ve.db||De.name==="InvalidStateError"||De.name==="NotFoundError"))return f.resolve().then(function(){if(!ve.db||De.name==="NotFoundError"&&!ve.db.objectStoreNames.contains(ve.storeName)&&ve.version<=ve.db.version)return ve.db&&(ve.version=ve.db.version+1),B(ve)}).then(function(){return X(ve).then(function(){q(ve,Ie,Se,Be-1)})}).catch(Se);Se(De)}}function te(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function W(ve){var Ie=this,Se={db:null};if(ve)for(var Be in ve)Se[Be]=ve[Be];var ze=y[Se.name];ze||(ze=te(),y[Se.name]=ze),ze.forages.push(Ie),Ie._initReady||(Ie._initReady=Ie.ready,Ie.ready=ue);var De=[];function ht(){return f.resolve()}for(var kt=0;kt<ze.forages.length;kt++){var Nt=ze.forages[kt];Nt!==Ie&&De.push(Nt._initReady().catch(ht))}var Rt=ze.forages.slice(0);return f.all(De).then(function(){return Se.db=ze.db,D(Se)}).then(function(jt){return Se.db=jt,z(Se,Ie._defaultConfig.version)?B(Se):jt}).then(function(jt){Se.db=ze.db=jt,Ie._dbInfo=Se;for(var Zt=0;Zt<Rt.length;Zt++){var qn=Rt[Zt];qn!==Ie&&(qn._dbInfo.db=Se.db,qn._dbInfo.version=Se.version)}})}function ee(ve,Ie){var Se=this;ve=p(ve);var Be=new f(function(ze,De){Se.ready().then(function(){q(Se._dbInfo,w,function(ht,kt){if(ht)return De(ht);try{var Nt=kt.objectStore(Se._dbInfo.storeName),Rt=Nt.get(ve);Rt.onsuccess=function(){var jt=Rt.result;jt===void 0&&(jt=null),ne(jt)&&(jt=Z(jt)),ze(jt)},Rt.onerror=function(){De(Rt.error)}}catch(jt){De(jt)}})}).catch(De)});return d(Be,Ie),Be}function oe(ve,Ie){var Se=this,Be=new f(function(ze,De){Se.ready().then(function(){q(Se._dbInfo,w,function(ht,kt){if(ht)return De(ht);try{var Nt=kt.objectStore(Se._dbInfo.storeName),Rt=Nt.openCursor(),jt=1;Rt.onsuccess=function(){var Zt=Rt.result;if(Zt){var qn=Zt.value;ne(qn)&&(qn=Z(qn));var Sn=ve(qn,Zt.key,jt++);Sn!==void 0?ze(Sn):Zt.continue()}else ze()},Rt.onerror=function(){De(Rt.error)}}catch(Zt){De(Zt)}})}).catch(De)});return d(Be,Ie),Be}function pe(ve,Ie,Se){var Be=this;ve=p(ve);var ze=new f(function(De,ht){var kt;Be.ready().then(function(){return kt=Be._dbInfo,x.call(Ie)==="[object Blob]"?I(kt.db).then(function(Nt){return Nt?Ie:G(Ie)}):Ie}).then(function(Nt){q(Be._dbInfo,S,function(Rt,jt){if(Rt)return ht(Rt);try{var Zt=jt.objectStore(Be._dbInfo.storeName);Nt===null&&(Nt=void 0);var qn=Zt.put(Nt,ve);jt.oncomplete=function(){Nt===void 0&&(Nt=null),De(Nt)},jt.onabort=jt.onerror=function(){var Sn=qn.error?qn.error:qn.transaction.error;ht(Sn)}}catch(Sn){ht(Sn)}})}).catch(ht)});return d(ze,Se),ze}function ce(ve,Ie){var Se=this;ve=p(ve);var Be=new f(function(ze,De){Se.ready().then(function(){q(Se._dbInfo,S,function(ht,kt){if(ht)return De(ht);try{var Nt=kt.objectStore(Se._dbInfo.storeName),Rt=Nt.delete(ve);kt.oncomplete=function(){ze()},kt.onerror=function(){De(Rt.error)},kt.onabort=function(){var jt=Rt.error?Rt.error:Rt.transaction.error;De(jt)}}catch(jt){De(jt)}})}).catch(De)});return d(Be,Ie),Be}function he(ve){var Ie=this,Se=new f(function(Be,ze){Ie.ready().then(function(){q(Ie._dbInfo,S,function(De,ht){if(De)return ze(De);try{var kt=ht.objectStore(Ie._dbInfo.storeName),Nt=kt.clear();ht.oncomplete=function(){Be()},ht.onabort=ht.onerror=function(){var Rt=Nt.error?Nt.error:Nt.transaction.error;ze(Rt)}}catch(Rt){ze(Rt)}})}).catch(ze)});return d(Se,ve),Se}function Ee(ve){var Ie=this,Se=new f(function(Be,ze){Ie.ready().then(function(){q(Ie._dbInfo,w,function(De,ht){if(De)return ze(De);try{var kt=ht.objectStore(Ie._dbInfo.storeName),Nt=kt.count();Nt.onsuccess=function(){Be(Nt.result)},Nt.onerror=function(){ze(Nt.error)}}catch(Rt){ze(Rt)}})}).catch(ze)});return d(Se,ve),Se}function Ae(ve,Ie){var Se=this,Be=new f(function(ze,De){if(ve<0){ze(null);return}Se.ready().then(function(){q(Se._dbInfo,w,function(ht,kt){if(ht)return De(ht);try{var Nt=kt.objectStore(Se._dbInfo.storeName),Rt=!1,jt=Nt.openKeyCursor();jt.onsuccess=function(){var Zt=jt.result;if(!Zt){ze(null);return}ve===0||Rt?ze(Zt.key):(Rt=!0,Zt.advance(ve))},jt.onerror=function(){De(jt.error)}}catch(Zt){De(Zt)}})}).catch(De)});return d(Be,Ie),Be}function ge(ve){var Ie=this,Se=new f(function(Be,ze){Ie.ready().then(function(){q(Ie._dbInfo,w,function(De,ht){if(De)return ze(De);try{var kt=ht.objectStore(Ie._dbInfo.storeName),Nt=kt.openKeyCursor(),Rt=[];Nt.onsuccess=function(){var jt=Nt.result;if(!jt){Be(Rt);return}Rt.push(jt.key),jt.continue()},Nt.onerror=function(){ze(Nt.error)}}catch(jt){ze(jt)}})}).catch(ze)});return d(Se,ve),Se}function me(ve,Ie){Ie=m.apply(this,arguments);var Se=this.config();ve=typeof ve!="function"&&ve||{},ve.name||(ve.name=ve.name||Se.name,ve.storeName=ve.storeName||Se.storeName);var Be=this,ze;if(!ve.name)ze=f.reject("Invalid arguments");else{var De=ve.name===Se.name&&Be._dbInfo.db,ht=De?f.resolve(Be._dbInfo.db):D(ve).then(function(kt){var Nt=y[ve.name],Rt=Nt.forages;Nt.db=kt;for(var jt=0;jt<Rt.length;jt++)Rt[jt]._dbInfo.db=kt;return kt});ve.storeName?ze=ht.then(function(kt){if(kt.objectStoreNames.contains(ve.storeName)){var Nt=kt.version+1;O(ve);var Rt=y[ve.name],jt=Rt.forages;kt.close();for(var Zt=0;Zt<jt.length;Zt++){var qn=jt[Zt];qn._dbInfo.db=null,qn._dbInfo.version=Nt}var Sn=new f(function(lr,_n){var br=u.open(ve.name,Nt);br.onerror=function(ls){var Ao=br.result;Ao.close(),_n(ls)},br.onupgradeneeded=function(){var ls=br.result;ls.deleteObjectStore(ve.storeName)},br.onsuccess=function(){var ls=br.result;ls.close(),lr(ls)}});return Sn.then(function(lr){Rt.db=lr;for(var _n=0;_n<jt.length;_n++){var br=jt[_n];br._dbInfo.db=lr,M(br._dbInfo)}}).catch(function(lr){throw(L(ve,lr)||f.resolve()).catch(function(){}),lr})}}):ze=ht.then(function(kt){O(ve);var Nt=y[ve.name],Rt=Nt.forages;kt.close();for(var jt=0;jt<Rt.length;jt++){var Zt=Rt[jt];Zt._dbInfo.db=null}var qn=new f(function(Sn,lr){var _n=u.deleteDatabase(ve.name);_n.onerror=function(){var br=_n.result;br&&br.close(),lr(_n.error)},_n.onblocked=function(){console.warn('dropInstance blocked for database "'+ve.name+'" until all open connections are closed')},_n.onsuccess=function(){var br=_n.result;br&&br.close(),Sn(br)}});return qn.then(function(Sn){Nt.db=Sn;for(var lr=0;lr<Rt.length;lr++){var _n=Rt[lr];M(_n._dbInfo)}}).catch(function(Sn){throw(L(ve,Sn)||f.resolve()).catch(function(){}),Sn})})}return d(ze,Ie),ze}var Oe={_driver:"asyncStorage",_initStorage:W,_support:l(),iterate:oe,getItem:ee,setItem:pe,removeItem:ce,clear:he,length:Ee,key:Ae,keys:ge,dropInstance:me};function Me(){return typeof openDatabase=="function"}var Ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lt="~~local_forage_type~",We=/^~~local_forage_type~([^~]+)~/,nt="__lfsc__:",yt=nt.length,_t="arbf",It="blob",Et="si08",Ke="ui08",Lt="uic8",sn="si16",Fe="si32",Qe="ur16",wt="ui32",Vt="fl32",Wt="fl64",bn=yt+_t.length,Dn=Object.prototype.toString;function Zn(ve){var Ie=ve.length*.75,Se=ve.length,Be,ze=0,De,ht,kt,Nt;ve[ve.length-1]==="="&&(Ie--,ve[ve.length-2]==="="&&Ie--);var Rt=new ArrayBuffer(Ie),jt=new Uint8Array(Rt);for(Be=0;Be<Se;Be+=4)De=Ye.indexOf(ve[Be]),ht=Ye.indexOf(ve[Be+1]),kt=Ye.indexOf(ve[Be+2]),Nt=Ye.indexOf(ve[Be+3]),jt[ze++]=De<<2|ht>>4,jt[ze++]=(ht&15)<<4|kt>>2,jt[ze++]=(kt&3)<<6|Nt&63;return Rt}function wr(ve){var Ie=new Uint8Array(ve),Se="",Be;for(Be=0;Be<Ie.length;Be+=3)Se+=Ye[Ie[Be]>>2],Se+=Ye[(Ie[Be]&3)<<4|Ie[Be+1]>>4],Se+=Ye[(Ie[Be+1]&15)<<2|Ie[Be+2]>>6],Se+=Ye[Ie[Be+2]&63];return Ie.length%3===2?Se=Se.substring(0,Se.length-1)+"=":Ie.length%3===1&&(Se=Se.substring(0,Se.length-2)+"=="),Se}function Hn(ve,Ie){var Se="";if(ve&&(Se=Dn.call(ve)),ve&&(Se==="[object ArrayBuffer]"||ve.buffer&&Dn.call(ve.buffer)==="[object ArrayBuffer]")){var Be,ze=nt;ve instanceof ArrayBuffer?(Be=ve,ze+=_t):(Be=ve.buffer,Se==="[object Int8Array]"?ze+=Et:Se==="[object Uint8Array]"?ze+=Ke:Se==="[object Uint8ClampedArray]"?ze+=Lt:Se==="[object Int16Array]"?ze+=sn:Se==="[object Uint16Array]"?ze+=Qe:Se==="[object Int32Array]"?ze+=Fe:Se==="[object Uint32Array]"?ze+=wt:Se==="[object Float32Array]"?ze+=Vt:Se==="[object Float64Array]"?ze+=Wt:Ie(new Error("Failed to get type for BinaryArray"))),Ie(ze+wr(Be))}else if(Se==="[object Blob]"){var De=new FileReader;De.onload=function(){var ht=lt+ve.type+"~"+wr(this.result);Ie(nt+It+ht)},De.readAsArrayBuffer(ve)}else try{Ie(JSON.stringify(ve))}catch(ht){console.error("Couldn't convert value into a JSON string: ",ve),Ie(null,ht)}}function nr(ve){if(ve.substring(0,yt)!==nt)return JSON.parse(ve);var Ie=ve.substring(bn),Se=ve.substring(yt,bn),Be;if(Se===It&&We.test(Ie)){var ze=Ie.match(We);Be=ze[1],Ie=Ie.substring(ze[0].length)}var De=Zn(Ie);switch(Se){case _t:return De;case It:return c([De],{type:Be});case Et:return new Int8Array(De);case Ke:return new Uint8Array(De);case Lt:return new Uint8ClampedArray(De);case sn:return new Int16Array(De);case Qe:return new Uint16Array(De);case Fe:return new Int32Array(De);case wt:return new Uint32Array(De);case Vt:return new Float32Array(De);case Wt:return new Float64Array(De);default:throw new Error("Unkown type: "+Se)}}var Ei={serialize:Hn,deserialize:nr,stringToBuffer:Zn,bufferToString:wr};function Dr(ve,Ie,Se,Be){ve.executeSql("CREATE TABLE IF NOT EXISTS "+Ie.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Se,Be)}function Co(ve){var Ie=this,Se={db:null};if(ve)for(var Be in ve)Se[Be]=typeof ve[Be]!="string"?ve[Be].toString():ve[Be];var ze=new f(function(De,ht){try{Se.db=openDatabase(Se.name,String(Se.version),Se.description,Se.size)}catch(kt){return ht(kt)}Se.db.transaction(function(kt){Dr(kt,Se,function(){Ie._dbInfo=Se,De()},function(Nt,Rt){ht(Rt)})},ht)});return Se.serializer=Ei,ze}function Ji(ve,Ie,Se,Be,ze,De){ve.executeSql(Se,Be,ze,function(ht,kt){kt.code===kt.SYNTAX_ERR?ht.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[Ie.storeName],function(Nt,Rt){Rt.rows.length?De(Nt,kt):Dr(Nt,Ie,function(){Nt.executeSql(Se,Be,ze,De)},De)},De):De(ht,kt)},De)}function Di(ve,Ie){var Se=this;ve=p(ve);var Be=new f(function(ze,De){Se.ready().then(function(){var ht=Se._dbInfo;ht.db.transaction(function(kt){Ji(kt,ht,"SELECT * FROM "+ht.storeName+" WHERE key = ? LIMIT 1",[ve],function(Nt,Rt){var jt=Rt.rows.length?Rt.rows.item(0).value:null;jt&&(jt=ht.serializer.deserialize(jt)),ze(jt)},function(Nt,Rt){De(Rt)})})}).catch(De)});return d(Be,Ie),Be}function Zi(ve,Ie){var Se=this,Be=new f(function(ze,De){Se.ready().then(function(){var ht=Se._dbInfo;ht.db.transaction(function(kt){Ji(kt,ht,"SELECT * FROM "+ht.storeName,[],function(Nt,Rt){for(var jt=Rt.rows,Zt=jt.length,qn=0;qn<Zt;qn++){var Sn=jt.item(qn),lr=Sn.value;if(lr&&(lr=ht.serializer.deserialize(lr)),lr=ve(lr,Sn.key,qn+1),lr!==void 0){ze(lr);return}}ze()},function(Nt,Rt){De(Rt)})})}).catch(De)});return d(Be,Ie),Be}function ei(ve,Ie,Se,Be){var ze=this;ve=p(ve);var De=new f(function(ht,kt){ze.ready().then(function(){Ie===void 0&&(Ie=null);var Nt=Ie,Rt=ze._dbInfo;Rt.serializer.serialize(Ie,function(jt,Zt){Zt?kt(Zt):Rt.db.transaction(function(qn){Ji(qn,Rt,"INSERT OR REPLACE INTO "+Rt.storeName+" (key, value) VALUES (?, ?)",[ve,jt],function(){ht(Nt)},function(Sn,lr){kt(lr)})},function(qn){if(qn.code===qn.QUOTA_ERR){if(Be>0){ht(ei.apply(ze,[ve,Nt,Se,Be-1]));return}kt(qn)}})})}).catch(kt)});return d(De,Se),De}function mo(ve,Ie,Se){return ei.apply(this,[ve,Ie,Se,1])}function Gu(ve,Ie){var Se=this;ve=p(ve);var Be=new f(function(ze,De){Se.ready().then(function(){var ht=Se._dbInfo;ht.db.transaction(function(kt){Ji(kt,ht,"DELETE FROM "+ht.storeName+" WHERE key = ?",[ve],function(){ze()},function(Nt,Rt){De(Rt)})})}).catch(De)});return d(Be,Ie),Be}function Ea(ve){var Ie=this,Se=new f(function(Be,ze){Ie.ready().then(function(){var De=Ie._dbInfo;De.db.transaction(function(ht){Ji(ht,De,"DELETE FROM "+De.storeName,[],function(){Be()},function(kt,Nt){ze(Nt)})})}).catch(ze)});return d(Se,ve),Se}function Sa(ve){var Ie=this,Se=new f(function(Be,ze){Ie.ready().then(function(){var De=Ie._dbInfo;De.db.transaction(function(ht){Ji(ht,De,"SELECT COUNT(key) as c FROM "+De.storeName,[],function(kt,Nt){var Rt=Nt.rows.item(0).c;Be(Rt)},function(kt,Nt){ze(Nt)})})}).catch(ze)});return d(Se,ve),Se}function Kr(ve,Ie){var Se=this,Be=new f(function(ze,De){Se.ready().then(function(){var ht=Se._dbInfo;ht.db.transaction(function(kt){Ji(kt,ht,"SELECT key FROM "+ht.storeName+" WHERE id = ? LIMIT 1",[ve+1],function(Nt,Rt){var jt=Rt.rows.length?Rt.rows.item(0).key:null;ze(jt)},function(Nt,Rt){De(Rt)})})}).catch(De)});return d(Be,Ie),Be}function Oi(ve){var Ie=this,Se=new f(function(Be,ze){Ie.ready().then(function(){var De=Ie._dbInfo;De.db.transaction(function(ht){Ji(ht,De,"SELECT key FROM "+De.storeName,[],function(kt,Nt){for(var Rt=[],jt=0;jt<Nt.rows.length;jt++)Rt.push(Nt.rows.item(jt).key);Be(Rt)},function(kt,Nt){ze(Nt)})})}).catch(ze)});return d(Se,ve),Se}function si(ve){return new f(function(Ie,Se){ve.transaction(function(Be){Be.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ze,De){for(var ht=[],kt=0;kt<De.rows.length;kt++)ht.push(De.rows.item(kt).name);Ie({db:ve,storeNames:ht})},function(ze,De){Se(De)})},function(Be){Se(Be)})})}function Zs(ve,Ie){Ie=m.apply(this,arguments);var Se=this.config();ve=typeof ve!="function"&&ve||{},ve.name||(ve.name=ve.name||Se.name,ve.storeName=ve.storeName||Se.storeName);var Be=this,ze;return ve.name?ze=new f(function(De){var ht;ve.name===Se.name?ht=Be._dbInfo.db:ht=openDatabase(ve.name,"","",0),ve.storeName?De({db:ht,storeNames:[ve.storeName]}):De(si(ht))}).then(function(De){return new f(function(ht,kt){De.db.transaction(function(Nt){function Rt(Sn){return new f(function(lr,_n){Nt.executeSql("DROP TABLE IF EXISTS "+Sn,[],function(){lr()},function(br,ls){_n(ls)})})}for(var jt=[],Zt=0,qn=De.storeNames.length;Zt<qn;Zt++)jt.push(Rt(De.storeNames[Zt]));f.all(jt).then(function(){ht()}).catch(function(Sn){kt(Sn)})},function(Nt){kt(Nt)})})}):ze=f.reject("Invalid arguments"),d(ze,Ie),ze}var Xr={_driver:"webSQLStorage",_initStorage:Co,_support:Me(),iterate:Zi,getItem:Di,setItem:mo,removeItem:Gu,clear:Ea,length:Sa,key:Kr,keys:Oi,dropInstance:Zs};function Hi(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function eo(ve,Ie){var Se=ve.name+"/";return ve.storeName!==Ie.storeName&&(Se+=ve.storeName+"/"),Se}function go(){var ve="_localforage_support_test";try{return localStorage.setItem(ve,!0),localStorage.removeItem(ve),!1}catch{return!0}}function Qo(){return!go()||localStorage.length>0}function Ta(ve){var Ie=this,Se={};if(ve)for(var Be in ve)Se[Be]=ve[Be];return Se.keyPrefix=eo(ve,Ie._defaultConfig),Qo()?(Ie._dbInfo=Se,Se.serializer=Ei,f.resolve()):f.reject()}function pd(ve){var Ie=this,Se=Ie.ready().then(function(){for(var Be=Ie._dbInfo.keyPrefix,ze=localStorage.length-1;ze>=0;ze--){var De=localStorage.key(ze);De.indexOf(Be)===0&&localStorage.removeItem(De)}});return d(Se,ve),Se}function Hr(ve,Ie){var Se=this;ve=p(ve);var Be=Se.ready().then(function(){var ze=Se._dbInfo,De=localStorage.getItem(ze.keyPrefix+ve);return De&&(De=ze.serializer.deserialize(De)),De});return d(Be,Ie),Be}function Pl(ve,Ie){var Se=this,Be=Se.ready().then(function(){for(var ze=Se._dbInfo,De=ze.keyPrefix,ht=De.length,kt=localStorage.length,Nt=1,Rt=0;Rt<kt;Rt++){var jt=localStorage.key(Rt);if(jt.indexOf(De)===0){var Zt=localStorage.getItem(jt);if(Zt&&(Zt=ze.serializer.deserialize(Zt)),Zt=ve(Zt,jt.substring(ht),Nt++),Zt!==void 0)return Zt}}});return d(Be,Ie),Be}function bs(ve,Ie){var Se=this,Be=Se.ready().then(function(){var ze=Se._dbInfo,De;try{De=localStorage.key(ve)}catch{De=null}return De&&(De=De.substring(ze.keyPrefix.length)),De});return d(Be,Ie),Be}function Ya(ve){var Ie=this,Se=Ie.ready().then(function(){for(var Be=Ie._dbInfo,ze=localStorage.length,De=[],ht=0;ht<ze;ht++){var kt=localStorage.key(ht);kt.indexOf(Be.keyPrefix)===0&&De.push(kt.substring(Be.keyPrefix.length))}return De});return d(Se,ve),Se}function Jo(ve){var Ie=this,Se=Ie.keys().then(function(Be){return Be.length});return d(Se,ve),Se}function yh(ve,Ie){var Se=this;ve=p(ve);var Be=Se.ready().then(function(){var ze=Se._dbInfo;localStorage.removeItem(ze.keyPrefix+ve)});return d(Be,Ie),Be}function md(ve,Ie,Se){var Be=this;ve=p(ve);var ze=Be.ready().then(function(){Ie===void 0&&(Ie=null);var De=Ie;return new f(function(ht,kt){var Nt=Be._dbInfo;Nt.serializer.serialize(Ie,function(Rt,jt){if(jt)kt(jt);else try{localStorage.setItem(Nt.keyPrefix+ve,Rt),ht(De)}catch(Zt){(Zt.name==="QuotaExceededError"||Zt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&kt(Zt),kt(Zt)}})})});return d(ze,Se),ze}function mf(ve,Ie){if(Ie=m.apply(this,arguments),ve=typeof ve!="function"&&ve||{},!ve.name){var Se=this.config();ve.name=ve.name||Se.name,ve.storeName=ve.storeName||Se.storeName}var Be=this,ze;return ve.name?ze=new f(function(De){ve.storeName?De(eo(ve,Be._defaultConfig)):De(ve.name+"/")}).then(function(De){for(var ht=localStorage.length-1;ht>=0;ht--){var kt=localStorage.key(ht);kt.indexOf(De)===0&&localStorage.removeItem(kt)}}):ze=f.reject("Invalid arguments"),d(ze,Ie),ze}var gf={_driver:"localStorageWrapper",_initStorage:Ta,_support:Hi(),iterate:Pl,getItem:Hr,setItem:md,removeItem:yh,clear:pd,length:Jo,key:bs,keys:Ya,dropInstance:mf},xc=function(Ie,Se){return Ie===Se||typeof Ie=="number"&&typeof Se=="number"&&isNaN(Ie)&&isNaN(Se)},_c=function(Ie,Se){for(var Be=Ie.length,ze=0;ze<Be;){if(xc(Ie[ze],Se))return!0;ze++}return!1},wc=Array.isArray||function(ve){return Object.prototype.toString.call(ve)==="[object Array]"},Er={},Ec={},xs={INDEXEDDB:Oe,WEBSQL:Xr,LOCALSTORAGE:gf},Ka=[xs.INDEXEDDB._driver,xs.WEBSQL._driver,xs.LOCALSTORAGE._driver],As=["dropInstance"],Nl=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(As),Sc={description:"",driver:Ka.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Zo(ve,Ie){ve[Ie]=function(){var Se=arguments;return ve.ready().then(function(){return ve[Ie].apply(ve,Se)})}}function qi(){for(var ve=1;ve<arguments.length;ve++){var Ie=arguments[ve];if(Ie)for(var Se in Ie)Ie.hasOwnProperty(Se)&&(wc(Ie[Se])?arguments[0][Se]=Ie[Se].slice():arguments[0][Se]=Ie[Se])}return arguments[0]}var ti=function(){function ve(Ie){o(this,ve);for(var Se in xs)if(xs.hasOwnProperty(Se)){var Be=xs[Se],ze=Be._driver;this[Se]=ze,Er[ze]||this.defineDriver(Be)}this._defaultConfig=qi({},Sc),this._config=qi({},this._defaultConfig,Ie),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return ve.prototype.config=function(Se){if((typeof Se>"u"?"undefined":s(Se))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var Be in Se){if(Be==="storeName"&&(Se[Be]=Se[Be].replace(/\W/g,"_")),Be==="version"&&typeof Se[Be]!="number")return new Error("Database version must be a number.");this._config[Be]=Se[Be]}return"driver"in Se&&Se.driver?this.setDriver(this._config.driver):!0}else return typeof Se=="string"?this._config[Se]:this._config},ve.prototype.defineDriver=function(Se,Be,ze){var De=new f(function(ht,kt){try{var Nt=Se._driver,Rt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Se._driver){kt(Rt);return}for(var jt=Nl.concat("_initStorage"),Zt=0,qn=jt.length;Zt<qn;Zt++){var Sn=jt[Zt],lr=!_c(As,Sn);if((lr||Se[Sn])&&typeof Se[Sn]!="function"){kt(Rt);return}}var _n=function(){for(var Ao=function(to){return function(){var Mi=new Error("Method "+to+" is not implemented by the current driver"),ko=f.reject(Mi);return d(ko,arguments[arguments.length-1]),ko}},Dl=0,gd=As.length;Dl<gd;Dl++){var Yu=As[Dl];Se[Yu]||(Se[Yu]=Ao(Yu))}};_n();var br=function(Ao){Er[Nt]&&console.info("Redefining LocalForage driver: "+Nt),Er[Nt]=Se,Ec[Nt]=Ao,ht()};"_support"in Se?Se._support&&typeof Se._support=="function"?Se._support().then(br,kt):br(!!Se._support):br(!0)}catch(ls){kt(ls)}});return h(De,Be,ze),De},ve.prototype.driver=function(){return this._driver||null},ve.prototype.getDriver=function(Se,Be,ze){var De=Er[Se]?f.resolve(Er[Se]):f.reject(new Error("Driver not found."));return h(De,Be,ze),De},ve.prototype.getSerializer=function(Se){var Be=f.resolve(Ei);return h(Be,Se),Be},ve.prototype.ready=function(Se){var Be=this,ze=Be._driverSet.then(function(){return Be._ready===null&&(Be._ready=Be._initDriver()),Be._ready});return h(ze,Se,Se),ze},ve.prototype.setDriver=function(Se,Be,ze){var De=this;wc(Se)||(Se=[Se]);var ht=this._getSupportedDrivers(Se);function kt(){De._config.driver=De.driver()}function Nt(Zt){return De._extend(Zt),kt(),De._ready=De._initStorage(De._config),De._ready}function Rt(Zt){return function(){var qn=0;function Sn(){for(;qn<Zt.length;){var lr=Zt[qn];return qn++,De._dbInfo=null,De._ready=null,De.getDriver(lr).then(Nt).catch(Sn)}kt();var _n=new Error("No available storage method found.");return De._driverSet=f.reject(_n),De._driverSet}return Sn()}}var jt=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=jt.then(function(){var Zt=ht[0];return De._dbInfo=null,De._ready=null,De.getDriver(Zt).then(function(qn){De._driver=qn._driver,kt(),De._wrapLibraryMethodsWithReady(),De._initDriver=Rt(ht)})}).catch(function(){kt();var Zt=new Error("No available storage method found.");return De._driverSet=f.reject(Zt),De._driverSet}),h(this._driverSet,Be,ze),this._driverSet},ve.prototype.supports=function(Se){return!!Ec[Se]},ve.prototype._extend=function(Se){qi(this,Se)},ve.prototype._getSupportedDrivers=function(Se){for(var Be=[],ze=0,De=Se.length;ze<De;ze++){var ht=Se[ze];this.supports(ht)&&Be.push(ht)}return Be},ve.prototype._wrapLibraryMethodsWithReady=function(){for(var Se=0,Be=Nl.length;Se<Be;Se++)Zo(this,Nl[Se])},ve.prototype.createInstance=function(Se){return new ve(Se)},ve}(),rr=new ti;r.exports=rr},{3:3}]},{},[4])(4)})}(y$)),y$.exports}var Wst=qst();const xE=gc(Wst),ll=[];for(let e=0;e<256;++e)ll.push((e+256).toString(16).slice(1));function Gst(e,t=0){return(ll[e[t+0]]+ll[e[t+1]]+ll[e[t+2]]+ll[e[t+3]]+"-"+ll[e[t+4]]+ll[e[t+5]]+"-"+ll[e[t+6]]+ll[e[t+7]]+"-"+ll[e[t+8]]+ll[e[t+9]]+"-"+ll[e[t+10]]+ll[e[t+11]]+ll[e[t+12]]+ll[e[t+13]]+ll[e[t+14]]+ll[e[t+15]]).toLowerCase()}let v$;const Yst=new Uint8Array(16);function Kst(){if(!v$){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");v$=crypto.getRandomValues.bind(crypto)}return v$(Yst)}const Xst=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Hse={randomUUID:Xst};function P8(e,t,n){var i;if(Hse.randomUUID&&!e)return Hse.randomUUID();e=e||{};const r=e.random??((i=e.rng)==null?void 0:i.call(e))??Kst();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Gst(r)}class G_e{constructor(t){Vc(this,"engine");Vc(this,"connected",!1);Vc(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function N8(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function eA(e){return e.participantId!==void 0}class s0 extends G_e{constructor(){super("firebase");Vc(this,"RECAPTCHAV3TOKEN","6Lfbe8IqAAAAAOEYDF0mWB_xkcxWJD0XfCyRaNIi");Vc(this,"firestore");Vc(this,"collectionPrefix","prod-");Vc(this,"studyCollection");Vc(this,"storage");Vc(this,"studyId","");Vc(this,"localForage",xE.createInstance({name:"currentParticipantId"}));Vc(this,"participantData",null);Vc(this,"userManagementData",{});const n=QXe.parse(` 
{
  apiKey: "AIzaSyBNUsuUETpZj6lJwFHGRcMIdy15R8H-TCo",
  authDomain: "patch-labeling-study.firebaseapp.com",
  projectId: "patch-labeling-study",
  storageBucket: "patch-labeling-study.firebasestorage.app",
  messagingSenderId: "742007974424",
  appId: "1:742007974424:web:43f121ed8397dd9f02716d"
}
`),r=hbe(n);this.firestore=Wnt(r,{}),this.storage=Aie();try{zrt(r,{provider:new CY(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await Ynt(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=I8();if(!i.currentUser&&(await Ait(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=jf(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=await this.getCurrentConfigHash(),o=await N8(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this._setCurrentConfigHash(o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(eA(a))return this.participantData=a,a;const l=await N8(JSON.stringify(i)),{currentRow:c,creationIndex:f}=await this.getSequence();return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:f,answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Gs(this.studyCollection,"configHash"),r=await T6(n);return r.exists()?r.data().configHash:null}async _setCurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=Gs(this.studyCollection,"configHash");await Wl(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=$d(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=P8(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAudio(n,r){let i=null;const s=async o=>{i||(i=setTimeout(async()=>{this._pushToFirebaseStorage(`/audio/${this.currentParticipantId}`,r,o.data)},500))};n.addEventListener("dataavailable",s),n.requestData()}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=Gs(this.studyCollection,"sequenceAssignment");await Wl(i,{});const s=jf(i,"sequenceAssignment"),o=Gs(s,this.currentParticipantId),a=d$(s,pse("rejected","==",!0),pse("claimed","==",!1)),u=await G2(a);if(u.docs.length>0){const b=u.docs[0],y=b.data().timestamp;r.dataCollectionEnabled&&(await Wl(b.ref,{claimed:!0}),await Wl(o,{participantId:this.currentParticipantId,timestamp:y,rejected:!1,claimed:!1,completed:null,createdTime:C6()}))}else r.dataCollectionEnabled&&await Wl(o,{participantId:this.currentParticipantId,timestamp:C6(),rejected:!1,claimed:!1,completed:null,createdTime:C6()});const l=d$(s,mse("timestamp","asc")),f=(await G2(l)).docs.map(b=>b.data()),d=f.filter(b=>!b.rejected).findIndex(b=>b.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");const g=f.sort((b,y)=>b.createdTime-y.createdTime).findIndex(b=>b.participantId===this.currentParticipantId)+1;return{currentRow:p,creationIndex:g}}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=$d(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await ZC(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");eA(a)&&i.push(a)});return await Promise.all(s),i}async getAudio(n,r){const i=Aie(),s=await b6($d(i,`${this.collectionPrefix}${this.studyId}/audio/${r}_${n}`));return new Promise(a=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const l=u.response,c=URL.createObjectURL(l);a(c)},u.open("GET",s),u.send()})}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null&&!n)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return eA(r)?r:null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=P8();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);if(this.participantData.completed)return!0;this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData);const r=Gs(this.studyCollection,"sequenceAssignment"),i=jf(r,"sequenceAssignment"),s=Gs(i,this.currentParticipantId);return await vse(s,{completed:C6()}),!0}async getUserManagementData(n){if(Object.keys(this.userManagementData).length===0){const r=jf(this.firestore,"user-management"),i=await G2(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));this.userManagementData=s}return n in this.userManagementData?this.userManagementData[n]:null}async validateUser(n,r=!1){if(r&&(this.userManagementData={}),n!=null&&n.user){const i=await this.getUserManagementData("authentication");if(i!=null&&i.isEnabled){const s=await this.getUserManagementData("adminUsers");if(s&&s.adminUsersList){const o=Object.fromEntries(s.adminUsersList.map(u=>[u.email,u.uid]));if(n.user.email&&(o[n.user.email]===n.user.uid||o[n.user.email]===null)){if(n.user.email&&o[n.user.email]===null){const u=s.adminUsersList.find(l=>l.email===n.user.email);u&&(u.uid=n.user.uid),await Wl(Gs(this.firestore,"user-management","adminUsers"),{adminUsersList:s.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Wl(Gs(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Wl(Gs(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Wl(Gs(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Wl(Gs(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=$d(this.storage,`${this.collectionPrefix}${n}/participants`),i=await ZC(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");eA(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r,i){const s=jf(this.firestore,`${this.collectionPrefix}${n}`),o=$d(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!a||!eA(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(o,"participantData",a);const u=Gs(s,"sequenceAssignment"),l=jf(u,"sequenceAssignment"),c=Gs(l,r);await vse(c,{rejected:!0})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const s=Gs(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await Wl(s,{[r]:i},{merge:!0})}async getModes(n){const r=Gs(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await T6(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await Wl(r,s),s}async getParticipantsStatusCounts(n){const r=jf(this.firestore,`${this.collectionPrefix}${n}`),i=Gs(r,"sequenceAssignment"),s=jf(i,"sequenceAssignment"),o=d$(s,mse("timestamp","asc")),u=(await G2(o)).docs.map(p=>p.data()),l=u.filter(p=>p.completed&&!p.rejected).length,c=u.filter(p=>p.rejected).length,f=u.length-l-c,d=u.length>0?u[0].timestamp:null,h=u.length>0?u.at(-1).timestamp:null;return{completed:l,rejected:c,inProgress:f,minTime:d,maxTime:h}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=Gs(this.firestore,"metadata","collections"),i=await T6(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=Gs(this.firestore,"metadata","collections");await Wl(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=Gs(this.firestore,"metadata","collections");return await Wl(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=Gs(this.firestore,"metadata","collections"),i=await T6(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await Wl(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=$d(this.storage,n),s=(await ZC(r)).items.map(o=>Cie(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=$d(this.storage,n),o=(await ZC(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=$d(this.storage,n),s=$d(this.storage,r),o=await b6(i),u=await(await fetch(o)).blob();await v6(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=jf(this.firestore,n),s=Gs(i,"sequenceAssignment"),o=jf(s,"sequenceAssignment"),a=jf(this.firestore,r),u=Gs(a,"sequenceAssignment");await Wl(u,{});const l=jf(u,"sequenceAssignment"),c=await G2(o),f=bse(this.firestore);c.docs.forEach(d=>{const h=Gs(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=jf(this.firestore,n),i=Gs(r,"sequenceAssignment"),s=jf(i,"sequenceAssignment"),o=await G2(s),a=bse(this.firestore);o.forEach(u=>{const l=Gs(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=$d(this.storage,n);return(await ZC(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=$d(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await b6(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await b6(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){const s=$d(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(i instanceof Blob)await v6(s,i);else if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await v6(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await v6(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=$d(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await Cie(i)}}const Y_e=U.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),UT=()=>U.useContext(Y_e);function Qst({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=U.useState(t),[o,a]=U.useState(!1),{storageEngine:u}=Yo(),l=async()=>{const h=I8();try{await Oit(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h,!0):!1;U.useEffect(()=>{s(t);let h;if(u instanceof s0)try{h=I8()}catch{console.warn("No firebase store.")}const p=async b=>{if(s(y=>({user:y.user,isAdmin:y.isAdmin,determiningStatus:!0,adminVerification:!1})),b){const y={user:b,determiningStatus:!1,isAdmin:!1,adminVerification:!0},x=await f(y);y.isAdmin=!!x,s(y)}else l()},g=(async()=>{if(u instanceof s0){const b=await(u==null?void 0:u.getUserManagementData("authentication"));if(b!=null&&b.isEnabled){const y=Dit(h,async x=>await p(x));return()=>y()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(b=>b())}},[u,o]);const d=U.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return k.jsx(Y_e.Provider,{value:d,children:i.determiningStatus?k.jsx(oh,{visible:!0}):e})}const Jst="https://github.com/revisit-studies/study/tree/main/public/";function Zst({configName:e,config:t,url:n}){const{storageEngine:r}=Yo(),[i,s]=U.useState(null);U.useEffect(()=>{r&&r.getParticipantsStatusCounts(e).then(f=>{s(f)})},[e,r]);const{minTime:o,maxTime:a}=U.useMemo(()=>{if(!i)return{minTime:null,maxTime:null};if(!i.minTime||!i.maxTime)return{minTime:null,maxTime:null};const f=typeof i.minTime=="number"?new Date(i.minTime):i.minTime.toDate(),d=typeof i.maxTime=="number"?new Date(i.maxTime):i.maxTime.toDate();return{minTime:f.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"}),maxTime:d.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}},[i]),[u,l]=U.useState(null);U.useEffect(()=>{r&&r.getModes(e).then(f=>{l(f)})},[e,r]);const c=U.useMemo(()=>u?u.dataCollectionEnabled?i&&(i.inProgress>0||i.completed>0)?"Collecting Data":"Ready to Collect Data":"Data Collection Disabled":"Unknown",[u,i]);return k.jsx(bT,{shadow:"sm",radius:"md",my:"sm",withBorder:!0,children:t.errors.length>0?k.jsxs(k.Fragment,{children:[k.jsx(At,{fw:"bold",children:e}),k.jsxs(An,{align:"center",direction:"row",children:[k.jsx(lk,{color:"red"}),k.jsx(At,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),k.jsx(AP,{issues:t.errors,type:"error"}),t.warnings.length>0&&k.jsxs(k.Fragment,{children:[k.jsxs(An,{align:"center",direction:"row",children:[k.jsx(lk,{color:"orange"}),k.jsx(At,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),k.jsx(AP,{issues:t.warnings,type:"warning"})]})]}):k.jsxs(k.Fragment,{children:[k.jsx(An,{direction:"row",justify:"space-between",children:k.jsx(At,{fw:"bold",children:t.studyMetadata.title})}),k.jsxs(At,{c:"dimmed",children:[k.jsx(At,{span:!0,fw:500,children:"Authors: "}),t.studyMetadata.authors.join(", ")]}),k.jsx(At,{c:"dimmed",children:t.studyMetadata.description}),k.jsx(At,{c:"dimmed",ta:"right",style:{paddingRight:5},children:k.jsxs(kw,{target:"_blank",onClick:f=>f.stopPropagation(),href:`${Jst}${n}`,children:["View source:"," ",n,k.jsx(k1e,{style:{width:ot(18),height:ot(18),marginLeft:ot(2),marginBottom:ot(-3)}})]})}),t.warnings.length>0&&k.jsxs(k.Fragment,{children:[k.jsxs(An,{align:"center",direction:"row",children:[k.jsx(lk,{color:"orange"}),k.jsx(At,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),k.jsx(AP,{issues:t.warnings,type:"warning"})]}),k.jsx(Zd,{my:"md"}),k.jsxs(An,{direction:"row",gap:"sm",children:[k.jsxs(At,{fw:"bold",size:"sm",opacity:.7,children:["Study Status:"," ",c]}),i&&k.jsx(VXe,{completed:i.completed,inProgress:i.inProgress,rejected:i.rejected})]}),o&&a&&k.jsxs(At,{c:"dimmed",mt:4,children:["Activity:"," ",o," ",""," ",a]}),k.jsxs(An,{direction:"row",align:"end",gap:"sm",mt:"md",children:[k.jsx(Nn,{leftSection:k.jsx(A1e,{}),style:{marginLeft:"auto"},variant:"default",component:"a",href:`${Uu}analysis/stats/${n}`,children:"Analyze & Manage Study"}),k.jsx(Nn,{leftSection:k.jsx(R1e,{}),component:"a",href:`${Uu}${n}`,children:"Go to Study"})]})]})},e)}function Y2({configNames:e,studyConfigs:t}){return e.map(n=>{const r=t[n];if(!r)return null;const i=O1e(n);return k.jsx(Zst,{configName:n,config:r,url:i},n)})}function eot({globalConfig:e,studyConfigs:t}){const{storageEngine:n}=Yo(),{configsList:r}=e,i=r.filter(b=>b.startsWith("demo-")),s=r.filter(b=>b.startsWith("tutorial-")),o=r.filter(b=>b.startsWith("example-")),a=r.filter(b=>b.startsWith("test-")),u=r.filter(b=>b.startsWith("library-")),l=U.useMemo(()=>r.filter(b=>!b.startsWith("demo-")&&!b.startsWith("tutorial-")&&!b.startsWith("example-")&&!b.startsWith("test-")&&!b.startsWith("library-")),[r]),[c,f]=U.useState({});U.useEffect(()=>{async function b(){const y={};await Promise.all(l.map(async x=>{if(n instanceof s0){const w=await n.getModes(x);y[x]=w.analyticsInterfacePubliclyAccessible}})),f(y)}b()},[l,n]);const{user:d}=UT(),h=U.useMemo(()=>l.filter(b=>c[b]||d.isAdmin),[l,c,d]),[p]=D1(),m=U.useMemo(()=>p.get("tab")||(h.length>0?"Others":"Demos"),[h.length,p]),g=F0();return k.jsx(hs.Main,{children:k.jsxs(c1,{size:"sm",px:0,children:[k.jsx(qb,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Uu}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),k.jsxs(ci,{variant:"outline",defaultValue:l.length>0?"Others":"Demos",value:m,onChange:b=>g(`/?tab=${b}`),children:[k.jsxs(ci.List,{children:[h.length>0&&k.jsx(ci.Tab,{value:"Others",children:"Your Studies"}),k.jsx(ci.Tab,{value:"Demos",children:"Demo Studies"}),k.jsx(ci.Tab,{value:"Examples",children:"Example Studies"}),k.jsx(ci.Tab,{value:"Tutorials",children:"Tutorials"}),k.jsx(ci.Tab,{value:"Tests",children:"Tests"}),k.jsx(ci.Tab,{value:"Libraries",children:"Libraries"})]}),h.length>0&&k.jsx(ci.Panel,{value:"Others",children:k.jsx(Y2,{configNames:h,studyConfigs:t})}),k.jsxs(ci.Panel,{value:"Demos",children:[k.jsx(At,{c:"dimmed",mt:"sm",children:"These studies show off individual features of the reVISit platform."}),k.jsx(Y2,{configNames:i,studyConfigs:t})]}),k.jsxs(ci.Panel,{value:"Examples",children:[k.jsx(At,{c:"dimmed",mt:"sm",children:"These are full studies that demonstrate the capabilities of the reVISit platform."}),k.jsx(Y2,{configNames:o,studyConfigs:t})]}),k.jsxs(ci.Panel,{value:"Tutorials",children:[k.jsx(At,{c:"dimmed",mt:"sm",children:"These studies are designed to help you learn how to use the reVISit platform."}),k.jsx(Y2,{configNames:s,studyConfigs:t})]}),k.jsxs(ci.Panel,{value:"Tests",children:[k.jsx(At,{c:"dimmed",mt:"sm",children:"These studies exist for testing purposes."}),k.jsx(Y2,{configNames:a,studyConfigs:t})]}),k.jsxs(ci.Panel,{value:"Libraries",children:[k.jsx(At,{c:"dimmed",mt:"sm",children:"Here you can see an example of every library that we publish."}),k.jsx(Y2,{configNames:u,studyConfigs:t})]})]})]})})}var b$={exports:{}},x$={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qse;function tot(){if(qse)return x$;qse=1;var e=A1();function t(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,o=e.useMemo,a=e.useDebugValue;return x$.useSyncExternalStoreWithSelector=function(u,l,c,f,d){var h=i(null);if(h.current===null){var p={hasValue:!1,value:null};h.current=p}else p=h.current;h=o(function(){function g(S){if(!b){if(b=!0,y=S,S=f(S),d!==void 0&&p.hasValue){var C=p.value;if(d(C,S))return x=C}return x=S}if(C=x,n(y,S))return C;var R=f(S);return d!==void 0&&d(C,R)?(y=S,C):(y=S,x=R)}var b=!1,y,x,w=c===void 0?null:c;return[function(){return g(l())},w===null?void 0:function(){return g(w())}]},[l,c,f,d]);var m=r(u,h[0],h[1]);return s(function(){p.hasValue=!0,p.value=m},[m]),a(m),m},x$}var Wse;function not(){return Wse||(Wse=1,b$.exports=tot()),b$.exports}var rot=not();function iot(e){e()}function sot(){let e=null,t=null;return{clear(){e=null,t=null},notify(){iot(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Gse={notify(){},get:()=>[]};function oot(e,t){let n,r=Gse,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let b=!1;return()=>{b||(b=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=sot())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Gse)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var aot=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uot=aot(),lot=()=>typeof navigator<"u"&&navigator.product==="ReactNative",cot=lot(),fot=()=>uot||cot?U.useLayoutEffect:U.useEffect,dot=fot(),_$=Symbol.for("react-redux-context"),w$=typeof globalThis<"u"?globalThis:{};function hot(){if(!U.createContext)return{};const e=w$[_$]??(w$[_$]=new Map);let t=e.get(U.createContext);return t||(t=U.createContext(null),e.set(U.createContext,t)),t}var gb=hot();function pot(e){const{children:t,context:n,serverState:r,store:i}=e,s=U.useMemo(()=>{const u=oot(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),o=U.useMemo(()=>i.getState(),[i]);dot(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,o]);const a=n||gb;return U.createElement(a.Provider,{value:s},t)}var mot=pot;function LY(e=gb){return function(){return U.useContext(e)}}var K_e=LY();function X_e(e=gb){const t=e===gb?K_e:LY(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var got=X_e();function yot(e=gb){const t=e===gb?got:X_e(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Q_e=yot(),vot=(e,t)=>e===t;function bot(e=gb){const t=e===gb?K_e:LY(e),n=(r,i={})=>{const{equalityFn:s=vot}=typeof i=="function"?{equalityFn:i}:i,o=t(),{store:a,subscription:u,getServerState:l}=o;U.useRef(!0);const c=U.useCallback({[r.name](d){return r(d)}}[r.name],[r]),f=rot.useSyncExternalStoreWithSelector(u.addNestedSub,a.getState,l||a.getState,c,s);return U.useDebugValue(f),f};return Object.assign(n,{withTypes:()=>n}),n}var xot=bot();function fl(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var _ot=typeof Symbol=="function"&&Symbol.observable||"@@observable",Yse=_ot,E$=()=>Math.random().toString(36).substring(7).split("").join("."),wot={INIT:`@@redux/INIT${E$()}`,REPLACE:`@@redux/REPLACE${E$()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${E$()}`},D8=wot;function FY(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function J_e(e,t,n){if(typeof e!="function")throw new Error(fl(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(fl(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(fl(1));return n(J_e)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,b)=>{o.set(b,g)}))}function c(){if(u)throw new Error(fl(3));return i}function f(g){if(typeof g!="function")throw new Error(fl(4));if(u)throw new Error(fl(5));let b=!0;l();const y=a++;return o.set(y,g),function(){if(b){if(u)throw new Error(fl(6));b=!1,l(),o.delete(y),s=null}}}function d(g){if(!FY(g))throw new Error(fl(7));if(typeof g.type>"u")throw new Error(fl(8));if(typeof g.type!="string")throw new Error(fl(17));if(u)throw new Error(fl(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(y=>{y()}),g}function h(g){if(typeof g!="function")throw new Error(fl(10));r=g,d({type:D8.REPLACE})}function p(){const g=f;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(fl(11));function y(){const w=b;w.next&&w.next(c())}return y(),{unsubscribe:g(y)}},[Yse](){return this}}}return d({type:D8.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[Yse]:p}}function Eot(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:D8.INIT})>"u")throw new Error(fl(12));if(typeof n(void 0,{type:D8.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(fl(13))})}function Sot(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{Eot(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(fl(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function O8(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Tot(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(fl(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=O8(...a)(i.dispatch),{...i,dispatch:s}}}function Cot(e){return FY(e)&&"type"in e&&typeof e.type=="string"}var Z_e=Symbol.for("immer-nothing"),Kse=Symbol.for("immer-draftable"),ah=Symbol.for("immer-state");function a0(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ES=Object.getPrototypeOf;function Y_(e){return!!e&&!!e[ah]}function y1(e){var t;return e?ewe(e)||Array.isArray(e)||!!e[Kse]||!!((t=e.constructor)!=null&&t[Kse])||Q9(e)||J9(e):!1}var Aot=Object.prototype.constructor.toString();function ewe(e){if(!e||typeof e!="object")return!1;const t=ES(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Aot}function M8(e,t){X9(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function X9(e){const t=e[ah];return t?t.type_:Array.isArray(e)?1:Q9(e)?2:J9(e)?3:0}function az(e,t){return X9(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function twe(e,t,n){const r=X9(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function kot(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Q9(e){return e instanceof Map}function J9(e){return e instanceof Set}function s_(e){return e.copy_||e.base_}function uz(e,t){if(Q9(e))return new Map(e);if(J9(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=ewe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ah];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(ES(e),r)}else{const r=ES(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function $Y(e,t=!1){return Z9(e)||Y_(e)||!y1(e)||(X9(e)>1&&(e.set=e.add=e.clear=e.delete=Rot),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>$Y(r,!0))),e}function Rot(){a0(2)}function Z9(e){return Object.isFrozen(e)}var Iot={};function K_(e){const t=Iot[e];return t||a0(0,e),t}var d4;function nwe(){return d4}function Pot(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Xse(e,t){t&&(K_("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function lz(e){cz(e),e.drafts_.forEach(Not),e.drafts_=null}function cz(e){e===d4&&(d4=e.parent_)}function Qse(e){return d4=Pot(d4,e)}function Not(e){const t=e[ah];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Jse(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ah].modified_&&(lz(t),a0(4)),y1(e)&&(e=L8(t,e),t.parent_||F8(t,e)),t.patches_&&K_("Patches").generateReplacementPatches_(n[ah].base_,e,t.patches_,t.inversePatches_)):e=L8(t,n,[]),lz(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Z_e?e:void 0}function L8(e,t,n){if(Z9(t))return t;const r=t[ah];if(!r)return M8(t,(i,s)=>Zse(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return F8(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),M8(s,(a,u)=>Zse(e,r,i,a,u,n,o)),F8(e,i,!1),n&&e.patches_&&K_("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Zse(e,t,n,r,i,s,o){if(Y_(i)){const a=s&&t&&t.type_!==3&&!az(t.assigned_,r)?s.concat(r):void 0,u=L8(e,i,a);if(twe(n,r,u),Y_(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(y1(i)&&!Z9(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;L8(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&F8(e,i)}}function F8(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&$Y(t,n)}function Dot(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:nwe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=BY;n&&(i=[r],s=h4);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var BY={get(e,t){if(t===ah)return e;const n=s_(e);if(!az(n,t))return Oot(e,n,t);const r=n[t];return e.finalized_||!y1(r)?r:r===S$(e.base_,t)?(T$(e),e.copy_[t]=dz(r,e)):r},has(e,t){return t in s_(e)},ownKeys(e){return Reflect.ownKeys(s_(e))},set(e,t,n){const r=rwe(s_(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=S$(s_(e),t),s=i==null?void 0:i[ah];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(kot(n,i)&&(n!==void 0||az(e.base_,t)))return!0;T$(e),fz(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return S$(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,T$(e),fz(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=s_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){a0(11)},getPrototypeOf(e){return ES(e.base_)},setPrototypeOf(){a0(12)}},h4={};M8(BY,(e,t)=>{h4[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});h4.deleteProperty=function(e,t){return h4.set.call(this,e,t,void 0)};h4.set=function(e,t,n){return BY.set.call(this,e[0],t,n,e[0])};function S$(e,t){const n=e[ah];return(n?s_(n):e)[t]}function Oot(e,t,n){var i;const r=rwe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function rwe(e,t){if(!(t in e))return;let n=ES(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=ES(n)}}function fz(e){e.modified_||(e.modified_=!0,e.parent_&&fz(e.parent_))}function T$(e){e.copy_||(e.copy_=uz(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Mot=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&a0(6),r!==void 0&&typeof r!="function"&&a0(7);let i;if(y1(t)){const s=Qse(this),o=dz(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?lz(s):cz(s)}return Xse(s,r),Jse(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===Z_e&&(i=void 0),this.autoFreeze_&&$Y(i,!0),r){const s=[],o=[];K_("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else a0(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){y1(e)||a0(8),Y_(e)&&(e=Lot(e));const t=Qse(this),n=dz(e,void 0);return n[ah].isManual_=!0,cz(t),n}finishDraft(e,t){const n=e&&e[ah];(!n||!n.isManual_)&&a0(9);const{scope_:r}=n;return Xse(r,t),Jse(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=K_("Patches").applyPatches_;return Y_(e)?r(e,t):this.produce(e,i=>r(i,t))}};function dz(e,t){const n=Q9(e)?K_("MapSet").proxyMap_(e,t):J9(e)?K_("MapSet").proxySet_(e,t):Dot(e,t);return(t?t.scope_:nwe()).drafts_.push(n),n}function Lot(e){return Y_(e)||a0(10,e),iwe(e)}function iwe(e){if(!y1(e)||Z9(e))return e;const t=e[ah];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=uz(e,t.scope_.immer_.useStrictShallowCopy_)}else n=uz(e,!0);return M8(n,(r,i)=>{twe(n,r,iwe(i))}),t&&(t.finalized_=!1),n}var uh=new Mot,swe=uh.produce;uh.produceWithPatches.bind(uh);uh.setAutoFreeze.bind(uh);uh.setUseStrictShallowCopy.bind(uh);uh.applyPatches.bind(uh);uh.createDraft.bind(uh);uh.finishDraft.bind(uh);function Fot(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function $ot(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Bot(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var eoe=e=>Array.isArray(e)?e:[e];function jot(e){const t=Array.isArray(e[0])?e[0]:e;return Bot(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Uot(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var zot=class{constructor(e){this.value=e}deref(){return this.value}},Vot=typeof WeakRef<"u"?WeakRef:zot,Hot=0,toe=1;function I6(){return{s:Hot,v:void 0,o:null,p:null}}function owe(e,t={}){let n=I6();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=I6(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=I6(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===toe)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Vot(c):c}return l.s=toe,l.v=c,c}return o.clearCache=()=>{n=I6(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function qot(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),Fot(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=owe,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=eoe(d),b=eoe(p),y=jot(i),x=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const C=Uot(y,arguments);return a=x.apply(null,C),a},...b);return Object.assign(w,{resultFunc:l,memoizedResultFunc:x,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var awe=qot(owe),Wot=Object.assign((e,t=awe)=>{$ot(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>Wot});function uwe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var Got=uwe(),Yot=uwe,Kot=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?O8:O8.apply(null,arguments)};function noe(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Qy(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Cot(r)&&r.type===e,n}var lwe=class k3 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,k3.prototype)}static get[Symbol.species](){return k3}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new k3(...t[0].concat(this)):new k3(...t.concat(this))}};function roe(e){return y1(e)?swe(e,()=>{}):e}function ioe(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Xot(e){return typeof e=="boolean"}var Qot=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new lwe;return n&&(Xot(n)?o.push(Got):o.push(Yot(n.extraArgument))),o},Jot="RTK_autoBatch",soe=e=>t=>{setTimeout(t,e)},Zot=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:soe(10):e.type==="callback"?e.queueNotification:soe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Jot]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},eat=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new lwe(e);return r&&i.push(Zot(typeof r=="object"?r:void 0)),i};function tat(e){const t=Qot(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e;let a;if(typeof n=="function")a=n;else if(FY(n))a=Sot(n);else throw new Error(Qy(1));let u;typeof r=="function"?u=r(t):u=t();let l=O8;i&&(l=Kot({trace:!1,...typeof i=="object"&&i}));const c=Tot(...u),f=eat(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return J_e(a,s,h)}function cwe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Qy(28));if(a in t)throw new Error(Qy(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function nat(e){return typeof e=="function"}function rat(e,t){let[n,r,i]=cwe(t),s;if(nat(e))s=()=>roe(e());else{const a=roe(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(Y_(c)){const h=f(c,u);return h===void 0?c:h}else{if(y1(c))return swe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return c},a)}return o.getInitialState=s,o}var iat=Symbol.for("rtk-slice-createasyncthunk");function sat(e,t){return`${e}/${t}`}function oat({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[iat];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Qy(11));const a=(typeof i.reducers=="function"?i.reducers(lat()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(x,w){const S=typeof x=="string"?x:x.type;if(!S)throw new Error(Qy(12));if(S in l.sliceCaseReducersByType)throw new Error(Qy(13));return l.sliceCaseReducersByType[S]=w,c},addMatcher(x,w){return l.sliceMatchers.push({matcher:x,reducer:w}),c},exposeAction(x,w){return l.actionCreators[x]=w,c},exposeCaseReducer(x,w){return l.sliceCaseReducersByName[x]=w,c}};u.forEach(x=>{const w=a[x],S={reducerName:x,type:sat(s,x),createNotation:typeof i.reducers=="function"};fat(w)?hat(S,w,c,t):cat(S,w,c)});function f(){const[x={},w=[],S=void 0]=typeof i.extraReducers=="function"?cwe(i.extraReducers):[i.extraReducers],C={...x,...l.sliceCaseReducersByType};return rat(i.initialState,R=>{for(let I in C)R.addCase(I,C[I]);for(let I of l.sliceMatchers)R.addMatcher(I.matcher,I.reducer);for(let I of w)R.addMatcher(I.matcher,I.reducer);S&&R.addDefaultCase(S)})}const d=x=>x,h=new Map;let p;function m(x,w){return p||(p=f()),p(x,w)}function g(){return p||(p=f()),p.getInitialState()}function b(x,w=!1){function S(R){let I=R[x];return typeof I>"u"&&w&&(I=g()),I}function C(R=d){const I=ioe(h,w,()=>new WeakMap);return ioe(I,R,()=>{const O={};for(const[M,L]of Object.entries(i.selectors??{}))O[M]=aat(L,R,g,w);return O})}return{reducerPath:x,getSelectors:C,get selectors(){return C(S)},selectSlice:S}}const y={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...b(o),injectInto(x,{reducerPath:w,...S}={}){const C=w??o;return x.inject({reducerPath:C,reducer:m},S),{...y,...b(C,!0)}}};return y}}function aat(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var uat=oat();function lat(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function cat({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!dat(r))throw new Error(Qy(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?noe(e,o):noe(e))}function fat(e){return e._reducerDefinitionType==="asyncThunk"}function dat(e){return e._reducerDefinitionType==="reducerWithPrepare"}function hat({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Qy(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||P6,pending:a||P6,rejected:u||P6,settled:l||P6})}function P6(){}function Qy(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function k0(e){return e.components.flatMap(t=>typeof t=="string"?t:k0(t))}function fwe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:fwe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function dwe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+k0(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+k0(e).length-1}];r+=1}else{const o=dwe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function jY(e,t){const n=dwe(e,t,0);return typeof n=="number"?null:n}function hwe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=hwe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function pat(e,t){const n=hwe(e,t,0);return n.found?n.distance:-1}function pwe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...pwe(i,`${t}-${s}`))}),n}function UY(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>UY(n,`${t}-${r}`))}}async function mat(e,t,n,r,i,s,o){const a=k0(n),u=Object.fromEntries(a.filter(p=>p!=="end").map((p,m)=>[`${p}_${m}`,{answer:{},incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[],timedOut:!1,helpButtonClickedCount:0}])),l=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),c=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),f={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:u,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?c:l,reactiveAnswers:{},reactiveProvenance:null,otherTexts:{},metadata:r,analysisProvState:null,analysisIsPlaying:!1,analysisHasAudio:!1,analysisHasProvenance:!1,modes:s,matrixAnswers:{},participantId:o},d=uat({name:"storeSlice",initialState:f,reducers:{setConfig(p,m){p.config=m.payload},setIsRecording(p,m){p.isRecording=m.payload},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,m)=>{p.alertModal=m.payload},setreactiveAnswers:(p,m)=>{p.reactiveAnswers=m.payload},setreactiveProvenance:(p,m)=>{p.reactiveProvenance=m.payload},setOtherText:(p,m)=>{p.otherTexts[m.payload.key]=m.payload.value},resetOtherText:p=>{p.otherTexts={}},saveAnalysisState(p,{payload:m}){p.analysisProvState=m},setAnalysisIsPlaying(p,{payload:m}){p.analysisIsPlaying=m},setAnalysisHasAudio(p,{payload:m}){p.analysisHasAudio=m},setAnalysisHasProvenance(p,{payload:m}){p.analysisHasProvenance=m},setMatrixAnswersRadio:(p,m)=>{if(m.payload){const{responseId:g,questionKey:b,val:y}=m.payload;p.matrixAnswers={...p.matrixAnswers,[g]:{...p.matrixAnswers[g],[b]:y}}}else p.matrixAnswers={}},setMatrixAnswersCheckbox:(p,m)=>{var g;if(m.payload){const{responseId:b,questionKey:y,value:x,isChecked:w,choiceOptions:S}=m.payload,C=((g=p.matrixAnswers[b])==null?void 0:g[y])??"";let R="";w?C.length>0?R=[...C.split("|"),x].sort((I,O)=>S.map(M=>M.value).indexOf(I)-S.map(M=>M.value).indexOf(O)).join("|"):R=`${x}`:R=C.split("|").filter(I=>I!==x).join("|"),p.matrixAnswers={...p.matrixAnswers,[b]:{...p.matrixAnswers[b],[y]:R}}}else p.matrixAnswers={}},updateResponseBlockValidation:(p,{payload:m})=>{if(p.trialValidation[m.identifier]||(p.trialValidation[m.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),Object.keys(m.values).length>0){const g=p.trialValidation[m.identifier][m.location].values;p.trialValidation[m.identifier][m.location]={valid:m.status,values:{...g,...m.values}}}m.provenanceGraph&&(p.trialValidation[m.identifier].provenanceGraph=m.provenanceGraph)},saveTrialAnswer(p,{payload:m}){const{identifier:g,answer:b,startTime:y,endTime:x,provenanceGraph:w,windowEvents:S,timedOut:C,incorrectAnswers:R,helpButtonClickedCount:I}=m;p.answers[g]={incorrectAnswers:R,answer:b,startTime:y,endTime:x,provenanceGraph:w,windowEvents:S,timedOut:C,helpButtonClickedCount:I}},incrementHelpCounter(p,{payload:m}){const{identifier:g}=m;p.answers[g].helpButtonClickedCount+=1},saveIncorrectAnswer(p,{payload:m}){const{identifier:g,answer:b,question:y}=m;p.answers[y].incorrectAnswers||(p.answers[y].incorrectAnswers={}),p.answers[y].incorrectAnswers[g]||(p.answers[y].incorrectAnswers[g]={id:g,value:[]}),p.answers[y].incorrectAnswers[g].value.push(b)}}});return{store:tat({reducer:d.reducer,preloadedState:f}),actions:d.actions}}const mwe=U.createContext(null);function Al(){return U.useContext(mwe).actions}const bc=Q_e,Ai=xot;function gat(e){return Ai(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const yat=awe(e=>e.sequence,e=>k0(e));function zY(){return Ai(yat)}var $P={exports:{}},BP={exports:{}},vat=BP.exports,ooe;function mi(){return ooe||(ooe=1,function(e,t){(function(n,r){e.exports=r()})(vat,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof ya<"u"&&ya.crypto&&(s=ya.crypto),!s&&typeof A3=="function")try{s=ibe}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function y(){}return function(x){var w;return y.prototype=x,w=new y,y.prototype=null,w}}(),u={},l=u.lib={},c=l.Base=function(){return{extend:function(y){var x=a(this);return y&&x.mixIn(y),(!x.hasOwnProperty("init")||this.init===x.init)&&(x.init=function(){x.$super.init.apply(this,arguments)}),x.init.prototype=x,x.$super=this,x},create:function(){var y=this.extend();return y.init.apply(y,arguments),y},init:function(){},mixIn:function(y){for(var x in y)y.hasOwnProperty(x)&&(this[x]=y[x]);y.hasOwnProperty("toString")&&(this.toString=y.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=c.extend({init:function(y,x){y=this.words=y||[],x!=i?this.sigBytes=x:this.sigBytes=y.length*4},toString:function(y){return(y||h).stringify(this)},concat:function(y){var x=this.words,w=y.words,S=this.sigBytes,C=y.sigBytes;if(this.clamp(),S%4)for(var R=0;R<C;R++){var I=w[R>>>2]>>>24-R%4*8&255;x[S+R>>>2]|=I<<24-(S+R)%4*8}else for(var O=0;O<C;O+=4)x[S+O>>>2]=w[O>>>2];return this.sigBytes+=C,this},clamp:function(){var y=this.words,x=this.sigBytes;y[x>>>2]&=4294967295<<32-x%4*8,y.length=r.ceil(x/4)},clone:function(){var y=c.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var x=[],w=0;w<y;w+=4)x.push(o());return new f.init(x,y)}}),d=u.enc={},h=d.Hex={stringify:function(y){for(var x=y.words,w=y.sigBytes,S=[],C=0;C<w;C++){var R=x[C>>>2]>>>24-C%4*8&255;S.push((R>>>4).toString(16)),S.push((R&15).toString(16))}return S.join("")},parse:function(y){for(var x=y.length,w=[],S=0;S<x;S+=2)w[S>>>3]|=parseInt(y.substr(S,2),16)<<24-S%8*4;return new f.init(w,x/2)}},p=d.Latin1={stringify:function(y){for(var x=y.words,w=y.sigBytes,S=[],C=0;C<w;C++){var R=x[C>>>2]>>>24-C%4*8&255;S.push(String.fromCharCode(R))}return S.join("")},parse:function(y){for(var x=y.length,w=[],S=0;S<x;S++)w[S>>>2]|=(y.charCodeAt(S)&255)<<24-S%4*8;return new f.init(w,x)}},m=d.Utf8={stringify:function(y){try{return decodeURIComponent(escape(p.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return p.parse(unescape(encodeURIComponent(y)))}},g=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=m.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var x,w=this._data,S=w.words,C=w.sigBytes,R=this.blockSize,I=R*4,O=C/I;y?O=r.ceil(O):O=r.max((O|0)-this._minBufferSize,0);var M=O*R,L=r.min(M*4,C);if(M){for(var H=0;H<M;H+=R)this._doProcessBlock(S,H);x=S.splice(0,M),w.sigBytes-=L}return new f.init(x,L)},clone:function(){var y=c.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0});l.Hasher=g.extend({cfg:c.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){y&&this._append(y);var x=this._doFinalize();return x},blockSize:16,_createHelper:function(y){return function(x,w){return new y.init(w).finalize(x)}},_createHmacHelper:function(y){return function(x,w){return new b.HMAC.init(y,w).finalize(x)}}});var b=u.algo={};return u}(Math);return n})}(BP)),BP.exports}var jP={exports:{}},bat=jP.exports,aoe;function eM(){return aoe||(aoe=1,function(e,t){(function(n,r){e.exports=r(mi())})(bat,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=i.x64={};u.Word=o.extend({init:function(l,c){this.high=l,this.low=c}}),u.WordArray=o.extend({init:function(l,c){l=this.words=l||[],c!=r?this.sigBytes=c:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,c=l.length,f=[],d=0;d<c;d++){var h=l[d];f.push(h.high),f.push(h.low)}return a.create(f,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),c=l.words=this.words.slice(0),f=c.length,d=0;d<f;d++)c[d]=c[d].clone();return l}})}(),n})}(jP)),jP.exports}var UP={exports:{}},xat=UP.exports,uoe;function _at(){return uoe||(uoe=1,function(e,t){(function(n,r){e.exports=r(mi())})(xat,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var l=u.byteLength,c=[],f=0;f<l;f++)c[f>>>2]|=u[f]<<24-f%4*8;o.call(this,c,l)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(UP)),UP.exports}var zP={exports:{}},wat=zP.exports,loe;function Eat(){return loe||(loe=1,function(e,t){(function(n,r){e.exports=r(mi())})(wat,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=l[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=u.charCodeAt(f)<<16-f%2*16;return s.create(c,l*2)}},o.Utf16LE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=a(l[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=a(u.charCodeAt(f)<<16-f%2*16);return s.create(c,l*2)}};function a(u){return u<<8&4278255360|u>>>8&16711935}}(),n.enc.Utf16})}(zP)),zP.exports}var VP={exports:{}},Sat=VP.exports,coe;function Bw(){return coe||(coe=1,function(e,t){(function(n,r){e.exports=r(mi())})(Sat,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(u){var l=u.words,c=u.sigBytes,f=this._map;u.clamp();for(var d=[],h=0;h<c;h+=3)for(var p=l[h>>>2]>>>24-h%4*8&255,m=l[h+1>>>2]>>>24-(h+1)%4*8&255,g=l[h+2>>>2]>>>24-(h+2)%4*8&255,b=p<<16|m<<8|g,y=0;y<4&&h+y*.75<c;y++)d.push(f.charAt(b>>>6*(3-y)&63));var x=f.charAt(64);if(x)for(;d.length%4;)d.push(x);return d.join("")},parse:function(u){var l=u.length,c=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<c.length;d++)f[c.charCodeAt(d)]=d}var h=c.charAt(64);if(h){var p=u.indexOf(h);p!==-1&&(l=p)}return a(u,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64})}(VP)),VP.exports}var HP={exports:{}},Tat=HP.exports,foe;function Cat(){return foe||(foe=1,function(e,t){(function(n,r){e.exports=r(mi())})(Tat,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(u,l){l===void 0&&(l=!0);var c=u.words,f=u.sigBytes,d=l?this._safe_map:this._map;u.clamp();for(var h=[],p=0;p<f;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,g=c[p+1>>>2]>>>24-(p+1)%4*8&255,b=c[p+2>>>2]>>>24-(p+2)%4*8&255,y=m<<16|g<<8|b,x=0;x<4&&p+x*.75<f;x++)h.push(d.charAt(y>>>6*(3-x)&63));var w=d.charAt(64);if(w)for(;h.length%4;)h.push(w);return h.join("")},parse:function(u,l){l===void 0&&(l=!0);var c=u.length,f=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<f.length;h++)d[f.charCodeAt(h)]=h}var p=f.charAt(64);if(p){var m=u.indexOf(p);m!==-1&&(c=m)}return a(u,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64url})}(HP)),HP.exports}var qP={exports:{}},Aat=qP.exports,doe;function jw(){return doe||(doe=1,function(e,t){(function(n,r){e.exports=r(mi())})(Aat,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[];(function(){for(var m=0;m<64;m++)l[m]=r.abs(r.sin(m+1))*4294967296|0})();var c=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,g){for(var b=0;b<16;b++){var y=g+b,x=m[y];m[y]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var w=this._hash.words,S=m[g+0],C=m[g+1],R=m[g+2],I=m[g+3],O=m[g+4],M=m[g+5],L=m[g+6],H=m[g+7],D=m[g+8],B=m[g+9],z=m[g+10],G=m[g+11],Z=m[g+12],ne=m[g+13],ue=m[g+14],X=m[g+15],q=w[0],te=w[1],W=w[2],ee=w[3];q=f(q,te,W,ee,S,7,l[0]),ee=f(ee,q,te,W,C,12,l[1]),W=f(W,ee,q,te,R,17,l[2]),te=f(te,W,ee,q,I,22,l[3]),q=f(q,te,W,ee,O,7,l[4]),ee=f(ee,q,te,W,M,12,l[5]),W=f(W,ee,q,te,L,17,l[6]),te=f(te,W,ee,q,H,22,l[7]),q=f(q,te,W,ee,D,7,l[8]),ee=f(ee,q,te,W,B,12,l[9]),W=f(W,ee,q,te,z,17,l[10]),te=f(te,W,ee,q,G,22,l[11]),q=f(q,te,W,ee,Z,7,l[12]),ee=f(ee,q,te,W,ne,12,l[13]),W=f(W,ee,q,te,ue,17,l[14]),te=f(te,W,ee,q,X,22,l[15]),q=d(q,te,W,ee,C,5,l[16]),ee=d(ee,q,te,W,L,9,l[17]),W=d(W,ee,q,te,G,14,l[18]),te=d(te,W,ee,q,S,20,l[19]),q=d(q,te,W,ee,M,5,l[20]),ee=d(ee,q,te,W,z,9,l[21]),W=d(W,ee,q,te,X,14,l[22]),te=d(te,W,ee,q,O,20,l[23]),q=d(q,te,W,ee,B,5,l[24]),ee=d(ee,q,te,W,ue,9,l[25]),W=d(W,ee,q,te,I,14,l[26]),te=d(te,W,ee,q,D,20,l[27]),q=d(q,te,W,ee,ne,5,l[28]),ee=d(ee,q,te,W,R,9,l[29]),W=d(W,ee,q,te,H,14,l[30]),te=d(te,W,ee,q,Z,20,l[31]),q=h(q,te,W,ee,M,4,l[32]),ee=h(ee,q,te,W,D,11,l[33]),W=h(W,ee,q,te,G,16,l[34]),te=h(te,W,ee,q,ue,23,l[35]),q=h(q,te,W,ee,C,4,l[36]),ee=h(ee,q,te,W,O,11,l[37]),W=h(W,ee,q,te,H,16,l[38]),te=h(te,W,ee,q,z,23,l[39]),q=h(q,te,W,ee,ne,4,l[40]),ee=h(ee,q,te,W,S,11,l[41]),W=h(W,ee,q,te,I,16,l[42]),te=h(te,W,ee,q,L,23,l[43]),q=h(q,te,W,ee,B,4,l[44]),ee=h(ee,q,te,W,Z,11,l[45]),W=h(W,ee,q,te,X,16,l[46]),te=h(te,W,ee,q,R,23,l[47]),q=p(q,te,W,ee,S,6,l[48]),ee=p(ee,q,te,W,H,10,l[49]),W=p(W,ee,q,te,ue,15,l[50]),te=p(te,W,ee,q,M,21,l[51]),q=p(q,te,W,ee,Z,6,l[52]),ee=p(ee,q,te,W,I,10,l[53]),W=p(W,ee,q,te,z,15,l[54]),te=p(te,W,ee,q,C,21,l[55]),q=p(q,te,W,ee,D,6,l[56]),ee=p(ee,q,te,W,X,10,l[57]),W=p(W,ee,q,te,L,15,l[58]),te=p(te,W,ee,q,ne,21,l[59]),q=p(q,te,W,ee,O,6,l[60]),ee=p(ee,q,te,W,G,10,l[61]),W=p(W,ee,q,te,R,15,l[62]),te=p(te,W,ee,q,B,21,l[63]),w[0]=w[0]+q|0,w[1]=w[1]+te|0,w[2]=w[2]+W|0,w[3]=w[3]+ee|0},_doFinalize:function(){var m=this._data,g=m.words,b=this._nDataBytes*8,y=m.sigBytes*8;g[y>>>5]|=128<<24-y%32;var x=r.floor(b/4294967296),w=b;g[(y+64>>>9<<4)+15]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,g[(y+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,m.sigBytes=(g.length+1)*4,this._process();for(var S=this._hash,C=S.words,R=0;R<4;R++){var I=C[R];C[R]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360}return S},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});function f(m,g,b,y,x,w,S){var C=m+(g&b|~g&y)+x+S;return(C<<w|C>>>32-w)+g}function d(m,g,b,y,x,w,S){var C=m+(g&y|b&~y)+x+S;return(C<<w|C>>>32-w)+g}function h(m,g,b,y,x,w,S){var C=m+(g^b^y)+x+S;return(C<<w|C>>>32-w)+g}function p(m,g,b,y,x,w,S){var C=m+(b^(g|~y))+x+S;return(C<<w|C>>>32-w)+g}i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)}(Math),n.MD5})}(qP)),qP.exports}var WP={exports:{}},kat=WP.exports,hoe;function gwe(){return hoe||(hoe=1,function(e,t){(function(n,r){e.exports=r(mi())})(kat,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,u=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,f){for(var d=this._hash.words,h=d[0],p=d[1],m=d[2],g=d[3],b=d[4],y=0;y<80;y++){if(y<16)u[y]=c[f+y]|0;else{var x=u[y-3]^u[y-8]^u[y-14]^u[y-16];u[y]=x<<1|x>>>31}var w=(h<<5|h>>>27)+b+u[y];y<20?w+=(p&m|~p&g)+1518500249:y<40?w+=(p^m^g)+1859775393:y<60?w+=(p&m|p&g|m&g)-1894007588:w+=(p^m^g)-899497514,b=g,g=m,m=p<<30|p>>>2,p=h,h=w}d[0]=d[0]+h|0,d[1]=d[1]+p|0,d[2]=d[2]+m|0,d[3]=d[3]+g|0,d[4]=d[4]+b|0},_doFinalize:function(){var c=this._data,f=c.words,d=this._nDataBytes*8,h=c.sigBytes*8;return f[h>>>5]|=128<<24-h%32,f[(h+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(h+64>>>9<<4)+15]=d,c.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var c=o.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=o._createHelper(l),r.HmacSHA1=o._createHmacHelper(l)}(),n.SHA1})}(WP)),WP.exports}var GP={exports:{}},Rat=GP.exports,poe;function VY(){return poe||(poe=1,function(e,t){(function(n,r){e.exports=r(mi())})(Rat,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[],c=[];(function(){function h(b){for(var y=r.sqrt(b),x=2;x<=y;x++)if(!(b%x))return!1;return!0}function p(b){return(b-(b|0))*4294967296|0}for(var m=2,g=0;g<64;)h(m)&&(g<8&&(l[g]=p(r.pow(m,1/2))),c[g]=p(r.pow(m,1/3)),g++),m++})();var f=[],d=u.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(h,p){for(var m=this._hash.words,g=m[0],b=m[1],y=m[2],x=m[3],w=m[4],S=m[5],C=m[6],R=m[7],I=0;I<64;I++){if(I<16)f[I]=h[p+I]|0;else{var O=f[I-15],M=(O<<25|O>>>7)^(O<<14|O>>>18)^O>>>3,L=f[I-2],H=(L<<15|L>>>17)^(L<<13|L>>>19)^L>>>10;f[I]=M+f[I-7]+H+f[I-16]}var D=w&S^~w&C,B=g&b^g&y^b&y,z=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),G=(w<<26|w>>>6)^(w<<21|w>>>11)^(w<<7|w>>>25),Z=R+G+D+c[I]+f[I],ne=z+B;R=C,C=S,S=w,w=x+Z|0,x=y,y=b,b=g,g=Z+ne|0}m[0]=m[0]+g|0,m[1]=m[1]+b|0,m[2]=m[2]+y|0,m[3]=m[3]+x|0,m[4]=m[4]+w|0,m[5]=m[5]+S|0,m[6]=m[6]+C|0,m[7]=m[7]+R|0},_doFinalize:function(){var h=this._data,p=h.words,m=this._nDataBytes*8,g=h.sigBytes*8;return p[g>>>5]|=128<<24-g%32,p[(g+64>>>9<<4)+14]=r.floor(m/4294967296),p[(g+64>>>9<<4)+15]=m,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256})}(GP)),GP.exports}var YP={exports:{}},Iat=YP.exports,moe;function Pat(){return moe||(moe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),VY())})(Iat,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,u=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(u),r.HmacSHA224=a._createHmacHelper(u)}(),n.SHA224})}(YP)),YP.exports}var KP={exports:{}},Nat=KP.exports,goe;function ywe(){return goe||(goe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),eM())})(Nat,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,u=o.WordArray,l=r.algo;function c(){return a.create.apply(a,arguments)}var f=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var p=0;p<80;p++)d[p]=c()})();var h=l.SHA512=s.extend({_doReset:function(){this._hash=new u.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(p,m){for(var g=this._hash.words,b=g[0],y=g[1],x=g[2],w=g[3],S=g[4],C=g[5],R=g[6],I=g[7],O=b.high,M=b.low,L=y.high,H=y.low,D=x.high,B=x.low,z=w.high,G=w.low,Z=S.high,ne=S.low,ue=C.high,X=C.low,q=R.high,te=R.low,W=I.high,ee=I.low,oe=O,pe=M,ce=L,he=H,Ee=D,Ae=B,ge=z,me=G,Oe=Z,Me=ne,Ye=ue,lt=X,We=q,nt=te,yt=W,_t=ee,It=0;It<80;It++){var Et,Ke,Lt=d[It];if(It<16)Ke=Lt.high=p[m+It*2]|0,Et=Lt.low=p[m+It*2+1]|0;else{var sn=d[It-15],Fe=sn.high,Qe=sn.low,wt=(Fe>>>1|Qe<<31)^(Fe>>>8|Qe<<24)^Fe>>>7,Vt=(Qe>>>1|Fe<<31)^(Qe>>>8|Fe<<24)^(Qe>>>7|Fe<<25),Wt=d[It-2],bn=Wt.high,Dn=Wt.low,Zn=(bn>>>19|Dn<<13)^(bn<<3|Dn>>>29)^bn>>>6,wr=(Dn>>>19|bn<<13)^(Dn<<3|bn>>>29)^(Dn>>>6|bn<<26),Hn=d[It-7],nr=Hn.high,Ei=Hn.low,Dr=d[It-16],Co=Dr.high,Ji=Dr.low;Et=Vt+Ei,Ke=wt+nr+(Et>>>0<Vt>>>0?1:0),Et=Et+wr,Ke=Ke+Zn+(Et>>>0<wr>>>0?1:0),Et=Et+Ji,Ke=Ke+Co+(Et>>>0<Ji>>>0?1:0),Lt.high=Ke,Lt.low=Et}var Di=Oe&Ye^~Oe&We,Zi=Me&lt^~Me&nt,ei=oe&ce^oe&Ee^ce&Ee,mo=pe&he^pe&Ae^he&Ae,Gu=(oe>>>28|pe<<4)^(oe<<30|pe>>>2)^(oe<<25|pe>>>7),Ea=(pe>>>28|oe<<4)^(pe<<30|oe>>>2)^(pe<<25|oe>>>7),Sa=(Oe>>>14|Me<<18)^(Oe>>>18|Me<<14)^(Oe<<23|Me>>>9),Kr=(Me>>>14|Oe<<18)^(Me>>>18|Oe<<14)^(Me<<23|Oe>>>9),Oi=f[It],si=Oi.high,Zs=Oi.low,Xr=_t+Kr,Hi=yt+Sa+(Xr>>>0<_t>>>0?1:0),Xr=Xr+Zi,Hi=Hi+Di+(Xr>>>0<Zi>>>0?1:0),Xr=Xr+Zs,Hi=Hi+si+(Xr>>>0<Zs>>>0?1:0),Xr=Xr+Et,Hi=Hi+Ke+(Xr>>>0<Et>>>0?1:0),eo=Ea+mo,go=Gu+ei+(eo>>>0<Ea>>>0?1:0);yt=We,_t=nt,We=Ye,nt=lt,Ye=Oe,lt=Me,Me=me+Xr|0,Oe=ge+Hi+(Me>>>0<me>>>0?1:0)|0,ge=Ee,me=Ae,Ee=ce,Ae=he,ce=oe,he=pe,pe=Xr+eo|0,oe=Hi+go+(pe>>>0<Xr>>>0?1:0)|0}M=b.low=M+pe,b.high=O+oe+(M>>>0<pe>>>0?1:0),H=y.low=H+he,y.high=L+ce+(H>>>0<he>>>0?1:0),B=x.low=B+Ae,x.high=D+Ee+(B>>>0<Ae>>>0?1:0),G=w.low=G+me,w.high=z+ge+(G>>>0<me>>>0?1:0),ne=S.low=ne+Me,S.high=Z+Oe+(ne>>>0<Me>>>0?1:0),X=C.low=X+lt,C.high=ue+Ye+(X>>>0<lt>>>0?1:0),te=R.low=te+nt,R.high=q+We+(te>>>0<nt>>>0?1:0),ee=I.low=ee+_t,I.high=W+yt+(ee>>>0<_t>>>0?1:0)},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,b=p.sigBytes*8;m[b>>>5]|=128<<24-b%32,m[(b+128>>>10<<5)+30]=Math.floor(g/4294967296),m[(b+128>>>10<<5)+31]=g,p.sigBytes=m.length*4,this._process();var y=this._hash.toX32();return y},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=s._createHelper(h),r.HmacSHA512=s._createHmacHelper(h)}(),n.SHA512})}(KP)),KP.exports}var XP={exports:{}},Dat=XP.exports,yoe;function Oat(){return yoe||(yoe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),eM(),ywe())})(Dat,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,u=a.SHA512,l=a.SHA384=u.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=u._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=u._createHelper(l),r.HmacSHA384=u._createHmacHelper(l)}(),n.SHA384})}(XP)),XP.exports}var QP={exports:{}},Mat=QP.exports,voe;function Lat(){return voe||(voe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),eM())})(Mat,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.x64,l=u.Word,c=i.algo,f=[],d=[],h=[];(function(){for(var g=1,b=0,y=0;y<24;y++){f[g+5*b]=(y+1)*(y+2)/2%64;var x=b%5,w=(2*g+3*b)%5;g=x,b=w}for(var g=0;g<5;g++)for(var b=0;b<5;b++)d[g+5*b]=b+(2*g+3*b)%5*5;for(var S=1,C=0;C<24;C++){for(var R=0,I=0,O=0;O<7;O++){if(S&1){var M=(1<<O)-1;M<32?I^=1<<M:R^=1<<M-32}S&128?S=S<<1^113:S<<=1}h[C]=l.create(R,I)}})();var p=[];(function(){for(var g=0;g<25;g++)p[g]=l.create()})();var m=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],b=0;b<25;b++)g[b]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,b){for(var y=this._state,x=this.blockSize/2,w=0;w<x;w++){var S=g[b+2*w],C=g[b+2*w+1];S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360;var R=y[w];R.high^=C,R.low^=S}for(var I=0;I<24;I++){for(var O=0;O<5;O++){for(var M=0,L=0,H=0;H<5;H++){var R=y[O+5*H];M^=R.high,L^=R.low}var D=p[O];D.high=M,D.low=L}for(var O=0;O<5;O++)for(var B=p[(O+4)%5],z=p[(O+1)%5],G=z.high,Z=z.low,M=B.high^(G<<1|Z>>>31),L=B.low^(Z<<1|G>>>31),H=0;H<5;H++){var R=y[O+5*H];R.high^=M,R.low^=L}for(var ne=1;ne<25;ne++){var M,L,R=y[ne],ue=R.high,X=R.low,q=f[ne];q<32?(M=ue<<q|X>>>32-q,L=X<<q|ue>>>32-q):(M=X<<q-32|ue>>>64-q,L=ue<<q-32|X>>>64-q);var te=p[d[ne]];te.high=M,te.low=L}var W=p[0],ee=y[0];W.high=ee.high,W.low=ee.low;for(var O=0;O<5;O++)for(var H=0;H<5;H++){var ne=O+5*H,R=y[ne],oe=p[ne],pe=p[(O+1)%5+5*H],ce=p[(O+2)%5+5*H];R.high=oe.high^~pe.high&ce.high,R.low=oe.low^~pe.low&ce.low}var R=y[0],he=h[I];R.high^=he.high,R.low^=he.low}},_doFinalize:function(){var g=this._data,b=g.words;this._nDataBytes*8;var y=g.sigBytes*8,x=this.blockSize*32;b[y>>>5]|=1<<24-y%32,b[(r.ceil((y+1)/x)*x>>>5)-1]|=128,g.sigBytes=b.length*4,this._process();for(var w=this._state,S=this.cfg.outputLength/8,C=S/8,R=[],I=0;I<C;I++){var O=w[I],M=O.high,L=O.low;M=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,L=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,R.push(L),R.push(M)}return new o.init(R,S)},clone:function(){for(var g=a.clone.call(this),b=g._state=this._state.slice(0),y=0;y<25;y++)b[y]=b[y].clone();return g}});i.SHA3=a._createHelper(m),i.HmacSHA3=a._createHmacHelper(m)}(Math),n.SHA3})}(QP)),QP.exports}var JP={exports:{}},Fat=JP.exports,boe;function $at(){return boe||(boe=1,function(e,t){(function(n,r){e.exports=r(mi())})(Fat,function(n){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),m=u.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(C,R){for(var I=0;I<16;I++){var O=R+I,M=C[O];C[O]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360}var L=this._hash.words,H=h.words,D=p.words,B=l.words,z=c.words,G=f.words,Z=d.words,ne,ue,X,q,te,W,ee,oe,pe,ce;W=ne=L[0],ee=ue=L[1],oe=X=L[2],pe=q=L[3],ce=te=L[4];for(var he,I=0;I<80;I+=1)he=ne+C[R+B[I]]|0,I<16?he+=g(ue,X,q)+H[0]:I<32?he+=b(ue,X,q)+H[1]:I<48?he+=y(ue,X,q)+H[2]:I<64?he+=x(ue,X,q)+H[3]:he+=w(ue,X,q)+H[4],he=he|0,he=S(he,G[I]),he=he+te|0,ne=te,te=q,q=S(X,10),X=ue,ue=he,he=W+C[R+z[I]]|0,I<16?he+=w(ee,oe,pe)+D[0]:I<32?he+=x(ee,oe,pe)+D[1]:I<48?he+=y(ee,oe,pe)+D[2]:I<64?he+=b(ee,oe,pe)+D[3]:he+=g(ee,oe,pe)+D[4],he=he|0,he=S(he,Z[I]),he=he+ce|0,W=ce,ce=pe,pe=S(oe,10),oe=ee,ee=he;he=L[1]+X+pe|0,L[1]=L[2]+q+ce|0,L[2]=L[3]+te+W|0,L[3]=L[4]+ne+ee|0,L[4]=L[0]+ue+oe|0,L[0]=he},_doFinalize:function(){var C=this._data,R=C.words,I=this._nDataBytes*8,O=C.sigBytes*8;R[O>>>5]|=128<<24-O%32,R[(O+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,C.sigBytes=(R.length+1)*4,this._process();for(var M=this._hash,L=M.words,H=0;H<5;H++){var D=L[H];L[H]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}return M},clone:function(){var C=a.clone.call(this);return C._hash=this._hash.clone(),C}});function g(C,R,I){return C^R^I}function b(C,R,I){return C&R|~C&I}function y(C,R,I){return(C|~R)^I}function x(C,R,I){return C&I|R&~I}function w(C,R,I){return C^(R|~I)}function S(C,R){return C<<R|C>>>32-R}i.RIPEMD160=a._createHelper(m),i.HmacRIPEMD160=a._createHmacHelper(m)}(),n.RIPEMD160})}(JP)),JP.exports}var ZP={exports:{}},Bat=ZP.exports,xoe;function HY(){return xoe||(xoe=1,function(e,t){(function(n,r){e.exports=r(mi())})(Bat,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,u=r.algo;u.HMAC=s.extend({init:function(l,c){l=this._hasher=new l.init,typeof c=="string"&&(c=a.parse(c));var f=l.blockSize,d=f*4;c.sigBytes>d&&(c=l.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),p=this._iKey=c.clone(),m=h.words,g=p.words,b=0;b<f;b++)m[b]^=1549556828,g[b]^=909522486;h.sigBytes=p.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var c=this._hasher,f=c.finalize(l);c.reset();var d=c.finalize(this._oKey.clone().concat(f));return d}})})()})}(ZP)),ZP.exports}var eN={exports:{}},jat=eN.exports,_oe;function Uat(){return _oe||(_oe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),VY(),HY())})(jat,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.SHA256,l=a.HMAC,c=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var h=this.cfg,p=l.create(h.hasher,f),m=o.create(),g=o.create([1]),b=m.words,y=g.words,x=h.keySize,w=h.iterations;b.length<x;){var S=p.update(d).finalize(g);p.reset();for(var C=S.words,R=C.length,I=S,O=1;O<w;O++){I=p.finalize(I),p.reset();for(var M=I.words,L=0;L<R;L++)C[L]^=M[L]}m.concat(S),y[0]++}return m.sigBytes=x*4,m}});r.PBKDF2=function(f,d,h){return c.create(h).compute(f,d)}}(),n.PBKDF2})}(eN)),eN.exports}var tN={exports:{}},zat=tN.exports,woe;function Xb(){return woe||(woe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),gwe(),HY())})(zat,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,f){for(var d,h=this.cfg,p=h.hasher.create(),m=o.create(),g=m.words,b=h.keySize,y=h.iterations;g.length<b;){d&&p.update(d),d=p.update(c).finalize(f),p.reset();for(var x=1;x<y;x++)d=p.finalize(d),p.reset();m.concat(d)}return m.sigBytes=b*4,m}});r.EvpKDF=function(c,f,d){return l.create(d).compute(c,f)}}(),n.EvpKDF})}(tN)),tN.exports}var nN={exports:{}},Vat=nN.exports,Eoe;function Vu(){return Eoe||(Eoe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Xb())})(Vat,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=s.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var c=l.Base64,f=i.algo,d=f.EvpKDF,h=s.Cipher=u.extend({cfg:o.extend(),createEncryptor:function(M,L){return this.create(this._ENC_XFORM_MODE,M,L)},createDecryptor:function(M,L){return this.create(this._DEC_XFORM_MODE,M,L)},init:function(M,L,H){this.cfg=this.cfg.extend(H),this._xformMode=M,this._key=L,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(M){return this._append(M),this._process()},finalize:function(M){M&&this._append(M);var L=this._doFinalize();return L},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function M(L){return typeof L=="string"?O:C}return function(L){return{encrypt:function(H,D,B){return M(D).encrypt(L,H,D,B)},decrypt:function(H,D,B){return M(D).decrypt(L,H,D,B)}}}}()});s.StreamCipher=h.extend({_doFinalize:function(){var M=this._process(!0);return M},blockSize:1});var p=i.mode={},m=s.BlockCipherMode=o.extend({createEncryptor:function(M,L){return this.Encryptor.create(M,L)},createDecryptor:function(M,L){return this.Decryptor.create(M,L)},init:function(M,L){this._cipher=M,this._iv=L}}),g=p.CBC=function(){var M=m.extend();M.Encryptor=M.extend({processBlock:function(H,D){var B=this._cipher,z=B.blockSize;L.call(this,H,D,z),B.encryptBlock(H,D),this._prevBlock=H.slice(D,D+z)}}),M.Decryptor=M.extend({processBlock:function(H,D){var B=this._cipher,z=B.blockSize,G=H.slice(D,D+z);B.decryptBlock(H,D),L.call(this,H,D,z),this._prevBlock=G}});function L(H,D,B){var z,G=this._iv;G?(z=G,this._iv=r):z=this._prevBlock;for(var Z=0;Z<B;Z++)H[D+Z]^=z[Z]}return M}(),b=i.pad={},y=b.Pkcs7={pad:function(M,L){for(var H=L*4,D=H-M.sigBytes%H,B=D<<24|D<<16|D<<8|D,z=[],G=0;G<D;G+=4)z.push(B);var Z=a.create(z,D);M.concat(Z)},unpad:function(M){var L=M.words[M.sigBytes-1>>>2]&255;M.sigBytes-=L}};s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:y}),reset:function(){var M;h.reset.call(this);var L=this.cfg,H=L.iv,D=L.mode;this._xformMode==this._ENC_XFORM_MODE?M=D.createEncryptor:(M=D.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==M?this._mode.init(this,H&&H.words):(this._mode=M.call(D,this,H&&H.words),this._mode.__creator=M)},_doProcessBlock:function(M,L){this._mode.processBlock(M,L)},_doFinalize:function(){var M,L=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(L.pad(this._data,this.blockSize),M=this._process(!0)):(M=this._process(!0),L.unpad(M)),M},blockSize:128/32});var x=s.CipherParams=o.extend({init:function(M){this.mixIn(M)},toString:function(M){return(M||this.formatter).stringify(this)}}),w=i.format={},S=w.OpenSSL={stringify:function(M){var L,H=M.ciphertext,D=M.salt;return D?L=a.create([1398893684,1701076831]).concat(D).concat(H):L=H,L.toString(c)},parse:function(M){var L,H=c.parse(M),D=H.words;return D[0]==1398893684&&D[1]==1701076831&&(L=a.create(D.slice(2,4)),D.splice(0,4),H.sigBytes-=16),x.create({ciphertext:H,salt:L})}},C=s.SerializableCipher=o.extend({cfg:o.extend({format:S}),encrypt:function(M,L,H,D){D=this.cfg.extend(D);var B=M.createEncryptor(H,D),z=B.finalize(L),G=B.cfg;return x.create({ciphertext:z,key:H,iv:G.iv,algorithm:M,mode:G.mode,padding:G.padding,blockSize:M.blockSize,formatter:D.format})},decrypt:function(M,L,H,D){D=this.cfg.extend(D),L=this._parse(L,D.format);var B=M.createDecryptor(H,D).finalize(L.ciphertext);return B},_parse:function(M,L){return typeof M=="string"?L.parse(M,this):M}}),R=i.kdf={},I=R.OpenSSL={execute:function(M,L,H,D,B){if(D||(D=a.random(64/8)),B)var z=d.create({keySize:L+H,hasher:B}).compute(M,D);else var z=d.create({keySize:L+H}).compute(M,D);var G=a.create(z.words.slice(L),H*4);return z.sigBytes=L*4,x.create({key:z,iv:G,salt:D})}},O=s.PasswordBasedCipher=C.extend({cfg:C.cfg.extend({kdf:I}),encrypt:function(M,L,H,D){D=this.cfg.extend(D);var B=D.kdf.execute(H,M.keySize,M.ivSize,D.salt,D.hasher);D.iv=B.iv;var z=C.encrypt.call(this,M,L,B.key,D);return z.mixIn(B),z},decrypt:function(M,L,H,D){D=this.cfg.extend(D),L=this._parse(L,D.format);var B=D.kdf.execute(H,M.keySize,M.ivSize,L.salt,D.hasher);D.iv=B.iv;var z=C.decrypt.call(this,M,L,B.key,D);return z}})}()})}(nN)),nN.exports}var rN={exports:{}},Hat=rN.exports,Soe;function qat(){return Soe||(Soe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(Hat,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize;i.call(this,s,o,u,a),this._prevBlock=s.slice(o,o+u)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=s.slice(o,o+u);i.call(this,s,o,u,a),this._prevBlock=l}});function i(s,o,a,u){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,u.encryptBlock(l,0);for(var f=0;f<a;f++)s[o+f]^=l[f]}return r}(),n.mode.CFB})}(rN)),rN.exports}var iN={exports:{}},Wat=iN.exports,Toe;function Gat(){return Toe||(Toe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(Wat,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var f=c.slice(0);a.encryptBlock(f,0),c[u-1]=c[u-1]+1|0;for(var d=0;d<u;d++)s[o+d]^=f[d]}});return r.Decryptor=i,r}(),n.mode.CTR})}(iN)),iN.exports}var sN={exports:{}},Yat=sN.exports,Coe;function Kat(){return Coe||(Coe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(Yat,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var u=a>>16&255,l=a>>8&255,c=a&255;u===255?(u=0,l===255?(l=0,c===255?c=0:++c):++l):++u,a=0,a+=u<<16,a+=l<<8,a+=c}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,u){var l=this._cipher,c=l.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),s(d);var h=d.slice(0);l.encryptBlock(h,0);for(var p=0;p<c;p++)a[u+p]^=h[p]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(sN)),sN.exports}var oN={exports:{}},Xat=oN.exports,Aoe;function Qat(){return Aoe||(Aoe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(Xat,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var f=0;f<u;f++)s[o+f]^=c[f]}});return r.Decryptor=i,r}(),n.mode.OFB})}(oN)),oN.exports}var aN={exports:{}},Jat=aN.exports,koe;function Zat(){return koe||(koe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(Jat,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(aN)),aN.exports}var uN={exports:{}},eut=uN.exports,Roe;function tut(){return Roe||(Roe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(eut,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,u=s+a-1;r.clamp(),r.words[u>>>2]|=a<<24-u%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(uN)),uN.exports}var lN={exports:{}},nut=lN.exports,Ioe;function rut(){return Ioe||(Ioe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(nut,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(lN)),lN.exports}var cN={exports:{}},iut=cN.exports,Poe;function sut(){return Poe||(Poe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(iut,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(cN)),cN.exports}var fN={exports:{}},out=fN.exports,Noe;function aut(){return Noe||(Noe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(out,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(fN)),fN.exports}var dN={exports:{}},uut=dN.exports,Doe;function lut(){return Doe||(Doe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(uut,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(dN)),dN.exports}var hN={exports:{}},cut=hN.exports,Ooe;function fut(){return Ooe||(Ooe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(cut,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,u=a.Hex,l=i.format;l.Hex={stringify:function(c){return c.ciphertext.toString(u)},parse:function(c){var f=u.parse(c);return o.create({ciphertext:f})}}}(),n.format.Hex})}(hN)),hN.exports}var pN={exports:{}},dut=pN.exports,Moe;function hut(){return Moe||(Moe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Bw(),jw(),Xb(),Vu())})(dut,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],u=[],l=[],c=[],f=[],d=[],h=[],p=[],m=[],g=[];(function(){for(var x=[],w=0;w<256;w++)w<128?x[w]=w<<1:x[w]=w<<1^283;for(var S=0,C=0,w=0;w<256;w++){var R=C^C<<1^C<<2^C<<3^C<<4;R=R>>>8^R&255^99,a[S]=R,u[R]=S;var I=x[S],O=x[I],M=x[O],L=x[R]*257^R*16843008;l[S]=L<<24|L>>>8,c[S]=L<<16|L>>>16,f[S]=L<<8|L>>>24,d[S]=L;var L=M*16843009^O*65537^I*257^S*16843008;h[R]=L<<24|L>>>8,p[R]=L<<16|L>>>16,m[R]=L<<8|L>>>24,g[R]=L,S?(S=I^x[x[x[M^I]]],C^=x[x[C]]):S=C=1}})();var b=[0,1,2,4,8,16,32,64,128,27,54],y=o.AES=s.extend({_doReset:function(){var x;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var w=this._keyPriorReset=this._key,S=w.words,C=w.sigBytes/4,R=this._nRounds=C+6,I=(R+1)*4,O=this._keySchedule=[],M=0;M<I;M++)M<C?O[M]=S[M]:(x=O[M-1],M%C?C>6&&M%C==4&&(x=a[x>>>24]<<24|a[x>>>16&255]<<16|a[x>>>8&255]<<8|a[x&255]):(x=x<<8|x>>>24,x=a[x>>>24]<<24|a[x>>>16&255]<<16|a[x>>>8&255]<<8|a[x&255],x^=b[M/C|0]<<24),O[M]=O[M-C]^x);for(var L=this._invKeySchedule=[],H=0;H<I;H++){var M=I-H;if(H%4)var x=O[M];else var x=O[M-4];H<4||M<=4?L[H]=x:L[H]=h[a[x>>>24]]^p[a[x>>>16&255]]^m[a[x>>>8&255]]^g[a[x&255]]}}},encryptBlock:function(x,w){this._doCryptBlock(x,w,this._keySchedule,l,c,f,d,a)},decryptBlock:function(x,w){var S=x[w+1];x[w+1]=x[w+3],x[w+3]=S,this._doCryptBlock(x,w,this._invKeySchedule,h,p,m,g,u);var S=x[w+1];x[w+1]=x[w+3],x[w+3]=S},_doCryptBlock:function(x,w,S,C,R,I,O,M){for(var L=this._nRounds,H=x[w]^S[0],D=x[w+1]^S[1],B=x[w+2]^S[2],z=x[w+3]^S[3],G=4,Z=1;Z<L;Z++){var ne=C[H>>>24]^R[D>>>16&255]^I[B>>>8&255]^O[z&255]^S[G++],ue=C[D>>>24]^R[B>>>16&255]^I[z>>>8&255]^O[H&255]^S[G++],X=C[B>>>24]^R[z>>>16&255]^I[H>>>8&255]^O[D&255]^S[G++],q=C[z>>>24]^R[H>>>16&255]^I[D>>>8&255]^O[B&255]^S[G++];H=ne,D=ue,B=X,z=q}var ne=(M[H>>>24]<<24|M[D>>>16&255]<<16|M[B>>>8&255]<<8|M[z&255])^S[G++],ue=(M[D>>>24]<<24|M[B>>>16&255]<<16|M[z>>>8&255]<<8|M[H&255])^S[G++],X=(M[B>>>24]<<24|M[z>>>16&255]<<16|M[H>>>8&255]<<8|M[D&255])^S[G++],q=(M[z>>>24]<<24|M[H>>>16&255]<<16|M[D>>>8&255]<<8|M[B&255])^S[G++];x[w]=ne,x[w+1]=ue,x[w+2]=X,x[w+3]=q},keySize:256/32});r.AES=s._createHelper(y)}(),n.AES})}(pN)),pN.exports}var mN={exports:{}},put=mN.exports,Loe;function mut(){return Loe||(Loe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Bw(),jw(),Xb(),Vu())})(put,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=o.extend({_doReset:function(){for(var b=this._key,y=b.words,x=[],w=0;w<56;w++){var S=u[w]-1;x[w]=y[S>>>5]>>>31-S%32&1}for(var C=this._subKeys=[],R=0;R<16;R++){for(var I=C[R]=[],O=c[R],w=0;w<24;w++)I[w/6|0]|=x[(l[w]-1+O)%28]<<31-w%6,I[4+(w/6|0)]|=x[28+(l[w+24]-1+O)%28]<<31-w%6;I[0]=I[0]<<1|I[0]>>>31;for(var w=1;w<7;w++)I[w]=I[w]>>>(w-1)*4+3;I[7]=I[7]<<5|I[7]>>>27}for(var M=this._invSubKeys=[],w=0;w<16;w++)M[w]=C[15-w]},encryptBlock:function(b,y){this._doCryptBlock(b,y,this._subKeys)},decryptBlock:function(b,y){this._doCryptBlock(b,y,this._invSubKeys)},_doCryptBlock:function(b,y,x){this._lBlock=b[y],this._rBlock=b[y+1],p.call(this,4,252645135),p.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),p.call(this,1,1431655765);for(var w=0;w<16;w++){for(var S=x[w],C=this._lBlock,R=this._rBlock,I=0,O=0;O<8;O++)I|=f[O][((R^S[O])&d[O])>>>0];this._lBlock=R,this._rBlock=C^I}var M=this._lBlock;this._lBlock=this._rBlock,this._rBlock=M,p.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),b[y]=this._lBlock,b[y+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(b,y){var x=(this._lBlock>>>b^this._rBlock)&y;this._rBlock^=x,this._lBlock^=x<<b}function m(b,y){var x=(this._rBlock>>>b^this._lBlock)&y;this._lBlock^=x,this._rBlock^=x<<b}r.DES=o._createHelper(h);var g=a.TripleDES=o.extend({_doReset:function(){var b=this._key,y=b.words;if(y.length!==2&&y.length!==4&&y.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var x=y.slice(0,2),w=y.length<4?y.slice(0,2):y.slice(2,4),S=y.length<6?y.slice(0,2):y.slice(4,6);this._des1=h.createEncryptor(s.create(x)),this._des2=h.createEncryptor(s.create(w)),this._des3=h.createEncryptor(s.create(S))},encryptBlock:function(b,y){this._des1.encryptBlock(b,y),this._des2.decryptBlock(b,y),this._des3.encryptBlock(b,y)},decryptBlock:function(b,y){this._des3.decryptBlock(b,y),this._des2.encryptBlock(b,y),this._des1.decryptBlock(b,y)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(g)}(),n.TripleDES})}(mN)),mN.exports}var gN={exports:{}},gut=gN.exports,Foe;function yut(){return Foe||(Foe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Bw(),jw(),Xb(),Vu())})(gut,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var c=this._key,f=c.words,d=c.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,m=0;p<256;p++){var g=p%d,b=f[g>>>2]>>>24-g%4*8&255;m=(m+h[p]+b)%256;var y=h[p];h[p]=h[m],h[m]=y}this._i=this._j=0},_doProcessBlock:function(c,f){c[f]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var c=this._S,f=this._i,d=this._j,h=0,p=0;p<4;p++){f=(f+1)%256,d=(d+c[f])%256;var m=c[f];c[f]=c[d],c[d]=m,h|=c[(c[f]+c[d])%256]<<24-p*8}return this._i=f,this._j=d,h}r.RC4=s._createHelper(a);var l=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)u.call(this)}});r.RC4Drop=s._createHelper(l)}(),n.RC4})}(gN)),gN.exports}var yN={exports:{}},vut=yN.exports,$oe;function but(){return $oe||($oe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Bw(),jw(),Xb(),Vu())})(vut,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.Rabbit=s.extend({_doReset:function(){for(var d=this._key.words,h=this.cfg.iv,p=0;p<4;p++)d[p]=(d[p]<<8|d[p]>>>24)&16711935|(d[p]<<24|d[p]>>>8)&4278255360;var m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var p=0;p<4;p++)f.call(this);for(var p=0;p<8;p++)g[p]^=m[p+4&7];if(h){var b=h.words,y=b[0],x=b[1],w=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,S=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,C=w>>>16|S&4294901760,R=S<<16|w&65535;g[0]^=w,g[1]^=C,g[2]^=S,g[3]^=R,g[4]^=w,g[5]^=C,g[6]^=S,g[7]^=R;for(var p=0;p<4;p++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,b=m>>>16,y=((g*g>>>17)+g*b>>>15)+b*b,x=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=y^x}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=s._createHelper(c)}(),n.Rabbit})}(yN)),yN.exports}var vN={exports:{}},xut=vN.exports,Boe;function _ut(){return Boe||(Boe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Bw(),jw(),Xb(),Vu())})(xut,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.RabbitLegacy=s.extend({_doReset:function(){var d=this._key.words,h=this.cfg.iv,p=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],m=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)f.call(this);for(var g=0;g<8;g++)m[g]^=p[g+4&7];if(h){var b=h.words,y=b[0],x=b[1],w=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,S=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,C=w>>>16|S&4294901760,R=S<<16|w&65535;m[0]^=w,m[1]^=C,m[2]^=S,m[3]^=R,m[4]^=w,m[5]^=C,m[6]^=S,m[7]^=R;for(var g=0;g<4;g++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,b=m>>>16,y=((g*g>>>17)+g*b>>>15)+b*b,x=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=y^x}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=s._createHelper(c)}(),n.RabbitLegacy})}(vN)),vN.exports}var bN={exports:{}},wut=bN.exports,joe;function Eut(){return joe||(joe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Bw(),jw(),Xb(),Vu())})(wut,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function f(g,b){let y=b>>24&255,x=b>>16&255,w=b>>8&255,S=b&255,C=g.sbox[0][y]+g.sbox[1][x];return C=C^g.sbox[2][w],C=C+g.sbox[3][S],C}function d(g,b,y){let x=b,w=y,S;for(let C=0;C<a;++C)x=x^g.pbox[C],w=f(g,x)^w,S=x,x=w,w=S;return S=x,x=w,w=S,w=w^g.pbox[a],x=x^g.pbox[a+1],{left:x,right:w}}function h(g,b,y){let x=b,w=y,S;for(let C=a+1;C>1;--C)x=x^g.pbox[C],w=f(g,x)^w,S=x,x=w,w=S;return S=x,x=w,w=S,w=w^g.pbox[1],x=x^g.pbox[0],{left:x,right:w}}function p(g,b,y){for(let R=0;R<4;R++){g.sbox[R]=[];for(let I=0;I<256;I++)g.sbox[R][I]=l[R][I]}let x=0;for(let R=0;R<a+2;R++)g.pbox[R]=u[R]^b[x],x++,x>=y&&(x=0);let w=0,S=0,C=0;for(let R=0;R<a+2;R+=2)C=d(g,w,S),w=C.left,S=C.right,g.pbox[R]=w,g.pbox[R+1]=S;for(let R=0;R<4;R++)for(let I=0;I<256;I+=2)C=d(g,w,S),w=C.left,S=C.right,g.sbox[R][I]=w,g.sbox[R][I+1]=S;return!0}var m=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,b=g.words,y=g.sigBytes/4;p(c,b,y)}},encryptBlock:function(g,b){var y=d(c,g[b],g[b+1]);g[b]=y.left,g[b+1]=y.right},decryptBlock:function(g,b){var y=h(c,g[b],g[b+1]);g[b]=y.left,g[b+1]=y.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(m)}(),n.Blowfish})}(bN)),bN.exports}var Sut=$P.exports,Uoe;function Tut(){return Uoe||(Uoe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),eM(),_at(),Eat(),Bw(),Cat(),jw(),gwe(),VY(),Pat(),ywe(),Oat(),Lat(),$at(),HY(),Uat(),Xb(),Vu(),qat(),Gat(),Kat(),Qat(),Zat(),tut(),rut(),sut(),aut(),lut(),fut(),hut(),mut(),yut(),but(),_ut(),Eut())})(Sut,function(n){return n})}($P)),$P.exports}var hz=Tut();function u0(e){const t=hz.AES.encrypt(e.toString(),"notSecret").toString();return btoa(t)}function Cut(e){const t=hz.AES.decrypt(atob(e),"notSecret").toString(hz.enc.Utf8);return parseInt(t,10)}function Uw(){const{studyId:e}=ig();return`${e}`}function pp(){const{index:e}=ig();return e===void 0?0:e.startsWith("reviewer-")||e.startsWith("__")?e:Cut(e)}function B0(){const e=pp(),t=zY();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var R3={exports:{}};R3.exports;var zoe;function Aut(){return zoe||(zoe=1,function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",b="[object Null]",y="[object Object]",x="[object Proxy]",w="[object RegExp]",S="[object Set]",C="[object String]",R="[object Undefined]",I="[object WeakMap]",O="[object ArrayBuffer]",M="[object DataView]",L="[object Float32Array]",H="[object Float64Array]",D="[object Int8Array]",B="[object Int16Array]",z="[object Int32Array]",G="[object Uint8Array]",Z="[object Uint8ClampedArray]",ne="[object Uint16Array]",ue="[object Uint32Array]",X=/[\\^$.*+?()[\]{}|]/g,q=/^\[object .+?Constructor\]$/,te=/^(?:0|[1-9]\d*)$/,W={};W[L]=W[H]=W[D]=W[B]=W[z]=W[G]=W[Z]=W[ne]=W[ue]=!0,W[a]=W[u]=W[O]=W[c]=W[M]=W[f]=W[d]=W[h]=W[m]=W[g]=W[y]=W[w]=W[S]=W[C]=W[I]=!1;var ee=typeof ya=="object"&&ya&&ya.Object===Object&&ya,oe=typeof self=="object"&&self&&self.Object===Object&&self,pe=ee||oe||Function("return this")(),ce=t&&!t.nodeType&&t,he=ce&&!0&&e&&!e.nodeType&&e,Ee=he&&he.exports===ce,Ae=Ee&&ee.process,ge=function(){try{var Ce=he&&he.require&&he.require("util").types;return Ce||Ae&&Ae.binding&&Ae.binding("util")}catch{}}(),me=ge&&ge.isTypedArray;function Oe(Ce,Ne,rt){switch(rt.length){case 0:return Ce.call(Ne);case 1:return Ce.call(Ne,rt[0]);case 2:return Ce.call(Ne,rt[0],rt[1]);case 3:return Ce.call(Ne,rt[0],rt[1],rt[2])}return Ce.apply(Ne,rt)}function Me(Ce,Ne){for(var rt=-1,hn=Array(Ce);++rt<Ce;)hn[rt]=Ne(rt);return hn}function Ye(Ce){return function(Ne){return Ce(Ne)}}function lt(Ce,Ne){return Ce==null?void 0:Ce[Ne]}function We(Ce,Ne){return function(rt){return Ce(Ne(rt))}}var nt=Array.prototype,yt=Function.prototype,_t=Object.prototype,It=pe["__core-js_shared__"],Et=yt.toString,Ke=_t.hasOwnProperty,Lt=function(){var Ce=/[^.]+$/.exec(It&&It.keys&&It.keys.IE_PROTO||"");return Ce?"Symbol(src)_1."+Ce:""}(),sn=_t.toString,Fe=Et.call(Object),Qe=RegExp("^"+Et.call(Ke).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wt=Ee?pe.Buffer:void 0,Vt=pe.Symbol,Wt=pe.Uint8Array;wt&&wt.allocUnsafe;var bn=We(Object.getPrototypeOf,Object),Dn=Object.create,Zn=_t.propertyIsEnumerable,wr=nt.splice,Hn=Vt?Vt.toStringTag:void 0,nr=function(){try{var Ce=Nt(Object,"defineProperty");return Ce({},"",{}),Ce}catch{}}(),Ei=wt?wt.isBuffer:void 0,Dr=Math.max,Co=Date.now,Ji=Nt(pe,"Map"),Di=Nt(Object,"create"),Zi=function(){function Ce(){}return function(Ne){if(!Ol(Ne))return{};if(Dn)return Dn(Ne);Ce.prototype=Ne;var rt=new Ce;return Ce.prototype=void 0,rt}}();function ei(Ce){var Ne=-1,rt=Ce==null?0:Ce.length;for(this.clear();++Ne<rt;){var hn=Ce[Ne];this.set(hn[0],hn[1])}}function mo(){this.__data__=Di?Di(null):{},this.size=0}function Gu(Ce){var Ne=this.has(Ce)&&delete this.__data__[Ce];return this.size-=Ne?1:0,Ne}function Ea(Ce){var Ne=this.__data__;if(Di){var rt=Ne[Ce];return rt===r?void 0:rt}return Ke.call(Ne,Ce)?Ne[Ce]:void 0}function Sa(Ce){var Ne=this.__data__;return Di?Ne[Ce]!==void 0:Ke.call(Ne,Ce)}function Kr(Ce,Ne){var rt=this.__data__;return this.size+=this.has(Ce)?0:1,rt[Ce]=Di&&Ne===void 0?r:Ne,this}ei.prototype.clear=mo,ei.prototype.delete=Gu,ei.prototype.get=Ea,ei.prototype.has=Sa,ei.prototype.set=Kr;function Oi(Ce){var Ne=-1,rt=Ce==null?0:Ce.length;for(this.clear();++Ne<rt;){var hn=Ce[Ne];this.set(hn[0],hn[1])}}function si(){this.__data__=[],this.size=0}function Zs(Ce){var Ne=this.__data__,rt=wc(Ne,Ce);if(rt<0)return!1;var hn=Ne.length-1;return rt==hn?Ne.pop():wr.call(Ne,rt,1),--this.size,!0}function Xr(Ce){var Ne=this.__data__,rt=wc(Ne,Ce);return rt<0?void 0:Ne[rt][1]}function Hi(Ce){return wc(this.__data__,Ce)>-1}function eo(Ce,Ne){var rt=this.__data__,hn=wc(rt,Ce);return hn<0?(++this.size,rt.push([Ce,Ne])):rt[hn][1]=Ne,this}Oi.prototype.clear=si,Oi.prototype.delete=Zs,Oi.prototype.get=Xr,Oi.prototype.has=Hi,Oi.prototype.set=eo;function go(Ce){var Ne=-1,rt=Ce==null?0:Ce.length;for(this.clear();++Ne<rt;){var hn=Ce[Ne];this.set(hn[0],hn[1])}}function Qo(){this.size=0,this.__data__={hash:new ei,map:new(Ji||Oi),string:new ei}}function Ta(Ce){var Ne=kt(this,Ce).delete(Ce);return this.size-=Ne?1:0,Ne}function pd(Ce){return kt(this,Ce).get(Ce)}function Hr(Ce){return kt(this,Ce).has(Ce)}function Pl(Ce,Ne){var rt=kt(this,Ce),hn=rt.size;return rt.set(Ce,Ne),this.size+=rt.size==hn?0:1,this}go.prototype.clear=Qo,go.prototype.delete=Ta,go.prototype.get=pd,go.prototype.has=Hr,go.prototype.set=Pl;function bs(Ce){var Ne=this.__data__=new Oi(Ce);this.size=Ne.size}function Ya(){this.__data__=new Oi,this.size=0}function Jo(Ce){var Ne=this.__data__,rt=Ne.delete(Ce);return this.size=Ne.size,rt}function yh(Ce){return this.__data__.get(Ce)}function md(Ce){return this.__data__.has(Ce)}function mf(Ce,Ne){var rt=this.__data__;if(rt instanceof Oi){var hn=rt.__data__;if(!Ji||hn.length<n-1)return hn.push([Ce,Ne]),this.size=++rt.size,this;rt=this.__data__=new go(hn)}return rt.set(Ce,Ne),this.size=rt.size,this}bs.prototype.clear=Ya,bs.prototype.delete=Jo,bs.prototype.get=yh,bs.prototype.has=md,bs.prototype.set=mf;function gf(Ce,Ne){var rt=ko(Ce),hn=!rt&&Mi(Ce),ir=!rt&&!hn&&Ca(Ce),Or=!rt&&!hn&&!ir&&yd(Ce),gi=rt||hn||ir||Or,dn=gi?Me(Ce.length,String):[],Tr=dn.length;for(var Ir in Ce)gi&&(Ir=="length"||ir&&(Ir=="offset"||Ir=="parent")||Or&&(Ir=="buffer"||Ir=="byteLength"||Ir=="byteOffset")||Zt(Ir,Tr))||dn.push(Ir);return dn}function xc(Ce,Ne,rt){(rt!==void 0&&!to(Ce[Ne],rt)||rt===void 0&&!(Ne in Ce))&&Er(Ce,Ne,rt)}function _c(Ce,Ne,rt){var hn=Ce[Ne];(!(Ke.call(Ce,Ne)&&to(hn,rt))||rt===void 0&&!(Ne in Ce))&&Er(Ce,Ne,rt)}function wc(Ce,Ne){for(var rt=Ce.length;rt--;)if(to(Ce[rt][0],Ne))return rt;return-1}function Er(Ce,Ne,rt){Ne=="__proto__"&&nr?nr(Ce,Ne,{configurable:!0,enumerable:!0,value:rt,writable:!0}):Ce[Ne]=rt}var Ec=ht();function xs(Ce){return Ce==null?Ce===void 0?R:b:Hn&&Hn in Object(Ce)?Rt(Ce):ls(Ce)}function Ka(Ce){return ks(Ce)&&xs(Ce)==a}function As(Ce){if(!Ol(Ce)||lr(Ce))return!1;var Ne=Aa(Ce)?Qe:q;return Ne.test(yf(Ce))}function Nl(Ce){return ks(Ce)&&vp(Ce.length)&&!!W[xs(Ce)]}function Sc(Ce){if(!Ol(Ce))return br(Ce);var Ne=_n(Ce),rt=[];for(var hn in Ce)hn=="constructor"&&(Ne||!Ke.call(Ce,hn))||rt.push(hn);return rt}function Zo(Ce,Ne,rt,hn,ir){Ce!==Ne&&Ec(Ne,function(Or,gi){if(ir||(ir=new bs),Ol(Or))qi(Ce,Ne,gi,rt,Zo,hn,ir);else{var dn=hn?hn(Dl(Ce,gi),Or,gi+"",Ce,Ne,ir):void 0;dn===void 0&&(dn=Or),xc(Ce,gi,dn)}},Ml)}function qi(Ce,Ne,rt,hn,ir,Or,gi){var dn=Dl(Ce,rt),Tr=Dl(Ne,rt),Ir=gi.get(Tr);if(Ir){xc(Ce,rt,Ir);return}var _s=Or?Or(dn,Tr,rt+"",Ce,Ne,gi):void 0,ta=_s===void 0;if(ta){var Mr=ko(Tr),js=!Mr&&Ca(Tr),Li=!Mr&&!js&&yd(Tr);_s=Tr,Mr||js||Li?ko(dn)?_s=dn:cr(dn)?_s=Be(dn):js?(ta=!1,_s=ve(Tr)):Li?(ta=!1,_s=Se(Tr)):_s=[]:Rs(Tr)||Mi(Tr)?(_s=dn,Mi(dn)?_s=Tc(dn):(!Ol(dn)||Aa(dn))&&(_s=jt(Tr))):ta=!1}ta&&(gi.set(Tr,_s),ir(_s,Tr,hn,Or,gi),gi.delete(Tr)),xc(Ce,rt,_s)}function ti(Ce,Ne){return gd(Ao(Ce,Ne,Gn),Ce+"")}var rr=nr?function(Ce,Ne){return nr(Ce,"toString",{configurable:!0,enumerable:!1,value:xr(Ne),writable:!0})}:Gn;function ve(Ce,Ne){return Ce.slice()}function Ie(Ce){var Ne=new Ce.constructor(Ce.byteLength);return new Wt(Ne).set(new Wt(Ce)),Ne}function Se(Ce,Ne){var rt=Ie(Ce.buffer);return new Ce.constructor(rt,Ce.byteOffset,Ce.length)}function Be(Ce,Ne){var rt=-1,hn=Ce.length;for(Ne||(Ne=Array(hn));++rt<hn;)Ne[rt]=Ce[rt];return Ne}function ze(Ce,Ne,rt,hn){var ir=!rt;rt||(rt={});for(var Or=-1,gi=Ne.length;++Or<gi;){var dn=Ne[Or],Tr=void 0;Tr===void 0&&(Tr=Ce[dn]),ir?Er(rt,dn,Tr):_c(rt,dn,Tr)}return rt}function De(Ce){return ti(function(Ne,rt){var hn=-1,ir=rt.length,Or=ir>1?rt[ir-1]:void 0,gi=ir>2?rt[2]:void 0;for(Or=Ce.length>3&&typeof Or=="function"?(ir--,Or):void 0,gi&&qn(rt[0],rt[1],gi)&&(Or=ir<3?void 0:Or,ir=1),Ne=Object(Ne);++hn<ir;){var dn=rt[hn];dn&&Ce(Ne,dn,hn,Or)}return Ne})}function ht(Ce){return function(Ne,rt,hn){for(var ir=-1,Or=Object(Ne),gi=hn(Ne),dn=gi.length;dn--;){var Tr=gi[++ir];if(rt(Or[Tr],Tr,Or)===!1)break}return Ne}}function kt(Ce,Ne){var rt=Ce.__data__;return Sn(Ne)?rt[typeof Ne=="string"?"string":"hash"]:rt.map}function Nt(Ce,Ne){var rt=lt(Ce,Ne);return As(rt)?rt:void 0}function Rt(Ce){var Ne=Ke.call(Ce,Hn),rt=Ce[Hn];try{Ce[Hn]=void 0;var hn=!0}catch{}var ir=sn.call(Ce);return hn&&(Ne?Ce[Hn]=rt:delete Ce[Hn]),ir}function jt(Ce){return typeof Ce.constructor=="function"&&!_n(Ce)?Zi(bn(Ce)):{}}function Zt(Ce,Ne){var rt=typeof Ce;return Ne=Ne??o,!!Ne&&(rt=="number"||rt!="symbol"&&te.test(Ce))&&Ce>-1&&Ce%1==0&&Ce<Ne}function qn(Ce,Ne,rt){if(!Ol(rt))return!1;var hn=typeof Ne;return(hn=="number"?ea(rt)&&Zt(Ne,rt.length):hn=="string"&&Ne in rt)?to(rt[Ne],Ce):!1}function Sn(Ce){var Ne=typeof Ce;return Ne=="string"||Ne=="number"||Ne=="symbol"||Ne=="boolean"?Ce!=="__proto__":Ce===null}function lr(Ce){return!!Lt&&Lt in Ce}function _n(Ce){var Ne=Ce&&Ce.constructor,rt=typeof Ne=="function"&&Ne.prototype||_t;return Ce===rt}function br(Ce){var Ne=[];if(Ce!=null)for(var rt in Object(Ce))Ne.push(rt);return Ne}function ls(Ce){return sn.call(Ce)}function Ao(Ce,Ne,rt){return Ne=Dr(Ne===void 0?Ce.length-1:Ne,0),function(){for(var hn=arguments,ir=-1,Or=Dr(hn.length-Ne,0),gi=Array(Or);++ir<Or;)gi[ir]=hn[Ne+ir];ir=-1;for(var dn=Array(Ne+1);++ir<Ne;)dn[ir]=hn[ir];return dn[Ne]=rt(gi),Oe(Ce,this,dn)}}function Dl(Ce,Ne){if(!(Ne==="constructor"&&typeof Ce[Ne]=="function")&&Ne!="__proto__")return Ce[Ne]}var gd=Yu(rr);function Yu(Ce){var Ne=0,rt=0;return function(){var hn=Co(),ir=s-(hn-rt);if(rt=hn,ir>0){if(++Ne>=i)return arguments[0]}else Ne=0;return Ce.apply(void 0,arguments)}}function yf(Ce){if(Ce!=null){try{return Et.call(Ce)}catch{}try{return Ce+""}catch{}}return""}function to(Ce,Ne){return Ce===Ne||Ce!==Ce&&Ne!==Ne}var Mi=Ka(function(){return arguments}())?Ka:function(Ce){return ks(Ce)&&Ke.call(Ce,"callee")&&!Zn.call(Ce,"callee")},ko=Array.isArray;function ea(Ce){return Ce!=null&&vp(Ce.length)&&!Aa(Ce)}function cr(Ce){return ks(Ce)&&ea(Ce)}var Ca=Ei||Cc;function Aa(Ce){if(!Ol(Ce))return!1;var Ne=xs(Ce);return Ne==h||Ne==p||Ne==l||Ne==x}function vp(Ce){return typeof Ce=="number"&&Ce>-1&&Ce%1==0&&Ce<=o}function Ol(Ce){var Ne=typeof Ce;return Ce!=null&&(Ne=="object"||Ne=="function")}function ks(Ce){return Ce!=null&&typeof Ce=="object"}function Rs(Ce){if(!ks(Ce)||xs(Ce)!=y)return!1;var Ne=bn(Ce);if(Ne===null)return!0;var rt=Ke.call(Ne,"constructor")&&Ne.constructor;return typeof rt=="function"&&rt instanceof rt&&Et.call(rt)==Fe}var yd=me?Ye(me):Nl;function Tc(Ce){return ze(Ce,Ml(Ce))}function Ml(Ce){return ea(Ce)?gf(Ce):Sc(Ce)}var X0=De(function(Ce,Ne,rt){Zo(Ce,Ne,rt)});function xr(Ce){return function(){return Ce}}function Gn(Ce){return Ce}function Cc(){return!1}e.exports=X0}(R3,R3.exports)),R3.exports}var kut=Aut();const qY=gc(kut);function Jy(e){return structuredClone(e)}function WY(){const e=pp(),n=`${B0()}_${e}`;return Ai(i=>i.answers[n])}const vwe=U.createContext(null);function Rut(){const e=U.useContext(vwe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function v1(){return Ai(e=>e.config)}function zT(){const[e]=D1();return!!e.get("participantId")}function Voe(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function Iut(){const e=pp(),t=zY(),r=`${B0()}_${e}`,i=Ai(L=>L.trialValidation),s=Ai(L=>L.sequence),o=Ai(L=>L.answers),a=Ai(L=>L.modes),u=Ai(L=>L.otherTexts),l=bc(),{saveTrialAnswer:c,setreactiveAnswers:f,setMatrixAnswersRadio:d,setMatrixAnswersCheckbox:h,resetOtherText:p}=Al(),{storageEngine:m}=Yo(),g=Uw(),b=U.useMemo(()=>a.dataCollectionEnabled,[a]),y=gat(r),x=zT(),w=typeof e!="number"||x||!y,S=WY(),C=F0(),R=v1(),I=U.useMemo(()=>Date.now(),[]),O=Rut(),M=U.useCallback((L=!0)=>{if(typeof e!="number")return;const H=Jy(i[r]),D=Object.values(H).reduce((W,ee)=>Object.hasOwn(ee,"values")?{...W,...ee.values}:W,{});Object.entries(u).forEach(([W,ee])=>{Array.isArray(D[W])&&D[W].includes("__other")&&(D[W]=D[W].filter(oe=>oe!=="__other"),D[W].push(`other:${ee}`)),typeof D[W]=="string"&&D[W]==="__other"&&(D[W]=`other:${ee}`)});const{provenanceGraph:B}=H,z=Date.now(),{incorrectAnswers:G,helpButtonClickedCount:Z}=S,ne=O&&"current"in O&&O.current?O.current.splice(0,O.current.length):[];if(b&&S.endTime===-1){const W={answer:L?D:{},startTime:I,endTime:z,incorrectAnswers:G,provenanceGraph:B,windowEvents:ne,timedOut:!L,helpButtonClickedCount:Z};l(c({identifier:r,...W})),m&&m.saveAnswers({...o,[r]:W}),l(f({})),l(p()),l(h(null)),l(d(null))}let ue=e+1;const X=jY(s,e),q=X!==null&&X.some(W=>Object.hasOwn(W.currentBlock,"skip")&&W.currentBlock.skip!==void 0),te={...o,[r]:{answer:D,startTime:I,endTime:z,provenanceGraph:B,windowEvents:ne}};q&&[...X.flatMap(ee=>ee.currentBlock.skip?ee.currentBlock.skip.map(oe=>({...oe,firstIndex:ee.firstIndex,lastIndex:ee.lastIndex})):[])].some(ee=>{let oe=!1;const pe=Object.fromEntries(Object.entries(te).filter(([he])=>{const Ee=parseInt(he.slice(he.lastIndexOf("_")+1),10);return Ee>=ee.firstIndex&&Ee<=e})),ce=ee.check!=="block"?Object.entries(pe).filter(([he])=>he.slice(0,he.lastIndexOf("_"))===ee.name):Object.entries(pe);if(ce.length===0)return!1;if(ce.some(([he,Ee])=>!Ee))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(ee,null,2)}`);if(ee.check==="response"||ee.check==="responses"){const[he,Ee]=ce[0];ee.check==="response"?oe=ee.comparison==="equal"?ee.value===Ee.answer[ee.responseId]:ee.value!==Ee.answer[ee.responseId]:oe=!Voe(Ee.answer,he,R.components[he.slice(0,he.lastIndexOf("_"))],R)}else if(ee.check==="block"||ee.check==="repeatedComponent"){if(ce.length<ee.value)return!1;const he=ce.map(([ge,me])=>Voe(me.answer,ge,R.components[ge.slice(0,ge.lastIndexOf("_"))],R)),Ee=he.filter(ge=>ge).length,Ae=he.length-Ee;oe=ee.condition==="numCorrect"&&Ee===ee.value||ee.condition==="numIncorrect"&&Ae===ee.value}if(oe){const he=t.indexOf(ee.to),Ee=he===-1?pat(s,ee.to):-1;return ue=he===-1?Ee:he,!0}return!1}),C(`/${g}/${u0(ue)}${window.location.search}`)},[e,i,r,u,S,O,b,s,o,I,C,g,l,c,m,f,p,h,d,R,t]);return{isNextDisabled:w,goToNextStep:M}}function Put({label:e="Next",disabled:t=!1,onClick:n,configInUse:r}){const{isNextDisabled:i,goToNextStep:s}=Iut(),o=v1(),a=F0(),u=U.useCallback(()=>{n&&n(),s()},[s,n]),l=r==null?void 0:r.nextButtonDisableTime,c=(r==null?void 0:r.nextButtonEnableTime)||0,[f,d]=U.useState(void 0);U.useEffect(()=>{let p=0;const m=setInterval(()=>{p+=100,d(p)},100);return()=>{clearInterval(m)}},[]),U.useEffect(()=>{f&&l&&f>=l&&o.uiConfig.timeoutReject&&a("./../__timedOut")},[l,f,a,o.uiConfig.timeoutReject]);const h=U.useMemo(()=>{const p=l&&f?f<=l:!0,m=f?f>=c:!0;return p&&m},[l,c,f]);return U.useEffect(()=>{const p=m=>{m.key==="Enter"&&!t&&!i&&h&&s()};return o.uiConfig.nextOnEnter?(window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)}):()=>{}},[t,i,h,s,o.uiConfig.nextOnEnter]),k.jsxs(k.Fragment,{children:[k.jsx(Nn,{type:"submit",disabled:t||i||!h,onClick:u,children:e}),c>0&&f&&f<c&&k.jsxs(Yy,{mt:"md",title:"Please wait",color:"blue",icon:k.jsx(lG,{}),children:["The next button will be enabled in"," ",Math.ceil((c-f)/1e3)," ","seconds."]}),l&&f&&l-f<1e4&&(l-f>0?k.jsxs(Yy,{mt:"md",title:"Next button disables soon",color:"yellow",icon:k.jsx(lk,{}),children:["The next button disables in"," ",Math.ceil((l-f)/1e3)," ","seconds."]}):!o.uiConfig.timeoutReject&&k.jsxs(Yy,{mt:"md",title:"Next button disabled",color:"red",icon:k.jsx(lk,{}),children:["The next button has timed out and is now disabled.",k.jsx(Js,{justify:"right",mt:"sm",children:k.jsx(Nn,{onClick:()=>s(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})}function Nut(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const Dut=typeof window<"u"?U.useLayoutEffect:U.useEffect;function al(e,t){Dut(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Out(e,t){e&&Nut(e),al(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),al(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),al(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),al(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),al(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),al(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),al(`mantine-form:${e}:clear-errors`,t.clearErrors),al(`mantine-form:${e}:reset`,t.reset),al(`mantine-form:${e}:validate`,t.validate),al(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),al(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),al(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),al(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),al(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),al(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),al(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),al(`mantine-form:${e}:reset-touched`,t.resetTouched)}function Mut(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function pz(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function Lut(e){const[t,n]=U.useState(pz(e)),r=U.useRef(t),i=U.useCallback(u=>{n(l=>{const c=pz(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=U.useCallback(()=>i({}),[]),o=U.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=U.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function mz(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Hoe(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function qoe(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=mz(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Hoe(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Hoe(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function Fut(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Woe(e,t,n){typeof n.value=="object"&&(n.value=AE(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function AE(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(AE(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(AE(a),AE(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(AE(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Woe(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Woe(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function bwe(e){return typeof e!="string"?[]:e.split(".")}function yl(e,t){const n=bwe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!=null;i+=1)r=r[n[i]];return r}function OR(e,t,n){const r=bwe(e);if(r.length===0)return n;const i=AE(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function $ut(e,{from:t,to:n},r){const i=yl(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),OR(e,s,r)}function But(e,t,n,r){const i=yl(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),OR(e,s,r)}function jut(e,t,n){const r=yl(e,n);return Array.isArray(r)?OR(e,r.filter((i,s)=>s!==t),n):n}function Uut(e,t,n,r){const i=yl(e,r);if(!Array.isArray(i)||i.length<=n)return r;const s=[...i];return s[n]=t,OR(e,s,r)}function zut({$values:e,$errors:t,$status:n}){const r=U.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>Fut(a,u,l)),e.setValues({values:$ut(a,u,e.refValues.current),updateState:!0})},[]),i=U.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>qoe(a,u,l,-1)),e.setValues({values:jut(a,u,e.refValues.current),updateState:!0})},[]),s=U.useCallback((a,u,l)=>{n.clearFieldDirty(a),t.setErrors(c=>qoe(a,l,c,1)),e.setValues({values:But(a,u,l,e.refValues.current),updateState:!0})},[]),o=U.useCallback((a,u,l)=>{n.clearFieldDirty(a),e.setValues({values:Uut(a,l,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s,replaceListItem:o}}var C$,Goe;function GY(){return Goe||(Goe=1,C$=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),C$}var Vut=GY();const I3=gc(Vut);function tA(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function Hut({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=U.useState(t),[o,a]=U.useState(e),u=U.useRef(t),l=U.useRef(e),c=U.useCallback(C=>{const R=typeof C=="function"?C(u.current):C;u.current=R,n==="controlled"&&s(R)},[]),f=U.useCallback((C,R=!1)=>{const I=typeof C=="function"?C(l.current):C;l.current=I,(n==="controlled"||R)&&a(I)},[]),d=U.useCallback(()=>c({}),[]),h=U.useCallback(C=>{const R=C?{...C,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(R),f({})},[]),p=U.useCallback((C,R)=>{c(I=>tA(I,C)===R?I:{...I,[C]:R})},[]),m=U.useCallback((C,R,I)=>{f(O=>tA(O,C)===R?O:{...O,[C]:R},I)},[]),g=U.useCallback((C,R)=>{const I=tA(l.current,C),O=!I3(yl(C,r.getValuesSnapshot()),R),M=mz(C,l.current);M[C]=O,f(M,I!==O)},[]),b=U.useCallback(C=>tA(u.current,C),[]),y=U.useCallback(C=>f(R=>{if(typeof C!="string")return R;const I=mz(C,R);return delete I[C],I3(I,R)?R:I}),[]),x=U.useCallback(C=>{if(C){const I=yl(C,l.current);if(typeof I=="boolean")return I;const O=yl(C,r.refValues.current),M=yl(C,r.valuesSnapshot.current);return!I3(O,M)}return Object.keys(l.current).length>0?tA(l.current):!I3(r.refValues.current,r.valuesSnapshot.current)},[]),w=U.useCallback(()=>l.current,[]),S=U.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:b,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:x,getDirty:w,getTouched:S,setCalculatedFieldDirty:g}}function qut({initialValues:e,onValuesChange:t,mode:n}){const r=U.useRef(!1),[i,s]=U.useState(e||{}),o=U.useRef(i),a=U.useRef(i),u=U.useCallback(({values:m,subscribers:g,updateState:b=!0,mergeWithPreviousValues:y=!0})=>{const x=o.current,w=m instanceof Function?m(o.current):m,S=y?{...x,...w}:w;o.current=S,b&&s(S),t==null||t(S,x),g==null||g.filter(Boolean).forEach(C=>C({updatedValues:S,previousValues:x}))},[t]),l=U.useCallback(m=>{var y;const g=yl(m.path,o.current),b=m.value instanceof Function?m.value(g):m.value;if(g!==b){const x=o.current,w=OR(m.path,b,o.current);u({values:w,updateState:m.updateState}),(y=m.subscribers)==null||y.filter(Boolean).forEach(S=>S({path:m.path,updatedValues:w,previousValues:x}))}},[u]),c=U.useCallback(m=>{a.current=m},[]),f=U.useCallback((m,g)=>{r.current||(r.current=!0,u({values:m,updateState:n==="controlled"}),c(m),g())},[u]),d=U.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[u]),h=U.useCallback(()=>o.current,[]),p=U.useCallback(()=>a.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h,getValuesSnapshot:p}}function Wut({$status:e}){const t=U.useRef({}),n=U.useCallback((i,s)=>{U.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=U.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:yl(i,o.previousValues),value:yl(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Yoe(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Koe(e){const t=pz(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function gz(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=yl(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>gz(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||gz(o,t,a,i)),i},r)}function yz(e,t){return Koe(typeof e=="function"?e(t):gz(e,t))}function N6(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=yz(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const Gut="__MANTINE_FORM_INDEX__";function Xoe(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]+/g,`.${Gut}`)):!1:!1}function xwe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=m=>m,enhanceGetInputProps:f,validate:d,onSubmitPreventDefault:h="always",touchTrigger:p="change"}={}){const m=Lut(r),g=qut({initialValues:n,onValuesChange:l,mode:t}),b=Hut({initialDirty:i,initialTouched:s,$values:g,mode:t}),y=zut({$values:g,$errors:m,$status:b}),x=Wut({$status:b}),[w,S]=U.useState(0),[C,R]=U.useState({}),[I,O]=U.useState(!1),M=U.useCallback(()=>{g.resetValues(),m.clearErrors(),b.resetDirty(),b.resetTouched(),t==="uncontrolled"&&S(oe=>oe+1)},[]),L=U.useCallback(oe=>{o&&m.clearErrors(),t==="uncontrolled"&&S(pe=>pe+1),Object.keys(x.subscribers.current).forEach(pe=>{const ce=yl(pe,g.refValues.current),he=yl(pe,oe);ce!==he&&x.getFieldSubscribers(pe).forEach(Ee=>Ee({previousValues:oe,updatedValues:g.refValues.current}))})},[o]),H=U.useCallback(oe=>{const pe=g.refValues.current;g.initialize(oe,()=>t==="uncontrolled"&&S(ce=>ce+1)),L(pe)},[L]),D=U.useCallback((oe,pe,ce)=>{const he=Xoe(oe,a),Ee=pe instanceof Function?pe(yl(oe,g.refValues.current)):pe;b.setCalculatedFieldDirty(oe,Ee),p==="change"&&b.setFieldTouched(oe,!0),!he&&o&&m.clearFieldError(oe),g.setFieldValue({path:oe,value:pe,updateState:t==="controlled",subscribers:[...x.getFieldSubscribers(oe),he?Ae=>{const ge=N6(oe,d,Ae.updatedValues);ge.hasError?m.setFieldError(oe,ge.error):m.clearFieldError(oe)}:null,(ce==null?void 0:ce.forceUpdate)!==!1&&t!=="controlled"?()=>R(Ae=>({...Ae,[oe]:(Ae[oe]||0)+1})):null]})},[l,d]),B=U.useCallback(oe=>{const pe=g.refValues.current;g.setValues({values:oe,updateState:t==="controlled"}),L(pe)},[l,L]),z=U.useCallback(()=>{const oe=yz(d,g.refValues.current);return m.setErrors(oe.errors),oe},[d]),G=U.useCallback(oe=>{const pe=N6(oe,d,g.refValues.current);return pe.hasError?m.setFieldError(oe,pe.error):m.clearFieldError(oe),pe},[d]),Z=(oe,{type:pe="input",withError:ce=!0,withFocus:he=!0,...Ee}={})=>{const ge={onChange:Mut(me=>D(oe,me,{forceUpdate:!1})),"data-path":Yoe(e,oe)};return ce&&(ge.error=m.errorsState[oe]),pe==="checkbox"?ge[t==="controlled"?"checked":"defaultChecked"]=yl(oe,g.refValues.current):ge[t==="controlled"?"value":"defaultValue"]=yl(oe,g.refValues.current),he&&(ge.onFocus=()=>b.setFieldTouched(oe,!0),ge.onBlur=()=>{if(Xoe(oe,u)){const me=N6(oe,d,g.refValues.current);me.hasError?m.setFieldError(oe,me.error):m.clearFieldError(oe)}}),Object.assign(ge,f==null?void 0:f({inputProps:ge,field:oe,options:{type:pe,withError:ce,withFocus:he,...Ee},form:ee}))},ne=(oe,pe)=>ce=>{h==="always"&&(ce==null||ce.preventDefault());const he=z();if(he.hasErrors)h==="validation-failed"&&(ce==null||ce.preventDefault()),pe==null||pe(he.errors,g.refValues.current,ce);else{const Ee=oe==null?void 0:oe(c(g.refValues.current),ce);Ee instanceof Promise&&(O(!0),Ee.finally(()=>O(!1)))}},ue=oe=>c(oe||g.refValues.current),X=U.useCallback(oe=>{oe.preventDefault(),M()},[]),q=U.useCallback(oe=>oe?!N6(oe,d,g.refValues.current).hasError:!yz(d,g.refValues.current).hasErrors,[d]),te=oe=>`${w}-${oe}-${C[oe]||0}`,W=U.useCallback(oe=>document.querySelector(`[data-path="${Yoe(e,oe)}"]`),[]),ee={watch:x.watch,initialized:g.initialized.current,values:g.stateValues,getValues:g.getValues,setInitialValues:g.setValuesSnapshot,initialize:H,setValues:B,setFieldValue:D,submitting:I,setSubmitting:O,errors:m.errorsState,setErrors:m.setErrors,setFieldError:m.setFieldError,clearFieldError:m.clearFieldError,clearErrors:m.clearErrors,resetDirty:b.resetDirty,setTouched:b.setTouched,setDirty:b.setDirty,isTouched:b.isTouched,resetTouched:b.resetTouched,isDirty:b.isDirty,getTouched:b.getTouched,getDirty:b.getDirty,reorderListItem:y.reorderListItem,insertListItem:y.insertListItem,removeListItem:y.removeListItem,replaceListItem:y.replaceListItem,reset:M,validate:z,validateField:G,getInputProps:Z,onSubmit:ne,onReset:X,isValid:q,getTransformedValues:ue,key:te,getInputNode:W};return Out(e,ee),ee}function Yut(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Kut(e){return Yut(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function _we(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const Xut=new URLSearchParams(window.location.search),Qut=(e,t)=>{let n={};return e.forEach(r=>{const i=t[r.id];if(i)n={...n,[r.id]:i};else{let s="";r.paramCapture?s=Xut.get(r.paramCapture):r.type==="reactive"?s=[]:(r.type==="matrix-radio"||r.type==="matrix-checkbox")&&(s=Object.fromEntries(r.questionOptions.map(a=>[a,""])));const o=r.withDontKnow?{[`${r.id}-dontKnow`]:""}:{};n={...n,[r.id]:s,...o}}}),{...n}},Jut=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:(r,i)=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(s=>s!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const s=[...n.requiredValue].sort(),o=[...r].sort();return s.every((a,u)=>a===o[u])?null:"Incorrect input"}return n.type==="checkbox"?_we(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?(r==null||r==="")&&!i[`${n.id}-dontKnow`]?"Empty input":null:r===null?"Empty input":null}})}),t};function Zut(e,t,n){const[r,i]=U.useState(null),s=xwe({initialValues:Qut(e,n),validate:Jut(e)});return U.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function zw(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=_we(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function wwe({horizontal:e,children:t,style:n}){return e?k.jsx(Js,{mt:ot(4),gap:"lg",style:n,children:t}):k.jsx(El,{gap:"md",style:n,children:t})}function elt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u,horizontal:l,withOther:c}=e,f=a.map(x=>typeof x=="string"?{value:x,label:x}:x),[d,h]=U.useState(!1),[p,m]=U.useState(""),{setOtherText:g}=Al(),b=bc();U.useEffect(()=>{b(g({key:e.id,value:p}))},[p,e.id,g,b]);const y=U.useMemo(()=>zw(e,n,f),[e,n,f]);return k.jsxs(ic.Group,{label:k.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&k.jsx(Ue,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),k.jsx(Ue,{style:{display:"block"},className:"no-last-child-bottom-padding",children:k.jsx(dc,{text:s,required:o})})]}),description:u,...n,error:y,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[k.jsx(Ue,{mt:"xs",children:k.jsxs(wwe,{horizontal:!!l,style:{flexGrow:1},children:[f.map(x=>k.jsx(ic,{disabled:t,value:x.value,label:x.label},x.value)),c&&k.jsx(ic,{disabled:t,value:"__other",checked:d,onClick:x=>h(x.currentTarget.checked),label:l?"Other":k.jsx(ys,{mt:-8,placeholder:"Other",disabled:!d,value:p,onChange:x=>m(x.currentTarget.value)})},"__other")]})}),l&&c&&k.jsx(ys,{mt:"sm",placeholder:"Other",disabled:!d,value:p,onChange:x=>m(x.currentTarget.value),w:216})]})}function tlt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return k.jsx(ET,{disabled:t,label:k.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&k.jsx(Ue,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),k.jsx(Ue,{style:{display:"block"},className:"no-last-child-bottom-padding",children:k.jsx(dc,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:zw(e,n,c)})}function nlt({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return k.jsx(ys.Wrapper,{label:k.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[r&&k.jsx(Ue,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),k.jsx(Ue,{style:{display:"block"},className:"no-last-child-bottom-padding",children:k.jsx(dc,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&k.jsx(b0,{children:Array.isArray(t.value)?t.value.map(a=>k.jsx(b0.Item,{children:a},a)):k.jsx(b0.Item,{children:t.value})})})}function Ewe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:s}){const{prompt:o,required:a,options:u,leftLabel:l,rightLabel:c,secondaryText:f,horizontal:d,withOther:h}=e,p=u.map(S=>typeof S=="string"?{value:S,label:S}:S),[m,g]=U.useState(!1),[b,y]=U.useState(""),{setOtherText:x}=Al(),w=bc();return U.useEffect(()=>{w(x({key:e.id,value:b}))},[b,e.id,x,w]),k.jsxs(ac.Group,{name:`radioInput${e.id}`,label:k.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&k.jsx(Ue,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),k.jsx(Ue,{style:{display:"block"},className:"no-last-child-bottom-padding",children:k.jsx(dc,{text:o,required:a})})]}),description:f,...n,error:zw(e,n,p),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[k.jsxs(Js,{gap:"lg",align:"flex-end",mt:d?0:"sm",children:[l?k.jsx(At,{children:l}):null,k.jsxs(wwe,{horizontal:!!d,style:{flexGrow:1},children:[p.map(S=>k.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?"unset":ot(12),flex:s?1:"unset",alignItems:"center"},children:[d&&k.jsx(At,{size:"sm",children:S.label}),k.jsx(ac,{disabled:t,value:S.value,label:S.label,styles:{label:{display:"none"}},onChange:()=>g(!1)}),!d&&k.jsx(At,{size:"sm",children:S.label})]},`${S.value}-${e.id}`)),h&&k.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?"unset":ot(12),flex:s?1:"unset",alignItems:"center"},children:[d&&k.jsx(At,{size:"sm",children:"Other"}),k.jsx(ac,{disabled:t,value:"other",checked:m,onClick:S=>g(S.currentTarget.checked),label:!d&&k.jsx(ys,{mt:-8,placeholder:"Other",disabled:!m,value:b,onChange:S=>y(S.currentTarget.value)}),mt:0})]})]}),k.jsx(At,{children:c})]}),d&&h&&k.jsx(ys,{mt:"sm",placeholder:"Other",disabled:!m,value:b,onChange:S=>y(S.currentTarget.value),w:216})]},e.id)}function rlt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o,horizontal:!0};return k.jsx(Ewe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function ilt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return k.jsx(MW,{disabled:t,placeholder:l,label:k.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&k.jsx(Ue,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),k.jsx(Ue,{style:{display:"block"},className:"no-last-child-bottom-padding",children:k.jsx(dc,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:zw(e,n)})}const slt="_markLabel_17u7l_1",olt={markLabel:slt};function alt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,[l,c]=U.useMemo(()=>[Math.min(...a.map(d=>d.value)),Math.max(...a.map(d=>d.value))],[a]),f=zw(e,n);return k.jsx(ys.Wrapper,{label:k.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&k.jsx(Ue,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),k.jsx(Ue,{style:{display:"block"},className:"no-last-child-bottom-padding",children:k.jsx(dc,{text:s,required:o})})]}),description:u,error:f,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:k.jsx(d9,{disabled:t,marks:a,min:l,max:c,...n,h:40,mt:4,classNames:{markLabel:olt.markLabel}})})}function ult({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return k.jsx(Fy,{disabled:t,placeholder:s,label:k.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&k.jsx(Ue,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),k.jsx(Ue,{style:{display:"block"},className:"no-last-child-bottom-padding",children:k.jsx(dc,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:zw(e,n)})}function llt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return k.jsx(wW,{disabled:t,placeholder:s,label:k.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&k.jsx(Ue,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),k.jsx(Ue,{style:{display:"block"},className:"no-last-child-bottom-padding",children:k.jsx(dc,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:zw(e,n)})}function clt({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:s,disabled:o}){return k.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>k.jsx(ic,{disabled:o,checked:i.value[r.label].split("|").includes(a.value),onChange:u=>s(u,r.label,a),value:a.value},`${a.label}-${n}`))})}function flt({_choices:e,_n:t,idx:n,question:r,response:i,answer:s,onChange:o,disabled:a}){return k.jsx(ac.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:u=>o(u,r.label),value:s.value[r.label],children:k.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(u=>k.jsx(ac,{disabled:a,value:u.value},`${u.label}-${n}`))})},`${i.id}-${n}`)}function dlt({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:s,setMatrixAnswersCheckbox:o}=Al(),a=bc(),{answerOptions:u,questionOptions:l,prompt:c,secondaryText:f,required:d}=e,p=typeof u=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[u].map(w=>({value:w,label:w})):u.map(w=>typeof w=="string"?{value:w,label:w}:w),m=l.map(w=>typeof w=="string"?{value:w,label:w}:w),g=(w,S)=>{const C={type:"radio",questionKey:S,val:w,responseId:e.id};a(s(C))},b=(w,S,C)=>{const R=w.target.checked,I={questionKey:S,responseId:e.id,value:C.value,label:C.label,isChecked:R,choiceOptions:p};a(o(I))},y=p.length,x=m.length;return k.jsxs(k.Fragment,{children:[k.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&k.jsx(Ue,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),k.jsx(Ue,{style:{display:"block"},className:"no-last-child-bottom-padding",children:k.jsx(dc,{text:c,required:d})})]}),k.jsx(At,{c:"dimmed",size:"sm",mt:0,children:f}),k.jsxs(Ue,{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr"},m:"md",mt:"xs",children:[k.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),k.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${y}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:p.map((w,S)=>k.jsx(At,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:w.label},`choice-${S}-label`))}),k.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${x}, 1fr)`},children:m.map((w,S)=>k.jsx(At,{style:{height:"80px",width:"100%",display:"flex",alignItems:"center",justifyContent:"end",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(S+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,overflowY:"hidden"},ta:"right",p:"sm",miw:140,children:w.label},`question-${S}-label`))}),k.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${x},1fr)`},children:m.map((w,S)=>k.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(S+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?k.jsx(flt,{disabled:r,idx:S,question:w,answer:t,_choices:p,_n:y,onChange:g,response:e}):k.jsx(clt,{disabled:r,idx:S,question:w,answer:t,_choices:p,_n:y,onChange:b})},`question-${S}`))})]})]})}function hlt({response:e,answer:t,storedAnswer:n,index:r,configInUse:i,form:s}){const o=(Object.keys(n||{}).length>0?{value:n[e.id]}:t)||{value:void 0},a=Object.keys(n||{}).length>0,[u]=D1(),c=v1().uiConfig.enumerateQuestions??!1,f=U.useMemo(()=>{if(e.paramCapture){const p=u.get(e.paramCapture);return a||!!p}return a},[a,e.paramCapture,u]),[d,h]=U.useState(!!(n!=null&&n[`${e.id}-dontKnow`])||!1);return U.useEffect(()=>{s.setFieldValue(`${e.id}-dontKnow`,d.toString()),d||s.setFieldValue(e.id,"false")},[d,e.id]),k.jsxs(Ue,{mb:e.withDivider||i.responseDividers?"xl":"lg",children:[e.type==="numerical"&&k.jsx(ilt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="shortText"&&k.jsx(ult,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="longText"&&k.jsx(llt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="likert"&&k.jsx(rlt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="dropdown"&&k.jsx(tlt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="slider"&&k.jsx(alt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="radio"&&k.jsx(Ewe,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="checkbox"&&k.jsx(elt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="reactive"&&k.jsx(nlt,{response:e,answer:o,index:r,enumerateQuestions:c}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&k.jsx(dlt,{disabled:f||d,response:e,answer:o,index:r,enumerateQuestions:c}),e.withDontKnow&&k.jsx(ic,{mt:"xs",disabled:f,label:"I don't know",checked:d,onChange:p=>h(p.currentTarget.checked)}),(e.withDivider||i.responseDividers)&&k.jsx(Zd,{mt:"xl",mb:"xs"})]})}function $8({config:e,location:t,status:n,style:r}){var X;const{storageEngine:i}=Yo(),s=bc(),{updateResponseBlockValidation:o,toggleShowHelpText:a,saveIncorrectAnswer:u,incrementHelpCounter:l}=Al(),c=pp(),f=B0(),d=n==null?void 0:n.answer,h=Uw(),p=F0(),m=e,g=U.useMemo(()=>{var q;return((q=m==null?void 0:m.response)==null?void 0:q.filter(te=>te.location?te.location===t:t==="belowStimulus"))||[]},[m==null?void 0:m.response,t]),b=U.useMemo(()=>g.map(q=>({...q,required:q.required===void 0?!0:q.required})),[g]),y=Zut(b,c,d||{}),[x,w]=U.useState(void 0),S=Ai(q=>q.reactiveAnswers),C=Ai(q=>q.reactiveProvenance),R=Ai(q=>q.matrixAnswers),I=(m==null?void 0:m.provideFeedback)&&(((X=m==null?void 0:m.correctAnswer)==null?void 0:X.length)||0)>0,O=(m==null?void 0:m.allowFailedTraining)===void 0?!0:m.allowFailedTraining,[M,L]=U.useState(0),H=(m==null?void 0:m.trainingAttempts)||2,[D,B]=U.useState(!1),z=t===((m==null?void 0:m.nextButtonLocation)||"belowStimulus");U.useEffect(()=>{const q=b.find(te=>te.type==="reactive");if(S&&q){const te=q.id;y.setValues({...y.values,[te]:S[te]})}},[S]),U.useEffect(()=>{C&&w(C)},[C]),U.useEffect(()=>{const q=b.filter(te=>te.type==="matrix-radio"||te.type==="matrix-checkbox");if(R&&q.length>0){const te={...y.values};q.forEach(W=>{const{id:ee}=W;te[ee]={...y.getInputProps(ee).value,...R[ee]}}),y.setValues(te)}},[R]),U.useEffect(()=>{s(o({location:t,identifier:`${f}_${c}`,status:y.isValid(),values:Jy(y.values),provenanceGraph:x}))},[y.values,f,c,t,s,o,x]);const[G,Z]=U.useState(Object.fromEntries(b.map(q=>[q.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),ne=(q,te,W,ee,oe)=>{Z(pe=>({...pe,[q]:{visible:te,title:W,message:ee,color:oe}}))},ue=()=>{const q=M+1;L(q);const te=Object.fromEntries(b.map(W=>{var pe,ce;const ee=(ce=(pe=m.correctAnswer)==null?void 0:pe.find(he=>he.id===W.id))==null?void 0:ce.answer,oe=y.values[W.id];return[W.id,Array.isArray(oe)?typeof ee=="string"?oe.length===1&&ee===oe[0]:oe.length===ee.length&&oe.every(he=>ee.includes(he)):ee===oe]}));I&&(b.forEach(W=>{var ee;if(te[W.id]&&!((ee=G[W.id])!=null&&ee.message.includes("You've failed to answer this question correctly")))ne(W.id,!0,"Correct Answer","You have answered the question correctly.","green");else{s(u({question:`${f}_${c}`,identifier:W.id,answer:y.values[W.id]}));let oe="";H===-1?oe="Please try again.":q>=H?(oe=`You didn't answer this question correctly after ${H} attempts. ${O?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!O&&i&&i.rejectCurrentParticipant(h,"Failed training").then(()=>{setTimeout(()=>{p("./../__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{p("./../__trainingFailed")},5e3)})):H-q===1?oe="Please try again. You have 1 attempt left.":oe=`Please try again. You have ${H-q} attempts left.`,ne(W.id,!0,"Incorrect Answer",oe,"red")}}),B(O&&q>=H||Object.values(te).every(W=>W)&&q<=H))};return k.jsxs("div",{style:r,children:[b.map((q,te)=>{var ee,oe;const W=(oe=(ee=m.correctAnswer)==null?void 0:ee.find(pe=>pe.id===q.id))==null?void 0:oe.answer;return k.jsx(sr.Fragment,{children:q.hidden?"":k.jsxs(k.Fragment,{children:[k.jsx(hlt,{storedAnswer:d,answer:{...y.getInputProps(q.id,{type:q.type==="checkbox"?"checkbox":"input"})},response:q,index:te+1,configInUse:m,form:y}),G[q.id].visible&&k.jsxs(Yy,{mb:"md",title:G[q.id].title,color:G[q.id].color,children:[G[q.id].message," ",G[q.id].message.includes("Please try again")&&k.jsxs(k.Fragment,{children:[k.jsx("br",{}),k.jsx("br",{}),"If you're unsure"," ",k.jsx(kw,{style:{fontSize:14},onClick:()=>{s(a()),s(l({identifier:`${f}_${c}`}))},children:"review the help text."})," "]}),k.jsx("br",{}),k.jsx("br",{}),M>=H&&H>=0&&W&&` The correct answer was: ${W}.`]})]})},`${q.id}-${c}`)}),k.jsxs(Js,{justify:"right",gap:"xs",children:[I&&z&&k.jsx(Nn,{onClick:()=>ue(),disabled:!y.isValid()||M>=H&&H>=0,children:"Check Answer"}),z&&k.jsx(Put,{disabled:I&&!D||!y.isValid(),label:m.nextButtonText||"Next",configInUse:m})]})]})}const nA="@REVISIT_COMMS",plt={minHeight:"500px",width:"100%",border:0};function mlt({currentConfig:e}){const{setreactiveAnswers:t,setreactiveProvenance:n}=Al(),r=bc(),i=Q_e(),s=U.useRef(null),o=U.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=B0(),u=U.useCallback((l,c)=>{var f,d;(d=(f=s.current)==null?void 0:f.contentWindow)==null||d.postMessage({error:!1,type:`${nA}/${l}`,iframeId:o,message:c},"*")},[s,o]);return U.useEffect(()=>{const l=c=>{const{data:f}=c;if(typeof f=="object"&&o===f.iframeId)switch(f.type){case`${nA}/WINDOW_READY`:e.parameters&&u("STUDY_DATA",e.parameters);break;case`${nA}/READY`:s.current&&(s.current.style.height=`${f.message.documentHeight}px`);break;case`${nA}/ANSWERS`:r(t(f.message));break;case`${nA}/PROVENANCE`:r(n(f.message));break}};return window.addEventListener("message",l),()=>window.removeEventListener("message",l)},[r,i,o,e,u,t,n]),k.jsx("iframe",{ref:s,src:e.path.startsWith("http")?e.path:`${Uu}${e.path}?trialid=${a}&id=${o}`,style:plt})}async function YY(e){const n=await(await fetch(`${Uu}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}async function glt(e){const t=await fetch(`${Uu}${e}`);let n;try{n=await t.json()}catch(r){console.error("Invalid JSON:",r)}return n}function yb({email:e,path:t}){const n=dp();return k.jsxs(c1,{fluid:!0,my:50,maw:800,mx:"auto",children:[k.jsx(co,{order:2,children:k.jsx(At,{span:!0,c:"orange",children:"404"})}),k.jsxs(At,{children:[k.jsx(At,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),k.jsx(eh,{h:"lg"}),k.jsxs(b0,{children:[k.jsx(b0.Item,{children:k.jsx(At,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),k.jsx(b0.Item,{children:k.jsxs(At,{children:["If you're a participant, please contact the study administrator"," ",e&&k.jsxs(k.Fragment,{children:["at"," ",k.jsxs(kw,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const ylt={maxWidth:"100%"};function vlt({currentConfig:e}){const t={...ylt,...e.style},[n,r]=U.useState(!0),[i,s]=U.useState(!1);return U.useEffect(()=>{async function o(){const a=await YY(e.path);s(!!a),r(!1)}o()},[e]),n||i?k.jsx(qb,{mx:"auto",src:`${Uu}${e.path}`,style:t}):k.jsx(yb,{path:e.path})}function Zy(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function blt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function VT(e){let t,n,r;e.length!==2?(t=Zy,n=(a,u)=>Zy(e(a),u),r=(a,u)=>e(a)-u):(t=e===Zy||e===blt?e:xlt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function xlt(){return 0}function Swe(e){return e===null?NaN:+e}function*_lt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const Twe=VT(Zy),vb=Twe.right,wlt=Twe.left;VT(Swe).center;function Elt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Slt(e,t){const n=Elt(e,t);return n&&Math.sqrt(n)}function Tlt(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class af{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Qoe extends Map{constructor(t,n=kwe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(vz(this,t))}has(t){return super.has(vz(this,t))}set(t,n){return super.set(Cwe(this,t),n)}delete(t){return super.delete(Awe(this,t))}}class B8 extends Set{constructor(t,n=kwe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(vz(this,t))}add(t){return super.add(Cwe(this,t))}delete(t){return super.delete(Awe(this,t))}}function vz({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Cwe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Awe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function kwe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Clt(e,t){return Array.from(t,n=>e[n])}function Alt(e=Zy){if(e===Zy)return Rwe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Rwe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const klt=Math.sqrt(50),Rlt=Math.sqrt(10),Ilt=Math.sqrt(2);function j8(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=klt?10:s>=Rlt?5:s>=Ilt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?j8(e,t,n*2):[a,u,l]}function bz(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?j8(t,e,n):j8(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function xz(e,t,n){return t=+t,e=+e,n=+n,j8(e,t,n)[2]}function bb(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?xz(t,e,n):xz(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function D_(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function _z(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Iwe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Rwe:Alt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));Iwe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(rA(e,n,t),i(e[r],s)>0&&rA(e,n,r);o<a;){for(rA(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?rA(e,n,a):(++a,rA(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function rA(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function wz(e,t,n){if(e=Float64Array.from(_lt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return _z(e);if(t>=1)return D_(e);var r,i=(r-1)*t,s=Math.floor(i),o=D_(Iwe(e,s).subarray(0,s+1)),a=_z(e.subarray(s+1));return o+(a-o)*(i-s)}}function Pwe(e,t,n=Swe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Plt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function Nwe(e,t){return wz(e,.5,t)}function*Nlt(e){for(const t of e)yield*t}function Dwe(e){return Array.from(Nlt(e))}function Kd(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Owe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Dlt(e,...t){e=new B8(e),t=t.map(Olt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Olt(e){return e instanceof B8?e:new B8(e)}function Mlt(...e){const t=new B8;for(const n of e)for(const r of n)t.add(r);return t}var Llt={value:()=>{}};function KY(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new xN(n)}function xN(e){this._=e}function Flt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}xN.prototype=KY.prototype={constructor:xN,on:function(e,t){var n=this._,r=Flt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=$lt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Joe(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Joe(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new xN(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function $lt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Joe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Llt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ez="http://www.w3.org/1999/xhtml";const Zoe={svg:"http://www.w3.org/2000/svg",xhtml:Ez,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tM(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Zoe.hasOwnProperty(t)?{space:Zoe[t],local:e}:e}function Blt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ez&&t.documentElement.namespaceURI===Ez?t.createElement(e):t.createElementNS(n,e)}}function jlt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Mwe(e){var t=tM(e);return(t.local?jlt:Blt)(t)}function Ult(){}function XY(e){return e==null?Ult:function(){return this.querySelector(e)}}function zlt(e){typeof e!="function"&&(e=XY(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new lh(r,this._parents)}function Vlt(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Hlt(){return[]}function Lwe(e){return e==null?Hlt:function(){return this.querySelectorAll(e)}}function qlt(e){return function(){return Vlt(e.apply(this,arguments))}}function Wlt(e){typeof e=="function"?e=qlt(e):e=Lwe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new lh(r,i)}function Fwe(e){return function(){return this.matches(e)}}function $we(e){return function(t){return t.matches(e)}}var Glt=Array.prototype.find;function Ylt(e){return function(){return Glt.call(this.children,e)}}function Klt(){return this.firstElementChild}function Xlt(e){return this.select(e==null?Klt:Ylt(typeof e=="function"?e:$we(e)))}var Qlt=Array.prototype.filter;function Jlt(){return Array.from(this.children)}function Zlt(e){return function(){return Qlt.call(this.children,e)}}function ect(e){return this.selectAll(e==null?Jlt:Zlt(typeof e=="function"?e:$we(e)))}function tct(e){typeof e!="function"&&(e=Fwe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new lh(r,this._parents)}function Bwe(e){return new Array(e.length)}function nct(){return new lh(this._enter||this._groups.map(Bwe),this._parents)}function U8(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}U8.prototype={constructor:U8,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function rct(e){return function(){return e}}function ict(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new U8(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function sct(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new U8(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function oct(e){return e.__data__}function act(e,t){if(!arguments.length)return Array.from(this,oct);var n=t?sct:ict,r=this._parents,i=this._groups;typeof e!="function"&&(e=rct(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=uct(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),b=u[l]=new Array(d);n(c,f,m,g,b,h,t);for(var y=0,x=0,w,S;y<p;++y)if(w=m[y]){for(y>=x&&(x=y+1);!(S=g[x])&&++x<p;);w._next=S||null}}return o=new lh(o,r),o._enter=a,o._exit=u,o}function uct(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function lct(){return new lh(this._exit||this._groups.map(Bwe),this._parents)}function cct(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function fct(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new lh(a,this._parents)}function dct(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function hct(e){e||(e=pct);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new lh(i,this._parents).order()}function pct(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function mct(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function gct(){return Array.from(this)}function yct(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function vct(){let e=0;for(const t of this)++e;return e}function bct(){return!this.node()}function xct(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function _ct(e){return function(){this.removeAttribute(e)}}function wct(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ect(e,t){return function(){this.setAttribute(e,t)}}function Sct(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Tct(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Cct(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Act(e,t){var n=tM(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?wct:_ct:typeof t=="function"?n.local?Cct:Tct:n.local?Sct:Ect)(n,t))}function jwe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function kct(e){return function(){this.style.removeProperty(e)}}function Rct(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ict(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Pct(e,t,n){return arguments.length>1?this.each((t==null?kct:typeof t=="function"?Ict:Rct)(e,t,n??"")):SS(this.node(),e)}function SS(e,t){return e.style.getPropertyValue(t)||jwe(e).getComputedStyle(e,null).getPropertyValue(t)}function Nct(e){return function(){delete this[e]}}function Dct(e,t){return function(){this[e]=t}}function Oct(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Mct(e,t){return arguments.length>1?this.each((t==null?Nct:typeof t=="function"?Oct:Dct)(e,t)):this.node()[e]}function Uwe(e){return e.trim().split(/^|\s+/)}function QY(e){return e.classList||new zwe(e)}function zwe(e){this._node=e,this._names=Uwe(e.getAttribute("class")||"")}zwe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Vwe(e,t){for(var n=QY(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Hwe(e,t){for(var n=QY(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Lct(e){return function(){Vwe(this,e)}}function Fct(e){return function(){Hwe(this,e)}}function $ct(e,t){return function(){(t.apply(this,arguments)?Vwe:Hwe)(this,e)}}function Bct(e,t){var n=Uwe(e+"");if(arguments.length<2){for(var r=QY(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?$ct:t?Lct:Fct)(n,t))}function jct(){this.textContent=""}function Uct(e){return function(){this.textContent=e}}function zct(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Vct(e){return arguments.length?this.each(e==null?jct:(typeof e=="function"?zct:Uct)(e)):this.node().textContent}function Hct(){this.innerHTML=""}function qct(e){return function(){this.innerHTML=e}}function Wct(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Gct(e){return arguments.length?this.each(e==null?Hct:(typeof e=="function"?Wct:qct)(e)):this.node().innerHTML}function Yct(){this.nextSibling&&this.parentNode.appendChild(this)}function Kct(){return this.each(Yct)}function Xct(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qct(){return this.each(Xct)}function Jct(e){var t=typeof e=="function"?e:Mwe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Zct(){return null}function eft(e,t){var n=typeof e=="function"?e:Mwe(e),r=t==null?Zct:typeof t=="function"?t:XY(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function tft(){var e=this.parentNode;e&&e.removeChild(this)}function nft(){return this.each(tft)}function rft(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ift(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function sft(e){return this.select(e?ift:rft)}function oft(e){return arguments.length?this.property("__data__",e):this.node().__data__}function aft(e){return function(t){e.call(this,t,this.__data__)}}function uft(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function lft(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function cft(e,t,n){return function(){var r=this.__on,i,s=aft(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function fft(e,t,n){var r=uft(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?cft:lft,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function qwe(e,t,n){var r=jwe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function dft(e,t){return function(){return qwe(this,e,t)}}function hft(e,t){return function(){return qwe(this,e,t.apply(this,arguments))}}function pft(e,t){return this.each((typeof t=="function"?hft:dft)(e,t))}function*mft(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Wwe=[null];function lh(e,t){this._groups=e,this._parents=t}function MR(){return new lh([[document.documentElement]],Wwe)}function gft(){return this}lh.prototype=MR.prototype={constructor:lh,select:zlt,selectAll:Wlt,selectChild:Xlt,selectChildren:ect,filter:tct,data:act,enter:nct,exit:lct,join:cct,merge:fct,selection:gft,order:dct,sort:hct,call:mct,nodes:gct,node:yct,size:vct,empty:bct,each:xct,attr:Act,style:Pct,property:Mct,classed:Bct,text:Vct,html:Gct,raise:Kct,lower:Qct,append:Jct,insert:eft,remove:nft,clone:sft,datum:oft,on:fft,dispatch:pft,[Symbol.iterator]:mft};function $u(e){return typeof e=="string"?new lh([[document.querySelector(e)]],[document.documentElement]):new lh([[e]],Wwe)}function yft(e){let t;for(;t=e.sourceEvent;)e=t;return e}function JY(e,t){if(e=yft(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function HT(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function LR(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Qb(){}var X_=.7,TS=1/X_,WE="\\s*([+-]?\\d+)\\s*",p4="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vft=/^#([0-9a-f]{3,8})$/,bft=new RegExp(`^rgb\\(${WE},${WE},${WE}\\)$`),xft=new RegExp(`^rgb\\(${qm},${qm},${qm}\\)$`),_ft=new RegExp(`^rgba\\(${WE},${WE},${WE},${p4}\\)$`),wft=new RegExp(`^rgba\\(${qm},${qm},${qm},${p4}\\)$`),Eft=new RegExp(`^hsl\\(${p4},${qm},${qm}\\)$`),Sft=new RegExp(`^hsla\\(${p4},${qm},${qm},${p4}\\)$`),eae={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};HT(Qb,Q_,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:tae,formatHex:tae,formatHex8:Tft,formatHsl:Cft,formatRgb:nae,toString:nae});function tae(){return this.rgb().formatHex()}function Tft(){return this.rgb().formatHex8()}function Cft(){return Gwe(this).formatHsl()}function nae(){return this.rgb().formatRgb()}function Q_(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=vft.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?rae(t):n===3?new Du(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?D6(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?D6(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bft.exec(e))?new Du(t[1],t[2],t[3],1):(t=xft.exec(e))?new Du(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_ft.exec(e))?D6(t[1],t[2],t[3],t[4]):(t=wft.exec(e))?D6(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Eft.exec(e))?oae(t[1],t[2]/100,t[3]/100,1):(t=Sft.exec(e))?oae(t[1],t[2]/100,t[3]/100,t[4]):eae.hasOwnProperty(e)?rae(eae[e]):e==="transparent"?new Du(NaN,NaN,NaN,0):null}function rae(e){return new Du(e>>16&255,e>>8&255,e&255,1)}function D6(e,t,n,r){return r<=0&&(e=t=n=NaN),new Du(e,t,n,r)}function ZY(e){return e instanceof Qb||(e=Q_(e)),e?(e=e.rgb(),new Du(e.r,e.g,e.b,e.opacity)):new Du}function xb(e,t,n,r){return arguments.length===1?ZY(e):new Du(e,t,n,r??1)}function Du(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}HT(Du,xb,LR(Qb,{brighter(e){return e=e==null?TS:Math.pow(TS,e),new Du(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?X_:Math.pow(X_,e),new Du(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Du(O_(this.r),O_(this.g),O_(this.b),z8(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:iae,formatHex:iae,formatHex8:Aft,formatRgb:sae,toString:sae}));function iae(){return`#${T_(this.r)}${T_(this.g)}${T_(this.b)}`}function Aft(){return`#${T_(this.r)}${T_(this.g)}${T_(this.b)}${T_((isNaN(this.opacity)?1:this.opacity)*255)}`}function sae(){const e=z8(this.opacity);return`${e===1?"rgb(":"rgba("}${O_(this.r)}, ${O_(this.g)}, ${O_(this.b)}${e===1?")":`, ${e})`}`}function z8(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function O_(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function T_(e){return e=O_(e),(e<16?"0":"")+e.toString(16)}function oae(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new l0(e,t,n,r)}function Gwe(e){if(e instanceof l0)return new l0(e.h,e.s,e.l,e.opacity);if(e instanceof Qb||(e=Q_(e)),!e)return new l0;if(e instanceof l0)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new l0(o,a,u,e.opacity)}function V8(e,t,n,r){return arguments.length===1?Gwe(e):new l0(e,t,n,r??1)}function l0(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}HT(l0,V8,LR(Qb,{brighter(e){return e=e==null?TS:Math.pow(TS,e),new l0(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?X_:Math.pow(X_,e),new l0(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Du(A$(e>=240?e-240:e+120,i,r),A$(e,i,r),A$(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new l0(aae(this.h),O6(this.s),O6(this.l),z8(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=z8(this.opacity);return`${e===1?"hsl(":"hsla("}${aae(this.h)}, ${O6(this.s)*100}%, ${O6(this.l)*100}%${e===1?")":`, ${e})`}`}}));function aae(e){return e=(e||0)%360,e<0?e+360:e}function O6(e){return Math.max(0,Math.min(1,e||0))}function A$(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ywe=Math.PI/180,Kwe=180/Math.PI,H8=18,Xwe=.96422,Qwe=1,Jwe=.82521,Zwe=4/29,GE=6/29,e2e=3*GE*GE,kft=GE*GE*GE;function t2e(e){if(e instanceof Wm)return new Wm(e.l,e.a,e.b,e.opacity);if(e instanceof Uy)return n2e(e);e instanceof Du||(e=ZY(e));var t=P$(e.r),n=P$(e.g),r=P$(e.b),i=k$((.2225045*t+.7168786*n+.0606169*r)/Qwe),s,o;return t===n&&n===r?s=o=i:(s=k$((.4360747*t+.3850649*n+.1430804*r)/Xwe),o=k$((.0139322*t+.0971045*n+.7141733*r)/Jwe)),new Wm(116*i-16,500*(s-i),200*(i-o),e.opacity)}function q8(e,t,n,r){return arguments.length===1?t2e(e):new Wm(e,t,n,r??1)}function Wm(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}HT(Wm,q8,LR(Qb,{brighter(e){return new Wm(this.l+H8*(e??1),this.a,this.b,this.opacity)},darker(e){return new Wm(this.l-H8*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Xwe*R$(t),e=Qwe*R$(e),n=Jwe*R$(n),new Du(I$(3.1338561*t-1.6168667*e-.4906146*n),I$(-.9787684*t+1.9161415*e+.033454*n),I$(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function k$(e){return e>kft?Math.pow(e,1/3):e/e2e+Zwe}function R$(e){return e>GE?e*e*e:e2e*(e-Zwe)}function I$(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function P$(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Rft(e){if(e instanceof Uy)return new Uy(e.h,e.c,e.l,e.opacity);if(e instanceof Wm||(e=t2e(e)),e.a===0&&e.b===0)return new Uy(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Kwe;return new Uy(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function W8(e,t,n,r){return arguments.length===1?Rft(e):new Uy(e,t,n,r??1)}function Uy(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function n2e(e){if(isNaN(e.h))return new Wm(e.l,0,0,e.opacity);var t=e.h*Ywe;return new Wm(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}HT(Uy,W8,LR(Qb,{brighter(e){return new Uy(this.h,this.c,this.l+H8*(e??1),this.opacity)},darker(e){return new Uy(this.h,this.c,this.l-H8*(e??1),this.opacity)},rgb(){return n2e(this).rgb()}}));var r2e=-.14861,eK=1.78277,tK=-.29227,nM=-.90649,m4=1.97294,uae=m4*nM,lae=m4*eK,cae=eK*tK-nM*r2e;function Ift(e){if(e instanceof M_)return new M_(e.h,e.s,e.l,e.opacity);e instanceof Du||(e=ZY(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(cae*r+uae*t-lae*n)/(cae+uae-lae),s=r-i,o=(m4*(n-i)-tK*s)/nM,a=Math.sqrt(o*o+s*s)/(m4*i*(1-i)),u=a?Math.atan2(o,s)*Kwe-120:NaN;return new M_(u<0?u+360:u,a,i,e.opacity)}function Sz(e,t,n,r){return arguments.length===1?Ift(e):new M_(e,t,n,r??1)}function M_(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}HT(M_,Sz,LR(Qb,{brighter(e){return e=e==null?TS:Math.pow(TS,e),new M_(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?X_:Math.pow(X_,e),new M_(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Ywe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Du(255*(t+n*(r2e*r+eK*i)),255*(t+n*(tK*r+nM*i)),255*(t+n*(m4*r)),this.opacity)}}));function i2e(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function s2e(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return i2e((n-r/t)*t,o,i,s,a)}}function o2e(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return i2e((n-r/t)*t,i,s,o,a)}}const rM=e=>()=>e;function a2e(e,t){return function(n){return e+n*t}}function Pft(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function iM(e,t){var n=t-e;return n?a2e(e,n>180||n<-180?n-360*Math.round(n/360):n):rM(isNaN(e)?t:e)}function Nft(e){return(e=+e)==1?Ou:function(t,n){return n-t?Pft(t,n,e):rM(isNaN(t)?n:t)}}function Ou(e,t){var n=t-e;return n?a2e(e,n):rM(isNaN(e)?t:e)}const g4=function e(t){var n=Nft(t);function r(i,s){var o=n((i=xb(i)).r,(s=xb(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Ou(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function u2e(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=xb(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var Dft=u2e(s2e),Oft=u2e(o2e);function nK(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function l2e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Mft(e,t){return(l2e(t)?nK:c2e)(e,t)}function c2e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Jb(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function f2e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Hh(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function d2e(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Jb(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Tz=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,N$=new RegExp(Tz.source,"g");function Lft(e){return function(){return e}}function Fft(e){return function(t){return e(t)+""}}function rK(e,t){var n=Tz.lastIndex=N$.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=Tz.exec(e))&&(i=N$.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Hh(r,i)})),n=N$.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?Fft(u[0].x):Lft(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Jb(e,t){var n=typeof t,r;return t==null||n==="boolean"?rM(t):(n==="number"?Hh:n==="string"?(r=Q_(t))?(t=r,g4):rK:t instanceof Q_?g4:t instanceof Date?f2e:l2e(t)?nK:Array.isArray(t)?c2e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?d2e:Hh)(e,t)}function $ft(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Bft(e,t){var n=iM(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function FR(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var fae=180/Math.PI,Cz={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function h2e(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*fae,skewX:Math.atan(u)*fae,scaleX:o,scaleY:a}}var M6;function jft(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Cz:h2e(t.a,t.b,t.c,t.d,t.e,t.f)}function Uft(e){return e==null||(M6||(M6=document.createElementNS("http://www.w3.org/2000/svg","g")),M6.setAttribute("transform",e),!(e=M6.transform.baseVal.consolidate()))?Cz:(e=e.matrix,h2e(e.a,e.b,e.c,e.d,e.e,e.f))}function p2e(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Hh(l,f)},{i:m-2,x:Hh(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Hh(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Hh(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Hh(l,f)},{i:m-2,x:Hh(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var m2e=p2e(jft,"px, ","px)","deg)"),g2e=p2e(Uft,", ",")",")"),zft=1e-12;function dae(e){return((e=Math.exp(e))+1/e)/2}function Vft(e){return((e=Math.exp(e))-1/e)/2}function Hft(e){return((e=Math.exp(2*e))-1)/(e+1)}const qft=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,b;if(m<zft)b=Math.log(d/l)/t,g=function(R){return[a+R*h,u+R*p,l*Math.exp(t*R*b)]};else{var y=Math.sqrt(m),x=(d*d-l*l+r*m)/(2*l*n*y),w=(d*d-l*l-r*m)/(2*d*n*y),S=Math.log(Math.sqrt(x*x+1)-x),C=Math.log(Math.sqrt(w*w+1)-w);b=(C-S)/t,g=function(R){var I=R*b,O=dae(S),M=l/(n*y)*(O*Hft(t*I+S)-Vft(S));return[a+M*h,u+M*p,l*O/dae(t*I+S)]}}return g.duration=b*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function y2e(e){return function(t,n){var r=e((t=V8(t)).h,(n=V8(n)).h),i=Ou(t.s,n.s),s=Ou(t.l,n.l),o=Ou(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Wft=y2e(iM);var Gft=y2e(Ou);function Yft(e,t){var n=Ou((e=q8(e)).l,(t=q8(t)).l),r=Ou(e.a,t.a),i=Ou(e.b,t.b),s=Ou(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function v2e(e){return function(t,n){var r=e((t=W8(t)).h,(n=W8(n)).h),i=Ou(t.c,n.c),s=Ou(t.l,n.l),o=Ou(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Kft=v2e(iM);var Xft=v2e(Ou);function b2e(e){return function t(n){n=+n;function r(i,s){var o=e((i=Sz(i)).h,(s=Sz(s)).h),a=Ou(i.s,s.s),u=Ou(i.l,s.l),l=Ou(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Qft=b2e(iM);var Jft=b2e(Ou);function iK(e,t){t===void 0&&(t=e,e=Jb);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Zft(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const edt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Jb,interpolateArray:Mft,interpolateBasis:s2e,interpolateBasisClosed:o2e,interpolateCubehelix:Qft,interpolateCubehelixLong:Jft,interpolateDate:f2e,interpolateDiscrete:$ft,interpolateHcl:Kft,interpolateHclLong:Xft,interpolateHsl:Wft,interpolateHslLong:Gft,interpolateHue:Bft,interpolateLab:Yft,interpolateNumber:Hh,interpolateNumberArray:nK,interpolateObject:d2e,interpolateRgb:g4,interpolateRgbBasis:Dft,interpolateRgbBasisClosed:Oft,interpolateRound:FR,interpolateString:rK,interpolateTransformCss:m2e,interpolateTransformSvg:g2e,interpolateZoom:qft,piecewise:iK,quantize:Zft},Symbol.toStringTag,{value:"Module"}));var CS=0,P3=0,iA=0,x2e=1e3,G8,N3,Y8=0,J_=0,sM=0,y4=typeof performance=="object"&&performance.now?performance:Date,_2e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function oM(){return J_||(_2e(tdt),J_=y4.now()+sM)}function tdt(){J_=0}function v4(){this._call=this._time=this._next=null}v4.prototype=sK.prototype={constructor:v4,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?oM():+n)+(t==null?0:+t),!this._next&&N3!==this&&(N3?N3._next=this:G8=this,N3=this),this._call=e,this._time=n,Az()},stop:function(){this._call&&(this._call=null,this._time=1/0,Az())}};function sK(e,t,n){var r=new v4;return r.restart(e,t,n),r}function ndt(){oM(),++CS;for(var e=G8,t;e;)(t=J_-e._time)>=0&&e._call.call(void 0,t),e=e._next;--CS}function hae(){J_=(Y8=y4.now())+sM,CS=P3=0;try{ndt()}finally{CS=0,idt(),J_=0}}function rdt(){var e=y4.now(),t=e-Y8;t>x2e&&(sM-=t,Y8=e)}function idt(){for(var e,t=G8,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:G8=n);N3=e,Az(r)}function Az(e){if(!CS){P3&&(P3=clearTimeout(P3));var t=e-J_;t>24?(e<1/0&&(P3=setTimeout(hae,e-y4.now()-sM)),iA&&(iA=clearInterval(iA))):(iA||(Y8=y4.now(),iA=setInterval(rdt,x2e)),CS=1,_2e(hae))}}function pae(e,t,n){var r=new v4;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function sdt(e,t,n){var r=new v4,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?oM():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var odt=KY("start","end","cancel","interrupt"),adt=[],w2e=0,mae=1,kz=2,_N=3,gae=4,Rz=5,wN=6;function aM(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;udt(e,n,{name:t,index:r,group:i,on:odt,tween:adt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:w2e})}function oK(e,t){var n=j0(e,t);if(n.state>w2e)throw new Error("too late; already scheduled");return n}function Eg(e,t){var n=j0(e,t);if(n.state>_N)throw new Error("too late; already running");return n}function j0(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function udt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=sK(s,0,n.time);function s(l){n.state=mae,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==mae)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===_N)return pae(o);h.state===gae?(h.state=wN,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=wN,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(pae(function(){n.state===_N&&(n.state=gae,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=kz,n.on.call("start",e,e.__data__,n.index,n.group),n.state===kz){for(n.state=_N,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Rz,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===Rz&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=wN,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function ldt(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>kz&&r.state<Rz,r.state=wN,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function cdt(e){return this.each(function(){ldt(this,e)})}function fdt(e,t){var n,r;return function(){var i=Eg(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function ddt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Eg(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function hdt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=j0(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?fdt:ddt)(n,e,t))}function aK(e,t,n){var r=e._id;return e.each(function(){var i=Eg(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return j0(i,r).value[t]}}function E2e(e,t){var n;return(typeof t=="number"?Hh:t instanceof Q_?g4:(n=Q_(t))?(t=n,g4):rK)(e,t)}function pdt(e){return function(){this.removeAttribute(e)}}function mdt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gdt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function ydt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function vdt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function bdt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function xdt(e,t){var n=tM(e),r=n==="transform"?g2e:E2e;return this.attrTween(e,typeof t=="function"?(n.local?bdt:vdt)(n,r,aK(this,"attr."+e,t)):t==null?(n.local?mdt:pdt)(n):(n.local?ydt:gdt)(n,r,t))}function _dt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function wdt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Edt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&wdt(e,s)),n}return i._value=t,i}function Sdt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&_dt(e,s)),n}return i._value=t,i}function Tdt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=tM(e);return this.tween(n,(r.local?Edt:Sdt)(r,t))}function Cdt(e,t){return function(){oK(this,e).delay=+t.apply(this,arguments)}}function Adt(e,t){return t=+t,function(){oK(this,e).delay=t}}function kdt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Cdt:Adt)(t,e)):j0(this.node(),t).delay}function Rdt(e,t){return function(){Eg(this,e).duration=+t.apply(this,arguments)}}function Idt(e,t){return t=+t,function(){Eg(this,e).duration=t}}function Pdt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Rdt:Idt)(t,e)):j0(this.node(),t).duration}function Ndt(e,t){if(typeof t!="function")throw new Error;return function(){Eg(this,e).ease=t}}function Ddt(e){var t=this._id;return arguments.length?this.each(Ndt(t,e)):j0(this.node(),t).ease}function Odt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Eg(this,e).ease=n}}function Mdt(e){if(typeof e!="function")throw new Error;return this.each(Odt(this._id,e))}function Ldt(e){typeof e!="function"&&(e=Fwe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new b1(r,this._parents,this._name,this._id)}function Fdt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new b1(o,this._parents,this._name,this._id)}function $dt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Bdt(e,t,n){var r,i,s=$dt(t)?oK:Eg;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function jdt(e,t){var n=this._id;return arguments.length<2?j0(this.node(),n).on.on(e):this.each(Bdt(n,e,t))}function Udt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function zdt(){return this.on("end.remove",Udt(this._id))}function Vdt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=XY(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,aM(l[d],t,n,d,l,j0(c,n)));return new b1(s,this._parents,t,n)}function Hdt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Lwe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=j0(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&aM(h,t,n,m,d,p);s.push(d),o.push(c)}return new b1(s,o,t,n)}var qdt=MR.prototype.constructor;function Wdt(){return new qdt(this._groups,this._parents)}function Gdt(e,t){var n,r,i;return function(){var s=SS(this,e),o=(this.style.removeProperty(e),SS(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function S2e(e){return function(){this.style.removeProperty(e)}}function Ydt(e,t,n){var r,i=n+"",s;return function(){var o=SS(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Kdt(e,t,n){var r,i,s;return function(){var o=SS(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),SS(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function Xdt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Eg(this,e),l=u.on,c=u.value[s]==null?a||(a=S2e(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function Qdt(e,t,n){var r=(e+="")=="transform"?m2e:E2e;return t==null?this.styleTween(e,Gdt(e,r)).on("end.style."+e,S2e(e)):typeof t=="function"?this.styleTween(e,Kdt(e,r,aK(this,"style."+e,t))).each(Xdt(this._id,e)):this.styleTween(e,Ydt(e,r,t),n).on("end.style."+e,null)}function Jdt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Zdt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Jdt(e,o,n)),r}return s._value=t,s}function eht(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Zdt(e,t,n??""))}function tht(e){return function(){this.textContent=e}}function nht(e){return function(){var t=e(this);this.textContent=t??""}}function rht(e){return this.tween("text",typeof e=="function"?nht(aK(this,"text",e)):tht(e==null?"":e+""))}function iht(e){return function(t){this.textContent=e.call(this,t)}}function sht(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&iht(i)),t}return r._value=e,r}function oht(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,sht(e))}function aht(){for(var e=this._name,t=this._id,n=T2e(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=j0(u,t);aM(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new b1(r,this._parents,e,n)}function uht(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Eg(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var lht=0;function b1(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function T2e(){return++lht}var yy=MR.prototype;b1.prototype={constructor:b1,select:Vdt,selectAll:Hdt,selectChild:yy.selectChild,selectChildren:yy.selectChildren,filter:Ldt,merge:Fdt,selection:Wdt,transition:aht,call:yy.call,nodes:yy.nodes,node:yy.node,size:yy.size,empty:yy.empty,each:yy.each,on:jdt,attr:xdt,attrTween:Tdt,style:Qdt,styleTween:eht,text:rht,textTween:oht,remove:zdt,tween:hdt,delay:kdt,duration:Pdt,ease:Ddt,easeVarying:Mdt,end:uht,[Symbol.iterator]:yy[Symbol.iterator]};function cht(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var fht={time:null,delay:0,duration:250,ease:cht};function dht(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function hht(e){var t,n;e instanceof b1?(t=e._id,e=e._name):(t=T2e(),(n=fht).time=oM(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&aM(u,e,t,l,o,n||dht(u,t));return new b1(r,this._parents,e,t)}MR.prototype.interrupt=cdt;MR.prototype.transition=hht;const Iz=Math.PI,Pz=2*Iz,o_=1e-6,pht=Pz-o_;function C2e(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function mht(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return C2e;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let uK=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?C2e:mht(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>o_)if(!(Math.abs(f*u-l*c)>o_)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,b=Math.sqrt(m),y=Math.sqrt(d),x=s*Math.tan((Iz-Math.acos((m+d-g)/(2*b*y)))/2),w=x/y,S=x/b;Math.abs(w-1)>o_&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+S*u},${this._y1=n+S*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>o_||Math.abs(this._y1-c)>o_)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%Pz+Pz),d>pht?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>o_&&this._append`A${r},${r},0,${+(d>=Iz)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function uM(){return new uK}uM.prototype=uK.prototype;const e1=11102230246251565e-32,Gl=134217729,ght=(3+8*e1)*e1;function D$(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function yht(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function $R(e){return new Float64Array(e)}const vht=(3+16*e1)*e1,bht=(2+12*e1)*e1,xht=(9+64*e1)*e1*e1,K2=$R(4),yae=$R(8),vae=$R(12),bae=$R(16),Wc=$R(4);function _ht(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,b,y,x,w,S,C,R,I;const O=e-i,M=n-i,L=t-s,H=r-s;w=O*H,d=Gl*O,h=d-(d-O),p=O-h,d=Gl*H,m=d-(d-H),g=H-m,S=p*g-(w-h*m-p*m-h*g),C=L*M,d=Gl*L,h=d-(d-L),p=L-h,d=Gl*M,m=d-(d-M),g=M-m,R=p*g-(C-h*m-p*m-h*g),b=S-R,f=S-b,K2[0]=S-(b+f)+(f-R),y=w+b,f=y-w,x=w-(y-f)+(b-f),b=x-C,f=x-b,K2[1]=x-(b+f)+(f-C),I=y+b,f=I-y,K2[2]=y-(I-f)+(b-f),K2[3]=I;let D=yht(4,K2),B=bht*o;if(D>=B||-D>=B||(f=e-O,a=e-(O+f)+(f-i),f=n-M,l=n-(M+f)+(f-i),f=t-L,u=t-(L+f)+(f-s),f=r-H,c=r-(H+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(B=xht*o+ght*Math.abs(D),D+=O*c+H*a-(L*l+M*u),D>=B||-D>=B))return D;w=a*H,d=Gl*a,h=d-(d-a),p=a-h,d=Gl*H,m=d-(d-H),g=H-m,S=p*g-(w-h*m-p*m-h*g),C=u*M,d=Gl*u,h=d-(d-u),p=u-h,d=Gl*M,m=d-(d-M),g=M-m,R=p*g-(C-h*m-p*m-h*g),b=S-R,f=S-b,Wc[0]=S-(b+f)+(f-R),y=w+b,f=y-w,x=w-(y-f)+(b-f),b=x-C,f=x-b,Wc[1]=x-(b+f)+(f-C),I=y+b,f=I-y,Wc[2]=y-(I-f)+(b-f),Wc[3]=I;const z=D$(4,K2,4,Wc,yae);w=O*c,d=Gl*O,h=d-(d-O),p=O-h,d=Gl*c,m=d-(d-c),g=c-m,S=p*g-(w-h*m-p*m-h*g),C=L*l,d=Gl*L,h=d-(d-L),p=L-h,d=Gl*l,m=d-(d-l),g=l-m,R=p*g-(C-h*m-p*m-h*g),b=S-R,f=S-b,Wc[0]=S-(b+f)+(f-R),y=w+b,f=y-w,x=w-(y-f)+(b-f),b=x-C,f=x-b,Wc[1]=x-(b+f)+(f-C),I=y+b,f=I-y,Wc[2]=y-(I-f)+(b-f),Wc[3]=I;const G=D$(z,yae,4,Wc,vae);w=a*c,d=Gl*a,h=d-(d-a),p=a-h,d=Gl*c,m=d-(d-c),g=c-m,S=p*g-(w-h*m-p*m-h*g),C=u*l,d=Gl*u,h=d-(d-u),p=u-h,d=Gl*l,m=d-(d-l),g=l-m,R=p*g-(C-h*m-p*m-h*g),b=S-R,f=S-b,Wc[0]=S-(b+f)+(f-R),y=w+b,f=y-w,x=w-(y-f)+(b-f),b=x-C,f=x-b,Wc[1]=x-(b+f)+(f-C),I=y+b,f=I-y,Wc[2]=y-(I-f)+(b-f),Wc[3]=I;const Z=D$(G,vae,4,Wc,bae);return bae[Z-1]}function L6(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=vht*l?u:-_ht(e,t,n,r,i,s,l)}const xae=Math.pow(2,-52),F6=new Uint32Array(512);class K8{static from(t,n=Cht,r=Aht){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new K8(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let O=0;O<o;O++){const M=t[2*O],L=t[2*O+1];M<a&&(a=M),L<u&&(u=L),M>l&&(l=M),L>c&&(c=L),this._ids[O]=O}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let O=0,M=1/0;O<o;O++){const L=O$(f,d,t[2*O],t[2*O+1]);L<M&&(h=O,M=L)}const g=t[2*h],b=t[2*h+1];for(let O=0,M=1/0;O<o;O++){if(O===h)continue;const L=O$(g,b,t[2*O],t[2*O+1]);L<M&&L>0&&(p=O,M=L)}let y=t[2*p],x=t[2*p+1],w=1/0;for(let O=0;O<o;O++){if(O===h||O===p)continue;const M=Sht(g,b,y,x,t[2*O],t[2*O+1]);M<w&&(m=O,w=M)}let S=t[2*m],C=t[2*m+1];if(w===1/0){for(let L=0;L<o;L++)this._dists[L]=t[2*L]-t[0]||t[2*L+1]-t[1];kE(this._ids,this._dists,0,o-1);const O=new Uint32Array(o);let M=0;for(let L=0,H=-1/0;L<o;L++){const D=this._ids[L],B=this._dists[D];B>H&&(O[M++]=D,H=B)}this.hull=O.subarray(0,M),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(L6(g,b,y,x,S,C)<0){const O=p,M=y,L=x;p=m,y=S,x=C,m=O,S=M,C=L}const R=Tht(g,b,y,x,S,C);this._cx=R.x,this._cy=R.y;for(let O=0;O<o;O++)this._dists[O]=O$(t[2*O],t[2*O+1],R.x,R.y);kE(this._ids,this._dists,0,o-1),this._hullStart=h;let I=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,b)]=h,s[this._hashKey(y,x)]=p,s[this._hashKey(S,C)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let O=0,M,L;O<this._ids.length;O++){const H=this._ids[O],D=t[2*H],B=t[2*H+1];if(O>0&&Math.abs(D-M)<=xae&&Math.abs(B-L)<=xae||(M=D,L=B,H===h||H===p||H===m))continue;let z=0;for(let X=0,q=this._hashKey(D,B);X<this._hashSize&&(z=s[(q+X)%this._hashSize],!(z!==-1&&z!==r[z]));X++);z=n[z];let G=z,Z;for(;Z=r[G],L6(D,B,t[2*G],t[2*G+1],t[2*Z],t[2*Z+1])>=0;)if(G=Z,G===z){G=-1;break}if(G===-1)continue;let ne=this._addTriangle(G,H,r[G],-1,-1,i[G]);i[H]=this._legalize(ne+2),i[G]=ne,I++;let ue=r[G];for(;Z=r[ue],L6(D,B,t[2*ue],t[2*ue+1],t[2*Z],t[2*Z+1])<0;)ne=this._addTriangle(ue,H,Z,i[H],-1,i[ue]),i[H]=this._legalize(ne+2),r[ue]=ue,I--,ue=Z;if(G===z)for(;Z=n[G],L6(D,B,t[2*Z],t[2*Z+1],t[2*G],t[2*G+1])<0;)ne=this._addTriangle(Z,H,G,-1,i[G],i[Z]),this._legalize(ne+2),i[Z]=ne,r[G]=G,I--,G=Z;this._hullStart=n[H]=G,r[G]=n[ue]=H,r[H]=ue,s[this._hashKey(D,B)]=H,s[this._hashKey(t[2*G],t[2*G+1])]=G}this.hull=new Uint32Array(I);for(let O=0,M=this._hullStart;O<I;O++)this.hull[O]=M,M=r[M];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(wht(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=F6[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(Eht(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const b=r[f];if(b===-1){let x=this._hullStart;do{if(this._hullTri[x]===f){this._hullTri[x]=t;break}x=this._hullPrev[x]}while(x!==this._hullStart)}this._link(t,b),this._link(a,r[o]),this._link(o,f);const y=l+(a+1)%3;s<F6.length&&(F6[s++]=y)}else{if(s===0)break;t=F6[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function wht(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function O$(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function Eht(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function Sht(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function Tht(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function kE(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;sA(e,i,s),t[e[n]]>t[e[r]]&&sA(e,n,r),t[e[s]]>t[e[r]]&&sA(e,s,r),t[e[n]]>t[e[s]]&&sA(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;sA(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(kE(e,t,s,r),kE(e,t,n,o-1)):(kE(e,t,n,o-1),kE(e,t,s,r))}}function sA(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Cht(e){return e[0]}function Aht(e){return e[1]}const _ae=1e-6;let C_=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>_ae||Math.abs(this._y1-s)>_ae)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}};class Nz{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let kht=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,b=r.length,y,x;m<b;m+=3,g+=2){const w=r[m]*2,S=r[m+1]*2,C=r[m+2]*2,R=t[w],I=t[w+1],O=t[S],M=t[S+1],L=t[C],H=t[C+1],D=O-R,B=M-I,z=L-R,G=H-I,Z=(D*G-B*z)*2;if(Math.abs(Z)<1e-9){if(s===void 0){s=o=0;for(const ue of n)s+=t[ue*2],o+=t[ue*2+1];s/=n.length,o/=n.length}const ne=1e9*Math.sign((s-R)*G-(o-I)*z);y=(R+L)/2-ne*G,x=(I+H)/2+ne*z}else{const ne=1/Z,ue=D*D+B*B,X=z*z+G*G;y=R+(G*ue-B*X)*ne,x=I+(D*X-z*ue)*ne}a[g]=y,a[g+1]=x}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new C_:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],b=o[p],y=o[p+1];this._renderSegment(m,g,b,y,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new C_:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new C_:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new Nz;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,b,y;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,b,y]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[b,y,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(b,y),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(b,y):i=[b,y]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Rht=2*Math.PI,X2=Math.pow;function Iht(e){return e[0]}function Pht(e){return e[1]}function Nht(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Dht(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class lK{static from(t,n=Iht,r=Pht,i){return new lK("length"in t?Oht(t,n,r,i):Float64Array.from(Mht(t,n,r,i)))}constructor(t){this._delaunator=new K8(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Nht(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Dht(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new K8(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new kht(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=X2(n-l[t*2],2)+X2(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=X2(n-l[p*2],2)+X2(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&X2(n-l[h*2],2)+X2(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new C_:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new C_:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,Rht)}return r&&r.value()}renderHull(t){const n=t==null?t=new C_:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Nz;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new C_:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Nz;return this.renderTriangle(t,n),n.value()}}function Oht(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Mht(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var wae={},M$={},L$=34,oA=10,F$=13;function A2e(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Lht(e,t){var n=A2e(e);return function(r,i){return t(n(r),i,e)}}function Eae(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Hf(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Fht(e){return e<0?"-"+Hf(-e,6):e>9999?"+"+Hf(e,6):Hf(e,4)}function $ht(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Fht(e.getUTCFullYear())+"-"+Hf(e.getUTCMonth()+1,2)+"-"+Hf(e.getUTCDate(),2)+(i?"T"+Hf(t,2)+":"+Hf(n,2)+":"+Hf(r,2)+"."+Hf(i,3)+"Z":r?"T"+Hf(t,2)+":"+Hf(n,2)+":"+Hf(r,2)+"Z":n||t?"T"+Hf(t,2)+":"+Hf(n,2)+"Z":"")}function Bht(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,b){if(h)return h(g,b-1);p=g,h=d?Lht(g,d):A2e(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,b,y=p<=0,x=!1;f.charCodeAt(p-1)===oA&&--p,f.charCodeAt(p-1)===F$&&--p;function w(){if(y)return M$;if(x)return x=!1,wae;var C,R=m,I;if(f.charCodeAt(R)===L$){for(;m++<p&&f.charCodeAt(m)!==L$||f.charCodeAt(++m)===L$;);return(C=m)>=p?y=!0:(I=f.charCodeAt(m++))===oA?x=!0:I===F$&&(x=!0,f.charCodeAt(m)===oA&&++m),f.slice(R+1,C-1).replace(/""/g,'"')}for(;m<p;){if((I=f.charCodeAt(C=m++))===oA)x=!0;else if(I===F$)x=!0,f.charCodeAt(m)===oA&&++m;else if(I!==n)continue;return f.slice(R,C)}return y=!0,f.slice(R,p)}for(;(b=w())!==M$;){for(var S=[];b!==wae&&b!==M$;)S.push(b),b=w();d&&(S=d(S,g++))==null||h.push(S)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Eae(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Eae(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?$ht(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}function jht(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Uht(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return k2e(this.cover(t,n),t,n,e)}function k2e(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,b,y;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[b=g<<1|m]))return i[b]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[b]=o:e._root=o,e;do i=i?i[b]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((b=g<<1|m)===(y=(p>=d)<<1|h>=f));return i[y]=s,i[b]=o,e}function zht(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)k2e(this,o[n],a[n],e[n]);return this}function Vht(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Hht(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function qht(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function tf(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Wht(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new tf(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,b=(a+l)/2;d.push(new tf(h[3],g,b,u,l),new tf(h[2],o,b,g,l),new tf(h[1],g,a,u,b),new tf(h[0],o,a,g,b)),(m=(t>=b)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var y=e-+this._x.call(null,h.data),x=t-+this._y.call(null,h.data),w=y*y+x*x;if(w<n){var S=Math.sqrt(n=w);i=e-S,s=t-S,c=e+S,f=t+S,r=h.data}}return r}function Ght(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,b;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,b=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[b]=n:this._root=n),this):(this._root=s,this)}function Yht(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Kht(){return this._root}function Xht(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Qht(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new tf(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new tf(i,l,c,a,u)),(i=r[2])&&t.push(new tf(i,s,c,l,u)),(i=r[1])&&t.push(new tf(i,l,o,a,c)),(i=r[0])&&t.push(new tf(i,s,o,l,c))}return this}function Jht(e){var t=[],n=[],r;for(this._root&&t.push(new tf(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new tf(s,o,a,c,f)),(s=i[1])&&t.push(new tf(s,c,a,u,f)),(s=i[2])&&t.push(new tf(s,o,f,c,l)),(s=i[3])&&t.push(new tf(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Zht(e){return e[0]}function ept(e){return arguments.length?(this._x=e,this):this._x}function tpt(e){return e[1]}function npt(e){return arguments.length?(this._y=e,this):this._y}function cK(e,t,n){var r=new fK(t??Zht,n??tpt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function fK(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Sae(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var hf=cK.prototype=fK.prototype;hf.copy=function(){var e=new fK(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Sae(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Sae(r));return e};hf.add=Uht;hf.addAll=zht;hf.cover=Vht;hf.data=Hht;hf.extent=qht;hf.find=Wht;hf.remove=Ght;hf.removeAll=Yht;hf.root=Kht;hf.size=Xht;hf.visit=Qht;hf.visitAfter=Jht;hf.x=ept;hf.y=npt;function rf(e){return function(){return e}}function Bv(e){return(e()-.5)*1e-6}function rpt(e){return e.x+e.vx}function ipt(e){return e.y+e.vy}function spt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=rf(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,b=0;b<s;++b)for(f=cK(t,rpt,ipt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(y);function y(x,w,S,C,R){var I=x.data,O=x.r,M=m+O;if(I){if(I.index>d.index){var L=h-I.x-I.vx,H=p-I.y-I.vy,D=L*L+H*H;D<M*M&&(L===0&&(L=Bv(r),D+=L*L),H===0&&(H=Bv(r),D+=H*H),D=(M-(D=Math.sqrt(D)))/D*i,d.vx+=(L*=D)*(M=(O*=O)/(g+O)),d.vy+=(H*=D)*M,I.vx-=L*(M=1-M),I.vy-=H*M)}return}return w>h+M||C<h-M||S>p+M||R<p-M}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:rf(+l),u(),o):e},o}function opt(e){return e.index}function Tae(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function apt(e){var t=opt,n=f,r,i=rf(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var b=0,y=e.length;b<c;++b)for(var x=0,w,S,C,R,I,O,M;x<y;++x)w=e[x],S=w.source,C=w.target,R=C.x+C.vx-S.x-S.vx||Bv(l),I=C.y+C.vy-S.y-S.vy||Bv(l),O=Math.sqrt(R*R+I*I),O=(O-s[x])/O*g*r[x],R*=O,I*=O,C.vx-=R*(M=u[x]),C.vy-=I*M,S.vx+=R*(M=1-M),S.vy+=I*M}function h(){if(o){var g,b=o.length,y=e.length,x=new Map(o.map((S,C)=>[t(S,C,o),S])),w;for(g=0,a=new Array(b);g<y;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=Tae(x,w.source)),typeof w.target!="object"&&(w.target=Tae(x,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(y);g<y;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(y),p(),s=new Array(y),m()}}function p(){if(o)for(var g=0,b=e.length;g<b;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,b=e.length;g<b;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,b){o=g,l=b,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:rf(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:rf(+g),m(),d):i},d}const upt=1664525,lpt=1013904223,Cae=4294967296;function cpt(){let e=1;return()=>(e=(upt*e+lpt)%Cae)/Cae}function fpt(e){return e.x}function dpt(e){return e.y}var hpt=10,ppt=Math.PI*(3-Math.sqrt(5));function mpt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=sK(f),l=KY("tick","end"),c=cpt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,b=e.length,y;m===void 0&&(m=1);for(var x=0;x<m;++x)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<b;++g)y=e[g],y.fx==null?y.x+=y.vx*=o:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=o:(y.y=y.fy,y.vy=0);return t}function h(){for(var m=0,g=e.length,b;m<g;++m){if(b=e[m],b.index=m,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var y=hpt*Math.sqrt(.5+m),x=m*ppt;b.x=y*Math.cos(x),b.y=y*Math.sin(x)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,b){var y=0,x=e.length,w,S,C,R,I;for(b==null?b=1/0:b*=b,y=0;y<x;++y)R=e[y],w=m-R.x,S=g-R.y,C=w*w+S*S,C<b&&(I=R,b=C);return I},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function gpt(){var e,t,n,r,i=rf(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=cK(e,fpt,dpt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,b=0,y,x,w;if(h.length){for(y=x=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,b+=g,y+=g*m.x,x+=g*m.y);h.x=y/b,h.y=x/b}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var b=h.x-t.x,y=h.y-t.y,x=g-p,w=b*b+y*y;if(x*x/u<w)return w<a&&(b===0&&(b=Bv(n),w+=b*b),y===0&&(y=Bv(n),w+=y*y),w<o&&(w=Math.sqrt(o*w)),t.vx+=b*h.value*r/w,t.vy+=y*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(b===0&&(b=Bv(n),w+=b*b),y===0&&(y=Bv(n),w+=y*y),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(x=s[h.data.index]*r/w,t.vx+=b*x,t.vy+=y*x);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:rf(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function ypt(e){var t=rf(.1),n,r,i;typeof e!="function"&&(e=rf(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:rf(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:rf(+a),o(),s):e},s}function vpt(e){var t=rf(.1),n,r,i;typeof e!="function"&&(e=rf(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:rf(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:rf(+a),o(),s):e},s}function bpt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function X8(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function AS(e){return e=X8(Math.abs(e)),e?e[1]:NaN}function xpt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function _pt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var wpt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Z_(e){if(!(t=wpt.exec(e)))throw new Error("invalid format: "+e);var t;return new dK({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Z_.prototype=dK.prototype;function dK(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}dK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ept(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var R2e;function Spt(e,t){var n=X8(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(R2e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+X8(e,Math.max(0,t+s-1))[0]}function Aae(e,t){var n=X8(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const kae={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:bpt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Aae(e*100,t),r:Aae,s:Spt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Rae(e){return e}var Iae=Array.prototype.map,Pae=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function I2e(e){var t=e.grouping===void 0||e.thousands===void 0?Rae:xpt(Iae.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Rae:_pt(Iae.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Z_(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,b=f.width,y=f.comma,x=f.precision,w=f.trim,S=f.type;S==="n"?(y=!0,S="g"):kae[S]||(x===void 0&&(x=12),w=!0,S="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var C=m==="$"?n:m==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",R=m==="$"?r:/[%p]/.test(S)?o:"",I=kae[S],O=/[defgprs%]/.test(S);x=x===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function M(L){var H=C,D=R,B,z,G;if(S==="c")D=I(L)+D,L="";else{L=+L;var Z=L<0||1/L<0;if(L=isNaN(L)?u:I(Math.abs(L),x),w&&(L=Ept(L)),Z&&+L==0&&p!=="+"&&(Z=!1),H=(Z?p==="("?p:a:p==="-"||p==="("?"":p)+H,D=(S==="s"?Pae[8+R2e/3]:"")+D+(Z&&p==="("?")":""),O){for(B=-1,z=L.length;++B<z;)if(G=L.charCodeAt(B),48>G||G>57){D=(G===46?i+L.slice(B+1):L.slice(B))+D,L=L.slice(0,B);break}}}y&&!g&&(L=t(L,1/0));var ne=H.length+L.length+D.length,ue=ne<b?new Array(b-ne+1).join(d):"";switch(y&&g&&(L=t(ue+L,ue.length?b-D.length:1/0),ue=""),h){case"<":L=H+L+D+ue;break;case"=":L=H+ue+L+D;break;case"^":L=ue.slice(0,ne=ue.length>>1)+H+L+D+ue.slice(ne);break;default:L=ue+H+L+D;break}return s(L)}return M.toString=function(){return f+""},M}function c(f,d){var h=l((f=Z_(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(AS(d)/3)))*3,m=Math.pow(10,-p),g=Pae[8+p/3];return function(b){return h(m*b)+g}}return{format:l,formatPrefix:c}}var $6,lM,hK;Tpt({thousands:",",grouping:[3],currency:["$",""]});function Tpt(e){return $6=I2e(e),lM=$6.format,hK=$6.formatPrefix,$6}function P2e(e){return Math.max(0,-AS(Math.abs(e)))}function N2e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(AS(t)/3)))*3-AS(Math.abs(e)))}function D2e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,AS(t)-AS(e))+1}var Yn=1e-6,Dz=1e-12,Wr=Math.PI,qo=Wr/2,Q8=Wr/4,lf=Wr*2,pa=180/Wr,zr=Wr/180,hi=Math.abs,qT=Math.atan,ep=Math.atan2,Wn=Math.cos,B6=Math.ceil,O2e=Math.exp,Oz=Math.hypot,J8=Math.log,$$=Math.pow,$n=Math.sin,Gh=Math.sign||function(e){return e>0?1:e<0?-1:0},cf=Math.sqrt,pK=Math.tan;function M2e(e){return e>1?0:e<-1?Wr:Math.acos(e)}function sd(e){return e>1?qo:e<-1?-qo:Math.asin(e)}function bl(){}function Z8(e,t){e&&Dae.hasOwnProperty(e.type)&&Dae[e.type](e,t)}var Nae={Feature:function(e,t){Z8(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Z8(n[r].geometry,t)}},Dae={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Mz(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Mz(n[r],t,0)},Polygon:function(e,t){Oae(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Oae(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Z8(n[r],t)}};function Mz(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Oae(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Mz(e[n],t,1);t.polygonEnd()}function My(e,t){e&&Nae.hasOwnProperty(e.type)?Nae[e.type](e,t):Z8(e,t)}var eD=new af,tD=new af,L2e,F2e,Lz,Fz,$z,lg={point:bl,lineStart:bl,lineEnd:bl,polygonStart:function(){eD=new af,lg.lineStart=Cpt,lg.lineEnd=Apt},polygonEnd:function(){var e=+eD;tD.add(e<0?lf+e:e),this.lineStart=this.lineEnd=this.point=bl},sphere:function(){tD.add(lf)}};function Cpt(){lg.point=kpt}function Apt(){$2e(L2e,F2e)}function kpt(e,t){lg.point=$2e,L2e=e,F2e=t,e*=zr,t*=zr,Lz=e,Fz=Wn(t=t/2+Q8),$z=$n(t)}function $2e(e,t){e*=zr,t*=zr,t=t/2+Q8;var n=e-Lz,r=n>=0?1:-1,i=r*n,s=Wn(t),o=$n(t),a=$z*o,u=Fz*s+a*Wn(i),l=a*r*$n(i);eD.add(ep(l,u)),Lz=e,Fz=s,$z=o}function Rpt(e){return tD=new af,My(e,lg),tD*2}function nD(e){return[ep(e[1],e[0]),sd(e[2])]}function ew(e){var t=e[0],n=e[1],r=Wn(n);return[r*Wn(t),r*$n(t),$n(n)]}function j6(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function kS(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function B$(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function U6(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function rD(e){var t=cf(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var _o,Kf,Uo,Hd,a_,B2e,j2e,YE,Sk,Tv,x1,Iy={point:Bz,lineStart:Mae,lineEnd:Lae,polygonStart:function(){Iy.point=z2e,Iy.lineStart=Ipt,Iy.lineEnd=Ppt,Sk=new af,lg.polygonStart()},polygonEnd:function(){lg.polygonEnd(),Iy.point=Bz,Iy.lineStart=Mae,Iy.lineEnd=Lae,eD<0?(_o=-(Uo=180),Kf=-(Hd=90)):Sk>Yn?Hd=90:Sk<-1e-6&&(Kf=-90),x1[0]=_o,x1[1]=Uo},sphere:function(){_o=-(Uo=180),Kf=-(Hd=90)}};function Bz(e,t){Tv.push(x1=[_o=e,Uo=e]),t<Kf&&(Kf=t),t>Hd&&(Hd=t)}function U2e(e,t){var n=ew([e*zr,t*zr]);if(YE){var r=kS(YE,n),i=[r[1],-r[0],0],s=kS(i,r);rD(s),s=nD(s);var o=e-a_,a=o>0?1:-1,u=s[0]*pa*a,l,c=hi(o)>180;c^(a*a_<u&&u<a*e)?(l=s[1]*pa,l>Hd&&(Hd=l)):(u=(u+360)%360-180,c^(a*a_<u&&u<a*e)?(l=-s[1]*pa,l<Kf&&(Kf=l)):(t<Kf&&(Kf=t),t>Hd&&(Hd=t))),c?e<a_?zd(_o,e)>zd(_o,Uo)&&(Uo=e):zd(e,Uo)>zd(_o,Uo)&&(_o=e):Uo>=_o?(e<_o&&(_o=e),e>Uo&&(Uo=e)):e>a_?zd(_o,e)>zd(_o,Uo)&&(Uo=e):zd(e,Uo)>zd(_o,Uo)&&(_o=e)}else Tv.push(x1=[_o=e,Uo=e]);t<Kf&&(Kf=t),t>Hd&&(Hd=t),YE=n,a_=e}function Mae(){Iy.point=U2e}function Lae(){x1[0]=_o,x1[1]=Uo,Iy.point=Bz,YE=null}function z2e(e,t){if(YE){var n=e-a_;Sk.add(hi(n)>180?n+(n>0?360:-360):n)}else B2e=e,j2e=t;lg.point(e,t),U2e(e,t)}function Ipt(){lg.lineStart()}function Ppt(){z2e(B2e,j2e),lg.lineEnd(),hi(Sk)>Yn&&(_o=-(Uo=180)),x1[0]=_o,x1[1]=Uo,YE=null}function zd(e,t){return(t-=e)<0?t+360:t}function Npt(e,t){return e[0]-t[0]}function Fae(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Dpt(e){var t,n,r,i,s,o,a;if(Hd=Uo=-(_o=Kf=1/0),Tv=[],My(e,Iy),n=Tv.length){for(Tv.sort(Npt),t=1,r=Tv[0],s=[r];t<n;++t)i=Tv[t],Fae(r,i[0])||Fae(r,i[1])?(zd(r[0],i[1])>zd(r[0],r[1])&&(r[1]=i[1]),zd(i[0],r[1])>zd(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=zd(r[1],i[0]))>o&&(o=a,_o=i[0],Uo=r[1])}return Tv=x1=null,_o===1/0||Kf===1/0?[[NaN,NaN],[NaN,NaN]]:[[_o,Kf],[Uo,Hd]]}var D3,iD,sD,oD,aD,uD,lD,cD,jz,Uz,zz,V2e,H2e,Jc,Zc,ef,p0={sphere:bl,point:mK,lineStart:$ae,lineEnd:Bae,polygonStart:function(){p0.lineStart=Lpt,p0.lineEnd=Fpt},polygonEnd:function(){p0.lineStart=$ae,p0.lineEnd=Bae}};function mK(e,t){e*=zr,t*=zr;var n=Wn(t);BR(n*Wn(e),n*$n(e),$n(t))}function BR(e,t,n){++D3,sD+=(e-sD)/D3,oD+=(t-oD)/D3,aD+=(n-aD)/D3}function $ae(){p0.point=Opt}function Opt(e,t){e*=zr,t*=zr;var n=Wn(t);Jc=n*Wn(e),Zc=n*$n(e),ef=$n(t),p0.point=Mpt,BR(Jc,Zc,ef)}function Mpt(e,t){e*=zr,t*=zr;var n=Wn(t),r=n*Wn(e),i=n*$n(e),s=$n(t),o=ep(cf((o=Zc*s-ef*i)*o+(o=ef*r-Jc*s)*o+(o=Jc*i-Zc*r)*o),Jc*r+Zc*i+ef*s);iD+=o,uD+=o*(Jc+(Jc=r)),lD+=o*(Zc+(Zc=i)),cD+=o*(ef+(ef=s)),BR(Jc,Zc,ef)}function Bae(){p0.point=mK}function Lpt(){p0.point=$pt}function Fpt(){q2e(V2e,H2e),p0.point=mK}function $pt(e,t){V2e=e,H2e=t,e*=zr,t*=zr,p0.point=q2e;var n=Wn(t);Jc=n*Wn(e),Zc=n*$n(e),ef=$n(t),BR(Jc,Zc,ef)}function q2e(e,t){e*=zr,t*=zr;var n=Wn(t),r=n*Wn(e),i=n*$n(e),s=$n(t),o=Zc*s-ef*i,a=ef*r-Jc*s,u=Jc*i-Zc*r,l=Oz(o,a,u),c=sd(l),f=l&&-c/l;jz.add(f*o),Uz.add(f*a),zz.add(f*u),iD+=c,uD+=c*(Jc+(Jc=r)),lD+=c*(Zc+(Zc=i)),cD+=c*(ef+(ef=s)),BR(Jc,Zc,ef)}function Bpt(e){D3=iD=sD=oD=aD=uD=lD=cD=0,jz=new af,Uz=new af,zz=new af,My(e,p0);var t=+jz,n=+Uz,r=+zz,i=Oz(t,n,r);return i<Dz&&(t=uD,n=lD,r=cD,iD<Yn&&(t=sD,n=oD,r=aD),i=Oz(t,n,r),i<Dz)?[NaN,NaN]:[ep(n,t)*pa,sd(r/i)*pa]}function Vz(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Hz(e,t){return hi(e)>Wr&&(e-=Math.round(e/lf)*lf),[e,t]}Hz.invert=Hz;function W2e(e,t,n){return(e%=lf)?t||n?Vz(Uae(e),zae(t,n)):Uae(e):t||n?zae(t,n):Hz}function jae(e){return function(t,n){return t+=e,hi(t)>Wr&&(t-=Math.round(t/lf)*lf),[t,n]}}function Uae(e){var t=jae(e);return t.invert=jae(-e),t}function zae(e,t){var n=Wn(e),r=$n(e),i=Wn(t),s=$n(t);function o(a,u){var l=Wn(u),c=Wn(a)*l,f=$n(a)*l,d=$n(u),h=d*n+c*r;return[ep(f*i-h*s,c*n-d*r),sd(h*i+f*s)]}return o.invert=function(a,u){var l=Wn(u),c=Wn(a)*l,f=$n(a)*l,d=$n(u),h=d*i-f*s;return[ep(f*i+d*s,c*n+h*r),sd(h*n-c*r)]},o}function jpt(e){e=W2e(e[0]*zr,e[1]*zr,e.length>2?e[2]*zr:0);function t(n){return n=e(n[0]*zr,n[1]*zr),n[0]*=pa,n[1]*=pa,n}return t.invert=function(n){return n=e.invert(n[0]*zr,n[1]*zr),n[0]*=pa,n[1]*=pa,n},t}function Upt(e,t,n,r,i,s){if(n){var o=Wn(t),a=$n(t),u=r*n;i==null?(i=t+r*lf,s=t-u/2):(i=Vae(o,i),s=Vae(o,s),(r>0?i<s:i>s)&&(i+=r*lf));for(var l,c=i;r>0?c>s:c<s;c-=u)l=nD([o,-a*Wn(c),-a*$n(c)]),e.point(l[0],l[1])}}function Vae(e,t){t=ew(t),t[0]-=e,rD(t);var n=M2e(-t[1]);return((-t[2]<0?-n:n)+lf-Yn)%lf}function G2e(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:bl,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function EN(e,t){return hi(e[0]-t[0])<Yn&&hi(e[1]-t[1])<Yn}function z6(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Y2e(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],b=p[m],y;if(EN(g,b)){if(!g[2]&&!b[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}b[0]+=2*Yn}s.push(y=new z6(g,p,null,!0)),o.push(y.o=new z6(g,null,y,!1)),s.push(y=new z6(b,p,null,!1)),o.push(y.o=new z6(b,null,y,!0))}}),!!s.length){for(o.sort(t),Hae(s),Hae(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Hae(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function j$(e){return hi(e[0])<=Wr?e[0]:Gh(e[0])*((hi(e[0])+Wr)%lf-Wr)}function zpt(e,t){var n=j$(t),r=t[1],i=$n(r),s=[$n(n),-Wn(n),0],o=0,a=0,u=new af;i===1?r=qo+Yn:i===-1&&(r=-qo-Yn);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=j$(h),m=h[1]/2+Q8,g=$n(m),b=Wn(m),y=0;y<d;++y,p=w,g=C,b=R,h=x){var x=f[y],w=j$(x),S=x[1]/2+Q8,C=$n(S),R=Wn(S),I=w-p,O=I>=0?1:-1,M=O*I,L=M>Wr,H=g*C;if(u.add(ep(H*O*$n(M),b*R+H*Wn(M))),o+=L?I+O*lf:I,L^p>=n^w>=n){var D=kS(ew(h),ew(x));rD(D);var B=kS(s,D);rD(B);var z=(L^I>=0?-1:1)*sd(B[2]);(r>z||r===z&&(D[0]||D[1]))&&(a+=L^I>=0?1:-1)}}return(o<-1e-6||o<Yn&&u<-1e-12)^a&1}function K2e(e,t,n,r){return function(i){var s=t(i),o=G2e(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=b,d.lineStart=y,d.lineEnd=x,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=Dwe(c);var w=zpt(l,r);c.length?(u||(i.polygonStart(),u=!0),Y2e(c,Hpt,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,S){e(w,S)&&i.point(w,S)}function p(w,S){s.point(w,S)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function b(w,S){f.push([w,S]),a.point(w,S)}function y(){a.lineStart(),f=[]}function x(){b(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),S=o.result(),C,R=S.length,I,O,M;if(f.pop(),l.push(f),f=null,!!R){if(w&1){if(O=S[0],(I=O.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),C=0;C<I;++C)i.point((M=O[C])[0],M[1]);i.lineEnd()}return}R>1&&w&2&&S.push(S.pop().concat(S.shift())),c.push(S.filter(Vpt))}}return d}}function Vpt(e){return e.length>1}function Hpt(e,t){return((e=e.x)[0]<0?e[1]-qo-Yn:qo-e[1])-((t=t.x)[0]<0?t[1]-qo-Yn:qo-t[1])}const qae=K2e(function(){return!0},qpt,Gpt,[-Wr,-qo]);function qpt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Wr:-Wr,u=hi(s-t);hi(u-Wr)<Yn?(e.point(t,n=(n+o)/2>0?qo:-qo),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Wr&&(hi(t-r)<Yn&&(t-=r*Yn),hi(s-a)<Yn&&(s-=a*Yn),n=Wpt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Wpt(e,t,n,r){var i,s,o=$n(e-n);return hi(o)>Yn?qT(($n(t)*(s=Wn(r))*$n(n)-$n(r)*(i=Wn(t))*$n(e))/(i*s*o)):(t+r)/2}function Gpt(e,t,n,r){var i;if(e==null)i=n*qo,r.point(-Wr,i),r.point(0,i),r.point(Wr,i),r.point(Wr,0),r.point(Wr,-i),r.point(0,-i),r.point(-Wr,-i),r.point(-Wr,0),r.point(-Wr,i);else if(hi(e[0]-t[0])>Yn){var s=e[0]<t[0]?Wr:-Wr;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Ypt(e){var t=Wn(e),n=2*zr,r=t>0,i=hi(t)>Yn;function s(c,f,d,h){Upt(h,e,n,d,c,f)}function o(c,f){return Wn(c)*Wn(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,b){var y=[g,b],x,w=o(g,b),S=r?w?0:l(g,b):w?l(g+(g<0?Wr:-Wr),b):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(x=u(f,y),(!x||EN(f,x)||EN(y,x))&&(y[2]=1)),w!==h)m=0,w?(c.lineStart(),x=u(y,f),c.point(x[0],x[1])):(x=u(f,y),c.point(x[0],x[1],2),c.lineEnd()),f=x;else if(i&&f&&r^w){var C;!(S&d)&&(C=u(y,f,!0))&&(m=0,r?(c.lineStart(),c.point(C[0][0],C[0][1]),c.point(C[1][0],C[1][1]),c.lineEnd()):(c.point(C[1][0],C[1][1]),c.lineEnd(),c.lineStart(),c.point(C[0][0],C[0][1],3)))}w&&(!f||!EN(f,y))&&c.point(y[0],y[1]),f=y,h=w,d=S},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=ew(c),p=ew(f),m=[1,0,0],g=kS(h,p),b=j6(g,g),y=g[0],x=b-y*y;if(!x)return!d&&c;var w=t*b/x,S=-t*y/x,C=kS(m,g),R=U6(m,w),I=U6(g,S);B$(R,I);var O=C,M=j6(R,O),L=j6(O,O),H=M*M-L*(j6(R,R)-1);if(!(H<0)){var D=cf(H),B=U6(O,(-M-D)/L);if(B$(B,R),B=nD(B),!d)return B;var z=c[0],G=f[0],Z=c[1],ne=f[1],ue;G<z&&(ue=z,z=G,G=ue);var X=G-z,q=hi(X-Wr)<Yn,te=q||X<Yn;if(!q&&ne<Z&&(ue=Z,Z=ne,ne=ue),te?q?Z+ne>0^B[1]<(hi(B[0]-z)<Yn?Z:ne):Z<=B[1]&&B[1]<=ne:X>Wr^(z<=B[0]&&B[0]<=G)){var W=U6(O,(-M+D)/L);return B$(W,R),[B,nD(W)]}}}function l(c,f){var d=r?e:Wr-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return K2e(o,a,s,r?[0,-e]:[-Wr,e-Wr])}function Kpt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var V6=1e9,H6=-1e9;function X2e(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return hi(l[0]-e)<Yn?c>0?0:3:hi(l[0]-n)<Yn?c>0?2:1:hi(l[1]-t)<Yn?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=G2e(),d,h,p,m,g,b,y,x,w,S,C,R={point:I,lineStart:H,lineEnd:D,polygonStart:M,polygonEnd:L};function I(z,G){i(z,G)&&c.point(z,G)}function O(){for(var z=0,G=0,Z=h.length;G<Z;++G)for(var ne=h[G],ue=1,X=ne.length,q=ne[0],te,W,ee=q[0],oe=q[1];ue<X;++ue)te=ee,W=oe,q=ne[ue],ee=q[0],oe=q[1],W<=r?oe>r&&(ee-te)*(r-W)>(oe-W)*(e-te)&&++z:oe<=r&&(ee-te)*(r-W)<(oe-W)*(e-te)&&--z;return z}function M(){c=f,d=[],h=[],C=!0}function L(){var z=O(),G=C&&z,Z=(d=Dwe(d)).length;(G||Z)&&(l.polygonStart(),G&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),Z&&Y2e(d,a,z,s,l),l.polygonEnd()),c=l,d=h=p=null}function H(){R.point=B,h&&h.push(p=[]),S=!0,w=!1,y=x=NaN}function D(){d&&(B(m,g),b&&w&&f.rejoin(),d.push(f.result())),R.point=I,w&&c.lineEnd()}function B(z,G){var Z=i(z,G);if(h&&p.push([z,G]),S)m=z,g=G,b=Z,S=!1,Z&&(c.lineStart(),c.point(z,G));else if(Z&&w)c.point(z,G);else{var ne=[y=Math.max(H6,Math.min(V6,y)),x=Math.max(H6,Math.min(V6,x))],ue=[z=Math.max(H6,Math.min(V6,z)),G=Math.max(H6,Math.min(V6,G))];Kpt(ne,ue,e,t,n,r)?(w||(c.lineStart(),c.point(ne[0],ne[1])),c.point(ue[0],ue[1]),Z||c.lineEnd(),C=!1):Z&&(c.lineStart(),c.point(z,G),C=!1)}y=z,x=G,w=Z}return R}}function Wae(e,t,n){var r=Kd(e,t-Yn,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Gae(e,t,n){var r=Kd(e,t-Yn,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Xpt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function b(){return{type:"MultiLineString",coordinates:y()}}function y(){return Kd(B6(r/c)*c,n,c).map(p).concat(Kd(B6(a/f)*f,o,f).map(m)).concat(Kd(B6(t/u)*u,e,u).filter(function(x){return hi(x%c)>Yn}).map(d)).concat(Kd(B6(s/l)*l,i,l).filter(function(x){return hi(x%f)>Yn}).map(h))}return b.lines=function(){return y().map(function(x){return{type:"LineString",coordinates:x}})},b.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},b.extent=function(x){return arguments.length?b.extentMajor(x).extentMinor(x):b.extentMinor()},b.extentMajor=function(x){return arguments.length?(r=+x[0][0],n=+x[1][0],a=+x[0][1],o=+x[1][1],r>n&&(x=r,r=n,n=x),a>o&&(x=a,a=o,o=x),b.precision(g)):[[r,a],[n,o]]},b.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],s=+x[0][1],i=+x[1][1],t>e&&(x=t,t=e,e=x),s>i&&(x=s,s=i,i=x),b.precision(g)):[[t,s],[e,i]]},b.step=function(x){return arguments.length?b.stepMajor(x).stepMinor(x):b.stepMinor()},b.stepMajor=function(x){return arguments.length?(c=+x[0],f=+x[1],b):[c,f]},b.stepMinor=function(x){return arguments.length?(u=+x[0],l=+x[1],b):[u,l]},b.precision=function(x){return arguments.length?(g=+x,d=Wae(s,i,90),h=Gae(t,e,g),p=Wae(a,o,90),m=Gae(r,n,g),b):g},b.extentMajor([[-180,-90+Yn],[180,90-Yn]]).extentMinor([[-180,-80-Yn],[180,80+Yn]])}const b4=e=>e;var U$=new af,qz=new af,Q2e,J2e,Wz,Gz,Ly={point:bl,lineStart:bl,lineEnd:bl,polygonStart:function(){Ly.lineStart=Qpt,Ly.lineEnd=Zpt},polygonEnd:function(){Ly.lineStart=Ly.lineEnd=Ly.point=bl,U$.add(hi(qz)),qz=new af},result:function(){var e=U$/2;return U$=new af,e}};function Qpt(){Ly.point=Jpt}function Jpt(e,t){Ly.point=Z2e,Q2e=Wz=e,J2e=Gz=t}function Z2e(e,t){qz.add(Gz*e-Wz*t),Wz=e,Gz=t}function Zpt(){Z2e(Q2e,J2e)}var RS=1/0,fD=RS,x4=-RS,dD=x4,hD={point:e0t,lineStart:bl,lineEnd:bl,polygonStart:bl,polygonEnd:bl,result:function(){var e=[[RS,fD],[x4,dD]];return x4=dD=-(fD=RS=1/0),e}};function e0t(e,t){e<RS&&(RS=e),e>x4&&(x4=e),t<fD&&(fD=t),t>dD&&(dD=t)}var Yz=0,Kz=0,O3=0,pD=0,mD=0,RE=0,Xz=0,Qz=0,M3=0,eEe,tEe,Pm,Nm,Wh={point:tw,lineStart:Yae,lineEnd:Kae,polygonStart:function(){Wh.lineStart=r0t,Wh.lineEnd=i0t},polygonEnd:function(){Wh.point=tw,Wh.lineStart=Yae,Wh.lineEnd=Kae},result:function(){var e=M3?[Xz/M3,Qz/M3]:RE?[pD/RE,mD/RE]:O3?[Yz/O3,Kz/O3]:[NaN,NaN];return Yz=Kz=O3=pD=mD=RE=Xz=Qz=M3=0,e}};function tw(e,t){Yz+=e,Kz+=t,++O3}function Yae(){Wh.point=t0t}function t0t(e,t){Wh.point=n0t,tw(Pm=e,Nm=t)}function n0t(e,t){var n=e-Pm,r=t-Nm,i=cf(n*n+r*r);pD+=i*(Pm+e)/2,mD+=i*(Nm+t)/2,RE+=i,tw(Pm=e,Nm=t)}function Kae(){Wh.point=tw}function r0t(){Wh.point=s0t}function i0t(){nEe(eEe,tEe)}function s0t(e,t){Wh.point=nEe,tw(eEe=Pm=e,tEe=Nm=t)}function nEe(e,t){var n=e-Pm,r=t-Nm,i=cf(n*n+r*r);pD+=i*(Pm+e)/2,mD+=i*(Nm+t)/2,RE+=i,i=Nm*e-Pm*t,Xz+=i*(Pm+e),Qz+=i*(Nm+t),M3+=i*3,tw(Pm=e,Nm=t)}function rEe(e){this._context=e}rEe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,lf);break}}},result:bl};var Jz=new af,z$,iEe,sEe,L3,F3,_4={point:bl,lineStart:function(){_4.point=o0t},lineEnd:function(){z$&&oEe(iEe,sEe),_4.point=bl},polygonStart:function(){z$=!0},polygonEnd:function(){z$=null},result:function(){var e=+Jz;return Jz=new af,e}};function o0t(e,t){_4.point=oEe,iEe=L3=e,sEe=F3=t}function oEe(e,t){L3-=e,F3-=t,Jz.add(cf(L3*L3+F3*F3)),L3=e,F3=t}let Xae,gD,Qae,Jae;class Zae{constructor(t){this._append=t==null?aEe:a0t(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Qae||this._append!==gD){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Qae=r,gD=this._append,Jae=this._,this._=i}this._+=Jae;break}}}result(){const t=this._;return this._="",t.length?t:null}}function aEe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function a0t(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return aEe;if(t!==Xae){const n=10**t;Xae=t,gD=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return gD}function uEe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),My(a,i(s))),s.result()}return o.area=function(a){return My(a,i(Ly)),Ly.result()},o.measure=function(a){return My(a,i(_4)),_4.result()},o.bounds=function(a){return My(a,i(hD)),hD.result()},o.centroid=function(a){return My(a,i(Wh)),Wh.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,b4):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Zae(n)):new rEe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new Zae(n)),o},o.projection(e).digits(n).context(t)}function cM(e){return function(t){var n=new Zz;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Zz(){}Zz.prototype={constructor:Zz,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function gK(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),My(n,e.stream(hD)),t(hD.result()),r!=null&&e.clipExtent(r),e}function fM(e,t,n){return gK(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function yK(e,t,n){return fM(e,[[0,0],t],n)}function vK(e,t,n){return gK(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function bK(e,t,n){return gK(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var eue=16,u0t=Wn(30*zr);function tue(e,t){return+t?c0t(e,t):l0t(e)}function l0t(e){return cM({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function c0t(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var b=l-r,y=c-i,x=b*b+y*y;if(x>4*t&&m--){var w=o+d,S=a+h,C=u+p,R=cf(w*w+S*S+C*C),I=sd(C/=R),O=hi(hi(C)-1)<Yn||hi(s-f)<Yn?(s+f)/2:ep(S,w),M=e(O,I),L=M[0],H=M[1],D=L-r,B=H-i,z=y*D-b*B;(z*z/x>t||hi((b*D+y*B)/x-.5)>.3||o*d+a*h+u*p<u0t)&&(n(r,i,s,o,a,u,L,H,O,w/=R,S/=R,C,m,g),g.point(L,H),n(L,H,O,w,S,C,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:b,lineStart:y,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=S},polygonEnd:function(){r.polygonEnd(),g.lineStart=y}};function b(I,O){I=e(I,O),r.point(I[0],I[1])}function y(){f=NaN,g.point=x,r.lineStart()}function x(I,O){var M=ew([I,O]),L=e(I,O);n(f,d,c,h,p,m,f=L[0],d=L[1],c=I,h=M[0],p=M[1],m=M[2],eue,r),r.point(f,d)}function w(){g.point=b,r.lineEnd()}function S(){y(),g.point=C,g.lineEnd=R}function C(I,O){x(i=I,O),s=f,o=d,a=h,u=p,l=m,g.point=x}function R(){n(f,d,c,h,p,m,s,o,i,a,u,l,eue,r),g.lineEnd=w,w()}return g}}var f0t=cM({point:function(e,t){this.stream.point(e*zr,t*zr)}});function d0t(e){return cM({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function h0t(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function nue(e,t,n,r,i,s){if(!s)return h0t(e,t,n,r,i);var o=Wn(s),a=$n(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Sg(e){return lEe(function(){return e})()}function lEe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=qae,g=null,b,y,x,w=b4,S=.5,C,R,I,O,M;function L(z){return I(z[0]*zr,z[1]*zr)}function H(z){return z=I.invert(z[0],z[1]),z&&[z[0]*pa,z[1]*pa]}L.stream=function(z){return O&&M===z?O:O=f0t(d0t(c)(m(C(w(M=z)))))},L.preclip=function(z){return arguments.length?(m=z,p=void 0,B()):m},L.postclip=function(z){return arguments.length?(w=z,g=b=y=x=null,B()):w},L.clipAngle=function(z){return arguments.length?(m=+z?Ypt(p=z*zr):(p=null,qae),B()):p*pa},L.clipExtent=function(z){return arguments.length?(w=z==null?(g=b=y=x=null,b4):X2e(g=+z[0][0],b=+z[0][1],y=+z[1][0],x=+z[1][1]),B()):g==null?null:[[g,b],[y,x]]},L.scale=function(z){return arguments.length?(n=+z,D()):n},L.translate=function(z){return arguments.length?(r=+z[0],i=+z[1],D()):[r,i]},L.center=function(z){return arguments.length?(s=z[0]%360*zr,o=z[1]%360*zr,D()):[s*pa,o*pa]},L.rotate=function(z){return arguments.length?(a=z[0]%360*zr,u=z[1]%360*zr,l=z.length>2?z[2]%360*zr:0,D()):[a*pa,u*pa,l*pa]},L.angle=function(z){return arguments.length?(f=z%360*zr,D()):f*pa},L.reflectX=function(z){return arguments.length?(d=z?-1:1,D()):d<0},L.reflectY=function(z){return arguments.length?(h=z?-1:1,D()):h<0},L.precision=function(z){return arguments.length?(C=tue(R,S=z*z),B()):cf(S)},L.fitExtent=function(z,G){return fM(L,z,G)},L.fitSize=function(z,G){return yK(L,z,G)},L.fitWidth=function(z,G){return vK(L,z,G)},L.fitHeight=function(z,G){return bK(L,z,G)};function D(){var z=nue(n,0,0,d,h,f).apply(null,t(s,o)),G=nue(n,r-z[0],i-z[1],d,h,f);return c=W2e(a,u,l),R=Vz(t,G),I=Vz(c,R),C=tue(R,S),B()}function B(){return O=M=null,L}return function(){return t=e.apply(this,arguments),L.invert=t.invert&&H,D()}}function xK(e){var t=0,n=Wr/3,r=lEe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*zr,n=s[1]*zr):[t*pa,n*pa]},i}function p0t(e){var t=Wn(e);function n(r,i){return[r*t,$n(i)/t]}return n.invert=function(r,i){return[r/t,sd(i*t)]},n}function m0t(e,t){var n=$n(e),r=(n+$n(t))/2;if(hi(r)<Yn)return p0t(e);var i=1+n*(2*r-n),s=cf(i)/r;function o(a,u){var l=cf(i-2*r*$n(u))/r;return[l*$n(a*=r),s-l*Wn(a)]}return o.invert=function(a,u){var l=s-u,c=ep(a,hi(l))*Gh(l);return l*r<0&&(c-=Wr*Gh(a)*Gh(l)),[c/r,sd((i-(a*a+l*l)*r*r)/(2*r))]},o}function yD(){return xK(m0t).scale(155.424).center([0,33.6442])}function cEe(){return yD().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function g0t(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function y0t(){var e,t,n=cEe(),r,i=yD().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=yD().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=g0t([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Yn,m+.12*h+Yn],[p-.214*h-Yn,m+.234*h-Yn]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Yn,m+.166*h+Yn],[p-.115*h-Yn,m+.234*h-Yn]]).stream(l),f()},c.fitExtent=function(d,h){return fM(c,d,h)},c.fitSize=function(d,h){return yK(c,d,h)},c.fitWidth=function(d,h){return vK(c,d,h)},c.fitHeight=function(d,h){return bK(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function fEe(e){return function(t,n){var r=Wn(t),i=Wn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*$n(t),s*$n(n)]}}function jR(e){return function(t,n){var r=cf(t*t+n*n),i=e(r),s=$n(i),o=Wn(i);return[ep(t*s,r*o),sd(r&&n*s/r)]}}var dEe=fEe(function(e){return cf(2/(1+e))});dEe.invert=jR(function(e){return 2*sd(e/2)});function v0t(){return Sg(dEe).scale(124.75).clipAngle(180-.001)}var hEe=fEe(function(e){return(e=M2e(e))&&e/$n(e)});hEe.invert=jR(function(e){return e});function b0t(){return Sg(hEe).scale(79.4188).clipAngle(180-.001)}function dM(e,t){return[e,J8(pK((qo+t)/2))]}dM.invert=function(e,t){return[e,2*qT(O2e(t))-qo]};function x0t(){return pEe(dM).scale(961/lf)}function pEe(e){var t=Sg(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Wr*r(),d=t(jpt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===dM?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function q6(e){return pK((qo+e)/2)}function _0t(e,t){var n=Wn(e),r=e===t?$n(e):J8(n/Wn(t))/J8(q6(t)/q6(e)),i=n*$$(q6(e),r)/r;if(!r)return dM;function s(o,a){i>0?a<-qo+Yn&&(a=-qo+Yn):a>qo-Yn&&(a=qo-Yn);var u=i/$$(q6(a),r);return[u*$n(r*o),i-u*Wn(r*o)]}return s.invert=function(o,a){var u=i-a,l=Gh(r)*cf(o*o+u*u),c=ep(o,hi(u))*Gh(u);return u*r<0&&(c-=Wr*Gh(o)*Gh(u)),[c/r,2*qT($$(i/l,1/r))-qo]},s}function w0t(){return xK(_0t).scale(109.5).parallels([30,30])}function vD(e,t){return[e,t]}vD.invert=vD;function E0t(){return Sg(vD).scale(152.63)}function S0t(e,t){var n=Wn(e),r=e===t?$n(e):(n-Wn(t))/(t-e),i=n/r+e;if(hi(r)<Yn)return vD;function s(o,a){var u=i-a,l=r*o;return[u*$n(l),i-u*Wn(l)]}return s.invert=function(o,a){var u=i-a,l=ep(o,hi(u))*Gh(u);return u*r<0&&(l-=Wr*Gh(o)*Gh(u)),[l/r,i-Gh(r)*cf(o*o+u*u)]},s}function T0t(){return xK(S0t).scale(131.154).center([0,13.9389])}var Tk=1.340264,Ck=-.081106,Ak=893e-6,kk=.003796,bD=cf(3)/2,C0t=12;function mEe(e,t){var n=sd(bD*$n(t)),r=n*n,i=r*r*r;return[e*Wn(n)/(bD*(Tk+3*Ck*r+i*(7*Ak+9*kk*r))),n*(Tk+Ck*r+i*(Ak+kk*r))]}mEe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<C0t&&(a=n*(Tk+Ck*r+i*(Ak+kk*r))-t,u=Tk+3*Ck*r+i*(7*Ak+9*kk*r),n-=o=a/u,r=n*n,i=r*r*r,!(hi(o)<Dz));++s);return[bD*e*(Tk+3*Ck*r+i*(7*Ak+9*kk*r))/Wn(n),sd($n(n)/bD)]};function A0t(){return Sg(mEe).scale(177.158)}function gEe(e,t){var n=Wn(t),r=Wn(e)*n;return[n*$n(e)/r,$n(t)/r]}gEe.invert=jR(qT);function k0t(){return Sg(gEe).scale(144.049).clipAngle(60)}function R0t(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=cM({point:function(w,S){var C=x([w,S]);this.stream.point(C[0],C[1])}}),m=b4,g,b;function y(){return d=e*r,h=e*i,g=b=null,x}function x(w){var S=w[0]*d,C=w[1]*h;if(s){var R=C*o-S*a;S=S*o+C*a,C=R}return[S+t,C+n]}return x.invert=function(w){var S=w[0]-t,C=w[1]-n;if(s){var R=C*o+S*a;S=S*o-C*a,C=R}return[S/d,C/h]},x.stream=function(w){return g&&b===w?g:g=p(m(b=w))},x.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,y()):m},x.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,b4):X2e(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),y()):u==null?null:[[u,l],[c,f]]},x.scale=function(w){return arguments.length?(e=+w,y()):e},x.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],y()):[t,n]},x.angle=function(w){return arguments.length?(s=w%360*zr,a=$n(s),o=Wn(s),y()):s*pa},x.reflectX=function(w){return arguments.length?(r=w?-1:1,y()):r<0},x.reflectY=function(w){return arguments.length?(i=w?-1:1,y()):i<0},x.fitExtent=function(w,S){return fM(x,w,S)},x.fitSize=function(w,S){return yK(x,w,S)},x.fitWidth=function(w,S){return vK(x,w,S)},x.fitHeight=function(w,S){return bK(x,w,S)},x}function yEe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}yEe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(hi(i)>Yn&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function I0t(){return Sg(yEe).scale(175.295)}function vEe(e,t){return[Wn(t)*$n(e),$n(t)]}vEe.invert=jR(sd);function P0t(){return Sg(vEe).scale(249.5).clipAngle(90+Yn)}function bEe(e,t){var n=Wn(t),r=1+Wn(e)*n;return[n*$n(e)/r,$n(t)/r]}bEe.invert=jR(function(e){return 2*qT(e)});function N0t(){return Sg(bEe).scale(250).clipAngle(142)}function xEe(e,t){return[J8(pK((qo+t)/2)),-e]}xEe.invert=function(e,t){return[-t,2*qT(O2e(e))-qo]};function D0t(){var e=pEe(xEe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function O0t(e,t){return e.parent===t.parent?1:2}function M0t(e){return e.reduce(L0t,0)/e.length}function L0t(e,t){return e+t.x}function F0t(e){return 1+e.reduce($0t,0)}function $0t(e,t){return Math.max(e,t.y)}function B0t(e){for(var t;t=e.children;)e=t[0];return e}function j0t(e){for(var t;t=e.children;)e=t[t.length-1];return e}function U0t(){var e=O0t,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=M0t(h),d.y=F0t(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=B0t(s),l=j0t(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function z0t(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function V0t(){return this.eachAfter(z0t)}function H0t(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function q0t(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function W0t(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function G0t(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Y0t(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function K0t(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function X0t(e){for(var t=this,n=Q0t(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Q0t(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function J0t(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Z0t(){return Array.from(this)}function emt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function tmt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*nmt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function _K(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=smt)):t===void 0&&(t=imt);for(var n=new IS(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new IS(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(_Ee)}function rmt(){return _K(this).eachBefore(omt)}function imt(e){return e.children}function smt(e){return Array.isArray(e)?e[1]:null}function omt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function _Ee(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function IS(e){this.data=e,this.depth=this.height=0,this.parent=null}IS.prototype=_K.prototype={constructor:IS,count:V0t,each:H0t,eachAfter:W0t,eachBefore:q0t,find:G0t,sum:Y0t,sort:K0t,path:X0t,ancestors:J0t,descendants:Z0t,leaves:emt,links:tmt,copy:rmt,[Symbol.iterator]:nmt};function SN(e){return e==null?null:wEe(e)}function wEe(e){if(typeof e!="function")throw new Error;return e}function p_(){return 0}function _E(e){return function(){return e}}const amt=1664525,umt=1013904223,rue=4294967296;function lmt(){let e=1;return()=>(e=(amt*e+umt)%rue)/rue}function cmt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fmt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function dmt(e,t){for(var n=0,r=(e=fmt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&EEe(o,s)?++n:(o=pmt(i=hmt(i,s)),n=0);return o}function hmt(e,t){var n,r;if(V$(t,e))return[t];for(n=0;n<e.length;++n)if(W6(t,e[n])&&V$($3(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(W6($3(e[n],e[r]),t)&&W6($3(e[n],t),e[r])&&W6($3(e[r],t),e[n])&&V$(SEe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function W6(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function EEe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function V$(e,t){for(var n=0;n<t.length;++n)if(!EEe(e,t[n]))return!1;return!0}function pmt(e){switch(e.length){case 1:return mmt(e[0]);case 2:return $3(e[0],e[1]);case 3:return SEe(e[0],e[1],e[2])}}function mmt(e){return{x:e.x,y:e.y,r:e.r}}function $3(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function SEe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,b=f-s,y=r*r+i*i-s*s,x=y-o*o-a*a+u*u,w=y-l*l-c*c+f*f,S=h*p-d*m,C=(p*w-m*x)/(S*2)-r,R=(m*g-p*b)/S,I=(h*x-d*w)/(S*2)-i,O=(d*b-h*g)/S,M=R*R+O*O-1,L=2*(s+C*R+I*O),H=C*C+I*I-s*s,D=-(Math.abs(M)>1e-6?(L+Math.sqrt(L*L-4*M*H))/(2*M):H/L);return{x:r+C+R*D,y:i+I+O*D,r:D}}function iue(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function sue(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function oue(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function G6(e){this._=e,this.next=null,this.previous=null}function gmt(e,t){if(!(s=(e=cmt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;iue(r,n,i=e[2]),n=new G6(n),r=new G6(r),i=new G6(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){iue(n._,r._,i=e[u]),i=new G6(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(sue(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(sue(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=oue(n);(i=i.next)!==r;)(a=oue(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=dmt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function ymt(e){return Math.sqrt(e.value)}function vmt(){var e=null,t=1,n=1,r=p_;function i(s){const o=lmt();return s.x=t/2,s.y=n/2,e?s.eachBefore(aue(e)).eachAfter(H$(r,.5,o)).eachBefore(uue(1)):s.eachBefore(aue(ymt)).eachAfter(H$(p_,1,o)).eachAfter(H$(r,s.r/Math.min(t,n),o)).eachBefore(uue(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=SN(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:_E(+s),i):r},i}function aue(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function H$(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=gmt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function uue(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function TEe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function UR(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function bmt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(TEe),o}function s(o,a){return function(u){u.children&&UR(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var xmt={depth:-1},lue={},q$={};function _mt(e){return e.id}function wmt(e){return e.parentId}function cue(){var e=_mt,t=wmt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const b=s.map((w,S)=>Emt(n(w,S,i))),y=b.map(fue),x=new Set(b).add("");for(const w of y)x.has(w)||(x.add(w),b.push(w),y.push(fue(w)),s.push(q$));o=(w,S)=>b[S],a=(w,S)=>y[S]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new IS(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?lue:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===lue)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===q$&&f.children.length===1;)f=f.children[0],--u;for(let b=s.length-1;b>=0&&(h=s[b],h.data===q$);--b)h.data=null}if(f.parent=xmt,f.eachBefore(function(b){b.depth=b.parent.depth+1,--u}).eachBefore(_Ee),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=SN(i),r):e},r.parentId=function(i){return arguments.length?(t=SN(i),r):t},r.path=function(i){return arguments.length?(n=SN(i),r):n},r}function Emt(e){e=`${e}`;let t=e.length;return eV(e,t-1)&&!eV(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function fue(e){let t=e.length;if(t<2)return"";for(;--t>1&&!eV(e,t););return e.slice(0,t)}function eV(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Smt(e,t){return e.parent===t.parent?1:2}function W$(e){var t=e.children;return t?t[0]:e.t}function G$(e){var t=e.children;return t?t[t.length-1]:e.t}function Tmt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Cmt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Amt(e,t,n){return e.a.parent===t.parent?e.a:n}function TN(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}TN.prototype=Object.create(IS.prototype);function kmt(e){for(var t=new TN(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new TN(s[o],o)),i.parent=n;return(t.parent=new TN(null,0)).children=[t],t}function Rmt(){var e=Smt,t=1,n=1,r=null;function i(l){var c=kmt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(y){y.x<f.x&&(f=y),y.x>d.x&&(d=y),y.depth>h.depth&&(h=y)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),b=n/(h.depth||1);l.eachBefore(function(y){y.x=(y.x+m)*g,y.y=y.depth*b})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){Cmt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,b=h.m,y=p.m,x=m.m,w;p=G$(p),d=W$(d),p&&d;)m=W$(m),h=G$(h),h.a=l,w=p.z+y-d.z-g+e(p._,d._),w>0&&(Tmt(Amt(p,l,f),l,w),g+=w,b+=w),y+=p.m,g+=d.m,x+=m.m,b+=h.m;p&&!G$(h)&&(h.t=p,h.m+=y-b),d&&!W$(m)&&(m.t=d,m.m+=g-x,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function hM(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var CEe=(1+Math.sqrt(5))/2;function AEe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,b,y,x,w,S,C;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(b=y=g,S=Math.max(p/h,h/p)/(m*e),C=g*g*S,w=Math.max(y/C,C/b);f<d;++f){if(g+=l=a[f].value,l<b&&(b=l),l>y&&(y=l),C=g*g*S,x=Math.max(y/C,C/b),x>w){g-=l;break}w=x}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?UR(u,n,r,i,m?r+=p*g/m:s):hM(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const kEe=function e(t){function n(r,i,s,o,a){AEe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(CEe);function Imt(){var e=kEe,t=!1,n=1,r=1,i=[0],s=p_,o=p_,a=p_,u=p_,l=p_;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(TEe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,b=d.y1-h;g<p&&(p=g=(p+g)/2),b<m&&(m=b=(m+b)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=b,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,b-=u(d)-h,g<p&&(p=g=(p+g)/2),b<m&&(m=b=(m+b)/2),e(d,p,m,g,b))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=wEe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:_E(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:_E(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:_E(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:_E(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:_E(+d),c):l},c}function Pmt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,b){if(f>=d-1){var y=s[f];y.x0=p,y.y0=m,y.x1=g,y.y1=b;return}for(var x=l[f],w=h/2+x,S=f+1,C=d-1;S<C;){var R=S+C>>>1;l[R]<w?S=R+1:C=R}w-l[S-1]<l[S]-w&&f+1<S&&--S;var I=l[S]-x,O=h-I;if(g-p>b-m){var M=h?(p*O+g*I)/h:g;c(f,S,I,p,m,M,b),c(S,d,O,M,m,g,b)}else{var L=h?(m*O+b*I)/h:b;c(f,S,I,p,m,g,L),c(S,d,O,p,L,g,b)}}}function Nmt(e,t,n,r,i){(e.depth&1?hM:UR)(e,t,n,r,i)}const Dmt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?UR(l,i,s,o,m?s+=(a-s)*l.value/m:a):hM(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=AEe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(CEe);function Tg(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Zb(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const tV=Symbol("implicit");function wK(){var e=new Qoe,t=[],n=[],r=tV;function i(s){let o=e.get(s);if(o===void 0){if(r!==tV)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Qoe;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return wK(t,n).unknown(r)},Tg.apply(i,arguments),i}function Omt(e){return function(){return e}}function nV(e){return+e}var due=[0,1];function Zf(e){return e}function rV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Omt(isNaN(t)?NaN:.5)}function Mmt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Lmt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=rV(i,r),s=n(o,s)):(r=rV(r,i),s=n(s,o)),function(a){return s(r(a))}}function Fmt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=rV(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=vb(e,a,1,r)-1;return s[u](i[u](a))}}function zR(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function pM(){var e=due,t=due,n=Jb,r,i,s,o=Zf,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Zf&&(o=Mmt(e[0],e[d-1])),a=d>2?Fmt:Lmt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Hh)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,nV),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=FR,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Zf,c()):o!==Zf},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function REe(){return pM()(Zf,Zf)}function IEe(e,t,n,r){var i=bb(e,t,n),s;switch(r=Z_(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=N2e(i,o))&&(r.precision=s),hK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=D2e(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=P2e(i))&&(r.precision=s-(r.type==="%")*2);break}}return lM(r)}function Vw(e){var t=e.domain;return e.ticks=function(n){var r=t();return bz(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return IEe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=xz(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function mM(){var e=REe();return e.copy=function(){return zR(e,mM())},Tg.apply(e,arguments),Vw(e)}function PEe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,nV),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return PEe(e).unknown(t)},e=arguments.length?Array.from(e,nV):[0,1],Vw(n)}function NEe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function hue(e){return Math.log(e)}function pue(e){return Math.exp(e)}function $mt(e){return-Math.log(-e)}function Bmt(e){return-Math.exp(-e)}function jmt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Umt(e){return e===10?jmt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function zmt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function mue(e){return(t,n)=>-e(-t,n)}function EK(e){const t=e(hue,pue),n=t.domain;let r=10,i,s;function o(){return i=zmt(r),s=Umt(r),n()[0]<0?(i=mue(i),s=mue(s),e($mt,Bmt)):e(hue,pue),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let b=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;b.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;b.push(m)}b.length*2<g&&(b=bz(l,c,g))}else b=bz(d,h,Math.min(h-d,g)).map(s);return f?b.reverse():b},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Z_(u)).precision==null&&(u.trim=!0),u=lM(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(NEe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function DEe(){const e=EK(pM()).domain([1,10]);return e.copy=()=>zR(e,DEe()).base(e.base()),Tg.apply(e,arguments),e}function gue(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function yue(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function SK(e){var t=1,n=e(gue(t),yue(t));return n.constant=function(r){return arguments.length?e(gue(t=+r),yue(t)):t},Vw(n)}function OEe(){var e=SK(pM());return e.copy=function(){return zR(e,OEe()).constant(e.constant())},Tg.apply(e,arguments)}function vue(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Vmt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Hmt(e){return e<0?-e*e:e*e}function TK(e){var t=e(Zf,Zf),n=1;function r(){return n===1?e(Zf,Zf):n===.5?e(Vmt,Hmt):e(vue(n),vue(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Vw(t)}function CK(){var e=TK(pM());return e.copy=function(){return zR(e,CK()).exponent(e.exponent())},Tg.apply(e,arguments),e}function qmt(){return CK.apply(null,arguments).exponent(.5)}function MEe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=Pwe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[vb(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Zy),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return MEe().domain(e).range(t).unknown(r)},Tg.apply(s,arguments)}function LEe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[vb(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return LEe().domain([e,t]).range(i).unknown(s)},Tg.apply(Vw(o),arguments)}function FEe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[vb(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return FEe().domain(e).range(t).unknown(n)},Tg.apply(i,arguments)}const Y$=new Date,K$=new Date;function vu(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>vu(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(Y$.setTime(+s),K$.setTime(+o),e(Y$),e(K$),Math.floor(n(Y$,K$))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const PS=vu(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);PS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?vu(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):PS);PS.range;const zy=1e3,Yh=zy*60,Vy=Yh*60,_1=Vy*24,AK=_1*7,bue=_1*30,X$=_1*365,Hy=vu(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*zy)},(e,t)=>(t-e)/zy,e=>e.getUTCSeconds());Hy.range;const gM=vu(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*zy)},(e,t)=>{e.setTime(+e+t*Yh)},(e,t)=>(t-e)/Yh,e=>e.getMinutes());gM.range;const yM=vu(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Yh)},(e,t)=>(t-e)/Yh,e=>e.getUTCMinutes());yM.range;const vM=vu(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*zy-e.getMinutes()*Yh)},(e,t)=>{e.setTime(+e+t*Vy)},(e,t)=>(t-e)/Vy,e=>e.getHours());vM.range;const bM=vu(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Vy)},(e,t)=>(t-e)/Vy,e=>e.getUTCHours());bM.range;const t1=vu(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Yh)/_1,e=>e.getDate()-1);t1.range;const eb=vu(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_1,e=>e.getUTCDate()-1);eb.range;const $Ee=vu(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_1,e=>Math.floor(e/_1));$Ee.range;function Hw(e){return vu(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Yh)/AK)}const WT=Hw(0),xD=Hw(1),Wmt=Hw(2),Gmt=Hw(3),NS=Hw(4),Ymt=Hw(5),Kmt=Hw(6);WT.range;xD.range;Wmt.range;Gmt.range;NS.range;Ymt.range;Kmt.range;function qw(e){return vu(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/AK)}const GT=qw(0),_D=qw(1),Xmt=qw(2),Qmt=qw(3),DS=qw(4),Jmt=qw(5),Zmt=qw(6);GT.range;_D.range;Xmt.range;Qmt.range;DS.range;Jmt.range;Zmt.range;const w4=vu(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());w4.range;const E4=vu(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());E4.range;const cg=vu(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());cg.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:vu(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});cg.range;const fg=vu(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());fg.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:vu(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});fg.range;function BEe(e,t,n,r,i,s){const o=[[Hy,1,zy],[Hy,5,5*zy],[Hy,15,15*zy],[Hy,30,30*zy],[s,1,Yh],[s,5,5*Yh],[s,15,15*Yh],[s,30,30*Yh],[i,1,Vy],[i,3,3*Vy],[i,6,6*Vy],[i,12,12*Vy],[r,1,_1],[r,2,2*_1],[n,1,AK],[t,1,bue],[t,3,3*bue],[e,1,X$]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=VT(([,,g])=>g).right(o,d);if(h===o.length)return e.every(bb(l/X$,c/X$,f));if(h===0)return PS.every(Math.max(bb(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[egt,tgt]=BEe(fg,E4,GT,$Ee,bM,yM),[ngt,rgt]=BEe(cg,w4,WT,t1,vM,gM);function Q$(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function J$(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function aA(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function jEe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=uA(i),c=lA(i),f=uA(s),d=lA(s),h=uA(o),p=lA(o),m=uA(a),g=lA(a),b=uA(u),y=lA(u),x={a:Z,A:ne,b:ue,B:X,c:null,d:Tue,e:Tue,f:Cgt,g:Lgt,G:$gt,H:Egt,I:Sgt,j:Tgt,L:UEe,m:Agt,M:kgt,p:q,q:te,Q:kue,s:Rue,S:Rgt,u:Igt,U:Pgt,V:Ngt,w:Dgt,W:Ogt,x:null,X:null,y:Mgt,Y:Fgt,Z:Bgt,"%":Aue},w={a:W,A:ee,b:oe,B:pe,c:null,d:Cue,e:Cue,f:Vgt,g:Zgt,G:tyt,H:jgt,I:Ugt,j:zgt,L:VEe,m:Hgt,M:qgt,p:ce,q:he,Q:kue,s:Rue,S:Wgt,u:Ggt,U:Ygt,V:Kgt,w:Xgt,W:Qgt,x:null,X:null,y:Jgt,Y:eyt,Z:nyt,"%":Aue},S={a:M,A:L,b:H,B:D,c:B,d:Eue,e:Eue,f:bgt,g:wue,G:_ue,H:Sue,I:Sue,j:mgt,L:vgt,m:pgt,M:ggt,p:O,q:hgt,Q:_gt,s:wgt,S:ygt,u:ugt,U:lgt,V:cgt,w:agt,W:fgt,x:z,X:G,y:wue,Y:_ue,Z:dgt,"%":xgt};x.x=C(n,x),x.X=C(r,x),x.c=C(t,x),w.x=C(n,w),w.X=C(r,w),w.c=C(t,w);function C(Ee,Ae){return function(ge){var me=[],Oe=-1,Me=0,Ye=Ee.length,lt,We,nt;for(ge instanceof Date||(ge=new Date(+ge));++Oe<Ye;)Ee.charCodeAt(Oe)===37&&(me.push(Ee.slice(Me,Oe)),(We=xue[lt=Ee.charAt(++Oe)])!=null?lt=Ee.charAt(++Oe):We=lt==="e"?" ":"0",(nt=Ae[lt])&&(lt=nt(ge,We)),me.push(lt),Me=Oe+1);return me.push(Ee.slice(Me,Oe)),me.join("")}}function R(Ee,Ae){return function(ge){var me=aA(1900,void 0,1),Oe=I(me,Ee,ge+="",0),Me,Ye;if(Oe!=ge.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(Ae&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(Me=J$(aA(me.y,0,1)),Ye=Me.getUTCDay(),Me=Ye>4||Ye===0?_D.ceil(Me):_D(Me),Me=eb.offset(Me,(me.V-1)*7),me.y=Me.getUTCFullYear(),me.m=Me.getUTCMonth(),me.d=Me.getUTCDate()+(me.w+6)%7):(Me=Q$(aA(me.y,0,1)),Ye=Me.getDay(),Me=Ye>4||Ye===0?xD.ceil(Me):xD(Me),Me=t1.offset(Me,(me.V-1)*7),me.y=Me.getFullYear(),me.m=Me.getMonth(),me.d=Me.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),Ye="Z"in me?J$(aA(me.y,0,1)).getUTCDay():Q$(aA(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(Ye+5)%7:me.w+me.U*7-(Ye+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,J$(me)):Q$(me)}}function I(Ee,Ae,ge,me){for(var Oe=0,Me=Ae.length,Ye=ge.length,lt,We;Oe<Me;){if(me>=Ye)return-1;if(lt=Ae.charCodeAt(Oe++),lt===37){if(lt=Ae.charAt(Oe++),We=S[lt in xue?Ae.charAt(Oe++):lt],!We||(me=We(Ee,ge,me))<0)return-1}else if(lt!=ge.charCodeAt(me++))return-1}return me}function O(Ee,Ae,ge){var me=l.exec(Ae.slice(ge));return me?(Ee.p=c.get(me[0].toLowerCase()),ge+me[0].length):-1}function M(Ee,Ae,ge){var me=h.exec(Ae.slice(ge));return me?(Ee.w=p.get(me[0].toLowerCase()),ge+me[0].length):-1}function L(Ee,Ae,ge){var me=f.exec(Ae.slice(ge));return me?(Ee.w=d.get(me[0].toLowerCase()),ge+me[0].length):-1}function H(Ee,Ae,ge){var me=b.exec(Ae.slice(ge));return me?(Ee.m=y.get(me[0].toLowerCase()),ge+me[0].length):-1}function D(Ee,Ae,ge){var me=m.exec(Ae.slice(ge));return me?(Ee.m=g.get(me[0].toLowerCase()),ge+me[0].length):-1}function B(Ee,Ae,ge){return I(Ee,t,Ae,ge)}function z(Ee,Ae,ge){return I(Ee,n,Ae,ge)}function G(Ee,Ae,ge){return I(Ee,r,Ae,ge)}function Z(Ee){return o[Ee.getDay()]}function ne(Ee){return s[Ee.getDay()]}function ue(Ee){return u[Ee.getMonth()]}function X(Ee){return a[Ee.getMonth()]}function q(Ee){return i[+(Ee.getHours()>=12)]}function te(Ee){return 1+~~(Ee.getMonth()/3)}function W(Ee){return o[Ee.getUTCDay()]}function ee(Ee){return s[Ee.getUTCDay()]}function oe(Ee){return u[Ee.getUTCMonth()]}function pe(Ee){return a[Ee.getUTCMonth()]}function ce(Ee){return i[+(Ee.getUTCHours()>=12)]}function he(Ee){return 1+~~(Ee.getUTCMonth()/3)}return{format:function(Ee){var Ae=C(Ee+="",x);return Ae.toString=function(){return Ee},Ae},parse:function(Ee){var Ae=R(Ee+="",!1);return Ae.toString=function(){return Ee},Ae},utcFormat:function(Ee){var Ae=C(Ee+="",w);return Ae.toString=function(){return Ee},Ae},utcParse:function(Ee){var Ae=R(Ee+="",!0);return Ae.toString=function(){return Ee},Ae}}}var xue={"-":"",_:" ",0:"0"},Hu=/^\s*\d+/,igt=/^%/,sgt=/[\\^$*+?|[\]().{}]/g;function ki(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function ogt(e){return e.replace(sgt,"\\$&")}function uA(e){return new RegExp("^(?:"+e.map(ogt).join("|")+")","i")}function lA(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function agt(e,t,n){var r=Hu.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ugt(e,t,n){var r=Hu.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function lgt(e,t,n){var r=Hu.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function cgt(e,t,n){var r=Hu.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function fgt(e,t,n){var r=Hu.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function _ue(e,t,n){var r=Hu.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function wue(e,t,n){var r=Hu.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function dgt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function hgt(e,t,n){var r=Hu.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function pgt(e,t,n){var r=Hu.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Eue(e,t,n){var r=Hu.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function mgt(e,t,n){var r=Hu.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Sue(e,t,n){var r=Hu.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function ggt(e,t,n){var r=Hu.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ygt(e,t,n){var r=Hu.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function vgt(e,t,n){var r=Hu.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function bgt(e,t,n){var r=Hu.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function xgt(e,t,n){var r=igt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function _gt(e,t,n){var r=Hu.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function wgt(e,t,n){var r=Hu.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Tue(e,t){return ki(e.getDate(),t,2)}function Egt(e,t){return ki(e.getHours(),t,2)}function Sgt(e,t){return ki(e.getHours()%12||12,t,2)}function Tgt(e,t){return ki(1+t1.count(cg(e),e),t,3)}function UEe(e,t){return ki(e.getMilliseconds(),t,3)}function Cgt(e,t){return UEe(e,t)+"000"}function Agt(e,t){return ki(e.getMonth()+1,t,2)}function kgt(e,t){return ki(e.getMinutes(),t,2)}function Rgt(e,t){return ki(e.getSeconds(),t,2)}function Igt(e){var t=e.getDay();return t===0?7:t}function Pgt(e,t){return ki(WT.count(cg(e)-1,e),t,2)}function zEe(e){var t=e.getDay();return t>=4||t===0?NS(e):NS.ceil(e)}function Ngt(e,t){return e=zEe(e),ki(NS.count(cg(e),e)+(cg(e).getDay()===4),t,2)}function Dgt(e){return e.getDay()}function Ogt(e,t){return ki(xD.count(cg(e)-1,e),t,2)}function Mgt(e,t){return ki(e.getFullYear()%100,t,2)}function Lgt(e,t){return e=zEe(e),ki(e.getFullYear()%100,t,2)}function Fgt(e,t){return ki(e.getFullYear()%1e4,t,4)}function $gt(e,t){var n=e.getDay();return e=n>=4||n===0?NS(e):NS.ceil(e),ki(e.getFullYear()%1e4,t,4)}function Bgt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ki(t/60|0,"0",2)+ki(t%60,"0",2)}function Cue(e,t){return ki(e.getUTCDate(),t,2)}function jgt(e,t){return ki(e.getUTCHours(),t,2)}function Ugt(e,t){return ki(e.getUTCHours()%12||12,t,2)}function zgt(e,t){return ki(1+eb.count(fg(e),e),t,3)}function VEe(e,t){return ki(e.getUTCMilliseconds(),t,3)}function Vgt(e,t){return VEe(e,t)+"000"}function Hgt(e,t){return ki(e.getUTCMonth()+1,t,2)}function qgt(e,t){return ki(e.getUTCMinutes(),t,2)}function Wgt(e,t){return ki(e.getUTCSeconds(),t,2)}function Ggt(e){var t=e.getUTCDay();return t===0?7:t}function Ygt(e,t){return ki(GT.count(fg(e)-1,e),t,2)}function HEe(e){var t=e.getUTCDay();return t>=4||t===0?DS(e):DS.ceil(e)}function Kgt(e,t){return e=HEe(e),ki(DS.count(fg(e),e)+(fg(e).getUTCDay()===4),t,2)}function Xgt(e){return e.getUTCDay()}function Qgt(e,t){return ki(_D.count(fg(e)-1,e),t,2)}function Jgt(e,t){return ki(e.getUTCFullYear()%100,t,2)}function Zgt(e,t){return e=HEe(e),ki(e.getUTCFullYear()%100,t,2)}function eyt(e,t){return ki(e.getUTCFullYear()%1e4,t,4)}function tyt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?DS(e):DS.ceil(e),ki(e.getUTCFullYear()%1e4,t,4)}function nyt(){return"+0000"}function Aue(){return"%"}function kue(e){return+e}function Rue(e){return Math.floor(+e/1e3)}var Q2,kK,qEe,RK,WEe;ryt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ryt(e){return Q2=jEe(e),kK=Q2.format,qEe=Q2.parse,RK=Q2.utcFormat,WEe=Q2.utcParse,Q2}function iyt(e){return new Date(e)}function syt(e){return e instanceof Date?+e:+new Date(+e)}function IK(e,t,n,r,i,s,o,a,u,l){var c=REe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),b=l("%a %d"),y=l("%b %d"),x=l("%B"),w=l("%Y");function S(C){return(u(C)<C?h:a(C)<C?p:o(C)<C?m:s(C)<C?g:r(C)<C?i(C)<C?b:y:n(C)<C?x:w)(C)}return c.invert=function(C){return new Date(f(C))},c.domain=function(C){return arguments.length?d(Array.from(C,syt)):d().map(iyt)},c.ticks=function(C){var R=d();return e(R[0],R[R.length-1],C??10)},c.tickFormat=function(C,R){return R==null?S:l(R)},c.nice=function(C){var R=d();return(!C||typeof C.range!="function")&&(C=t(R[0],R[R.length-1],C??10)),C?d(NEe(R,C)):c},c.copy=function(){return zR(c,IK(e,t,n,r,i,s,o,a,u,l))},c}function oyt(){return Tg.apply(IK(ngt,rgt,cg,w4,WT,t1,vM,gM,Hy,kK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ayt(){return Tg.apply(IK(egt,tgt,fg,E4,GT,eb,bM,yM,Hy,RK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xM(){var e=0,t=1,n,r,i,s,o=Zf,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Jb),l.rangeRound=c(FR),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function ex(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function PK(){var e=Vw(xM()(Zf));return e.copy=function(){return ex(e,PK())},Zb.apply(e,arguments)}function GEe(){var e=EK(xM()).domain([1,10]);return e.copy=function(){return ex(e,GEe()).base(e.base())},Zb.apply(e,arguments)}function YEe(){var e=SK(xM());return e.copy=function(){return ex(e,YEe()).constant(e.constant())},Zb.apply(e,arguments)}function NK(){var e=TK(xM());return e.copy=function(){return ex(e,NK()).exponent(e.exponent())},Zb.apply(e,arguments)}function uyt(){return NK.apply(null,arguments).exponent(.5)}function _M(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Zf,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var b,y,x;return arguments.length?([b,y,x]=g,l=iK(m,[b,y,x]),h):[l(0),l(.5),l(1)]}}return h.range=p(Jb),h.rangeRound=p(FR),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function KEe(){var e=Vw(_M()(Zf));return e.copy=function(){return ex(e,KEe())},Zb.apply(e,arguments)}function XEe(){var e=EK(_M()).domain([.1,1,10]);return e.copy=function(){return ex(e,XEe()).base(e.base())},Zb.apply(e,arguments)}function QEe(){var e=SK(_M());return e.copy=function(){return ex(e,QEe()).constant(e.constant())},Zb.apply(e,arguments)}function DK(){var e=TK(_M());return e.copy=function(){return ex(e,DK()).exponent(e.exponent())},Zb.apply(e,arguments)}function lyt(){return DK.apply(null,arguments).exponent(.5)}function Cg(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const cyt=Cg("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),fyt=Cg("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),dyt=Cg("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),hyt=Cg("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),pyt=Cg("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),myt=Cg("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),gyt=Cg("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),yyt=Cg("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),vyt=Cg("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),byt=Cg("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Xi(e){return function(){return e}}const Iue=Math.abs,Yl=Math.atan2,jx=Math.cos,xyt=Math.max,Z$=Math.min,vm=Math.sin,A_=Math.sqrt,Kl=1e-12,OS=Math.PI,wD=OS/2,JEe=2*OS;function _yt(e){return e>1?0:e<-1?OS:Math.acos(e)}function Pue(e){return e>=1?wD:e<=-1?-wD:Math.asin(e)}function wM(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new uK(t)}function wyt(e){return e.innerRadius}function Eyt(e){return e.outerRadius}function Syt(e){return e.startAngle}function Tyt(e){return e.endAngle}function Cyt(e){return e&&e.padAngle}function Ayt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Kl))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function Y6(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/A_(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,b=(h+m)/2,y=p-d,x=m-h,w=y*y+x*x,S=i-s,C=d*m-p*h,R=(x<0?-1:1)*A_(xyt(0,S*S*w-C*C)),I=(C*x-y*R)/w,O=(-C*y-x*R)/w,M=(C*x+y*R)/w,L=(-C*y+x*R)/w,H=I-g,D=O-b,B=M-g,z=L-b;return H*H+D*D>B*B+z*z&&(I=M,O=L),{cx:I,cy:O,x01:-c,y01:-f,x11:I*(i/S-1),y11:O*(i/S-1)}}function kyt(){var e=wyt,t=Eyt,n=Xi(0),r=null,i=Syt,s=Tyt,o=Cyt,a=null,u=wM(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-wD,m=s.apply(this,arguments)-wD,g=Iue(m-p),b=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Kl))a.moveTo(0,0);else if(g>JEe-Kl)a.moveTo(h*jx(p),h*vm(p)),a.arc(0,0,h,p,m,!b),d>Kl&&(a.moveTo(d*jx(m),d*vm(m)),a.arc(0,0,d,m,p,b));else{var y=p,x=m,w=p,S=m,C=g,R=g,I=o.apply(this,arguments)/2,O=I>Kl&&(r?+r.apply(this,arguments):A_(d*d+h*h)),M=Z$(Iue(h-d)/2,+n.apply(this,arguments)),L=M,H=M,D,B;if(O>Kl){var z=Pue(O/d*vm(I)),G=Pue(O/h*vm(I));(C-=z*2)>Kl?(z*=b?1:-1,w+=z,S-=z):(C=0,w=S=(p+m)/2),(R-=G*2)>Kl?(G*=b?1:-1,y+=G,x-=G):(R=0,y=x=(p+m)/2)}var Z=h*jx(y),ne=h*vm(y),ue=d*jx(S),X=d*vm(S);if(M>Kl){var q=h*jx(x),te=h*vm(x),W=d*jx(w),ee=d*vm(w),oe;if(g<OS)if(oe=Ayt(Z,ne,W,ee,q,te,ue,X)){var pe=Z-oe[0],ce=ne-oe[1],he=q-oe[0],Ee=te-oe[1],Ae=1/vm(_yt((pe*he+ce*Ee)/(A_(pe*pe+ce*ce)*A_(he*he+Ee*Ee)))/2),ge=A_(oe[0]*oe[0]+oe[1]*oe[1]);L=Z$(M,(d-ge)/(Ae-1)),H=Z$(M,(h-ge)/(Ae+1))}else L=H=0}R>Kl?H>Kl?(D=Y6(W,ee,Z,ne,h,H,b),B=Y6(q,te,ue,X,h,H,b),a.moveTo(D.cx+D.x01,D.cy+D.y01),H<M?a.arc(D.cx,D.cy,H,Yl(D.y01,D.x01),Yl(B.y01,B.x01),!b):(a.arc(D.cx,D.cy,H,Yl(D.y01,D.x01),Yl(D.y11,D.x11),!b),a.arc(0,0,h,Yl(D.cy+D.y11,D.cx+D.x11),Yl(B.cy+B.y11,B.cx+B.x11),!b),a.arc(B.cx,B.cy,H,Yl(B.y11,B.x11),Yl(B.y01,B.x01),!b))):(a.moveTo(Z,ne),a.arc(0,0,h,y,x,!b)):a.moveTo(Z,ne),!(d>Kl)||!(C>Kl)?a.lineTo(ue,X):L>Kl?(D=Y6(ue,X,q,te,d,-L,b),B=Y6(Z,ne,W,ee,d,-L,b),a.lineTo(D.cx+D.x01,D.cy+D.y01),L<M?a.arc(D.cx,D.cy,L,Yl(D.y01,D.x01),Yl(B.y01,B.x01),!b):(a.arc(D.cx,D.cy,L,Yl(D.y01,D.x01),Yl(D.y11,D.x11),!b),a.arc(0,0,d,Yl(D.cy+D.y11,D.cx+D.x11),Yl(B.cy+B.y11,B.cx+B.x11),b),a.arc(B.cx,B.cy,L,Yl(B.y11,B.x11),Yl(B.y01,B.x01),!b))):a.arc(0,0,d,S,w,b)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-OS/2;return[jx(f)*c,vm(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Xi(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Xi(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Xi(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Xi(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Xi(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Xi(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Xi(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function ZEe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function eSe(e){this._context=e}eSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function OK(e){return new eSe(e)}function tSe(e){return e[0]}function nSe(e){return e[1]}function rSe(e,t){var n=Xi(!0),r=null,i=OK,s=null,o=wM(a);e=typeof e=="function"?e:e===void 0?tSe:Xi(e),t=typeof t=="function"?t:t===void 0?nSe:Xi(t);function a(u){var l,c=(u=ZEe(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Xi(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Xi(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Xi(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function iSe(e,t,n){var r=null,i=Xi(!0),s=null,o=OK,a=null,u=wM(l);e=typeof e=="function"?e:e===void 0?tSe:Xi(+e),t=typeof t=="function"?t:Xi(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?nSe:Xi(+n);function l(f){var d,h,p,m=(f=ZEe(f)).length,g,b=!1,y,x=new Array(m),w=new Array(m);for(s==null&&(a=o(y=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===b)if(b=!b)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(x[p],w[p]);a.lineEnd(),a.areaEnd()}b&&(x[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):x[d],n?+n(g,d,f):w[d]))}if(y)return a=null,y+""||null}function c(){return rSe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Xi(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Xi(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Xi(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Xi(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Xi(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Xi(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Xi(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}const Ryt={draw(e,t){const n=A_(t/OS);e.moveTo(n,0),e.arc(0,0,n,0,JEe)}};function Iyt(e,t){let n=null,r=wM(i);e=typeof e=="function"?e:Xi(e||Ryt),t=typeof t=="function"?t:Xi(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Xi(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Xi(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function _b(){}function ED(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function EM(e){this._context=e}EM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ED(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ED(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Pyt(e){return new EM(e)}function sSe(e){this._context=e}sSe.prototype={areaStart:_b,areaEnd:_b,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ED(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Nyt(e){return new sSe(e)}function oSe(e){this._context=e}oSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ED(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Dyt(e){return new oSe(e)}function aSe(e,t){this._basis=new EM(e),this._beta=t}aSe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Oyt=function e(t){function n(r){return t===1?new EM(r):new aSe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function SD(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function MK(e,t){this._context=e,this._k=(1-t)/6}MK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:SD(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:SD(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Myt=function e(t){function n(r){return new MK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function LK(e,t){this._context=e,this._k=(1-t)/6}LK.prototype={areaStart:_b,areaEnd:_b,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:SD(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Lyt=function e(t){function n(r){return new LK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function FK(e,t){this._context=e,this._k=(1-t)/6}FK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:SD(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Fyt=function e(t){function n(r){return new FK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function $K(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Kl){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Kl){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function uSe(e,t){this._context=e,this._alpha=t}uSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:$K(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $yt=function e(t){function n(r){return t?new uSe(r,t):new MK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function lSe(e,t){this._context=e,this._alpha=t}lSe.prototype={areaStart:_b,areaEnd:_b,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:$K(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Byt=function e(t){function n(r){return t?new lSe(r,t):new LK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function cSe(e,t){this._context=e,this._alpha=t}cSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:$K(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const jyt=function e(t){function n(r){return t?new cSe(r,t):new FK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function fSe(e){this._context=e}fSe.prototype={areaStart:_b,areaEnd:_b,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Uyt(e){return new fSe(e)}function Nue(e){return e<0?-1:1}function Due(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Nue(s)+Nue(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Oue(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function eB(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function TD(e){this._context=e}TD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:eB(this,this._t0,Oue(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,eB(this,Oue(this,n=Due(this,e,t)),n);break;default:eB(this,this._t0,n=Due(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function dSe(e){this._context=new hSe(e)}(dSe.prototype=Object.create(TD.prototype)).point=function(e,t){TD.prototype.point.call(this,t,e)};function hSe(e){this._context=e}hSe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function zyt(e){return new TD(e)}function Vyt(e){return new dSe(e)}function pSe(e){this._context=e}pSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Mue(e),i=Mue(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Mue(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Hyt(e){return new pSe(e)}function SM(e,t){this._context=e,this._t=t}SM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function qyt(e){return new SM(e,.5)}function Wyt(e){return new SM(e,0)}function Gyt(e){return new SM(e,1)}function B3(e,t,n){this.k=e,this.x=t,this.y=n}B3.prototype={constructor:B3,scale:function(e){return e===1?this:new B3(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new B3(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};B3.prototype;var j3={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Yyt=j3.exports,Lue;function Kyt(){return Lue||(Lue=1,function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,p=1,m=2,g=1,b=2,y=4,x=8,w=16,S=32,C=64,R=128,I=256,O=512,M=30,L="...",H=800,D=16,B=1,z=2,G=3,Z=1/0,ne=9007199254740991,ue=17976931348623157e292,X=NaN,q=4294967295,te=q-1,W=q>>>1,ee=[["ary",R],["bind",g],["bindKey",b],["curry",x],["curryRight",w],["flip",O],["partial",S],["partialRight",C],["rearg",I]],oe="[object Arguments]",pe="[object Array]",ce="[object AsyncFunction]",he="[object Boolean]",Ee="[object Date]",Ae="[object DOMException]",ge="[object Error]",me="[object Function]",Oe="[object GeneratorFunction]",Me="[object Map]",Ye="[object Number]",lt="[object Null]",We="[object Object]",nt="[object Promise]",yt="[object Proxy]",_t="[object RegExp]",It="[object Set]",Et="[object String]",Ke="[object Symbol]",Lt="[object Undefined]",sn="[object WeakMap]",Fe="[object WeakSet]",Qe="[object ArrayBuffer]",wt="[object DataView]",Vt="[object Float32Array]",Wt="[object Float64Array]",bn="[object Int8Array]",Dn="[object Int16Array]",Zn="[object Int32Array]",wr="[object Uint8Array]",Hn="[object Uint8ClampedArray]",nr="[object Uint16Array]",Ei="[object Uint32Array]",Dr=/\b__p \+= '';/g,Co=/\b(__p \+=) '' \+/g,Ji=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Di=/&(?:amp|lt|gt|quot|#39);/g,Zi=/[&<>"']/g,ei=RegExp(Di.source),mo=RegExp(Zi.source),Gu=/<%-([\s\S]+?)%>/g,Ea=/<%([\s\S]+?)%>/g,Sa=/<%=([\s\S]+?)%>/g,Kr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oi=/^\w*$/,si=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zs=/[\\^$.*+?()[\]{}|]/g,Xr=RegExp(Zs.source),Hi=/^\s+/,eo=/\s/,go=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Qo=/\{\n\/\* \[wrapped with (.+)\] \*/,Ta=/,? & /,pd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Hr=/[()=,{}\[\]\/\s]/,Pl=/\\(\\)?/g,bs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ya=/\w*$/,Jo=/^[-+]0x[0-9a-f]+$/i,yh=/^0b[01]+$/i,md=/^\[object .+?Constructor\]$/,mf=/^0o[0-7]+$/i,gf=/^(?:0|[1-9]\d*)$/,xc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_c=/($^)/,wc=/['\n\r\u2028\u2029\\]/g,Er="\\ud800-\\udfff",Ec="\\u0300-\\u036f",xs="\\ufe20-\\ufe2f",Ka="\\u20d0-\\u20ff",As=Ec+xs+Ka,Nl="\\u2700-\\u27bf",Sc="a-z\\xdf-\\xf6\\xf8-\\xff",Zo="\\xac\\xb1\\xd7\\xf7",qi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ti="\\u2000-\\u206f",rr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ve="A-Z\\xc0-\\xd6\\xd8-\\xde",Ie="\\ufe0e\\ufe0f",Se=Zo+qi+ti+rr,Be="[']",ze="["+Er+"]",De="["+Se+"]",ht="["+As+"]",kt="\\d+",Nt="["+Nl+"]",Rt="["+Sc+"]",jt="[^"+Er+Se+kt+Nl+Sc+ve+"]",Zt="\\ud83c[\\udffb-\\udfff]",qn="(?:"+ht+"|"+Zt+")",Sn="[^"+Er+"]",lr="(?:\\ud83c[\\udde6-\\uddff]){2}",_n="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+ve+"]",ls="\\u200d",Ao="(?:"+Rt+"|"+jt+")",Dl="(?:"+br+"|"+jt+")",gd="(?:"+Be+"(?:d|ll|m|re|s|t|ve))?",Yu="(?:"+Be+"(?:D|LL|M|RE|S|T|VE))?",yf=qn+"?",to="["+Ie+"]?",Mi="(?:"+ls+"(?:"+[Sn,lr,_n].join("|")+")"+to+yf+")*",ko="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ea="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",cr=to+yf+Mi,Ca="(?:"+[Nt,lr,_n].join("|")+")"+cr,Aa="(?:"+[Sn+ht+"?",ht,lr,_n,ze].join("|")+")",vp=RegExp(Be,"g"),Ol=RegExp(ht,"g"),ks=RegExp(Zt+"(?="+Zt+")|"+Aa+cr,"g"),Rs=RegExp([br+"?"+Rt+"+"+gd+"(?="+[De,br,"$"].join("|")+")",Dl+"+"+Yu+"(?="+[De,br+Ao,"$"].join("|")+")",br+"?"+Ao+"+"+gd,br+"+"+Yu,ea,ko,kt,Ca].join("|"),"g"),yd=RegExp("["+ls+Er+As+Ie+"]"),Tc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ml=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],X0=-1,xr={};xr[Vt]=xr[Wt]=xr[bn]=xr[Dn]=xr[Zn]=xr[wr]=xr[Hn]=xr[nr]=xr[Ei]=!0,xr[oe]=xr[pe]=xr[Qe]=xr[he]=xr[wt]=xr[Ee]=xr[ge]=xr[me]=xr[Me]=xr[Ye]=xr[We]=xr[_t]=xr[It]=xr[Et]=xr[sn]=!1;var Gn={};Gn[oe]=Gn[pe]=Gn[Qe]=Gn[wt]=Gn[he]=Gn[Ee]=Gn[Vt]=Gn[Wt]=Gn[bn]=Gn[Dn]=Gn[Zn]=Gn[Me]=Gn[Ye]=Gn[We]=Gn[_t]=Gn[It]=Gn[Et]=Gn[Ke]=Gn[wr]=Gn[Hn]=Gn[nr]=Gn[Ei]=!0,Gn[ge]=Gn[me]=Gn[sn]=!1;var Cc={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Ce={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ne={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},rt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},hn=parseFloat,ir=parseInt,Or=typeof ya=="object"&&ya&&ya.Object===Object&&ya,gi=typeof self=="object"&&self&&self.Object===Object&&self,dn=Or||gi||Function("return this")(),Tr=t&&!t.nodeType&&t,Ir=Tr&&!0&&e&&!e.nodeType&&e,_s=Ir&&Ir.exports===Tr,ta=_s&&Or.process,Mr=function(){try{var Ve=Ir&&Ir.require&&Ir.require("util").types;return Ve||ta&&ta.binding&&ta.binding("util")}catch{}}(),js=Mr&&Mr.isArrayBuffer,Li=Mr&&Mr.isDate,no=Mr&&Mr.isMap,Xa=Mr&&Mr.isRegExp,na=Mr&&Mr.isSet,$g=Mr&&Mr.isTypedArray;function ro(Ve,mt,et){switch(et.length){case 0:return Ve.call(mt);case 1:return Ve.call(mt,et[0]);case 2:return Ve.call(mt,et[0],et[1]);case 3:return Ve.call(mt,et[0],et[1],et[2])}return Ve.apply(mt,et)}function Ac(Ve,mt,et,on){for(var Bn=-1,On=Ve==null?0:Ve.length;++Bn<On;){var Cr=Ve[Bn];mt(on,Cr,et(Cr),Ve)}return on}function oi(Ve,mt){for(var et=-1,on=Ve==null?0:Ve.length;++et<on&&mt(Ve[et],et,Ve)!==!1;);return Ve}function Ro(Ve,mt){for(var et=Ve==null?0:Ve.length;et--&&mt(Ve[et],et,Ve)!==!1;);return Ve}function yi(Ve,mt){for(var et=-1,on=Ve==null?0:Ve.length;++et<on;)if(!mt(Ve[et],et,Ve))return!1;return!0}function ka(Ve,mt){for(var et=-1,on=Ve==null?0:Ve.length,Bn=0,On=[];++et<on;){var Cr=Ve[et];mt(Cr,et,Ve)&&(On[Bn++]=Cr)}return On}function ra(Ve,mt){var et=Ve==null?0:Ve.length;return!!et&&xd(Ve,mt,0)>-1}function vd(Ve,mt,et){for(var on=-1,Bn=Ve==null?0:Ve.length;++on<Bn;)if(et(mt,Ve[on]))return!0;return!1}function vi(Ve,mt){for(var et=-1,on=Ve==null?0:Ve.length,Bn=Array(on);++et<on;)Bn[et]=mt(Ve[et],et,Ve);return Bn}function Ku(Ve,mt){for(var et=-1,on=mt.length,Bn=Ve.length;++et<on;)Ve[Bn+et]=mt[et];return Ve}function Xu(Ve,mt,et,on){var Bn=-1,On=Ve==null?0:Ve.length;for(on&&On&&(et=Ve[++Bn]);++Bn<On;)et=mt(et,Ve[Bn],Bn,Ve);return et}function Bg(Ve,mt,et,on){var Bn=Ve==null?0:Ve.length;for(on&&Bn&&(et=Ve[--Bn]);Bn--;)et=mt(et,Ve[Bn],Bn,Ve);return et}function bd(Ve,mt){for(var et=-1,on=Ve==null?0:Ve.length;++et<on;)if(mt(Ve[et],et,Ve))return!0;return!1}var jg=le("length");function vf(Ve){return Ve.split("")}function vh(Ve){return Ve.match(pd)||[]}function Ra(Ve,mt,et){var on;return et(Ve,function(Bn,On,Cr){if(mt(Bn,On,Cr))return on=On,!1}),on}function bf(Ve,mt,et,on){for(var Bn=Ve.length,On=et+(on?1:-1);on?On--:++On<Bn;)if(mt(Ve[On],On,Ve))return On;return-1}function xd(Ve,mt,et){return mt===mt?xh(Ve,mt,et):bf(Ve,F,et)}function xu(Ve,mt,et,on){for(var Bn=et-1,On=Ve.length;++Bn<On;)if(on(Ve[Bn],mt))return Bn;return-1}function F(Ve){return Ve!==Ve}function re(Ve,mt){var et=Ve==null?0:Ve.length;return et?Xt(Ve,mt)/et:X}function le(Ve){return function(mt){return mt==null?n:mt[Ve]}}function be(Ve){return function(mt){return Ve==null?n:Ve[mt]}}function Xe(Ve,mt,et,on,Bn){return Bn(Ve,function(On,Cr,er){et=on?(on=!1,On):mt(et,On,Cr,er)}),et}function ut(Ve,mt){var et=Ve.length;for(Ve.sort(mt);et--;)Ve[et]=Ve[et].value;return Ve}function Xt(Ve,mt){for(var et,on=-1,Bn=Ve.length;++on<Bn;){var On=mt(Ve[on]);On!==n&&(et=et===n?On:et+On)}return et}function Lr(Ve,mt){for(var et=-1,on=Array(Ve);++et<Ve;)on[et]=mt(et);return on}function Us(Ve,mt){return vi(mt,function(et){return[et,Ve[et]]})}function Pr(Ve){return Ve&&Ve.slice(0,Zu(Ve)+1).replace(Hi,"")}function ai(Ve){return function(mt){return Ve(mt)}}function cs(Ve,mt){return vi(mt,function(et){return Ve[et]})}function Io(Ve,mt){return Ve.has(mt)}function yo(Ve,mt){for(var et=-1,on=Ve.length;++et<on&&xd(mt,Ve[et],0)>-1;);return et}function vo(Ve,mt){for(var et=Ve.length;et--&&xd(mt,Ve[et],0)>-1;);return et}function Ll(Ve,mt){for(var et=Ve.length,on=0;et--;)Ve[et]===mt&&++on;return on}var V1=be(Cc),px=be(Ce);function kc(Ve){return"\\"+rt[Ve]}function Qu(Ve,mt){return Ve==null?n:Ve[mt]}function bh(Ve){return yd.test(Ve)}function a2(Ve){return Tc.test(Ve)}function _d(Ve){for(var mt,et=[];!(mt=Ve.next()).done;)et.push(mt.value);return et}function Rc(Ve){var mt=-1,et=Array(Ve.size);return Ve.forEach(function(on,Bn){et[++mt]=[Bn,on]}),et}function Q0(Ve,mt){return function(et){return Ve(mt(et))}}function Ju(Ve,mt){for(var et=-1,on=Ve.length,Bn=0,On=[];++et<on;){var Cr=Ve[et];(Cr===mt||Cr===c)&&(Ve[et]=c,On[Bn++]=et)}return On}function Ic(Ve){var mt=-1,et=Array(Ve.size);return Ve.forEach(function(on){et[++mt]=on}),et}function u2(Ve){var mt=-1,et=Array(Ve.size);return Ve.forEach(function(on){et[++mt]=[on,on]}),et}function xh(Ve,mt,et){for(var on=et-1,Bn=Ve.length;++on<Bn;)if(Ve[on]===mt)return on;return-1}function Fl(Ve,mt,et){for(var on=et+1;on--;)if(Ve[on]===mt)return on;return on}function Pc(Ve){return bh(Ve)?bp(Ve):jg(Ve)}function Po(Ve){return bh(Ve)?mx(Ve):vf(Ve)}function Zu(Ve){for(var mt=Ve.length;mt--&&eo.test(Ve.charAt(mt)););return mt}var H1=be(Ne);function bp(Ve){for(var mt=ks.lastIndex=0;ks.test(Ve);)++mt;return mt}function mx(Ve){return Ve.match(ks)||[]}function gx(Ve){return Ve.match(Rs)||[]}var ws=function Ve(mt){mt=mt==null?dn:wd.defaults(dn.Object(),mt,wd.pick(dn,Ml));var et=mt.Array,on=mt.Date,Bn=mt.Error,On=mt.Function,Cr=mt.Math,er=mt.Object,_h=mt.RegExp,Ug=mt.String,Ia=mt.TypeError,Ed=et.prototype,No=On.prototype,$l=er.prototype,wh=mt["__core-js_shared__"],xp=No.toString,mr=$l.hasOwnProperty,ia=0,Eh=function(){var E=/[^.]+$/.exec(wh&&wh.keys&&wh.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""}(),_p=$l.toString,J0=xp.call(er),yx=dn._,vx=_h("^"+xp.call(mr).replace(Zs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Z0=_s?mt.Buffer:n,xf=mt.Symbol,em=mt.Uint8Array,q1=Z0?Z0.allocUnsafe:n,Bl=Q0(er.getPrototypeOf,er),zg=er.create,Sh=$l.propertyIsEnumerable,Vg=Ed.splice,Hg=xf?xf.isConcatSpreadable:n,jl=xf?xf.iterator:n,Th=xf?xf.toStringTag:n,wp=function(){try{var E=rs(er,"defineProperty");return E({},"",{}),E}catch{}}(),bx=mt.clearTimeout!==dn.clearTimeout&&mt.clearTimeout,Wi=on&&on.now!==dn.Date.now&&on.now,W1=mt.setTimeout!==dn.setTimeout&&mt.setTimeout,Ch=Cr.ceil,_f=Cr.floor,qg=er.getOwnPropertySymbols,G1=Z0?Z0.isBuffer:n,Ep=mt.isFinite,Y1=Ed.join,Sp=Q0(er.keys,er),io=Cr.max,Pa=Cr.min,l2=on.now,xx=mt.parseInt,tm=Cr.random,Tp=Ed.reverse,Wg=rs(mt,"DataView"),Cp=rs(mt,"Map"),Gg=rs(mt,"Promise"),Do=rs(mt,"Set"),Ap=rs(mt,"WeakMap"),Sd=rs(er,"create"),Yg=Ap&&new Ap,kp={},K1=fm(Wg),wf=fm(Cp),Rp=fm(Gg),Ah=fm(Do),Ul=fm(Ap),kh=xf?xf.prototype:n,_u=kh?kh.valueOf:n,Kg=kh?kh.toString:n;function ye(E){if(jo(E)&&!Sr(E)&&!(E instanceof Mn)){if(E instanceof Na)return E;if(mr.call(E,"__wrapped__"))return BI(E)}return new Na(E)}var Ip=function(){function E(){}return function(P){if(!xo(P))return{};if(zg)return zg(P);E.prototype=P;var V=new E;return E.prototype=n,V}}();function Nc(){}function Na(E,P){this.__wrapped__=E,this.__actions__=[],this.__chain__=!!P,this.__index__=0,this.__values__=n}ye.templateSettings={escape:Gu,evaluate:Ea,interpolate:Sa,variable:"",imports:{_:ye}},ye.prototype=Nc.prototype,ye.prototype.constructor=ye,Na.prototype=Ip(Nc.prototype),Na.prototype.constructor=Na;function Mn(E){this.__wrapped__=E,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=q,this.__views__=[]}function Oo(){var E=new Mn(this.__wrapped__);return E.__actions__=iu(this.__actions__),E.__dir__=this.__dir__,E.__filtered__=this.__filtered__,E.__iteratees__=iu(this.__iteratees__),E.__takeCount__=this.__takeCount__,E.__views__=iu(this.__views__),E}function X1(){if(this.__filtered__){var E=new Mn(this);E.__dir__=-1,E.__filtered__=!0}else E=this.clone(),E.__dir__*=-1;return E}function Pp(){var E=this.__wrapped__.value(),P=this.__dir__,V=Sr(E),se=P<0,fe=V?E.length:0,_e=bC(0,fe,this.__views__),Re=_e.start,$e=_e.end,Ge=$e-Re,St=se?$e:Re-1,Ct=this.__iteratees__,Mt=Ct.length,fn=0,Pn=Pa(Ge,this.__takeCount__);if(!V||!se&&fe==Ge&&Pn==Ge)return Up(E,this.__actions__);var Qn=[];e:for(;Ge--&&fn<Pn;){St+=P;for(var $r=-1,Jn=E[St];++$r<Mt;){var Qr=Ct[$r],li=Qr.iteratee,Ld=Qr.type,zc=li(Jn);if(Ld==z)Jn=zc;else if(!zc){if(Ld==B)continue e;break e}}Qn[fn++]=Jn}return Qn}Mn.prototype=Ip(Nc.prototype),Mn.prototype.constructor=Mn;function Qa(E){var P=-1,V=E==null?0:E.length;for(this.clear();++P<V;){var se=E[P];this.set(se[0],se[1])}}function Gi(){this.__data__=Sd?Sd(null):{},this.size=0}function Fi(E){var P=this.has(E)&&delete this.__data__[E];return this.size-=P?1:0,P}function Ef(E){var P=this.__data__;if(Sd){var V=P[E];return V===u?n:V}return mr.call(P,E)?P[E]:n}function sa(E){var P=this.__data__;return Sd?P[E]!==n:mr.call(P,E)}function Da(E,P){var V=this.__data__;return this.size+=this.has(E)?0:1,V[E]=Sd&&P===n?u:P,this}Qa.prototype.clear=Gi,Qa.prototype.delete=Fi,Qa.prototype.get=Ef,Qa.prototype.has=sa,Qa.prototype.set=Da;function Oa(E){var P=-1,V=E==null?0:E.length;for(this.clear();++P<V;){var se=E[P];this.set(se[0],se[1])}}function Np(){this.__data__=[],this.size=0}function Ma(E){var P=this.__data__,V=La(P,E);if(V<0)return!1;var se=P.length-1;return V==se?P.pop():Vg.call(P,V,1),--this.size,!0}function nm(E){var P=this.__data__,V=La(P,E);return V<0?n:P[V][1]}function _x(E){return La(this.__data__,E)>-1}function Q1(E,P){var V=this.__data__,se=La(V,E);return se<0?(++this.size,V.push([E,P])):V[se][1]=P,this}Oa.prototype.clear=Np,Oa.prototype.delete=Ma,Oa.prototype.get=nm,Oa.prototype.has=_x,Oa.prototype.set=Q1;function Ja(E){var P=-1,V=E==null?0:E.length;for(this.clear();++P<V;){var se=E[P];this.set(se[0],se[1])}}function c2(){this.size=0,this.__data__={hash:new Qa,map:new(Cp||Oa),string:new Qa}}function Sf(E){var P=Kn(this,E).delete(E);return this.size-=P?1:0,P}function rm(E){return Kn(this,E).get(E)}function J1(E){return Kn(this,E).has(E)}function Xg(E,P){var V=Kn(this,E),se=V.size;return V.set(E,P),this.size+=V.size==se?0:1,this}Ja.prototype.clear=c2,Ja.prototype.delete=Sf,Ja.prototype.get=rm,Ja.prototype.has=J1,Ja.prototype.set=Xg;function Za(E){var P=-1,V=E==null?0:E.length;for(this.__data__=new Ja;++P<V;)this.add(E[P])}function Rh(E){return this.__data__.set(E,u),this}function eu(E){return this.__data__.has(E)}Za.prototype.add=Za.prototype.push=Rh,Za.prototype.has=eu;function oa(E){var P=this.__data__=new Oa(E);this.size=P.size}function Ih(){this.__data__=new Oa,this.size=0}function Ph(E){var P=this.__data__,V=P.delete(E);return this.size=P.size,V}function tu(E){return this.__data__.get(E)}function nu(E){return this.__data__.has(E)}function Nh(E,P){var V=this.__data__;if(V instanceof Oa){var se=V.__data__;if(!Cp||se.length<i-1)return se.push([E,P]),this.size=++V.size,this;V=this.__data__=new Ja(se)}return V.set(E,P),this.size=V.size,this}oa.prototype.clear=Ih,oa.prototype.delete=Ph,oa.prototype.get=tu,oa.prototype.has=nu,oa.prototype.set=Nh;function wu(E,P){var V=Sr(E),se=!V&&Bx(E),fe=!V&&!se&&dv(E),_e=!V&&!se&&!fe&&F2(E),Re=V||se||fe||_e,$e=Re?Lr(E.length,Ug):[],Ge=$e.length;for(var St in E)(P||mr.call(E,St))&&!(Re&&(St=="length"||fe&&(St=="offset"||St=="parent")||_e&&(St=="buffer"||St=="byteLength"||St=="byteOffset")||Os(St,Ge)))&&$e.push(St);return $e}function es(E){var P=E.length;return P?E[rl(0,P-1)]:n}function Dp(E,P){return v2(iu(E),tl(P,0,E.length))}function f2(E){return v2(iu(E))}function Dh(E,P,V){(V!==n&&!Yp(E[P],V)||V===n&&!(P in E))&&Dc(E,P,V)}function Is(E,P,V){var se=E[P];(!(mr.call(E,P)&&Yp(se,V))||V===n&&!(P in E))&&Dc(E,P,V)}function La(E,P){for(var V=E.length;V--;)if(Yp(E[V][0],P))return V;return-1}function nn(E,P,V,se){return zl(E,function(fe,_e,Re){P(se,fe,V(fe),Re)}),se}function bi(E,P){return E&&Ds(P,Au(P),E)}function el(E,P){return E&&Ds(P,Lf(P),E)}function Dc(E,P,V){P=="__proto__"&&wp?wp(E,P,{configurable:!0,enumerable:!0,value:V,writable:!0}):E[P]=V}function Z1(E,P){for(var V=-1,se=P.length,fe=et(se),_e=E==null;++V<se;)fe[V]=_e?n:z7(E,P[V]);return fe}function tl(E,P,V){return E===E&&(V!==n&&(E=E<=V?E:V),P!==n&&(E=E>=P?E:P)),E}function aa(E,P,V,se,fe,_e){var Re,$e=P&f,Ge=P&d,St=P&h;if(V&&(Re=fe?V(E,se,fe,_e):V(E)),Re!==n)return Re;if(!xo(E))return E;var Ct=Sr(E);if(Ct){if(Re=Rx(E),!$e)return iu(E,Re)}else{var Mt=ou(E),fn=Mt==me||Mt==Oe;if(dv(E))return Sx(E,$e);if(Mt==We||Mt==oe||fn&&!fe){if(Re=Ge||fn?{}:au(E),!$e)return Ge?vC(E,el(Re,E)):lm(E,bi(Re,E))}else{if(!Gn[Mt])return fe?E:{};Re=E7(E,Mt,$e)}}_e||(_e=new oa);var Pn=_e.get(E);if(Pn)return Pn;_e.set(E,Re),ote(E)?E.forEach(function(Jn){Re.add(aa(Jn,P,V,Jn,E,_e))}):ite(E)&&E.forEach(function(Jn,Qr){Re.set(Qr,aa(Jn,P,V,Qr,E,_e))});var Qn=St?Ge?qe:it:Ge?Lf:Au,$r=Ct?n:Qn(E);return oi($r||E,function(Jn,Qr){$r&&(Qr=Jn,Jn=E[Qr]),Is(Re,Qr,aa(Jn,P,V,Qr,E,_e))}),Re}function ev(E){var P=Au(E);return function(V){return im(V,E,P)}}function im(E,P,V){var se=V.length;if(E==null)return!se;for(E=er(E);se--;){var fe=V[se],_e=P[fe],Re=E[fe];if(Re===n&&!(fe in E)||!_e(Re))return!1}return!0}function tv(E,P,V){if(typeof E!="function")throw new Ia(o);return lv(function(){E.apply(n,V)},P)}function Oc(E,P,V,se){var fe=-1,_e=ra,Re=!0,$e=E.length,Ge=[],St=P.length;if(!$e)return Ge;V&&(P=vi(P,ai(V))),se?(_e=vd,Re=!1):P.length>=i&&(_e=Io,Re=!1,P=new Za(P));e:for(;++fe<$e;){var Ct=E[fe],Mt=V==null?Ct:V(Ct);if(Ct=se||Ct!==0?Ct:0,Re&&Mt===Mt){for(var fn=St;fn--;)if(P[fn]===Mt)continue e;Ge.push(Ct)}else _e(P,Mt,se)||Ge.push(Ct)}return Ge}var zl=Lo(Ps),nv=Lo(Oh,!0);function zs(E,P){var V=!0;return zl(E,function(se,fe,_e){return V=!!P(se,fe,_e),V}),V}function ua(E,P,V){for(var se=-1,fe=E.length;++se<fe;){var _e=E[se],Re=P(_e);if(Re!=null&&($e===n?Re===Re&&!Md(Re):V(Re,$e)))var $e=Re,Ge=_e}return Ge}function Mc(E,P,V,se){var fe=E.length;for(V=Nr(V),V<0&&(V=-V>fe?0:fe+V),se=se===n||se>fe?fe:Nr(se),se<0&&(se+=fe),se=V>se?0:ute(se);V<se;)E[V++]=P;return E}function Qg(E,P){var V=[];return zl(E,function(se,fe,_e){P(se,fe,_e)&&V.push(se)}),V}function Es(E,P,V,se,fe){var _e=-1,Re=E.length;for(V||(V=m2),fe||(fe=[]);++_e<Re;){var $e=E[_e];P>0&&V($e)?P>1?Es($e,P-1,V,se,fe):Ku(fe,$e):se||(fe[fe.length]=$e)}return fe}var Eu=Vp(),sm=Vp(!0);function Ps(E,P){return E&&Eu(E,P,Au)}function Oh(E,P){return E&&sm(E,P,Au)}function Op(E,P){return ka(P,function(V){return py(E[V])})}function Tf(E,P){P=Pf(P,E);for(var V=0,se=P.length;E!=null&&V<se;)E=E[Nd(P[V++])];return V&&V==se?E:n}function Jg(E,P,V){var se=P(E);return Sr(E)?se:Ku(se,V(E))}function Mo(E){return E==null?E===n?Lt:lt:Th&&Th in er(E)?Br(E):_C(E)}function Lc(E,P){return E>P}function ru(E,P){return E!=null&&mr.call(E,P)}function Cf(E,P){return E!=null&&P in er(E)}function om(E,P,V){return E>=Pa(P,V)&&E<io(P,V)}function Mp(E,P,V){for(var se=V?vd:ra,fe=E[0].length,_e=E.length,Re=_e,$e=et(_e),Ge=1/0,St=[];Re--;){var Ct=E[Re];Re&&P&&(Ct=vi(Ct,ai(P))),Ge=Pa(Ct.length,Ge),$e[Re]=!V&&(P||fe>=120&&Ct.length>=120)?new Za(Re&&Ct):n}Ct=E[0];var Mt=-1,fn=$e[0];e:for(;++Mt<fe&&St.length<Ge;){var Pn=Ct[Mt],Qn=P?P(Pn):Pn;if(Pn=V||Pn!==0?Pn:0,!(fn?Io(fn,Qn):se(St,Qn,V))){for(Re=_e;--Re;){var $r=$e[Re];if(!($r?Io($r,Qn):se(E[Re],Qn,V)))continue e}fn&&fn.push(Qn),St.push(Pn)}}return St}function nl(E,P,V,se){return Ps(E,function(fe,_e,Re){P(se,V(fe),_e,Re)}),se}function Su(E,P,V){P=Pf(P,E),E=Ba(E,P);var se=E==null?E:E[Nd(sl(P))];return se==null?n:ro(se,E,V)}function am(E){return jo(E)&&Mo(E)==oe}function rv(E){return jo(E)&&Mo(E)==Qe}function Af(E){return jo(E)&&Mo(E)==Ee}function Tu(E,P,V,se,fe){return E===P?!0:E==null||P==null||!jo(E)&&!jo(P)?E!==E&&P!==P:iv(E,P,V,se,Tu,fe)}function iv(E,P,V,se,fe,_e){var Re=Sr(E),$e=Sr(P),Ge=Re?pe:ou(E),St=$e?pe:ou(P);Ge=Ge==oe?We:Ge,St=St==oe?We:St;var Ct=Ge==We,Mt=St==We,fn=Ge==St;if(fn&&dv(E)){if(!dv(P))return!1;Re=!0,Ct=!1}if(fn&&!Ct)return _e||(_e=new oa),Re||F2(E)?Ui(E,P,V,se,fe,_e):Si(E,P,Ge,V,se,fe,_e);if(!(V&p)){var Pn=Ct&&mr.call(E,"__wrapped__"),Qn=Mt&&mr.call(P,"__wrapped__");if(Pn||Qn){var $r=Pn?E.value():E,Jn=Qn?P.value():P;return _e||(_e=new oa),fe($r,Jn,V,se,_e)}}return fn?(_e||(_e=new oa),su(E,P,V,se,fe,_e)):!1}function Zg(E){return jo(E)&&ou(E)==Me}function Mh(E,P,V,se){var fe=V.length,_e=fe,Re=!se;if(E==null)return!_e;for(E=er(E);fe--;){var $e=V[fe];if(Re&&$e[2]?$e[1]!==E[$e[0]]:!($e[0]in E))return!1}for(;++fe<_e;){$e=V[fe];var Ge=$e[0],St=E[Ge],Ct=$e[1];if(Re&&$e[2]){if(St===n&&!(Ge in E))return!1}else{var Mt=new oa;if(se)var fn=se(St,Ct,Ge,E,P,Mt);if(!(fn===n?Tu(Ct,St,p|m,se,Mt):fn))return!1}}return!0}function Ss(E){if(!xo(E)||OI(E))return!1;var P=py(E)?vx:md;return P.test(fm(E))}function fr(E){return jo(E)&&Mo(E)==_t}function $i(E){return jo(E)&&ou(E)==It}function fs(E){return jo(E)&&ZI(E.length)&&!!xr[Mo(E)]}function Ns(E){return typeof E=="function"?E:E==null?Ff:typeof E=="object"?Sr(E)?Bi(E[0],E[1]):kf(E):bte(E)}function Vs(E){if(!Wp(E))return Sp(E);var P=[];for(var V in er(E))mr.call(E,V)&&V!="constructor"&&P.push(V);return P}function Lh(E){if(!xo(E))return FI(E);var P=Wp(E),V=[];for(var se in E)se=="constructor"&&(P||!mr.call(E,se))||V.push(se);return V}function Yi(E,P){return E<P}function Lp(E,P){var V=-1,se=Mf(E)?et(E.length):[];return zl(E,function(fe,_e,Re){se[++V]=P(fe,_e,Re)}),se}function kf(E){var P=Fr(E);return P.length==1&&P[0][2]?g2(P[0][0],P[0][1]):function(V){return V===E||Mh(V,E,P)}}function Bi(E,P){return vn(E)&&Px(P)?g2(Nd(E),P):function(V){var se=z7(V,E);return se===n&&se===P?V7(V,E):Tu(P,se,p|m)}}function Td(E,P,V,se,fe){E!==P&&Eu(P,function(_e,Re){if(fe||(fe=new oa),xo(_e))Fp(E,P,Re,V,Td,se,fe);else{var $e=se?se(Bh(E,Re),_e,Re+"",E,P,fe):n;$e===n&&($e=_e),Dh(E,Re,$e)}},Lf)}function Fp(E,P,V,se,fe,_e,Re){var $e=Bh(E,V),Ge=Bh(P,V),St=Re.get(Ge);if(St){Dh(E,V,St);return}var Ct=_e?_e($e,Ge,V+"",E,P,Re):n,Mt=Ct===n;if(Mt){var fn=Sr(Ge),Pn=!fn&&dv(Ge),Qn=!fn&&!Pn&&F2(Ge);Ct=Ge,fn||Pn||Qn?Sr($e)?Ct=$e:da($e)?Ct=iu($e):Pn?(Mt=!1,Ct=Sx(Ge,!0)):Qn?(Mt=!1,Ct=Cx(Ge,!0)):Ct=[]:BC(Ge)||Bx(Ge)?(Ct=$e,Bx($e)?Ct=lte($e):(!xo($e)||py($e))&&(Ct=au(Ge))):Mt=!1}Mt&&(Re.set(Ge,Ct),fe(Ct,Ge,se,_e,Re),Re.delete(Ge)),Dh(E,V,Ct)}function la(E,P){var V=E.length;if(V)return P+=P<0?V:0,Os(P,V)?E[P]:n}function $p(E,P,V){P.length?P=vi(P,function(_e){return Sr(_e)?function(Re){return Tf(Re,_e.length===1?_e[0]:_e)}:_e}):P=[Ff];var se=-1;P=vi(P,ai(Gt()));var fe=Lp(E,function(_e,Re,$e){var Ge=vi(P,function(St){return St(_e)});return{criteria:Ge,index:++se,value:_e}});return ut(fe,function(_e,Re){return yC(_e,Re,V)})}function ey(E,P){return Fa(E,P,function(V,se){return V7(E,se)})}function Fa(E,P,V){for(var se=-1,fe=P.length,_e={};++se<fe;){var Re=P[se],$e=Tf(E,Re);V($e,Re)&&Rf(_e,Pf(Re,E),$e)}return _e}function Ti(E){return function(P){return Tf(P,E)}}function ds(E,P,V,se){var fe=se?xu:xd,_e=-1,Re=P.length,$e=E;for(E===P&&(P=iu(P)),V&&($e=vi(E,ai(V)));++_e<Re;)for(var Ge=0,St=P[_e],Ct=V?V(St):St;(Ge=fe($e,Ct,Ge,se))>-1;)$e!==E&&Vg.call($e,Ge,1),Vg.call(E,Ge,1);return E}function Hs(E,P){for(var V=E?P.length:0,se=V-1;V--;){var fe=P[V];if(V==se||fe!==_e){var _e=fe;Os(fe)?Vg.call(E,fe,1):ry(E,fe)}}return E}function rl(E,P){return E+_f(tm()*(P-E+1))}function Fh(E,P,V,se){for(var fe=-1,_e=io(Ch((P-E)/(V||1)),0),Re=et(_e);_e--;)Re[se?_e:++fe]=E,E+=V;return Re}function Cu(E,P){var V="";if(!E||P<1||P>ne)return V;do P%2&&(V+=E),P=_f(P/2),P&&(E+=E);while(P);return V}function dr(E,P){return jc(y2(E,P,Ff),E+"")}function so(E){return es($2(E))}function ty(E,P){var V=$2(E);return v2(V,tl(P,0,V.length))}function Rf(E,P,V,se){if(!xo(E))return E;P=Pf(P,E);for(var fe=-1,_e=P.length,Re=_e-1,$e=E;$e!=null&&++fe<_e;){var Ge=Nd(P[fe]),St=V;if(Ge==="__proto__"||Ge==="constructor"||Ge==="prototype")return E;if(fe!=Re){var Ct=$e[Ge];St=se?se(Ct,Ge,$e):n,St===n&&(St=xo(Ct)?Ct:Os(P[fe+1])?[]:{})}Is($e,Ge,St),$e=$e[Ge]}return E}var Bp=Yg?function(E,P){return Yg.set(E,P),E}:Ff,ts=wp?function(E,P){return wp(E,"toString",{configurable:!0,enumerable:!1,value:q7(P),writable:!0})}:Ff;function bo(E){return v2($2(E))}function ji(E,P,V){var se=-1,fe=E.length;P<0&&(P=-P>fe?0:fe+P),V=V>fe?fe:V,V<0&&(V+=fe),fe=P>V?0:V-P>>>0,P>>>=0;for(var _e=et(fe);++se<fe;)_e[se]=E[se+P];return _e}function $a(E,P){var V;return zl(E,function(se,fe,_e){return V=P(se,fe,_e),!V}),!!V}function jp(E,P,V){var se=0,fe=E==null?se:E.length;if(typeof P=="number"&&P===P&&fe<=W){for(;se<fe;){var _e=se+fe>>>1,Re=E[_e];Re!==null&&!Md(Re)&&(V?Re<=P:Re<P)?se=_e+1:fe=_e}return fe}return um(E,P,Ff,V)}function um(E,P,V,se){var fe=0,_e=E==null?0:E.length;if(_e===0)return 0;P=V(P);for(var Re=P!==P,$e=P===null,Ge=Md(P),St=P===n;fe<_e;){var Ct=_f((fe+_e)/2),Mt=V(E[Ct]),fn=Mt!==n,Pn=Mt===null,Qn=Mt===Mt,$r=Md(Mt);if(Re)var Jn=se||Qn;else St?Jn=Qn&&(se||fn):$e?Jn=Qn&&fn&&(se||!Pn):Ge?Jn=Qn&&fn&&!Pn&&(se||!$r):Pn||$r?Jn=!1:Jn=se?Mt<=P:Mt<P;Jn?fe=Ct+1:_e=Ct}return Pa(_e,te)}function ny(E,P){for(var V=-1,se=E.length,fe=0,_e=[];++V<se;){var Re=E[V],$e=P?P(Re):Re;if(!V||!Yp($e,Ge)){var Ge=$e;_e[fe++]=Re===0?0:Re}}return _e}function wx(E){return typeof E=="number"?E:Md(E)?X:+E}function qs(E){if(typeof E=="string")return E;if(Sr(E))return vi(E,qs)+"";if(Md(E))return Kg?Kg.call(E):"";var P=E+"";return P=="0"&&1/E==-1/0?"-0":P}function If(E,P,V){var se=-1,fe=ra,_e=E.length,Re=!0,$e=[],Ge=$e;if(V)Re=!1,fe=vd;else if(_e>=i){var St=P?null:He(E);if(St)return Ic(St);Re=!1,fe=Io,Ge=new Za}else Ge=P?[]:$e;e:for(;++se<_e;){var Ct=E[se],Mt=P?P(Ct):Ct;if(Ct=V||Ct!==0?Ct:0,Re&&Mt===Mt){for(var fn=Ge.length;fn--;)if(Ge[fn]===Mt)continue e;P&&Ge.push(Mt),$e.push(Ct)}else fe(Ge,Mt,V)||(Ge!==$e&&Ge.push(Mt),$e.push(Ct))}return $e}function ry(E,P){return P=Pf(P,E),E=Ba(E,P),E==null||delete E[Nd(sl(P))]}function iy(E,P,V,se){return Rf(E,P,V(Tf(E,P)),se)}function Fc(E,P,V,se){for(var fe=E.length,_e=se?fe:-1;(se?_e--:++_e<fe)&&P(E[_e],_e,E););return V?ji(E,se?0:_e,se?_e+1:fe):ji(E,se?_e+1:0,se?fe:_e)}function Up(E,P){var V=E;return V instanceof Mn&&(V=V.value()),Xu(P,function(se,fe){return fe.func.apply(fe.thisArg,Ku([se],fe.args))},V)}function sy(E,P,V){var se=E.length;if(se<2)return se?If(E[0]):[];for(var fe=-1,_e=et(se);++fe<se;)for(var Re=E[fe],$e=-1;++$e<se;)$e!=fe&&(_e[fe]=Oc(_e[fe]||Re,E[$e],P,V));return If(Es(_e,1),P,V)}function zp(E,P,V){for(var se=-1,fe=E.length,_e=P.length,Re={};++se<fe;){var $e=se<_e?P[se]:n;V(Re,E[se],$e)}return Re}function Cd(E){return da(E)?E:[]}function sv(E){return typeof E=="function"?E:Ff}function Pf(E,P){return Sr(E)?E:vn(E,P)?[E]:SC(Ki(E))}var Ex=dr;function Nf(E,P,V){var se=E.length;return V=V===n?se:V,!P&&V>=se?E:ji(E,P,V)}var Ad=bx||function(E){return dn.clearTimeout(E)};function Sx(E,P){if(P)return E.slice();var V=E.length,se=q1?q1(V):new E.constructor(V);return E.copy(se),se}function $c(E){var P=new E.constructor(E.byteLength);return new em(P).set(new em(E)),P}function Tx(E,P){var V=P?$c(E.buffer):E.buffer;return new E.constructor(V,E.byteOffset,E.byteLength)}function ns(E){var P=new E.constructor(E.source,Ya.exec(E));return P.lastIndex=E.lastIndex,P}function d2(E){return _u?er(_u.call(E)):{}}function Cx(E,P){var V=P?$c(E.buffer):E.buffer;return new E.constructor(V,E.byteOffset,E.length)}function Ax(E,P){if(E!==P){var V=E!==n,se=E===null,fe=E===E,_e=Md(E),Re=P!==n,$e=P===null,Ge=P===P,St=Md(P);if(!$e&&!St&&!_e&&E>P||_e&&Re&&Ge&&!$e&&!St||se&&Re&&Ge||!V&&Ge||!fe)return 1;if(!se&&!_e&&!St&&E<P||St&&V&&fe&&!se&&!_e||$e&&V&&fe||!Re&&fe||!Ge)return-1}return 0}function yC(E,P,V){for(var se=-1,fe=E.criteria,_e=P.criteria,Re=fe.length,$e=V.length;++se<Re;){var Ge=Ax(fe[se],_e[se]);if(Ge){if(se>=$e)return Ge;var St=V[se];return Ge*(St=="desc"?-1:1)}}return E.index-P.index}function kx(E,P,V,se){for(var fe=-1,_e=E.length,Re=V.length,$e=-1,Ge=P.length,St=io(_e-Re,0),Ct=et(Ge+St),Mt=!se;++$e<Ge;)Ct[$e]=P[$e];for(;++fe<Re;)(Mt||fe<_e)&&(Ct[V[fe]]=E[fe]);for(;St--;)Ct[$e++]=E[fe++];return Ct}function ov(E,P,V,se){for(var fe=-1,_e=E.length,Re=-1,$e=V.length,Ge=-1,St=P.length,Ct=io(_e-$e,0),Mt=et(Ct+St),fn=!se;++fe<Ct;)Mt[fe]=E[fe];for(var Pn=fe;++Ge<St;)Mt[Pn+Ge]=P[Ge];for(;++Re<$e;)(fn||fe<_e)&&(Mt[Pn+V[Re]]=E[fe++]);return Mt}function iu(E,P){var V=-1,se=E.length;for(P||(P=et(se));++V<se;)P[V]=E[V];return P}function Ds(E,P,V,se){var fe=!V;V||(V={});for(var _e=-1,Re=P.length;++_e<Re;){var $e=P[_e],Ge=se?se(V[$e],E[$e],$e,V,E):n;Ge===n&&(Ge=E[$e]),fe?Dc(V,$e,Ge):Is(V,$e,Ge)}return V}function lm(E,P){return Ds(E,$o(E),P)}function vC(E,P){return Ds(E,p2(E),P)}function Bc(E,P){return function(V,se){var fe=Sr(V)?Ac:nn,_e=P?P():{};return fe(V,E,Gt(se,2),_e)}}function kd(E){return dr(function(P,V){var se=-1,fe=V.length,_e=fe>1?V[fe-1]:n,Re=fe>2?V[2]:n;for(_e=E.length>3&&typeof _e=="function"?(fe--,_e):n,Re&&il(V[0],V[1],Re)&&(_e=fe<3?n:_e,fe=1),P=er(P);++se<fe;){var $e=V[se];$e&&E(P,$e,se,_e)}return P})}function Lo(E,P){return function(V,se){if(V==null)return V;if(!Mf(V))return E(V,se);for(var fe=V.length,_e=P?fe:-1,Re=er(V);(P?_e--:++_e<fe)&&se(Re[_e],_e,Re)!==!1;);return V}}function Vp(E){return function(P,V,se){for(var fe=-1,_e=er(P),Re=se(P),$e=Re.length;$e--;){var Ge=Re[E?$e:++fe];if(V(_e[Ge],Ge,_e)===!1)break}return P}}function cm(E,P,V){var se=P&g,fe=qp(E);function _e(){var Re=this&&this!==dn&&this instanceof _e?fe:E;return Re.apply(se?V:this,arguments)}return _e}function oy(E){return function(P){P=Ki(P);var V=bh(P)?Po(P):n,se=V?V[0]:P.charAt(0),fe=V?Nf(V,1).join(""):P.slice(1);return se[E]()+fe}}function Hp(E){return function(P){return Xu(yte(gte(P).replace(vp,"")),E,"")}}function qp(E){return function(){var P=arguments;switch(P.length){case 0:return new E;case 1:return new E(P[0]);case 2:return new E(P[0],P[1]);case 3:return new E(P[0],P[1],P[2]);case 4:return new E(P[0],P[1],P[2],P[3]);case 5:return new E(P[0],P[1],P[2],P[3],P[4]);case 6:return new E(P[0],P[1],P[2],P[3],P[4],P[5]);case 7:return new E(P[0],P[1],P[2],P[3],P[4],P[5],P[6])}var V=Ip(E.prototype),se=E.apply(V,P);return xo(se)?se:V}}function av(E,P,V){var se=qp(E);function fe(){for(var _e=arguments.length,Re=et(_e),$e=_e,Ge=kn(fe);$e--;)Re[$e]=arguments[$e];var St=_e<3&&Re[0]!==Ge&&Re[_e-1]!==Ge?[]:Ju(Re,Ge);if(_e-=St.length,_e<V)return ae(E,P,Rd,fe.placeholder,n,Re,St,n,n,V-_e);var Ct=this&&this!==dn&&this instanceof fe?se:E;return ro(Ct,this,Re)}return fe}function $h(E){return function(P,V,se){var fe=er(P);if(!Mf(P)){var _e=Gt(V,3);P=Au(P),V=function($e){return _e(fe[$e],$e,fe)}}var Re=E(P,V,se);return Re>-1?fe[_e?P[Re]:Re]:n}}function ay(E){return Fo(function(P){var V=P.length,se=V,fe=Na.prototype.thru;for(E&&P.reverse();se--;){var _e=P[se];if(typeof _e!="function")throw new Ia(o);if(fe&&!Re&&rn(_e)=="wrapper")var Re=new Na([],!0)}for(se=Re?se:V;++se<V;){_e=P[se];var $e=rn(_e),Ge=$e=="wrapper"?ct(_e):n;Ge&&Ix(Ge[0])&&Ge[1]==(R|x|S|I)&&!Ge[4].length&&Ge[9]==1?Re=Re[rn(Ge[0])].apply(Re,Ge[3]):Re=_e.length==1&&Ix(_e)?Re[$e]():Re.thru(_e)}return function(){var St=arguments,Ct=St[0];if(Re&&St.length==1&&Sr(Ct))return Re.plant(Ct).value();for(var Mt=0,fn=V?P[Mt].apply(this,St):Ct;++Mt<V;)fn=P[Mt].call(this,fn);return fn}})}function Rd(E,P,V,se,fe,_e,Re,$e,Ge,St){var Ct=P&R,Mt=P&g,fn=P&b,Pn=P&(x|w),Qn=P&O,$r=fn?n:qp(E);function Jn(){for(var Qr=arguments.length,li=et(Qr),Ld=Qr;Ld--;)li[Ld]=arguments[Ld];if(Pn)var zc=kn(Jn),Fd=Ll(li,zc);if(se&&(li=kx(li,se,fe,Pn)),_e&&(li=ov(li,_e,Re,Pn)),Qr-=Fd,Pn&&Qr<St){var ha=Ju(li,zc);return ae(E,P,Rd,Jn.placeholder,V,li,ha,$e,Ge,St-Qr)}var Kp=Mt?V:this,gy=fn?Kp[E]:E;return Qr=li.length,$e?li=Id(li,$e):Qn&&Qr>1&&li.reverse(),Ct&&Ge<Qr&&(li.length=Ge),this&&this!==dn&&this instanceof Jn&&(gy=$r||qp(gy)),gy.apply(Kp,li)}return Jn}function h2(E,P){return function(V,se){return nl(V,E,P(se),{})}}function uy(E,P){return function(V,se){var fe;if(V===n&&se===n)return P;if(V!==n&&(fe=V),se!==n){if(fe===n)return se;typeof V=="string"||typeof se=="string"?(V=qs(V),se=qs(se)):(V=wx(V),se=wx(se)),fe=E(V,se)}return fe}}function T(E){return Fo(function(P){return P=vi(P,ai(Gt())),dr(function(V){var se=this;return E(P,function(fe){return ro(fe,se,V)})})})}function A(E,P){P=P===n?" ":qs(P);var V=P.length;if(V<2)return V?Cu(P,E):P;var se=Cu(P,Ch(E/Pc(P)));return bh(P)?Nf(Po(se),0,E).join(""):se.slice(0,E)}function $(E,P,V,se){var fe=P&g,_e=qp(E);function Re(){for(var $e=-1,Ge=arguments.length,St=-1,Ct=se.length,Mt=et(Ct+Ge),fn=this&&this!==dn&&this instanceof Re?_e:E;++St<Ct;)Mt[St]=se[St];for(;Ge--;)Mt[St++]=arguments[++$e];return ro(fn,fe?V:this,Mt)}return Re}function Y(E){return function(P,V,se){return se&&typeof se!="number"&&il(P,V,se)&&(V=se=n),P=my(P),V===n?(V=P,P=0):V=my(V),se=se===n?P<V?1:-1:my(se),Fh(P,V,se,E)}}function J(E){return function(P,V){return typeof P=="string"&&typeof V=="string"||(P=jh(P),V=jh(V)),E(P,V)}}function ae(E,P,V,se,fe,_e,Re,$e,Ge,St){var Ct=P&x,Mt=Ct?Re:n,fn=Ct?n:Re,Pn=Ct?_e:n,Qn=Ct?n:_e;P|=Ct?S:C,P&=~(Ct?C:S),P&y||(P&=-4);var $r=[E,P,fe,Pn,Mt,Qn,fn,$e,Ge,St],Jn=V.apply(n,$r);return Ix(E)&&wC(Jn,$r),Jn.placeholder=se,EC(Jn,E,P)}function xe(E){var P=Cr[E];return function(V,se){if(V=jh(V),se=se==null?0:Pa(Nr(se),292),se&&Ep(V)){var fe=(Ki(V)+"e").split("e"),_e=P(fe[0]+"e"+(+fe[1]+se));return fe=(Ki(_e)+"e").split("e"),+(fe[0]+"e"+(+fe[1]-se))}return P(V)}}var He=Do&&1/Ic(new Do([,-0]))[1]==Z?function(E){return new Do(E)}:Y7;function at(E){return function(P){var V=ou(P);return V==Me?Rc(P):V==It?u2(P):Us(P,E(P))}}function Ft(E,P,V,se,fe,_e,Re,$e){var Ge=P&b;if(!Ge&&typeof E!="function")throw new Ia(o);var St=se?se.length:0;if(St||(P&=-97,se=fe=n),Re=Re===n?Re:io(Nr(Re),0),$e=$e===n?$e:Nr($e),St-=fe?fe.length:0,P&C){var Ct=se,Mt=fe;se=fe=n}var fn=Ge?n:ct(E),Pn=[E,P,V,se,fe,Ct,Mt,_e,Re,$e];if(fn&&LI(Pn,fn),E=Pn[0],P=Pn[1],V=Pn[2],se=Pn[3],fe=Pn[4],$e=Pn[9]=Pn[9]===n?Ge?0:E.length:io(Pn[9]-St,0),!$e&&P&(x|w)&&(P&=-25),!P||P==g)var Qn=cm(E,P,V);else P==x||P==w?Qn=av(E,P,$e):(P==S||P==(g|S))&&!fe.length?Qn=$(E,P,V,se):Qn=Rd.apply(n,Pn);var $r=fn?Bp:wC;return EC($r(Qn,Pn),E,P)}function yn(E,P,V,se){return E===n||Yp(E,$l[V])&&!mr.call(se,V)?P:E}function tr(E,P,V,se,fe,_e){return xo(E)&&xo(P)&&(_e.set(P,E),Td(E,P,n,tr,_e),_e.delete(P)),E}function an(E){return BC(E)?n:E}function Ui(E,P,V,se,fe,_e){var Re=V&p,$e=E.length,Ge=P.length;if($e!=Ge&&!(Re&&Ge>$e))return!1;var St=_e.get(E),Ct=_e.get(P);if(St&&Ct)return St==P&&Ct==E;var Mt=-1,fn=!0,Pn=V&m?new Za:n;for(_e.set(E,P),_e.set(P,E);++Mt<$e;){var Qn=E[Mt],$r=P[Mt];if(se)var Jn=Re?se($r,Qn,Mt,P,E,_e):se(Qn,$r,Mt,E,P,_e);if(Jn!==n){if(Jn)continue;fn=!1;break}if(Pn){if(!bd(P,function(Qr,li){if(!Io(Pn,li)&&(Qn===Qr||fe(Qn,Qr,V,se,_e)))return Pn.push(li)})){fn=!1;break}}else if(!(Qn===$r||fe(Qn,$r,V,se,_e))){fn=!1;break}}return _e.delete(E),_e.delete(P),fn}function Si(E,P,V,se,fe,_e,Re){switch(V){case wt:if(E.byteLength!=P.byteLength||E.byteOffset!=P.byteOffset)return!1;E=E.buffer,P=P.buffer;case Qe:return!(E.byteLength!=P.byteLength||!_e(new em(E),new em(P)));case he:case Ee:case Ye:return Yp(+E,+P);case ge:return E.name==P.name&&E.message==P.message;case _t:case Et:return E==P+"";case Me:var $e=Rc;case It:var Ge=se&p;if($e||($e=Ic),E.size!=P.size&&!Ge)return!1;var St=Re.get(E);if(St)return St==P;se|=m,Re.set(E,P);var Ct=Ui($e(E),$e(P),se,fe,_e,Re);return Re.delete(E),Ct;case Ke:if(_u)return _u.call(E)==_u.call(P)}return!1}function su(E,P,V,se,fe,_e){var Re=V&p,$e=it(E),Ge=$e.length,St=it(P),Ct=St.length;if(Ge!=Ct&&!Re)return!1;for(var Mt=Ge;Mt--;){var fn=$e[Mt];if(!(Re?fn in P:mr.call(P,fn)))return!1}var Pn=_e.get(E),Qn=_e.get(P);if(Pn&&Qn)return Pn==P&&Qn==E;var $r=!0;_e.set(E,P),_e.set(P,E);for(var Jn=Re;++Mt<Ge;){fn=$e[Mt];var Qr=E[fn],li=P[fn];if(se)var Ld=Re?se(li,Qr,fn,P,E,_e):se(Qr,li,fn,E,P,_e);if(!(Ld===n?Qr===li||fe(Qr,li,V,se,_e):Ld)){$r=!1;break}Jn||(Jn=fn=="constructor")}if($r&&!Jn){var zc=E.constructor,Fd=P.constructor;zc!=Fd&&"constructor"in E&&"constructor"in P&&!(typeof zc=="function"&&zc instanceof zc&&typeof Fd=="function"&&Fd instanceof Fd)&&($r=!1)}return _e.delete(E),_e.delete(P),$r}function Fo(E){return jc(y2(E,n,x2),E+"")}function it(E){return Jg(E,Au,$o)}function qe(E){return Jg(E,Lf,p2)}var ct=Yg?function(E){return Yg.get(E)}:Y7;function rn(E){for(var P=E.name+"",V=kp[P],se=mr.call(kp,P)?V.length:0;se--;){var fe=V[se],_e=fe.func;if(_e==null||_e==E)return fe.name}return P}function kn(E){var P=mr.call(ye,"placeholder")?ye:E;return P.placeholder}function Gt(){var E=ye.iteratee||W7;return E=E===W7?Ns:E,arguments.length?E(arguments[0],arguments[1]):E}function Kn(E,P){var V=E.__data__;return uv(P)?V[typeof P=="string"?"string":"hash"]:V.map}function Fr(E){for(var P=Au(E),V=P.length;V--;){var se=P[V],fe=E[se];P[V]=[se,fe,Px(fe)]}return P}function rs(E,P){var V=Qu(E,P);return Ss(V)?V:n}function Br(E){var P=mr.call(E,Th),V=E[Th];try{E[Th]=n;var se=!0}catch{}var fe=_p.call(E);return se&&(P?E[Th]=V:delete E[Th]),fe}var $o=qg?function(E){return E==null?[]:(E=er(E),ka(qg(E),function(P){return Sh.call(E,P)}))}:K7,p2=qg?function(E){for(var P=[];E;)Ku(P,$o(E)),E=Bl(E);return P}:K7,ou=Mo;(Wg&&ou(new Wg(new ArrayBuffer(1)))!=wt||Cp&&ou(new Cp)!=Me||Gg&&ou(Gg.resolve())!=nt||Do&&ou(new Do)!=It||Ap&&ou(new Ap)!=sn)&&(ou=function(E){var P=Mo(E),V=P==We?E.constructor:n,se=V?fm(V):"";if(se)switch(se){case K1:return wt;case wf:return Me;case Rp:return nt;case Ah:return It;case Ul:return sn}return P});function bC(E,P,V){for(var se=-1,fe=V.length;++se<fe;){var _e=V[se],Re=_e.size;switch(_e.type){case"drop":E+=Re;break;case"dropRight":P-=Re;break;case"take":P=Pa(P,E+Re);break;case"takeRight":E=io(E,P-Re);break}}return{start:E,end:P}}function DI(E){var P=E.match(Qo);return P?P[1].split(Ta):[]}function xC(E,P,V){P=Pf(P,E);for(var se=-1,fe=P.length,_e=!1;++se<fe;){var Re=Nd(P[se]);if(!(_e=E!=null&&V(E,Re)))break;E=E[Re]}return _e||++se!=fe?_e:(fe=E==null?0:E.length,!!fe&&ZI(fe)&&Os(Re,fe)&&(Sr(E)||Bx(E)))}function Rx(E){var P=E.length,V=new E.constructor(P);return P&&typeof E[0]=="string"&&mr.call(E,"index")&&(V.index=E.index,V.input=E.input),V}function au(E){return typeof E.constructor=="function"&&!Wp(E)?Ip(Bl(E)):{}}function E7(E,P,V){var se=E.constructor;switch(P){case Qe:return $c(E);case he:case Ee:return new se(+E);case wt:return Tx(E,V);case Vt:case Wt:case bn:case Dn:case Zn:case wr:case Hn:case nr:case Ei:return Cx(E,V);case Me:return new se;case Ye:case Et:return new se(E);case _t:return ns(E);case It:return new se;case Ke:return d2(E)}}function S7(E,P){var V=P.length;if(!V)return E;var se=V-1;return P[se]=(V>1?"& ":"")+P[se],P=P.join(V>2?", ":" "),E.replace(go,`{
/* [wrapped with `+P+`] */
`)}function m2(E){return Sr(E)||Bx(E)||!!(Hg&&E&&E[Hg])}function Os(E,P){var V=typeof E;return P=P??ne,!!P&&(V=="number"||V!="symbol"&&gf.test(E))&&E>-1&&E%1==0&&E<P}function il(E,P,V){if(!xo(V))return!1;var se=typeof P;return(se=="number"?Mf(V)&&Os(P,V.length):se=="string"&&P in V)?Yp(V[P],E):!1}function vn(E,P){if(Sr(E))return!1;var V=typeof E;return V=="number"||V=="symbol"||V=="boolean"||E==null||Md(E)?!0:Oi.test(E)||!Kr.test(E)||P!=null&&E in er(P)}function uv(E){var P=typeof E;return P=="string"||P=="number"||P=="symbol"||P=="boolean"?E!=="__proto__":E===null}function Ix(E){var P=rn(E),V=ye[P];if(typeof V!="function"||!(P in Mn.prototype))return!1;if(E===V)return!0;var se=ct(V);return!!se&&E===se[0]}function OI(E){return!!Eh&&Eh in E}var T7=wh?py:X7;function Wp(E){var P=E&&E.constructor,V=typeof P=="function"&&P.prototype||$l;return E===V}function Px(E){return E===E&&!xo(E)}function g2(E,P){return function(V){return V==null?!1:V[E]===P&&(P!==n||E in er(V))}}function MI(E){var P=Yt(E,function(se){return V.size===l&&V.clear(),se}),V=P.cache;return P}function LI(E,P){var V=E[1],se=P[1],fe=V|se,_e=fe<(g|b|R),Re=se==R&&V==x||se==R&&V==I&&E[7].length<=P[8]||se==(R|I)&&P[7].length<=P[8]&&V==x;if(!(_e||Re))return E;se&g&&(E[2]=P[2],fe|=V&g?0:y);var $e=P[3];if($e){var Ge=E[3];E[3]=Ge?kx(Ge,$e,P[4]):$e,E[4]=Ge?Ju(E[3],c):P[4]}return $e=P[5],$e&&(Ge=E[5],E[5]=Ge?ov(Ge,$e,P[6]):$e,E[6]=Ge?Ju(E[5],c):P[6]),$e=P[7],$e&&(E[7]=$e),se&R&&(E[8]=E[8]==null?P[8]:Pa(E[8],P[8])),E[9]==null&&(E[9]=P[9]),E[0]=P[0],E[1]=fe,E}function FI(E){var P=[];if(E!=null)for(var V in er(E))P.push(V);return P}function _C(E){return _p.call(E)}function y2(E,P,V){return P=io(P===n?E.length-1:P,0),function(){for(var se=arguments,fe=-1,_e=io(se.length-P,0),Re=et(_e);++fe<_e;)Re[fe]=se[P+fe];fe=-1;for(var $e=et(P+1);++fe<P;)$e[fe]=se[fe];return $e[P]=V(Re),ro(E,this,$e)}}function Ba(E,P){return P.length<2?E:Tf(E,ji(P,0,-1))}function Id(E,P){for(var V=E.length,se=Pa(P.length,V),fe=iu(E);se--;){var _e=P[se];E[se]=Os(_e,V)?fe[_e]:n}return E}function Bh(E,P){if(!(P==="constructor"&&typeof E[P]=="function")&&P!="__proto__")return E[P]}var wC=Pd(Bp),lv=W1||function(E,P){return dn.setTimeout(E,P)},jc=Pd(ts);function EC(E,P,V){var se=P+"";return jc(E,S7(se,$I(DI(se),V)))}function Pd(E){var P=0,V=0;return function(){var se=l2(),fe=D-(se-V);if(V=se,fe>0){if(++P>=H)return arguments[0]}else P=0;return E.apply(n,arguments)}}function v2(E,P){var V=-1,se=E.length,fe=se-1;for(P=P===n?se:P;++V<P;){var _e=rl(V,fe),Re=E[_e];E[_e]=E[V],E[V]=Re}return E.length=P,E}var SC=MI(function(E){var P=[];return E.charCodeAt(0)===46&&P.push(""),E.replace(si,function(V,se,fe,_e){P.push(fe?_e.replace(Pl,"$1"):se||V)}),P});function Nd(E){if(typeof E=="string"||Md(E))return E;var P=E+"";return P=="0"&&1/E==-1/0?"-0":P}function fm(E){if(E!=null){try{return xp.call(E)}catch{}try{return E+""}catch{}}return""}function $I(E,P){return oi(ee,function(V){var se="_."+V[0];P&V[1]&&!ra(E,se)&&E.push(se)}),E.sort()}function BI(E){if(E instanceof Mn)return E.clone();var P=new Na(E.__wrapped__,E.__chain__);return P.__actions__=iu(E.__actions__),P.__index__=E.__index__,P.__values__=E.__values__,P}function b2(E,P,V){(V?il(E,P,V):P===n)?P=1:P=io(Nr(P),0);var se=E==null?0:E.length;if(!se||P<1)return[];for(var fe=0,_e=0,Re=et(Ch(se/P));fe<se;)Re[_e++]=ji(E,fe,fe+=P);return Re}function TC(E){for(var P=-1,V=E==null?0:E.length,se=0,fe=[];++P<V;){var _e=E[P];_e&&(fe[se++]=_e)}return fe}function Df(){var E=arguments.length;if(!E)return[];for(var P=et(E-1),V=arguments[0],se=E;se--;)P[se-1]=arguments[se];return Ku(Sr(V)?iu(V):[V],Es(P,1))}var ui=dr(function(E,P){return da(E)?Oc(E,Es(P,1,da,!0)):[]}),ja=dr(function(E,P){var V=sl(P);return da(V)&&(V=n),da(E)?Oc(E,Es(P,1,da,!0),Gt(V,2)):[]}),Bo=dr(function(E,P){var V=sl(P);return da(V)&&(V=n),da(E)?Oc(E,Es(P,1,da,!0),n,V):[]});function uu(E,P,V){var se=E==null?0:E.length;return se?(P=V||P===n?1:Nr(P),ji(E,P<0?0:P,se)):[]}function Uc(E,P,V){var se=E==null?0:E.length;return se?(P=V||P===n?1:Nr(P),P=se-P,ji(E,0,P<0?0:P)):[]}function cv(E,P){return E&&E.length?Fc(E,Gt(P,3),!0,!0):[]}function ca(E,P){return E&&E.length?Fc(E,Gt(P,3),!0):[]}function Nx(E,P,V,se){var fe=E==null?0:E.length;return fe?(V&&typeof V!="number"&&il(E,P,V)&&(V=0,se=fe),Mc(E,P,V,se)):[]}function dm(E,P,V){var se=E==null?0:E.length;if(!se)return-1;var fe=V==null?0:Nr(V);return fe<0&&(fe=io(se+fe,0)),bf(E,Gt(P,3),fe)}function Dx(E,P,V){var se=E==null?0:E.length;if(!se)return-1;var fe=se-1;return V!==n&&(fe=Nr(V),fe=V<0?io(se+fe,0):Pa(fe,se-1)),bf(E,Gt(P,3),fe,!0)}function x2(E){var P=E==null?0:E.length;return P?Es(E,1):[]}function Ox(E){var P=E==null?0:E.length;return P?Es(E,Z):[]}function Vl(E,P){var V=E==null?0:E.length;return V?(P=P===n?1:Nr(P),Es(E,P)):[]}function CC(E){for(var P=-1,V=E==null?0:E.length,se={};++P<V;){var fe=E[P];se[fe[0]]=fe[1]}return se}function ly(E){return E&&E.length?E[0]:n}function Gp(E,P,V){var se=E==null?0:E.length;if(!se)return-1;var fe=V==null?0:Nr(V);return fe<0&&(fe=io(se+fe,0)),xd(E,P,fe)}function _2(E){var P=E==null?0:E.length;return P?ji(E,0,-1):[]}var AC=dr(function(E){var P=vi(E,Cd);return P.length&&P[0]===E[0]?Mp(P):[]}),hm=dr(function(E){var P=sl(E),V=vi(E,Cd);return P===sl(V)?P=n:V.pop(),V.length&&V[0]===E[0]?Mp(V,Gt(P,2)):[]}),w2=dr(function(E){var P=sl(E),V=vi(E,Cd);return P=typeof P=="function"?P:n,P&&V.pop(),V.length&&V[0]===E[0]?Mp(V,n,P):[]});function pm(E,P){return E==null?"":Y1.call(E,P)}function sl(E){var P=E==null?0:E.length;return P?E[P-1]:n}function Mx(E,P,V){var se=E==null?0:E.length;if(!se)return-1;var fe=se;return V!==n&&(fe=Nr(V),fe=fe<0?io(se+fe,0):Pa(fe,se-1)),P===P?Fl(E,P,fe):bf(E,F,fe,!0)}function kC(E,P){return E&&E.length?la(E,Nr(P)):n}var E2=dr(Lx);function Lx(E,P){return E&&E.length&&P&&P.length?ds(E,P):E}function ol(E,P,V){return E&&E.length&&P&&P.length?ds(E,P,Gt(V,2)):E}function mm(E,P,V){return E&&E.length&&P&&P.length?ds(E,P,n,V):E}var Dd=Fo(function(E,P){var V=E==null?0:E.length,se=Z1(E,P);return Hs(E,vi(P,function(fe){return Os(fe,V)?+fe:fe}).sort(Ax)),se});function Hl(E,P){var V=[];if(!(E&&E.length))return V;var se=-1,fe=[],_e=E.length;for(P=Gt(P,3);++se<_e;){var Re=E[se];P(Re,se,E)&&(V.push(Re),fe.push(se))}return Hs(E,fe),V}function S2(E){return E==null?E:Tp.call(E)}function RC(E,P,V){var se=E==null?0:E.length;return se?(V&&typeof V!="number"&&il(E,P,V)?(P=0,V=se):(P=P==null?0:Nr(P),V=V===n?se:Nr(V)),ji(E,P,V)):[]}function IC(E,P){return jp(E,P)}function C7(E,P,V){return um(E,P,Gt(V,2))}function gm(E,P){var V=E==null?0:E.length;if(V){var se=jp(E,P);if(se<V&&Yp(E[se],P))return se}return-1}function jI(E,P){return jp(E,P,!0)}function PC(E,P,V){return um(E,P,Gt(V,2),!0)}function cy(E,P){var V=E==null?0:E.length;if(V){var se=jp(E,P,!0)-1;if(Yp(E[se],P))return se}return-1}function NC(E){return E&&E.length?ny(E):[]}function fy(E,P){return E&&E.length?ny(E,Gt(P,2)):[]}function UI(E){var P=E==null?0:E.length;return P?ji(E,1,P):[]}function zI(E,P,V){return E&&E.length?(P=V||P===n?1:Nr(P),ji(E,0,P<0?0:P)):[]}function DC(E,P,V){var se=E==null?0:E.length;return se?(P=V||P===n?1:Nr(P),P=se-P,ji(E,P<0?0:P,se)):[]}function T2(E,P){return E&&E.length?Fc(E,Gt(P,3),!1,!0):[]}function A7(E,P){return E&&E.length?Fc(E,Gt(P,3)):[]}var k7=dr(function(E){return If(Es(E,1,da,!0))}),VI=dr(function(E){var P=sl(E);return da(P)&&(P=n),If(Es(E,1,da,!0),Gt(P,2))}),HI=dr(function(E){var P=sl(E);return P=typeof P=="function"?P:n,If(Es(E,1,da,!0),n,P)});function dy(E){return E&&E.length?If(E):[]}function R7(E,P){return E&&E.length?If(E,Gt(P,2)):[]}function fv(E,P){return P=typeof P=="function"?P:n,E&&E.length?If(E,n,P):[]}function C2(E){if(!(E&&E.length))return[];var P=0;return E=ka(E,function(V){if(da(V))return P=io(V.length,P),!0}),Lr(P,function(V){return vi(E,le(V))})}function Ws(E,P){if(!(E&&E.length))return[];var V=C2(E);return P==null?V:vi(V,function(se){return ro(P,n,se)})}var I7=dr(function(E,P){return da(E)?Oc(E,P):[]}),qI=dr(function(E){return sy(ka(E,da))}),P7=dr(function(E){var P=sl(E);return da(P)&&(P=n),sy(ka(E,da),Gt(P,2))}),N7=dr(function(E){var P=sl(E);return P=typeof P=="function"?P:n,sy(ka(E,da),n,P)}),WI=dr(C2);function GI(E,P){return zp(E||[],P||[],Is)}function D7(E,P){return zp(E||[],P||[],Rf)}var Of=dr(function(E){var P=E.length,V=P>1?E[P-1]:n;return V=typeof V=="function"?(E.pop(),V):n,Ws(E,V)});function A2(E){var P=ye(E);return P.__chain__=!0,P}function O7(E,P){return P(E),E}function Od(E,P){return P(E)}var k2=Fo(function(E){var P=E.length,V=P?E[0]:0,se=this.__wrapped__,fe=function(_e){return Z1(_e,E)};return P>1||this.__actions__.length||!(se instanceof Mn)||!Os(V)?this.thru(fe):(se=se.slice(V,+V+(P?1:0)),se.__actions__.push({func:Od,args:[fe],thisArg:n}),new Na(se,this.__chain__).thru(function(_e){return P&&!_e.length&&_e.push(n),_e}))});function hy(){return A2(this)}function R2(){return new Na(this.value(),this.__chain__)}function OC(){this.__values__===n&&(this.__values__=ate(this.value()));var E=this.__index__>=this.__values__.length,P=E?n:this.__values__[this.__index__++];return{done:E,value:P}}function MC(){return this}function M7(E){for(var P,V=this;V instanceof Nc;){var se=BI(V);se.__index__=0,se.__values__=n,P?fe.__wrapped__=se:P=se;var fe=se;V=V.__wrapped__}return fe.__wrapped__=E,P}function LC(){var E=this.__wrapped__;if(E instanceof Mn){var P=E;return this.__actions__.length&&(P=new Mn(this)),P=P.reverse(),P.__actions__.push({func:Od,args:[S2],thisArg:n}),new Na(P,this.__chain__)}return this.thru(S2)}function L7(){return Up(this.__wrapped__,this.__actions__)}var YI=Bc(function(E,P,V){mr.call(E,V)?++E[V]:Dc(E,V,1)});function KI(E,P,V){var se=Sr(E)?yi:zs;return V&&il(E,P,V)&&(P=n),se(E,Gt(P,3))}function I2(E,P){var V=Sr(E)?ka:Qg;return V(E,Gt(P,3))}var P2=$h(dm),XI=$h(Dx);function FC(E,P){return Es(M2(E,P),1)}function QI(E,P){return Es(M2(E,P),Z)}function $C(E,P,V){return V=V===n?1:Nr(V),Es(M2(E,P),V)}function Fx(E,P){var V=Sr(E)?oi:zl;return V(E,Gt(P,3))}function N2(E,P){var V=Sr(E)?Ro:nv;return V(E,Gt(P,3))}var D2=Bc(function(E,P,V){mr.call(E,V)?E[V].push(P):Dc(E,V,[P])});function JI(E,P,V,se){E=Mf(E)?E:$2(E),V=V&&!se?Nr(V):0;var fe=E.length;return V<0&&(V=io(fe+V,0)),e6(E)?V<=fe&&E.indexOf(P,V)>-1:!!fe&&xd(E,P,V)>-1}var F7=dr(function(E,P,V){var se=-1,fe=typeof P=="function",_e=Mf(E)?et(E.length):[];return zl(E,function(Re){_e[++se]=fe?ro(P,Re,V):Su(Re,P,V)}),_e}),O2=Bc(function(E,P,V){Dc(E,V,P)});function M2(E,P){var V=Sr(E)?vi:Lp;return V(E,Gt(P,3))}function $x(E,P,V,se){return E==null?[]:(Sr(P)||(P=P==null?[]:[P]),V=se?n:V,Sr(V)||(V=V==null?[]:[V]),$p(E,P,V))}var $7=Bc(function(E,P,V){E[V?0:1].push(P)},function(){return[[],[]]});function L2(E,P,V){var se=Sr(E)?Xu:Xe,fe=arguments.length<3;return se(E,Gt(P,4),V,fe,zl)}function v(E,P,V){var se=Sr(E)?Bg:Xe,fe=arguments.length<3;return se(E,Gt(P,4),V,fe,nv)}function _(E,P){var V=Sr(E)?ka:Qg;return V(E,Cn(Gt(P,3)))}function N(E){var P=Sr(E)?es:so;return P(E)}function j(E,P,V){(V?il(E,P,V):P===n)?P=1:P=Nr(P);var se=Sr(E)?Dp:ty;return se(E,P)}function Q(E){var P=Sr(E)?f2:bo;return P(E)}function ie(E){if(E==null)return 0;if(Mf(E))return e6(E)?Pc(E):E.length;var P=ou(E);return P==Me||P==It?E.size:Vs(E).length}function de(E,P,V){var se=Sr(E)?bd:$a;return V&&il(E,P,V)&&(P=n),se(E,Gt(P,3))}var ke=dr(function(E,P){if(E==null)return[];var V=P.length;return V>1&&il(E,P[0],P[1])?P=[]:V>2&&il(P[0],P[1],P[2])&&(P=[P[0]]),$p(E,Es(P,1),[])}),Le=Wi||function(){return dn.Date.now()};function st(E,P){if(typeof P!="function")throw new Ia(o);return E=Nr(E),function(){if(--E<1)return P.apply(this,arguments)}}function Ot(E,P,V){return P=V?n:P,P=E&&P==null?E.length:P,Ft(E,R,n,n,n,n,P)}function Ut(E,P){var V;if(typeof P!="function")throw new Ia(o);return E=Nr(E),function(){return--E>0&&(V=P.apply(this,arguments)),E<=1&&(P=n),V}}var Dt=dr(function(E,P,V){var se=g;if(V.length){var fe=Ju(V,kn(Dt));se|=S}return Ft(E,se,P,V,fe)}),pn=dr(function(E,P,V){var se=g|b;if(V.length){var fe=Ju(V,kn(pn));se|=S}return Ft(P,se,E,V,fe)});function En(E,P,V){P=V?n:P;var se=Ft(E,x,n,n,n,n,n,P);return se.placeholder=En.placeholder,se}function Tn(E,P,V){P=V?n:P;var se=Ft(E,w,n,n,n,n,n,P);return se.placeholder=Tn.placeholder,se}function oo(E,P,V){var se,fe,_e,Re,$e,Ge,St=0,Ct=!1,Mt=!1,fn=!0;if(typeof E!="function")throw new Ia(o);P=jh(P)||0,xo(V)&&(Ct=!!V.leading,Mt="maxWait"in V,_e=Mt?io(jh(V.maxWait)||0,P):_e,fn="trailing"in V?!!V.trailing:fn);function Pn(ha){var Kp=se,gy=fe;return se=fe=n,St=ha,Re=E.apply(gy,Kp),Re}function Qn(ha){return St=ha,$e=lv(Qr,P),Ct?Pn(ha):Re}function $r(ha){var Kp=ha-Ge,gy=ha-St,xte=P-Kp;return Mt?Pa(xte,_e-gy):xte}function Jn(ha){var Kp=ha-Ge,gy=ha-St;return Ge===n||Kp>=P||Kp<0||Mt&&gy>=_e}function Qr(){var ha=Le();if(Jn(ha))return li(ha);$e=lv(Qr,$r(ha))}function li(ha){return $e=n,fn&&se?Pn(ha):(se=fe=n,Re)}function Ld(){$e!==n&&Ad($e),St=0,se=Ge=fe=$e=n}function zc(){return $e===n?Re:li(Le())}function Fd(){var ha=Le(),Kp=Jn(ha);if(se=arguments,fe=this,Ge=ha,Kp){if($e===n)return Qn(Ge);if(Mt)return Ad($e),$e=lv(Qr,P),Pn(Ge)}return $e===n&&($e=lv(Qr,P)),Re}return Fd.cancel=Ld,Fd.flush=zc,Fd}var Je=dr(function(E,P){return tv(E,1,P)}),je=dr(function(E,P,V){return tv(E,jh(P)||0,V)});function tt(E){return Ft(E,O)}function Yt(E,P){if(typeof E!="function"||P!=null&&typeof P!="function")throw new Ia(o);var V=function(){var se=arguments,fe=P?P.apply(this,se):se[0],_e=V.cache;if(_e.has(fe))return _e.get(fe);var Re=E.apply(this,se);return V.cache=_e.set(fe,Re)||_e,Re};return V.cache=new(Yt.Cache||Ja),V}Yt.Cache=Ja;function Cn(E){if(typeof E!="function")throw new Ia(o);return function(){var P=arguments;switch(P.length){case 0:return!E.call(this);case 1:return!E.call(this,P[0]);case 2:return!E.call(this,P[0],P[1]);case 3:return!E.call(this,P[0],P[1],P[2])}return!E.apply(this,P)}}function jn(E){return Ut(2,E)}var Un=Ex(function(E,P){P=P.length==1&&Sr(P[0])?vi(P[0],ai(Gt())):vi(Es(P,1),ai(Gt()));var V=P.length;return dr(function(se){for(var fe=-1,_e=Pa(se.length,V);++fe<_e;)se[fe]=P[fe].call(this,se[fe]);return ro(E,this,se)})}),Xn=dr(function(E,P){var V=Ju(P,kn(Xn));return Ft(E,S,n,P,V)}),fa=dr(function(E,P){var V=Ju(P,kn(fa));return Ft(E,C,n,P,V)}),xi=Fo(function(E,P){return Ft(E,I,n,n,n,P)});function ym(E,P){if(typeof E!="function")throw new Ia(o);return P=P===n?P:Nr(P),dr(E,P)}function B7(E,P){if(typeof E!="function")throw new Ia(o);return P=P==null?0:io(Nr(P),0),dr(function(V){var se=V[P],fe=Nf(V,0,P);return se&&Ku(fe,se),ro(E,this,fe)})}function nPe(E,P,V){var se=!0,fe=!0;if(typeof E!="function")throw new Ia(o);return xo(V)&&(se="leading"in V?!!V.leading:se,fe="trailing"in V?!!V.trailing:fe),oo(E,P,{leading:se,maxWait:P,trailing:fe})}function rPe(E){return Ot(E,1)}function iPe(E,P){return Xn(sv(P),E)}function sPe(){if(!arguments.length)return[];var E=arguments[0];return Sr(E)?E:[E]}function oPe(E){return aa(E,h)}function aPe(E,P){return P=typeof P=="function"?P:n,aa(E,h,P)}function uPe(E){return aa(E,f|h)}function lPe(E,P){return P=typeof P=="function"?P:n,aa(E,f|h,P)}function cPe(E,P){return P==null||im(E,P,Au(P))}function Yp(E,P){return E===P||E!==E&&P!==P}var fPe=J(Lc),dPe=J(function(E,P){return E>=P}),Bx=am(function(){return arguments}())?am:function(E){return jo(E)&&mr.call(E,"callee")&&!Sh.call(E,"callee")},Sr=et.isArray,hPe=js?ai(js):rv;function Mf(E){return E!=null&&ZI(E.length)&&!py(E)}function da(E){return jo(E)&&Mf(E)}function pPe(E){return E===!0||E===!1||jo(E)&&Mo(E)==he}var dv=G1||X7,mPe=Li?ai(Li):Af;function gPe(E){return jo(E)&&E.nodeType===1&&!BC(E)}function yPe(E){if(E==null)return!0;if(Mf(E)&&(Sr(E)||typeof E=="string"||typeof E.splice=="function"||dv(E)||F2(E)||Bx(E)))return!E.length;var P=ou(E);if(P==Me||P==It)return!E.size;if(Wp(E))return!Vs(E).length;for(var V in E)if(mr.call(E,V))return!1;return!0}function vPe(E,P){return Tu(E,P)}function bPe(E,P,V){V=typeof V=="function"?V:n;var se=V?V(E,P):n;return se===n?Tu(E,P,n,V):!!se}function j7(E){if(!jo(E))return!1;var P=Mo(E);return P==ge||P==Ae||typeof E.message=="string"&&typeof E.name=="string"&&!BC(E)}function xPe(E){return typeof E=="number"&&Ep(E)}function py(E){if(!xo(E))return!1;var P=Mo(E);return P==me||P==Oe||P==ce||P==yt}function rte(E){return typeof E=="number"&&E==Nr(E)}function ZI(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=ne}function xo(E){var P=typeof E;return E!=null&&(P=="object"||P=="function")}function jo(E){return E!=null&&typeof E=="object"}var ite=no?ai(no):Zg;function _Pe(E,P){return E===P||Mh(E,P,Fr(P))}function wPe(E,P,V){return V=typeof V=="function"?V:n,Mh(E,P,Fr(P),V)}function EPe(E){return ste(E)&&E!=+E}function SPe(E){if(T7(E))throw new Bn(s);return Ss(E)}function TPe(E){return E===null}function CPe(E){return E==null}function ste(E){return typeof E=="number"||jo(E)&&Mo(E)==Ye}function BC(E){if(!jo(E)||Mo(E)!=We)return!1;var P=Bl(E);if(P===null)return!0;var V=mr.call(P,"constructor")&&P.constructor;return typeof V=="function"&&V instanceof V&&xp.call(V)==J0}var U7=Xa?ai(Xa):fr;function APe(E){return rte(E)&&E>=-9007199254740991&&E<=ne}var ote=na?ai(na):$i;function e6(E){return typeof E=="string"||!Sr(E)&&jo(E)&&Mo(E)==Et}function Md(E){return typeof E=="symbol"||jo(E)&&Mo(E)==Ke}var F2=$g?ai($g):fs;function kPe(E){return E===n}function RPe(E){return jo(E)&&ou(E)==sn}function IPe(E){return jo(E)&&Mo(E)==Fe}var PPe=J(Yi),NPe=J(function(E,P){return E<=P});function ate(E){if(!E)return[];if(Mf(E))return e6(E)?Po(E):iu(E);if(jl&&E[jl])return _d(E[jl]());var P=ou(E),V=P==Me?Rc:P==It?Ic:$2;return V(E)}function my(E){if(!E)return E===0?E:0;if(E=jh(E),E===Z||E===-1/0){var P=E<0?-1:1;return P*ue}return E===E?E:0}function Nr(E){var P=my(E),V=P%1;return P===P?V?P-V:P:0}function ute(E){return E?tl(Nr(E),0,q):0}function jh(E){if(typeof E=="number")return E;if(Md(E))return X;if(xo(E)){var P=typeof E.valueOf=="function"?E.valueOf():E;E=xo(P)?P+"":P}if(typeof E!="string")return E===0?E:+E;E=Pr(E);var V=yh.test(E);return V||mf.test(E)?ir(E.slice(2),V?2:8):Jo.test(E)?X:+E}function lte(E){return Ds(E,Lf(E))}function DPe(E){return E?tl(Nr(E),-9007199254740991,ne):E===0?E:0}function Ki(E){return E==null?"":qs(E)}var OPe=kd(function(E,P){if(Wp(P)||Mf(P)){Ds(P,Au(P),E);return}for(var V in P)mr.call(P,V)&&Is(E,V,P[V])}),cte=kd(function(E,P){Ds(P,Lf(P),E)}),t6=kd(function(E,P,V,se){Ds(P,Lf(P),E,se)}),MPe=kd(function(E,P,V,se){Ds(P,Au(P),E,se)}),LPe=Fo(Z1);function FPe(E,P){var V=Ip(E);return P==null?V:bi(V,P)}var $Pe=dr(function(E,P){E=er(E);var V=-1,se=P.length,fe=se>2?P[2]:n;for(fe&&il(P[0],P[1],fe)&&(se=1);++V<se;)for(var _e=P[V],Re=Lf(_e),$e=-1,Ge=Re.length;++$e<Ge;){var St=Re[$e],Ct=E[St];(Ct===n||Yp(Ct,$l[St])&&!mr.call(E,St))&&(E[St]=_e[St])}return E}),BPe=dr(function(E){return E.push(n,tr),ro(fte,n,E)});function jPe(E,P){return Ra(E,Gt(P,3),Ps)}function UPe(E,P){return Ra(E,Gt(P,3),Oh)}function zPe(E,P){return E==null?E:Eu(E,Gt(P,3),Lf)}function VPe(E,P){return E==null?E:sm(E,Gt(P,3),Lf)}function HPe(E,P){return E&&Ps(E,Gt(P,3))}function qPe(E,P){return E&&Oh(E,Gt(P,3))}function WPe(E){return E==null?[]:Op(E,Au(E))}function GPe(E){return E==null?[]:Op(E,Lf(E))}function z7(E,P,V){var se=E==null?n:Tf(E,P);return se===n?V:se}function YPe(E,P){return E!=null&&xC(E,P,ru)}function V7(E,P){return E!=null&&xC(E,P,Cf)}var KPe=h2(function(E,P,V){P!=null&&typeof P.toString!="function"&&(P=_p.call(P)),E[P]=V},q7(Ff)),XPe=h2(function(E,P,V){P!=null&&typeof P.toString!="function"&&(P=_p.call(P)),mr.call(E,P)?E[P].push(V):E[P]=[V]},Gt),QPe=dr(Su);function Au(E){return Mf(E)?wu(E):Vs(E)}function Lf(E){return Mf(E)?wu(E,!0):Lh(E)}function JPe(E,P){var V={};return P=Gt(P,3),Ps(E,function(se,fe,_e){Dc(V,P(se,fe,_e),se)}),V}function ZPe(E,P){var V={};return P=Gt(P,3),Ps(E,function(se,fe,_e){Dc(V,fe,P(se,fe,_e))}),V}var eNe=kd(function(E,P,V){Td(E,P,V)}),fte=kd(function(E,P,V,se){Td(E,P,V,se)}),tNe=Fo(function(E,P){var V={};if(E==null)return V;var se=!1;P=vi(P,function(_e){return _e=Pf(_e,E),se||(se=_e.length>1),_e}),Ds(E,qe(E),V),se&&(V=aa(V,f|d|h,an));for(var fe=P.length;fe--;)ry(V,P[fe]);return V});function nNe(E,P){return dte(E,Cn(Gt(P)))}var rNe=Fo(function(E,P){return E==null?{}:ey(E,P)});function dte(E,P){if(E==null)return{};var V=vi(qe(E),function(se){return[se]});return P=Gt(P),Fa(E,V,function(se,fe){return P(se,fe[0])})}function iNe(E,P,V){P=Pf(P,E);var se=-1,fe=P.length;for(fe||(fe=1,E=n);++se<fe;){var _e=E==null?n:E[Nd(P[se])];_e===n&&(se=fe,_e=V),E=py(_e)?_e.call(E):_e}return E}function sNe(E,P,V){return E==null?E:Rf(E,P,V)}function oNe(E,P,V,se){return se=typeof se=="function"?se:n,E==null?E:Rf(E,P,V,se)}var hte=at(Au),pte=at(Lf);function aNe(E,P,V){var se=Sr(E),fe=se||dv(E)||F2(E);if(P=Gt(P,4),V==null){var _e=E&&E.constructor;fe?V=se?new _e:[]:xo(E)?V=py(_e)?Ip(Bl(E)):{}:V={}}return(fe?oi:Ps)(E,function(Re,$e,Ge){return P(V,Re,$e,Ge)}),V}function uNe(E,P){return E==null?!0:ry(E,P)}function lNe(E,P,V){return E==null?E:iy(E,P,sv(V))}function cNe(E,P,V,se){return se=typeof se=="function"?se:n,E==null?E:iy(E,P,sv(V),se)}function $2(E){return E==null?[]:cs(E,Au(E))}function fNe(E){return E==null?[]:cs(E,Lf(E))}function dNe(E,P,V){return V===n&&(V=P,P=n),V!==n&&(V=jh(V),V=V===V?V:0),P!==n&&(P=jh(P),P=P===P?P:0),tl(jh(E),P,V)}function hNe(E,P,V){return P=my(P),V===n?(V=P,P=0):V=my(V),E=jh(E),om(E,P,V)}function pNe(E,P,V){if(V&&typeof V!="boolean"&&il(E,P,V)&&(P=V=n),V===n&&(typeof P=="boolean"?(V=P,P=n):typeof E=="boolean"&&(V=E,E=n)),E===n&&P===n?(E=0,P=1):(E=my(E),P===n?(P=E,E=0):P=my(P)),E>P){var se=E;E=P,P=se}if(V||E%1||P%1){var fe=tm();return Pa(E+fe*(P-E+hn("1e-"+((fe+"").length-1))),P)}return rl(E,P)}var mNe=Hp(function(E,P,V){return P=P.toLowerCase(),E+(V?mte(P):P)});function mte(E){return H7(Ki(E).toLowerCase())}function gte(E){return E=Ki(E),E&&E.replace(xc,V1).replace(Ol,"")}function gNe(E,P,V){E=Ki(E),P=qs(P);var se=E.length;V=V===n?se:tl(Nr(V),0,se);var fe=V;return V-=P.length,V>=0&&E.slice(V,fe)==P}function yNe(E){return E=Ki(E),E&&mo.test(E)?E.replace(Zi,px):E}function vNe(E){return E=Ki(E),E&&Xr.test(E)?E.replace(Zs,"\\$&"):E}var bNe=Hp(function(E,P,V){return E+(V?"-":"")+P.toLowerCase()}),xNe=Hp(function(E,P,V){return E+(V?" ":"")+P.toLowerCase()}),_Ne=oy("toLowerCase");function wNe(E,P,V){E=Ki(E),P=Nr(P);var se=P?Pc(E):0;if(!P||se>=P)return E;var fe=(P-se)/2;return A(_f(fe),V)+E+A(Ch(fe),V)}function ENe(E,P,V){E=Ki(E),P=Nr(P);var se=P?Pc(E):0;return P&&se<P?E+A(P-se,V):E}function SNe(E,P,V){E=Ki(E),P=Nr(P);var se=P?Pc(E):0;return P&&se<P?A(P-se,V)+E:E}function TNe(E,P,V){return V||P==null?P=0:P&&(P=+P),xx(Ki(E).replace(Hi,""),P||0)}function CNe(E,P,V){return(V?il(E,P,V):P===n)?P=1:P=Nr(P),Cu(Ki(E),P)}function ANe(){var E=arguments,P=Ki(E[0]);return E.length<3?P:P.replace(E[1],E[2])}var kNe=Hp(function(E,P,V){return E+(V?"_":"")+P.toLowerCase()});function RNe(E,P,V){return V&&typeof V!="number"&&il(E,P,V)&&(P=V=n),V=V===n?q:V>>>0,V?(E=Ki(E),E&&(typeof P=="string"||P!=null&&!U7(P))&&(P=qs(P),!P&&bh(E))?Nf(Po(E),0,V):E.split(P,V)):[]}var INe=Hp(function(E,P,V){return E+(V?" ":"")+H7(P)});function PNe(E,P,V){return E=Ki(E),V=V==null?0:tl(Nr(V),0,E.length),P=qs(P),E.slice(V,V+P.length)==P}function NNe(E,P,V){var se=ye.templateSettings;V&&il(E,P,V)&&(P=n),E=Ki(E),P=t6({},P,se,yn);var fe=t6({},P.imports,se.imports,yn),_e=Au(fe),Re=cs(fe,_e),$e,Ge,St=0,Ct=P.interpolate||_c,Mt="__p += '",fn=_h((P.escape||_c).source+"|"+Ct.source+"|"+(Ct===Sa?bs:_c).source+"|"+(P.evaluate||_c).source+"|$","g"),Pn="//# sourceURL="+(mr.call(P,"sourceURL")?(P.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++X0+"]")+`
`;E.replace(fn,function(Jn,Qr,li,Ld,zc,Fd){return li||(li=Ld),Mt+=E.slice(St,Fd).replace(wc,kc),Qr&&($e=!0,Mt+=`' +
__e(`+Qr+`) +
'`),zc&&(Ge=!0,Mt+=`';
`+zc+`;
__p += '`),li&&(Mt+=`' +
((__t = (`+li+`)) == null ? '' : __t) +
'`),St=Fd+Jn.length,Jn}),Mt+=`';
`;var Qn=mr.call(P,"variable")&&P.variable;if(!Qn)Mt=`with (obj) {
`+Mt+`
}
`;else if(Hr.test(Qn))throw new Bn(a);Mt=(Ge?Mt.replace(Dr,""):Mt).replace(Co,"$1").replace(Ji,"$1;"),Mt="function("+(Qn||"obj")+`) {
`+(Qn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($e?", __e = _.escape":"")+(Ge?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Mt+`return __p
}`;var $r=vte(function(){return On(_e,Pn+"return "+Mt).apply(n,Re)});if($r.source=Mt,j7($r))throw $r;return $r}function DNe(E){return Ki(E).toLowerCase()}function ONe(E){return Ki(E).toUpperCase()}function MNe(E,P,V){if(E=Ki(E),E&&(V||P===n))return Pr(E);if(!E||!(P=qs(P)))return E;var se=Po(E),fe=Po(P),_e=yo(se,fe),Re=vo(se,fe)+1;return Nf(se,_e,Re).join("")}function LNe(E,P,V){if(E=Ki(E),E&&(V||P===n))return E.slice(0,Zu(E)+1);if(!E||!(P=qs(P)))return E;var se=Po(E),fe=vo(se,Po(P))+1;return Nf(se,0,fe).join("")}function FNe(E,P,V){if(E=Ki(E),E&&(V||P===n))return E.replace(Hi,"");if(!E||!(P=qs(P)))return E;var se=Po(E),fe=yo(se,Po(P));return Nf(se,fe).join("")}function $Ne(E,P){var V=M,se=L;if(xo(P)){var fe="separator"in P?P.separator:fe;V="length"in P?Nr(P.length):V,se="omission"in P?qs(P.omission):se}E=Ki(E);var _e=E.length;if(bh(E)){var Re=Po(E);_e=Re.length}if(V>=_e)return E;var $e=V-Pc(se);if($e<1)return se;var Ge=Re?Nf(Re,0,$e).join(""):E.slice(0,$e);if(fe===n)return Ge+se;if(Re&&($e+=Ge.length-$e),U7(fe)){if(E.slice($e).search(fe)){var St,Ct=Ge;for(fe.global||(fe=_h(fe.source,Ki(Ya.exec(fe))+"g")),fe.lastIndex=0;St=fe.exec(Ct);)var Mt=St.index;Ge=Ge.slice(0,Mt===n?$e:Mt)}}else if(E.indexOf(qs(fe),$e)!=$e){var fn=Ge.lastIndexOf(fe);fn>-1&&(Ge=Ge.slice(0,fn))}return Ge+se}function BNe(E){return E=Ki(E),E&&ei.test(E)?E.replace(Di,H1):E}var jNe=Hp(function(E,P,V){return E+(V?" ":"")+P.toUpperCase()}),H7=oy("toUpperCase");function yte(E,P,V){return E=Ki(E),P=V?n:P,P===n?a2(E)?gx(E):vh(E):E.match(P)||[]}var vte=dr(function(E,P){try{return ro(E,n,P)}catch(V){return j7(V)?V:new Bn(V)}}),UNe=Fo(function(E,P){return oi(P,function(V){V=Nd(V),Dc(E,V,Dt(E[V],E))}),E});function zNe(E){var P=E==null?0:E.length,V=Gt();return E=P?vi(E,function(se){if(typeof se[1]!="function")throw new Ia(o);return[V(se[0]),se[1]]}):[],dr(function(se){for(var fe=-1;++fe<P;){var _e=E[fe];if(ro(_e[0],this,se))return ro(_e[1],this,se)}})}function VNe(E){return ev(aa(E,f))}function q7(E){return function(){return E}}function HNe(E,P){return E==null||E!==E?P:E}var qNe=ay(),WNe=ay(!0);function Ff(E){return E}function W7(E){return Ns(typeof E=="function"?E:aa(E,f))}function GNe(E){return kf(aa(E,f))}function YNe(E,P){return Bi(E,aa(P,f))}var KNe=dr(function(E,P){return function(V){return Su(V,E,P)}}),XNe=dr(function(E,P){return function(V){return Su(E,V,P)}});function G7(E,P,V){var se=Au(P),fe=Op(P,se);V==null&&!(xo(P)&&(fe.length||!se.length))&&(V=P,P=E,E=this,fe=Op(P,Au(P)));var _e=!(xo(V)&&"chain"in V)||!!V.chain,Re=py(E);return oi(fe,function($e){var Ge=P[$e];E[$e]=Ge,Re&&(E.prototype[$e]=function(){var St=this.__chain__;if(_e||St){var Ct=E(this.__wrapped__),Mt=Ct.__actions__=iu(this.__actions__);return Mt.push({func:Ge,args:arguments,thisArg:E}),Ct.__chain__=St,Ct}return Ge.apply(E,Ku([this.value()],arguments))})}),E}function QNe(){return dn._===this&&(dn._=yx),this}function Y7(){}function JNe(E){return E=Nr(E),dr(function(P){return la(P,E)})}var ZNe=T(vi),e8e=T(yi),t8e=T(bd);function bte(E){return vn(E)?le(Nd(E)):Ti(E)}function n8e(E){return function(P){return E==null?n:Tf(E,P)}}var r8e=Y(),i8e=Y(!0);function K7(){return[]}function X7(){return!1}function s8e(){return{}}function o8e(){return""}function a8e(){return!0}function u8e(E,P){if(E=Nr(E),E<1||E>ne)return[];var V=q,se=Pa(E,q);P=Gt(P),E-=q;for(var fe=Lr(se,P);++V<E;)P(V);return fe}function l8e(E){return Sr(E)?vi(E,Nd):Md(E)?[E]:iu(SC(Ki(E)))}function c8e(E){var P=++ia;return Ki(E)+P}var f8e=uy(function(E,P){return E+P},0),d8e=xe("ceil"),h8e=uy(function(E,P){return E/P},1),p8e=xe("floor");function m8e(E){return E&&E.length?ua(E,Ff,Lc):n}function g8e(E,P){return E&&E.length?ua(E,Gt(P,2),Lc):n}function y8e(E){return re(E,Ff)}function v8e(E,P){return re(E,Gt(P,2))}function b8e(E){return E&&E.length?ua(E,Ff,Yi):n}function x8e(E,P){return E&&E.length?ua(E,Gt(P,2),Yi):n}var _8e=uy(function(E,P){return E*P},1),w8e=xe("round"),E8e=uy(function(E,P){return E-P},0);function S8e(E){return E&&E.length?Xt(E,Ff):0}function T8e(E,P){return E&&E.length?Xt(E,Gt(P,2)):0}return ye.after=st,ye.ary=Ot,ye.assign=OPe,ye.assignIn=cte,ye.assignInWith=t6,ye.assignWith=MPe,ye.at=LPe,ye.before=Ut,ye.bind=Dt,ye.bindAll=UNe,ye.bindKey=pn,ye.castArray=sPe,ye.chain=A2,ye.chunk=b2,ye.compact=TC,ye.concat=Df,ye.cond=zNe,ye.conforms=VNe,ye.constant=q7,ye.countBy=YI,ye.create=FPe,ye.curry=En,ye.curryRight=Tn,ye.debounce=oo,ye.defaults=$Pe,ye.defaultsDeep=BPe,ye.defer=Je,ye.delay=je,ye.difference=ui,ye.differenceBy=ja,ye.differenceWith=Bo,ye.drop=uu,ye.dropRight=Uc,ye.dropRightWhile=cv,ye.dropWhile=ca,ye.fill=Nx,ye.filter=I2,ye.flatMap=FC,ye.flatMapDeep=QI,ye.flatMapDepth=$C,ye.flatten=x2,ye.flattenDeep=Ox,ye.flattenDepth=Vl,ye.flip=tt,ye.flow=qNe,ye.flowRight=WNe,ye.fromPairs=CC,ye.functions=WPe,ye.functionsIn=GPe,ye.groupBy=D2,ye.initial=_2,ye.intersection=AC,ye.intersectionBy=hm,ye.intersectionWith=w2,ye.invert=KPe,ye.invertBy=XPe,ye.invokeMap=F7,ye.iteratee=W7,ye.keyBy=O2,ye.keys=Au,ye.keysIn=Lf,ye.map=M2,ye.mapKeys=JPe,ye.mapValues=ZPe,ye.matches=GNe,ye.matchesProperty=YNe,ye.memoize=Yt,ye.merge=eNe,ye.mergeWith=fte,ye.method=KNe,ye.methodOf=XNe,ye.mixin=G7,ye.negate=Cn,ye.nthArg=JNe,ye.omit=tNe,ye.omitBy=nNe,ye.once=jn,ye.orderBy=$x,ye.over=ZNe,ye.overArgs=Un,ye.overEvery=e8e,ye.overSome=t8e,ye.partial=Xn,ye.partialRight=fa,ye.partition=$7,ye.pick=rNe,ye.pickBy=dte,ye.property=bte,ye.propertyOf=n8e,ye.pull=E2,ye.pullAll=Lx,ye.pullAllBy=ol,ye.pullAllWith=mm,ye.pullAt=Dd,ye.range=r8e,ye.rangeRight=i8e,ye.rearg=xi,ye.reject=_,ye.remove=Hl,ye.rest=ym,ye.reverse=S2,ye.sampleSize=j,ye.set=sNe,ye.setWith=oNe,ye.shuffle=Q,ye.slice=RC,ye.sortBy=ke,ye.sortedUniq=NC,ye.sortedUniqBy=fy,ye.split=RNe,ye.spread=B7,ye.tail=UI,ye.take=zI,ye.takeRight=DC,ye.takeRightWhile=T2,ye.takeWhile=A7,ye.tap=O7,ye.throttle=nPe,ye.thru=Od,ye.toArray=ate,ye.toPairs=hte,ye.toPairsIn=pte,ye.toPath=l8e,ye.toPlainObject=lte,ye.transform=aNe,ye.unary=rPe,ye.union=k7,ye.unionBy=VI,ye.unionWith=HI,ye.uniq=dy,ye.uniqBy=R7,ye.uniqWith=fv,ye.unset=uNe,ye.unzip=C2,ye.unzipWith=Ws,ye.update=lNe,ye.updateWith=cNe,ye.values=$2,ye.valuesIn=fNe,ye.without=I7,ye.words=yte,ye.wrap=iPe,ye.xor=qI,ye.xorBy=P7,ye.xorWith=N7,ye.zip=WI,ye.zipObject=GI,ye.zipObjectDeep=D7,ye.zipWith=Of,ye.entries=hte,ye.entriesIn=pte,ye.extend=cte,ye.extendWith=t6,G7(ye,ye),ye.add=f8e,ye.attempt=vte,ye.camelCase=mNe,ye.capitalize=mte,ye.ceil=d8e,ye.clamp=dNe,ye.clone=oPe,ye.cloneDeep=uPe,ye.cloneDeepWith=lPe,ye.cloneWith=aPe,ye.conformsTo=cPe,ye.deburr=gte,ye.defaultTo=HNe,ye.divide=h8e,ye.endsWith=gNe,ye.eq=Yp,ye.escape=yNe,ye.escapeRegExp=vNe,ye.every=KI,ye.find=P2,ye.findIndex=dm,ye.findKey=jPe,ye.findLast=XI,ye.findLastIndex=Dx,ye.findLastKey=UPe,ye.floor=p8e,ye.forEach=Fx,ye.forEachRight=N2,ye.forIn=zPe,ye.forInRight=VPe,ye.forOwn=HPe,ye.forOwnRight=qPe,ye.get=z7,ye.gt=fPe,ye.gte=dPe,ye.has=YPe,ye.hasIn=V7,ye.head=ly,ye.identity=Ff,ye.includes=JI,ye.indexOf=Gp,ye.inRange=hNe,ye.invoke=QPe,ye.isArguments=Bx,ye.isArray=Sr,ye.isArrayBuffer=hPe,ye.isArrayLike=Mf,ye.isArrayLikeObject=da,ye.isBoolean=pPe,ye.isBuffer=dv,ye.isDate=mPe,ye.isElement=gPe,ye.isEmpty=yPe,ye.isEqual=vPe,ye.isEqualWith=bPe,ye.isError=j7,ye.isFinite=xPe,ye.isFunction=py,ye.isInteger=rte,ye.isLength=ZI,ye.isMap=ite,ye.isMatch=_Pe,ye.isMatchWith=wPe,ye.isNaN=EPe,ye.isNative=SPe,ye.isNil=CPe,ye.isNull=TPe,ye.isNumber=ste,ye.isObject=xo,ye.isObjectLike=jo,ye.isPlainObject=BC,ye.isRegExp=U7,ye.isSafeInteger=APe,ye.isSet=ote,ye.isString=e6,ye.isSymbol=Md,ye.isTypedArray=F2,ye.isUndefined=kPe,ye.isWeakMap=RPe,ye.isWeakSet=IPe,ye.join=pm,ye.kebabCase=bNe,ye.last=sl,ye.lastIndexOf=Mx,ye.lowerCase=xNe,ye.lowerFirst=_Ne,ye.lt=PPe,ye.lte=NPe,ye.max=m8e,ye.maxBy=g8e,ye.mean=y8e,ye.meanBy=v8e,ye.min=b8e,ye.minBy=x8e,ye.stubArray=K7,ye.stubFalse=X7,ye.stubObject=s8e,ye.stubString=o8e,ye.stubTrue=a8e,ye.multiply=_8e,ye.nth=kC,ye.noConflict=QNe,ye.noop=Y7,ye.now=Le,ye.pad=wNe,ye.padEnd=ENe,ye.padStart=SNe,ye.parseInt=TNe,ye.random=pNe,ye.reduce=L2,ye.reduceRight=v,ye.repeat=CNe,ye.replace=ANe,ye.result=iNe,ye.round=w8e,ye.runInContext=Ve,ye.sample=N,ye.size=ie,ye.snakeCase=kNe,ye.some=de,ye.sortedIndex=IC,ye.sortedIndexBy=C7,ye.sortedIndexOf=gm,ye.sortedLastIndex=jI,ye.sortedLastIndexBy=PC,ye.sortedLastIndexOf=cy,ye.startCase=INe,ye.startsWith=PNe,ye.subtract=E8e,ye.sum=S8e,ye.sumBy=T8e,ye.template=NNe,ye.times=u8e,ye.toFinite=my,ye.toInteger=Nr,ye.toLength=ute,ye.toLower=DNe,ye.toNumber=jh,ye.toSafeInteger=DPe,ye.toString=Ki,ye.toUpper=ONe,ye.trim=MNe,ye.trimEnd=LNe,ye.trimStart=FNe,ye.truncate=$Ne,ye.unescape=BNe,ye.uniqueId=c8e,ye.upperCase=jNe,ye.upperFirst=H7,ye.each=Fx,ye.eachRight=N2,ye.first=ly,G7(ye,function(){var E={};return Ps(ye,function(P,V){mr.call(ye.prototype,V)||(E[V]=P)}),E}(),{chain:!1}),ye.VERSION=r,oi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(E){ye[E].placeholder=ye}),oi(["drop","take"],function(E,P){Mn.prototype[E]=function(V){V=V===n?1:io(Nr(V),0);var se=this.__filtered__&&!P?new Mn(this):this.clone();return se.__filtered__?se.__takeCount__=Pa(V,se.__takeCount__):se.__views__.push({size:Pa(V,q),type:E+(se.__dir__<0?"Right":"")}),se},Mn.prototype[E+"Right"]=function(V){return this.reverse()[E](V).reverse()}}),oi(["filter","map","takeWhile"],function(E,P){var V=P+1,se=V==B||V==G;Mn.prototype[E]=function(fe){var _e=this.clone();return _e.__iteratees__.push({iteratee:Gt(fe,3),type:V}),_e.__filtered__=_e.__filtered__||se,_e}}),oi(["head","last"],function(E,P){var V="take"+(P?"Right":"");Mn.prototype[E]=function(){return this[V](1).value()[0]}}),oi(["initial","tail"],function(E,P){var V="drop"+(P?"":"Right");Mn.prototype[E]=function(){return this.__filtered__?new Mn(this):this[V](1)}}),Mn.prototype.compact=function(){return this.filter(Ff)},Mn.prototype.find=function(E){return this.filter(E).head()},Mn.prototype.findLast=function(E){return this.reverse().find(E)},Mn.prototype.invokeMap=dr(function(E,P){return typeof E=="function"?new Mn(this):this.map(function(V){return Su(V,E,P)})}),Mn.prototype.reject=function(E){return this.filter(Cn(Gt(E)))},Mn.prototype.slice=function(E,P){E=Nr(E);var V=this;return V.__filtered__&&(E>0||P<0)?new Mn(V):(E<0?V=V.takeRight(-E):E&&(V=V.drop(E)),P!==n&&(P=Nr(P),V=P<0?V.dropRight(-P):V.take(P-E)),V)},Mn.prototype.takeRightWhile=function(E){return this.reverse().takeWhile(E).reverse()},Mn.prototype.toArray=function(){return this.take(q)},Ps(Mn.prototype,function(E,P){var V=/^(?:filter|find|map|reject)|While$/.test(P),se=/^(?:head|last)$/.test(P),fe=ye[se?"take"+(P=="last"?"Right":""):P],_e=se||/^find/.test(P);fe&&(ye.prototype[P]=function(){var Re=this.__wrapped__,$e=se?[1]:arguments,Ge=Re instanceof Mn,St=$e[0],Ct=Ge||Sr(Re),Mt=function(Qr){var li=fe.apply(ye,Ku([Qr],$e));return se&&fn?li[0]:li};Ct&&V&&typeof St=="function"&&St.length!=1&&(Ge=Ct=!1);var fn=this.__chain__,Pn=!!this.__actions__.length,Qn=_e&&!fn,$r=Ge&&!Pn;if(!_e&&Ct){Re=$r?Re:new Mn(this);var Jn=E.apply(Re,$e);return Jn.__actions__.push({func:Od,args:[Mt],thisArg:n}),new Na(Jn,fn)}return Qn&&$r?E.apply(this,$e):(Jn=this.thru(Mt),Qn?se?Jn.value()[0]:Jn.value():Jn)})}),oi(["pop","push","shift","sort","splice","unshift"],function(E){var P=Ed[E],V=/^(?:push|sort|unshift)$/.test(E)?"tap":"thru",se=/^(?:pop|shift)$/.test(E);ye.prototype[E]=function(){var fe=arguments;if(se&&!this.__chain__){var _e=this.value();return P.apply(Sr(_e)?_e:[],fe)}return this[V](function(Re){return P.apply(Sr(Re)?Re:[],fe)})}}),Ps(Mn.prototype,function(E,P){var V=ye[P];if(V){var se=V.name+"";mr.call(kp,se)||(kp[se]=[]),kp[se].push({name:P,func:V})}}),kp[Rd(n,b).name]=[{name:"wrapper",func:n}],Mn.prototype.clone=Oo,Mn.prototype.reverse=X1,Mn.prototype.value=Pp,ye.prototype.at=k2,ye.prototype.chain=hy,ye.prototype.commit=R2,ye.prototype.next=OC,ye.prototype.plant=M7,ye.prototype.reverse=LC,ye.prototype.toJSON=ye.prototype.valueOf=ye.prototype.value=L7,ye.prototype.first=ye.prototype.head,jl&&(ye.prototype[jl]=MC),ye},wd=ws();Ir?((Ir.exports=wd)._=wd,Tr._=wd):dn._=wd}).call(Yyt)}(j3,j3.exports)),j3.exports}var mSe=Kyt();const VR=gc(mSe);function Xyt({parameters:e,setAnswer:t}){const n=U.useRef(null),{image:r,question:i,tiles:s,example:o,ourDefinition:a}=e,[u,l]=U.useState({width:0,height:0}),[c,f]=U.useState(s.map(h=>({...h,clicked:!1,unClicked:!1}))),d=U.useRef(null);return U.useEffect(()=>{const h=new Image;h.src=r,h.onload=()=>{const p=d.current,m=window.innerHeight-p.getBoundingClientRect().top,g=window.innerWidth-p.getBoundingClientRect().left,b=h.width/h.height;let y,x;m*b<=g?(x=m,y=m*b):(y=g,x=g/b),l({width:y,height:x,multiplier:y/h.width})}},[r]),U.useEffect(()=>{const h=$u(n.current),p=u.multiplier;h.select("g").selectAll("rect").data(c).join("rect").attr("x",m=>m.x*p).attr("y",m=>m.y*p).attr("width",m=>m.width*p).attr("height",m=>m.height*p).attr("stroke","black").attr("stroke-width",2).attr("cursor","pointer").attr("fill","#e6e6e6").attr("opacity",m=>m.clicked?0:.5).on("click",(m,g)=>{const b=VR.cloneDeep(c),y=b.findIndex(x=>x.x===g.x&&x.y===g.y);b[y].clicked&&(b[y].unClicked=!0),b[y].clicked=!b[y].clicked,f(b),t({status:!0,answers:{patches:JSON.stringify({patches:b.filter(x=>x.clicked||x.unClicked),multiplier:u.multiplier,question:i})}})}).on("mouseover",(m,g)=>{$u(m.target).attr("stroke","blue").attr("stroke-width",2)}).on("mouseout",(m,g)=>{$u(m.target).attr("stroke","gray").attr("stroke-width",.5)})},[c,t,u]),k.jsxs("div",{children:[o&&k.jsx("h1",{children:"Example Question"}),o?k.jsx("div",{children:k.jsx("h3",{children:i})}):k.jsxs("div",{children:[k.jsxs("h3",{children:["Please annotate ",k.jsx("u",{children:"minimum patches"})," that ",k.jsx("span",{style:{color:"red"},children:" must be revealed "})," for people to ",k.jsx("span",{style:{color:"red"},children:"confidently"})," answer the question below, assuming that people ",k.jsx("span",{style:{color:"red"},children:"cannot"})," see the blocked area.",k.jsx("br",{}),"Then provide your answer for the question."]}),k.jsxs("h3",{children:["Q: ",i]})]}),k.jsx(Ue,{ref:d,className:"ImageWrapper",style:{width:"100%",display:"block"},children:k.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:u.width,height:u.height,children:[k.jsx("image",{href:r,width:u.width,height:u.height}),k.jsx("g",{id:"rectangles"})]})})]})}const Qyt=Object.freeze(Object.defineProperty({__proto__:null,default:Xyt},Symbol.toStringTag,{value:"Module"}));function Jyt({parameters:e,setAnswer:t}){const n=U.useRef(null),{image:r,question:i,radius_count:s,example:o}=e,[a,u]=U.useState([]),[l,c]=U.useState({width:0,height:0}),f=U.useRef(null),[d,h]=U.useState(0);U.useEffect(()=>{const m=new Image;m.src=r,m.onload=()=>{const g=f.current,b=window.innerHeight-g.getBoundingClientRect().top,y=window.innerWidth-g.getBoundingClientRect().left,x=m.width/m.height;let w,S;b*x<=y?(S=b,w=b*x):(w=y,S=y/x),c({width:w,height:S,multiplier:w/m.width}),h((w+S)/4/s)}},[r]);const p=U.useCallback(m=>{const g=$u(n.current),b=JY(m,g.node()),y={x:b[0],y:b[1]},x=[...a,y];u(x),t({status:!0,answers:{circles:JSON.stringify({circles:x.map(w=>({x:parseInt(w.x/l.multiplier),y:parseInt(w.y/l.multiplier)})),radius:d/l.multiplier,multiplier:l.multiplier,question:i})}})},[a,t,l]);return k.jsxs("div",{children:[o&&k.jsx("h1",{children:"Example Question"}),o?k.jsx("div",{children:k.jsx("h3",{children:i})}):k.jsxs("div",{children:[k.jsx("h3",{children:"Please click on regions that you wish to reveal. Then provide your answer for the question."}),k.jsxs("h3",{children:["Q: ",i]})]}),k.jsx(Ue,{ref:f,className:"ImageWrapper",style:{width:"100%",display:"block"},children:k.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:l.width,height:l.height,onClick:p,children:[k.jsxs("defs",{children:[k.jsxs("filter",{id:"imageBlurFilter",children:[k.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"11"}),k.jsx("feComponentTransfer",{children:k.jsx("feFuncA",{type:"table",tableValues:"1 1"})})]}),k.jsxs("mask",{id:"unblurMask",children:[k.jsx("rect",{width:"100%",height:"100%",fill:"white"}),a.length>0&&k.jsx("circle",{cx:a[a.length-1].x,cy:a[a.length-1].y,r:d,fill:"black"},0)]})]}),k.jsx("image",{href:r,width:l.width,height:l.height}),k.jsx("image",{href:r,width:l.width,height:l.height,filter:"url(#imageBlurFilter)",mask:"url(#unblurMask)"}),a.length>0&&k.jsx("circle",{cx:a[a.length-1].x,cy:a[a.length-1].y,r:d,fill:"transparent",stroke:"red"},0)]})})]})}const Zyt=Object.freeze(Object.defineProperty({__proto__:null,default:Jyt},Symbol.toStringTag,{value:"Module"}));function CD({value:e,setValue:t,min:n=-1,max:r=1,step:i=.01,tickInterval:s=.2,center:o=0}){const a=(e-n)/(r-n)*100,u=(o-n)/(r-n)*100,l=e>=o?`linear-gradient(
          to right,
          lightgray 0%,
          lightgray ${u}%,
          #228BE6 ${u}%,
          #228BE6 ${a}%,
          lightgray ${a}%,
          lightgray 100%
        )`:`linear-gradient(
          to right,
          lightgray 0%,
          lightgray ${a}%,
          #228BE6 ${a}%,
          #228BE6 ${u}%,
          lightgray ${u}%,
          lightgray 100%
        )`,c=[];for(let f=o;f<=r;f+=s)c.push(f);for(let f=o-s;f>=n;f-=s)c.push(f);return k.jsxs("div",{style:{position:"relative",width:"100%",maxWidth:"600px",margin:"50px auto"},children:[k.jsx("input",{type:"range",min:n,max:r,step:i,value:e,onChange:f=>t(parseFloat(f.target.value)),style:{width:"100%",appearance:"none",height:"8px",borderRadius:"4px",background:l,outline:"none",transition:"background 0.2s"}}),k.jsx("style",{children:`
          input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            background: white;
            border: 3px solid black;
            border-radius: 50%;
            cursor: pointer;
          }
          input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: white;
            border: 3px solid black;
            border-radius: 50%;
            cursor: pointer;
          }
        `}),k.jsx("div",{style:{position:"relative",display:"flex",justifyContent:"space-between",width:"100%",marginTop:"10px",fontSize:"14px",color:"gray"},children:c.map(f=>k.jsx("span",{style:{position:"absolute",left:`${(f-n)/(r-n)*100}%`,transform:"translateX(-50%)",top:"15px"},children:f.toFixed(1)},f))})]})}const e1t=Object.freeze(Object.defineProperty({__proto__:null,default:CD},Symbol.toStringTag,{value:"Module"}));function t1t({parameters:e,setAnswer:t}){const n=U.useRef(null),{image:r,radius:i,example:s,blur_std:o,correlation:a,label:u,X:l,Y:c}=e,[f,d]=U.useState([]),[h,p]=U.useState({width:0,height:0}),[m,g]=U.useState("belief"),[b,y]=U.useState(i),x=U.useRef(null),[w,S]=U.useState(4),[C,R]=U.useState(0),[I,O]=U.useState(0);U.useEffect(()=>{if(m!=="scatter")return;const H=setTimeout(()=>{g("corrafter")},15e3);return()=>clearTimeout(H)},[m]);const M=U.useCallback(H=>{t({answers:{status:!0,answer:JSON.stringify({clicked:f,corr_before:C,corr_act:a,belief:(H-1)/6})}}),O(H)},[t,f,C,I,w]);U.useEffect(()=>{if(m!=="scatter")return;const H=new Image;H.src=r,H.onload=()=>{const D=x.current,B=window.innerHeight-D.getBoundingClientRect().top,z=window.innerWidth-D.getBoundingClientRect().left,G=H.width/H.height;let Z,ne;B*G<=z?(ne=B,Z=B*G):(Z=z,ne=z/G);const ue=Z/H.width;p({width:Z,height:ne,multiplier:ue}),y(i*ue)}},[r,m]);const L=U.useCallback(H=>{const D=$u(n.current),B=JY(H,D.node()),z={x:parseInt(B[0]),y:parseInt(B[1])},G=[...f,z];d(G)},[f]);return k.jsxs("div",{children:[s&&k.jsx("h1",{style:{color:"red"},children:"Example Question"}),m==="scatter"&&k.jsxs("div",{children:[k.jsx("h3",{children:"Explore the scatterplot of the two variables"}),k.jsxs("h3",{children:["X: ",l]}),k.jsxs("h3",{children:["Y: ",c]}),k.jsx(Ue,{ref:x,className:"ImageWrapper",style:{width:"100%"},children:k.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:h.width,height:h.height,onClick:L,children:[k.jsxs("defs",{children:[k.jsx("filter",{id:"imageBlurFilter",children:k.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:o})}),k.jsxs("mask",{id:"unblurMask",children:[k.jsx("rect",{width:"100%",height:"100%",fill:"white"}),f.length>0&&k.jsx("circle",{cx:f[f.length-1].x,cy:f[f.length-1].y,r:b,fill:"black"},0)]})]}),k.jsx("image",{href:r,width:h.width,height:h.height}),k.jsx("image",{href:r,width:h.width,height:h.height,filter:"url(#imageBlurFilter)",mask:"url(#unblurMask)"}),f.length>0&&k.jsx("circle",{cx:f[f.length-1].x,cy:f[f.length-1].y,r:b,step:.001,fill:"transparent",stroke:"red"},0),k.jsx("rect",{x:"0",y:"0",width:h.width,height:h.height,fill:"transparent",stroke:"black",strokeWidth:"1"})]})})]}),m==="corrbefore"&&k.jsxs("div",{style:{width:"50%",margin:"50px auto"},children:[k.jsx("h3",{children:"Predict the correlation of the two variables below:"}),k.jsxs("h3",{children:["X: ",l]}),k.jsxs("h3",{children:["Y: ",c]}),k.jsx(CD,{value:C,setValue:R,min:-1,max:1,step:.01,tickInterval:.2}),k.jsx(Nn,{float:"right",onClick:()=>g("scatter"),children:"Done"})]}),m==="corrafter"&&k.jsxs("div",{style:{width:"50%",margin:"50px auto"},children:[k.jsx("h3",{children:"Estimate the correlation of the scatterplot."}),k.jsx(CD,{value:I,setValue:M,min:-1,max:1,step:.01,tickInterval:.2})]}),m==="belief"&&k.jsxs("div",{style:{width:"50%",margin:"50px auto"},children:[k.jsx("h3",{children:"How much do you believe about this statement?"}),k.jsx("h3",{children:u}),k.jsx("div",{style:{marginBottom:30},children:k.jsx(d9,{value:w,onChange:S,min:1,max:7,defaultValue:4,size:"xl",color:"blue",step:"0.01",marks:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"},{value:7,label:"7"}]})}),k.jsx(Nn,{onClick:()=>g("corrbefore"),children:"Done"})]})]})}const n1t=Object.freeze(Object.defineProperty({__proto__:null,default:t1t},Symbol.toStringTag,{value:"Module"}));function r1t({parameters:e,setAnswer:t}){const n=U.useRef(null),{image:r,radius:i,example:s,blur_std:o,correlation:a}=e,[u,l]=U.useState({width:0,height:0}),[c,f]=U.useState("scatter"),[d,h]=U.useState(i),p=U.useRef(null),[m,g]=U.useState(0);U.useEffect(()=>{const x=setTimeout(()=>{f("slider")},5e3);return()=>clearTimeout(x)},[]);const b=U.useCallback(()=>{t({answers:{status:!0,answer:JSON.stringify({corr_est:m,corr_act:a})}})},[m,t]),y=()=>{b(),f("feedback")};return U.useEffect(()=>{const x=new Image;x.src=r,x.onload=()=>{const w=p.current,S=window.innerHeight-w.getBoundingClientRect().top,C=window.innerWidth-w.getBoundingClientRect().left,R=x.width/x.height;let I,O;S*R<=C?(O=S,I=S*R):(I=C,O=C/R);const M=I/x.width;l({width:I,height:O,multiplier:M}),h(i*M)}},[r]),k.jsxs("div",{children:[s&&k.jsx("div",{children:k.jsx("h1",{style:{color:"red"},children:"Example Question"})}),c==="scatter"&&k.jsx(Ue,{ref:p,className:"ImageWrapper",style:{width:"100%"},children:k.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:u.width,height:u.height,children:[k.jsx("image",{href:r,width:u.width,height:u.height}),k.jsx("rect",{x:"0",y:"0",width:u.width,height:u.height,fill:"transparent",stroke:"black",strokeWidth:"1"})]})}),c==="slider"&&k.jsxs("div",{style:{width:"80%",margin:"50px auto"},children:[k.jsx("h2",{children:"Predict the Correlation!"}),k.jsx(CD,{value:m,setValue:g,min:-1,max:1,step:.01,tickInterval:.2}),k.jsx(Nn,{sx:{mt:2},onClick:y,children:"Done"})]}),c==="feedback"&&k.jsxs("div",{children:[k.jsxs("h2",{children:["Your estimation: ",m]}),k.jsxs("h2",{children:["Actual correlation: ",a.toFixed(2)]})]})]})}const i1t=Object.freeze(Object.defineProperty({__proto__:null,default:r1t},Symbol.toStringTag,{value:"Module"})),gSe=({tool:e,setTool:t,undo:n,clearAll:r})=>k.jsxs(Ue,{sx:{width:250,backgroundColor:"#f8f9fa",padding:20,borderRight:"1px solid #ddd",display:"flex",flexDirection:"column",gap:20},children:[k.jsx(co,{order:4,align:"center",sx:{fontWeight:700},children:"Toolbox"}),k.jsx(Zd,{my:"sm"}),k.jsxs(El,{spacing:"sm",children:[k.jsx(At,{weight:500,children:"Fill Type"}),k.jsx(Js,{children:k.jsxs(ac.Group,{name:"fillType",value:e,onChange:i=>{t(i)},children:[k.jsx(Ue,{mb:"sm",children:k.jsx(ac,{value:"stroke",label:"Stroke Fill"})}),k.jsx(Ue,{mb:"sm",children:k.jsx(ac,{value:"polygon",label:"Polygon Fill"})})]})})]}),k.jsx(Zd,{my:"md"}),k.jsxs(El,{spacing:"xs",children:[k.jsx(At,{weight:500,children:"Actions"}),k.jsx(Nn,{color:"gray",variant:"light",onClick:n,children:"Undo"}),k.jsx(Nn,{color:"red",variant:"light",onClick:r,children:"Clear All"})]}),k.jsx(Zd,{my:"md"}),k.jsxs(El,{spacing:"xs",children:[k.jsx(At,{size:"xl",children:"Tool Tips"}),k.jsxs(At,{size:"md",children:[k.jsx("b",{children:"Stroke Fill:"})," Draw shape by clicking and dragging."]}),k.jsxs(At,{size:"md",children:[k.jsx("b",{children:"Polygon Fill:"})," Click multiple points to draw a polygon. ",k.jsx("u",{children:"Double click"})," to close the polygon."]})]})]}),s1t=Object.freeze(Object.defineProperty({__proto__:null,default:gSe},Symbol.toStringTag,{value:"Module"}));var tB,Fue;function o1t(){if(Fue)return tB;Fue=1;var e=A1();return tB=function(n,r,i){const s=e.useRef("loading"),o=e.useRef(),[a,u]=e.useState(0),l=e.useRef(),c=e.useRef(),f=e.useRef();return(l.current!==n||c.current!==r||f.current!==i)&&(s.current="loading",o.current=void 0,l.current=n,c.current=r,f.current=i),e.useLayoutEffect(function(){if(!n)return;var d=document.createElement("img");function h(){s.current="loaded",o.current=d,u(Math.random())}function p(){s.current="failed",o.current=void 0,u(Math.random())}return d.addEventListener("load",h),d.addEventListener("error",p),r&&(d.crossOrigin=r),i&&(d.referrerPolicy=i),d.src=n,function(){d.removeEventListener("load",h),d.removeEventListener("error",p)}},[n,r,i]),[o.current,s.current]},tB}var a1t=o1t();const ySe=gc(a1t);var CN={exports:{}},cA={},nB={},rB={},$ue;function Vr(){return $ue||($ue=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof ya<"u"?ya:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.18",isBrowser:n(),isUnminified:/param/.test((function(i){}).toString()),dblClickWindow:400,getAngle(i){return e.Konva.angleDeg?i*t:i},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isTransforming(){var i;return(i=e.Konva.Transformer)===null||i===void 0?void 0:i.isTransforming()},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(i){e.glob.Konva=i}};const r=i=>{e.Konva[i.prototype.getClassName()]=i};e._registerNode=r,e.Konva._injectGlobal(e.Konva)}(rB)),rB}var iB={},Bue;function Xo(){return Bue||(Bue=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=Vr();class n{constructor(w=[1,0,0,1,0,0]){this.dirty=!1,this.m=w&&w.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(w){w.m[0]=this.m[0],w.m[1]=this.m[1],w.m[2]=this.m[2],w.m[3]=this.m[3],w.m[4]=this.m[4],w.m[5]=this.m[5]}point(w){const S=this.m;return{x:S[0]*w.x+S[2]*w.y+S[4],y:S[1]*w.x+S[3]*w.y+S[5]}}translate(w,S){return this.m[4]+=this.m[0]*w+this.m[2]*S,this.m[5]+=this.m[1]*w+this.m[3]*S,this}scale(w,S){return this.m[0]*=w,this.m[1]*=w,this.m[2]*=S,this.m[3]*=S,this}rotate(w){const S=Math.cos(w),C=Math.sin(w),R=this.m[0]*S+this.m[2]*C,I=this.m[1]*S+this.m[3]*C,O=this.m[0]*-C+this.m[2]*S,M=this.m[1]*-C+this.m[3]*S;return this.m[0]=R,this.m[1]=I,this.m[2]=O,this.m[3]=M,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(w,S){const C=this.m[0]+this.m[2]*S,R=this.m[1]+this.m[3]*S,I=this.m[2]+this.m[0]*w,O=this.m[3]+this.m[1]*w;return this.m[0]=C,this.m[1]=R,this.m[2]=I,this.m[3]=O,this}multiply(w){const S=this.m[0]*w.m[0]+this.m[2]*w.m[1],C=this.m[1]*w.m[0]+this.m[3]*w.m[1],R=this.m[0]*w.m[2]+this.m[2]*w.m[3],I=this.m[1]*w.m[2]+this.m[3]*w.m[3],O=this.m[0]*w.m[4]+this.m[2]*w.m[5]+this.m[4],M=this.m[1]*w.m[4]+this.m[3]*w.m[5]+this.m[5];return this.m[0]=S,this.m[1]=C,this.m[2]=R,this.m[3]=I,this.m[4]=O,this.m[5]=M,this}invert(){const w=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),S=this.m[3]*w,C=-this.m[1]*w,R=-this.m[2]*w,I=this.m[0]*w,O=w*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),M=w*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=S,this.m[1]=C,this.m[2]=R,this.m[3]=I,this.m[4]=O,this.m[5]=M,this}getMatrix(){return this.m}decompose(){const w=this.m[0],S=this.m[1],C=this.m[2],R=this.m[3],I=this.m[4],O=this.m[5],M=w*R-S*C,L={x:I,y:O,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(w!=0||S!=0){const H=Math.sqrt(w*w+S*S);L.rotation=S>0?Math.acos(w/H):-Math.acos(w/H),L.scaleX=H,L.scaleY=M/H,L.skewX=(w*C+S*R)/M,L.skewY=0}else if(C!=0||R!=0){const H=Math.sqrt(C*C+R*R);L.rotation=Math.PI/2-(R>0?Math.acos(-C/H):-Math.acos(C/H)),L.scaleX=M/H,L.scaleY=H,L.skewX=0,L.skewY=(w*C+S*R)/M}return L.rotation=e.Util._getRotation(L.rotation),L}}e.Transform=n;const r="[object Array]",i="[object Number]",s="[object String]",o="[object Boolean]",a=Math.PI/180,u=180/Math.PI,l="#",c="",f="0",d="Konva warning: ",h="Konva error: ",p="rgb(",m={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},g=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let b=[];const y=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(x){setTimeout(x,60)};e.Util={_isElement(x){return!!(x&&x.nodeType==1)},_isFunction(x){return!!(x&&x.constructor&&x.call&&x.apply)},_isPlainObject(x){return!!x&&x.constructor===Object},_isArray(x){return Object.prototype.toString.call(x)===r},_isNumber(x){return Object.prototype.toString.call(x)===i&&!isNaN(x)&&isFinite(x)},_isString(x){return Object.prototype.toString.call(x)===s},_isBoolean(x){return Object.prototype.toString.call(x)===o},isObject(x){return x instanceof Object},isValidSelector(x){if(typeof x!="string")return!1;const w=x[0];return w==="#"||w==="."||w===w.toUpperCase()},_sign(x){return x===0||x>0?1:-1},requestAnimFrame(x){b.push(x),b.length===1&&y(function(){const w=b;b=[],w.forEach(function(S){S()})})},createCanvasElement(){const x=document.createElement("canvas");try{x.style=x.style||{}}catch{}return x},createImageElement(){return document.createElement("img")},_isInDocument(x){for(;x=x.parentNode;)if(x==document)return!0;return!1},_urlToImage(x,w){const S=e.Util.createImageElement();S.onload=function(){w(S)},S.src=x},_rgbToHex(x,w,S){return((1<<24)+(x<<16)+(w<<8)+S).toString(16).slice(1)},_hexToRgb(x){x=x.replace(l,c);const w=parseInt(x,16);return{r:w>>16&255,g:w>>8&255,b:w&255}},getRandomColor(){let x=(Math.random()*16777215<<0).toString(16);for(;x.length<6;)x=f+x;return l+x},getRGB(x){let w;return x in m?(w=m[x],{r:w[0],g:w[1],b:w[2]}):x[0]===l?this._hexToRgb(x.substring(1)):x.substr(0,4)===p?(w=g.exec(x.replace(/ /g,"")),{r:parseInt(w[1],10),g:parseInt(w[2],10),b:parseInt(w[3],10)}):{r:0,g:0,b:0}},colorToRGBA(x){return x=x||"black",e.Util._namedColorToRBA(x)||e.Util._hex3ColorToRGBA(x)||e.Util._hex4ColorToRGBA(x)||e.Util._hex6ColorToRGBA(x)||e.Util._hex8ColorToRGBA(x)||e.Util._rgbColorToRGBA(x)||e.Util._rgbaColorToRGBA(x)||e.Util._hslColorToRGBA(x)},_namedColorToRBA(x){const w=m[x.toLowerCase()];return w?{r:w[0],g:w[1],b:w[2],a:1}:null},_rgbColorToRGBA(x){if(x.indexOf("rgb(")===0){x=x.match(/rgb\(([^)]+)\)/)[1];const w=x.split(/ *, */).map(Number);return{r:w[0],g:w[1],b:w[2],a:1}}},_rgbaColorToRGBA(x){if(x.indexOf("rgba(")===0){x=x.match(/rgba\(([^)]+)\)/)[1];const w=x.split(/ *, */).map((S,C)=>S.slice(-1)==="%"?C===3?parseInt(S)/100:parseInt(S)/100*255:Number(S));return{r:w[0],g:w[1],b:w[2],a:w[3]}}},_hex8ColorToRGBA(x){if(x[0]==="#"&&x.length===9)return{r:parseInt(x.slice(1,3),16),g:parseInt(x.slice(3,5),16),b:parseInt(x.slice(5,7),16),a:parseInt(x.slice(7,9),16)/255}},_hex6ColorToRGBA(x){if(x[0]==="#"&&x.length===7)return{r:parseInt(x.slice(1,3),16),g:parseInt(x.slice(3,5),16),b:parseInt(x.slice(5,7),16),a:1}},_hex4ColorToRGBA(x){if(x[0]==="#"&&x.length===5)return{r:parseInt(x[1]+x[1],16),g:parseInt(x[2]+x[2],16),b:parseInt(x[3]+x[3],16),a:parseInt(x[4]+x[4],16)/255}},_hex3ColorToRGBA(x){if(x[0]==="#"&&x.length===4)return{r:parseInt(x[1]+x[1],16),g:parseInt(x[2]+x[2],16),b:parseInt(x[3]+x[3],16),a:1}},_hslColorToRGBA(x){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(x)){const[w,...S]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(x),C=Number(S[0])/360,R=Number(S[1])/100,I=Number(S[2])/100;let O,M,L;if(R===0)return L=I*255,{r:Math.round(L),g:Math.round(L),b:Math.round(L),a:1};I<.5?O=I*(1+R):O=I+R-I*R;const H=2*I-O,D=[0,0,0];for(let B=0;B<3;B++)M=C+1/3*-(B-1),M<0&&M++,M>1&&M--,6*M<1?L=H+(O-H)*6*M:2*M<1?L=O:3*M<2?L=H+(O-H)*(2/3-M)*6:L=H,D[B]=L*255;return{r:Math.round(D[0]),g:Math.round(D[1]),b:Math.round(D[2]),a:1}}},haveIntersection(x,w){return!(w.x>x.x+x.width||w.x+w.width<x.x||w.y>x.y+x.height||w.y+w.height<x.y)},cloneObject(x){const w={};for(const S in x)this._isPlainObject(x[S])?w[S]=this.cloneObject(x[S]):this._isArray(x[S])?w[S]=this.cloneArray(x[S]):w[S]=x[S];return w},cloneArray(x){return x.slice(0)},degToRad(x){return x*a},radToDeg(x){return x*u},_degToRad(x){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(x)},_radToDeg(x){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(x)},_getRotation(x){return t.Konva.angleDeg?e.Util.radToDeg(x):x},_capitalize(x){return x.charAt(0).toUpperCase()+x.slice(1)},throw(x){throw new Error(h+x)},error(x){console.error(h+x)},warn(x){t.Konva.showWarnings&&console.warn(d+x)},each(x,w){for(const S in x)w(S,x[S])},_inRange(x,w,S){return w<=x&&x<S},_getProjectionToSegment(x,w,S,C,R,I){let O,M,L;const H=(x-S)*(x-S)+(w-C)*(w-C);if(H==0)O=x,M=w,L=(R-S)*(R-S)+(I-C)*(I-C);else{const D=((R-x)*(S-x)+(I-w)*(C-w))/H;D<0?(O=x,M=w,L=(x-R)*(x-R)+(w-I)*(w-I)):D>1?(O=S,M=C,L=(S-R)*(S-R)+(C-I)*(C-I)):(O=x+D*(S-x),M=w+D*(C-w),L=(O-R)*(O-R)+(M-I)*(M-I))}return[O,M,L]},_getProjectionToLine(x,w,S){const C=e.Util.cloneObject(x);let R=Number.MAX_VALUE;return w.forEach(function(I,O){if(!S&&O===w.length-1)return;const M=w[(O+1)%w.length],L=e.Util._getProjectionToSegment(I.x,I.y,M.x,M.y,x.x,x.y),H=L[0],D=L[1],B=L[2];B<R&&(C.x=H,C.y=D,R=B)}),C},_prepareArrayForTween(x,w,S){const C=[],R=[];if(x.length>w.length){const O=w;w=x,x=O}for(let O=0;O<x.length;O+=2)C.push({x:x[O],y:x[O+1]});for(let O=0;O<w.length;O+=2)R.push({x:w[O],y:w[O+1]});const I=[];return R.forEach(function(O){const M=e.Util._getProjectionToLine(O,C,S);I.push(M.x),I.push(M.y)}),I},_prepareToStringify(x){let w;x.visitedByCircularReferenceRemoval=!0;for(const S in x)if(x.hasOwnProperty(S)&&x[S]&&typeof x[S]=="object"){if(w=Object.getOwnPropertyDescriptor(x,S),x[S].visitedByCircularReferenceRemoval||e.Util._isElement(x[S]))if(w.configurable)delete x[S];else return null;else if(e.Util._prepareToStringify(x[S])===null)if(w.configurable)delete x[S];else return null}return delete x.visitedByCircularReferenceRemoval,x},_assign(x,w){for(const S in w)x[S]=w[S];return x},_getFirstPointerId(x){return x.touches?x.changedTouches[0].identifier:x.pointerId||999},releaseCanvas(...x){t.Konva.releaseCanvasOnDestroy&&x.forEach(w=>{w.width=0,w.height=0})},drawRoundedRectPath(x,w,S,C){let R=0,I=0,O=0,M=0;typeof C=="number"?R=I=O=M=Math.min(C,w/2,S/2):(R=Math.min(C[0]||0,w/2,S/2),I=Math.min(C[1]||0,w/2,S/2),M=Math.min(C[2]||0,w/2,S/2),O=Math.min(C[3]||0,w/2,S/2)),x.moveTo(R,0),x.lineTo(w-I,0),x.arc(w-I,I,I,Math.PI*3/2,0,!1),x.lineTo(w,S-M),x.arc(w-M,S-M,M,0,Math.PI/2,!1),x.lineTo(O,S),x.arc(O,S-O,O,Math.PI/2,Math.PI,!1),x.lineTo(0,R),x.arc(R,R,R,Math.PI,Math.PI*3/2,!1)}}}(iB)),iB}var fA={},sB={},Uf={},jue;function Zr(){if(jue)return Uf;jue=1,Object.defineProperty(Uf,"__esModule",{value:!0}),Uf.RGBComponent=r,Uf.alphaComponent=i,Uf.getNumberValidator=s,Uf.getNumberOrArrayOfNumbersValidator=o,Uf.getNumberOrAutoValidator=a,Uf.getStringValidator=u,Uf.getStringOrGradientValidator=l,Uf.getFunctionValidator=c,Uf.getNumberArrayValidator=f,Uf.getBooleanValidator=d,Uf.getComponentValidator=h;const e=Vr(),t=Xo();function n(p){return t.Util._isString(p)?'"'+p+'"':Object.prototype.toString.call(p)==="[object Number]"||t.Util._isBoolean(p)?p:Object.prototype.toString.call(p)}function r(p){return p>255?255:p<0?0:Math.round(p)}function i(p){return p>1?1:p<1e-4?1e-4:p}function s(){if(e.Konva.isUnminified)return function(p,m){return t.Util._isNumber(p)||t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a number.'),p}}function o(p){if(e.Konva.isUnminified)return function(m,g){let b=t.Util._isNumber(m),y=t.Util._isArray(m)&&m.length==p;return!b&&!y&&t.Util.warn(n(m)+' is a not valid value for "'+g+'" attribute. The value should be a number or Array<number>('+p+")"),m}}function a(){if(e.Konva.isUnminified)return function(p,m){var g=t.Util._isNumber(p),b=p==="auto";return g||b||t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a number or "auto".'),p}}function u(){if(e.Konva.isUnminified)return function(p,m){return t.Util._isString(p)||t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a string.'),p}}function l(){if(e.Konva.isUnminified)return function(p,m){const g=t.Util._isString(p),b=Object.prototype.toString.call(p)==="[object CanvasGradient]"||p&&p.addColorStop;return g||b||t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a string or a native gradient.'),p}}function c(){if(e.Konva.isUnminified)return function(p,m){return t.Util._isFunction(p)||t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a function.'),p}}function f(){if(e.Konva.isUnminified)return function(p,m){const g=Int8Array?Object.getPrototypeOf(Int8Array):null;return g&&p instanceof g||(t.Util._isArray(p)?p.forEach(function(b){t.Util._isNumber(b)||t.Util.warn('"'+m+'" attribute has non numeric element '+b+". Make sure that all elements are numbers.")}):t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a array of numbers.')),p}}function d(){if(e.Konva.isUnminified)return function(p,m){var g=p===!0||p===!1;return g||t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a boolean.'),p}}function h(p){if(e.Konva.isUnminified)return function(m,g){return m==null||t.Util.isObject(m)||t.Util.warn(n(m)+' is a not valid value for "'+g+'" attribute. The value should be an object with properties '+p),m}}return Uf}var Uue;function Yr(){return Uue||(Uue=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=Xo(),n=Zr(),r="get",i="set";e.Factory={addGetterSetter(s,o,a,u,l){e.Factory.addGetter(s,o,a),e.Factory.addSetter(s,o,u,l),e.Factory.addOverloadedGetterSetter(s,o)},addGetter(s,o,a){var u=r+t.Util._capitalize(o);s.prototype[u]=s.prototype[u]||function(){const l=this.attrs[o];return l===void 0?a:l}},addSetter(s,o,a,u){var l=i+t.Util._capitalize(o);s.prototype[l]||e.Factory.overWriteSetter(s,o,a,u)},overWriteSetter(s,o,a,u){var l=i+t.Util._capitalize(o);s.prototype[l]=function(c){return a&&c!==void 0&&c!==null&&(c=a.call(this,c,o)),this._setAttr(o,c),u&&u.call(this),this}},addComponentsGetterSetter(s,o,a,u,l){const c=a.length,f=t.Util._capitalize,d=r+f(o),h=i+f(o);s.prototype[d]=function(){const m={};for(let g=0;g<c;g++){const b=a[g];m[b]=this.getAttr(o+f(b))}return m};const p=(0,n.getComponentValidator)(a);s.prototype[h]=function(m){const g=this.attrs[o];u&&(m=u.call(this,m,o)),p&&p.call(this,m,o);for(const b in m)m.hasOwnProperty(b)&&this._setAttr(o+f(b),m[b]);return m||a.forEach(b=>{this._setAttr(o+f(b),void 0)}),this._fireChangeEvent(o,g,m),l&&l.call(this),this},e.Factory.addOverloadedGetterSetter(s,o)},addOverloadedGetterSetter(s,o){var a=t.Util._capitalize(o),u=i+a,l=r+a;s.prototype[o]=function(){return arguments.length?(this[u](arguments[0]),this):this[l]()}},addDeprecatedGetterSetter(s,o,a,u){t.Util.error("Adding deprecated "+o);const l=r+t.Util._capitalize(o),c=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[l]=function(){t.Util.error(c);const f=this.attrs[o];return f===void 0?a:f},e.Factory.addSetter(s,o,u,function(){t.Util.error(c)}),e.Factory.addOverloadedGetterSetter(s,o)},backCompat(s,o){t.Util.each(o,function(a,u){const l=s.prototype[u],c=r+t.Util._capitalize(a),f=i+t.Util._capitalize(a);function d(){l.apply(this,arguments),t.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+u+'" instead.')}s.prototype[a]=d,s.prototype[c]=d,s.prototype[f]=d})},afterSetFilter(){this._filterUpToDate=!1}}}(sB)),sB}var vy={},by={},zue;function vSe(){if(zue)return by;zue=1,Object.defineProperty(by,"__esModule",{value:!0}),by.HitContext=by.SceneContext=by.Context=void 0;const e=Xo(),t=Vr();function n(b){const y=[],x=b.length,w=e.Util;for(let S=0;S<x;S++){let C=b[S];w._isNumber(C)?C=Math.round(C*1e3)/1e3:w._isString(C)||(C=C+""),y.push(C)}return y}const r=",",i="(",s=")",o="([",a="])",u=";",l="()",c="=",f=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],d=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],h=100;class p{constructor(y){this.canvas=y,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(y){y.fillEnabled()&&this._fill(y)}_fill(y){}strokeShape(y){y.hasStroke()&&this._stroke(y)}_stroke(y){}fillStrokeShape(y){y.attrs.fillAfterStrokeEnabled?(this.strokeShape(y),this.fillShape(y)):(this.fillShape(y),this.strokeShape(y))}getTrace(y,x){let w=this.traceArr,S=w.length,C="",R,I,O,M;for(R=0;R<S;R++)I=w[R],O=I.method,O?(M=I.args,C+=O,y?C+=l:e.Util._isArray(M[0])?C+=o+M.join(r)+a:(x&&(M=M.map(L=>typeof L=="number"?Math.floor(L):L)),C+=i+M.join(r)+s)):(C+=I.property,y||(C+=c+I.val)),C+=u;return C}clearTrace(){this.traceArr=[]}_trace(y){let x=this.traceArr,w;x.push(y),w=x.length,w>=h&&x.shift()}reset(){const y=this.getCanvas().getPixelRatio();this.setTransform(1*y,0,0,1*y,0,0)}getCanvas(){return this.canvas}clear(y){const x=this.getCanvas();y?this.clearRect(y.x||0,y.y||0,y.width||0,y.height||0):this.clearRect(0,0,x.getWidth()/x.pixelRatio,x.getHeight()/x.pixelRatio)}_applyLineCap(y){const x=y.attrs.lineCap;x&&this.setAttr("lineCap",x)}_applyOpacity(y){const x=y.getAbsoluteOpacity();x!==1&&this.setAttr("globalAlpha",x)}_applyLineJoin(y){const x=y.attrs.lineJoin;x&&this.setAttr("lineJoin",x)}setAttr(y,x){this._context[y]=x}arc(y,x,w,S,C,R){this._context.arc(y,x,w,S,C,R)}arcTo(y,x,w,S,C){this._context.arcTo(y,x,w,S,C)}beginPath(){this._context.beginPath()}bezierCurveTo(y,x,w,S,C,R){this._context.bezierCurveTo(y,x,w,S,C,R)}clearRect(y,x,w,S){this._context.clearRect(y,x,w,S)}clip(...y){this._context.clip.apply(this._context,y)}closePath(){this._context.closePath()}createImageData(y,x){const w=arguments;if(w.length===2)return this._context.createImageData(y,x);if(w.length===1)return this._context.createImageData(y)}createLinearGradient(y,x,w,S){return this._context.createLinearGradient(y,x,w,S)}createPattern(y,x){return this._context.createPattern(y,x)}createRadialGradient(y,x,w,S,C,R){return this._context.createRadialGradient(y,x,w,S,C,R)}drawImage(y,x,w,S,C,R,I,O,M){const L=arguments,H=this._context;L.length===3?H.drawImage(y,x,w):L.length===5?H.drawImage(y,x,w,S,C):L.length===9&&H.drawImage(y,x,w,S,C,R,I,O,M)}ellipse(y,x,w,S,C,R,I,O){this._context.ellipse(y,x,w,S,C,R,I,O)}isPointInPath(y,x,w,S){return w?this._context.isPointInPath(w,y,x,S):this._context.isPointInPath(y,x,S)}fill(...y){this._context.fill.apply(this._context,y)}fillRect(y,x,w,S){this._context.fillRect(y,x,w,S)}strokeRect(y,x,w,S){this._context.strokeRect(y,x,w,S)}fillText(y,x,w,S){S?this._context.fillText(y,x,w,S):this._context.fillText(y,x,w)}measureText(y){return this._context.measureText(y)}getImageData(y,x,w,S){return this._context.getImageData(y,x,w,S)}lineTo(y,x){this._context.lineTo(y,x)}moveTo(y,x){this._context.moveTo(y,x)}rect(y,x,w,S){this._context.rect(y,x,w,S)}roundRect(y,x,w,S,C){this._context.roundRect(y,x,w,S,C)}putImageData(y,x,w){this._context.putImageData(y,x,w)}quadraticCurveTo(y,x,w,S){this._context.quadraticCurveTo(y,x,w,S)}restore(){this._context.restore()}rotate(y){this._context.rotate(y)}save(){this._context.save()}scale(y,x){this._context.scale(y,x)}setLineDash(y){this._context.setLineDash?this._context.setLineDash(y):"mozDash"in this._context?this._context.mozDash=y:"webkitLineDash"in this._context&&(this._context.webkitLineDash=y)}getLineDash(){return this._context.getLineDash()}setTransform(y,x,w,S,C,R){this._context.setTransform(y,x,w,S,C,R)}stroke(y){y?this._context.stroke(y):this._context.stroke()}strokeText(y,x,w,S){this._context.strokeText(y,x,w,S)}transform(y,x,w,S,C,R){this._context.transform(y,x,w,S,C,R)}translate(y,x){this._context.translate(y,x)}_enableTrace(){let y=this,x=f.length,w=this.setAttr,S,C;const R=function(I){let O=y[I],M;y[I]=function(){return C=n(Array.prototype.slice.call(arguments,0)),M=O.apply(y,arguments),y._trace({method:I,args:C}),M}};for(S=0;S<x;S++)R(f[S]);y.setAttr=function(){w.apply(y,arguments);const I=arguments[0];let O=arguments[1];(I==="shadowOffsetX"||I==="shadowOffsetY"||I==="shadowBlur")&&(O=O/this.canvas.getPixelRatio()),y._trace({property:I,val:O})}}_applyGlobalCompositeOperation(y){const x=y.attrs.globalCompositeOperation;!x||x==="source-over"||this.setAttr("globalCompositeOperation",x)}}by.Context=p,d.forEach(function(b){Object.defineProperty(p.prototype,b,{get(){return this._context[b]},set(y){this._context[b]=y}})});class m extends p{constructor(y,{willReadFrequently:x=!1}={}){super(y),this._context=y._canvas.getContext("2d",{willReadFrequently:x})}_fillColor(y){const x=y.fill();this.setAttr("fillStyle",x),y._fillFunc(this)}_fillPattern(y){this.setAttr("fillStyle",y._getFillPattern()),y._fillFunc(this)}_fillLinearGradient(y){const x=y._getLinearGradient();x&&(this.setAttr("fillStyle",x),y._fillFunc(this))}_fillRadialGradient(y){const x=y._getRadialGradient();x&&(this.setAttr("fillStyle",x),y._fillFunc(this))}_fill(y){const x=y.fill(),w=y.getFillPriority();if(x&&w==="color"){this._fillColor(y);return}const S=y.getFillPatternImage();if(S&&w==="pattern"){this._fillPattern(y);return}const C=y.getFillLinearGradientColorStops();if(C&&w==="linear-gradient"){this._fillLinearGradient(y);return}const R=y.getFillRadialGradientColorStops();if(R&&w==="radial-gradient"){this._fillRadialGradient(y);return}x?this._fillColor(y):S?this._fillPattern(y):C?this._fillLinearGradient(y):R&&this._fillRadialGradient(y)}_strokeLinearGradient(y){const x=y.getStrokeLinearGradientStartPoint(),w=y.getStrokeLinearGradientEndPoint(),S=y.getStrokeLinearGradientColorStops(),C=this.createLinearGradient(x.x,x.y,w.x,w.y);if(S){for(let R=0;R<S.length;R+=2)C.addColorStop(S[R],S[R+1]);this.setAttr("strokeStyle",C)}}_stroke(y){const x=y.dash(),w=y.getStrokeScaleEnabled();if(y.hasStroke()){if(!w){this.save();const C=this.getCanvas().getPixelRatio();this.setTransform(C,0,0,C,0,0)}this._applyLineCap(y),x&&y.dashEnabled()&&(this.setLineDash(x),this.setAttr("lineDashOffset",y.dashOffset())),this.setAttr("lineWidth",y.strokeWidth()),y.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),y.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(y):this.setAttr("strokeStyle",y.stroke()),y._strokeFunc(this),w||this.restore()}}_applyShadow(y){var x,w,S;const C=(x=y.getShadowRGBA())!==null&&x!==void 0?x:"black",R=(w=y.getShadowBlur())!==null&&w!==void 0?w:5,I=(S=y.getShadowOffset())!==null&&S!==void 0?S:{x:0,y:0},O=y.getAbsoluteScale(),M=this.canvas.getPixelRatio(),L=O.x*M,H=O.y*M;this.setAttr("shadowColor",C),this.setAttr("shadowBlur",R*Math.min(Math.abs(L),Math.abs(H))),this.setAttr("shadowOffsetX",I.x*L),this.setAttr("shadowOffsetY",I.y*H)}}by.SceneContext=m;class g extends p{constructor(y){super(y),this._context=y._canvas.getContext("2d",{willReadFrequently:!0})}_fill(y){this.save(),this.setAttr("fillStyle",y.colorKey),y._fillFuncHit(this),this.restore()}strokeShape(y){y.hasHitStroke()&&this._stroke(y)}_stroke(y){if(y.hasHitStroke()){const x=y.getStrokeScaleEnabled();if(!x){this.save();const C=this.getCanvas().getPixelRatio();this.setTransform(C,0,0,C,0,0)}this._applyLineCap(y);const w=y.hitStrokeWidth(),S=w==="auto"?y.strokeWidth():w;this.setAttr("lineWidth",S),this.setAttr("strokeStyle",y.colorKey),y._strokeFuncHit(this),x||this.restore()}}}return by.HitContext=g,by}var Vue;function TM(){if(Vue)return vy;Vue=1,Object.defineProperty(vy,"__esModule",{value:!0}),vy.HitCanvas=vy.SceneCanvas=vy.Canvas=void 0;const e=Xo(),t=vSe(),n=Vr(),r=Yr(),i=Zr();let s;function o(){if(s)return s;const c=e.Util.createCanvasElement(),f=c.getContext("2d");return s=function(){const d=n.Konva._global.devicePixelRatio||1,h=f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1;return d/h}(),e.Util.releaseCanvas(c),s}class a{constructor(f){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const h=(f||{}).pixelRatio||n.Konva.pixelRatio||o();this.pixelRatio=h,this._canvas=e.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(f){const d=this.pixelRatio;this.pixelRatio=f,this.setSize(this.getWidth()/d,this.getHeight()/d)}setWidth(f){this.width=this._canvas.width=f*this.pixelRatio,this._canvas.style.width=f+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}setHeight(f){this.height=this._canvas.height=f*this.pixelRatio,this._canvas.style.height=f+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}getWidth(){return this.width}getHeight(){return this.height}setSize(f,d){this.setWidth(f||0),this.setHeight(d||0)}toDataURL(f,d){try{return this._canvas.toDataURL(f,d)}catch{try{return this._canvas.toDataURL()}catch(p){return e.Util.error("Unable to get data URL. "+p.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}vy.Canvas=a,r.Factory.addGetterSetter(a,"pixelRatio",void 0,(0,i.getNumberValidator)());class u extends a{constructor(f={width:0,height:0,willReadFrequently:!1}){super(f),this.context=new t.SceneContext(this,{willReadFrequently:f.willReadFrequently}),this.setSize(f.width,f.height)}}vy.SceneCanvas=u;class l extends a{constructor(f={width:0,height:0}){super(f),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(f.width,f.height)}}return vy.HitCanvas=l,vy}var oB={},Hue;function BK(){return Hue||(Hue=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=Vr(),n=Xo();e.DD={get isDragging(){let r=!1;return e.DD._dragElements.forEach(i=>{i.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return e.DD._dragElements.forEach(i=>{r=i.node}),r},_dragElements:new Map,_drag(r){const i=[];e.DD._dragElements.forEach((s,o)=>{const{node:a}=s,u=a.getStage();u.setPointersPositions(r),s.pointerId===void 0&&(s.pointerId=n.Util._getFirstPointerId(r));const l=u._changedPointerPositions.find(c=>c.id===s.pointerId);if(l){if(s.dragStatus!=="dragging"){const c=a.dragDistance();if(Math.max(Math.abs(l.x-s.startPointerPos.x),Math.abs(l.y-s.startPointerPos.y))<c||(a.startDrag({evt:r}),!a.isDragging()))return}a._setDragPosition(r,s),i.push(a)}}),i.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:r},!0)})},_endDragBefore(r){const i=[];e.DD._dragElements.forEach(s=>{const{node:o}=s,a=o.getStage();if(r&&a.setPointersPositions(r),!a._changedPointerPositions.find(c=>c.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,s.dragStatus="stopped");const l=s.node.getLayer()||s.node instanceof t.Konva.Stage&&s.node;l&&i.indexOf(l)===-1&&i.push(l)}),i.forEach(s=>{s.draw()})},_endDragAfter(r){e.DD._dragElements.forEach((i,s)=>{i.dragStatus==="stopped"&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:r},!0),i.dragStatus!=="dragging"&&e.DD._dragElements.delete(s)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))}(oB)),oB}var que;function _a(){if(que)return fA;que=1,Object.defineProperty(fA,"__esModule",{value:!0}),fA.Node=void 0;const e=Xo(),t=Yr(),n=TM(),r=Vr(),i=BK(),s=Zr(),o="absoluteOpacity",a="allEventListeners",u="absoluteTransform",l="absoluteScale",c="canvas",f="Change",d="children",h="konva",p="listening",m="mouseenter",g="mouseleave",b="set",y="Shape",x=" ",w="stage",S="transform",C="Stage",R="visible",I=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(x);let O=1;class M{constructor(D){this._id=O++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(D),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(D){(D===S||D===u)&&this._cache.get(D)?this._cache.get(D).dirty=!0:D?this._cache.delete(D):this._cache.clear()}_getCache(D,B){let z=this._cache.get(D);return(z===void 0||(D===S||D===u)&&z.dirty===!0)&&(z=B.call(this),this._cache.set(D,z)),z}_calculate(D,B,z){if(!this._attachedDepsListeners.get(D)){const G=B.map(Z=>Z+"Change.konva").join(x);this.on(G,()=>{this._clearCache(D)}),this._attachedDepsListeners.set(D,!0)}return this._getCache(D,z)}_getCanvasCache(){return this._cache.get(c)}_clearSelfAndDescendantCache(D){this._clearCache(D),D===u&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(c)){const{scene:D,filter:B,hit:z}=this._cache.get(c);e.Util.releaseCanvas(D,B,z),this._cache.delete(c)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(D){const B=D||{};let z={};(B.x===void 0||B.y===void 0||B.width===void 0||B.height===void 0)&&(z=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let G=Math.ceil(B.width||z.width),Z=Math.ceil(B.height||z.height),ne=B.pixelRatio,ue=B.x===void 0?Math.floor(z.x):B.x,X=B.y===void 0?Math.floor(z.y):B.y,q=B.offset||0,te=B.drawBorder||!1,W=B.hitCanvasPixelRatio||1;if(!G||!Z){e.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const ee=Math.abs(Math.round(z.x)-ue)>.5?1:0,oe=Math.abs(Math.round(z.y)-X)>.5?1:0;G+=q*2+ee,Z+=q*2+oe,ue-=q,X-=q;const pe=new n.SceneCanvas({pixelRatio:ne,width:G,height:Z}),ce=new n.SceneCanvas({pixelRatio:ne,width:0,height:0,willReadFrequently:!0}),he=new n.HitCanvas({pixelRatio:W,width:G,height:Z}),Ee=pe.getContext(),Ae=he.getContext();return he.isCache=!0,pe.isCache=!0,this._cache.delete(c),this._filterUpToDate=!1,B.imageSmoothingEnabled===!1&&(pe.getContext()._context.imageSmoothingEnabled=!1,ce.getContext()._context.imageSmoothingEnabled=!1),Ee.save(),Ae.save(),Ee.translate(-ue,-X),Ae.translate(-ue,-X),this._isUnderCache=!0,this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(l),this.drawScene(pe,this),this.drawHit(he,this),this._isUnderCache=!1,Ee.restore(),Ae.restore(),te&&(Ee.save(),Ee.beginPath(),Ee.rect(0,0,G,Z),Ee.closePath(),Ee.setAttr("strokeStyle","red"),Ee.setAttr("lineWidth",5),Ee.stroke(),Ee.restore()),this._cache.set(c,{scene:pe,filter:ce,hit:he,x:ue,y:X}),this._requestDraw(),this}isCached(){return this._cache.has(c)}getClientRect(D){throw new Error('abstract "getClientRect" method call')}_transformedRect(D,B){const z=[{x:D.x,y:D.y},{x:D.x+D.width,y:D.y},{x:D.x+D.width,y:D.y+D.height},{x:D.x,y:D.y+D.height}];let G=1/0,Z=1/0,ne=-1/0,ue=-1/0;const X=this.getAbsoluteTransform(B);return z.forEach(function(q){const te=X.point(q);G===void 0&&(G=ne=te.x,Z=ue=te.y),G=Math.min(G,te.x),Z=Math.min(Z,te.y),ne=Math.max(ne,te.x),ue=Math.max(ue,te.y)}),{x:G,y:Z,width:ne-G,height:ue-Z}}_drawCachedSceneCanvas(D){D.save(),D._applyOpacity(this),D._applyGlobalCompositeOperation(this);const B=this._getCanvasCache();D.translate(B.x,B.y);const z=this._getCachedSceneCanvas(),G=z.pixelRatio;D.drawImage(z._canvas,0,0,z.width/G,z.height/G),D.restore()}_drawCachedHitCanvas(D){const B=this._getCanvasCache(),z=B.hit;D.save(),D.translate(B.x,B.y),D.drawImage(z._canvas,0,0,z.width/z.pixelRatio,z.height/z.pixelRatio),D.restore()}_getCachedSceneCanvas(){let D=this.filters(),B=this._getCanvasCache(),z=B.scene,G=B.filter,Z=G.getContext(),ne,ue,X,q;if(D){if(!this._filterUpToDate){const te=z.pixelRatio;G.setSize(z.width/z.pixelRatio,z.height/z.pixelRatio);try{for(ne=D.length,Z.clear(),Z.drawImage(z._canvas,0,0,z.getWidth()/te,z.getHeight()/te),ue=Z.getImageData(0,0,G.getWidth(),G.getHeight()),X=0;X<ne;X++){if(q=D[X],typeof q!="function"){e.Util.error("Filter should be type of function, but got "+typeof q+" instead. Please check correct filters");continue}q.call(this,ue),Z.putImageData(ue,0,0)}}catch(W){e.Util.error("Unable to apply filter. "+W.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return G}return z}on(D,B){if(this._cache&&this._cache.delete(a),arguments.length===3)return this._delegate.apply(this,arguments);let z=D.split(x),G=z.length,Z,ne,ue,X,q;for(Z=0;Z<G;Z++)ne=z[Z],ue=ne.split("."),X=ue[0],q=ue[1]||"",this.eventListeners[X]||(this.eventListeners[X]=[]),this.eventListeners[X].push({name:q,handler:B});return this}off(D,B){let z=(D||"").split(x),G=z.length,Z,ne,ue,X,q,te;if(this._cache&&this._cache.delete(a),!D)for(ne in this.eventListeners)this._off(ne);for(Z=0;Z<G;Z++)if(ue=z[Z],X=ue.split("."),q=X[0],te=X[1],q)this.eventListeners[q]&&this._off(q,te,B);else for(ne in this.eventListeners)this._off(ne,te,B);return this}dispatchEvent(D){const B={target:this,type:D.type,evt:D};return this.fire(D.type,B),this}addEventListener(D,B){return this.on(D,function(z){B.call(this,z.evt)}),this}removeEventListener(D){return this.off(D),this}_delegate(D,B,z){const G=this;this.on(D,function(Z){const ne=Z.target.findAncestors(B,!0,G);for(let ue=0;ue<ne.length;ue++)Z=e.Util.cloneObject(Z),Z.currentTarget=ne[ue],z.call(ne[ue],Z)})}remove(){return this.isDragging()&&this.stopDrag(),i.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(w),this._clearSelfAndDescendantCache(R),this._clearSelfAndDescendantCache(p)}_remove(){this._clearCaches();const D=this.getParent();D&&D.children&&(D.children.splice(this.index,1),D._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(D){const B="get"+e.Util._capitalize(D);return e.Util._isFunction(this[B])?this[B]():this.attrs[D]}getAncestors(){let D=this.getParent(),B=[];for(;D;)B.push(D),D=D.getParent();return B}getAttrs(){return this.attrs||{}}setAttrs(D){return this._batchTransformChanges(()=>{let B,z;if(!D)return this;for(B in D)B!==d&&(z=b+e.Util._capitalize(B),e.Util._isFunction(this[z])?this[z](D[B]):this._setAttr(B,D[B]))}),this}isListening(){return this._getCache(p,this._isListening)}_isListening(D){if(!this.listening())return!1;const z=this.getParent();return z&&z!==D&&this!==D?z._isListening(D):!0}isVisible(){return this._getCache(R,this._isVisible)}_isVisible(D){if(!this.visible())return!1;const z=this.getParent();return z&&z!==D&&this!==D?z._isVisible(D):!0}shouldDrawHit(D,B=!1){if(D)return this._isVisible(D)&&this._isListening(D);const z=this.getLayer();let G=!1;i.DD._dragElements.forEach(ne=>{ne.dragStatus==="dragging"&&(ne.node.nodeType==="Stage"||ne.node.getLayer()===z)&&(G=!0)});const Z=!B&&!r.Konva.hitOnDragEnabled&&(G||r.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!Z}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let D=this.getDepth(),B=this,z=0,G,Z,ne,ue;function X(te){for(G=[],Z=te.length,ne=0;ne<Z;ne++)ue=te[ne],z++,ue.nodeType!==y&&(G=G.concat(ue.getChildren().slice())),ue._id===B._id&&(ne=Z);G.length>0&&G[0].getDepth()<=D&&X(G)}const q=this.getStage();return B.nodeType!==C&&q&&X(q.getChildren()),z}getDepth(){let D=0,B=this.parent;for(;B;)D++,B=B.parent;return D}_batchTransformChanges(D){this._batchingTransformChange=!0,D(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(S),this._clearSelfAndDescendantCache(u)),this._needClearTransformCache=!1}setPosition(D){return this._batchTransformChanges(()=>{this.x(D.x),this.y(D.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const D=this.getStage();if(!D)return null;const B=D.getPointerPosition();if(!B)return null;const z=this.getAbsoluteTransform().copy();return z.invert(),z.point(B)}getAbsolutePosition(D){let B=!1,z=this.parent;for(;z;){if(z.isCached()){B=!0;break}z=z.parent}B&&!D&&(D=!0);const G=this.getAbsoluteTransform(D).getMatrix(),Z=new e.Transform,ne=this.offset();return Z.m=G.slice(),Z.translate(ne.x,ne.y),Z.getTranslation()}setAbsolutePosition(D){const{x:B,y:z,...G}=this._clearTransform();this.attrs.x=B,this.attrs.y=z,this._clearCache(S);const Z=this._getAbsoluteTransform().copy();return Z.invert(),Z.translate(D.x,D.y),D={x:this.attrs.x+Z.getTranslation().x,y:this.attrs.y+Z.getTranslation().y},this._setTransform(G),this.setPosition({x:D.x,y:D.y}),this._clearCache(S),this._clearSelfAndDescendantCache(u),this}_setTransform(D){let B;for(B in D)this.attrs[B]=D[B]}_clearTransform(){const D={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,D}move(D){let B=D.x,z=D.y,G=this.x(),Z=this.y();return B!==void 0&&(G+=B),z!==void 0&&(Z+=z),this.setPosition({x:G,y:Z}),this}_eachAncestorReverse(D,B){let z=[],G=this.getParent(),Z,ne;if(!(B&&B._id===this._id)){for(z.unshift(this);G&&(!B||G._id!==B._id);)z.unshift(G),G=G.parent;for(Z=z.length,ne=0;ne<Z;ne++)D(z[ne])}}rotate(D){return this.rotation(this.rotation()+D),this}moveToTop(){if(!this.parent)return e.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const D=this.index,B=this.parent.getChildren().length;return D<B-1?(this.parent.children.splice(D,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return e.Util.warn("Node has no parent. moveUp function is ignored."),!1;const D=this.index,B=this.parent.getChildren().length;return D<B-1?(this.parent.children.splice(D,1),this.parent.children.splice(D+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return e.Util.warn("Node has no parent. moveDown function is ignored."),!1;const D=this.index;return D>0?(this.parent.children.splice(D,1),this.parent.children.splice(D-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return e.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const D=this.index;return D>0?(this.parent.children.splice(D,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(D){if(!this.parent)return e.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(D<0||D>=this.parent.children.length)&&e.Util.warn("Unexpected value "+D+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const B=this.index;return this.parent.children.splice(B,1),this.parent.children.splice(D,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(o,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let D=this.opacity();const B=this.getParent();return B&&!B._isUnderCache&&(D*=B.getAbsoluteOpacity()),D}moveTo(D){return this.getParent()!==D&&(this._remove(),D.add(this)),this}toObject(){let D=this.getAttrs(),B,z,G,Z,ne;const ue={attrs:{},className:this.getClassName()};for(B in D)z=D[B],ne=e.Util.isObject(z)&&!e.Util._isPlainObject(z)&&!e.Util._isArray(z),!ne&&(G=typeof this[B]=="function"&&this[B],delete D[B],Z=G?G.call(this):null,D[B]=z,Z!==z&&(ue.attrs[B]=z));return e.Util._prepareToStringify(ue)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(D,B,z){const G=[];B&&this._isMatch(D)&&G.push(this);let Z=this.parent;for(;Z;){if(Z===z)return G;Z._isMatch(D)&&G.push(Z),Z=Z.parent}return G}isAncestorOf(D){return!1}findAncestor(D,B,z){return this.findAncestors(D,B,z)[0]}_isMatch(D){if(!D)return!1;if(typeof D=="function")return D(this);let B=D.replace(/ /g,"").split(","),z=B.length,G,Z;for(G=0;G<z;G++)if(Z=B[G],e.Util.isValidSelector(Z)||(e.Util.warn('Selector "'+Z+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),e.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),e.Util.warn("Konva is awesome, right?")),Z.charAt(0)==="#"){if(this.id()===Z.slice(1))return!0}else if(Z.charAt(0)==="."){if(this.hasName(Z.slice(1)))return!0}else if(this.className===Z||this.nodeType===Z)return!0;return!1}getLayer(){const D=this.getParent();return D?D.getLayer():null}getStage(){return this._getCache(w,this._getStage)}_getStage(){const D=this.getParent();return D?D.getStage():null}fire(D,B={},z){return B.target=B.target||this,z?this._fireAndBubble(D,B):this._fire(D,B),this}getAbsoluteTransform(D){return D?this._getAbsoluteTransform(D):this._getCache(u,this._getAbsoluteTransform)}_getAbsoluteTransform(D){let B;if(D)return B=new e.Transform,this._eachAncestorReverse(function(z){const G=z.transformsEnabled();G==="all"?B.multiply(z.getTransform()):G==="position"&&B.translate(z.x()-z.offsetX(),z.y()-z.offsetY())},D),B;{B=this._cache.get(u)||new e.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(B):B.reset();const z=this.transformsEnabled();if(z==="all")B.multiply(this.getTransform());else if(z==="position"){const G=this.attrs.x||0,Z=this.attrs.y||0,ne=this.attrs.offsetX||0,ue=this.attrs.offsetY||0;B.translate(G-ne,Z-ue)}return B.dirty=!1,B}}getAbsoluteScale(D){let B=this;for(;B;)B._isUnderCache&&(D=B),B=B.getParent();const G=this.getAbsoluteTransform(D).decompose();return{x:G.scaleX,y:G.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(S,this._getTransform)}_getTransform(){var D,B;const z=this._cache.get(S)||new e.Transform;z.reset();const G=this.x(),Z=this.y(),ne=r.Konva.getAngle(this.rotation()),ue=(D=this.attrs.scaleX)!==null&&D!==void 0?D:1,X=(B=this.attrs.scaleY)!==null&&B!==void 0?B:1,q=this.attrs.skewX||0,te=this.attrs.skewY||0,W=this.attrs.offsetX||0,ee=this.attrs.offsetY||0;return(G!==0||Z!==0)&&z.translate(G,Z),ne!==0&&z.rotate(ne),(q!==0||te!==0)&&z.skew(q,te),(ue!==1||X!==1)&&z.scale(ue,X),(W!==0||ee!==0)&&z.translate(-1*W,-1*ee),z.dirty=!1,z}clone(D){let B=e.Util.cloneObject(this.attrs),z,G,Z,ne,ue;for(z in D)B[z]=D[z];const X=new this.constructor(B);for(z in this.eventListeners)for(G=this.eventListeners[z],Z=G.length,ne=0;ne<Z;ne++)ue=G[ne],ue.name.indexOf(h)<0&&(X.eventListeners[z]||(X.eventListeners[z]=[]),X.eventListeners[z].push(ue));return X}_toKonvaCanvas(D){D=D||{};const B=this.getClientRect(),z=this.getStage(),G=D.x!==void 0?D.x:Math.floor(B.x),Z=D.y!==void 0?D.y:Math.floor(B.y),ne=D.pixelRatio||1,ue=new n.SceneCanvas({width:D.width||Math.ceil(B.width)||(z?z.width():0),height:D.height||Math.ceil(B.height)||(z?z.height():0),pixelRatio:ne}),X=ue.getContext(),q=new n.SceneCanvas({width:ue.width/ue.pixelRatio+Math.abs(G),height:ue.height/ue.pixelRatio+Math.abs(Z),pixelRatio:ue.pixelRatio});return D.imageSmoothingEnabled===!1&&(X._context.imageSmoothingEnabled=!1),X.save(),(G||Z)&&X.translate(-1*G,-1*Z),this.drawScene(ue,void 0,q),X.restore(),ue}toCanvas(D){return this._toKonvaCanvas(D)._canvas}toDataURL(D){D=D||{};const B=D.mimeType||null,z=D.quality||null,G=this._toKonvaCanvas(D).toDataURL(B,z);return D.callback&&D.callback(G),G}toImage(D){return new Promise((B,z)=>{try{const G=D==null?void 0:D.callback;G&&delete D.callback,e.Util._urlToImage(this.toDataURL(D),function(Z){B(Z),G==null||G(Z)})}catch(G){z(G)}})}toBlob(D){return new Promise((B,z)=>{try{const G=D==null?void 0:D.callback;G&&delete D.callback,this.toCanvas(D).toBlob(Z=>{B(Z),G==null||G(Z)},D==null?void 0:D.mimeType,D==null?void 0:D.quality)}catch(G){z(G)}})}setSize(D){return this.width(D.width),this.height(D.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():r.Konva.dragDistance}_off(D,B,z){let G=this.eventListeners[D],Z,ne,ue;for(Z=0;Z<G.length;Z++)if(ne=G[Z].name,ue=G[Z].handler,(ne!=="konva"||B==="konva")&&(!B||ne===B)&&(!z||z===ue)){if(G.splice(Z,1),G.length===0){delete this.eventListeners[D];break}Z--}}_fireChangeEvent(D,B,z){this._fire(D+f,{oldVal:B,newVal:z})}addName(D){if(!this.hasName(D)){const B=this.name(),z=B?B+" "+D:D;this.name(z)}return this}hasName(D){if(!D)return!1;const B=this.name();return B?(B||"").split(/\s/g).indexOf(D)!==-1:!1}removeName(D){const B=(this.name()||"").split(/\s/g),z=B.indexOf(D);return z!==-1&&(B.splice(z,1),this.name(B.join(" "))),this}setAttr(D,B){const z=this[b+e.Util._capitalize(D)];return e.Util._isFunction(z)?z.call(this,B):this._setAttr(D,B),this}_requestDraw(){if(r.Konva.autoDrawEnabled){const D=this.getLayer()||this.getStage();D==null||D.batchDraw()}}_setAttr(D,B){const z=this.attrs[D];z===B&&!e.Util.isObject(B)||(B==null?delete this.attrs[D]:this.attrs[D]=B,this._shouldFireChangeEvents&&this._fireChangeEvent(D,z,B),this._requestDraw())}_setComponentAttr(D,B,z){let G;z!==void 0&&(G=this.attrs[D],G||(this.attrs[D]=this.getAttr(D)),this.attrs[D][B]=z,this._fireChangeEvent(D,G,z))}_fireAndBubble(D,B,z){if(B&&this.nodeType===y&&(B.target=this),!((D===m||D===g)&&(z&&(this===z||this.isAncestorOf&&this.isAncestorOf(z))||this.nodeType==="Stage"&&!z))){this._fire(D,B);const Z=(D===m||D===g)&&z&&z.isAncestorOf&&z.isAncestorOf(this)&&!z.isAncestorOf(this.parent);(B&&!B.cancelBubble||!B)&&this.parent&&this.parent.isListening()&&!Z&&(z&&z.parent?this._fireAndBubble.call(this.parent,D,B,z):this._fireAndBubble.call(this.parent,D,B))}}_getProtoListeners(D){var B,z,G;const Z=(B=this._cache.get(a))!==null&&B!==void 0?B:{};let ne=Z==null?void 0:Z[D];if(ne===void 0){ne=[];let ue=Object.getPrototypeOf(this);for(;ue;){const X=(G=(z=ue.eventListeners)===null||z===void 0?void 0:z[D])!==null&&G!==void 0?G:[];ne.push(...X),ue=Object.getPrototypeOf(ue)}Z[D]=ne,this._cache.set(a,Z)}return ne}_fire(D,B){B=B||{},B.currentTarget=this,B.type=D;const z=this._getProtoListeners(D);if(z)for(var G=0;G<z.length;G++)z[G].handler.call(this,B);const Z=this.eventListeners[D];if(Z)for(var G=0;G<Z.length;G++)Z[G].handler.call(this,B)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(D){const B=D?D.pointerId:void 0,z=this.getStage(),G=this.getAbsolutePosition();if(!z)return;const Z=z._getPointerById(B)||z._changedPointerPositions[0]||G;i.DD._dragElements.set(this._id,{node:this,startPointerPos:Z,offset:{x:Z.x-G.x,y:Z.y-G.y},dragStatus:"ready",pointerId:B})}startDrag(D,B=!0){i.DD._dragElements.has(this._id)||this._createDragElement(D);const z=i.DD._dragElements.get(this._id);z.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:D&&D.evt},B)}_setDragPosition(D,B){const z=this.getStage()._getPointerById(B.pointerId);if(!z)return;let G={x:z.x-B.offset.x,y:z.y-B.offset.y};const Z=this.dragBoundFunc();if(Z!==void 0){const ne=Z.call(this,G,D);ne?G=ne:e.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==G.x||this._lastPos.y!==G.y)&&(this.setAbsolutePosition(G),this._requestDraw()),this._lastPos=G}stopDrag(D){const B=i.DD._dragElements.get(this._id);B&&(B.dragStatus="stopped"),i.DD._endDragBefore(D),i.DD._endDragAfter(D)}setDraggable(D){this._setAttr("draggable",D),this._dragChange()}isDragging(){const D=i.DD._dragElements.get(this._id);return D?D.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(D){if(!(!(D.evt.button!==void 0)||r.Konva.dragButtons.indexOf(D.evt.button)>=0)||this.isDragging())return;let G=!1;i.DD._dragElements.forEach(Z=>{this.isAncestorOf(Z.node)&&(G=!0)}),G||this._createDragElement(D)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const B=i.DD._dragElements.get(this._id),z=B&&B.dragStatus==="dragging",G=B&&B.dragStatus==="ready";z?this.stopDrag():G&&i.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(D={x:0,y:0}){const B=this.getStage();if(!B)return!1;const z={x:-D.x,y:-D.y,width:B.width()+2*D.x,height:B.height()+2*D.y};return e.Util.haveIntersection(z,this.getClientRect())}static create(D,B){return e.Util._isString(D)&&(D=JSON.parse(D)),this._createNode(D,B)}static _createNode(D,B){let z=M.prototype.getClassName.call(D),G=D.children,Z,ne,ue;B&&(D.attrs.container=B),r.Konva[z]||(e.Util.warn('Can not find a node with class name "'+z+'". Fallback to "Shape".'),z="Shape");const X=r.Konva[z];if(Z=new X(D.attrs),G)for(ne=G.length,ue=0;ue<ne;ue++)Z.add(M._createNode(G[ue]));return Z}}fA.Node=M,M.prototype.nodeType="Node",M.prototype._attrsAffectingSize=[],M.prototype.eventListeners={},M.prototype.on.call(M.prototype,I,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(S),this._clearSelfAndDescendantCache(u)}),M.prototype.on.call(M.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(R)}),M.prototype.on.call(M.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(p)}),M.prototype.on.call(M.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(o)});const L=t.Factory.addGetterSetter;return L(M,"zIndex"),L(M,"absolutePosition"),L(M,"position"),L(M,"x",0,(0,s.getNumberValidator)()),L(M,"y",0,(0,s.getNumberValidator)()),L(M,"globalCompositeOperation","source-over",(0,s.getStringValidator)()),L(M,"opacity",1,(0,s.getNumberValidator)()),L(M,"name","",(0,s.getStringValidator)()),L(M,"id","",(0,s.getStringValidator)()),L(M,"rotation",0,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(M,"scale",["x","y"]),L(M,"scaleX",1,(0,s.getNumberValidator)()),L(M,"scaleY",1,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(M,"skew",["x","y"]),L(M,"skewX",0,(0,s.getNumberValidator)()),L(M,"skewY",0,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(M,"offset",["x","y"]),L(M,"offsetX",0,(0,s.getNumberValidator)()),L(M,"offsetY",0,(0,s.getNumberValidator)()),L(M,"dragDistance",void 0,(0,s.getNumberValidator)()),L(M,"width",0,(0,s.getNumberValidator)()),L(M,"height",0,(0,s.getNumberValidator)()),L(M,"listening",!0,(0,s.getBooleanValidator)()),L(M,"preventDefault",!0,(0,s.getBooleanValidator)()),L(M,"filters",void 0,function(H){return this._filterUpToDate=!1,H}),L(M,"visible",!0,(0,s.getBooleanValidator)()),L(M,"transformsEnabled","all",(0,s.getStringValidator)()),L(M,"size"),L(M,"dragBoundFunc"),L(M,"draggable",!1,(0,s.getBooleanValidator)()),t.Factory.backCompat(M,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),fA}var dA={},Wue;function CM(){if(Wue)return dA;Wue=1,Object.defineProperty(dA,"__esModule",{value:!0}),dA.Container=void 0;const e=Yr(),t=_a(),n=Zr();let r=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(s){if(!s)return this.children||[];const o=this.children||[],a=[];return o.forEach(function(u){s(u)&&a.push(u)}),a}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.destroy()}),this.children=[],this._requestDraw(),this}add(...s){if(s.length===0)return this;if(s.length>1){for(let a=0;a<s.length;a++)this.add(s[a]);return this}const o=s[0];return o.getParent()?(o.moveTo(this),this):(this._validateAdd(o),o.index=this.getChildren().length,o.parent=this,o._clearCaches(),this.getChildren().push(o),this._fire("add",{child:o}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(s){return this._generalFind(s,!1)}findOne(s){const o=this._generalFind(s,!0);return o.length>0?o[0]:void 0}_generalFind(s,o){const a=[];return this._descendants(u=>{const l=u._isMatch(s);return l&&a.push(u),!!(l&&o)}),a}_descendants(s){let o=!1;const a=this.getChildren();for(const u of a){if(o=s(u),o)return!0;if(u.hasChildren()&&(o=u._descendants(s),o))return!0}return!1}toObject(){const s=t.Node.prototype.toObject.call(this);return s.children=[],this.getChildren().forEach(o=>{s.children.push(o.toObject())}),s}isAncestorOf(s){let o=s.getParent();for(;o;){if(o._id===this._id)return!0;o=o.getParent()}return!1}clone(s){const o=t.Node.prototype.clone.call(this,s);return this.getChildren().forEach(function(a){o.add(a.clone())}),o}getAllIntersections(s){const o=[];return this.find("Shape").forEach(a=>{a.isVisible()&&a.intersects(s)&&o.push(a)}),o}_clearSelfAndDescendantCache(s){var o;super._clearSelfAndDescendantCache(s),!this.isCached()&&((o=this.children)===null||o===void 0||o.forEach(function(a){a._clearSelfAndDescendantCache(s)}))}_setChildrenIndices(){var s;(s=this.children)===null||s===void 0||s.forEach(function(o,a){o.index=a}),this._requestDraw()}drawScene(s,o,a){const u=this.getLayer(),l=s||u&&u.getCanvas(),c=l&&l.getContext(),f=this._getCanvasCache(),d=f&&f.scene,h=l&&l.isCache;if(!this.isVisible()&&!h)return this;if(d){c.save();const p=this.getAbsoluteTransform(o).getMatrix();c.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",l,o,a);return this}drawHit(s,o){if(!this.shouldDrawHit(o))return this;const a=this.getLayer(),u=s||a&&a.hitCanvas,l=u&&u.getContext(),c=this._getCanvasCache();if(c&&c.hit){l.save();const d=this.getAbsoluteTransform(o).getMatrix();l.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",u,o);return this}_drawChildren(s,o,a,u){var l;const c=o&&o.getContext(),f=this.clipWidth(),d=this.clipHeight(),h=this.clipFunc(),p=typeof f=="number"&&typeof d=="number"||h,m=a===this;if(p){c.save();const b=this.getAbsoluteTransform(a);let y=b.getMatrix();c.transform(y[0],y[1],y[2],y[3],y[4],y[5]),c.beginPath();let x;if(h)x=h.call(this,c,this);else{const w=this.clipX(),S=this.clipY();c.rect(w||0,S||0,f,d)}c.clip.apply(c,x),y=b.copy().invert().getMatrix(),c.transform(y[0],y[1],y[2],y[3],y[4],y[5])}const g=!m&&this.globalCompositeOperation()!=="source-over"&&s==="drawScene";g&&(c.save(),c._applyGlobalCompositeOperation(this)),(l=this.children)===null||l===void 0||l.forEach(function(b){b[s](o,a,u)}),g&&c.restore(),p&&c.restore()}getClientRect(s={}){var o;const a=s.skipTransform,u=s.relativeTo;let l,c,f,d,h={x:1/0,y:1/0,width:0,height:0};const p=this;(o=this.children)===null||o===void 0||o.forEach(function(b){if(!b.visible())return;const y=b.getClientRect({relativeTo:p,skipShadow:s.skipShadow,skipStroke:s.skipStroke});y.width===0&&y.height===0||(l===void 0?(l=y.x,c=y.y,f=y.x+y.width,d=y.y+y.height):(l=Math.min(l,y.x),c=Math.min(c,y.y),f=Math.max(f,y.x+y.width),d=Math.max(d,y.y+y.height)))});const m=this.find("Shape");let g=!1;for(let b=0;b<m.length;b++)if(m[b]._isVisible(this)){g=!0;break}return g&&l!==void 0?h={x:l,y:c,width:f-l,height:d-c}:h={x:0,y:0,width:0,height:0},a?h:this._transformedRect(h,u)}};return dA.Container=r,e.Factory.addComponentsGetterSetter(r,"clip",["x","y","width","height"]),e.Factory.addGetterSetter(r,"clipX",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"clipY",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"clipWidth",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"clipHeight",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"clipFunc"),dA}var aB={},mv={},Gue;function bSe(){if(Gue)return mv;Gue=1,Object.defineProperty(mv,"__esModule",{value:!0}),mv.getCapturedShape=r,mv.createEvent=i,mv.hasPointerCapture=s,mv.setPointerCapture=o,mv.releaseCapture=a;const e=Vr(),t=new Map,n=e.Konva._global.PointerEvent!==void 0;function r(u){return t.get(u)}function i(u){return{evt:u,pointerId:u.pointerId}}function s(u,l){return t.get(u)===l}function o(u,l){a(u),l.getStage()&&(t.set(u,l),n&&l._fire("gotpointercapture",i(new PointerEvent("gotpointercapture"))))}function a(u,l){const c=t.get(u);if(!c)return;const f=c.getStage();f&&f.content,t.delete(u),n&&c._fire("lostpointercapture",i(new PointerEvent("lostpointercapture")))}return mv}var Yue;function u1t(){return Yue||(Yue=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=Xo(),n=Yr(),r=CM(),i=Vr(),s=TM(),o=BK(),a=Vr(),u=bSe(),l="Stage",c="string",f="px",d="mouseout",h="mouseleave",p="mouseover",m="mouseenter",g="mousemove",b="mousedown",y="mouseup",x="pointermove",w="pointerdown",S="pointerup",C="pointercancel",R="lostpointercapture",I="pointerout",O="pointerleave",M="pointerover",L="pointerenter",H="contextmenu",D="touchstart",B="touchend",z="touchmove",G="touchcancel",Z="wheel",ne=5,ue=[[m,"_pointerenter"],[b,"_pointerdown"],[g,"_pointermove"],[y,"_pointerup"],[h,"_pointerleave"],[D,"_pointerdown"],[z,"_pointermove"],[B,"_pointerup"],[G,"_pointercancel"],[p,"_pointerover"],[Z,"_wheel"],[H,"_contextmenu"],[w,"_pointerdown"],[x,"_pointermove"],[S,"_pointerup"],[C,"_pointercancel"],[R,"_lostpointercapture"]],X={mouse:{[I]:d,[O]:h,[M]:p,[L]:m,[x]:g,[w]:b,[S]:y,[C]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[I]:"touchout",[O]:"touchleave",[M]:"touchover",[L]:"touchenter",[x]:z,[w]:D,[S]:B,[C]:G,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[I]:I,[O]:O,[M]:M,[L]:L,[x]:x,[w]:w,[S]:S,[C]:C,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},q=pe=>pe.indexOf("pointer")>=0?"pointer":pe.indexOf("touch")>=0?"touch":"mouse",te=pe=>{const ce=q(pe);if(ce==="pointer")return i.Konva.pointerEventsEnabled&&X.pointer;if(ce==="touch")return X.touch;if(ce==="mouse")return X.mouse};function W(pe={}){return(pe.clipFunc||pe.clipWidth||pe.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),pe}const ee="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class oe extends r.Container{constructor(ce){super(W(ce)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{W(this.attrs)}),this._checkVisibility()}_validateAdd(ce){const he=ce.getType()==="Layer",Ee=ce.getType()==="FastLayer";he||Ee||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const ce=this.visible()?"":"none";this.content.style.display=ce}setContainer(ce){if(typeof ce===c){if(ce.charAt(0)==="."){const Ee=ce.slice(1);ce=document.getElementsByClassName(Ee)[0]}else{var he;ce.charAt(0)!=="#"?he=ce:he=ce.slice(1),ce=document.getElementById(he)}if(!ce)throw"Can not find container in document with id "+he}return this._setAttr("container",ce),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),ce.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const ce=this.children,he=ce.length;for(let Ee=0;Ee<he;Ee++)ce[Ee].clear();return this}clone(ce){return ce||(ce={}),ce.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,ce)}destroy(){super.destroy();const ce=this.content;ce&&t.Util._isInDocument(ce)&&this.container().removeChild(ce);const he=e.stages.indexOf(this);return he>-1&&e.stages.splice(he,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const ce=this._pointerPositions[0]||this._changedPointerPositions[0];return ce?{x:ce.x,y:ce.y}:(t.Util.warn(ee),null)}_getPointerById(ce){return this._pointerPositions.find(he=>he.id===ce)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(ce){ce=ce||{},ce.x=ce.x||0,ce.y=ce.y||0,ce.width=ce.width||this.width(),ce.height=ce.height||this.height();const he=new s.SceneCanvas({width:ce.width,height:ce.height,pixelRatio:ce.pixelRatio||1}),Ee=he.getContext()._context,Ae=this.children;return(ce.x||ce.y)&&Ee.translate(-1*ce.x,-1*ce.y),Ae.forEach(function(ge){if(!ge.isVisible())return;const me=ge._toKonvaCanvas(ce);Ee.drawImage(me._canvas,ce.x,ce.y,me.getWidth()/me.getPixelRatio(),me.getHeight()/me.getPixelRatio())}),he}getIntersection(ce){if(!ce)return null;const he=this.children,Ee=he.length,Ae=Ee-1;for(let ge=Ae;ge>=0;ge--){const me=he[ge].getIntersection(ce);if(me)return me}return null}_resizeDOM(){const ce=this.width(),he=this.height();this.content&&(this.content.style.width=ce+f,this.content.style.height=he+f),this.bufferCanvas.setSize(ce,he),this.bufferHitCanvas.setSize(ce,he),this.children.forEach(Ee=>{Ee.setSize({width:ce,height:he}),Ee.draw()})}add(ce,...he){if(arguments.length>1){for(let Ae=0;Ae<arguments.length;Ae++)this.add(arguments[Ae]);return this}super.add(ce);const Ee=this.children.length;return Ee>ne&&t.Util.warn("The stage has "+Ee+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),ce.setSize({width:this.width(),height:this.height()}),ce.draw(),i.Konva.isBrowser&&this.content.appendChild(ce.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(ce){return u.hasPointerCapture(ce,this)}setPointerCapture(ce){u.setPointerCapture(ce,this)}releaseCapture(ce){u.releaseCapture(ce,this)}getLayers(){return this.children}_bindContentEvents(){i.Konva.isBrowser&&ue.forEach(([ce,he])=>{this.content.addEventListener(ce,Ee=>{this[he](Ee)},{passive:!1})})}_pointerenter(ce){this.setPointersPositions(ce);const he=te(ce.type);he&&this._fire(he.pointerenter,{evt:ce,target:this,currentTarget:this})}_pointerover(ce){this.setPointersPositions(ce);const he=te(ce.type);he&&this._fire(he.pointerover,{evt:ce,target:this,currentTarget:this})}_getTargetShape(ce){let he=this[ce+"targetShape"];return he&&!he.getStage()&&(he=null),he}_pointerleave(ce){const he=te(ce.type),Ee=q(ce.type);if(!he)return;this.setPointersPositions(ce);const Ae=this._getTargetShape(Ee),ge=!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled;Ae&&ge?(Ae._fireAndBubble(he.pointerout,{evt:ce}),Ae._fireAndBubble(he.pointerleave,{evt:ce}),this._fire(he.pointerleave,{evt:ce,target:this,currentTarget:this}),this[Ee+"targetShape"]=null):ge&&(this._fire(he.pointerleave,{evt:ce,target:this,currentTarget:this}),this._fire(he.pointerout,{evt:ce,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(ce){const he=te(ce.type),Ee=q(ce.type);if(!he)return;this.setPointersPositions(ce);let Ae=!1;this._changedPointerPositions.forEach(ge=>{const me=this.getIntersection(ge);if(o.DD.justDragged=!1,i.Konva["_"+Ee+"ListenClick"]=!0,!me||!me.isListening()){this[Ee+"ClickStartShape"]=void 0;return}i.Konva.capturePointerEventsEnabled&&me.setPointerCapture(ge.id),this[Ee+"ClickStartShape"]=me,me._fireAndBubble(he.pointerdown,{evt:ce,pointerId:ge.id}),Ae=!0;const Oe=ce.type.indexOf("touch")>=0;me.preventDefault()&&ce.cancelable&&Oe&&ce.preventDefault()}),Ae||this._fire(he.pointerdown,{evt:ce,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(ce){const he=te(ce.type),Ee=q(ce.type);if(!he||(i.Konva.isDragging()&&o.DD.node.preventDefault()&&ce.cancelable&&ce.preventDefault(),this.setPointersPositions(ce),!(!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled)))return;const ge={};let me=!1;const Oe=this._getTargetShape(Ee);this._changedPointerPositions.forEach(Me=>{const Ye=u.getCapturedShape(Me.id)||this.getIntersection(Me),lt=Me.id,We={evt:ce,pointerId:lt},nt=Oe!==Ye;if(nt&&Oe&&(Oe._fireAndBubble(he.pointerout,{...We},Ye),Oe._fireAndBubble(he.pointerleave,{...We},Ye)),Ye){if(ge[Ye._id])return;ge[Ye._id]=!0}Ye&&Ye.isListening()?(me=!0,nt&&(Ye._fireAndBubble(he.pointerover,{...We},Oe),Ye._fireAndBubble(he.pointerenter,{...We},Oe),this[Ee+"targetShape"]=Ye),Ye._fireAndBubble(he.pointermove,{...We})):Oe&&(this._fire(he.pointerover,{evt:ce,target:this,currentTarget:this,pointerId:lt}),this[Ee+"targetShape"]=null)}),me||this._fire(he.pointermove,{evt:ce,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(ce){const he=te(ce.type),Ee=q(ce.type);if(!he)return;this.setPointersPositions(ce);const Ae=this[Ee+"ClickStartShape"],ge=this[Ee+"ClickEndShape"],me={};let Oe=!1;this._changedPointerPositions.forEach(Me=>{const Ye=u.getCapturedShape(Me.id)||this.getIntersection(Me);if(Ye){if(Ye.releaseCapture(Me.id),me[Ye._id])return;me[Ye._id]=!0}const lt=Me.id,We={evt:ce,pointerId:lt};let nt=!1;i.Konva["_"+Ee+"InDblClickWindow"]?(nt=!0,clearTimeout(this[Ee+"DblTimeout"])):o.DD.justDragged||(i.Konva["_"+Ee+"InDblClickWindow"]=!0,clearTimeout(this[Ee+"DblTimeout"])),this[Ee+"DblTimeout"]=setTimeout(function(){i.Konva["_"+Ee+"InDblClickWindow"]=!1},i.Konva.dblClickWindow),Ye&&Ye.isListening()?(Oe=!0,this[Ee+"ClickEndShape"]=Ye,Ye._fireAndBubble(he.pointerup,{...We}),i.Konva["_"+Ee+"ListenClick"]&&Ae&&Ae===Ye&&(Ye._fireAndBubble(he.pointerclick,{...We}),nt&&ge&&ge===Ye&&Ye._fireAndBubble(he.pointerdblclick,{...We}))):(this[Ee+"ClickEndShape"]=null,i.Konva["_"+Ee+"ListenClick"]&&this._fire(he.pointerclick,{evt:ce,target:this,currentTarget:this,pointerId:lt}),nt&&this._fire(he.pointerdblclick,{evt:ce,target:this,currentTarget:this,pointerId:lt}))}),Oe||this._fire(he.pointerup,{evt:ce,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva["_"+Ee+"ListenClick"]=!1,ce.cancelable&&Ee!=="touch"&&Ee!=="pointer"&&ce.preventDefault()}_contextmenu(ce){this.setPointersPositions(ce);const he=this.getIntersection(this.getPointerPosition());he&&he.isListening()?he._fireAndBubble(H,{evt:ce}):this._fire(H,{evt:ce,target:this,currentTarget:this})}_wheel(ce){this.setPointersPositions(ce);const he=this.getIntersection(this.getPointerPosition());he&&he.isListening()?he._fireAndBubble(Z,{evt:ce}):this._fire(Z,{evt:ce,target:this,currentTarget:this})}_pointercancel(ce){this.setPointersPositions(ce);const he=u.getCapturedShape(ce.pointerId)||this.getIntersection(this.getPointerPosition());he&&he._fireAndBubble(S,u.createEvent(ce)),u.releaseCapture(ce.pointerId)}_lostpointercapture(ce){u.releaseCapture(ce.pointerId)}setPointersPositions(ce){const he=this._getContentPosition();let Ee=null,Ae=null;ce=ce||window.event,ce.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(ce.touches,ge=>{this._pointerPositions.push({id:ge.identifier,x:(ge.clientX-he.left)/he.scaleX,y:(ge.clientY-he.top)/he.scaleY})}),Array.prototype.forEach.call(ce.changedTouches||ce.touches,ge=>{this._changedPointerPositions.push({id:ge.identifier,x:(ge.clientX-he.left)/he.scaleX,y:(ge.clientY-he.top)/he.scaleY})})):(Ee=(ce.clientX-he.left)/he.scaleX,Ae=(ce.clientY-he.top)/he.scaleY,this.pointerPos={x:Ee,y:Ae},this._pointerPositions=[{x:Ee,y:Ae,id:t.Util._getFirstPointerId(ce)}],this._changedPointerPositions=[{x:Ee,y:Ae,id:t.Util._getFirstPointerId(ce)}])}_setPointerPosition(ce){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(ce)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const ce=this.content.getBoundingClientRect();return{top:ce.top,left:ce.left,scaleX:ce.width/this.content.clientWidth||1,scaleY:ce.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!i.Konva.isBrowser)return;const ce=this.container();if(!ce)throw"Stage has no container. A container is required.";ce.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),ce.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(ce){ce.batchDraw()}),this}}e.Stage=oe,oe.prototype.nodeType=l,(0,a._registerNode)(oe),n.Factory.addGetterSetter(oe,"container"),i.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(pe=>{pe.batchDraw()})})}(aB)),aB}var hA={},uB={},Kue;function qu(){return Kue||(Kue=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=Vr(),n=Xo(),r=Yr(),i=_a(),s=Zr(),o=Vr(),a=bSe(),u="hasShadow",l="shadowRGBA",c="patternImage",f="linearGradient",d="radialGradient";let h;function p(){return h||(h=n.Util.createCanvasElement().getContext("2d"),h)}e.shapes={};function m(O){const M=this.attrs.fillRule;M?O.fill(M):O.fill()}function g(O){O.stroke()}function b(O){const M=this.attrs.fillRule;M?O.fill(M):O.fill()}function y(O){O.stroke()}function x(){this._clearCache(u)}function w(){this._clearCache(l)}function S(){this._clearCache(c)}function C(){this._clearCache(f)}function R(){this._clearCache(d)}class I extends i.Node{constructor(M){super(M);let L;for(;L=n.Util.getRandomColor(),!(L&&!(L in e.shapes)););this.colorKey=L,e.shapes[L]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(u,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const L=p().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(L&&L.setTransform){const H=new n.Transform;H.translate(this.fillPatternX(),this.fillPatternY()),H.rotate(t.Konva.getAngle(this.fillPatternRotation())),H.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),H.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const D=H.getMatrix(),B=typeof DOMMatrix>"u"?{a:D[0],b:D[1],c:D[2],d:D[3],e:D[4],f:D[5]}:new DOMMatrix(D);L.setTransform(B)}return L}}_getLinearGradient(){return this._getCache(f,this.__getLinearGradient)}__getLinearGradient(){const M=this.fillLinearGradientColorStops();if(M){const L=p(),H=this.fillLinearGradientStartPoint(),D=this.fillLinearGradientEndPoint(),B=L.createLinearGradient(H.x,H.y,D.x,D.y);for(let z=0;z<M.length;z+=2)B.addColorStop(M[z],M[z+1]);return B}}_getRadialGradient(){return this._getCache(d,this.__getRadialGradient)}__getRadialGradient(){const M=this.fillRadialGradientColorStops();if(M){const L=p(),H=this.fillRadialGradientStartPoint(),D=this.fillRadialGradientEndPoint(),B=L.createRadialGradient(H.x,H.y,this.fillRadialGradientStartRadius(),D.x,D.y,this.fillRadialGradientEndRadius());for(let z=0;z<M.length;z+=2)B.addColorStop(M[z],M[z+1]);return B}}getShadowRGBA(){return this._getCache(l,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const M=n.Util.colorToRGBA(this.shadowColor());if(M)return"rgba("+M.r+","+M.g+","+M.b+","+M.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const M=this.hitStrokeWidth();return M==="auto"?this.hasStroke():this.strokeEnabled()&&!!M}intersects(M){const L=this.getStage();if(!L)return!1;const H=L.bufferHitCanvas;return H.getContext().clear(),this.drawHit(H,void 0,!0),H.context.getImageData(Math.round(M.x),Math.round(M.y),1,1).data[3]>0}destroy(){return i.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(M){var L;if(!((L=this.attrs.perfectDrawEnabled)!==null&&L!==void 0?L:!0))return!1;const D=M||this.hasFill(),B=this.hasStroke(),z=this.getAbsoluteOpacity()!==1;if(D&&B&&z)return!0;const G=this.hasShadow(),Z=this.shadowForStrokeEnabled();return!!(D&&B&&G&&Z)}setStrokeHitEnabled(M){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),M?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const M=this.size();return{x:this._centroid?-M.width/2:0,y:this._centroid?-M.height/2:0,width:M.width,height:M.height}}getClientRect(M={}){let L=!1,H=this.getParent();for(;H;){if(H.isCached()){L=!0;break}H=H.getParent()}const D=M.skipTransform,B=M.relativeTo||L&&this.getStage()||void 0,z=this.getSelfRect(),Z=!M.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,ne=z.width+Z,ue=z.height+Z,X=!M.skipShadow&&this.hasShadow(),q=X?this.shadowOffsetX():0,te=X?this.shadowOffsetY():0,W=ne+Math.abs(q),ee=ue+Math.abs(te),oe=X&&this.shadowBlur()||0,pe=W+oe*2,ce=ee+oe*2,he={width:pe,height:ce,x:-(Z/2+oe)+Math.min(q,0)+z.x,y:-(Z/2+oe)+Math.min(te,0)+z.y};return D?he:this._transformedRect(he,B)}drawScene(M,L,H){const D=this.getLayer();let B=M||D.getCanvas(),z=B.getContext(),G=this._getCanvasCache(),Z=this.getSceneFunc(),ne=this.hasShadow(),ue,X;const q=B.isCache,te=L===this;if(!this.isVisible()&&!te)return this;if(G){z.save();const ee=this.getAbsoluteTransform(L).getMatrix();return z.transform(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5]),this._drawCachedSceneCanvas(z),z.restore(),this}if(!Z)return this;if(z.save(),this._useBufferCanvas()&&!q){ue=this.getStage();const ee=H||ue.bufferCanvas;X=ee.getContext(),X.clear(),X.save(),X._applyLineJoin(this);var W=this.getAbsoluteTransform(L).getMatrix();X.transform(W[0],W[1],W[2],W[3],W[4],W[5]),Z.call(this,X,this),X.restore();const oe=ee.pixelRatio;ne&&z._applyShadow(this),z._applyOpacity(this),z._applyGlobalCompositeOperation(this),z.drawImage(ee._canvas,0,0,ee.width/oe,ee.height/oe)}else{if(z._applyLineJoin(this),!te){var W=this.getAbsoluteTransform(L).getMatrix();z.transform(W[0],W[1],W[2],W[3],W[4],W[5]),z._applyOpacity(this),z._applyGlobalCompositeOperation(this)}ne&&z._applyShadow(this),Z.call(this,z,this)}return z.restore(),this}drawHit(M,L,H=!1){if(!this.shouldDrawHit(L,H))return this;const D=this.getLayer(),B=M||D.hitCanvas,z=B&&B.getContext(),G=this.hitFunc()||this.sceneFunc(),Z=this._getCanvasCache(),ne=Z&&Z.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),ne){z.save();const X=this.getAbsoluteTransform(L).getMatrix();return z.transform(X[0],X[1],X[2],X[3],X[4],X[5]),this._drawCachedHitCanvas(z),z.restore(),this}if(!G)return this;if(z.save(),z._applyLineJoin(this),!(this===L)){const X=this.getAbsoluteTransform(L).getMatrix();z.transform(X[0],X[1],X[2],X[3],X[4],X[5])}return G.call(this,z,this),z.restore(),this}drawHitFromCache(M=0){const L=this._getCanvasCache(),H=this._getCachedSceneCanvas(),D=L.hit,B=D.getContext(),z=D.getWidth(),G=D.getHeight();B.clear(),B.drawImage(H._canvas,0,0,z,G);try{const Z=B.getImageData(0,0,z,G),ne=Z.data,ue=ne.length,X=n.Util._hexToRgb(this.colorKey);for(let q=0;q<ue;q+=4)ne[q+3]>M?(ne[q]=X.r,ne[q+1]=X.g,ne[q+2]=X.b,ne[q+3]=255):ne[q+3]=0;B.putImageData(Z,0,0)}catch(Z){n.Util.error("Unable to draw hit graph from cached scene canvas. "+Z.message)}return this}hasPointerCapture(M){return a.hasPointerCapture(M,this)}setPointerCapture(M){a.setPointerCapture(M,this)}releaseCapture(M){a.releaseCapture(M,this)}}e.Shape=I,I.prototype._fillFunc=m,I.prototype._strokeFunc=g,I.prototype._fillFuncHit=b,I.prototype._strokeFuncHit=y,I.prototype._centroid=!1,I.prototype.nodeType="Shape",(0,o._registerNode)(I),I.prototype.eventListeners={},I.prototype.on.call(I.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",x),I.prototype.on.call(I.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",w),I.prototype.on.call(I.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",S),I.prototype.on.call(I.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",C),I.prototype.on.call(I.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",R),r.Factory.addGetterSetter(I,"stroke",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(I,"strokeWidth",2,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(I,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(I,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(I,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(I,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(I,"lineJoin"),r.Factory.addGetterSetter(I,"lineCap"),r.Factory.addGetterSetter(I,"sceneFunc"),r.Factory.addGetterSetter(I,"hitFunc"),r.Factory.addGetterSetter(I,"dash"),r.Factory.addGetterSetter(I,"dashOffset",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"shadowColor",void 0,(0,s.getStringValidator)()),r.Factory.addGetterSetter(I,"shadowBlur",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"shadowOpacity",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(I,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(I,"shadowOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"shadowOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"fillPatternImage"),r.Factory.addGetterSetter(I,"fill",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(I,"fillPatternX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"fillPatternY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(I,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(I,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(I,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(I,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(I,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(I,"fillEnabled",!0),r.Factory.addGetterSetter(I,"strokeEnabled",!0),r.Factory.addGetterSetter(I,"shadowEnabled",!0),r.Factory.addGetterSetter(I,"dashEnabled",!0),r.Factory.addGetterSetter(I,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(I,"fillPriority","color"),r.Factory.addComponentsGetterSetter(I,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(I,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(I,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(I,"fillPatternScaleX",1,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"fillPatternScaleY",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(I,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(I,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(I,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(I,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(I,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(I,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(I,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(I,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(I,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(I,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(I,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(I,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(I,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(I,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(I,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(I,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(I,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(I,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(I,"fillPatternRotation",0),r.Factory.addGetterSetter(I,"fillRule",void 0,(0,s.getStringValidator)()),r.Factory.backCompat(I,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(uB)),uB}var Xue;function xSe(){if(Xue)return hA;Xue=1,Object.defineProperty(hA,"__esModule",{value:!0}),hA.Layer=void 0;const e=Xo(),t=CM(),n=_a(),r=Yr(),i=TM(),s=Zr(),o=qu(),a=Vr(),u="#",l="beforeDraw",c="draw",f=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],d=f.length;class h extends t.Container{constructor(m){super(m),this.canvas=new i.SceneCanvas,this.hitCanvas=new i.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(m){return this.getContext().clear(m),this.getHitCanvas().getContext().clear(m),this}setZIndex(m){super.setZIndex(m);const g=this.getStage();return g&&g.content&&(g.content.removeChild(this.getNativeCanvasElement()),m<g.children.length-1?g.content.insertBefore(this.getNativeCanvasElement(),g.children[m+1].getCanvas()._canvas):g.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){n.Node.prototype.moveToTop.call(this);const m=this.getStage();return m&&m.content&&(m.content.removeChild(this.getNativeCanvasElement()),m.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!n.Node.prototype.moveUp.call(this))return!1;const g=this.getStage();return!g||!g.content?!1:(g.content.removeChild(this.getNativeCanvasElement()),this.index<g.children.length-1?g.content.insertBefore(this.getNativeCanvasElement(),g.children[this.index+1].getCanvas()._canvas):g.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(n.Node.prototype.moveDown.call(this)){const m=this.getStage();if(m){const g=m.children;m.content&&(m.content.removeChild(this.getNativeCanvasElement()),m.content.insertBefore(this.getNativeCanvasElement(),g[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(n.Node.prototype.moveToBottom.call(this)){const m=this.getStage();if(m){const g=m.children;m.content&&(m.content.removeChild(this.getNativeCanvasElement()),m.content.insertBefore(this.getNativeCanvasElement(),g[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const m=this.getNativeCanvasElement();return n.Node.prototype.remove.call(this),m&&m.parentNode&&e.Util._isInDocument(m)&&m.parentNode.removeChild(m),this}getStage(){return this.parent}setSize({width:m,height:g}){return this.canvas.setSize(m,g),this.hitCanvas.setSize(m,g),this._setSmoothEnabled(),this}_validateAdd(m){const g=m.getType();g!=="Group"&&g!=="Shape"&&e.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(m){return m=m||{},m.width=m.width||this.getWidth(),m.height=m.height||this.getHeight(),m.x=m.x!==void 0?m.x:this.x(),m.y=m.y!==void 0?m.y:this.y(),n.Node.prototype._toKonvaCanvas.call(this,m)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){e.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){e.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,e.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(m){if(!this.isListening()||!this.isVisible())return null;let g=1,b=!1;for(;;){for(let y=0;y<d;y++){const x=f[y],w=this._getIntersection({x:m.x+x.x*g,y:m.y+x.y*g}),S=w.shape;if(S)return S;if(b=!!w.antialiased,!w.antialiased)break}if(b)g+=1;else return null}}_getIntersection(m){const g=this.hitCanvas.pixelRatio,b=this.hitCanvas.context.getImageData(Math.round(m.x*g),Math.round(m.y*g),1,1).data,y=b[3];if(y===255){const x=e.Util._rgbToHex(b[0],b[1],b[2]),w=o.shapes[u+x];return w?{shape:w}:{antialiased:!0}}else if(y>0)return{antialiased:!0};return{}}drawScene(m,g){const b=this.getLayer(),y=m||b&&b.getCanvas();return this._fire(l,{node:this}),this.clearBeforeDraw()&&y.getContext().clear(),t.Container.prototype.drawScene.call(this,y,g),this._fire(c,{node:this}),this}drawHit(m,g){const b=this.getLayer(),y=m||b&&b.hitCanvas;return b&&b.clearBeforeDraw()&&b.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,y,g),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(m){e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(m)}getHitGraphEnabled(m){return e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const m=this.parent;!!this.hitCanvas._canvas.parentNode?m.content.removeChild(this.hitCanvas._canvas):m.content.appendChild(this.hitCanvas._canvas)}destroy(){return e.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return hA.Layer=h,h.prototype.nodeType="Layer",(0,a._registerNode)(h),r.Factory.addGetterSetter(h,"imageSmoothingEnabled",!0),r.Factory.addGetterSetter(h,"clearBeforeDraw",!0),r.Factory.addGetterSetter(h,"hitGraphEnabled",!0,(0,s.getBooleanValidator)()),hA}var pA={},Que;function l1t(){if(Que)return pA;Que=1,Object.defineProperty(pA,"__esModule",{value:!0}),pA.FastLayer=void 0;const e=Xo(),t=xSe(),n=Vr();let r=class extends t.Layer{constructor(s){super(s),this.listening(!1),e.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return pA.FastLayer=r,r.prototype.nodeType="FastLayer",(0,n._registerNode)(r),pA}var mA={},Jue;function jK(){if(Jue)return mA;Jue=1,Object.defineProperty(mA,"__esModule",{value:!0}),mA.Group=void 0;const e=Xo(),t=CM(),n=Vr();class r extends t.Container{_validateAdd(s){const o=s.getType();o!=="Group"&&o!=="Shape"&&e.Util.throw("You may only add groups and shapes to groups.")}}return mA.Group=r,r.prototype.nodeType="Group",(0,n._registerNode)(r),mA}var gA={},Zue;function UK(){if(Zue)return gA;Zue=1,Object.defineProperty(gA,"__esModule",{value:!0}),gA.Animation=void 0;const e=Vr(),t=Xo(),n=function(){return e.glob.performance&&e.glob.performance.now?function(){return e.glob.performance.now()}:function(){return new Date().getTime()}}();let r=class wE{constructor(s,o){this.id=wE.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=s,this.setLayers(o)}setLayers(s){let o=[];return s&&(o=Array.isArray(s)?s:[s]),this.layers=o,this}getLayers(){return this.layers}addLayer(s){const o=this.layers,a=o.length;for(let u=0;u<a;u++)if(o[u]._id===s._id)return!1;return this.layers.push(s),!0}isRunning(){const o=wE.animations,a=o.length;for(let u=0;u<a;u++)if(o[u].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),wE._addAnimation(this),this}stop(){return wE._removeAnimation(this),this}_updateFrameObject(s){this.frame.timeDiff=s-this.frame.lastTime,this.frame.lastTime=s,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(s){this.animations.push(s),this._handleAnimation()}static _removeAnimation(s){const o=s.id,a=this.animations,u=a.length;for(let l=0;l<u;l++)if(a[l].id===o){this.animations.splice(l,1);break}}static _runFrames(){const s={},o=this.animations;for(let a=0;a<o.length;a++){const u=o[a],l=u.layers,c=u.func;u._updateFrameObject(n());const f=l.length;let d;if(c?d=c.call(u,u.frame)!==!1:d=!0,!!d)for(let h=0;h<f;h++){const p=l[h];p._id!==void 0&&(s[p._id]=p)}}for(const a in s)s.hasOwnProperty(a)&&s[a].batchDraw()}static _animationLoop(){const s=wE;s.animations.length?(s._runFrames(),t.Util.requestAnimFrame(s._animationLoop)):s.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return gA.Animation=r,r.animations=[],r.animIdCounter=0,r.animRunning=!1,gA}var lB={},ele;function c1t(){return ele||(ele=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=Xo(),n=UK(),r=_a(),i=Vr(),s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,a=2,u=3,l=["fill","stroke","shadowColor"];let c=0;class f{constructor(p,m,g,b,y,x,w){this.prop=p,this.propFunc=m,this.begin=b,this._pos=b,this.duration=x,this._change=0,this.prevPos=0,this.yoyo=w,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=g,this._change=y-this.begin,this.pause()}fire(p){const m=this[p];m&&m()}setTime(p){p>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():p<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=p,this.update())}getTime(){return this._time}setPosition(p){this.prevPos=this._pos,this.propFunc(p),this._pos=p}getPosition(p){return p===void 0&&(p=this._time),this.func(p,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=u,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(p){this.pause(),this._time=p,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const p=this.getTimer()-this._startTime;this.state===a?this.setTime(p):this.state===u&&this.setTime(this.duration-p)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class d{constructor(p){const m=this,g=p.node,b=g._id,y=p.easing||e.Easings.Linear,x=!!p.yoyo;let w,S;typeof p.duration>"u"?w=.3:p.duration===0?w=.001:w=p.duration,this.node=g,this._id=c++;const C=g.getLayer()||(g instanceof i.Konva.Stage?g.getLayers():null);C||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){m.tween.onEnterFrame()},C),this.tween=new f(S,function(R){m._tweenFunc(R)},y,0,1,w*1e3,x),this._addListeners(),d.attrs[b]||(d.attrs[b]={}),d.attrs[b][this._id]||(d.attrs[b][this._id]={}),d.tweens[b]||(d.tweens[b]={});for(S in p)s[S]===void 0&&this._addAttr(S,p[S]);this.reset(),this.onFinish=p.onFinish,this.onReset=p.onReset,this.onUpdate=p.onUpdate}_addAttr(p,m){const g=this.node,b=g._id;let y,x,w,S,C;const R=d.tweens[b][p];R&&delete d.attrs[b][R][p];let I=g.getAttr(p);if(t.Util._isArray(m))if(y=[],x=Math.max(m.length,I.length),p==="points"&&m.length!==I.length&&(m.length>I.length?(S=I,I=t.Util._prepareArrayForTween(I,m,g.closed())):(w=m,m=t.Util._prepareArrayForTween(m,I,g.closed()))),p.indexOf("fill")===0)for(let O=0;O<x;O++)if(O%2===0)y.push(m[O]-I[O]);else{const M=t.Util.colorToRGBA(I[O]);C=t.Util.colorToRGBA(m[O]),I[O]=M,y.push({r:C.r-M.r,g:C.g-M.g,b:C.b-M.b,a:C.a-M.a})}else for(let O=0;O<x;O++)y.push(m[O]-I[O]);else l.indexOf(p)!==-1?(I=t.Util.colorToRGBA(I),C=t.Util.colorToRGBA(m),y={r:C.r-I.r,g:C.g-I.g,b:C.b-I.b,a:C.a-I.a}):y=m-I;d.attrs[b][this._id][p]={start:I,diff:y,end:m,trueEnd:w,trueStart:S},d.tweens[b][p]=this._id}_tweenFunc(p){const m=this.node,g=d.attrs[m._id][this._id];let b,y,x,w,S,C,R,I;for(b in g){if(y=g[b],x=y.start,w=y.diff,I=y.end,t.Util._isArray(x))if(S=[],R=Math.max(x.length,I.length),b.indexOf("fill")===0)for(C=0;C<R;C++)C%2===0?S.push((x[C]||0)+w[C]*p):S.push("rgba("+Math.round(x[C].r+w[C].r*p)+","+Math.round(x[C].g+w[C].g*p)+","+Math.round(x[C].b+w[C].b*p)+","+(x[C].a+w[C].a*p)+")");else for(C=0;C<R;C++)S.push((x[C]||0)+w[C]*p);else l.indexOf(b)!==-1?S="rgba("+Math.round(x.r+w.r*p)+","+Math.round(x.g+w.g*p)+","+Math.round(x.b+w.b*p)+","+(x.a+w.a*p)+")":S=x+w*p;m.setAttr(b,S)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const p=this.node,m=d.attrs[p._id][this._id];m.points&&m.points.trueEnd&&p.setAttr("points",m.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const p=this.node,m=d.attrs[p._id][this._id];m.points&&m.points.trueStart&&p.points(m.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(p){return this.tween.seek(p*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const p=this.node._id,m=this._id,g=d.tweens[p];this.pause();for(const b in g)delete d.tweens[p][b];delete d.attrs[p][m]}}e.Tween=d,d.attrs={},d.tweens={},r.Node.prototype.to=function(h){const p=h.onFinish;h.node=this,h.onFinish=function(){this.destroy(),p&&p()},new d(h).play()},e.Easings={BackEaseIn(h,p,m,g){return m*(h/=g)*h*((1.70158+1)*h-1.70158)+p},BackEaseOut(h,p,m,g){return m*((h=h/g-1)*h*((1.70158+1)*h+1.70158)+1)+p},BackEaseInOut(h,p,m,g){let b=1.70158;return(h/=g/2)<1?m/2*(h*h*(((b*=1.525)+1)*h-b))+p:m/2*((h-=2)*h*(((b*=1.525)+1)*h+b)+2)+p},ElasticEaseIn(h,p,m,g,b,y){let x=0;return h===0?p:(h/=g)===1?p+m:(y||(y=g*.3),!b||b<Math.abs(m)?(b=m,x=y/4):x=y/(2*Math.PI)*Math.asin(m/b),-(b*Math.pow(2,10*(h-=1))*Math.sin((h*g-x)*(2*Math.PI)/y))+p)},ElasticEaseOut(h,p,m,g,b,y){let x=0;return h===0?p:(h/=g)===1?p+m:(y||(y=g*.3),!b||b<Math.abs(m)?(b=m,x=y/4):x=y/(2*Math.PI)*Math.asin(m/b),b*Math.pow(2,-10*h)*Math.sin((h*g-x)*(2*Math.PI)/y)+m+p)},ElasticEaseInOut(h,p,m,g,b,y){let x=0;return h===0?p:(h/=g/2)===2?p+m:(y||(y=g*(.3*1.5)),!b||b<Math.abs(m)?(b=m,x=y/4):x=y/(2*Math.PI)*Math.asin(m/b),h<1?-.5*(b*Math.pow(2,10*(h-=1))*Math.sin((h*g-x)*(2*Math.PI)/y))+p:b*Math.pow(2,-10*(h-=1))*Math.sin((h*g-x)*(2*Math.PI)/y)*.5+m+p)},BounceEaseOut(h,p,m,g){return(h/=g)<1/2.75?m*(7.5625*h*h)+p:h<2/2.75?m*(7.5625*(h-=1.5/2.75)*h+.75)+p:h<2.5/2.75?m*(7.5625*(h-=2.25/2.75)*h+.9375)+p:m*(7.5625*(h-=2.625/2.75)*h+.984375)+p},BounceEaseIn(h,p,m,g){return m-e.Easings.BounceEaseOut(g-h,0,m,g)+p},BounceEaseInOut(h,p,m,g){return h<g/2?e.Easings.BounceEaseIn(h*2,0,m,g)*.5+p:e.Easings.BounceEaseOut(h*2-g,0,m,g)*.5+m*.5+p},EaseIn(h,p,m,g){return m*(h/=g)*h+p},EaseOut(h,p,m,g){return-m*(h/=g)*(h-2)+p},EaseInOut(h,p,m,g){return(h/=g/2)<1?m/2*h*h+p:-m/2*(--h*(h-2)-1)+p},StrongEaseIn(h,p,m,g){return m*(h/=g)*h*h*h*h+p},StrongEaseOut(h,p,m,g){return m*((h=h/g-1)*h*h*h*h+1)+p},StrongEaseInOut(h,p,m,g){return(h/=g/2)<1?m/2*h*h*h*h*h+p:m/2*((h-=2)*h*h*h*h+2)+p},Linear(h,p,m,g){return m*h/g+p}}}(lB)),lB}var tle;function iV(){return tle||(tle=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=Vr(),n=Xo(),r=_a(),i=CM(),s=u1t(),o=xSe(),a=l1t(),u=jK(),l=BK(),c=qu(),f=UK(),d=c1t(),h=vSe(),p=TM();e.Konva=n.Util._assign(t.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:i.Container,Stage:s.Stage,stages:s.stages,Layer:o.Layer,FastLayer:a.FastLayer,Group:u.Group,DD:l.DD,Shape:c.Shape,shapes:c.shapes,Animation:f.Animation,Tween:d.Tween,Easings:d.Easings,Context:h.Context,Canvas:p.Canvas}),e.default=e.Konva}(nB)),nB}var yA={},nle;function f1t(){if(nle)return yA;nle=1,Object.defineProperty(yA,"__esModule",{value:!0}),yA.Arc=void 0;const e=Yr(),t=qu(),n=Vr(),r=Zr(),i=Vr();let s=class extends t.Shape{_sceneFunc(a){const u=n.Konva.getAngle(this.angle()),l=this.clockwise();a.beginPath(),a.arc(0,0,this.outerRadius(),0,u,l),a.arc(0,0,this.innerRadius(),u,0,!l),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}getSelfRect(){const a=this.innerRadius(),u=this.outerRadius(),l=this.clockwise(),c=n.Konva.getAngle(l?360-this.angle():this.angle()),f=Math.cos(Math.min(c,Math.PI)),d=1,h=Math.sin(Math.min(Math.max(Math.PI,c),3*Math.PI/2)),p=Math.sin(Math.min(c,Math.PI/2)),m=f*(f>0?a:u),g=d*u,b=h*(h>0?a:u),y=p*(p>0?u:a);return{x:m,y:l?-1*y:b,width:g-m,height:y-b}}};return yA.Arc=s,s.prototype._centroid=!0,s.prototype.className="Arc",s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i._registerNode)(s),e.Factory.addGetterSetter(s,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"outerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"angle",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"clockwise",!1,(0,r.getBooleanValidator)()),yA}var vA={},bA={},rle;function _Se(){if(rle)return bA;rle=1,Object.defineProperty(bA,"__esModule",{value:!0}),bA.Line=void 0;const e=Yr(),t=Vr(),n=qu(),r=Zr();function i(a,u,l,c,f,d,h){const p=Math.sqrt(Math.pow(l-a,2)+Math.pow(c-u,2)),m=Math.sqrt(Math.pow(f-l,2)+Math.pow(d-c,2)),g=h*p/(p+m),b=h*m/(p+m),y=l-g*(f-a),x=c-g*(d-u),w=l+b*(f-a),S=c+b*(d-u);return[y,x,w,S]}function s(a,u){const l=a.length,c=[];for(let f=2;f<l-2;f+=2){const d=i(a[f-2],a[f-1],a[f],a[f+1],a[f+2],a[f+3],u);isNaN(d[0])||(c.push(d[0]),c.push(d[1]),c.push(a[f]),c.push(a[f+1]),c.push(d[2]),c.push(d[3]))}return c}class o extends n.Shape{constructor(u){super(u),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(u){let l=this.points(),c=l.length,f=this.tension(),d=this.closed(),h=this.bezier(),p,m,g;if(c){if(u.beginPath(),u.moveTo(l[0],l[1]),f!==0&&c>4){for(p=this.getTensionPoints(),m=p.length,g=d?0:4,d||u.quadraticCurveTo(p[0],p[1],p[2],p[3]);g<m-2;)u.bezierCurveTo(p[g++],p[g++],p[g++],p[g++],p[g++],p[g++]);d||u.quadraticCurveTo(p[m-2],p[m-1],l[c-2],l[c-1])}else if(h)for(g=2;g<c;)u.bezierCurveTo(l[g++],l[g++],l[g++],l[g++],l[g++],l[g++]);else for(g=2;g<c;g+=2)u.lineTo(l[g],l[g+1]);d?(u.closePath(),u.fillStrokeShape(this)):u.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():s(this.points(),this.tension())}_getTensionPointsClosed(){const u=this.points(),l=u.length,c=this.tension(),f=i(u[l-2],u[l-1],u[0],u[1],u[2],u[3],c),d=i(u[l-4],u[l-3],u[l-2],u[l-1],u[0],u[1],c),h=s(u,c);return[f[2],f[3]].concat(h).concat([d[0],d[1],u[l-2],u[l-1],d[2],d[3],f[0],f[1],u[0],u[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let u=this.points();if(u.length<4)return{x:u[0]||0,y:u[1]||0,width:0,height:0};this.tension()!==0?u=[u[0],u[1],...this._getTensionPoints(),u[u.length-2],u[u.length-1]]:u=this.points();let l=u[0],c=u[0],f=u[1],d=u[1],h,p;for(let m=0;m<u.length/2;m++)h=u[m*2],p=u[m*2+1],l=Math.min(l,h),c=Math.max(c,h),f=Math.min(f,p),d=Math.max(d,p);return{x:l,y:f,width:c-l,height:d-f}}}return bA.Line=o,o.prototype.className="Line",o.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(o),e.Factory.addGetterSetter(o,"closed",!1),e.Factory.addGetterSetter(o,"bezier",!1),e.Factory.addGetterSetter(o,"tension",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(o,"points",[],(0,r.getNumberArrayValidator)()),bA}var xA={},cB={},ile;function d1t(){return ile||(ile=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(o,a,u)=>{let l,c;const d=u/2;l=0;for(let h=0;h<20;h++)c=d*e.tValues[20][h]+d,l+=e.cValues[20][h]*r(o,a,c);return d*l};e.getCubicArcLength=t;const n=(o,a,u)=>{u===void 0&&(u=1);const l=o[0]-2*o[1]+o[2],c=a[0]-2*a[1]+a[2],f=2*o[1]-2*o[0],d=2*a[1]-2*a[0],h=4*(l*l+c*c),p=4*(l*f+c*d),m=f*f+d*d;if(h===0)return u*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(a[2]-a[0],2));const g=p/(2*h),b=m/h,y=u+g,x=b-g*g,w=y*y+x>0?Math.sqrt(y*y+x):0,S=g*g+x>0?Math.sqrt(g*g+x):0,C=g+Math.sqrt(g*g+x)!==0?x*Math.log(Math.abs((y+w)/(g+S))):0;return Math.sqrt(h)/2*(y*w-g*S+C)};e.getQuadraticArcLength=n;function r(o,a,u){const l=i(1,u,o),c=i(1,u,a),f=l*l+c*c;return Math.sqrt(f)}const i=(o,a,u)=>{const l=u.length-1;let c,f;if(l===0)return 0;if(o===0){f=0;for(let d=0;d<=l;d++)f+=e.binomialCoefficients[l][d]*Math.pow(1-a,l-d)*Math.pow(a,d)*u[d];return f}else{c=new Array(l);for(let d=0;d<l;d++)c[d]=l*(u[d+1]-u[d]);return i(o-1,a,c)}},s=(o,a,u)=>{let l=1,c=o/a,f=(o-u(c))/a,d=0;for(;l>.001;){const h=u(c+f),p=Math.abs(o-h)/a;if(p<l)l=p,c+=f;else{const m=u(c-f),g=Math.abs(o-m)/a;g<l?(l=g,c-=f):f/=2}if(d++,d>500)break}return c};e.t2length=s}(cB)),cB}var sle;function zK(){if(sle)return xA;sle=1,Object.defineProperty(xA,"__esModule",{value:!0}),xA.Path=void 0;const e=Yr(),t=qu(),n=Vr(),r=d1t();let i=class Vf extends t.Shape{constructor(o){super(o),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Vf.parsePathData(this.data()),this.pathLength=Vf.getPathLength(this.dataArray)}_sceneFunc(o){const a=this.dataArray;o.beginPath();let u=!1;for(let w=0;w<a.length;w++){const S=a[w].command,C=a[w].points;switch(S){case"L":o.lineTo(C[0],C[1]);break;case"M":o.moveTo(C[0],C[1]);break;case"C":o.bezierCurveTo(C[0],C[1],C[2],C[3],C[4],C[5]);break;case"Q":o.quadraticCurveTo(C[0],C[1],C[2],C[3]);break;case"A":var l=C[0],c=C[1],f=C[2],d=C[3],h=C[4],p=C[5],m=C[6],g=C[7],b=f>d?f:d,y=f>d?1:f/d,x=f>d?d/f:1;o.translate(l,c),o.rotate(m),o.scale(y,x),o.arc(0,0,b,h,h+p,1-g),o.scale(1/y,1/x),o.rotate(-m),o.translate(-l,-c);break;case"z":u=!0,o.closePath();break}}!u&&!this.hasFill()?o.strokeShape(this):o.fillStrokeShape(this)}getSelfRect(){let o=[];this.dataArray.forEach(function(h){if(h.command==="A"){const p=h.points[4],m=h.points[5],g=h.points[4]+m;let b=Math.PI/180;if(Math.abs(p-g)<b&&(b=Math.abs(p-g)),m<0)for(let y=p-b;y>g;y-=b){const x=Vf.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],y,0);o.push(x.x,x.y)}else for(let y=p+b;y<g;y+=b){const x=Vf.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],y,0);o.push(x.x,x.y)}}else if(h.command==="C")for(let p=0;p<=1;p+=.01){const m=Vf.getPointOnCubicBezier(p,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3],h.points[4],h.points[5]);o.push(m.x,m.y)}else o=o.concat(h.points)});let a=o[0],u=o[0],l=o[1],c=o[1],f,d;for(let h=0;h<o.length/2;h++)f=o[h*2],d=o[h*2+1],isNaN(f)||(a=Math.min(a,f),u=Math.max(u,f)),isNaN(d)||(l=Math.min(l,d),c=Math.max(c,d));return{x:a,y:l,width:u-a,height:c-l}}getLength(){return this.pathLength}getPointAtLength(o){return Vf.getPointAtLengthOfDataArray(o,this.dataArray)}static getLineLength(o,a,u,l){return Math.sqrt((u-o)*(u-o)+(l-a)*(l-a))}static getPathLength(o){let a=0;for(let u=0;u<o.length;++u)a+=o[u].pathLength;return a}static getPointAtLengthOfDataArray(o,a){let u,l=0,c=a.length;if(!c)return null;for(;l<c&&o>a[l].pathLength;)o-=a[l].pathLength,++l;if(l===c)return u=a[l-1].points.slice(-2),{x:u[0],y:u[1]};if(o<.01)return u=a[l].points.slice(0,2),{x:u[0],y:u[1]};const f=a[l],d=f.points;switch(f.command){case"L":return Vf.getPointOnLine(o,f.start.x,f.start.y,d[0],d[1]);case"C":return Vf.getPointOnCubicBezier((0,r.t2length)(o,Vf.getPathLength(a),w=>(0,r.getCubicArcLength)([f.start.x,d[0],d[2],d[4]],[f.start.y,d[1],d[3],d[5]],w)),f.start.x,f.start.y,d[0],d[1],d[2],d[3],d[4],d[5]);case"Q":return Vf.getPointOnQuadraticBezier((0,r.t2length)(o,Vf.getPathLength(a),w=>(0,r.getQuadraticArcLength)([f.start.x,d[0],d[2]],[f.start.y,d[1],d[3]],w)),f.start.x,f.start.y,d[0],d[1],d[2],d[3]);case"A":var h=d[0],p=d[1],m=d[2],g=d[3],b=d[4],y=d[5],x=d[6];return b+=y*o/f.pathLength,Vf.getPointOnEllipticalArc(h,p,m,g,b,x)}return null}static getPointOnLine(o,a,u,l,c,f,d){f=f??a,d=d??u;const h=this.getLineLength(a,u,l,c);if(h<1e-10)return{x:a,y:u};if(l===a)return{x:f,y:d+(c>u?o:-o)};const p=(c-u)/(l-a),m=Math.sqrt(o*o/(1+p*p))*(l<a?-1:1),g=p*m;if(Math.abs(d-u-p*(f-a))<1e-10)return{x:f+m,y:d+g};const b=((f-a)*(l-a)+(d-u)*(c-u))/(h*h),y=a+b*(l-a),x=u+b*(c-u),w=this.getLineLength(f,d,y,x),S=Math.sqrt(o*o-w*w),C=Math.sqrt(S*S/(1+p*p))*(l<a?-1:1),R=p*C;return{x:y+C,y:x+R}}static getPointOnCubicBezier(o,a,u,l,c,f,d,h,p){function m(S){return S*S*S}function g(S){return 3*S*S*(1-S)}function b(S){return 3*S*(1-S)*(1-S)}function y(S){return(1-S)*(1-S)*(1-S)}const x=h*m(o)+f*g(o)+l*b(o)+a*y(o),w=p*m(o)+d*g(o)+c*b(o)+u*y(o);return{x,y:w}}static getPointOnQuadraticBezier(o,a,u,l,c,f,d){function h(y){return y*y}function p(y){return 2*y*(1-y)}function m(y){return(1-y)*(1-y)}const g=f*h(o)+l*p(o)+a*m(o),b=d*h(o)+c*p(o)+u*m(o);return{x:g,y:b}}static getPointOnEllipticalArc(o,a,u,l,c,f){const d=Math.cos(f),h=Math.sin(f),p={x:u*Math.cos(c),y:l*Math.sin(c)};return{x:o+(p.x*d-p.y*h),y:a+(p.x*h+p.y*d)}}static parsePathData(o){if(!o)return[];let a=o;const u=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];a=a.replace(new RegExp(" ","g"),",");for(var l=0;l<u.length;l++)a=a.replace(new RegExp(u[l],"g"),"|"+u[l]);const c=a.split("|"),f=[],d=[];let h=0,p=0;const m=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let g;for(l=1;l<c.length;l++){let D=c[l],B=D.charAt(0);for(D=D.slice(1),d.length=0;g=m.exec(D);)d.push(g[0]);const z=[];for(let G=0,Z=d.length;G<Z;G++){if(d[G]==="00"){z.push(0,0);continue}const ne=parseFloat(d[G]);isNaN(ne)?z.push(0):z.push(ne)}for(;z.length>0&&!isNaN(z[0]);){let G="",Z=[];const ne=h,ue=p;var b,y,x,w,S,C,R,I,O,M;switch(B){case"l":h+=z.shift(),p+=z.shift(),G="L",Z.push(h,p);break;case"L":h=z.shift(),p=z.shift(),Z.push(h,p);break;case"m":var L=z.shift(),H=z.shift();if(h+=L,p+=H,G="M",f.length>2&&f[f.length-1].command==="z"){for(let X=f.length-2;X>=0;X--)if(f[X].command==="M"){h=f[X].points[0]+L,p=f[X].points[1]+H;break}}Z.push(h,p),B="l";break;case"M":h=z.shift(),p=z.shift(),G="M",Z.push(h,p),B="L";break;case"h":h+=z.shift(),G="L",Z.push(h,p);break;case"H":h=z.shift(),G="L",Z.push(h,p);break;case"v":p+=z.shift(),G="L",Z.push(h,p);break;case"V":p=z.shift(),G="L",Z.push(h,p);break;case"C":Z.push(z.shift(),z.shift(),z.shift(),z.shift()),h=z.shift(),p=z.shift(),Z.push(h,p);break;case"c":Z.push(h+z.shift(),p+z.shift(),h+z.shift(),p+z.shift()),h+=z.shift(),p+=z.shift(),G="C",Z.push(h,p);break;case"S":y=h,x=p,b=f[f.length-1],b.command==="C"&&(y=h+(h-b.points[2]),x=p+(p-b.points[3])),Z.push(y,x,z.shift(),z.shift()),h=z.shift(),p=z.shift(),G="C",Z.push(h,p);break;case"s":y=h,x=p,b=f[f.length-1],b.command==="C"&&(y=h+(h-b.points[2]),x=p+(p-b.points[3])),Z.push(y,x,h+z.shift(),p+z.shift()),h+=z.shift(),p+=z.shift(),G="C",Z.push(h,p);break;case"Q":Z.push(z.shift(),z.shift()),h=z.shift(),p=z.shift(),Z.push(h,p);break;case"q":Z.push(h+z.shift(),p+z.shift()),h+=z.shift(),p+=z.shift(),G="Q",Z.push(h,p);break;case"T":y=h,x=p,b=f[f.length-1],b.command==="Q"&&(y=h+(h-b.points[0]),x=p+(p-b.points[1])),h=z.shift(),p=z.shift(),G="Q",Z.push(y,x,h,p);break;case"t":y=h,x=p,b=f[f.length-1],b.command==="Q"&&(y=h+(h-b.points[0]),x=p+(p-b.points[1])),h+=z.shift(),p+=z.shift(),G="Q",Z.push(y,x,h,p);break;case"A":w=z.shift(),S=z.shift(),C=z.shift(),R=z.shift(),I=z.shift(),O=h,M=p,h=z.shift(),p=z.shift(),G="A",Z=this.convertEndpointToCenterParameterization(O,M,h,p,R,I,w,S,C);break;case"a":w=z.shift(),S=z.shift(),C=z.shift(),R=z.shift(),I=z.shift(),O=h,M=p,h+=z.shift(),p+=z.shift(),G="A",Z=this.convertEndpointToCenterParameterization(O,M,h,p,R,I,w,S,C);break}f.push({command:G||B,points:Z,start:{x:ne,y:ue},pathLength:this.calcLength(ne,ue,G||B,Z)})}(B==="z"||B==="Z")&&f.push({command:"z",points:[],start:void 0,pathLength:0})}return f}static calcLength(o,a,u,l){let c,f,d,h;const p=Vf;switch(u){case"L":return p.getLineLength(o,a,l[0],l[1]);case"C":return(0,r.getCubicArcLength)([o,l[0],l[2],l[4]],[a,l[1],l[3],l[5]],1);case"Q":return(0,r.getQuadraticArcLength)([o,l[0],l[2]],[a,l[1],l[3]],1);case"A":c=0;var m=l[4],g=l[5],b=l[4]+g,y=Math.PI/180;if(Math.abs(m-b)<y&&(y=Math.abs(m-b)),f=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],m,0),g<0)for(h=m-y;h>b;h-=y)d=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],h,0),c+=p.getLineLength(f.x,f.y,d.x,d.y),f=d;else for(h=m+y;h<b;h+=y)d=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],h,0),c+=p.getLineLength(f.x,f.y,d.x,d.y),f=d;return d=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],b,0),c+=p.getLineLength(f.x,f.y,d.x,d.y),c}return 0}static convertEndpointToCenterParameterization(o,a,u,l,c,f,d,h,p){const m=p*(Math.PI/180),g=Math.cos(m)*(o-u)/2+Math.sin(m)*(a-l)/2,b=-1*Math.sin(m)*(o-u)/2+Math.cos(m)*(a-l)/2,y=g*g/(d*d)+b*b/(h*h);y>1&&(d*=Math.sqrt(y),h*=Math.sqrt(y));let x=Math.sqrt((d*d*(h*h)-d*d*(b*b)-h*h*(g*g))/(d*d*(b*b)+h*h*(g*g)));c===f&&(x*=-1),isNaN(x)&&(x=0);const w=x*d*b/h,S=x*-h*g/d,C=(o+u)/2+Math.cos(m)*w-Math.sin(m)*S,R=(a+l)/2+Math.sin(m)*w+Math.cos(m)*S,I=function(z){return Math.sqrt(z[0]*z[0]+z[1]*z[1])},O=function(z,G){return(z[0]*G[0]+z[1]*G[1])/(I(z)*I(G))},M=function(z,G){return(z[0]*G[1]<z[1]*G[0]?-1:1)*Math.acos(O(z,G))},L=M([1,0],[(g-w)/d,(b-S)/h]),H=[(g-w)/d,(b-S)/h],D=[(-1*g-w)/d,(-1*b-S)/h];let B=M(H,D);return O(H,D)<=-1&&(B=Math.PI),O(H,D)>=1&&(B=0),f===0&&B>0&&(B=B-2*Math.PI),f===1&&B<0&&(B=B+2*Math.PI),[C,R,d,h,L,B,m,f]}};return xA.Path=i,i.prototype.className="Path",i.prototype._attrsAffectingSize=["data"],(0,n._registerNode)(i),e.Factory.addGetterSetter(i,"data"),xA}var ole;function h1t(){if(ole)return vA;ole=1,Object.defineProperty(vA,"__esModule",{value:!0}),vA.Arrow=void 0;const e=Yr(),t=_Se(),n=Zr(),r=Vr(),i=zK();let s=class extends t.Line{_sceneFunc(a){super._sceneFunc(a);const u=Math.PI*2,l=this.points();let c=l;const f=this.tension()!==0&&l.length>4;f&&(c=this.getTensionPoints());const d=this.pointerLength(),h=l.length;let p,m;if(f){const y=[c[c.length-4],c[c.length-3],c[c.length-2],c[c.length-1],l[h-2],l[h-1]],x=i.Path.calcLength(c[c.length-4],c[c.length-3],"C",y),w=i.Path.getPointOnQuadraticBezier(Math.min(1,1-d/x),y[0],y[1],y[2],y[3],y[4],y[5]);p=l[h-2]-w.x,m=l[h-1]-w.y}else p=l[h-2]-l[h-4],m=l[h-1]-l[h-3];const g=(Math.atan2(m,p)+u)%u,b=this.pointerWidth();this.pointerAtEnding()&&(a.save(),a.beginPath(),a.translate(l[h-2],l[h-1]),a.rotate(g),a.moveTo(0,0),a.lineTo(-d,b/2),a.lineTo(-d,-b/2),a.closePath(),a.restore(),this.__fillStroke(a)),this.pointerAtBeginning()&&(a.save(),a.beginPath(),a.translate(l[0],l[1]),f?(p=(c[0]+c[2])/2-l[0],m=(c[1]+c[3])/2-l[1]):(p=l[2]-l[0],m=l[3]-l[1]),a.rotate((Math.atan2(-m,-p)+u)%u),a.moveTo(0,0),a.lineTo(-d,b/2),a.lineTo(-d,-b/2),a.closePath(),a.restore(),this.__fillStroke(a))}__fillStroke(a){const u=this.dashEnabled();u&&(this.attrs.dashEnabled=!1,a.setLineDash([])),a.fillStrokeShape(this),u&&(this.attrs.dashEnabled=!0)}getSelfRect(){const a=super.getSelfRect(),u=this.pointerWidth()/2;return{x:a.x,y:a.y-u,width:a.width,height:a.height+u*2}}};return vA.Arrow=s,s.prototype.className="Arrow",(0,r._registerNode)(s),e.Factory.addGetterSetter(s,"pointerLength",10,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"pointerWidth",10,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"pointerAtBeginning",!1),e.Factory.addGetterSetter(s,"pointerAtEnding",!0),vA}var _A={},ale;function p1t(){if(ale)return _A;ale=1,Object.defineProperty(_A,"__esModule",{value:!0}),_A.Circle=void 0;const e=Yr(),t=qu(),n=Zr(),r=Vr();class i extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius()!==o/2&&this.radius(o/2)}setHeight(o){this.radius()!==o/2&&this.radius(o/2)}}return _A.Circle=i,i.prototype._centroid=!0,i.prototype.className="Circle",i.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(i),e.Factory.addGetterSetter(i,"radius",0,(0,n.getNumberValidator)()),_A}var wA={},ule;function m1t(){if(ule)return wA;ule=1,Object.defineProperty(wA,"__esModule",{value:!0}),wA.Ellipse=void 0;const e=Yr(),t=qu(),n=Zr(),r=Vr();let i=class extends t.Shape{_sceneFunc(o){const a=this.radiusX(),u=this.radiusY();o.beginPath(),o.save(),a!==u&&o.scale(1,u/a),o.arc(0,0,a,0,Math.PI*2,!1),o.restore(),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(o){this.radiusX(o/2)}setHeight(o){this.radiusY(o/2)}};return wA.Ellipse=i,i.prototype.className="Ellipse",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,r._registerNode)(i),e.Factory.addComponentsGetterSetter(i,"radius",["x","y"]),e.Factory.addGetterSetter(i,"radiusX",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"radiusY",0,(0,n.getNumberValidator)()),wA}var EA={},lle;function g1t(){if(lle)return EA;lle=1,Object.defineProperty(EA,"__esModule",{value:!0}),EA.Image=void 0;const e=Xo(),t=Yr(),n=qu(),r=Vr(),i=Zr();class s extends n.Shape{constructor(a){super(a),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const a=this.image();a&&a.complete||a&&a.readyState===4||a&&a.addEventListener&&a.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){const a=!!this.cornerRadius(),u=this.hasShadow();return a&&u?!0:super._useBufferCanvas(!0)}_sceneFunc(a){const u=this.getWidth(),l=this.getHeight(),c=this.cornerRadius(),f=this.attrs.image;let d;if(f){const h=this.attrs.cropWidth,p=this.attrs.cropHeight;h&&p?d=[f,this.cropX(),this.cropY(),h,p,0,0,u,l]:d=[f,0,0,u,l]}(this.hasFill()||this.hasStroke()||c)&&(a.beginPath(),c?e.Util.drawRoundedRectPath(a,u,l,c):a.rect(0,0,u,l),a.closePath(),a.fillStrokeShape(this)),f&&(c&&a.clip(),a.drawImage.apply(a,d))}_hitFunc(a){const u=this.width(),l=this.height(),c=this.cornerRadius();a.beginPath(),c?e.Util.drawRoundedRectPath(a,u,l,c):a.rect(0,0,u,l),a.closePath(),a.fillStrokeShape(this)}getWidth(){var a,u;return(a=this.attrs.width)!==null&&a!==void 0?a:(u=this.image())===null||u===void 0?void 0:u.width}getHeight(){var a,u;return(a=this.attrs.height)!==null&&a!==void 0?a:(u=this.image())===null||u===void 0?void 0:u.height}static fromURL(a,u,l=null){const c=e.Util.createImageElement();c.onload=function(){const f=new s({image:c});u(f)},c.onerror=l,c.crossOrigin="Anonymous",c.src=a}}return EA.Image=s,s.prototype.className="Image",(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(s,"image"),t.Factory.addComponentsGetterSetter(s,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(s,"cropX",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"cropY",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"cropWidth",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"cropHeight",0,(0,i.getNumberValidator)()),EA}var Ux={},cle;function y1t(){if(cle)return Ux;cle=1,Object.defineProperty(Ux,"__esModule",{value:!0}),Ux.Tag=Ux.Label=void 0;const e=Yr(),t=qu(),n=jK(),r=Zr(),i=Vr(),s=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],o="Change.konva",a="none",u="up",l="right",c="down",f="left",d=s.length;class h extends n.Group{constructor(g){super(g),this.on("add.konva",function(b){this._addListeners(b.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(g){let b=this,y;const x=function(){b._sync()};for(y=0;y<d;y++)g.on(s[y]+o,x)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let g=this.getText(),b=this.getTag(),y,x,w,S,C,R,I;if(g&&b){switch(y=g.width(),x=g.height(),w=b.pointerDirection(),S=b.pointerWidth(),I=b.pointerHeight(),C=0,R=0,w){case u:C=y/2,R=-1*I;break;case l:C=y+S,R=x/2;break;case c:C=y/2,R=x+I;break;case f:C=-1*S,R=x/2;break}b.setAttrs({x:-1*C,y:-1*R,width:y,height:x}),g.setAttrs({x:-1*C,y:-1*R})}}}Ux.Label=h,h.prototype.className="Label",(0,i._registerNode)(h);class p extends t.Shape{_sceneFunc(g){const b=this.width(),y=this.height(),x=this.pointerDirection(),w=this.pointerWidth(),S=this.pointerHeight(),C=this.cornerRadius();let R=0,I=0,O=0,M=0;typeof C=="number"?R=I=O=M=Math.min(C,b/2,y/2):(R=Math.min(C[0]||0,b/2,y/2),I=Math.min(C[1]||0,b/2,y/2),M=Math.min(C[2]||0,b/2,y/2),O=Math.min(C[3]||0,b/2,y/2)),g.beginPath(),g.moveTo(R,0),x===u&&(g.lineTo((b-w)/2,0),g.lineTo(b/2,-1*S),g.lineTo((b+w)/2,0)),g.lineTo(b-I,0),g.arc(b-I,I,I,Math.PI*3/2,0,!1),x===l&&(g.lineTo(b,(y-S)/2),g.lineTo(b+w,y/2),g.lineTo(b,(y+S)/2)),g.lineTo(b,y-M),g.arc(b-M,y-M,M,0,Math.PI/2,!1),x===c&&(g.lineTo((b+w)/2,y),g.lineTo(b/2,y+S),g.lineTo((b-w)/2,y)),g.lineTo(O,y),g.arc(O,y-O,O,Math.PI/2,Math.PI,!1),x===f&&(g.lineTo(0,(y+S)/2),g.lineTo(-1*w,y/2),g.lineTo(0,(y-S)/2)),g.lineTo(0,R),g.arc(R,R,R,Math.PI,Math.PI*3/2,!1),g.closePath(),g.fillStrokeShape(this)}getSelfRect(){let g=0,b=0,y=this.pointerWidth(),x=this.pointerHeight(),w=this.pointerDirection(),S=this.width(),C=this.height();return w===u?(b-=x,C+=x):w===c?C+=x:w===f?(g-=y*1.5,S+=y):w===l&&(S+=y*1.5),{x:g,y:b,width:S,height:C}}}return Ux.Tag=p,p.prototype.className="Tag",(0,i._registerNode)(p),e.Factory.addGetterSetter(p,"pointerDirection",a),e.Factory.addGetterSetter(p,"pointerWidth",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(p,"pointerHeight",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(p,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),Ux}var SA={},fle;function wSe(){if(fle)return SA;fle=1,Object.defineProperty(SA,"__esModule",{value:!0}),SA.Rect=void 0;const e=Yr(),t=qu(),n=Vr(),r=Xo(),i=Zr();let s=class extends t.Shape{_sceneFunc(a){const u=this.cornerRadius(),l=this.width(),c=this.height();a.beginPath(),u?r.Util.drawRoundedRectPath(a,l,c,u):a.rect(0,0,l,c),a.closePath(),a.fillStrokeShape(this)}};return SA.Rect=s,s.prototype.className="Rect",(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),SA}var TA={},dle;function v1t(){if(dle)return TA;dle=1,Object.defineProperty(TA,"__esModule",{value:!0}),TA.RegularPolygon=void 0;const e=Yr(),t=qu(),n=Zr(),r=Vr();let i=class extends t.Shape{_sceneFunc(o){const a=this._getPoints();o.beginPath(),o.moveTo(a[0].x,a[0].y);for(let u=1;u<a.length;u++)o.lineTo(a[u].x,a[u].y);o.closePath(),o.fillStrokeShape(this)}_getPoints(){const o=this.attrs.sides,a=this.attrs.radius||0,u=[];for(let l=0;l<o;l++)u.push({x:a*Math.sin(l*2*Math.PI/o),y:-1*a*Math.cos(l*2*Math.PI/o)});return u}getSelfRect(){const o=this._getPoints();let a=o[0].x,u=o[0].y,l=o[0].x,c=o[0].y;return o.forEach(f=>{a=Math.min(a,f.x),u=Math.max(u,f.x),l=Math.min(l,f.y),c=Math.max(c,f.y)}),{x:a,y:l,width:u-a,height:c-l}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}};return TA.RegularPolygon=i,i.prototype.className="RegularPolygon",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(i),e.Factory.addGetterSetter(i,"radius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"sides",0,(0,n.getNumberValidator)()),TA}var CA={},hle;function b1t(){if(hle)return CA;hle=1,Object.defineProperty(CA,"__esModule",{value:!0}),CA.Ring=void 0;const e=Yr(),t=qu(),n=Zr(),r=Vr(),i=Math.PI*2;let s=class extends t.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.innerRadius(),0,i,!1),a.moveTo(this.outerRadius(),0),a.arc(0,0,this.outerRadius(),i,0,!0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return CA.Ring=s,s.prototype.className="Ring",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(s),e.Factory.addGetterSetter(s,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"outerRadius",0,(0,n.getNumberValidator)()),CA}var AA={},ple;function x1t(){if(ple)return AA;ple=1,Object.defineProperty(AA,"__esModule",{value:!0}),AA.Sprite=void 0;const e=Yr(),t=qu(),n=UK(),r=Zr(),i=Vr();let s=class extends t.Shape{constructor(a){super(a),this._updated=!0,this.anim=new n.Animation(()=>{const u=this._updated;return this._updated=!1,u}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(a){const u=this.animation(),l=this.frameIndex(),c=l*4,f=this.animations()[u],d=this.frameOffsets(),h=f[c+0],p=f[c+1],m=f[c+2],g=f[c+3],b=this.image();if((this.hasFill()||this.hasStroke())&&(a.beginPath(),a.rect(0,0,m,g),a.closePath(),a.fillStrokeShape(this)),b)if(d){const y=d[u],x=l*2;a.drawImage(b,h,p,m,g,y[x+0],y[x+1],m,g)}else a.drawImage(b,h,p,m,g,0,0,m,g)}_hitFunc(a){const u=this.animation(),l=this.frameIndex(),c=l*4,f=this.animations()[u],d=this.frameOffsets(),h=f[c+2],p=f[c+3];if(a.beginPath(),d){const m=d[u],g=l*2;a.rect(m[g+0],m[g+1],h,p)}else a.rect(0,0,h,p);a.closePath(),a.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const a=this;this.interval=setInterval(function(){a._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const a=this.getLayer();this.anim.setLayers(a),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const a=this.frameIndex(),u=this.animation(),l=this.animations(),c=l[u],f=c.length/4;a<f-1?this.frameIndex(a+1):this.frameIndex(0)}};return AA.Sprite=s,s.prototype.className="Sprite",(0,i._registerNode)(s),e.Factory.addGetterSetter(s,"animation"),e.Factory.addGetterSetter(s,"animations"),e.Factory.addGetterSetter(s,"frameOffsets"),e.Factory.addGetterSetter(s,"image"),e.Factory.addGetterSetter(s,"frameIndex",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"frameRate",17,(0,r.getNumberValidator)()),e.Factory.backCompat(s,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),AA}var kA={},mle;function _1t(){if(mle)return kA;mle=1,Object.defineProperty(kA,"__esModule",{value:!0}),kA.Star=void 0;const e=Yr(),t=qu(),n=Zr(),r=Vr();let i=class extends t.Shape{_sceneFunc(o){const a=this.innerRadius(),u=this.outerRadius(),l=this.numPoints();o.beginPath(),o.moveTo(0,0-u);for(let c=1;c<l*2;c++){const f=c%2===0?u:a,d=f*Math.sin(c*Math.PI/l),h=-1*f*Math.cos(c*Math.PI/l);o.lineTo(d,h)}o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}};return kA.Star=i,i.prototype.className="Star",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(i),e.Factory.addGetterSetter(i,"numPoints",5,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"outerRadius",0,(0,n.getNumberValidator)()),kA}var J2={},gle;function ESe(){if(gle)return J2;gle=1,Object.defineProperty(J2,"__esModule",{value:!0}),J2.Text=void 0,J2.stringToArray=o;const e=Xo(),t=Yr(),n=qu(),r=Vr(),i=Zr(),s=Vr();function o(te){return[...te].reduce((W,ee,oe,pe)=>{if(new RegExp("\\p{Emoji}","u").test(ee)){const ce=pe[oe+1];ce&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(ce)?(W.push(ee+ce),pe[oe+1]=""):W.push(ee)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(ee+(pe[oe+1]||""))?W.push(ee+pe[oe+1]):oe>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(ee)?W[W.length-1]+=ee:ee&&W.push(ee);return W},[])}const a="auto",u="center",l="inherit",c="justify",f="Change.konva",d="2d",h="-",p="left",m="text",g="Text",b="top",y="bottom",x="middle",w="normal",S="px ",C=" ",R="right",I="rtl",O="word",M="char",L="none",H="",D=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],B=D.length;function z(te){return te.split(",").map(W=>{W=W.trim();const ee=W.indexOf(" ")>=0,oe=W.indexOf('"')>=0||W.indexOf("'")>=0;return ee&&!oe&&(W=`"${W}"`),W}).join(", ")}let G;function Z(){return G||(G=e.Util.createCanvasElement().getContext(d),G)}function ne(te){te.fillText(this._partialText,this._partialTextX,this._partialTextY)}function ue(te){te.setAttr("miterLimit",2),te.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function X(te){return te=te||{},!te.fillLinearGradientColorStops&&!te.fillRadialGradientColorStops&&!te.fillPatternImage&&(te.fill=te.fill||"black"),te}let q=class extends n.Shape{constructor(W){super(X(W)),this._partialTextX=0,this._partialTextY=0;for(let ee=0;ee<B;ee++)this.on(D[ee]+f,this._setTextData);this._setTextData()}_sceneFunc(W){const ee=this.textArr,oe=ee.length;if(!this.text())return;let pe=this.padding(),ce=this.fontSize(),he=this.lineHeight()*ce,Ee=this.verticalAlign(),Ae=this.direction(),ge=0,me=this.align(),Oe=this.getWidth(),Me=this.letterSpacing(),Ye=this.fill(),lt=this.textDecoration(),We=lt.indexOf("underline")!==-1,nt=lt.indexOf("line-through")!==-1,yt;Ae=Ae===l?W.direction:Ae;let _t=he/2,It=x;if(r.Konva._fixTextRendering){const Wt=this.measureSize("M");It="alphabetic",_t=(Wt.fontBoundingBoxAscent-Wt.fontBoundingBoxDescent)/2+he/2}var Et=0,Ke=0;for(Ae===I&&W.setAttr("direction",Ae),W.setAttr("font",this._getContextFont()),W.setAttr("textBaseline",It),W.setAttr("textAlign",p),Ee===x?ge=(this.getHeight()-oe*he-pe*2)/2:Ee===y&&(ge=this.getHeight()-oe*he-pe*2),W.translate(pe,ge+pe),yt=0;yt<oe;yt++){var Et=0,Ke=0,Lt=ee[yt],sn=Lt.text,Fe=Lt.width,Qe=Lt.lastInParagraph,wt,Vt;if(W.save(),me===R?Et+=Oe-Fe-pe*2:me===u&&(Et+=(Oe-Fe-pe*2)/2),We){W.save(),W.beginPath();const Dn=r.Konva._fixTextRendering?Math.round(ce/4):Math.round(ce/2),Zn=Et,wr=_t+Ke+Dn;W.moveTo(Zn,wr),wt=sn.split(" ").length-1,Vt=me===c&&!Qe?Oe-pe*2:Fe,W.lineTo(Zn+Math.round(Vt),wr),W.lineWidth=ce/15;const Hn=this._getLinearGradient();W.strokeStyle=Hn||Ye,W.stroke(),W.restore()}if(nt){W.save(),W.beginPath();const Dn=r.Konva._fixTextRendering?-Math.round(ce/4):0;W.moveTo(Et,_t+Ke+Dn),wt=sn.split(" ").length-1,Vt=me===c&&!Qe?Oe-pe*2:Fe,W.lineTo(Et+Math.round(Vt),_t+Ke+Dn),W.lineWidth=ce/15;const Zn=this._getLinearGradient();W.strokeStyle=Zn||Ye,W.stroke(),W.restore()}if(Ae!==I&&(Me!==0||me===c)){wt=sn.split(" ").length-1;const Dn=o(sn);for(let Zn=0;Zn<Dn.length;Zn++){const wr=Dn[Zn];wr===" "&&!Qe&&me===c&&(Et+=(Oe-pe*2-Fe)/wt),this._partialTextX=Et,this._partialTextY=_t+Ke,this._partialText=wr,W.fillStrokeShape(this),Et+=this.measureSize(wr).width+Me}}else Me!==0&&W.setAttr("letterSpacing",`${Me}px`),this._partialTextX=Et,this._partialTextY=_t+Ke,this._partialText=sn,W.fillStrokeShape(this);W.restore(),oe>1&&(_t+=he)}}_hitFunc(W){const ee=this.getWidth(),oe=this.getHeight();W.beginPath(),W.rect(0,0,ee,oe),W.closePath(),W.fillStrokeShape(this)}setText(W){const ee=e.Util._isString(W)?W:W==null?"":W+"";return this._setAttr(m,ee),this}getWidth(){return this.attrs.width===a||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===a||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(W){var ee,oe,pe,ce,he,Ee,Ae,ge,me,Oe,Me;let Ye=Z(),lt=this.fontSize(),We;Ye.save(),Ye.font=this._getContextFont(),We=Ye.measureText(W),Ye.restore();const nt=lt/100;return{actualBoundingBoxAscent:(ee=We.actualBoundingBoxAscent)!==null&&ee!==void 0?ee:71.58203125*nt,actualBoundingBoxDescent:(oe=We.actualBoundingBoxDescent)!==null&&oe!==void 0?oe:0,actualBoundingBoxLeft:(pe=We.actualBoundingBoxLeft)!==null&&pe!==void 0?pe:-7.421875*nt,actualBoundingBoxRight:(ce=We.actualBoundingBoxRight)!==null&&ce!==void 0?ce:75.732421875*nt,alphabeticBaseline:(he=We.alphabeticBaseline)!==null&&he!==void 0?he:0,emHeightAscent:(Ee=We.emHeightAscent)!==null&&Ee!==void 0?Ee:100*nt,emHeightDescent:(Ae=We.emHeightDescent)!==null&&Ae!==void 0?Ae:-20*nt,fontBoundingBoxAscent:(ge=We.fontBoundingBoxAscent)!==null&&ge!==void 0?ge:91*nt,fontBoundingBoxDescent:(me=We.fontBoundingBoxDescent)!==null&&me!==void 0?me:21*nt,hangingBaseline:(Oe=We.hangingBaseline)!==null&&Oe!==void 0?Oe:72.80000305175781*nt,ideographicBaseline:(Me=We.ideographicBaseline)!==null&&Me!==void 0?Me:-21*nt,width:We.width,height:lt}}_getContextFont(){return this.fontStyle()+C+this.fontVariant()+C+(this.fontSize()+S)+z(this.fontFamily())}_addTextLine(W){this.align()===c&&(W=W.trim());const oe=this._getTextWidth(W);return this.textArr.push({text:W,width:oe,lastInParagraph:!1})}_getTextWidth(W){const ee=this.letterSpacing(),oe=W.length;return Z().measureText(W).width+ee*oe}_setTextData(){let W=this.text().split(`
`),ee=+this.fontSize(),oe=0,pe=this.lineHeight()*ee,ce=this.attrs.width,he=this.attrs.height,Ee=ce!==a&&ce!==void 0,Ae=he!==a&&he!==void 0,ge=this.padding(),me=ce-ge*2,Oe=he-ge*2,Me=0,Ye=this.wrap(),lt=Ye!==L,We=Ye!==M&&lt,nt=this.ellipsis();this.textArr=[],Z().font=this._getContextFont();const yt=nt?this._getTextWidth(H):0;for(let _t=0,It=W.length;_t<It;++_t){let Et=W[_t],Ke=this._getTextWidth(Et);if(Ee&&Ke>me)for(;Et.length>0;){let Lt=0,sn=o(Et).length,Fe="",Qe=0;for(;Lt<sn;){const wt=Lt+sn>>>1,Vt=o(Et),Wt=Vt.slice(0,wt+1).join(""),bn=this._getTextWidth(Wt)+yt;bn<=me?(Lt=wt+1,Fe=Wt,Qe=bn):sn=wt}if(Fe){if(We){const Wt=o(Et),bn=o(Fe),Dn=Wt[bn.length],Zn=Dn===C||Dn===h;let wr;if(Zn&&Qe<=me)wr=bn.length;else{const Hn=bn.lastIndexOf(C),nr=bn.lastIndexOf(h);wr=Math.max(Hn,nr)+1}wr>0&&(Lt=wr,Fe=Wt.slice(0,Lt).join(""),Qe=this._getTextWidth(Fe))}if(Fe=Fe.trimRight(),this._addTextLine(Fe),oe=Math.max(oe,Qe),Me+=pe,this._shouldHandleEllipsis(Me)){this._tryToAddEllipsisToLastLine();break}if(Et=o(Et).slice(Lt).join("").trimLeft(),Et.length>0&&(Ke=this._getTextWidth(Et),Ke<=me)){this._addTextLine(Et),Me+=pe,oe=Math.max(oe,Ke);break}}else break}else this._addTextLine(Et),Me+=pe,oe=Math.max(oe,Ke),this._shouldHandleEllipsis(Me)&&_t<It-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),Ae&&Me+pe>Oe)break}this.textHeight=ee,this.textWidth=oe}_shouldHandleEllipsis(W){const ee=+this.fontSize(),oe=this.lineHeight()*ee,pe=this.attrs.height,ce=pe!==a&&pe!==void 0,he=this.padding(),Ee=pe-he*2;return!(this.wrap()!==L)||ce&&W+oe>Ee}_tryToAddEllipsisToLastLine(){const W=this.attrs.width,ee=W!==a&&W!==void 0,oe=this.padding(),pe=W-oe*2,ce=this.ellipsis(),he=this.textArr[this.textArr.length-1];!he||!ce||(ee&&(this._getTextWidth(he.text+H)<pe||(he.text=he.text.slice(0,he.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(he.text+H))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const W=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,ee=this.hasShadow();return W&&ee?!0:super._useBufferCanvas()}};return J2.Text=q,q.prototype._fillFunc=ne,q.prototype._strokeFunc=ue,q.prototype.className=g,q.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,s._registerNode)(q),t.Factory.overWriteSetter(q,"width",(0,i.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(q,"height",(0,i.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(q,"direction",l),t.Factory.addGetterSetter(q,"fontFamily","Arial"),t.Factory.addGetterSetter(q,"fontSize",12,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(q,"fontStyle",w),t.Factory.addGetterSetter(q,"fontVariant",w),t.Factory.addGetterSetter(q,"padding",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(q,"align",p),t.Factory.addGetterSetter(q,"verticalAlign",b),t.Factory.addGetterSetter(q,"lineHeight",1,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(q,"wrap",O),t.Factory.addGetterSetter(q,"ellipsis",!1,(0,i.getBooleanValidator)()),t.Factory.addGetterSetter(q,"letterSpacing",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(q,"text","",(0,i.getStringValidator)()),t.Factory.addGetterSetter(q,"textDecoration",""),J2}var RA={},yle;function w1t(){if(yle)return RA;yle=1,Object.defineProperty(RA,"__esModule",{value:!0}),RA.TextPath=void 0;const e=Xo(),t=Yr(),n=qu(),r=zK(),i=ESe(),s=Zr(),o=Vr(),a="",u="normal";function l(d){d.fillText(this.partialText,0,0)}function c(d){d.strokeText(this.partialText,0,0)}let f=class extends n.Shape{constructor(h){super(h),this.dummyCanvas=e.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return r.Path.getPathLength(this.dataArray)}_getPointAtLength(h){if(!this.attrs.data)return null;const p=this.pathLength;return h-1>p?null:r.Path.getPointAtLengthOfDataArray(h,this.dataArray)}_readDataAttribute(){this.dataArray=r.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(h){h.setAttr("font",this._getContextFont()),h.setAttr("textBaseline",this.textBaseline()),h.setAttr("textAlign","left"),h.save();const p=this.textDecoration(),m=this.fill(),g=this.fontSize(),b=this.glyphInfo;p==="underline"&&h.beginPath();for(let y=0;y<b.length;y++){h.save();const x=b[y].p0;h.translate(x.x,x.y),h.rotate(b[y].rotation),this.partialText=b[y].text,h.fillStrokeShape(this),p==="underline"&&(y===0&&h.moveTo(0,g/2+1),h.lineTo(g,g/2+1)),h.restore()}p==="underline"&&(h.strokeStyle=m,h.lineWidth=g/20,h.stroke()),h.restore()}_hitFunc(h){h.beginPath();const p=this.glyphInfo;if(p.length>=1){const m=p[0].p0;h.moveTo(m.x,m.y)}for(let m=0;m<p.length;m++){const g=p[m].p1;h.lineTo(g.x,g.y)}h.setAttr("lineWidth",this.fontSize()),h.setAttr("strokeStyle",this.colorKey),h.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(h){return i.Text.prototype.setText.call(this,h)}_getContextFont(){return i.Text.prototype._getContextFont.call(this)}_getTextSize(h){const m=this.dummyCanvas.getContext("2d");m.save(),m.font=this._getContextFont();const g=m.measureText(h);return m.restore(),{width:g.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:h,height:p}=this._getTextSize(this.attrs.text);if(this.textWidth=h,this.textHeight=p,this.glyphInfo=[],!this.attrs.data)return null;const m=this.letterSpacing(),g=this.align(),b=this.kerningFunc(),y=Math.max(this.textWidth+((this.attrs.text||"").length-1)*m,0);let x=0;g==="center"&&(x=Math.max(0,this.pathLength/2-y/2)),g==="right"&&(x=Math.max(0,this.pathLength-y));const w=(0,i.stringToArray)(this.text());let S=x;for(let C=0;C<w.length;C++){const R=this._getPointAtLength(S);if(!R)return;let I=this._getTextSize(w[C]).width+m;if(w[C]===" "&&g==="justify"){const B=this.text().split(" ").length-1;I+=(this.pathLength-y)/B}const O=this._getPointAtLength(S+I);if(!O)return;const M=r.Path.getLineLength(R.x,R.y,O.x,O.y);let L=0;if(b)try{L=b(w[C-1],w[C])*this.fontSize()}catch{L=0}R.x+=L,O.x+=L,this.textWidth+=L;const H=r.Path.getPointOnLine(L+M/2,R.x,R.y,O.x,O.y),D=Math.atan2(O.y-R.y,O.x-R.x);this.glyphInfo.push({transposeX:H.x,transposeY:H.y,text:w[C],rotation:D,p0:R,p1:O}),S+=I}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const h=[];this.glyphInfo.forEach(function(S){h.push(S.p0.x),h.push(S.p0.y),h.push(S.p1.x),h.push(S.p1.y)});let p=h[0]||0,m=h[0]||0,g=h[1]||0,b=h[1]||0,y,x;for(let S=0;S<h.length/2;S++)y=h[S*2],x=h[S*2+1],p=Math.min(p,y),m=Math.max(m,y),g=Math.min(g,x),b=Math.max(b,x);const w=this.fontSize();return{x:p-w/2,y:g-w/2,width:m-p+w,height:b-g+w}}destroy(){return e.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return RA.TextPath=f,f.prototype._fillFunc=l,f.prototype._strokeFunc=c,f.prototype._fillFuncHit=l,f.prototype._strokeFuncHit=c,f.prototype.className="TextPath",f.prototype._attrsAffectingSize=["text","fontSize","data"],(0,o._registerNode)(f),t.Factory.addGetterSetter(f,"data"),t.Factory.addGetterSetter(f,"fontFamily","Arial"),t.Factory.addGetterSetter(f,"fontSize",12,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(f,"fontStyle",u),t.Factory.addGetterSetter(f,"align","left"),t.Factory.addGetterSetter(f,"letterSpacing",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(f,"textBaseline","middle"),t.Factory.addGetterSetter(f,"fontVariant",u),t.Factory.addGetterSetter(f,"text",a),t.Factory.addGetterSetter(f,"textDecoration",""),t.Factory.addGetterSetter(f,"kerningFunc",void 0),RA}var IA={},vle;function E1t(){if(vle)return IA;vle=1,Object.defineProperty(IA,"__esModule",{value:!0}),IA.Transformer=void 0;const e=Xo(),t=Yr(),n=_a(),r=qu(),i=wSe(),s=jK(),o=Vr(),a=Zr(),u=Vr(),l="tr-konva",c=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(I=>I+`.${l}`).join(" "),f="nodesRect",d=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],h={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},p="ontouchstart"in o.Konva._global;function m(I,O,M){if(I==="rotater")return M;O+=e.Util.degToRad(h[I]||0);const L=(e.Util.radToDeg(O)%360+360)%360;return e.Util._inRange(L,315+22.5,360)||e.Util._inRange(L,0,22.5)?"ns-resize":e.Util._inRange(L,45-22.5,45+22.5)?"nesw-resize":e.Util._inRange(L,90-22.5,90+22.5)?"ew-resize":e.Util._inRange(L,135-22.5,135+22.5)?"nwse-resize":e.Util._inRange(L,180-22.5,180+22.5)?"ns-resize":e.Util._inRange(L,225-22.5,225+22.5)?"nesw-resize":e.Util._inRange(L,270-22.5,270+22.5)?"ew-resize":e.Util._inRange(L,315-22.5,315+22.5)?"nwse-resize":(e.Util.error("Transformer has unknown angle for cursor detection: "+L),"pointer")}const g=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function b(I){return{x:I.x+I.width/2*Math.cos(I.rotation)+I.height/2*Math.sin(-I.rotation),y:I.y+I.height/2*Math.cos(I.rotation)+I.width/2*Math.sin(I.rotation)}}function y(I,O,M){const L=M.x+(I.x-M.x)*Math.cos(O)-(I.y-M.y)*Math.sin(O),H=M.y+(I.x-M.x)*Math.sin(O)+(I.y-M.y)*Math.cos(O);return{...I,rotation:I.rotation+O,x:L,y:H}}function x(I,O){const M=b(I);return y(I,O,M)}function w(I,O,M){let L=O;for(let H=0;H<I.length;H++){const D=o.Konva.getAngle(I[H]),B=Math.abs(D-O)%(Math.PI*2);Math.min(B,Math.PI*2-B)<M&&(L=D)}return L}let S=0,C=class extends s.Group{constructor(O){super(O),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(c,this.update),this.getNode()&&this.update()}attachTo(O){return this.setNode(O),this}setNode(O){return e.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([O])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return l+this._id}setNodes(O=[]){this._nodes&&this._nodes.length&&this.detach();const M=O.filter(H=>H.isAncestorOf(this)?(e.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=O=M,O.length===1&&this.useSingleNodeRotation()?this.rotation(O[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(H=>{const D=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},B=H._attrsAffectingSize.map(z=>z+"Change."+this._getEventNamespace()).join(" ");H.on(B,D),H.on(d.map(z=>z+`.${this._getEventNamespace()}`).join(" "),D),H.on(`absoluteTransformChange.${this._getEventNamespace()}`,D),this._proxyDrag(H)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(O){let M;O.on(`dragstart.${this._getEventNamespace()}`,L=>{M=O.getAbsolutePosition(),!this.isDragging()&&O!==this.findOne(".back")&&this.startDrag(L,!1)}),O.on(`dragmove.${this._getEventNamespace()}`,L=>{if(!M)return;const H=O.getAbsolutePosition(),D=H.x-M.x,B=H.y-M.y;this.nodes().forEach(z=>{if(z===O||z.isDragging())return;const G=z.getAbsolutePosition();z.setAbsolutePosition({x:G.x+D,y:G.y+B}),z.startDrag(L)}),M=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(O=>{O.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(f),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(f,this.__getNodeRect)}__getNodeShape(O,M=this.rotation(),L){const H=O.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),D=O.getAbsoluteScale(L),B=O.getAbsolutePosition(L),z=H.x*D.x-O.offsetX()*D.x,G=H.y*D.y-O.offsetY()*D.y,Z=(o.Konva.getAngle(O.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),ne={x:B.x+z*Math.cos(Z)+G*Math.sin(-Z),y:B.y+G*Math.cos(Z)+z*Math.sin(Z),width:H.width*D.x,height:H.height*D.y,rotation:Z};return y(ne,-o.Konva.getAngle(M),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const M=[];this.nodes().map(Z=>{const ne=Z.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),ue=[{x:ne.x,y:ne.y},{x:ne.x+ne.width,y:ne.y},{x:ne.x+ne.width,y:ne.y+ne.height},{x:ne.x,y:ne.y+ne.height}],X=Z.getAbsoluteTransform();ue.forEach(function(q){const te=X.point(q);M.push(te)})});const L=new e.Transform;L.rotate(-o.Konva.getAngle(this.rotation()));let H=1/0,D=1/0,B=-1/0,z=-1/0;M.forEach(function(Z){const ne=L.point(Z);H===void 0&&(H=B=ne.x,D=z=ne.y),H=Math.min(H,ne.x),D=Math.min(D,ne.y),B=Math.max(B,ne.x),z=Math.max(z,ne.y)}),L.invert();const G=L.point({x:H,y:D});return{x:G.x,y:G.y,width:B-H,height:z-D,rotation:o.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),g.forEach(O=>{this._createAnchor(O)}),this._createAnchor("rotater")}_createAnchor(O){const M=new i.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:O+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:p?10:"auto"}),L=this;M.on("mousedown touchstart",function(H){L._handleMouseDown(H)}),M.on("dragstart",H=>{M.stopDrag(),H.cancelBubble=!0}),M.on("dragend",H=>{H.cancelBubble=!0}),M.on("mouseenter",()=>{const H=o.Konva.getAngle(this.rotation()),D=this.rotateAnchorCursor(),B=m(O,H,D);M.getStage().content&&(M.getStage().content.style.cursor=B),this._cursorChange=!0}),M.on("mouseout",()=>{M.getStage().content&&(M.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(M)}_createBack(){const O=new r.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(M,L){const H=L.getParent(),D=H.padding();M.beginPath(),M.rect(-D,-D,L.width()+D*2,L.height()+D*2),M.moveTo(L.width()/2,-D),H.rotateEnabled()&&H.rotateLineVisible()&&M.lineTo(L.width()/2,-H.rotateAnchorOffset()*e.Util._sign(L.height())-D),M.fillStrokeShape(L)},hitFunc:(M,L)=>{if(!this.shouldOverdrawWholeArea())return;const H=this.padding();M.beginPath(),M.rect(-H,-H,L.width()+H*2,L.height()+H*2),M.fillStrokeShape(L)}});this.add(O),this._proxyDrag(O),O.on("dragstart",M=>{M.cancelBubble=!0}),O.on("dragmove",M=>{M.cancelBubble=!0}),O.on("dragend",M=>{M.cancelBubble=!0}),this.on("dragmove",M=>{this.update()})}_handleMouseDown(O){if(this._transforming)return;this._movingAnchorName=O.target.name().split(" ")[0];const M=this._getNodeRect(),L=M.width,H=M.height,D=Math.sqrt(Math.pow(L,2)+Math.pow(H,2));this.sin=Math.abs(H/D),this.cos=Math.abs(L/D),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const B=O.target.getAbsolutePosition(),z=O.target.getStage().getPointerPosition();this._anchorDragOffset={x:z.x-B.x,y:z.y-B.y},S++,this._fire("transformstart",{evt:O.evt,target:this.getNode()}),this._nodes.forEach(G=>{G._fire("transformstart",{evt:O.evt,target:G})})}_handleMouseMove(O){let M,L,H;const D=this.findOne("."+this._movingAnchorName),B=D.getStage();B.setPointersPositions(O);const z=B.getPointerPosition();let G={x:z.x-this._anchorDragOffset.x,y:z.y-this._anchorDragOffset.y};const Z=D.getAbsolutePosition();this.anchorDragBoundFunc()&&(G=this.anchorDragBoundFunc()(Z,G,O)),D.setAbsolutePosition(G);const ne=D.getAbsolutePosition();if(Z.x===ne.x&&Z.y===ne.y)return;if(this._movingAnchorName==="rotater"){const Ee=this._getNodeRect();M=D.x()-Ee.width/2,L=-D.y()+Ee.height/2;let Ae=Math.atan2(-L,M)+Math.PI/2;Ee.height<0&&(Ae-=Math.PI);const me=o.Konva.getAngle(this.rotation())+Ae,Oe=o.Konva.getAngle(this.rotationSnapTolerance()),Ye=w(this.rotationSnaps(),me,Oe)-Ee.rotation,lt=x(Ee,Ye);this._fitNodesInto(lt,O);return}const ue=this.shiftBehavior();let X;ue==="inverted"?X=this.keepRatio()&&!O.shiftKey:ue==="none"?X=this.keepRatio():X=this.keepRatio()||O.shiftKey;var oe=this.centeredScaling()||O.altKey;if(this._movingAnchorName==="top-left"){if(X){var q=oe?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};H=Math.sqrt(Math.pow(q.x-D.x(),2)+Math.pow(q.y-D.y(),2));var te=this.findOne(".top-left").x()>q.x?-1:1,W=this.findOne(".top-left").y()>q.y?-1:1;M=H*this.cos*te,L=H*this.sin*W,this.findOne(".top-left").x(q.x-M),this.findOne(".top-left").y(q.y-L)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(D.y());else if(this._movingAnchorName==="top-right"){if(X){var q=oe?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};H=Math.sqrt(Math.pow(D.x()-q.x,2)+Math.pow(q.y-D.y(),2));var te=this.findOne(".top-right").x()<q.x?-1:1,W=this.findOne(".top-right").y()>q.y?-1:1;M=H*this.cos*te,L=H*this.sin*W,this.findOne(".top-right").x(q.x+M),this.findOne(".top-right").y(q.y-L)}var ee=D.position();this.findOne(".top-left").y(ee.y),this.findOne(".bottom-right").x(ee.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(D.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(D.x());else if(this._movingAnchorName==="bottom-left"){if(X){var q=oe?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};H=Math.sqrt(Math.pow(q.x-D.x(),2)+Math.pow(D.y()-q.y,2));var te=q.x<D.x()?-1:1,W=D.y()<q.y?-1:1;M=H*this.cos*te,L=H*this.sin*W,D.x(q.x-M),D.y(q.y+L)}ee=D.position(),this.findOne(".top-left").x(ee.x),this.findOne(".bottom-right").y(ee.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(D.y());else if(this._movingAnchorName==="bottom-right"){if(X){var q=oe?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};H=Math.sqrt(Math.pow(D.x()-q.x,2)+Math.pow(D.y()-q.y,2));var te=this.findOne(".bottom-right").x()<q.x?-1:1,W=this.findOne(".bottom-right").y()<q.y?-1:1;M=H*this.cos*te,L=H*this.sin*W,this.findOne(".bottom-right").x(q.x+M),this.findOne(".bottom-right").y(q.y+L)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var oe=this.centeredScaling()||O.altKey;if(oe){const Ee=this.findOne(".top-left"),Ae=this.findOne(".bottom-right"),ge=Ee.x(),me=Ee.y(),Oe=this.getWidth()-Ae.x(),Me=this.getHeight()-Ae.y();Ae.move({x:-ge,y:-me}),Ee.move({x:Oe,y:Me})}const pe=this.findOne(".top-left").getAbsolutePosition();M=pe.x,L=pe.y;const ce=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),he=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:M,y:L,width:ce,height:he,rotation:o.Konva.getAngle(this.rotation())},O)}_handleMouseUp(O){this._removeEvents(O)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(O){var M;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const L=this.getNode();S--,this._fire("transformend",{evt:O,target:L}),(M=this.getLayer())===null||M===void 0||M.batchDraw(),L&&this._nodes.forEach(H=>{var D;H._fire("transformend",{evt:O,target:H}),(D=H.getLayer())===null||D===void 0||D.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(O,M){const L=this._getNodeRect(),H=1;if(e.Util._inRange(O.width,-this.padding()*2-H,H)){this.update();return}if(e.Util._inRange(O.height,-this.padding()*2-H,H)){this.update();return}const D=new e.Transform;if(D.rotate(o.Konva.getAngle(this.rotation())),this._movingAnchorName&&O.width<0&&this._movingAnchorName.indexOf("left")>=0){const X=D.point({x:-this.padding()*2,y:0});O.x+=X.x,O.y+=X.y,O.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y}else if(this._movingAnchorName&&O.width<0&&this._movingAnchorName.indexOf("right")>=0){const X=D.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y,O.width+=this.padding()*2}if(this._movingAnchorName&&O.height<0&&this._movingAnchorName.indexOf("top")>=0){const X=D.point({x:0,y:-this.padding()*2});O.x+=X.x,O.y+=X.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y,O.height+=this.padding()*2}else if(this._movingAnchorName&&O.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const X=D.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y,O.height+=this.padding()*2}if(this.boundBoxFunc()){const X=this.boundBoxFunc()(L,O);X?O=X:e.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const B=1e7,z=new e.Transform;z.translate(L.x,L.y),z.rotate(L.rotation),z.scale(L.width/B,L.height/B);const G=new e.Transform,Z=O.width/B,ne=O.height/B;this.flipEnabled()===!1?(G.translate(O.x,O.y),G.rotate(O.rotation),G.translate(O.width<0?O.width:0,O.height<0?O.height:0),G.scale(Math.abs(Z),Math.abs(ne))):(G.translate(O.x,O.y),G.rotate(O.rotation),G.scale(Z,ne));const ue=G.multiply(z.invert());this._nodes.forEach(X=>{var q;const te=X.getParent().getAbsoluteTransform(),W=X.getTransform().copy();W.translate(X.offsetX(),X.offsetY());const ee=new e.Transform;ee.multiply(te.copy().invert()).multiply(ue).multiply(te).multiply(W);const oe=ee.decompose();X.setAttrs(oe),(q=X.getLayer())===null||q===void 0||q.batchDraw()}),this.rotation(e.Util._getRotation(O.rotation)),this._nodes.forEach(X=>{this._fire("transform",{evt:M,target:X}),X._fire("transform",{evt:M,target:X})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(O,M){this.findOne(O).setAttrs(M)}update(){var O;const M=this._getNodeRect();this.rotation(e.Util._getRotation(M.rotation));const L=M.width,H=M.height,D=this.enabledAnchors(),B=this.resizeEnabled(),z=this.padding(),G=this.anchorSize(),Z=this.find("._anchor");Z.forEach(ue=>{ue.setAttrs({width:G,height:G,offsetX:G/2,offsetY:G/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:G/2+z,offsetY:G/2+z,visible:B&&D.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:L/2,y:0,offsetY:G/2+z,visible:B&&D.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:L,y:0,offsetX:G/2-z,offsetY:G/2+z,visible:B&&D.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:H/2,offsetX:G/2+z,visible:B&&D.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:L,y:H/2,offsetX:G/2-z,visible:B&&D.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:H,offsetX:G/2+z,offsetY:G/2-z,visible:B&&D.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:L/2,y:H,offsetY:G/2-z,visible:B&&D.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:L,y:H,offsetX:G/2-z,offsetY:G/2-z,visible:B&&D.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:L/2,y:-this.rotateAnchorOffset()*e.Util._sign(H)-z,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:L,height:H,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const ne=this.anchorStyleFunc();ne&&Z.forEach(ue=>{ne(ue)}),(O=this.getLayer())===null||O===void 0||O.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const O=this.findOne("."+this._movingAnchorName);O&&O.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),s.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return n.Node.prototype.toObject.call(this)}clone(O){return n.Node.prototype.clone.call(this,O)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};IA.Transformer=C,C.isTransforming=()=>S>0;function R(I){return I instanceof Array||e.Util.warn("enabledAnchors value should be an array"),I instanceof Array&&I.forEach(function(O){g.indexOf(O)===-1&&e.Util.warn("Unknown anchor name: "+O+". Available names are: "+g.join(", "))}),I||[]}return C.prototype.className="Transformer",(0,u._registerNode)(C),t.Factory.addGetterSetter(C,"enabledAnchors",g,R),t.Factory.addGetterSetter(C,"flipEnabled",!0,(0,a.getBooleanValidator)()),t.Factory.addGetterSetter(C,"resizeEnabled",!0),t.Factory.addGetterSetter(C,"anchorSize",10,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"rotateEnabled",!0),t.Factory.addGetterSetter(C,"rotateLineVisible",!0),t.Factory.addGetterSetter(C,"rotationSnaps",[]),t.Factory.addGetterSetter(C,"rotateAnchorOffset",50,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(C,"rotationSnapTolerance",5,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"borderEnabled",!0),t.Factory.addGetterSetter(C,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(C,"anchorStrokeWidth",1,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"anchorFill","white"),t.Factory.addGetterSetter(C,"anchorCornerRadius",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(C,"borderStrokeWidth",1,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"borderDash"),t.Factory.addGetterSetter(C,"keepRatio",!0),t.Factory.addGetterSetter(C,"shiftBehavior","default"),t.Factory.addGetterSetter(C,"centeredScaling",!1),t.Factory.addGetterSetter(C,"ignoreStroke",!1),t.Factory.addGetterSetter(C,"padding",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"nodes"),t.Factory.addGetterSetter(C,"node"),t.Factory.addGetterSetter(C,"boundBoxFunc"),t.Factory.addGetterSetter(C,"anchorDragBoundFunc"),t.Factory.addGetterSetter(C,"anchorStyleFunc"),t.Factory.addGetterSetter(C,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(C,"useSingleNodeRotation",!0),t.Factory.backCompat(C,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),IA}var PA={},ble;function S1t(){if(ble)return PA;ble=1,Object.defineProperty(PA,"__esModule",{value:!0}),PA.Wedge=void 0;const e=Yr(),t=qu(),n=Vr(),r=Zr(),i=Vr();let s=class extends t.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.radius(),0,n.Konva.getAngle(this.angle()),this.clockwise()),a.lineTo(0,0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return PA.Wedge=s,s.prototype.className="Wedge",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"angle",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"clockwise",!1),e.Factory.backCompat(s,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),PA}var NA={},xle;function T1t(){if(xle)return NA;xle=1,Object.defineProperty(NA,"__esModule",{value:!0}),NA.Blur=void 0;const e=Yr(),t=_a(),n=Zr();function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function o(u,l){const c=u.data,f=u.width,d=u.height;let h,p,m,g,b,y,x,w,S,C,R,I,O,M,L,H,D,B,z,G,Z,ne,ue,X;const q=l+l+1,te=f-1,W=d-1,ee=l+1,oe=ee*(ee+1)/2,pe=new r,ce=i[l],he=s[l];let Ee=null,Ae=pe,ge=null,me=null;for(m=1;m<q;m++)Ae=Ae.next=new r,m===ee&&(Ee=Ae);for(Ae.next=pe,x=y=0,p=0;p<d;p++){for(H=D=B=z=w=S=C=R=0,I=ee*(G=c[y]),O=ee*(Z=c[y+1]),M=ee*(ne=c[y+2]),L=ee*(ue=c[y+3]),w+=oe*G,S+=oe*Z,C+=oe*ne,R+=oe*ue,Ae=pe,m=0;m<ee;m++)Ae.r=G,Ae.g=Z,Ae.b=ne,Ae.a=ue,Ae=Ae.next;for(m=1;m<ee;m++)g=y+((te<m?te:m)<<2),w+=(Ae.r=G=c[g])*(X=ee-m),S+=(Ae.g=Z=c[g+1])*X,C+=(Ae.b=ne=c[g+2])*X,R+=(Ae.a=ue=c[g+3])*X,H+=G,D+=Z,B+=ne,z+=ue,Ae=Ae.next;for(ge=pe,me=Ee,h=0;h<f;h++)c[y+3]=ue=R*ce>>he,ue!==0?(ue=255/ue,c[y]=(w*ce>>he)*ue,c[y+1]=(S*ce>>he)*ue,c[y+2]=(C*ce>>he)*ue):c[y]=c[y+1]=c[y+2]=0,w-=I,S-=O,C-=M,R-=L,I-=ge.r,O-=ge.g,M-=ge.b,L-=ge.a,g=x+((g=h+l+1)<te?g:te)<<2,H+=ge.r=c[g],D+=ge.g=c[g+1],B+=ge.b=c[g+2],z+=ge.a=c[g+3],w+=H,S+=D,C+=B,R+=z,ge=ge.next,I+=G=me.r,O+=Z=me.g,M+=ne=me.b,L+=ue=me.a,H-=G,D-=Z,B-=ne,z-=ue,me=me.next,y+=4;x+=f}for(h=0;h<f;h++){for(D=B=z=H=S=C=R=w=0,y=h<<2,I=ee*(G=c[y]),O=ee*(Z=c[y+1]),M=ee*(ne=c[y+2]),L=ee*(ue=c[y+3]),w+=oe*G,S+=oe*Z,C+=oe*ne,R+=oe*ue,Ae=pe,m=0;m<ee;m++)Ae.r=G,Ae.g=Z,Ae.b=ne,Ae.a=ue,Ae=Ae.next;for(b=f,m=1;m<=l;m++)y=b+h<<2,w+=(Ae.r=G=c[y])*(X=ee-m),S+=(Ae.g=Z=c[y+1])*X,C+=(Ae.b=ne=c[y+2])*X,R+=(Ae.a=ue=c[y+3])*X,H+=G,D+=Z,B+=ne,z+=ue,Ae=Ae.next,m<W&&(b+=f);for(y=h,ge=pe,me=Ee,p=0;p<d;p++)g=y<<2,c[g+3]=ue=R*ce>>he,ue>0?(ue=255/ue,c[g]=(w*ce>>he)*ue,c[g+1]=(S*ce>>he)*ue,c[g+2]=(C*ce>>he)*ue):c[g]=c[g+1]=c[g+2]=0,w-=I,S-=O,C-=M,R-=L,I-=ge.r,O-=ge.g,M-=ge.b,L-=ge.a,g=h+((g=p+ee)<W?g:W)*f<<2,w+=H+=ge.r=c[g],S+=D+=ge.g=c[g+1],C+=B+=ge.b=c[g+2],R+=z+=ge.a=c[g+3],ge=ge.next,I+=G=me.r,O+=Z=me.g,M+=ne=me.b,L+=ue=me.a,H-=G,D-=Z,B-=ne,z-=ue,me=me.next,y+=f}}const a=function(l){const c=Math.round(this.blurRadius());c>0&&o(l,c)};return NA.Blur=a,e.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),NA}var DA={},_le;function C1t(){if(_le)return DA;_le=1,Object.defineProperty(DA,"__esModule",{value:!0}),DA.Brighten=void 0;const e=Yr(),t=_a(),n=Zr(),r=function(i){const s=this.brightness()*255,o=i.data,a=o.length;for(let u=0;u<a;u+=4)o[u]+=s,o[u+1]+=s,o[u+2]+=s};return DA.Brighten=r,e.Factory.addGetterSetter(t.Node,"brightness",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),DA}var OA={},wle;function A1t(){if(wle)return OA;wle=1,Object.defineProperty(OA,"__esModule",{value:!0}),OA.Contrast=void 0;const e=Yr(),t=_a(),n=Zr(),r=function(i){const s=Math.pow((this.contrast()+100)/100,2),o=i.data,a=o.length;let u=150,l=150,c=150;for(let f=0;f<a;f+=4)u=o[f],l=o[f+1],c=o[f+2],u/=255,u-=.5,u*=s,u+=.5,u*=255,l/=255,l-=.5,l*=s,l+=.5,l*=255,c/=255,c-=.5,c*=s,c+=.5,c*=255,u=u<0?0:u>255?255:u,l=l<0?0:l>255?255:l,c=c<0?0:c>255?255:c,o[f]=u,o[f+1]=l,o[f+2]=c};return OA.Contrast=r,e.Factory.addGetterSetter(t.Node,"contrast",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),OA}var MA={},Ele;function k1t(){if(Ele)return MA;Ele=1,Object.defineProperty(MA,"__esModule",{value:!0}),MA.Emboss=void 0;const e=Yr(),t=_a(),n=Xo(),r=Zr(),i=function(s){const o=this.embossStrength()*10,a=this.embossWhiteLevel()*255,u=this.embossDirection(),l=this.embossBlend(),c=s.data,f=s.width,d=s.height,h=f*4;let p=0,m=0,g=d;switch(u){case"top-left":p=-1,m=-1;break;case"top":p=-1,m=0;break;case"top-right":p=-1,m=1;break;case"right":p=0,m=1;break;case"bottom-right":p=1,m=1;break;case"bottom":p=1,m=0;break;case"bottom-left":p=1,m=-1;break;case"left":p=0,m=-1;break;default:n.Util.error("Unknown emboss direction: "+u)}do{const b=(g-1)*h;let y=p;g+y<1&&(y=0),g+y>d&&(y=0);const x=(g-1+y)*f*4;let w=f;do{const S=b+(w-1)*4;let C=m;w+C<1&&(C=0),w+C>f&&(C=0);const R=x+(w-1+C)*4,I=c[S]-c[R],O=c[S+1]-c[R+1],M=c[S+2]-c[R+2];let L=I;const H=L>0?L:-L,D=O>0?O:-O,B=M>0?M:-M;if(D>H&&(L=O),B>H&&(L=M),L*=o,l){const z=c[S]+L,G=c[S+1]+L,Z=c[S+2]+L;c[S]=z>255?255:z<0?0:z,c[S+1]=G>255?255:G<0?0:G,c[S+2]=Z>255?255:Z<0?0:Z}else{let z=a-L;z<0?z=0:z>255&&(z=255),c[S]=c[S+1]=c[S+2]=z}}while(--w)}while(--g)};return MA.Emboss=i,e.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,e.Factory.afterSetFilter),MA}var LA={},Sle;function R1t(){if(Sle)return LA;Sle=1,Object.defineProperty(LA,"__esModule",{value:!0}),LA.Enhance=void 0;const e=Yr(),t=_a(),n=Zr();function r(s,o,a,u,l){const c=a-o,f=l-u;if(c===0)return u+f/2;if(f===0)return u;let d=(s-o)/c;return d=f*d+u,d}const i=function(s){const o=s.data,a=o.length;let u=o[0],l=u,c,f=o[1],d=f,h,p=o[2],m=p,g;const b=this.enhance();if(b===0)return;for(let L=0;L<a;L+=4)c=o[L+0],c<u?u=c:c>l&&(l=c),h=o[L+1],h<f?f=h:h>d&&(d=h),g=o[L+2],g<p?p=g:g>m&&(m=g);l===u&&(l=255,u=0),d===f&&(d=255,f=0),m===p&&(m=255,p=0);let y,x,w,S,C,R,I,O,M;b>0?(x=l+b*(255-l),w=u-b*(u-0),C=d+b*(255-d),R=f-b*(f-0),O=m+b*(255-m),M=p-b*(p-0)):(y=(l+u)*.5,x=l+b*(l-y),w=u+b*(u-y),S=(d+f)*.5,C=d+b*(d-S),R=f+b*(f-S),I=(m+p)*.5,O=m+b*(m-I),M=p+b*(p-I));for(let L=0;L<a;L+=4)o[L+0]=r(o[L+0],u,l,w,x),o[L+1]=r(o[L+1],f,d,R,C),o[L+2]=r(o[L+2],p,m,M,O)};return LA.Enhance=i,e.Factory.addGetterSetter(t.Node,"enhance",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),LA}var FA={},Tle;function I1t(){if(Tle)return FA;Tle=1,Object.defineProperty(FA,"__esModule",{value:!0}),FA.Grayscale=void 0;const e=function(t){const n=t.data,r=n.length;for(let i=0;i<r;i+=4){const s=.34*n[i]+.5*n[i+1]+.16*n[i+2];n[i]=s,n[i+1]=s,n[i+2]=s}};return FA.Grayscale=e,FA}var $A={},Cle;function P1t(){if(Cle)return $A;Cle=1,Object.defineProperty($A,"__esModule",{value:!0}),$A.HSL=void 0;const e=Yr(),t=_a(),n=Zr();e.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"luminance",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter);const r=function(i){const s=i.data,o=s.length,a=1,u=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=this.luminance()*127,f=a*u*Math.cos(l*Math.PI/180),d=a*u*Math.sin(l*Math.PI/180),h=.299*a+.701*f+.167*d,p=.587*a-.587*f+.33*d,m=.114*a-.114*f-.497*d,g=.299*a-.299*f-.328*d,b=.587*a+.413*f+.035*d,y=.114*a-.114*f+.293*d,x=.299*a-.3*f+1.25*d,w=.587*a-.586*f-1.05*d,S=.114*a+.886*f-.2*d;let C,R,I,O;for(let M=0;M<o;M+=4)C=s[M+0],R=s[M+1],I=s[M+2],O=s[M+3],s[M+0]=h*C+p*R+m*I+c,s[M+1]=g*C+b*R+y*I+c,s[M+2]=x*C+w*R+S*I+c,s[M+3]=O};return $A.HSL=r,$A}var BA={},Ale;function N1t(){if(Ale)return BA;Ale=1,Object.defineProperty(BA,"__esModule",{value:!0}),BA.HSV=void 0;const e=Yr(),t=_a(),n=Zr(),r=function(i){const s=i.data,o=s.length,a=Math.pow(2,this.value()),u=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=a*u*Math.cos(l*Math.PI/180),f=a*u*Math.sin(l*Math.PI/180),d=.299*a+.701*c+.167*f,h=.587*a-.587*c+.33*f,p=.114*a-.114*c-.497*f,m=.299*a-.299*c-.328*f,g=.587*a+.413*c+.035*f,b=.114*a-.114*c+.293*f,y=.299*a-.3*c+1.25*f,x=.587*a-.586*c-1.05*f,w=.114*a+.886*c-.2*f;let S,C,R,I;for(let O=0;O<o;O+=4)S=s[O+0],C=s[O+1],R=s[O+2],I=s[O+3],s[O+0]=d*S+h*C+p*R,s[O+1]=m*S+g*C+b*R,s[O+2]=y*S+x*C+w*R,s[O+3]=I};return BA.HSV=r,e.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"value",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),BA}var jA={},kle;function D1t(){if(kle)return jA;kle=1,Object.defineProperty(jA,"__esModule",{value:!0}),jA.Invert=void 0;const e=function(t){const n=t.data,r=n.length;for(let i=0;i<r;i+=4)n[i]=255-n[i],n[i+1]=255-n[i+1],n[i+2]=255-n[i+2]};return jA.Invert=e,jA}var UA={},Rle;function O1t(){if(Rle)return UA;Rle=1,Object.defineProperty(UA,"__esModule",{value:!0}),UA.Kaleidoscope=void 0;const e=Yr(),t=_a(),n=Xo(),r=Zr(),i=function(a,u,l){const c=a.data,f=u.data,d=a.width,h=a.height,p=l.polarCenterX||d/2,m=l.polarCenterY||h/2;let g=Math.sqrt(p*p+m*m),b=d-p,y=h-m;const x=Math.sqrt(b*b+y*y);g=x>g?x:g;const w=h,S=d,C=360/S*Math.PI/180;for(let R=0;R<S;R+=1){const I=Math.sin(R*C),O=Math.cos(R*C);for(let M=0;M<w;M+=1){b=Math.floor(p+g*M/w*O),y=Math.floor(m+g*M/w*I);let L=(y*d+b)*4;const H=c[L+0],D=c[L+1],B=c[L+2],z=c[L+3];L=(R+M*d)*4,f[L+0]=H,f[L+1]=D,f[L+2]=B,f[L+3]=z}}},s=function(a,u,l){const c=a.data,f=u.data,d=a.width,h=a.height,p=l.polarCenterX||d/2,m=l.polarCenterY||h/2;let g=Math.sqrt(p*p+m*m),b=d-p,y=h-m;const x=Math.sqrt(b*b+y*y);g=x>g?x:g;const w=h,S=d,C=0;let R,I;for(b=0;b<d;b+=1)for(y=0;y<h;y+=1){const O=b-p,M=y-m,L=Math.sqrt(O*O+M*M)*w/g;let H=(Math.atan2(M,O)*180/Math.PI+360+C)%360;H=H*S/360,R=Math.floor(H),I=Math.floor(L);let D=(I*d+R)*4;const B=c[D+0],z=c[D+1],G=c[D+2],Z=c[D+3];D=(y*d+b)*4,f[D+0]=B,f[D+1]=z,f[D+2]=G,f[D+3]=Z}},o=function(a){const u=a.width,l=a.height;let c,f,d,h,p,m,g,b,y,x,w=Math.round(this.kaleidoscopePower());const S=Math.round(this.kaleidoscopeAngle()),C=Math.floor(u*(S%360)/360);if(w<1)return;const R=n.Util.createCanvasElement();R.width=u,R.height=l;const I=R.getContext("2d").getImageData(0,0,u,l);n.Util.releaseCanvas(R),i(a,I,{polarCenterX:u/2,polarCenterY:l/2});let O=u/Math.pow(2,w);for(;O<=8;)O=O*2,w-=1;O=Math.ceil(O);let M=O,L=0,H=M,D=1;for(C+O>u&&(L=M,H=0,D=-1),f=0;f<l;f+=1)for(c=L;c!==H;c+=D)d=Math.round(c+C)%u,y=(u*f+d)*4,p=I.data[y+0],m=I.data[y+1],g=I.data[y+2],b=I.data[y+3],x=(u*f+c)*4,I.data[x+0]=p,I.data[x+1]=m,I.data[x+2]=g,I.data[x+3]=b;for(f=0;f<l;f+=1)for(M=Math.floor(O),h=0;h<w;h+=1){for(c=0;c<M+1;c+=1)y=(u*f+c)*4,p=I.data[y+0],m=I.data[y+1],g=I.data[y+2],b=I.data[y+3],x=(u*f+M*2-c-1)*4,I.data[x+0]=p,I.data[x+1]=m,I.data[x+2]=g,I.data[x+3]=b;M*=2}s(I,a,{polarRotation:0})};return UA.Kaleidoscope=o,e.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),UA}var zA={},Ile;function M1t(){if(Ile)return zA;Ile=1,Object.defineProperty(zA,"__esModule",{value:!0}),zA.Mask=void 0;const e=Yr(),t=_a(),n=Zr();function r(d,h,p){let m=(p*d.width+h)*4;const g=[];return g.push(d.data[m++],d.data[m++],d.data[m++],d.data[m++]),g}function i(d,h){return Math.sqrt(Math.pow(d[0]-h[0],2)+Math.pow(d[1]-h[1],2)+Math.pow(d[2]-h[2],2))}function s(d){const h=[0,0,0];for(let p=0;p<d.length;p++)h[0]+=d[p][0],h[1]+=d[p][1],h[2]+=d[p][2];return h[0]/=d.length,h[1]/=d.length,h[2]/=d.length,h}function o(d,h){const p=r(d,0,0),m=r(d,d.width-1,0),g=r(d,0,d.height-1),b=r(d,d.width-1,d.height-1),y=h||10;if(i(p,m)<y&&i(m,b)<y&&i(b,g)<y&&i(g,p)<y){const x=s([m,p,b,g]),w=[];for(let S=0;S<d.width*d.height;S++){const C=i(x,[d.data[S*4],d.data[S*4+1],d.data[S*4+2]]);w[S]=C<y?0:255}return w}}function a(d,h){for(let p=0;p<d.width*d.height;p++)d.data[4*p+3]=h[p]}function u(d,h,p){const m=[1,1,1,1,0,1,1,1,1],g=Math.round(Math.sqrt(m.length)),b=Math.floor(g/2),y=[];for(let x=0;x<p;x++)for(let w=0;w<h;w++){const S=x*h+w;let C=0;for(let R=0;R<g;R++)for(let I=0;I<g;I++){const O=x+R-b,M=w+I-b;if(O>=0&&O<p&&M>=0&&M<h){const L=O*h+M,H=m[R*g+I];C+=d[L]*H}}y[S]=C===255*8?255:0}return y}function l(d,h,p){const m=[1,1,1,1,1,1,1,1,1],g=Math.round(Math.sqrt(m.length)),b=Math.floor(g/2),y=[];for(let x=0;x<p;x++)for(let w=0;w<h;w++){const S=x*h+w;let C=0;for(let R=0;R<g;R++)for(let I=0;I<g;I++){const O=x+R-b,M=w+I-b;if(O>=0&&O<p&&M>=0&&M<h){const L=O*h+M,H=m[R*g+I];C+=d[L]*H}}y[S]=C>=255*4?255:0}return y}function c(d,h,p){const m=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],g=Math.round(Math.sqrt(m.length)),b=Math.floor(g/2),y=[];for(let x=0;x<p;x++)for(let w=0;w<h;w++){const S=x*h+w;let C=0;for(let R=0;R<g;R++)for(let I=0;I<g;I++){const O=x+R-b,M=w+I-b;if(O>=0&&O<p&&M>=0&&M<h){const L=O*h+M,H=m[R*g+I];C+=d[L]*H}}y[S]=C}return y}const f=function(d){const h=this.threshold();let p=o(d,h);return p&&(p=u(p,d.width,d.height),p=l(p,d.width,d.height),p=c(p,d.width,d.height),a(d,p)),d};return zA.Mask=f,e.Factory.addGetterSetter(t.Node,"threshold",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),zA}var VA={},Ple;function L1t(){if(Ple)return VA;Ple=1,Object.defineProperty(VA,"__esModule",{value:!0}),VA.Noise=void 0;const e=Yr(),t=_a(),n=Zr(),r=function(i){const s=this.noise()*255,o=i.data,a=o.length,u=s/2;for(let l=0;l<a;l+=4)o[l+0]+=u-2*u*Math.random(),o[l+1]+=u-2*u*Math.random(),o[l+2]+=u-2*u*Math.random()};return VA.Noise=r,e.Factory.addGetterSetter(t.Node,"noise",.2,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),VA}var HA={},Nle;function F1t(){if(Nle)return HA;Nle=1,Object.defineProperty(HA,"__esModule",{value:!0}),HA.Pixelate=void 0;const e=Yr(),t=Xo(),n=_a(),r=Zr(),i=function(s){let o=Math.ceil(this.pixelSize()),a=s.width,u=s.height,l,c,f,d,h,p,m,g=Math.ceil(a/o),b=Math.ceil(u/o),y,x,w,S,C,R,I,O=s.data;if(o<=0){t.Util.error("pixelSize value can not be <= 0");return}for(C=0;C<g;C+=1)for(R=0;R<b;R+=1){for(d=0,h=0,p=0,m=0,y=C*o,x=y+o,w=R*o,S=w+o,I=0,l=y;l<x;l+=1)if(!(l>=a))for(c=w;c<S;c+=1)c>=u||(f=(a*c+l)*4,d+=O[f+0],h+=O[f+1],p+=O[f+2],m+=O[f+3],I+=1);for(d=d/I,h=h/I,p=p/I,m=m/I,l=y;l<x;l+=1)if(!(l>=a))for(c=w;c<S;c+=1)c>=u||(f=(a*c+l)*4,O[f+0]=d,O[f+1]=h,O[f+2]=p,O[f+3]=m)}};return HA.Pixelate=i,e.Factory.addGetterSetter(n.Node,"pixelSize",8,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),HA}var qA={},Dle;function $1t(){if(Dle)return qA;Dle=1,Object.defineProperty(qA,"__esModule",{value:!0}),qA.Posterize=void 0;const e=Yr(),t=_a(),n=Zr(),r=function(i){const s=Math.round(this.levels()*254)+1,o=i.data,a=o.length,u=255/s;for(let l=0;l<a;l+=1)o[l]=Math.floor(o[l]/u)*u};return qA.Posterize=r,e.Factory.addGetterSetter(t.Node,"levels",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),qA}var WA={},Ole;function B1t(){if(Ole)return WA;Ole=1,Object.defineProperty(WA,"__esModule",{value:!0}),WA.RGB=void 0;const e=Yr(),t=_a(),n=Zr(),r=function(i){const s=i.data,o=s.length,a=this.red(),u=this.green(),l=this.blue();for(let c=0;c<o;c+=4){const f=(.34*s[c]+.5*s[c+1]+.16*s[c+2])/255;s[c]=f*a,s[c+1]=f*u,s[c+2]=f*l,s[c+3]=s[c+3]}};return WA.RGB=r,e.Factory.addGetterSetter(t.Node,"red",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),e.Factory.addGetterSetter(t.Node,"green",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),e.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,e.Factory.afterSetFilter),WA}var GA={},Mle;function j1t(){if(Mle)return GA;Mle=1,Object.defineProperty(GA,"__esModule",{value:!0}),GA.RGBA=void 0;const e=Yr(),t=_a(),n=Zr(),r=function(i){const s=i.data,o=s.length,a=this.red(),u=this.green(),l=this.blue(),c=this.alpha();for(let f=0;f<o;f+=4){const d=1-c;s[f]=a*c+s[f]*d,s[f+1]=u*c+s[f+1]*d,s[f+2]=l*c+s[f+2]*d}};return GA.RGBA=r,e.Factory.addGetterSetter(t.Node,"red",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),e.Factory.addGetterSetter(t.Node,"green",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),e.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"alpha",1,function(i){return this._filterUpToDate=!1,i>1?1:i<0?0:i}),GA}var YA={},Lle;function U1t(){if(Lle)return YA;Lle=1,Object.defineProperty(YA,"__esModule",{value:!0}),YA.Sepia=void 0;const e=function(t){const n=t.data,r=n.length;for(let i=0;i<r;i+=4){const s=n[i+0],o=n[i+1],a=n[i+2];n[i+0]=Math.min(255,s*.393+o*.769+a*.189),n[i+1]=Math.min(255,s*.349+o*.686+a*.168),n[i+2]=Math.min(255,s*.272+o*.534+a*.131)}};return YA.Sepia=e,YA}var KA={},Fle;function z1t(){if(Fle)return KA;Fle=1,Object.defineProperty(KA,"__esModule",{value:!0}),KA.Solarize=void 0;const e=function(t){const n=t.data,r=t.width,i=t.height,s=r*4;let o=i;do{const a=(o-1)*s;let u=r;do{const l=a+(u-1)*4;let c=n[l],f=n[l+1],d=n[l+2];c>127&&(c=255-c),f>127&&(f=255-f),d>127&&(d=255-d),n[l]=c,n[l+1]=f,n[l+2]=d}while(--u)}while(--o)};return KA.Solarize=e,KA}var XA={},$le;function V1t(){if($le)return XA;$le=1,Object.defineProperty(XA,"__esModule",{value:!0}),XA.Threshold=void 0;const e=Yr(),t=_a(),n=Zr(),r=function(i){const s=this.threshold()*255,o=i.data,a=o.length;for(let u=0;u<a;u+=1)o[u]=o[u]<s?0:255};return XA.Threshold=r,e.Factory.addGetterSetter(t.Node,"threshold",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),XA}var Ble;function H1t(){if(Ble)return cA;Ble=1,Object.defineProperty(cA,"__esModule",{value:!0}),cA.Konva=void 0;const e=iV(),t=f1t(),n=h1t(),r=p1t(),i=m1t(),s=g1t(),o=y1t(),a=_Se(),u=zK(),l=wSe(),c=v1t(),f=b1t(),d=x1t(),h=_1t(),p=ESe(),m=w1t(),g=E1t(),b=S1t(),y=T1t(),x=C1t(),w=A1t(),S=k1t(),C=R1t(),R=I1t(),I=P1t(),O=N1t(),M=D1t(),L=O1t(),H=M1t(),D=L1t(),B=F1t(),z=$1t(),G=B1t(),Z=j1t(),ne=U1t(),ue=z1t(),X=V1t();return cA.Konva=e.Konva.Util._assign(e.Konva,{Arc:t.Arc,Arrow:n.Arrow,Circle:r.Circle,Ellipse:i.Ellipse,Image:s.Image,Label:o.Label,Tag:o.Tag,Line:a.Line,Path:u.Path,Rect:l.Rect,RegularPolygon:c.RegularPolygon,Ring:f.Ring,Sprite:d.Sprite,Star:h.Star,Text:p.Text,TextPath:m.TextPath,Transformer:g.Transformer,Wedge:b.Wedge,Filters:{Blur:y.Blur,Brighten:x.Brighten,Contrast:w.Contrast,Emboss:S.Emboss,Enhance:C.Enhance,Grayscale:R.Grayscale,HSL:I.HSL,HSV:O.HSV,Invert:M.Invert,Kaleidoscope:L.Kaleidoscope,Mask:H.Mask,Noise:D.Noise,Pixelate:B.Pixelate,Posterize:z.Posterize,RGB:G.RGB,RGBA:Z.RGBA,Sepia:ne.Sepia,Solarize:ue.Solarize,Threshold:X.Threshold}}),cA}var q1t=CN.exports,jle;function W1t(){if(jle)return CN.exports;jle=1,Object.defineProperty(q1t,"__esModule",{value:!0});const e=H1t();return CN.exports=e.Konva,CN.exports}W1t();var K6={exports:{}},Ule;function G1t(){return Ule||(Ule=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var n=iV();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return n.Konva}});const r=iV();e.exports=r.Konva}(K6,K6.exports)),K6.exports}var Y1t=G1t();const S4=gc(Y1t);var fB={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dB,zle;function K1t(){return zle||(zle=1,dB=function(t){var n={},r=A1(),i=oq(),s=Object.assign;function o(T){for(var A="https://reactjs.org/docs/error-decoder.html?invariant="+T,$=1;$<arguments.length;$++)A+="&args[]="+encodeURIComponent(arguments[$]);return"Minified React error #"+T+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),l=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),S=Symbol.iterator;function C(T){return T===null||typeof T!="object"?null:(T=S&&T[S]||T["@@iterator"],typeof T=="function"?T:null)}function R(T){if(T==null)return null;if(typeof T=="function")return T.displayName||T.name||null;if(typeof T=="string")return T;switch(T){case c:return"Fragment";case l:return"Portal";case d:return"Profiler";case f:return"StrictMode";case g:return"Suspense";case b:return"SuspenseList"}if(typeof T=="object")switch(T.$$typeof){case p:return(T.displayName||"Context")+".Consumer";case h:return(T._context.displayName||"Context")+".Provider";case m:var A=T.render;return T=T.displayName,T||(T=A.displayName||A.name||"",T=T!==""?"ForwardRef("+T+")":"ForwardRef"),T;case y:return A=T.displayName||null,A!==null?A:R(T.type)||"Memo";case x:A=T._payload,T=T._init;try{return R(T(A))}catch{}}return null}function I(T){var A=T.type;switch(T.tag){case 24:return"Cache";case 9:return(A.displayName||"Context")+".Consumer";case 10:return(A._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return T=A.render,T=T.displayName||T.name||"",A.displayName||(T!==""?"ForwardRef("+T+")":"ForwardRef");case 7:return"Fragment";case 5:return A;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(A);case 8:return A===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof A=="function")return A.displayName||A.name||null;if(typeof A=="string")return A}return null}function O(T){var A=T,$=T;if(T.alternate)for(;A.return;)A=A.return;else{T=A;do A=T,A.flags&4098&&($=A.return),T=A.return;while(T)}return A.tag===3?$:null}function M(T){if(O(T)!==T)throw Error(o(188))}function L(T){var A=T.alternate;if(!A){if(A=O(T),A===null)throw Error(o(188));return A!==T?null:T}for(var $=T,Y=A;;){var J=$.return;if(J===null)break;var ae=J.alternate;if(ae===null){if(Y=J.return,Y!==null){$=Y;continue}break}if(J.child===ae.child){for(ae=J.child;ae;){if(ae===$)return M(J),T;if(ae===Y)return M(J),A;ae=ae.sibling}throw Error(o(188))}if($.return!==Y.return)$=J,Y=ae;else{for(var xe=!1,He=J.child;He;){if(He===$){xe=!0,$=J,Y=ae;break}if(He===Y){xe=!0,Y=J,$=ae;break}He=He.sibling}if(!xe){for(He=ae.child;He;){if(He===$){xe=!0,$=ae,Y=J;break}if(He===Y){xe=!0,Y=ae,$=J;break}He=He.sibling}if(!xe)throw Error(o(189))}}if($.alternate!==Y)throw Error(o(190))}if($.tag!==3)throw Error(o(188));return $.stateNode.current===$?T:A}function H(T){return T=L(T),T!==null?D(T):null}function D(T){if(T.tag===5||T.tag===6)return T;for(T=T.child;T!==null;){var A=D(T);if(A!==null)return A;T=T.sibling}return null}function B(T){if(T.tag===5||T.tag===6)return T;for(T=T.child;T!==null;){if(T.tag!==4){var A=B(T);if(A!==null)return A}T=T.sibling}return null}var z=Array.isArray,G=t.getPublicInstance,Z=t.getRootHostContext,ne=t.getChildHostContext,ue=t.prepareForCommit,X=t.resetAfterCommit,q=t.createInstance,te=t.appendInitialChild,W=t.finalizeInitialChildren,ee=t.prepareUpdate,oe=t.shouldSetTextContent,pe=t.createTextInstance,ce=t.scheduleTimeout,he=t.cancelTimeout,Ee=t.noTimeout,Ae=t.isPrimaryRenderer,ge=t.supportsMutation,me=t.supportsPersistence,Oe=t.supportsHydration,Me=t.getInstanceFromNode,Ye=t.preparePortalMount,lt=t.getCurrentEventPriority,We=t.detachDeletedInstance,nt=t.supportsMicrotasks,yt=t.scheduleMicrotask,_t=t.supportsTestSelectors,It=t.findFiberRoot,Et=t.getBoundingRect,Ke=t.getTextContent,Lt=t.isHiddenSubtree,sn=t.matchAccessibilityRole,Fe=t.setFocusIfFocusable,Qe=t.setupIntersectionObserver,wt=t.appendChild,Vt=t.appendChildToContainer,Wt=t.commitTextUpdate,bn=t.commitMount,Dn=t.commitUpdate,Zn=t.insertBefore,wr=t.insertInContainerBefore,Hn=t.removeChild,nr=t.removeChildFromContainer,Ei=t.resetTextContent,Dr=t.hideInstance,Co=t.hideTextInstance,Ji=t.unhideInstance,Di=t.unhideTextInstance,Zi=t.clearContainer,ei=t.cloneInstance,mo=t.createContainerChildSet,Gu=t.appendChildToContainerChildSet,Ea=t.finalizeContainerChildren,Sa=t.replaceContainerChildren,Kr=t.cloneHiddenInstance,Oi=t.cloneHiddenTextInstance,si=t.canHydrateInstance,Zs=t.canHydrateTextInstance,Xr=t.canHydrateSuspenseInstance,Hi=t.isSuspenseInstancePending,eo=t.isSuspenseInstanceFallback,go=t.getSuspenseInstanceFallbackErrorDetails,Qo=t.registerSuspenseInstanceRetry,Ta=t.getNextHydratableSibling,pd=t.getFirstHydratableChild,Hr=t.getFirstHydratableChildWithinContainer,Pl=t.getFirstHydratableChildWithinSuspenseInstance,bs=t.hydrateInstance,Ya=t.hydrateTextInstance,Jo=t.hydrateSuspenseInstance,yh=t.getNextHydratableInstanceAfterSuspenseInstance,md=t.commitHydratedContainer,mf=t.commitHydratedSuspenseInstance,gf=t.clearSuspenseBoundary,xc=t.clearSuspenseBoundaryFromContainer,_c=t.shouldDeleteUnhydratedTailInstances,wc=t.didNotMatchHydratedContainerTextInstance,Er=t.didNotMatchHydratedTextInstance,Ec;function xs(T){if(Ec===void 0)try{throw Error()}catch($){var A=$.stack.trim().match(/\n( *(at )?)/);Ec=A&&A[1]||""}return`
`+Ec+T}var Ka=!1;function As(T,A){if(!T||Ka)return"";Ka=!0;var $=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(A)if(A=function(){throw Error()},Object.defineProperty(A.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(A,[])}catch(Ft){var Y=Ft}Reflect.construct(T,[],A)}else{try{A.call()}catch(Ft){Y=Ft}T.call(A.prototype)}else{try{throw Error()}catch(Ft){Y=Ft}T()}}catch(Ft){if(Ft&&Y&&typeof Ft.stack=="string"){for(var J=Ft.stack.split(`
`),ae=Y.stack.split(`
`),xe=J.length-1,He=ae.length-1;1<=xe&&0<=He&&J[xe]!==ae[He];)He--;for(;1<=xe&&0<=He;xe--,He--)if(J[xe]!==ae[He]){if(xe!==1||He!==1)do if(xe--,He--,0>He||J[xe]!==ae[He]){var at=`
`+J[xe].replace(" at new "," at ");return T.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",T.displayName)),at}while(1<=xe&&0<=He);break}}}finally{Ka=!1,Error.prepareStackTrace=$}return(T=T?T.displayName||T.name:"")?xs(T):""}var Nl=Object.prototype.hasOwnProperty,Sc=[],Zo=-1;function qi(T){return{current:T}}function ti(T){0>Zo||(T.current=Sc[Zo],Sc[Zo]=null,Zo--)}function rr(T,A){Zo++,Sc[Zo]=T.current,T.current=A}var ve={},Ie=qi(ve),Se=qi(!1),Be=ve;function ze(T,A){var $=T.type.contextTypes;if(!$)return ve;var Y=T.stateNode;if(Y&&Y.__reactInternalMemoizedUnmaskedChildContext===A)return Y.__reactInternalMemoizedMaskedChildContext;var J={},ae;for(ae in $)J[ae]=A[ae];return Y&&(T=T.stateNode,T.__reactInternalMemoizedUnmaskedChildContext=A,T.__reactInternalMemoizedMaskedChildContext=J),J}function De(T){return T=T.childContextTypes,T!=null}function ht(){ti(Se),ti(Ie)}function kt(T,A,$){if(Ie.current!==ve)throw Error(o(168));rr(Ie,A),rr(Se,$)}function Nt(T,A,$){var Y=T.stateNode;if(A=A.childContextTypes,typeof Y.getChildContext!="function")return $;Y=Y.getChildContext();for(var J in Y)if(!(J in A))throw Error(o(108,I(T)||"Unknown",J));return s({},$,Y)}function Rt(T){return T=(T=T.stateNode)&&T.__reactInternalMemoizedMergedChildContext||ve,Be=Ie.current,rr(Ie,T),rr(Se,Se.current),!0}function jt(T,A,$){var Y=T.stateNode;if(!Y)throw Error(o(169));$?(T=Nt(T,A,Be),Y.__reactInternalMemoizedMergedChildContext=T,ti(Se),ti(Ie),rr(Ie,T)):ti(Se),rr(Se,$)}var Zt=Math.clz32?Math.clz32:lr,qn=Math.log,Sn=Math.LN2;function lr(T){return T>>>=0,T===0?32:31-(qn(T)/Sn|0)|0}var _n=64,br=4194304;function ls(T){switch(T&-T){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return T&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return T&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return T}}function Ao(T,A){var $=T.pendingLanes;if($===0)return 0;var Y=0,J=T.suspendedLanes,ae=T.pingedLanes,xe=$&268435455;if(xe!==0){var He=xe&~J;He!==0?Y=ls(He):(ae&=xe,ae!==0&&(Y=ls(ae)))}else xe=$&~J,xe!==0?Y=ls(xe):ae!==0&&(Y=ls(ae));if(Y===0)return 0;if(A!==0&&A!==Y&&!(A&J)&&(J=Y&-Y,ae=A&-A,J>=ae||J===16&&(ae&4194240)!==0))return A;if(Y&4&&(Y|=$&16),A=T.entangledLanes,A!==0)for(T=T.entanglements,A&=Y;0<A;)$=31-Zt(A),J=1<<$,Y|=T[$],A&=~J;return Y}function Dl(T,A){switch(T){case 1:case 2:case 4:return A+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gd(T,A){for(var $=T.suspendedLanes,Y=T.pingedLanes,J=T.expirationTimes,ae=T.pendingLanes;0<ae;){var xe=31-Zt(ae),He=1<<xe,at=J[xe];at===-1?(!(He&$)||He&Y)&&(J[xe]=Dl(He,A)):at<=A&&(T.expiredLanes|=He),ae&=~He}}function Yu(T){return T=T.pendingLanes&-1073741825,T!==0?T:T&1073741824?1073741824:0}function yf(){var T=_n;return _n<<=1,!(_n&4194240)&&(_n=64),T}function to(T){for(var A=[],$=0;31>$;$++)A.push(T);return A}function Mi(T,A,$){T.pendingLanes|=A,A!==536870912&&(T.suspendedLanes=0,T.pingedLanes=0),T=T.eventTimes,A=31-Zt(A),T[A]=$}function ko(T,A){var $=T.pendingLanes&~A;T.pendingLanes=A,T.suspendedLanes=0,T.pingedLanes=0,T.expiredLanes&=A,T.mutableReadLanes&=A,T.entangledLanes&=A,A=T.entanglements;var Y=T.eventTimes;for(T=T.expirationTimes;0<$;){var J=31-Zt($),ae=1<<J;A[J]=0,Y[J]=-1,T[J]=-1,$&=~ae}}function ea(T,A){var $=T.entangledLanes|=A;for(T=T.entanglements;$;){var Y=31-Zt($),J=1<<Y;J&A|T[Y]&A&&(T[Y]|=A),$&=~J}}var cr=0;function Ca(T){return T&=-T,1<T?4<T?T&268435455?16:536870912:4:1}var Aa=i.unstable_scheduleCallback,vp=i.unstable_cancelCallback,Ol=i.unstable_shouldYield,ks=i.unstable_requestPaint,Rs=i.unstable_now,yd=i.unstable_ImmediatePriority,Tc=i.unstable_UserBlockingPriority,Ml=i.unstable_NormalPriority,X0=i.unstable_IdlePriority,xr=null,Gn=null;function Cc(T){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(xr,T,void 0,(T.current.flags&128)===128)}catch{}}function Ce(T,A){return T===A&&(T!==0||1/T===1/A)||T!==T&&A!==A}var Ne=typeof Object.is=="function"?Object.is:Ce,rt=null,hn=!1,ir=!1;function Or(T){rt===null?rt=[T]:rt.push(T)}function gi(T){hn=!0,Or(T)}function dn(){if(!ir&&rt!==null){ir=!0;var T=0,A=cr;try{var $=rt;for(cr=1;T<$.length;T++){var Y=$[T];do Y=Y(!0);while(Y!==null)}rt=null,hn=!1}catch(J){throw rt!==null&&(rt=rt.slice(T+1)),Aa(yd,dn),J}finally{cr=A,ir=!1}}return null}var Tr=[],Ir=0,_s=null,ta=0,Mr=[],js=0,Li=null,no=1,Xa="";function na(T,A){Tr[Ir++]=ta,Tr[Ir++]=_s,_s=T,ta=A}function $g(T,A,$){Mr[js++]=no,Mr[js++]=Xa,Mr[js++]=Li,Li=T;var Y=no;T=Xa;var J=32-Zt(Y)-1;Y&=~(1<<J),$+=1;var ae=32-Zt(A)+J;if(30<ae){var xe=J-J%5;ae=(Y&(1<<xe)-1).toString(32),Y>>=xe,J-=xe,no=1<<32-Zt(A)+J|$<<J|Y,Xa=ae+T}else no=1<<ae|$<<J|Y,Xa=T}function ro(T){T.return!==null&&(na(T,1),$g(T,1,0))}function Ac(T){for(;T===_s;)_s=Tr[--Ir],Tr[Ir]=null,ta=Tr[--Ir],Tr[Ir]=null;for(;T===Li;)Li=Mr[--js],Mr[js]=null,Xa=Mr[--js],Mr[js]=null,no=Mr[--js],Mr[js]=null}var oi=null,Ro=null,yi=!1,ka=!1,ra=null;function vd(T,A){var $=Ds(5,null,null,0);$.elementType="DELETED",$.stateNode=A,$.return=T,A=T.deletions,A===null?(T.deletions=[$],T.flags|=16):A.push($)}function vi(T,A){switch(T.tag){case 5:return A=si(A,T.type,T.pendingProps),A!==null?(T.stateNode=A,oi=T,Ro=pd(A),!0):!1;case 6:return A=Zs(A,T.pendingProps),A!==null?(T.stateNode=A,oi=T,Ro=null,!0):!1;case 13:if(A=Xr(A),A!==null){var $=Li!==null?{id:no,overflow:Xa}:null;return T.memoizedState={dehydrated:A,treeContext:$,retryLane:1073741824},$=Ds(18,null,null,0),$.stateNode=A,$.return=T,T.child=$,oi=T,Ro=null,!0}return!1;default:return!1}}function Ku(T){return(T.mode&1)!==0&&(T.flags&128)===0}function Xu(T){if(yi){var A=Ro;if(A){var $=A;if(!vi(T,A)){if(Ku(T))throw Error(o(418));A=Ta($);var Y=oi;A&&vi(T,A)?vd(Y,$):(T.flags=T.flags&-4097|2,yi=!1,oi=T)}}else{if(Ku(T))throw Error(o(418));T.flags=T.flags&-4097|2,yi=!1,oi=T}}}function Bg(T){for(T=T.return;T!==null&&T.tag!==5&&T.tag!==3&&T.tag!==13;)T=T.return;oi=T}function bd(T){if(!Oe||T!==oi)return!1;if(!yi)return Bg(T),yi=!0,!1;if(T.tag!==3&&(T.tag!==5||_c(T.type)&&!oe(T.type,T.memoizedProps))){var A=Ro;if(A){if(Ku(T))throw jg(),Error(o(418));for(;A;)vd(T,A),A=Ta(A)}}if(Bg(T),T.tag===13){if(!Oe)throw Error(o(316));if(T=T.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(o(317));Ro=yh(T)}else Ro=oi?Ta(T.stateNode):null;return!0}function jg(){for(var T=Ro;T;)T=Ta(T)}function vf(){Oe&&(Ro=oi=null,ka=yi=!1)}function vh(T){ra===null?ra=[T]:ra.push(T)}var Ra=a.ReactCurrentBatchConfig;function bf(T,A){if(Ne(T,A))return!0;if(typeof T!="object"||T===null||typeof A!="object"||A===null)return!1;var $=Object.keys(T),Y=Object.keys(A);if($.length!==Y.length)return!1;for(Y=0;Y<$.length;Y++){var J=$[Y];if(!Nl.call(A,J)||!Ne(T[J],A[J]))return!1}return!0}function xd(T){switch(T.tag){case 5:return xs(T.type);case 16:return xs("Lazy");case 13:return xs("Suspense");case 19:return xs("SuspenseList");case 0:case 2:case 15:return T=As(T.type,!1),T;case 11:return T=As(T.type.render,!1),T;case 1:return T=As(T.type,!0),T;default:return""}}function xu(T,A,$){if(T=$.ref,T!==null&&typeof T!="function"&&typeof T!="object"){if($._owner){if($=$._owner,$){if($.tag!==1)throw Error(o(309));var Y=$.stateNode}if(!Y)throw Error(o(147,T));var J=Y,ae=""+T;return A!==null&&A.ref!==null&&typeof A.ref=="function"&&A.ref._stringRef===ae?A.ref:(A=function(xe){var He=J.refs;xe===null?delete He[ae]:He[ae]=xe},A._stringRef=ae,A)}if(typeof T!="string")throw Error(o(284));if(!$._owner)throw Error(o(290,T))}return T}function F(T,A){throw T=Object.prototype.toString.call(A),Error(o(31,T==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":T))}function re(T){var A=T._init;return A(T._payload)}function le(T){function A(it,qe){if(T){var ct=it.deletions;ct===null?(it.deletions=[qe],it.flags|=16):ct.push(qe)}}function $(it,qe){if(!T)return null;for(;qe!==null;)A(it,qe),qe=qe.sibling;return null}function Y(it,qe){for(it=new Map;qe!==null;)qe.key!==null?it.set(qe.key,qe):it.set(qe.index,qe),qe=qe.sibling;return it}function J(it,qe){return it=Bc(it,qe),it.index=0,it.sibling=null,it}function ae(it,qe,ct){return it.index=ct,T?(ct=it.alternate,ct!==null?(ct=ct.index,ct<qe?(it.flags|=2,qe):ct):(it.flags|=2,qe)):(it.flags|=1048576,qe)}function xe(it){return T&&it.alternate===null&&(it.flags|=2),it}function He(it,qe,ct,rn){return qe===null||qe.tag!==6?(qe=cm(ct,it.mode,rn),qe.return=it,qe):(qe=J(qe,ct),qe.return=it,qe)}function at(it,qe,ct,rn){var kn=ct.type;return kn===c?yn(it,qe,ct.props.children,rn,ct.key):qe!==null&&(qe.elementType===kn||typeof kn=="object"&&kn!==null&&kn.$$typeof===x&&re(kn)===qe.type)?(rn=J(qe,ct.props),rn.ref=xu(it,qe,ct),rn.return=it,rn):(rn=kd(ct.type,ct.key,ct.props,null,it.mode,rn),rn.ref=xu(it,qe,ct),rn.return=it,rn)}function Ft(it,qe,ct,rn){return qe===null||qe.tag!==4||qe.stateNode.containerInfo!==ct.containerInfo||qe.stateNode.implementation!==ct.implementation?(qe=oy(ct,it.mode,rn),qe.return=it,qe):(qe=J(qe,ct.children||[]),qe.return=it,qe)}function yn(it,qe,ct,rn,kn){return qe===null||qe.tag!==7?(qe=Lo(ct,it.mode,rn,kn),qe.return=it,qe):(qe=J(qe,ct),qe.return=it,qe)}function tr(it,qe,ct){if(typeof qe=="string"&&qe!==""||typeof qe=="number")return qe=cm(""+qe,it.mode,ct),qe.return=it,qe;if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case u:return ct=kd(qe.type,qe.key,qe.props,null,it.mode,ct),ct.ref=xu(it,null,qe),ct.return=it,ct;case l:return qe=oy(qe,it.mode,ct),qe.return=it,qe;case x:var rn=qe._init;return tr(it,rn(qe._payload),ct)}if(z(qe)||C(qe))return qe=Lo(qe,it.mode,ct,null),qe.return=it,qe;F(it,qe)}return null}function an(it,qe,ct,rn){var kn=qe!==null?qe.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number")return kn!==null?null:He(it,qe,""+ct,rn);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case u:return ct.key===kn?at(it,qe,ct,rn):null;case l:return ct.key===kn?Ft(it,qe,ct,rn):null;case x:return kn=ct._init,an(it,qe,kn(ct._payload),rn)}if(z(ct)||C(ct))return kn!==null?null:yn(it,qe,ct,rn,null);F(it,ct)}return null}function Ui(it,qe,ct,rn,kn){if(typeof rn=="string"&&rn!==""||typeof rn=="number")return it=it.get(ct)||null,He(qe,it,""+rn,kn);if(typeof rn=="object"&&rn!==null){switch(rn.$$typeof){case u:return it=it.get(rn.key===null?ct:rn.key)||null,at(qe,it,rn,kn);case l:return it=it.get(rn.key===null?ct:rn.key)||null,Ft(qe,it,rn,kn);case x:var Gt=rn._init;return Ui(it,qe,ct,Gt(rn._payload),kn)}if(z(rn)||C(rn))return it=it.get(ct)||null,yn(qe,it,rn,kn,null);F(qe,rn)}return null}function Si(it,qe,ct,rn){for(var kn=null,Gt=null,Kn=qe,Fr=qe=0,rs=null;Kn!==null&&Fr<ct.length;Fr++){Kn.index>Fr?(rs=Kn,Kn=null):rs=Kn.sibling;var Br=an(it,Kn,ct[Fr],rn);if(Br===null){Kn===null&&(Kn=rs);break}T&&Kn&&Br.alternate===null&&A(it,Kn),qe=ae(Br,qe,Fr),Gt===null?kn=Br:Gt.sibling=Br,Gt=Br,Kn=rs}if(Fr===ct.length)return $(it,Kn),yi&&na(it,Fr),kn;if(Kn===null){for(;Fr<ct.length;Fr++)Kn=tr(it,ct[Fr],rn),Kn!==null&&(qe=ae(Kn,qe,Fr),Gt===null?kn=Kn:Gt.sibling=Kn,Gt=Kn);return yi&&na(it,Fr),kn}for(Kn=Y(it,Kn);Fr<ct.length;Fr++)rs=Ui(Kn,it,Fr,ct[Fr],rn),rs!==null&&(T&&rs.alternate!==null&&Kn.delete(rs.key===null?Fr:rs.key),qe=ae(rs,qe,Fr),Gt===null?kn=rs:Gt.sibling=rs,Gt=rs);return T&&Kn.forEach(function($o){return A(it,$o)}),yi&&na(it,Fr),kn}function su(it,qe,ct,rn){var kn=C(ct);if(typeof kn!="function")throw Error(o(150));if(ct=kn.call(ct),ct==null)throw Error(o(151));for(var Gt=kn=null,Kn=qe,Fr=qe=0,rs=null,Br=ct.next();Kn!==null&&!Br.done;Fr++,Br=ct.next()){Kn.index>Fr?(rs=Kn,Kn=null):rs=Kn.sibling;var $o=an(it,Kn,Br.value,rn);if($o===null){Kn===null&&(Kn=rs);break}T&&Kn&&$o.alternate===null&&A(it,Kn),qe=ae($o,qe,Fr),Gt===null?kn=$o:Gt.sibling=$o,Gt=$o,Kn=rs}if(Br.done)return $(it,Kn),yi&&na(it,Fr),kn;if(Kn===null){for(;!Br.done;Fr++,Br=ct.next())Br=tr(it,Br.value,rn),Br!==null&&(qe=ae(Br,qe,Fr),Gt===null?kn=Br:Gt.sibling=Br,Gt=Br);return yi&&na(it,Fr),kn}for(Kn=Y(it,Kn);!Br.done;Fr++,Br=ct.next())Br=Ui(Kn,it,Fr,Br.value,rn),Br!==null&&(T&&Br.alternate!==null&&Kn.delete(Br.key===null?Fr:Br.key),qe=ae(Br,qe,Fr),Gt===null?kn=Br:Gt.sibling=Br,Gt=Br);return T&&Kn.forEach(function(p2){return A(it,p2)}),yi&&na(it,Fr),kn}function Fo(it,qe,ct,rn){if(typeof ct=="object"&&ct!==null&&ct.type===c&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case u:e:{for(var kn=ct.key,Gt=qe;Gt!==null;){if(Gt.key===kn){if(kn=ct.type,kn===c){if(Gt.tag===7){$(it,Gt.sibling),qe=J(Gt,ct.props.children),qe.return=it,it=qe;break e}}else if(Gt.elementType===kn||typeof kn=="object"&&kn!==null&&kn.$$typeof===x&&re(kn)===Gt.type){$(it,Gt.sibling),qe=J(Gt,ct.props),qe.ref=xu(it,Gt,ct),qe.return=it,it=qe;break e}$(it,Gt);break}else A(it,Gt);Gt=Gt.sibling}ct.type===c?(qe=Lo(ct.props.children,it.mode,rn,ct.key),qe.return=it,it=qe):(rn=kd(ct.type,ct.key,ct.props,null,it.mode,rn),rn.ref=xu(it,qe,ct),rn.return=it,it=rn)}return xe(it);case l:e:{for(Gt=ct.key;qe!==null;){if(qe.key===Gt)if(qe.tag===4&&qe.stateNode.containerInfo===ct.containerInfo&&qe.stateNode.implementation===ct.implementation){$(it,qe.sibling),qe=J(qe,ct.children||[]),qe.return=it,it=qe;break e}else{$(it,qe);break}else A(it,qe);qe=qe.sibling}qe=oy(ct,it.mode,rn),qe.return=it,it=qe}return xe(it);case x:return Gt=ct._init,Fo(it,qe,Gt(ct._payload),rn)}if(z(ct))return Si(it,qe,ct,rn);if(C(ct))return su(it,qe,ct,rn);F(it,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"?(ct=""+ct,qe!==null&&qe.tag===6?($(it,qe.sibling),qe=J(qe,ct),qe.return=it,it=qe):($(it,qe),qe=cm(ct,it.mode,rn),qe.return=it,it=qe),xe(it)):$(it,qe)}return Fo}var be=le(!0),Xe=le(!1),ut=qi(null),Xt=null,Lr=null,Us=null;function Pr(){Us=Lr=Xt=null}function ai(T,A,$){Ae?(rr(ut,A._currentValue),A._currentValue=$):(rr(ut,A._currentValue2),A._currentValue2=$)}function cs(T){var A=ut.current;ti(ut),Ae?T._currentValue=A:T._currentValue2=A}function Io(T,A,$){for(;T!==null;){var Y=T.alternate;if((T.childLanes&A)!==A?(T.childLanes|=A,Y!==null&&(Y.childLanes|=A)):Y!==null&&(Y.childLanes&A)!==A&&(Y.childLanes|=A),T===$)break;T=T.return}}function yo(T,A){Xt=T,Us=Lr=null,T=T.dependencies,T!==null&&T.firstContext!==null&&(T.lanes&A&&(Mn=!0),T.firstContext=null)}function vo(T){var A=Ae?T._currentValue:T._currentValue2;if(Us!==T)if(T={context:T,memoizedValue:A,next:null},Lr===null){if(Xt===null)throw Error(o(308));Lr=T,Xt.dependencies={lanes:0,firstContext:T}}else Lr=Lr.next=T;return A}var Ll=null;function V1(T){Ll===null?Ll=[T]:Ll.push(T)}function px(T,A,$,Y){var J=A.interleaved;return J===null?($.next=$,V1(A)):($.next=J.next,J.next=$),A.interleaved=$,kc(T,Y)}function kc(T,A){T.lanes|=A;var $=T.alternate;for($!==null&&($.lanes|=A),$=T,T=T.return;T!==null;)T.childLanes|=A,$=T.alternate,$!==null&&($.childLanes|=A),$=T,T=T.return;return $.tag===3?$.stateNode:null}var Qu=!1;function bh(T){T.updateQueue={baseState:T.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function a2(T,A){T=T.updateQueue,A.updateQueue===T&&(A.updateQueue={baseState:T.baseState,firstBaseUpdate:T.firstBaseUpdate,lastBaseUpdate:T.lastBaseUpdate,shared:T.shared,effects:T.effects})}function _d(T,A){return{eventTime:T,lane:A,tag:0,payload:null,callback:null,next:null}}function Rc(T,A,$){var Y=T.updateQueue;if(Y===null)return null;if(Y=Y.shared,fr&2){var J=Y.pending;return J===null?A.next=A:(A.next=J.next,J.next=A),Y.pending=A,kc(T,$)}return J=Y.interleaved,J===null?(A.next=A,V1(Y)):(A.next=J.next,J.next=A),Y.interleaved=A,kc(T,$)}function Q0(T,A,$){if(A=A.updateQueue,A!==null&&(A=A.shared,($&4194240)!==0)){var Y=A.lanes;Y&=T.pendingLanes,$|=Y,A.lanes=$,ea(T,$)}}function Ju(T,A){var $=T.updateQueue,Y=T.alternate;if(Y!==null&&(Y=Y.updateQueue,$===Y)){var J=null,ae=null;if($=$.firstBaseUpdate,$!==null){do{var xe={eventTime:$.eventTime,lane:$.lane,tag:$.tag,payload:$.payload,callback:$.callback,next:null};ae===null?J=ae=xe:ae=ae.next=xe,$=$.next}while($!==null);ae===null?J=ae=A:ae=ae.next=A}else J=ae=A;$={baseState:Y.baseState,firstBaseUpdate:J,lastBaseUpdate:ae,shared:Y.shared,effects:Y.effects},T.updateQueue=$;return}T=$.lastBaseUpdate,T===null?$.firstBaseUpdate=A:T.next=A,$.lastBaseUpdate=A}function Ic(T,A,$,Y){var J=T.updateQueue;Qu=!1;var ae=J.firstBaseUpdate,xe=J.lastBaseUpdate,He=J.shared.pending;if(He!==null){J.shared.pending=null;var at=He,Ft=at.next;at.next=null,xe===null?ae=Ft:xe.next=Ft,xe=at;var yn=T.alternate;yn!==null&&(yn=yn.updateQueue,He=yn.lastBaseUpdate,He!==xe&&(He===null?yn.firstBaseUpdate=Ft:He.next=Ft,yn.lastBaseUpdate=at))}if(ae!==null){var tr=J.baseState;xe=0,yn=Ft=at=null,He=ae;do{var an=He.lane,Ui=He.eventTime;if((Y&an)===an){yn!==null&&(yn=yn.next={eventTime:Ui,lane:0,tag:He.tag,payload:He.payload,callback:He.callback,next:null});e:{var Si=T,su=He;switch(an=A,Ui=$,su.tag){case 1:if(Si=su.payload,typeof Si=="function"){tr=Si.call(Ui,tr,an);break e}tr=Si;break e;case 3:Si.flags=Si.flags&-65537|128;case 0:if(Si=su.payload,an=typeof Si=="function"?Si.call(Ui,tr,an):Si,an==null)break e;tr=s({},tr,an);break e;case 2:Qu=!0}}He.callback!==null&&He.lane!==0&&(T.flags|=64,an=J.effects,an===null?J.effects=[He]:an.push(He))}else Ui={eventTime:Ui,lane:an,tag:He.tag,payload:He.payload,callback:He.callback,next:null},yn===null?(Ft=yn=Ui,at=tr):yn=yn.next=Ui,xe|=an;if(He=He.next,He===null){if(He=J.shared.pending,He===null)break;an=He,He=an.next,an.next=null,J.lastBaseUpdate=an,J.shared.pending=null}}while(!0);if(yn===null&&(at=tr),J.baseState=at,J.firstBaseUpdate=Ft,J.lastBaseUpdate=yn,A=J.shared.interleaved,A!==null){J=A;do xe|=J.lane,J=J.next;while(J!==A)}else ae===null&&(J.shared.lanes=0);kf|=xe,T.lanes=xe,T.memoizedState=tr}}function u2(T,A,$){if(T=A.effects,A.effects=null,T!==null)for(A=0;A<T.length;A++){var Y=T[A],J=Y.callback;if(J!==null){if(Y.callback=null,Y=$,typeof J!="function")throw Error(o(191,J));J.call(Y)}}}var xh={},Fl=qi(xh),Pc=qi(xh),Po=qi(xh);function Zu(T){if(T===xh)throw Error(o(174));return T}function H1(T,A){rr(Po,A),rr(Pc,T),rr(Fl,xh),T=Z(A),ti(Fl),rr(Fl,T)}function bp(){ti(Fl),ti(Pc),ti(Po)}function mx(T){var A=Zu(Po.current),$=Zu(Fl.current);A=ne($,T.type,A),$!==A&&(rr(Pc,T),rr(Fl,A))}function gx(T){Pc.current===T&&(ti(Fl),ti(Pc))}var ws=qi(0);function wd(T){for(var A=T;A!==null;){if(A.tag===13){var $=A.memoizedState;if($!==null&&($=$.dehydrated,$===null||Hi($)||eo($)))return A}else if(A.tag===19&&A.memoizedProps.revealOrder!==void 0){if(A.flags&128)return A}else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===T)break;for(;A.sibling===null;){if(A.return===null||A.return===T)return null;A=A.return}A.sibling.return=A.return,A=A.sibling}return null}var Ve=[];function mt(){for(var T=0;T<Ve.length;T++){var A=Ve[T];Ae?A._workInProgressVersionPrimary=null:A._workInProgressVersionSecondary=null}Ve.length=0}var et=a.ReactCurrentDispatcher,on=a.ReactCurrentBatchConfig,Bn=0,On=null,Cr=null,er=null,_h=!1,Ug=!1,Ia=0,Ed=0;function No(){throw Error(o(321))}function $l(T,A){if(A===null)return!1;for(var $=0;$<A.length&&$<T.length;$++)if(!Ne(T[$],A[$]))return!1;return!0}function wh(T,A,$,Y,J,ae){if(Bn=ae,On=A,A.memoizedState=null,A.updateQueue=null,A.lanes=0,et.current=T===null||T.memoizedState===null?Wg:Cp,T=$(Y,J),Ug){ae=0;do{if(Ug=!1,Ia=0,25<=ae)throw Error(o(301));ae+=1,er=Cr=null,A.updateQueue=null,et.current=Gg,T=$(Y,J)}while(Ug)}if(et.current=Tp,A=Cr!==null&&Cr.next!==null,Bn=0,er=Cr=On=null,_h=!1,A)throw Error(o(300));return T}function xp(){var T=Ia!==0;return Ia=0,T}function mr(){var T={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?On.memoizedState=er=T:er=er.next=T,er}function ia(){if(Cr===null){var T=On.alternate;T=T!==null?T.memoizedState:null}else T=Cr.next;var A=er===null?On.memoizedState:er.next;if(A!==null)er=A,Cr=T;else{if(T===null)throw Error(o(310));Cr=T,T={memoizedState:Cr.memoizedState,baseState:Cr.baseState,baseQueue:Cr.baseQueue,queue:Cr.queue,next:null},er===null?On.memoizedState=er=T:er=er.next=T}return er}function Eh(T,A){return typeof A=="function"?A(T):A}function _p(T){var A=ia(),$=A.queue;if($===null)throw Error(o(311));$.lastRenderedReducer=T;var Y=Cr,J=Y.baseQueue,ae=$.pending;if(ae!==null){if(J!==null){var xe=J.next;J.next=ae.next,ae.next=xe}Y.baseQueue=J=ae,$.pending=null}if(J!==null){ae=J.next,Y=Y.baseState;var He=xe=null,at=null,Ft=ae;do{var yn=Ft.lane;if((Bn&yn)===yn)at!==null&&(at=at.next={lane:0,action:Ft.action,hasEagerState:Ft.hasEagerState,eagerState:Ft.eagerState,next:null}),Y=Ft.hasEagerState?Ft.eagerState:T(Y,Ft.action);else{var tr={lane:yn,action:Ft.action,hasEagerState:Ft.hasEagerState,eagerState:Ft.eagerState,next:null};at===null?(He=at=tr,xe=Y):at=at.next=tr,On.lanes|=yn,kf|=yn}Ft=Ft.next}while(Ft!==null&&Ft!==ae);at===null?xe=Y:at.next=He,Ne(Y,A.memoizedState)||(Mn=!0),A.memoizedState=Y,A.baseState=xe,A.baseQueue=at,$.lastRenderedState=Y}if(T=$.interleaved,T!==null){J=T;do ae=J.lane,On.lanes|=ae,kf|=ae,J=J.next;while(J!==T)}else J===null&&($.lanes=0);return[A.memoizedState,$.dispatch]}function J0(T){var A=ia(),$=A.queue;if($===null)throw Error(o(311));$.lastRenderedReducer=T;var Y=$.dispatch,J=$.pending,ae=A.memoizedState;if(J!==null){$.pending=null;var xe=J=J.next;do ae=T(ae,xe.action),xe=xe.next;while(xe!==J);Ne(ae,A.memoizedState)||(Mn=!0),A.memoizedState=ae,A.baseQueue===null&&(A.baseState=ae),$.lastRenderedState=ae}return[ae,Y]}function yx(){}function vx(T,A){var $=On,Y=ia(),J=A(),ae=!Ne(Y.memoizedState,J);if(ae&&(Y.memoizedState=J,Mn=!0),Y=Y.queue,wp(em.bind(null,$,Y,T),[T]),Y.getSnapshot!==A||ae||er!==null&&er.memoizedState.tag&1){if($.flags|=2048,Sh(9,xf.bind(null,$,Y,J,A),void 0,null),$i===null)throw Error(o(349));Bn&30||Z0($,A,J)}return J}function Z0(T,A,$){T.flags|=16384,T={getSnapshot:A,value:$},A=On.updateQueue,A===null?(A={lastEffect:null,stores:null},On.updateQueue=A,A.stores=[T]):($=A.stores,$===null?A.stores=[T]:$.push(T))}function xf(T,A,$,Y){A.value=$,A.getSnapshot=Y,q1(A)&&Bl(T)}function em(T,A,$){return $(function(){q1(A)&&Bl(T)})}function q1(T){var A=T.getSnapshot;T=T.value;try{var $=A();return!Ne(T,$)}catch{return!0}}function Bl(T){var A=kc(T,1);A!==null&&ji(A,T,1,-1)}function zg(T){var A=mr();return typeof T=="function"&&(T=T()),A.memoizedState=A.baseState=T,T={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eh,lastRenderedState:T},A.queue=T,T=T.dispatch=Pa.bind(null,On,T),[A.memoizedState,T]}function Sh(T,A,$,Y){return T={tag:T,create:A,destroy:$,deps:Y,next:null},A=On.updateQueue,A===null?(A={lastEffect:null,stores:null},On.updateQueue=A,A.lastEffect=T.next=T):($=A.lastEffect,$===null?A.lastEffect=T.next=T:(Y=$.next,$.next=T,T.next=Y,A.lastEffect=T)),T}function Vg(){return ia().memoizedState}function Hg(T,A,$,Y){var J=mr();On.flags|=T,J.memoizedState=Sh(1|A,$,void 0,Y===void 0?null:Y)}function jl(T,A,$,Y){var J=ia();Y=Y===void 0?null:Y;var ae=void 0;if(Cr!==null){var xe=Cr.memoizedState;if(ae=xe.destroy,Y!==null&&$l(Y,xe.deps)){J.memoizedState=Sh(A,$,ae,Y);return}}On.flags|=T,J.memoizedState=Sh(1|A,$,ae,Y)}function Th(T,A){return Hg(8390656,8,T,A)}function wp(T,A){return jl(2048,8,T,A)}function bx(T,A){return jl(4,2,T,A)}function Wi(T,A){return jl(4,4,T,A)}function W1(T,A){if(typeof A=="function")return T=T(),A(T),function(){A(null)};if(A!=null)return T=T(),A.current=T,function(){A.current=null}}function Ch(T,A,$){return $=$!=null?$.concat([T]):null,jl(4,4,W1.bind(null,A,T),$)}function _f(){}function qg(T,A){var $=ia();A=A===void 0?null:A;var Y=$.memoizedState;return Y!==null&&A!==null&&$l(A,Y[1])?Y[0]:($.memoizedState=[T,A],T)}function G1(T,A){var $=ia();A=A===void 0?null:A;var Y=$.memoizedState;return Y!==null&&A!==null&&$l(A,Y[1])?Y[0]:(T=T(),$.memoizedState=[T,A],T)}function Ep(T,A,$){return Bn&21?(Ne($,A)||($=yf(),On.lanes|=$,kf|=$,T.baseState=!0),A):(T.baseState&&(T.baseState=!1,Mn=!0),T.memoizedState=$)}function Y1(T,A){var $=cr;cr=$!==0&&4>$?$:4,T(!0);var Y=on.transition;on.transition={};try{T(!1),A()}finally{cr=$,on.transition=Y}}function Sp(){return ia().memoizedState}function io(T,A,$){var Y=bo(T);if($={lane:Y,action:$,hasEagerState:!1,eagerState:null,next:null},l2(T))xx(A,$);else if($=px(T,A,$,Y),$!==null){var J=ts();ji($,T,Y,J),tm($,A,Y)}}function Pa(T,A,$){var Y=bo(T),J={lane:Y,action:$,hasEagerState:!1,eagerState:null,next:null};if(l2(T))xx(A,J);else{var ae=T.alternate;if(T.lanes===0&&(ae===null||ae.lanes===0)&&(ae=A.lastRenderedReducer,ae!==null))try{var xe=A.lastRenderedState,He=ae(xe,$);if(J.hasEagerState=!0,J.eagerState=He,Ne(He,xe)){var at=A.interleaved;at===null?(J.next=J,V1(A)):(J.next=at.next,at.next=J),A.interleaved=J;return}}catch{}finally{}$=px(T,A,J,Y),$!==null&&(J=ts(),ji($,T,Y,J),tm($,A,Y))}}function l2(T){var A=T.alternate;return T===On||A!==null&&A===On}function xx(T,A){Ug=_h=!0;var $=T.pending;$===null?A.next=A:(A.next=$.next,$.next=A),T.pending=A}function tm(T,A,$){if($&4194240){var Y=A.lanes;Y&=T.pendingLanes,$|=Y,A.lanes=$,ea(T,$)}}var Tp={readContext:vo,useCallback:No,useContext:No,useEffect:No,useImperativeHandle:No,useInsertionEffect:No,useLayoutEffect:No,useMemo:No,useReducer:No,useRef:No,useState:No,useDebugValue:No,useDeferredValue:No,useTransition:No,useMutableSource:No,useSyncExternalStore:No,useId:No,unstable_isNewReconciler:!1},Wg={readContext:vo,useCallback:function(T,A){return mr().memoizedState=[T,A===void 0?null:A],T},useContext:vo,useEffect:Th,useImperativeHandle:function(T,A,$){return $=$!=null?$.concat([T]):null,Hg(4194308,4,W1.bind(null,A,T),$)},useLayoutEffect:function(T,A){return Hg(4194308,4,T,A)},useInsertionEffect:function(T,A){return Hg(4,2,T,A)},useMemo:function(T,A){var $=mr();return A=A===void 0?null:A,T=T(),$.memoizedState=[T,A],T},useReducer:function(T,A,$){var Y=mr();return A=$!==void 0?$(A):A,Y.memoizedState=Y.baseState=A,T={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:T,lastRenderedState:A},Y.queue=T,T=T.dispatch=io.bind(null,On,T),[Y.memoizedState,T]},useRef:function(T){var A=mr();return T={current:T},A.memoizedState=T},useState:zg,useDebugValue:_f,useDeferredValue:function(T){return mr().memoizedState=T},useTransition:function(){var T=zg(!1),A=T[0];return T=Y1.bind(null,T[1]),mr().memoizedState=T,[A,T]},useMutableSource:function(){},useSyncExternalStore:function(T,A,$){var Y=On,J=mr();if(yi){if($===void 0)throw Error(o(407));$=$()}else{if($=A(),$i===null)throw Error(o(349));Bn&30||Z0(Y,A,$)}J.memoizedState=$;var ae={value:$,getSnapshot:A};return J.queue=ae,Th(em.bind(null,Y,ae,T),[T]),Y.flags|=2048,Sh(9,xf.bind(null,Y,ae,$,A),void 0,null),$},useId:function(){var T=mr(),A=$i.identifierPrefix;if(yi){var $=Xa,Y=no;$=(Y&~(1<<32-Zt(Y)-1)).toString(32)+$,A=":"+A+"R"+$,$=Ia++,0<$&&(A+="H"+$.toString(32)),A+=":"}else $=Ed++,A=":"+A+"r"+$.toString(32)+":";return T.memoizedState=A},unstable_isNewReconciler:!1},Cp={readContext:vo,useCallback:qg,useContext:vo,useEffect:wp,useImperativeHandle:Ch,useInsertionEffect:bx,useLayoutEffect:Wi,useMemo:G1,useReducer:_p,useRef:Vg,useState:function(){return _p(Eh)},useDebugValue:_f,useDeferredValue:function(T){var A=ia();return Ep(A,Cr.memoizedState,T)},useTransition:function(){var T=_p(Eh)[0],A=ia().memoizedState;return[T,A]},useMutableSource:yx,useSyncExternalStore:vx,useId:Sp,unstable_isNewReconciler:!1},Gg={readContext:vo,useCallback:qg,useContext:vo,useEffect:wp,useImperativeHandle:Ch,useInsertionEffect:bx,useLayoutEffect:Wi,useMemo:G1,useReducer:J0,useRef:Vg,useState:function(){return J0(Eh)},useDebugValue:_f,useDeferredValue:function(T){var A=ia();return Cr===null?A.memoizedState=T:Ep(A,Cr.memoizedState,T)},useTransition:function(){var T=J0(Eh)[0],A=ia().memoizedState;return[T,A]},useMutableSource:yx,useSyncExternalStore:vx,useId:Sp,unstable_isNewReconciler:!1};function Do(T,A){if(T&&T.defaultProps){A=s({},A),T=T.defaultProps;for(var $ in T)A[$]===void 0&&(A[$]=T[$]);return A}return A}function Ap(T,A,$,Y){A=T.memoizedState,$=$(Y,A),$=$==null?A:s({},A,$),T.memoizedState=$,T.lanes===0&&(T.updateQueue.baseState=$)}var Sd={isMounted:function(T){return(T=T._reactInternals)?O(T)===T:!1},enqueueSetState:function(T,A,$){T=T._reactInternals;var Y=ts(),J=bo(T),ae=_d(Y,J);ae.payload=A,$!=null&&(ae.callback=$),A=Rc(T,ae,J),A!==null&&(ji(A,T,J,Y),Q0(A,T,J))},enqueueReplaceState:function(T,A,$){T=T._reactInternals;var Y=ts(),J=bo(T),ae=_d(Y,J);ae.tag=1,ae.payload=A,$!=null&&(ae.callback=$),A=Rc(T,ae,J),A!==null&&(ji(A,T,J,Y),Q0(A,T,J))},enqueueForceUpdate:function(T,A){T=T._reactInternals;var $=ts(),Y=bo(T),J=_d($,Y);J.tag=2,A!=null&&(J.callback=A),A=Rc(T,J,Y),A!==null&&(ji(A,T,Y,$),Q0(A,T,Y))}};function Yg(T,A,$,Y,J,ae,xe){return T=T.stateNode,typeof T.shouldComponentUpdate=="function"?T.shouldComponentUpdate(Y,ae,xe):A.prototype&&A.prototype.isPureReactComponent?!bf($,Y)||!bf(J,ae):!0}function kp(T,A,$){var Y=!1,J=ve,ae=A.contextType;return typeof ae=="object"&&ae!==null?ae=vo(ae):(J=De(A)?Be:Ie.current,Y=A.contextTypes,ae=(Y=Y!=null)?ze(T,J):ve),A=new A($,ae),T.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Sd,T.stateNode=A,A._reactInternals=T,Y&&(T=T.stateNode,T.__reactInternalMemoizedUnmaskedChildContext=J,T.__reactInternalMemoizedMaskedChildContext=ae),A}function K1(T,A,$,Y){T=A.state,typeof A.componentWillReceiveProps=="function"&&A.componentWillReceiveProps($,Y),typeof A.UNSAFE_componentWillReceiveProps=="function"&&A.UNSAFE_componentWillReceiveProps($,Y),A.state!==T&&Sd.enqueueReplaceState(A,A.state,null)}function wf(T,A,$,Y){var J=T.stateNode;J.props=$,J.state=T.memoizedState,J.refs={},bh(T);var ae=A.contextType;typeof ae=="object"&&ae!==null?J.context=vo(ae):(ae=De(A)?Be:Ie.current,J.context=ze(T,ae)),J.state=T.memoizedState,ae=A.getDerivedStateFromProps,typeof ae=="function"&&(Ap(T,A,ae,$),J.state=T.memoizedState),typeof A.getDerivedStateFromProps=="function"||typeof J.getSnapshotBeforeUpdate=="function"||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(A=J.state,typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount(),A!==J.state&&Sd.enqueueReplaceState(J,J.state,null),Ic(T,$,J,Y),J.state=T.memoizedState),typeof J.componentDidMount=="function"&&(T.flags|=4194308)}function Rp(T,A){try{var $="",Y=A;do $+=xd(Y),Y=Y.return;while(Y);var J=$}catch(ae){J=`
Error generating stack: `+ae.message+`
`+ae.stack}return{value:T,source:A,stack:J,digest:null}}function Ah(T,A,$){return{value:T,source:null,stack:$??null,digest:A??null}}function Ul(T,A){try{console.error(A.value)}catch($){setTimeout(function(){throw $})}}var kh=typeof WeakMap=="function"?WeakMap:Map;function _u(T,A,$){$=_d(-1,$),$.tag=3,$.payload={element:null};var Y=A.value;return $.callback=function(){ds||(ds=!0,Hs=Y),Ul(T,A)},$}function Kg(T,A,$){$=_d(-1,$),$.tag=3;var Y=T.type.getDerivedStateFromError;if(typeof Y=="function"){var J=A.value;$.payload=function(){return Y(J)},$.callback=function(){Ul(T,A)}}var ae=T.stateNode;return ae!==null&&typeof ae.componentDidCatch=="function"&&($.callback=function(){Ul(T,A),typeof Y!="function"&&(rl===null?rl=new Set([this]):rl.add(this));var xe=A.stack;this.componentDidCatch(A.value,{componentStack:xe!==null?xe:""})}),$}function ye(T,A,$){var Y=T.pingCache;if(Y===null){Y=T.pingCache=new kh;var J=new Set;Y.set(A,J)}else J=Y.get(A),J===void 0&&(J=new Set,Y.set(A,J));J.has($)||(J.add($),T=d2.bind(null,T,A,$),A.then(T,T))}function Ip(T){do{var A;if((A=T.tag===13)&&(A=T.memoizedState,A=A!==null?A.dehydrated!==null:!0),A)return T;T=T.return}while(T!==null);return null}function Nc(T,A,$,Y,J){return T.mode&1?(T.flags|=65536,T.lanes=J,T):(T===A?T.flags|=65536:(T.flags|=128,$.flags|=131072,$.flags&=-52805,$.tag===1&&($.alternate===null?$.tag=17:(A=_d(-1,1),A.tag=2,Rc($,A,1))),$.lanes|=1),T)}var Na=a.ReactCurrentOwner,Mn=!1;function Oo(T,A,$,Y){A.child=T===null?Xe(A,null,$,Y):be(A,T.child,$,Y)}function X1(T,A,$,Y,J){$=$.render;var ae=A.ref;return yo(A,J),Y=wh(T,A,$,Y,ae,J),$=xp(),T!==null&&!Mn?(A.updateQueue=T.updateQueue,A.flags&=-2053,T.lanes&=~J,Za(T,A,J)):(yi&&$&&ro(A),A.flags|=1,Oo(T,A,Y,J),A.child)}function Pp(T,A,$,Y,J){if(T===null){var ae=$.type;return typeof ae=="function"&&!lm(ae)&&ae.defaultProps===void 0&&$.compare===null&&$.defaultProps===void 0?(A.tag=15,A.type=ae,Qa(T,A,ae,Y,J)):(T=kd($.type,null,Y,A,A.mode,J),T.ref=A.ref,T.return=A,A.child=T)}if(ae=T.child,!(T.lanes&J)){var xe=ae.memoizedProps;if($=$.compare,$=$!==null?$:bf,$(xe,Y)&&T.ref===A.ref)return Za(T,A,J)}return A.flags|=1,T=Bc(ae,Y),T.ref=A.ref,T.return=A,A.child=T}function Qa(T,A,$,Y,J){if(T!==null){var ae=T.memoizedProps;if(bf(ae,Y)&&T.ref===A.ref)if(Mn=!1,A.pendingProps=Y=ae,(T.lanes&J)!==0)T.flags&131072&&(Mn=!0);else return A.lanes=T.lanes,Za(T,A,J)}return Ef(T,A,$,Y,J)}function Gi(T,A,$){var Y=A.pendingProps,J=Y.children,ae=T!==null?T.memoizedState:null;if(Y.mode==="hidden")if(!(A.mode&1))A.memoizedState={baseLanes:0,cachePool:null,transitions:null},rr(Lh,Vs),Vs|=$;else{if(!($&1073741824))return T=ae!==null?ae.baseLanes|$:$,A.lanes=A.childLanes=1073741824,A.memoizedState={baseLanes:T,cachePool:null,transitions:null},A.updateQueue=null,rr(Lh,Vs),Vs|=T,null;A.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y=ae!==null?ae.baseLanes:$,rr(Lh,Vs),Vs|=Y}else ae!==null?(Y=ae.baseLanes|$,A.memoizedState=null):Y=$,rr(Lh,Vs),Vs|=Y;return Oo(T,A,J,$),A.child}function Fi(T,A){var $=A.ref;(T===null&&$!==null||T!==null&&T.ref!==$)&&(A.flags|=512,A.flags|=2097152)}function Ef(T,A,$,Y,J){var ae=De($)?Be:Ie.current;return ae=ze(A,ae),yo(A,J),$=wh(T,A,$,Y,ae,J),Y=xp(),T!==null&&!Mn?(A.updateQueue=T.updateQueue,A.flags&=-2053,T.lanes&=~J,Za(T,A,J)):(yi&&Y&&ro(A),A.flags|=1,Oo(T,A,$,J),A.child)}function sa(T,A,$,Y,J){if(De($)){var ae=!0;Rt(A)}else ae=!1;if(yo(A,J),A.stateNode===null)Xg(T,A),kp(A,$,Y),wf(A,$,Y,J),Y=!0;else if(T===null){var xe=A.stateNode,He=A.memoizedProps;xe.props=He;var at=xe.context,Ft=$.contextType;typeof Ft=="object"&&Ft!==null?Ft=vo(Ft):(Ft=De($)?Be:Ie.current,Ft=ze(A,Ft));var yn=$.getDerivedStateFromProps,tr=typeof yn=="function"||typeof xe.getSnapshotBeforeUpdate=="function";tr||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(He!==Y||at!==Ft)&&K1(A,xe,Y,Ft),Qu=!1;var an=A.memoizedState;xe.state=an,Ic(A,Y,xe,J),at=A.memoizedState,He!==Y||an!==at||Se.current||Qu?(typeof yn=="function"&&(Ap(A,$,yn,Y),at=A.memoizedState),(He=Qu||Yg(A,$,He,Y,an,at,Ft))?(tr||typeof xe.UNSAFE_componentWillMount!="function"&&typeof xe.componentWillMount!="function"||(typeof xe.componentWillMount=="function"&&xe.componentWillMount(),typeof xe.UNSAFE_componentWillMount=="function"&&xe.UNSAFE_componentWillMount()),typeof xe.componentDidMount=="function"&&(A.flags|=4194308)):(typeof xe.componentDidMount=="function"&&(A.flags|=4194308),A.memoizedProps=Y,A.memoizedState=at),xe.props=Y,xe.state=at,xe.context=Ft,Y=He):(typeof xe.componentDidMount=="function"&&(A.flags|=4194308),Y=!1)}else{xe=A.stateNode,a2(T,A),He=A.memoizedProps,Ft=A.type===A.elementType?He:Do(A.type,He),xe.props=Ft,tr=A.pendingProps,an=xe.context,at=$.contextType,typeof at=="object"&&at!==null?at=vo(at):(at=De($)?Be:Ie.current,at=ze(A,at));var Ui=$.getDerivedStateFromProps;(yn=typeof Ui=="function"||typeof xe.getSnapshotBeforeUpdate=="function")||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(He!==tr||an!==at)&&K1(A,xe,Y,at),Qu=!1,an=A.memoizedState,xe.state=an,Ic(A,Y,xe,J);var Si=A.memoizedState;He!==tr||an!==Si||Se.current||Qu?(typeof Ui=="function"&&(Ap(A,$,Ui,Y),Si=A.memoizedState),(Ft=Qu||Yg(A,$,Ft,Y,an,Si,at)||!1)?(yn||typeof xe.UNSAFE_componentWillUpdate!="function"&&typeof xe.componentWillUpdate!="function"||(typeof xe.componentWillUpdate=="function"&&xe.componentWillUpdate(Y,Si,at),typeof xe.UNSAFE_componentWillUpdate=="function"&&xe.UNSAFE_componentWillUpdate(Y,Si,at)),typeof xe.componentDidUpdate=="function"&&(A.flags|=4),typeof xe.getSnapshotBeforeUpdate=="function"&&(A.flags|=1024)):(typeof xe.componentDidUpdate!="function"||He===T.memoizedProps&&an===T.memoizedState||(A.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||He===T.memoizedProps&&an===T.memoizedState||(A.flags|=1024),A.memoizedProps=Y,A.memoizedState=Si),xe.props=Y,xe.state=Si,xe.context=at,Y=Ft):(typeof xe.componentDidUpdate!="function"||He===T.memoizedProps&&an===T.memoizedState||(A.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||He===T.memoizedProps&&an===T.memoizedState||(A.flags|=1024),Y=!1)}return Da(T,A,$,Y,ae,J)}function Da(T,A,$,Y,J,ae){Fi(T,A);var xe=(A.flags&128)!==0;if(!Y&&!xe)return J&&jt(A,$,!1),Za(T,A,ae);Y=A.stateNode,Na.current=A;var He=xe&&typeof $.getDerivedStateFromError!="function"?null:Y.render();return A.flags|=1,T!==null&&xe?(A.child=be(A,T.child,null,ae),A.child=be(A,null,He,ae)):Oo(T,A,He,ae),A.memoizedState=Y.state,J&&jt(A,$,!0),A.child}function Oa(T){var A=T.stateNode;A.pendingContext?kt(T,A.pendingContext,A.pendingContext!==A.context):A.context&&kt(T,A.context,!1),H1(T,A.containerInfo)}function Np(T,A,$,Y,J){return vf(),vh(J),A.flags|=256,Oo(T,A,$,Y),A.child}var Ma={dehydrated:null,treeContext:null,retryLane:0};function nm(T){return{baseLanes:T,cachePool:null,transitions:null}}function _x(T,A,$){var Y=A.pendingProps,J=ws.current,ae=!1,xe=(A.flags&128)!==0,He;if((He=xe)||(He=T!==null&&T.memoizedState===null?!1:(J&2)!==0),He?(ae=!0,A.flags&=-129):(T===null||T.memoizedState!==null)&&(J|=1),rr(ws,J&1),T===null)return Xu(A),T=A.memoizedState,T!==null&&(T=T.dehydrated,T!==null)?(A.mode&1?eo(T)?A.lanes=8:A.lanes=1073741824:A.lanes=1,null):(xe=Y.children,T=Y.fallback,ae?(Y=A.mode,ae=A.child,xe={mode:"hidden",children:xe},!(Y&1)&&ae!==null?(ae.childLanes=0,ae.pendingProps=xe):ae=Vp(xe,Y,0,null),T=Lo(T,Y,$,null),ae.return=A,T.return=A,ae.sibling=T,A.child=ae,A.child.memoizedState=nm($),A.memoizedState=Ma,T):Q1(A,xe));if(J=T.memoizedState,J!==null&&(He=J.dehydrated,He!==null))return c2(T,A,xe,Y,He,J,$);if(ae){ae=Y.fallback,xe=A.mode,J=T.child,He=J.sibling;var at={mode:"hidden",children:Y.children};return!(xe&1)&&A.child!==J?(Y=A.child,Y.childLanes=0,Y.pendingProps=at,A.deletions=null):(Y=Bc(J,at),Y.subtreeFlags=J.subtreeFlags&14680064),He!==null?ae=Bc(He,ae):(ae=Lo(ae,xe,$,null),ae.flags|=2),ae.return=A,Y.return=A,Y.sibling=ae,A.child=Y,Y=ae,ae=A.child,xe=T.child.memoizedState,xe=xe===null?nm($):{baseLanes:xe.baseLanes|$,cachePool:null,transitions:xe.transitions},ae.memoizedState=xe,ae.childLanes=T.childLanes&~$,A.memoizedState=Ma,Y}return ae=T.child,T=ae.sibling,Y=Bc(ae,{mode:"visible",children:Y.children}),!(A.mode&1)&&(Y.lanes=$),Y.return=A,Y.sibling=null,T!==null&&($=A.deletions,$===null?(A.deletions=[T],A.flags|=16):$.push(T)),A.child=Y,A.memoizedState=null,Y}function Q1(T,A){return A=Vp({mode:"visible",children:A},T.mode,0,null),A.return=T,T.child=A}function Ja(T,A,$,Y){return Y!==null&&vh(Y),be(A,T.child,null,$),T=Q1(A,A.pendingProps.children),T.flags|=2,A.memoizedState=null,T}function c2(T,A,$,Y,J,ae,xe){if($)return A.flags&256?(A.flags&=-257,Y=Ah(Error(o(422))),Ja(T,A,xe,Y)):A.memoizedState!==null?(A.child=T.child,A.flags|=128,null):(ae=Y.fallback,J=A.mode,Y=Vp({mode:"visible",children:Y.children},J,0,null),ae=Lo(ae,J,xe,null),ae.flags|=2,Y.return=A,ae.return=A,Y.sibling=ae,A.child=Y,A.mode&1&&be(A,T.child,null,xe),A.child.memoizedState=nm(xe),A.memoizedState=Ma,ae);if(!(A.mode&1))return Ja(T,A,xe,null);if(eo(J))return Y=go(J).digest,ae=Error(o(419)),Y=Ah(ae,Y,void 0),Ja(T,A,xe,Y);if($=(xe&T.childLanes)!==0,Mn||$){if(Y=$i,Y!==null){switch(xe&-xe){case 4:J=2;break;case 16:J=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:J=32;break;case 536870912:J=268435456;break;default:J=0}J=J&(Y.suspendedLanes|xe)?0:J,J!==0&&J!==ae.retryLane&&(ae.retryLane=J,kc(T,J),ji(Y,T,J,-1))}return zp(),Y=Ah(Error(o(421))),Ja(T,A,xe,Y)}return Hi(J)?(A.flags|=128,A.child=T.child,A=Ax.bind(null,T),Qo(J,A),null):(T=ae.treeContext,Oe&&(Ro=Pl(J),oi=A,yi=!0,ra=null,ka=!1,T!==null&&(Mr[js++]=no,Mr[js++]=Xa,Mr[js++]=Li,no=T.id,Xa=T.overflow,Li=A)),A=Q1(A,Y.children),A.flags|=4096,A)}function Sf(T,A,$){T.lanes|=A;var Y=T.alternate;Y!==null&&(Y.lanes|=A),Io(T.return,A,$)}function rm(T,A,$,Y,J){var ae=T.memoizedState;ae===null?T.memoizedState={isBackwards:A,rendering:null,renderingStartTime:0,last:Y,tail:$,tailMode:J}:(ae.isBackwards=A,ae.rendering=null,ae.renderingStartTime=0,ae.last=Y,ae.tail=$,ae.tailMode=J)}function J1(T,A,$){var Y=A.pendingProps,J=Y.revealOrder,ae=Y.tail;if(Oo(T,A,Y.children,$),Y=ws.current,Y&2)Y=Y&1|2,A.flags|=128;else{if(T!==null&&T.flags&128)e:for(T=A.child;T!==null;){if(T.tag===13)T.memoizedState!==null&&Sf(T,$,A);else if(T.tag===19)Sf(T,$,A);else if(T.child!==null){T.child.return=T,T=T.child;continue}if(T===A)break e;for(;T.sibling===null;){if(T.return===null||T.return===A)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}Y&=1}if(rr(ws,Y),!(A.mode&1))A.memoizedState=null;else switch(J){case"forwards":for($=A.child,J=null;$!==null;)T=$.alternate,T!==null&&wd(T)===null&&(J=$),$=$.sibling;$=J,$===null?(J=A.child,A.child=null):(J=$.sibling,$.sibling=null),rm(A,!1,J,$,ae);break;case"backwards":for($=null,J=A.child,A.child=null;J!==null;){if(T=J.alternate,T!==null&&wd(T)===null){A.child=J;break}T=J.sibling,J.sibling=$,$=J,J=T}rm(A,!0,$,null,ae);break;case"together":rm(A,!1,null,null,void 0);break;default:A.memoizedState=null}return A.child}function Xg(T,A){!(A.mode&1)&&T!==null&&(T.alternate=null,A.alternate=null,A.flags|=2)}function Za(T,A,$){if(T!==null&&(A.dependencies=T.dependencies),kf|=A.lanes,!($&A.childLanes))return null;if(T!==null&&A.child!==T.child)throw Error(o(153));if(A.child!==null){for(T=A.child,$=Bc(T,T.pendingProps),A.child=$,$.return=A;T.sibling!==null;)T=T.sibling,$=$.sibling=Bc(T,T.pendingProps),$.return=A;$.sibling=null}return A.child}function Rh(T,A,$){switch(A.tag){case 3:Oa(A),vf();break;case 5:mx(A);break;case 1:De(A.type)&&Rt(A);break;case 4:H1(A,A.stateNode.containerInfo);break;case 10:ai(A,A.type._context,A.memoizedProps.value);break;case 13:var Y=A.memoizedState;if(Y!==null)return Y.dehydrated!==null?(rr(ws,ws.current&1),A.flags|=128,null):$&A.child.childLanes?_x(T,A,$):(rr(ws,ws.current&1),T=Za(T,A,$),T!==null?T.sibling:null);rr(ws,ws.current&1);break;case 19:if(Y=($&A.childLanes)!==0,T.flags&128){if(Y)return J1(T,A,$);A.flags|=128}var J=A.memoizedState;if(J!==null&&(J.rendering=null,J.tail=null,J.lastEffect=null),rr(ws,ws.current),Y)break;return null;case 22:case 23:return A.lanes=0,Gi(T,A,$)}return Za(T,A,$)}function eu(T){T.flags|=4}function oa(T,A){if(T!==null&&T.child===A.child)return!0;if(A.flags&16)return!1;for(T=A.child;T!==null;){if(T.flags&12854||T.subtreeFlags&12854)return!1;T=T.sibling}return!0}var Ih,Ph,tu,nu;if(ge)Ih=function(T,A){for(var $=A.child;$!==null;){if($.tag===5||$.tag===6)te(T,$.stateNode);else if($.tag!==4&&$.child!==null){$.child.return=$,$=$.child;continue}if($===A)break;for(;$.sibling===null;){if($.return===null||$.return===A)return;$=$.return}$.sibling.return=$.return,$=$.sibling}},Ph=function(){},tu=function(T,A,$,Y,J){if(T=T.memoizedProps,T!==Y){var ae=A.stateNode,xe=Zu(Fl.current);$=ee(ae,$,T,Y,J,xe),(A.updateQueue=$)&&eu(A)}},nu=function(T,A,$,Y){$!==Y&&eu(A)};else if(me){Ih=function(T,A,$,Y){for(var J=A.child;J!==null;){if(J.tag===5){var ae=J.stateNode;$&&Y&&(ae=Kr(ae,J.type,J.memoizedProps,J)),te(T,ae)}else if(J.tag===6)ae=J.stateNode,$&&Y&&(ae=Oi(ae,J.memoizedProps,J)),te(T,ae);else if(J.tag!==4){if(J.tag===22&&J.memoizedState!==null)ae=J.child,ae!==null&&(ae.return=J),Ih(T,J,!0,!0);else if(J.child!==null){J.child.return=J,J=J.child;continue}}if(J===A)break;for(;J.sibling===null;){if(J.return===null||J.return===A)return;J=J.return}J.sibling.return=J.return,J=J.sibling}};var Nh=function(T,A,$,Y){for(var J=A.child;J!==null;){if(J.tag===5){var ae=J.stateNode;$&&Y&&(ae=Kr(ae,J.type,J.memoizedProps,J)),Gu(T,ae)}else if(J.tag===6)ae=J.stateNode,$&&Y&&(ae=Oi(ae,J.memoizedProps,J)),Gu(T,ae);else if(J.tag!==4){if(J.tag===22&&J.memoizedState!==null)ae=J.child,ae!==null&&(ae.return=J),Nh(T,J,!0,!0);else if(J.child!==null){J.child.return=J,J=J.child;continue}}if(J===A)break;for(;J.sibling===null;){if(J.return===null||J.return===A)return;J=J.return}J.sibling.return=J.return,J=J.sibling}};Ph=function(T,A){var $=A.stateNode;if(!oa(T,A)){T=$.containerInfo;var Y=mo(T);Nh(Y,A,!1,!1),$.pendingChildren=Y,eu(A),Ea(T,Y)}},tu=function(T,A,$,Y,J){var ae=T.stateNode,xe=T.memoizedProps;if((T=oa(T,A))&&xe===Y)A.stateNode=ae;else{var He=A.stateNode,at=Zu(Fl.current),Ft=null;xe!==Y&&(Ft=ee(He,$,xe,Y,J,at)),T&&Ft===null?A.stateNode=ae:(ae=ei(ae,Ft,$,xe,Y,A,T,He),W(ae,$,Y,J,at)&&eu(A),A.stateNode=ae,T?eu(A):Ih(ae,A,!1,!1))}},nu=function(T,A,$,Y){$!==Y?(T=Zu(Po.current),$=Zu(Fl.current),A.stateNode=pe(Y,T,$,A),eu(A)):A.stateNode=T.stateNode}}else Ph=function(){},tu=function(){},nu=function(){};function wu(T,A){if(!yi)switch(T.tailMode){case"hidden":A=T.tail;for(var $=null;A!==null;)A.alternate!==null&&($=A),A=A.sibling;$===null?T.tail=null:$.sibling=null;break;case"collapsed":$=T.tail;for(var Y=null;$!==null;)$.alternate!==null&&(Y=$),$=$.sibling;Y===null?A||T.tail===null?T.tail=null:T.tail.sibling=null:Y.sibling=null}}function es(T){var A=T.alternate!==null&&T.alternate.child===T.child,$=0,Y=0;if(A)for(var J=T.child;J!==null;)$|=J.lanes|J.childLanes,Y|=J.subtreeFlags&14680064,Y|=J.flags&14680064,J.return=T,J=J.sibling;else for(J=T.child;J!==null;)$|=J.lanes|J.childLanes,Y|=J.subtreeFlags,Y|=J.flags,J.return=T,J=J.sibling;return T.subtreeFlags|=Y,T.childLanes=$,A}function Dp(T,A,$){var Y=A.pendingProps;switch(Ac(A),A.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return es(A),null;case 1:return De(A.type)&&ht(),es(A),null;case 3:return $=A.stateNode,bp(),ti(Se),ti(Ie),mt(),$.pendingContext&&($.context=$.pendingContext,$.pendingContext=null),(T===null||T.child===null)&&(bd(A)?eu(A):T===null||T.memoizedState.isDehydrated&&!(A.flags&256)||(A.flags|=1024,ra!==null&&(ny(ra),ra=null))),Ph(T,A),es(A),null;case 5:gx(A),$=Zu(Po.current);var J=A.type;if(T!==null&&A.stateNode!=null)tu(T,A,J,Y,$),T.ref!==A.ref&&(A.flags|=512,A.flags|=2097152);else{if(!Y){if(A.stateNode===null)throw Error(o(166));return es(A),null}if(T=Zu(Fl.current),bd(A)){if(!Oe)throw Error(o(175));T=bs(A.stateNode,A.type,A.memoizedProps,$,T,A,!ka),A.updateQueue=T,T!==null&&eu(A)}else{var ae=q(J,Y,$,T,A);Ih(ae,A,!1,!1),A.stateNode=ae,W(ae,J,Y,$,T)&&eu(A)}A.ref!==null&&(A.flags|=512,A.flags|=2097152)}return es(A),null;case 6:if(T&&A.stateNode!=null)nu(T,A,T.memoizedProps,Y);else{if(typeof Y!="string"&&A.stateNode===null)throw Error(o(166));if(T=Zu(Po.current),$=Zu(Fl.current),bd(A)){if(!Oe)throw Error(o(176));if(T=A.stateNode,$=A.memoizedProps,(Y=Ya(T,$,A,!ka))&&(J=oi,J!==null))switch(J.tag){case 3:wc(J.stateNode.containerInfo,T,$,(J.mode&1)!==0);break;case 5:Er(J.type,J.memoizedProps,J.stateNode,T,$,(J.mode&1)!==0)}Y&&eu(A)}else A.stateNode=pe(Y,T,$,A)}return es(A),null;case 13:if(ti(ws),Y=A.memoizedState,T===null||T.memoizedState!==null&&T.memoizedState.dehydrated!==null){if(yi&&Ro!==null&&A.mode&1&&!(A.flags&128))jg(),vf(),A.flags|=98560,J=!1;else if(J=bd(A),Y!==null&&Y.dehydrated!==null){if(T===null){if(!J)throw Error(o(318));if(!Oe)throw Error(o(344));if(J=A.memoizedState,J=J!==null?J.dehydrated:null,!J)throw Error(o(317));Jo(J,A)}else vf(),!(A.flags&128)&&(A.memoizedState=null),A.flags|=4;es(A),J=!1}else ra!==null&&(ny(ra),ra=null),J=!0;if(!J)return A.flags&65536?A:null}return A.flags&128?(A.lanes=$,A):($=Y!==null,$!==(T!==null&&T.memoizedState!==null)&&$&&(A.child.flags|=8192,A.mode&1&&(T===null||ws.current&1?Yi===0&&(Yi=3):zp())),A.updateQueue!==null&&(A.flags|=4),es(A),null);case 4:return bp(),Ph(T,A),T===null&&Ye(A.stateNode.containerInfo),es(A),null;case 10:return cs(A.type._context),es(A),null;case 17:return De(A.type)&&ht(),es(A),null;case 19:if(ti(ws),J=A.memoizedState,J===null)return es(A),null;if(Y=(A.flags&128)!==0,ae=J.rendering,ae===null)if(Y)wu(J,!1);else{if(Yi!==0||T!==null&&T.flags&128)for(T=A.child;T!==null;){if(ae=wd(T),ae!==null){for(A.flags|=128,wu(J,!1),T=ae.updateQueue,T!==null&&(A.updateQueue=T,A.flags|=4),A.subtreeFlags=0,T=$,$=A.child;$!==null;)Y=$,J=T,Y.flags&=14680066,ae=Y.alternate,ae===null?(Y.childLanes=0,Y.lanes=J,Y.child=null,Y.subtreeFlags=0,Y.memoizedProps=null,Y.memoizedState=null,Y.updateQueue=null,Y.dependencies=null,Y.stateNode=null):(Y.childLanes=ae.childLanes,Y.lanes=ae.lanes,Y.child=ae.child,Y.subtreeFlags=0,Y.deletions=null,Y.memoizedProps=ae.memoizedProps,Y.memoizedState=ae.memoizedState,Y.updateQueue=ae.updateQueue,Y.type=ae.type,J=ae.dependencies,Y.dependencies=J===null?null:{lanes:J.lanes,firstContext:J.firstContext}),$=$.sibling;return rr(ws,ws.current&1|2),A.child}T=T.sibling}J.tail!==null&&Rs()>ey&&(A.flags|=128,Y=!0,wu(J,!1),A.lanes=4194304)}else{if(!Y)if(T=wd(ae),T!==null){if(A.flags|=128,Y=!0,T=T.updateQueue,T!==null&&(A.updateQueue=T,A.flags|=4),wu(J,!0),J.tail===null&&J.tailMode==="hidden"&&!ae.alternate&&!yi)return es(A),null}else 2*Rs()-J.renderingStartTime>ey&&$!==1073741824&&(A.flags|=128,Y=!0,wu(J,!1),A.lanes=4194304);J.isBackwards?(ae.sibling=A.child,A.child=ae):(T=J.last,T!==null?T.sibling=ae:A.child=ae,J.last=ae)}return J.tail!==null?(A=J.tail,J.rendering=A,J.tail=A.sibling,J.renderingStartTime=Rs(),A.sibling=null,T=ws.current,rr(ws,Y?T&1|2:T&1),A):(es(A),null);case 22:case 23:return iy(),$=A.memoizedState!==null,T!==null&&T.memoizedState!==null!==$&&(A.flags|=8192),$&&A.mode&1?Vs&1073741824&&(es(A),ge&&A.subtreeFlags&6&&(A.flags|=8192)):es(A),null;case 24:return null;case 25:return null}throw Error(o(156,A.tag))}function f2(T,A){switch(Ac(A),A.tag){case 1:return De(A.type)&&ht(),T=A.flags,T&65536?(A.flags=T&-65537|128,A):null;case 3:return bp(),ti(Se),ti(Ie),mt(),T=A.flags,T&65536&&!(T&128)?(A.flags=T&-65537|128,A):null;case 5:return gx(A),null;case 13:if(ti(ws),T=A.memoizedState,T!==null&&T.dehydrated!==null){if(A.alternate===null)throw Error(o(340));vf()}return T=A.flags,T&65536?(A.flags=T&-65537|128,A):null;case 19:return ti(ws),null;case 4:return bp(),null;case 10:return cs(A.type._context),null;case 22:case 23:return iy(),null;case 24:return null;default:return null}}var Dh=!1,Is=!1,La=typeof WeakSet=="function"?WeakSet:Set,nn=null;function bi(T,A){var $=T.ref;if($!==null)if(typeof $=="function")try{$(null)}catch(Y){ns(T,A,Y)}else $.current=null}function el(T,A,$){try{$()}catch(Y){ns(T,A,Y)}}var Dc=!1;function Z1(T,A){for(ue(T.containerInfo),nn=A;nn!==null;)if(T=nn,A=T.child,(T.subtreeFlags&1028)!==0&&A!==null)A.return=T,nn=A;else for(;nn!==null;){T=nn;try{var $=T.alternate;if(T.flags&1024)switch(T.tag){case 0:case 11:case 15:break;case 1:if($!==null){var Y=$.memoizedProps,J=$.memoizedState,ae=T.stateNode,xe=ae.getSnapshotBeforeUpdate(T.elementType===T.type?Y:Do(T.type,Y),J);ae.__reactInternalSnapshotBeforeUpdate=xe}break;case 3:ge&&Zi(T.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(He){ns(T,T.return,He)}if(A=T.sibling,A!==null){A.return=T.return,nn=A;break}nn=T.return}return $=Dc,Dc=!1,$}function tl(T,A,$){var Y=A.updateQueue;if(Y=Y!==null?Y.lastEffect:null,Y!==null){var J=Y=Y.next;do{if((J.tag&T)===T){var ae=J.destroy;J.destroy=void 0,ae!==void 0&&el(A,$,ae)}J=J.next}while(J!==Y)}}function aa(T,A){if(A=A.updateQueue,A=A!==null?A.lastEffect:null,A!==null){var $=A=A.next;do{if(($.tag&T)===T){var Y=$.create;$.destroy=Y()}$=$.next}while($!==A)}}function ev(T){var A=T.ref;if(A!==null){var $=T.stateNode;switch(T.tag){case 5:T=G($);break;default:T=$}typeof A=="function"?A(T):A.current=T}}function im(T){var A=T.alternate;A!==null&&(T.alternate=null,im(A)),T.child=null,T.deletions=null,T.sibling=null,T.tag===5&&(A=T.stateNode,A!==null&&We(A)),T.stateNode=null,T.return=null,T.dependencies=null,T.memoizedProps=null,T.memoizedState=null,T.pendingProps=null,T.stateNode=null,T.updateQueue=null}function tv(T){return T.tag===5||T.tag===3||T.tag===4}function Oc(T){e:for(;;){for(;T.sibling===null;){if(T.return===null||tv(T.return))return null;T=T.return}for(T.sibling.return=T.return,T=T.sibling;T.tag!==5&&T.tag!==6&&T.tag!==18;){if(T.flags&2||T.child===null||T.tag===4)continue e;T.child.return=T,T=T.child}if(!(T.flags&2))return T.stateNode}}function zl(T,A,$){var Y=T.tag;if(Y===5||Y===6)T=T.stateNode,A?wr($,T,A):Vt($,T);else if(Y!==4&&(T=T.child,T!==null))for(zl(T,A,$),T=T.sibling;T!==null;)zl(T,A,$),T=T.sibling}function nv(T,A,$){var Y=T.tag;if(Y===5||Y===6)T=T.stateNode,A?Zn($,T,A):wt($,T);else if(Y!==4&&(T=T.child,T!==null))for(nv(T,A,$),T=T.sibling;T!==null;)nv(T,A,$),T=T.sibling}var zs=null,ua=!1;function Mc(T,A,$){for($=$.child;$!==null;)Qg(T,A,$),$=$.sibling}function Qg(T,A,$){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(xr,$)}catch{}switch($.tag){case 5:Is||bi($,A);case 6:if(ge){var Y=zs,J=ua;zs=null,Mc(T,A,$),zs=Y,ua=J,zs!==null&&(ua?nr(zs,$.stateNode):Hn(zs,$.stateNode))}else Mc(T,A,$);break;case 18:ge&&zs!==null&&(ua?xc(zs,$.stateNode):gf(zs,$.stateNode));break;case 4:ge?(Y=zs,J=ua,zs=$.stateNode.containerInfo,ua=!0,Mc(T,A,$),zs=Y,ua=J):(me&&(Y=$.stateNode.containerInfo,J=mo(Y),Sa(Y,J)),Mc(T,A,$));break;case 0:case 11:case 14:case 15:if(!Is&&(Y=$.updateQueue,Y!==null&&(Y=Y.lastEffect,Y!==null))){J=Y=Y.next;do{var ae=J,xe=ae.destroy;ae=ae.tag,xe!==void 0&&(ae&2||ae&4)&&el($,A,xe),J=J.next}while(J!==Y)}Mc(T,A,$);break;case 1:if(!Is&&(bi($,A),Y=$.stateNode,typeof Y.componentWillUnmount=="function"))try{Y.props=$.memoizedProps,Y.state=$.memoizedState,Y.componentWillUnmount()}catch(He){ns($,A,He)}Mc(T,A,$);break;case 21:Mc(T,A,$);break;case 22:$.mode&1?(Is=(Y=Is)||$.memoizedState!==null,Mc(T,A,$),Is=Y):Mc(T,A,$);break;default:Mc(T,A,$)}}function Es(T){var A=T.updateQueue;if(A!==null){T.updateQueue=null;var $=T.stateNode;$===null&&($=T.stateNode=new La),A.forEach(function(Y){var J=yC.bind(null,T,Y);$.has(Y)||($.add(Y),Y.then(J,J))})}}function Eu(T,A){var $=A.deletions;if($!==null)for(var Y=0;Y<$.length;Y++){var J=$[Y];try{var ae=T,xe=A;if(ge){var He=xe;e:for(;He!==null;){switch(He.tag){case 5:zs=He.stateNode,ua=!1;break e;case 3:zs=He.stateNode.containerInfo,ua=!0;break e;case 4:zs=He.stateNode.containerInfo,ua=!0;break e}He=He.return}if(zs===null)throw Error(o(160));Qg(ae,xe,J),zs=null,ua=!1}else Qg(ae,xe,J);var at=J.alternate;at!==null&&(at.return=null),J.return=null}catch(Ft){ns(J,A,Ft)}}if(A.subtreeFlags&12854)for(A=A.child;A!==null;)sm(A,T),A=A.sibling}function sm(T,A){var $=T.alternate,Y=T.flags;switch(T.tag){case 0:case 11:case 14:case 15:if(Eu(A,T),Ps(T),Y&4){try{tl(3,T,T.return),aa(3,T)}catch(an){ns(T,T.return,an)}try{tl(5,T,T.return)}catch(an){ns(T,T.return,an)}}break;case 1:Eu(A,T),Ps(T),Y&512&&$!==null&&bi($,$.return);break;case 5:if(Eu(A,T),Ps(T),Y&512&&$!==null&&bi($,$.return),ge){if(T.flags&32){var J=T.stateNode;try{Ei(J)}catch(an){ns(T,T.return,an)}}if(Y&4&&(J=T.stateNode,J!=null)){var ae=T.memoizedProps;if($=$!==null?$.memoizedProps:ae,Y=T.type,A=T.updateQueue,T.updateQueue=null,A!==null)try{Dn(J,A,Y,$,ae,T)}catch(an){ns(T,T.return,an)}}}break;case 6:if(Eu(A,T),Ps(T),Y&4&&ge){if(T.stateNode===null)throw Error(o(162));J=T.stateNode,ae=T.memoizedProps,$=$!==null?$.memoizedProps:ae;try{Wt(J,$,ae)}catch(an){ns(T,T.return,an)}}break;case 3:if(Eu(A,T),Ps(T),Y&4){if(ge&&Oe&&$!==null&&$.memoizedState.isDehydrated)try{md(A.containerInfo)}catch(an){ns(T,T.return,an)}if(me){J=A.containerInfo,ae=A.pendingChildren;try{Sa(J,ae)}catch(an){ns(T,T.return,an)}}}break;case 4:if(Eu(A,T),Ps(T),Y&4&&me){ae=T.stateNode,J=ae.containerInfo,ae=ae.pendingChildren;try{Sa(J,ae)}catch(an){ns(T,T.return,an)}}break;case 13:Eu(A,T),Ps(T),J=T.child,J.flags&8192&&(ae=J.memoizedState!==null,J.stateNode.isHidden=ae,!ae||J.alternate!==null&&J.alternate.memoizedState!==null||($p=Rs())),Y&4&&Es(T);break;case 22:var xe=$!==null&&$.memoizedState!==null;if(T.mode&1?(Is=($=Is)||xe,Eu(A,T),Is=$):Eu(A,T),Ps(T),Y&8192){if($=T.memoizedState!==null,(T.stateNode.isHidden=$)&&!xe&&T.mode&1)for(nn=T,Y=T.child;Y!==null;){for(A=nn=Y;nn!==null;){xe=nn;var He=xe.child;switch(xe.tag){case 0:case 11:case 14:case 15:tl(4,xe,xe.return);break;case 1:bi(xe,xe.return);var at=xe.stateNode;if(typeof at.componentWillUnmount=="function"){var Ft=xe,yn=xe.return;try{var tr=Ft;at.props=tr.memoizedProps,at.state=tr.memoizedState,at.componentWillUnmount()}catch(an){ns(Ft,yn,an)}}break;case 5:bi(xe,xe.return);break;case 22:if(xe.memoizedState!==null){Jg(A);continue}}He!==null?(He.return=xe,nn=He):Jg(A)}Y=Y.sibling}if(ge){e:if(Y=null,ge)for(A=T;;){if(A.tag===5){if(Y===null){Y=A;try{J=A.stateNode,$?Dr(J):Ji(A.stateNode,A.memoizedProps)}catch(an){ns(T,T.return,an)}}}else if(A.tag===6){if(Y===null)try{ae=A.stateNode,$?Co(ae):Di(ae,A.memoizedProps)}catch(an){ns(T,T.return,an)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===T)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===T)break e;for(;A.sibling===null;){if(A.return===null||A.return===T)break e;Y===A&&(Y=null),A=A.return}Y===A&&(Y=null),A.sibling.return=A.return,A=A.sibling}}}break;case 19:Eu(A,T),Ps(T),Y&4&&Es(T);break;case 21:break;default:Eu(A,T),Ps(T)}}function Ps(T){var A=T.flags;if(A&2){try{if(ge){e:{for(var $=T.return;$!==null;){if(tv($)){var Y=$;break e}$=$.return}throw Error(o(160))}switch(Y.tag){case 5:var J=Y.stateNode;Y.flags&32&&(Ei(J),Y.flags&=-33);var ae=Oc(T);nv(T,ae,J);break;case 3:case 4:var xe=Y.stateNode.containerInfo,He=Oc(T);zl(T,He,xe);break;default:throw Error(o(161))}}}catch(at){ns(T,T.return,at)}T.flags&=-3}A&4096&&(T.flags&=-4097)}function Oh(T,A,$){nn=T,Op(T)}function Op(T,A,$){for(var Y=(T.mode&1)!==0;nn!==null;){var J=nn,ae=J.child;if(J.tag===22&&Y){var xe=J.memoizedState!==null||Dh;if(!xe){var He=J.alternate,at=He!==null&&He.memoizedState!==null||Is;He=Dh;var Ft=Is;if(Dh=xe,(Is=at)&&!Ft)for(nn=J;nn!==null;)xe=nn,at=xe.child,xe.tag===22&&xe.memoizedState!==null?Mo(J):at!==null?(at.return=xe,nn=at):Mo(J);for(;ae!==null;)nn=ae,Op(ae),ae=ae.sibling;nn=J,Dh=He,Is=Ft}Tf(T)}else J.subtreeFlags&8772&&ae!==null?(ae.return=J,nn=ae):Tf(T)}}function Tf(T){for(;nn!==null;){var A=nn;if(A.flags&8772){var $=A.alternate;try{if(A.flags&8772)switch(A.tag){case 0:case 11:case 15:Is||aa(5,A);break;case 1:var Y=A.stateNode;if(A.flags&4&&!Is)if($===null)Y.componentDidMount();else{var J=A.elementType===A.type?$.memoizedProps:Do(A.type,$.memoizedProps);Y.componentDidUpdate(J,$.memoizedState,Y.__reactInternalSnapshotBeforeUpdate)}var ae=A.updateQueue;ae!==null&&u2(A,ae,Y);break;case 3:var xe=A.updateQueue;if(xe!==null){if($=null,A.child!==null)switch(A.child.tag){case 5:$=G(A.child.stateNode);break;case 1:$=A.child.stateNode}u2(A,xe,$)}break;case 5:var He=A.stateNode;$===null&&A.flags&4&&bn(He,A.type,A.memoizedProps,A);break;case 6:break;case 4:break;case 12:break;case 13:if(Oe&&A.memoizedState===null){var at=A.alternate;if(at!==null){var Ft=at.memoizedState;if(Ft!==null){var yn=Ft.dehydrated;yn!==null&&mf(yn)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}Is||A.flags&512&&ev(A)}catch(tr){ns(A,A.return,tr)}}if(A===T){nn=null;break}if($=A.sibling,$!==null){$.return=A.return,nn=$;break}nn=A.return}}function Jg(T){for(;nn!==null;){var A=nn;if(A===T){nn=null;break}var $=A.sibling;if($!==null){$.return=A.return,nn=$;break}nn=A.return}}function Mo(T){for(;nn!==null;){var A=nn;try{switch(A.tag){case 0:case 11:case 15:var $=A.return;try{aa(4,A)}catch(at){ns(A,$,at)}break;case 1:var Y=A.stateNode;if(typeof Y.componentDidMount=="function"){var J=A.return;try{Y.componentDidMount()}catch(at){ns(A,J,at)}}var ae=A.return;try{ev(A)}catch(at){ns(A,ae,at)}break;case 5:var xe=A.return;try{ev(A)}catch(at){ns(A,xe,at)}}}catch(at){ns(A,A.return,at)}if(A===T){nn=null;break}var He=A.sibling;if(He!==null){He.return=A.return,nn=He;break}nn=A.return}}var Lc=0,ru=1,Cf=2,om=3,Mp=4;if(typeof Symbol=="function"&&Symbol.for){var nl=Symbol.for;Lc=nl("selector.component"),ru=nl("selector.has_pseudo_class"),Cf=nl("selector.role"),om=nl("selector.test_id"),Mp=nl("selector.text")}function Su(T){var A=Me(T);if(A!=null){if(typeof A.memoizedProps["data-testname"]!="string")throw Error(o(364));return A}if(T=It(T),T===null)throw Error(o(362));return T.stateNode.current}function am(T,A){switch(A.$$typeof){case Lc:if(T.type===A.value)return!0;break;case ru:e:{A=A.value,T=[T,0];for(var $=0;$<T.length;){var Y=T[$++],J=T[$++],ae=A[J];if(Y.tag!==5||!Lt(Y)){for(;ae!=null&&am(Y,ae);)J++,ae=A[J];if(J===A.length){A=!0;break e}else for(Y=Y.child;Y!==null;)T.push(Y,J),Y=Y.sibling}}A=!1}return A;case Cf:if(T.tag===5&&sn(T.stateNode,A.value))return!0;break;case Mp:if((T.tag===5||T.tag===6)&&(T=Ke(T),T!==null&&0<=T.indexOf(A.value)))return!0;break;case om:if(T.tag===5&&(T=T.memoizedProps["data-testname"],typeof T=="string"&&T.toLowerCase()===A.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function rv(T){switch(T.$$typeof){case Lc:return"<"+(R(T.value)||"Unknown")+">";case ru:return":has("+(rv(T)||"")+")";case Cf:return'[role="'+T.value+'"]';case Mp:return'"'+T.value+'"';case om:return'[data-testname="'+T.value+'"]';default:throw Error(o(365))}}function Af(T,A){var $=[];T=[T,0];for(var Y=0;Y<T.length;){var J=T[Y++],ae=T[Y++],xe=A[ae];if(J.tag!==5||!Lt(J)){for(;xe!=null&&am(J,xe);)ae++,xe=A[ae];if(ae===A.length)$.push(J);else for(J=J.child;J!==null;)T.push(J,ae),J=J.sibling}}return $}function Tu(T,A){if(!_t)throw Error(o(363));T=Su(T),T=Af(T,A),A=[],T=Array.from(T);for(var $=0;$<T.length;){var Y=T[$++];if(Y.tag===5)Lt(Y)||A.push(Y.stateNode);else for(Y=Y.child;Y!==null;)T.push(Y),Y=Y.sibling}return A}var iv=Math.ceil,Zg=a.ReactCurrentDispatcher,Mh=a.ReactCurrentOwner,Ss=a.ReactCurrentBatchConfig,fr=0,$i=null,fs=null,Ns=0,Vs=0,Lh=qi(0),Yi=0,Lp=null,kf=0,Bi=0,Td=0,Fp=null,la=null,$p=0,ey=1/0,Fa=null;function Ti(){ey=Rs()+500}var ds=!1,Hs=null,rl=null,Fh=!1,Cu=null,dr=0,so=0,ty=null,Rf=-1,Bp=0;function ts(){return fr&6?Rs():Rf!==-1?Rf:Rf=Rs()}function bo(T){return T.mode&1?fr&2&&Ns!==0?Ns&-Ns:Ra.transition!==null?(Bp===0&&(Bp=yf()),Bp):(T=cr,T!==0?T:lt()):1}function ji(T,A,$,Y){if(50<so)throw so=0,ty=null,Error(o(185));Mi(T,$,Y),(!(fr&2)||T!==$i)&&(T===$i&&(!(fr&2)&&(Bi|=$),Yi===4&&qs(T,Ns)),$a(T,Y),$===1&&fr===0&&!(A.mode&1)&&(Ti(),hn&&dn()))}function $a(T,A){var $=T.callbackNode;gd(T,A);var Y=Ao(T,T===$i?Ns:0);if(Y===0)$!==null&&vp($),T.callbackNode=null,T.callbackPriority=0;else if(A=Y&-Y,T.callbackPriority!==A){if($!=null&&vp($),A===1)T.tag===0?gi(If.bind(null,T)):Or(If.bind(null,T)),nt?yt(function(){!(fr&6)&&dn()}):Aa(yd,dn),$=null;else{switch(Ca(Y)){case 1:$=yd;break;case 4:$=Tc;break;case 16:$=Ml;break;case 536870912:$=X0;break;default:$=Ml}$=ov($,jp.bind(null,T))}T.callbackPriority=A,T.callbackNode=$}}function jp(T,A){if(Rf=-1,Bp=0,fr&6)throw Error(o(327));var $=T.callbackNode;if($c()&&T.callbackNode!==$)return null;var Y=Ao(T,T===$i?Ns:0);if(Y===0)return null;if(Y&30||Y&T.expiredLanes||A)A=Cd(T,Y);else{A=Y;var J=fr;fr|=2;var ae=sy();($i!==T||Ns!==A)&&(Fa=null,Ti(),Fc(T,A));do try{Pf();break}catch(He){Up(T,He)}while(!0);Pr(),Zg.current=ae,fr=J,fs!==null?A=0:($i=null,Ns=0,A=Yi)}if(A!==0){if(A===2&&(J=Yu(T),J!==0&&(Y=J,A=um(T,J))),A===1)throw $=Lp,Fc(T,0),qs(T,Y),$a(T,Rs()),$;if(A===6)qs(T,Y);else{if(J=T.current.alternate,!(Y&30)&&!wx(J)&&(A=Cd(T,Y),A===2&&(ae=Yu(T),ae!==0&&(Y=ae,A=um(T,ae))),A===1))throw $=Lp,Fc(T,0),qs(T,Y),$a(T,Rs()),$;switch(T.finishedWork=J,T.finishedLanes=Y,A){case 0:case 1:throw Error(o(345));case 2:Ad(T,la,Fa);break;case 3:if(qs(T,Y),(Y&130023424)===Y&&(A=$p+500-Rs(),10<A)){if(Ao(T,0)!==0)break;if(J=T.suspendedLanes,(J&Y)!==Y){ts(),T.pingedLanes|=T.suspendedLanes&J;break}T.timeoutHandle=ce(Ad.bind(null,T,la,Fa),A);break}Ad(T,la,Fa);break;case 4:if(qs(T,Y),(Y&4194240)===Y)break;for(A=T.eventTimes,J=-1;0<Y;){var xe=31-Zt(Y);ae=1<<xe,xe=A[xe],xe>J&&(J=xe),Y&=~ae}if(Y=J,Y=Rs()-Y,Y=(120>Y?120:480>Y?480:1080>Y?1080:1920>Y?1920:3e3>Y?3e3:4320>Y?4320:1960*iv(Y/1960))-Y,10<Y){T.timeoutHandle=ce(Ad.bind(null,T,la,Fa),Y);break}Ad(T,la,Fa);break;case 5:Ad(T,la,Fa);break;default:throw Error(o(329))}}}return $a(T,Rs()),T.callbackNode===$?jp.bind(null,T):null}function um(T,A){var $=Fp;return T.current.memoizedState.isDehydrated&&(Fc(T,A).flags|=256),T=Cd(T,A),T!==2&&(A=la,la=$,A!==null&&ny(A)),T}function ny(T){la===null?la=T:la.push.apply(la,T)}function wx(T){for(var A=T;;){if(A.flags&16384){var $=A.updateQueue;if($!==null&&($=$.stores,$!==null))for(var Y=0;Y<$.length;Y++){var J=$[Y],ae=J.getSnapshot;J=J.value;try{if(!Ne(ae(),J))return!1}catch{return!1}}}if($=A.child,A.subtreeFlags&16384&&$!==null)$.return=A,A=$;else{if(A===T)break;for(;A.sibling===null;){if(A.return===null||A.return===T)return!0;A=A.return}A.sibling.return=A.return,A=A.sibling}}return!0}function qs(T,A){for(A&=~Td,A&=~Bi,T.suspendedLanes|=A,T.pingedLanes&=~A,T=T.expirationTimes;0<A;){var $=31-Zt(A),Y=1<<$;T[$]=-1,A&=~Y}}function If(T){if(fr&6)throw Error(o(327));$c();var A=Ao(T,0);if(!(A&1))return $a(T,Rs()),null;var $=Cd(T,A);if(T.tag!==0&&$===2){var Y=Yu(T);Y!==0&&(A=Y,$=um(T,Y))}if($===1)throw $=Lp,Fc(T,0),qs(T,A),$a(T,Rs()),$;if($===6)throw Error(o(345));return T.finishedWork=T.current.alternate,T.finishedLanes=A,Ad(T,la,Fa),$a(T,Rs()),null}function ry(T){Cu!==null&&Cu.tag===0&&!(fr&6)&&$c();var A=fr;fr|=1;var $=Ss.transition,Y=cr;try{if(Ss.transition=null,cr=1,T)return T()}finally{cr=Y,Ss.transition=$,fr=A,!(fr&6)&&dn()}}function iy(){Vs=Lh.current,ti(Lh)}function Fc(T,A){T.finishedWork=null,T.finishedLanes=0;var $=T.timeoutHandle;if($!==Ee&&(T.timeoutHandle=Ee,he($)),fs!==null)for($=fs.return;$!==null;){var Y=$;switch(Ac(Y),Y.tag){case 1:Y=Y.type.childContextTypes,Y!=null&&ht();break;case 3:bp(),ti(Se),ti(Ie),mt();break;case 5:gx(Y);break;case 4:bp();break;case 13:ti(ws);break;case 19:ti(ws);break;case 10:cs(Y.type._context);break;case 22:case 23:iy()}$=$.return}if($i=T,fs=T=Bc(T.current,null),Ns=Vs=A,Yi=0,Lp=null,Td=Bi=kf=0,la=Fp=null,Ll!==null){for(A=0;A<Ll.length;A++)if($=Ll[A],Y=$.interleaved,Y!==null){$.interleaved=null;var J=Y.next,ae=$.pending;if(ae!==null){var xe=ae.next;ae.next=J,Y.next=xe}$.pending=Y}Ll=null}return T}function Up(T,A){do{var $=fs;try{if(Pr(),et.current=Tp,_h){for(var Y=On.memoizedState;Y!==null;){var J=Y.queue;J!==null&&(J.pending=null),Y=Y.next}_h=!1}if(Bn=0,er=Cr=On=null,Ug=!1,Ia=0,Mh.current=null,$===null||$.return===null){Yi=1,Lp=A,fs=null;break}e:{var ae=T,xe=$.return,He=$,at=A;if(A=Ns,He.flags|=32768,at!==null&&typeof at=="object"&&typeof at.then=="function"){var Ft=at,yn=He,tr=yn.tag;if(!(yn.mode&1)&&(tr===0||tr===11||tr===15)){var an=yn.alternate;an?(yn.updateQueue=an.updateQueue,yn.memoizedState=an.memoizedState,yn.lanes=an.lanes):(yn.updateQueue=null,yn.memoizedState=null)}var Ui=Ip(xe);if(Ui!==null){Ui.flags&=-257,Nc(Ui,xe,He,ae,A),Ui.mode&1&&ye(ae,Ft,A),A=Ui,at=Ft;var Si=A.updateQueue;if(Si===null){var su=new Set;su.add(at),A.updateQueue=su}else Si.add(at);break e}else{if(!(A&1)){ye(ae,Ft,A),zp();break e}at=Error(o(426))}}else if(yi&&He.mode&1){var Fo=Ip(xe);if(Fo!==null){!(Fo.flags&65536)&&(Fo.flags|=256),Nc(Fo,xe,He,ae,A),vh(Rp(at,He));break e}}ae=at=Rp(at,He),Yi!==4&&(Yi=2),Fp===null?Fp=[ae]:Fp.push(ae),ae=xe;do{switch(ae.tag){case 3:ae.flags|=65536,A&=-A,ae.lanes|=A;var it=_u(ae,at,A);Ju(ae,it);break e;case 1:He=at;var qe=ae.type,ct=ae.stateNode;if(!(ae.flags&128)&&(typeof qe.getDerivedStateFromError=="function"||ct!==null&&typeof ct.componentDidCatch=="function"&&(rl===null||!rl.has(ct)))){ae.flags|=65536,A&=-A,ae.lanes|=A;var rn=Kg(ae,He,A);Ju(ae,rn);break e}}ae=ae.return}while(ae!==null)}Nf($)}catch(kn){A=kn,fs===$&&$!==null&&(fs=$=$.return);continue}break}while(!0)}function sy(){var T=Zg.current;return Zg.current=Tp,T===null?Tp:T}function zp(){(Yi===0||Yi===3||Yi===2)&&(Yi=4),$i===null||!(kf&268435455)&&!(Bi&268435455)||qs($i,Ns)}function Cd(T,A){var $=fr;fr|=2;var Y=sy();($i!==T||Ns!==A)&&(Fa=null,Fc(T,A));do try{sv();break}catch(J){Up(T,J)}while(!0);if(Pr(),fr=$,Zg.current=Y,fs!==null)throw Error(o(261));return $i=null,Ns=0,Yi}function sv(){for(;fs!==null;)Ex(fs)}function Pf(){for(;fs!==null&&!Ol();)Ex(fs)}function Ex(T){var A=kx(T.alternate,T,Vs);T.memoizedProps=T.pendingProps,A===null?Nf(T):fs=A,Mh.current=null}function Nf(T){var A=T;do{var $=A.alternate;if(T=A.return,A.flags&32768){if($=f2($,A),$!==null){$.flags&=32767,fs=$;return}if(T!==null)T.flags|=32768,T.subtreeFlags=0,T.deletions=null;else{Yi=6,fs=null;return}}else if($=Dp($,A,Vs),$!==null){fs=$;return}if(A=A.sibling,A!==null){fs=A;return}fs=A=T}while(A!==null);Yi===0&&(Yi=5)}function Ad(T,A,$){var Y=cr,J=Ss.transition;try{Ss.transition=null,cr=1,Sx(T,A,$,Y)}finally{Ss.transition=J,cr=Y}return null}function Sx(T,A,$,Y){do $c();while(Cu!==null);if(fr&6)throw Error(o(327));$=T.finishedWork;var J=T.finishedLanes;if($===null)return null;if(T.finishedWork=null,T.finishedLanes=0,$===T.current)throw Error(o(177));T.callbackNode=null,T.callbackPriority=0;var ae=$.lanes|$.childLanes;if(ko(T,ae),T===$i&&(fs=$i=null,Ns=0),!($.subtreeFlags&2064)&&!($.flags&2064)||Fh||(Fh=!0,ov(Ml,function(){return $c(),null})),ae=($.flags&15990)!==0,$.subtreeFlags&15990||ae){ae=Ss.transition,Ss.transition=null;var xe=cr;cr=1;var He=fr;fr|=4,Mh.current=null,Z1(T,$),sm($,T),X(T.containerInfo),T.current=$,Oh($),ks(),fr=He,cr=xe,Ss.transition=ae}else T.current=$;if(Fh&&(Fh=!1,Cu=T,dr=J),ae=T.pendingLanes,ae===0&&(rl=null),Cc($.stateNode),$a(T,Rs()),A!==null)for(Y=T.onRecoverableError,$=0;$<A.length;$++)J=A[$],Y(J.value,{componentStack:J.stack,digest:J.digest});if(ds)throw ds=!1,T=Hs,Hs=null,T;return dr&1&&T.tag!==0&&$c(),ae=T.pendingLanes,ae&1?T===ty?so++:(so=0,ty=T):so=0,dn(),null}function $c(){if(Cu!==null){var T=Ca(dr),A=Ss.transition,$=cr;try{if(Ss.transition=null,cr=16>T?16:T,Cu===null)var Y=!1;else{if(T=Cu,Cu=null,dr=0,fr&6)throw Error(o(331));var J=fr;for(fr|=4,nn=T.current;nn!==null;){var ae=nn,xe=ae.child;if(nn.flags&16){var He=ae.deletions;if(He!==null){for(var at=0;at<He.length;at++){var Ft=He[at];for(nn=Ft;nn!==null;){var yn=nn;switch(yn.tag){case 0:case 11:case 15:tl(8,yn,ae)}var tr=yn.child;if(tr!==null)tr.return=yn,nn=tr;else for(;nn!==null;){yn=nn;var an=yn.sibling,Ui=yn.return;if(im(yn),yn===Ft){nn=null;break}if(an!==null){an.return=Ui,nn=an;break}nn=Ui}}}var Si=ae.alternate;if(Si!==null){var su=Si.child;if(su!==null){Si.child=null;do{var Fo=su.sibling;su.sibling=null,su=Fo}while(su!==null)}}nn=ae}}if(ae.subtreeFlags&2064&&xe!==null)xe.return=ae,nn=xe;else e:for(;nn!==null;){if(ae=nn,ae.flags&2048)switch(ae.tag){case 0:case 11:case 15:tl(9,ae,ae.return)}var it=ae.sibling;if(it!==null){it.return=ae.return,nn=it;break e}nn=ae.return}}var qe=T.current;for(nn=qe;nn!==null;){xe=nn;var ct=xe.child;if(xe.subtreeFlags&2064&&ct!==null)ct.return=xe,nn=ct;else e:for(xe=qe;nn!==null;){if(He=nn,He.flags&2048)try{switch(He.tag){case 0:case 11:case 15:aa(9,He)}}catch(kn){ns(He,He.return,kn)}if(He===xe){nn=null;break e}var rn=He.sibling;if(rn!==null){rn.return=He.return,nn=rn;break e}nn=He.return}}if(fr=J,dn(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(xr,T)}catch{}Y=!0}return Y}finally{cr=$,Ss.transition=A}}return!1}function Tx(T,A,$){A=Rp($,A),A=_u(T,A,1),T=Rc(T,A,1),A=ts(),T!==null&&(Mi(T,1,A),$a(T,A))}function ns(T,A,$){if(T.tag===3)Tx(T,T,$);else for(;A!==null;){if(A.tag===3){Tx(A,T,$);break}else if(A.tag===1){var Y=A.stateNode;if(typeof A.type.getDerivedStateFromError=="function"||typeof Y.componentDidCatch=="function"&&(rl===null||!rl.has(Y))){T=Rp($,T),T=Kg(A,T,1),A=Rc(A,T,1),T=ts(),A!==null&&(Mi(A,1,T),$a(A,T));break}}A=A.return}}function d2(T,A,$){var Y=T.pingCache;Y!==null&&Y.delete(A),A=ts(),T.pingedLanes|=T.suspendedLanes&$,$i===T&&(Ns&$)===$&&(Yi===4||Yi===3&&(Ns&130023424)===Ns&&500>Rs()-$p?Fc(T,0):Td|=$),$a(T,A)}function Cx(T,A){A===0&&(T.mode&1?(A=br,br<<=1,!(br&130023424)&&(br=4194304)):A=1);var $=ts();T=kc(T,A),T!==null&&(Mi(T,A,$),$a(T,$))}function Ax(T){var A=T.memoizedState,$=0;A!==null&&($=A.retryLane),Cx(T,$)}function yC(T,A){var $=0;switch(T.tag){case 13:var Y=T.stateNode,J=T.memoizedState;J!==null&&($=J.retryLane);break;case 19:Y=T.stateNode;break;default:throw Error(o(314))}Y!==null&&Y.delete(A),Cx(T,$)}var kx;kx=function(T,A,$){if(T!==null)if(T.memoizedProps!==A.pendingProps||Se.current)Mn=!0;else{if(!(T.lanes&$)&&!(A.flags&128))return Mn=!1,Rh(T,A,$);Mn=!!(T.flags&131072)}else Mn=!1,yi&&A.flags&1048576&&$g(A,ta,A.index);switch(A.lanes=0,A.tag){case 2:var Y=A.type;Xg(T,A),T=A.pendingProps;var J=ze(A,Ie.current);yo(A,$),J=wh(null,A,Y,T,J,$);var ae=xp();return A.flags|=1,typeof J=="object"&&J!==null&&typeof J.render=="function"&&J.$$typeof===void 0?(A.tag=1,A.memoizedState=null,A.updateQueue=null,De(Y)?(ae=!0,Rt(A)):ae=!1,A.memoizedState=J.state!==null&&J.state!==void 0?J.state:null,bh(A),J.updater=Sd,A.stateNode=J,J._reactInternals=A,wf(A,Y,T,$),A=Da(null,A,Y,!0,ae,$)):(A.tag=0,yi&&ae&&ro(A),Oo(null,A,J,$),A=A.child),A;case 16:Y=A.elementType;e:{switch(Xg(T,A),T=A.pendingProps,J=Y._init,Y=J(Y._payload),A.type=Y,J=A.tag=vC(Y),T=Do(Y,T),J){case 0:A=Ef(null,A,Y,T,$);break e;case 1:A=sa(null,A,Y,T,$);break e;case 11:A=X1(null,A,Y,T,$);break e;case 14:A=Pp(null,A,Y,Do(Y.type,T),$);break e}throw Error(o(306,Y,""))}return A;case 0:return Y=A.type,J=A.pendingProps,J=A.elementType===Y?J:Do(Y,J),Ef(T,A,Y,J,$);case 1:return Y=A.type,J=A.pendingProps,J=A.elementType===Y?J:Do(Y,J),sa(T,A,Y,J,$);case 3:e:{if(Oa(A),T===null)throw Error(o(387));Y=A.pendingProps,ae=A.memoizedState,J=ae.element,a2(T,A),Ic(A,Y,null,$);var xe=A.memoizedState;if(Y=xe.element,Oe&&ae.isDehydrated)if(ae={element:Y,isDehydrated:!1,cache:xe.cache,pendingSuspenseBoundaries:xe.pendingSuspenseBoundaries,transitions:xe.transitions},A.updateQueue.baseState=ae,A.memoizedState=ae,A.flags&256){J=Rp(Error(o(423)),A),A=Np(T,A,Y,$,J);break e}else if(Y!==J){J=Rp(Error(o(424)),A),A=Np(T,A,Y,$,J);break e}else for(Oe&&(Ro=Hr(A.stateNode.containerInfo),oi=A,yi=!0,ra=null,ka=!1),$=Xe(A,null,Y,$),A.child=$;$;)$.flags=$.flags&-3|4096,$=$.sibling;else{if(vf(),Y===J){A=Za(T,A,$);break e}Oo(T,A,Y,$)}A=A.child}return A;case 5:return mx(A),T===null&&Xu(A),Y=A.type,J=A.pendingProps,ae=T!==null?T.memoizedProps:null,xe=J.children,oe(Y,J)?xe=null:ae!==null&&oe(Y,ae)&&(A.flags|=32),Fi(T,A),Oo(T,A,xe,$),A.child;case 6:return T===null&&Xu(A),null;case 13:return _x(T,A,$);case 4:return H1(A,A.stateNode.containerInfo),Y=A.pendingProps,T===null?A.child=be(A,null,Y,$):Oo(T,A,Y,$),A.child;case 11:return Y=A.type,J=A.pendingProps,J=A.elementType===Y?J:Do(Y,J),X1(T,A,Y,J,$);case 7:return Oo(T,A,A.pendingProps,$),A.child;case 8:return Oo(T,A,A.pendingProps.children,$),A.child;case 12:return Oo(T,A,A.pendingProps.children,$),A.child;case 10:e:{if(Y=A.type._context,J=A.pendingProps,ae=A.memoizedProps,xe=J.value,ai(A,Y,xe),ae!==null)if(Ne(ae.value,xe)){if(ae.children===J.children&&!Se.current){A=Za(T,A,$);break e}}else for(ae=A.child,ae!==null&&(ae.return=A);ae!==null;){var He=ae.dependencies;if(He!==null){xe=ae.child;for(var at=He.firstContext;at!==null;){if(at.context===Y){if(ae.tag===1){at=_d(-1,$&-$),at.tag=2;var Ft=ae.updateQueue;if(Ft!==null){Ft=Ft.shared;var yn=Ft.pending;yn===null?at.next=at:(at.next=yn.next,yn.next=at),Ft.pending=at}}ae.lanes|=$,at=ae.alternate,at!==null&&(at.lanes|=$),Io(ae.return,$,A),He.lanes|=$;break}at=at.next}}else if(ae.tag===10)xe=ae.type===A.type?null:ae.child;else if(ae.tag===18){if(xe=ae.return,xe===null)throw Error(o(341));xe.lanes|=$,He=xe.alternate,He!==null&&(He.lanes|=$),Io(xe,$,A),xe=ae.sibling}else xe=ae.child;if(xe!==null)xe.return=ae;else for(xe=ae;xe!==null;){if(xe===A){xe=null;break}if(ae=xe.sibling,ae!==null){ae.return=xe.return,xe=ae;break}xe=xe.return}ae=xe}Oo(T,A,J.children,$),A=A.child}return A;case 9:return J=A.type,Y=A.pendingProps.children,yo(A,$),J=vo(J),Y=Y(J),A.flags|=1,Oo(T,A,Y,$),A.child;case 14:return Y=A.type,J=Do(Y,A.pendingProps),J=Do(Y.type,J),Pp(T,A,Y,J,$);case 15:return Qa(T,A,A.type,A.pendingProps,$);case 17:return Y=A.type,J=A.pendingProps,J=A.elementType===Y?J:Do(Y,J),Xg(T,A),A.tag=1,De(Y)?(T=!0,Rt(A)):T=!1,yo(A,$),kp(A,Y,J),wf(A,Y,J,$),Da(null,A,Y,!0,T,$);case 19:return J1(T,A,$);case 22:return Gi(T,A,$)}throw Error(o(156,A.tag))};function ov(T,A){return Aa(T,A)}function iu(T,A,$,Y){this.tag=T,this.key=$,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=A,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ds(T,A,$,Y){return new iu(T,A,$,Y)}function lm(T){return T=T.prototype,!(!T||!T.isReactComponent)}function vC(T){if(typeof T=="function")return lm(T)?1:0;if(T!=null){if(T=T.$$typeof,T===m)return 11;if(T===y)return 14}return 2}function Bc(T,A){var $=T.alternate;return $===null?($=Ds(T.tag,A,T.key,T.mode),$.elementType=T.elementType,$.type=T.type,$.stateNode=T.stateNode,$.alternate=T,T.alternate=$):($.pendingProps=A,$.type=T.type,$.flags=0,$.subtreeFlags=0,$.deletions=null),$.flags=T.flags&14680064,$.childLanes=T.childLanes,$.lanes=T.lanes,$.child=T.child,$.memoizedProps=T.memoizedProps,$.memoizedState=T.memoizedState,$.updateQueue=T.updateQueue,A=T.dependencies,$.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext},$.sibling=T.sibling,$.index=T.index,$.ref=T.ref,$}function kd(T,A,$,Y,J,ae){var xe=2;if(Y=T,typeof T=="function")lm(T)&&(xe=1);else if(typeof T=="string")xe=5;else e:switch(T){case c:return Lo($.children,J,ae,A);case f:xe=8,J|=8;break;case d:return T=Ds(12,$,A,J|2),T.elementType=d,T.lanes=ae,T;case g:return T=Ds(13,$,A,J),T.elementType=g,T.lanes=ae,T;case b:return T=Ds(19,$,A,J),T.elementType=b,T.lanes=ae,T;case w:return Vp($,J,ae,A);default:if(typeof T=="object"&&T!==null)switch(T.$$typeof){case h:xe=10;break e;case p:xe=9;break e;case m:xe=11;break e;case y:xe=14;break e;case x:xe=16,Y=null;break e}throw Error(o(130,T==null?T:typeof T,""))}return A=Ds(xe,$,A,J),A.elementType=T,A.type=Y,A.lanes=ae,A}function Lo(T,A,$,Y){return T=Ds(7,T,Y,A),T.lanes=$,T}function Vp(T,A,$,Y){return T=Ds(22,T,Y,A),T.elementType=w,T.lanes=$,T.stateNode={isHidden:!1},T}function cm(T,A,$){return T=Ds(6,T,null,A),T.lanes=$,T}function oy(T,A,$){return A=Ds(4,T.children!==null?T.children:[],T.key,A),A.lanes=$,A.stateNode={containerInfo:T.containerInfo,pendingChildren:null,implementation:T.implementation},A}function Hp(T,A,$,Y,J){this.tag=A,this.containerInfo=T,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ee,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=to(0),this.expirationTimes=to(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=to(0),this.identifierPrefix=Y,this.onRecoverableError=J,Oe&&(this.mutableSourceEagerHydrationData=null)}function qp(T,A,$,Y,J,ae,xe,He,at){return T=new Hp(T,A,$,He,at),A===1?(A=1,ae===!0&&(A|=8)):A=0,ae=Ds(3,null,null,A),T.current=ae,ae.stateNode=T,ae.memoizedState={element:Y,isDehydrated:$,cache:null,transitions:null,pendingSuspenseBoundaries:null},bh(ae),T}function av(T){if(!T)return ve;T=T._reactInternals;e:{if(O(T)!==T||T.tag!==1)throw Error(o(170));var A=T;do{switch(A.tag){case 3:A=A.stateNode.context;break e;case 1:if(De(A.type)){A=A.stateNode.__reactInternalMemoizedMergedChildContext;break e}}A=A.return}while(A!==null);throw Error(o(171))}if(T.tag===1){var $=T.type;if(De($))return Nt(T,$,A)}return A}function $h(T){var A=T._reactInternals;if(A===void 0)throw typeof T.render=="function"?Error(o(188)):(T=Object.keys(T).join(","),Error(o(268,T)));return T=H(A),T===null?null:T.stateNode}function ay(T,A){if(T=T.memoizedState,T!==null&&T.dehydrated!==null){var $=T.retryLane;T.retryLane=$!==0&&$<A?$:A}}function Rd(T,A){ay(T,A),(T=T.alternate)&&ay(T,A)}function h2(T){return T=H(T),T===null?null:T.stateNode}function uy(){return null}return n.attemptContinuousHydration=function(T){if(T.tag===13){var A=kc(T,134217728);if(A!==null){var $=ts();ji(A,T,134217728,$)}Rd(T,134217728)}},n.attemptDiscreteHydration=function(T){if(T.tag===13){var A=kc(T,1);if(A!==null){var $=ts();ji(A,T,1,$)}Rd(T,1)}},n.attemptHydrationAtCurrentPriority=function(T){if(T.tag===13){var A=bo(T),$=kc(T,A);if($!==null){var Y=ts();ji($,T,A,Y)}Rd(T,A)}},n.attemptSynchronousHydration=function(T){switch(T.tag){case 3:var A=T.stateNode;if(A.current.memoizedState.isDehydrated){var $=ls(A.pendingLanes);$!==0&&(ea(A,$|1),$a(A,Rs()),!(fr&6)&&(Ti(),dn()))}break;case 13:ry(function(){var Y=kc(T,1);if(Y!==null){var J=ts();ji(Y,T,1,J)}}),Rd(T,1)}},n.batchedUpdates=function(T,A){var $=fr;fr|=1;try{return T(A)}finally{fr=$,fr===0&&(Ti(),hn&&dn())}},n.createComponentSelector=function(T){return{$$typeof:Lc,value:T}},n.createContainer=function(T,A,$,Y,J,ae,xe){return qp(T,A,!1,null,$,Y,J,ae,xe)},n.createHasPseudoClassSelector=function(T){return{$$typeof:ru,value:T}},n.createHydrationContainer=function(T,A,$,Y,J,ae,xe,He,at){return T=qp($,Y,!0,T,J,ae,xe,He,at),T.context=av(null),$=T.current,Y=ts(),J=bo($),ae=_d(Y,J),ae.callback=A??null,Rc($,ae,J),T.current.lanes=J,Mi(T,J,Y),$a(T,Y),T},n.createPortal=function(T,A,$){var Y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:Y==null?null:""+Y,children:T,containerInfo:A,implementation:$}},n.createRoleSelector=function(T){return{$$typeof:Cf,value:T}},n.createTestNameSelector=function(T){return{$$typeof:om,value:T}},n.createTextSelector=function(T){return{$$typeof:Mp,value:T}},n.deferredUpdates=function(T){var A=cr,$=Ss.transition;try{return Ss.transition=null,cr=16,T()}finally{cr=A,Ss.transition=$}},n.discreteUpdates=function(T,A,$,Y,J){var ae=cr,xe=Ss.transition;try{return Ss.transition=null,cr=1,T(A,$,Y,J)}finally{cr=ae,Ss.transition=xe,fr===0&&Ti()}},n.findAllNodes=Tu,n.findBoundingRects=function(T,A){if(!_t)throw Error(o(363));A=Tu(T,A),T=[];for(var $=0;$<A.length;$++)T.push(Et(A[$]));for(A=T.length-1;0<A;A--){$=T[A];for(var Y=$.x,J=Y+$.width,ae=$.y,xe=ae+$.height,He=A-1;0<=He;He--)if(A!==He){var at=T[He],Ft=at.x,yn=Ft+at.width,tr=at.y,an=tr+at.height;if(Y>=Ft&&ae>=tr&&J<=yn&&xe<=an){T.splice(A,1);break}else if(Y!==Ft||$.width!==at.width||an<ae||tr>xe){if(!(ae!==tr||$.height!==at.height||yn<Y||Ft>J)){Ft>Y&&(at.width+=Ft-Y,at.x=Y),yn<J&&(at.width=J-Ft),T.splice(A,1);break}}else{tr>ae&&(at.height+=tr-ae,at.y=ae),an<xe&&(at.height=xe-tr),T.splice(A,1);break}}}return T},n.findHostInstance=$h,n.findHostInstanceWithNoPortals=function(T){return T=L(T),T=T!==null?B(T):null,T===null?null:T.stateNode},n.findHostInstanceWithWarning=function(T){return $h(T)},n.flushControlled=function(T){var A=fr;fr|=1;var $=Ss.transition,Y=cr;try{Ss.transition=null,cr=1,T()}finally{cr=Y,Ss.transition=$,fr=A,fr===0&&(Ti(),dn())}},n.flushPassiveEffects=$c,n.flushSync=ry,n.focusWithin=function(T,A){if(!_t)throw Error(o(363));for(T=Su(T),A=Af(T,A),A=Array.from(A),T=0;T<A.length;){var $=A[T++];if(!Lt($)){if($.tag===5&&Fe($.stateNode))return!0;for($=$.child;$!==null;)A.push($),$=$.sibling}}return!1},n.getCurrentUpdatePriority=function(){return cr},n.getFindAllNodesFailureDescription=function(T,A){if(!_t)throw Error(o(363));var $=0,Y=[];T=[Su(T),0];for(var J=0;J<T.length;){var ae=T[J++],xe=T[J++],He=A[xe];if((ae.tag!==5||!Lt(ae))&&(am(ae,He)&&(Y.push(rv(He)),xe++,xe>$&&($=xe)),xe<A.length))for(ae=ae.child;ae!==null;)T.push(ae,xe),ae=ae.sibling}if($<A.length){for(T=[];$<A.length;$++)T.push(rv(A[$]));return`findAllNodes was able to match part of the selector:
  `+(Y.join(" > ")+`

No matching component was found for:
  `)+T.join(" > ")}return null},n.getPublicRootInstance=function(T){if(T=T.current,!T.child)return null;switch(T.child.tag){case 5:return G(T.child.stateNode);default:return T.child.stateNode}},n.injectIntoDevTools=function(T){if(T={bundleType:T.bundleType,version:T.version,rendererPackageName:T.rendererPackageName,rendererConfig:T.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:h2,findFiberByHostInstance:T.findFiberByHostInstance||uy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")T=!1;else{var A=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(A.isDisabled||!A.supportsFiber)T=!0;else{try{xr=A.inject(T),Gn=A}catch{}T=!!A.checkDCE}}return T},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(T,A,$,Y){if(!_t)throw Error(o(363));T=Tu(T,A);var J=Qe(T,$,Y).disconnect;return{disconnect:function(){J()}}},n.registerMutableSourceForHydration=function(T,A){var $=A._getVersion;$=$(A._source),T.mutableSourceEagerHydrationData==null?T.mutableSourceEagerHydrationData=[A,$]:T.mutableSourceEagerHydrationData.push(A,$)},n.runWithPriority=function(T,A){var $=cr;try{return cr=T,A()}finally{cr=$}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(T,A,$,Y){var J=A.current,ae=ts(),xe=bo(J);return $=av($),A.context===null?A.context=$:A.pendingContext=$,A=_d(ae,xe),A.payload={element:T},Y=Y===void 0?null:Y,Y!==null&&(A.callback=Y),T=Rc(J,A,xe),T!==null&&(ji(T,J,xe,ae),Q0(T,J,xe)),xe},n}),dB}var Vle;function X1t(){return Vle||(Vle=1,fB.exports=K1t()),fB.exports}var Q1t=X1t();const J1t=gc(Q1t);var hB={exports:{}},gv={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hle;function Z1t(){return Hle||(Hle=1,gv.ConcurrentRoot=1,gv.ContinuousEventPriority=4,gv.DefaultEventPriority=16,gv.DiscreteEventPriority=1,gv.IdleEventPriority=536870912,gv.LegacyRoot=0),gv}var qle;function evt(){return qle||(qle=1,hB.exports=Z1t()),hB.exports}var SSe=evt(),tvt=Vr();const Wle={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Gle=!1,Yle=!1;const VK=".react-konva-event",nvt=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,rvt=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,ivt={};function AM(e,t,n=ivt){if(!Gle&&"zIndex"in t&&(console.warn(rvt),Gle=!0),!Yle&&t.draggable){var r=t.x!==void 0||t.y!==void 0,i=t.onDragEnd||t.onDragMove;r&&!i&&(console.warn(nvt),Yle=!0)}for(var s in n)if(!Wle[s]){var o=s.slice(0,2)==="on",a=n[s]!==t[s];if(o&&a){var u=s.substr(2).toLowerCase();u.substr(0,7)==="content"&&(u="content"+u.substr(7,1).toUpperCase()+u.substr(8)),e.off(u,n[s])}var l=!t.hasOwnProperty(s);l&&e.setAttr(s,void 0)}var c=t._useStrictMode,f={},d=!1;const h={};for(var s in t)if(!Wle[s]){var o=s.slice(0,2)==="on",p=n[s]!==t[s];if(o&&p){var u=s.substr(2).toLowerCase();u.substr(0,7)==="content"&&(u="content"+u.substr(7,1).toUpperCase()+u.substr(8)),t[s]&&(h[u]=t[s])}!o&&(t[s]!==n[s]||c&&t[s]!==e.getAttr(s))&&(d=!0,f[s]=t[s])}d&&(e.setAttrs(f),tx(e));for(var u in h)e.on(u+VK,h[u])}function tx(e){if(!tvt.Konva.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}var pB=oq();const TSe={},svt={};S4.Node.prototype._applyProps=AM;function ovt(e,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}e.add(t),tx(e)}function avt(e,t,n){let r=S4[e];r||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=S4.Group);const i={},s={};for(var o in t){var a=o.slice(0,2)==="on";a?s[o]=t[o]:i[o]=t[o]}const u=new r(i);return AM(u,s),u}function uvt(e,t,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)}function lvt(e,t,n){return!1}function cvt(e){return e}function fvt(){return null}function dvt(){return null}function hvt(e,t,n,r){return svt}function pvt(){}function mvt(e){}function gvt(e,t){return!1}function yvt(){return TSe}function vvt(){return TSe}const bvt=setTimeout,xvt=clearTimeout,_vt=-1;function wvt(e,t){return!1}const Evt=!1,Svt=!0,Tvt=!0;function Cvt(e,t){t.parent===e?t.moveToTop():e.add(t),tx(e)}function Avt(e,t){t.parent===e?t.moveToTop():e.add(t),tx(e)}function CSe(e,t,n){t._remove(),e.add(t),t.setZIndex(n.getZIndex()),tx(e)}function kvt(e,t,n){CSe(e,t,n)}function Rvt(e,t){t.destroy(),t.off(VK),tx(e)}function Ivt(e,t){t.destroy(),t.off(VK),tx(e)}function Pvt(e,t,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function Nvt(e,t,n){}function Dvt(e,t,n,r,i){AM(e,i,r)}function Ovt(e){e.hide(),tx(e)}function Mvt(e){}function Lvt(e,t){(t.visible==null||t.visible)&&e.show()}function Fvt(e,t){}function $vt(e){}function Bvt(){}const jvt=()=>SSe.DefaultEventPriority,Uvt=Object.freeze(Object.defineProperty({__proto__:null,appendChild:Cvt,appendChildToContainer:Avt,appendInitialChild:ovt,cancelTimeout:xvt,clearContainer:$vt,commitMount:Nvt,commitTextUpdate:Pvt,commitUpdate:Dvt,createInstance:avt,createTextInstance:uvt,detachDeletedInstance:Bvt,finalizeInitialChildren:lvt,getChildHostContext:vvt,getCurrentEventPriority:jvt,getPublicInstance:cvt,getRootHostContext:yvt,hideInstance:Ovt,hideTextInstance:Mvt,idlePriority:pB.unstable_IdlePriority,insertBefore:CSe,insertInContainerBefore:kvt,isPrimaryRenderer:Evt,noTimeout:_vt,now:pB.unstable_now,prepareForCommit:fvt,preparePortalMount:dvt,prepareUpdate:hvt,removeChild:Rvt,removeChildFromContainer:Ivt,resetAfterCommit:pvt,resetTextContent:mvt,run:pB.unstable_runWithPriority,scheduleTimeout:bvt,shouldDeprioritizeSubtree:gvt,shouldSetTextContent:wvt,supportsMutation:Tvt,unhideInstance:Lvt,unhideTextInstance:Fvt,warnsIfNotActing:Svt},Symbol.toStringTag,{value:"Module"}));var zvt=Object.defineProperty,Vvt=Object.defineProperties,Hvt=Object.getOwnPropertyDescriptors,Kle=Object.getOwnPropertySymbols,qvt=Object.prototype.hasOwnProperty,Wvt=Object.prototype.propertyIsEnumerable,Xle=(e,t,n)=>t in e?zvt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qle=(e,t)=>{for(var n in t||(t={}))qvt.call(t,n)&&Xle(e,n,t[n]);if(Kle)for(var n of Kle(t))Wvt.call(t,n)&&Xle(e,n,t[n]);return e},Gvt=(e,t)=>Vvt(e,Hvt(t)),Jle,Zle;typeof window<"u"&&((Jle=window.document)!=null&&Jle.createElement||((Zle=window.navigator)==null?void 0:Zle.product)==="ReactNative")?U.useLayoutEffect:U.useEffect;function ASe(e,t,n){if(!e)return;if(n(e)===!0)return e;let r=e.child;for(;r;){const i=ASe(r,t,n);if(i)return i;r=r.sibling}}function kSe(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const ece=console.error;console.error=function(){const e=[...arguments].join("");if(e!=null&&e.startsWith("Warning:")&&e.includes("useContext")){console.error=ece;return}return ece.apply(this,arguments)};const HK=kSe(U.createContext(null));class RSe extends U.Component{render(){return U.createElement(HK.Provider,{value:this._reactInternals},this.props.children)}}function Yvt(){const e=U.useContext(HK);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=U.useId();return U.useMemo(()=>{for(const r of[e,e==null?void 0:e.alternate]){if(!r)continue;const i=ASe(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===t)return!0;o=o.next}});if(i)return i}},[e,t])}function Kvt(){const e=Yvt(),[t]=U.useState(()=>new Map);t.clear();let n=e;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==HK&&!t.has(i)&&t.set(i,U.useContext(kSe(i)))}n=n.return}return t}function Xvt(){const e=Kvt();return U.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>r=>U.createElement(t,null,U.createElement(n.Provider,Gvt(Qle({},r),{value:e.get(n)}))),t=>U.createElement(RSe,Qle({},t))),[e])}function Qvt(e){const t=sr.useRef({});return sr.useLayoutEffect(()=>{t.current=e}),sr.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const Jvt=e=>{const t=sr.useRef(),n=sr.useRef(),r=sr.useRef(),i=Qvt(e),s=Xvt(),o=a=>{const{forwardedRef:u}=e;u&&(typeof u=="function"?u(a):u.current=a)};return sr.useLayoutEffect(()=>(n.current=new S4.Stage({width:e.width,height:e.height,container:t.current}),o(n.current),r.current=U3.createContainer(n.current,SSe.LegacyRoot,!1,null),U3.updateContainer(sr.createElement(s,{},e.children),r.current),()=>{S4.isBrowser&&(o(null),U3.updateContainer(null,r.current,null),n.current.destroy())}),[]),sr.useLayoutEffect(()=>{o(n.current),AM(n.current,e,i),U3.updateContainer(sr.createElement(s,{},e.children),r.current,null)}),sr.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},ISe="Layer",PSe="Circle",KE="Line",NSe="Image",U3=J1t(Uvt);U3.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:sr.version,rendererPackageName:"react-konva"});const DSe=sr.forwardRef((e,t)=>sr.createElement(RSe,{},sr.createElement(Jvt,{...e,forwardedRef:t})));var X6={},Q6={},mB,tce;function Zvt(){if(tce)return mB;tce=1,mB=function(i,s,o){var a=document.head||document.getElementsByTagName("head")[0],u=document.createElement("script");typeof s=="function"&&(o=s,s={}),s=s||{},o=o||function(){},u.type=s.type||"text/javascript",u.charset=s.charset||"utf8",u.async="async"in s?!!s.async:!0,u.src=i,s.attrs&&e(u,s.attrs),s.text&&(u.text=""+s.text);var l="onload"in u?t:n;l(u,o),u.onload||t(u,o),a.appendChild(u)};function e(r,i){for(var s in i)r.setAttribute(s,i[s])}function t(r,i){r.onload=function(){this.onerror=this.onload=null,i(null,r)},r.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+this.src),r)}}function n(r,i){r.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,i(null,r))}}return mB}var J6={},nce;function OSe(){if(nce)return J6;nce=1,Object.defineProperty(J6,"__esModule",{value:!0});var e=A1(),t=n(e);function n(i){if(i&&i.__esModule)return i;var s={};if(i!=null)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(s[o]=i[o]);return s.default=i,s}var r=t.createContext({MathJax:null,registerNode:function(){}});return J6.default=r,J6}var rce;function ebt(){if(rce)return Q6;rce=1,Object.defineProperty(Q6,"__esModule",{value:!0});var e=function(){function h(p,m){for(var g=0;g<m.length;g++){var b=m[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}return function(p,m,g){return m&&h(p.prototype,m),g&&h(p,g),p}}(),t=A1(),n=u(t),r=Zvt(),i=a(r),s=OSe(),o=a(s);function a(h){return h&&h.__esModule?h:{default:h}}function u(h){if(h&&h.__esModule)return h;var p={};if(h!=null)for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(p[m]=h[m]);return p.default=h,p}function l(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function c(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function f(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var d=function(h){f(p,h);function p(m){l(this,p);var g=c(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,m));return g.hasNodes=!1,g.loaded=!1,g.registerNode=function(){g.hasNodes=!0},g.load=function(){var b=g.props.script;if(!(g.loaded||!g.hasNodes)){if(g.loaded=!0,!b){g.onLoad(null);return}(0,i.default)(b,g.onLoad)}},g.onLoad=function(b){var y=g.props.options;MathJax.Hub.Config(y),g.setState({MathJax})},g.state={MathJax:null,registerNode:g.registerNode},g}return e(p,[{key:"componentDidMount",value:function(){this.load()}},{key:"componentDidUpdate",value:function(){this.load()}},{key:"render",value:function(){var g=this.props.children;return n.createElement(o.default.Provider,{value:this.state},g)}}]),p}(n.Component);return d.defaultProps={script:"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML",options:{tex2jax:{inlineMath:[]},showMathMenu:!1,showMathMenuMSIE:!1}},Q6.default=d,Q6}var Z6={},e5={},ice;function tbt(){if(ice)return e5;ice=1,Object.defineProperty(e5,"__esModule",{value:!0});var e=[],t=[],n=!1;function r(s,o,a){e.push(o),t.push(a),n||(n=!0,setTimeout(function(){return i(s)},0))}function i(s){s.Hub.Queue(function(){var o=s.Hub.elementScripts;s.Hub.elementScripts=function(a){return e};try{return s.Hub.Process(null,function(){t.forEach(function(a){a()}),e=[],t=[],n=!1})}catch(a){throw a}finally{s.Hub.elementScripts=o}})}return e5.default=r,e5}var sce;function nbt(){if(sce)return Z6;sce=1,Object.defineProperty(Z6,"__esModule",{value:!0});var e=Object.assign||function(g){for(var b=1;b<arguments.length;b++){var y=arguments[b];for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(g[x]=y[x])}return g},t=function(){function g(b,y){for(var x=0;x<y.length;x++){var w=y[x];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(b,w.key,w)}}return function(b,y,x){return y&&g(b.prototype,y),x&&g(b,x),b}}(),n=A1(),r=l(n),i=OSe(),s=u(i),o=tbt(),a=u(o);function u(g){return g&&g.__esModule?g:{default:g}}function l(g){if(g&&g.__esModule)return g;var b={};if(g!=null)for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(b[y]=g[y]);return b.default=g,b}function c(g,b){var y={};for(var x in g)b.indexOf(x)>=0||Object.prototype.hasOwnProperty.call(g,x)&&(y[x]=g[x]);return y}function f(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function d(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function h(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var p=function(g){h(b,g);function b(){var y,x,w,S;f(this,b);for(var C=arguments.length,R=Array(C),I=0;I<C;I++)R[I]=arguments[I];return S=(x=(w=d(this,(y=b.__proto__||Object.getPrototypeOf(b)).call.apply(y,[this].concat(R))),w),w.container=r.createRef(),x),d(w,S)}return t(b,[{key:"componentDidMount",value:function(){this.typeset()}},{key:"componentDidUpdate",value:function(x){var w=x.inline!=this.props.inline;this.typeset(w)}},{key:"componentWillUnmount",value:function(){this.clear()}},{key:"clear",value:function(){var x=this.props.MathJax;if(!(!this.script||!x)){var w=x.Hub.getJaxFor(this.script);w&&w.Remove()}}},{key:"typeset",value:function(x){var w=this,S=this.props,C=S.MathJax,R=S.formula,I=S.onRender;if(C)if(x&&this.clear(),!x&&this.script)C.Hub.Queue(function(){var M=C.Hub.getJaxFor(w.script);if(M)M.Text(R,I);else{var L=w.setScriptText(R);(0,a.default)(C,L,I)}});else{var O=this.setScriptText(R);(0,a.default)(C,O,I)}}},{key:"setScriptText",value:function(x){var w=this.props.inline;return this.script||(this.script=document.createElement("script"),this.script.type="math/tex; "+(w?"":"mode=display"),this.container.current.appendChild(this.script)),"text"in this.script?this.script.text=x:this.script.textContent=x,this.script}},{key:"render",value:function(){var x=this.props;x.MathJax,x.formula,x.inline,x.onRender;var w=c(x,["MathJax","formula","inline","onRender"]);return this.props.inline?r.createElement("span",e({ref:this.container},w)):r.createElement("div",e({ref:this.container},w))}}]),b}(r.Component);p.defaultProps={inline:!1,onRender:function(){}};var m=function(g){h(b,g);function b(){return f(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return t(b,[{key:"render",value:function(){var x=this;return r.createElement(s.default.Consumer,null,function(w){var S=w.MathJax,C=w.registerNode;return C(),S?r.createElement(p,e({},x.props,{MathJax:S})):null})}}]),b}(r.PureComponent);return Z6.default=m,Z6}var oce;function rbt(){if(oce)return X6;oce=1,Object.defineProperty(X6,"__esModule",{value:!0});var e=ebt(),t=i(e),n=nbt(),r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}var s={Provider:t.default,Node:r.default};return X6.default=s,X6}rbt();function ibt({parameters:e,setAnswer:t}){const{image:n,question:r,example:i}=e,[s,o]=U.useState("stroke"),[a,u]=U.useState({width:0,height:0}),l=U.useRef(null),[c,f]=U.useState([]),[d,h]=U.useState([]),[p,m]=U.useState(!1),g=U.useRef(null),[b]=ySe(n),y=U.useCallback(L=>{const H=L.map(D=>({...D,points:D.points.map(B=>parseInt(B/a.multiplier))}));t({status:!0,answers:{annotations:JSON.stringify({annotations:H,multiplier:a.multiplier,question:r})}})},[t,c,a]),x=L=>{L!==s&&(h([]),m(!1)),o(L)},w=()=>{const L=c.slice(0,-1);f(L),y(L),h([]),m(!1)},S=()=>{f([]),h([]),m(!1),y([])},C=L=>{if(s==="polygon")return;m(!0);const D=g.current.getPointerPosition(),B=parseInt(D.x),z=parseInt(D.y);h([B,z])},R=L=>{if(s==="polygon"||!p)return;const D=g.current.getPointerPosition(),B=parseInt(D.x),z=parseInt(D.y);h(G=>[...G,B,z])},I=L=>{if(s==="polygon")return;m(!1);const H=[...c,{tool:"stroke",points:d}];f(H),y(H),h([])},O=L=>{if(s!=="polygon")return;const D=g.current.getPointerPosition(),B=parseInt(D.x),z=parseInt(D.y);h(G=>[...G,B,z])},M=L=>{if(s!=="polygon")return;const H=[...c,{tool:"polygon",points:d}];f(H),y(H),h([])};return U.useEffect(()=>{const L=new Image;L.src=n,L.onload=()=>{const H=l.current,D=window.innerHeight-H.getBoundingClientRect().top,B=window.innerWidth-H.getBoundingClientRect().left,z=L.width/L.height;let G,Z;D*z<=B?(Z=D,G=D*z):(G=B,Z=B/z);const ne=G/L.width;u({width:G,height:Z,multiplier:ne})}},[n]),k.jsxs("div",{children:[i&&k.jsx("h1",{children:"Example Question"}),i?k.jsx("div",{children:k.jsx("h3",{children:r})}):k.jsxs("div",{children:[k.jsxs("h3",{children:["Please identify and annotate the regions that are ",k.jsx("span",{style:{color:"red"},children:"important"})," for answering the question below. Then provide your answer for the question."]}),k.jsxs("h3",{children:["Q: ",r]})]}),k.jsxs(Ue,{ref:l,className:"ImageWrapper",style:{width:"100%",display:"flex"},children:[k.jsx(Ue,{style:{width:"250px",backgroundColor:"#f4f4f4",padding:"20px",borderRight:"1px solid #ddd",boxSizing:"border-box",flexShrink:0},children:k.jsx(gSe,{tool:s,setTool:x,undo:w,clearAll:S})}),k.jsx(DSe,{ref:g,width:a.width,height:a.height,onMouseDown:C,onMouseMove:R,onMouseUp:I,onClick:O,onDblClick:M,style:{border:"1px solid black"},children:k.jsxs(ISe,{children:[b&&k.jsx(NSe,{image:b,width:a.width,height:a.height}),c.map((L,H)=>{const{tool:D,points:B}=L,z=D==="polygon";return k.jsx(KE,{points:B,stroke:z?"blue":"red",strokeWidth:2,closed:!0,fill:z?"rgba(0, 0, 255, 0.3)":"rgba(255, 0, 0, 0.3)"},H)}),d.length>0&&s==="polygon"&&k.jsx(KE,{points:d,stroke:"blue",strokeWidth:2,closed:d.length>3,fill:d.length>3?"rgba(0, 150, 255, 0.3)":null}),d.length>0&&s==="stroke"&&k.jsx(KE,{points:d,stroke:"red",strokeWidth:2,closed:!0,fill:"rgba(255, 150, 0, 0.3)"}),s==="polygon"&&d.length>0&&k.jsx(PSe,{x:d[d.length-2],y:d[d.length-1],radius:5,fill:"red"})]})})]})]})}const sbt=Object.freeze(Object.defineProperty({__proto__:null,default:ibt},Symbol.toStringTag,{value:"Module"}));function obt({parameters:e,setAnswer:t}){const n=U.useRef(null),{image:r,question:i,x_grids:s,y_grids:o,example:a}=e,[u,l]=U.useState({width:0,height:0}),[c,f]=U.useState([]),[d,h]=U.useState([{x:-1,y:-1,width:0,height:0}]),p=U.useRef(null);return U.useEffect(()=>{const m=new Image;m.src=r,m.onload=()=>{const g=p.current,b=window.innerHeight-g.getBoundingClientRect().top,y=window.innerWidth-g.getBoundingClientRect().left,x=m.width/m.height;let w,S;b*x<=y?(S=b,w=b*x):(w=y,S=y/x),l({width:w,height:S,multiplier:w/m.width});let C=s,R=o;s.includes(0)||(C=[0,...s]),o.includes(0)||(R=[0,...o]);const I=[];for(let O=0;O<C.length;O++)for(let M=0;M<R.length;M++){let L,H;O+1===C.length?L=m.width-C[O]:L=C[O+1]-C[O],M+1===R.length?H=m.height-R[M]:H=R[M+1]-R[M],I.push({x:C[O],y:R[M],width:L,height:H})}f(I)}},[r]),U.useEffect(()=>{const m=$u(n.current),g=u.multiplier,b=VR.last(d);m.select("g").selectAll("rect").data(c).join("rect").attr("x",y=>y.x*g).attr("y",y=>y.y*g).attr("width",y=>y.width*g).attr("height",y=>y.height*g).attr("stroke",y=>y.x==b.x&y.y==b.y?"blue":"gray").attr("stroke-width",y=>y.x==b.x&y.y==b.y?2:.5).attr("cursor","pointer").attr("fill","transparent").on("click",(y,x)=>{const w=[...d,x];h(w),t({status:!0,answers:{patches:JSON.stringify({patches:w.slice(1),multiplier:u.multiplier,question:i})}})}).on("mouseover",(y,x)=>{x.x==b.x&x.y==b.y||$u(y.target).attr("stroke","black").attr("stroke-width",1)}).on("mouseout",(y,x)=>{x.x==b.x&x.y==b.y||$u(y.target).attr("stroke","gray").attr("stroke-width",.5)})},[c,t,u,d]),k.jsxs("div",{children:[k.jsx("h3",{children:"Click on the image to reveal"}),k.jsx(Ue,{ref:p,className:"ImageWrapper",style:{width:"100%",display:"block"},children:k.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:u.width,height:u.height,children:[k.jsxs("defs",{children:[k.jsxs("filter",{id:"imageBlurFilter",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[k.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"10",result:"blur"}),k.jsx("feComponentTransfer",{children:k.jsx("feFuncA",{type:"linear",slope:"2.5"})})]}),k.jsxs("mask",{id:"unblurMask",children:[k.jsx("rect",{width:"100%",height:"100%",fill:"white"}),d.length>0&&k.jsx("rect",{x:d[d.length-1].x*u.multiplier,y:d[d.length-1].y*u.multiplier,width:d[d.length-1].width*u.multiplier,height:d[d.length-1].height*u.multiplier,fill:"black"},0)]})]}),k.jsx("image",{href:r,width:u.width,height:u.height}),k.jsx("image",{href:r,width:u.width,height:u.height,filter:"url(#imageBlurFilter)",mask:"url(#unblurMask)"}),k.jsx("g",{id:"rectangles"})]})})]})}const abt=Object.freeze(Object.defineProperty({__proto__:null,default:obt},Symbol.toStringTag,{value:"Module"}));function ubt({parameters:e,setAnswer:t}){const n=U.useRef(null),{image:r,question:i,x_grids:s,y_grids:o,example:a}=e,[u,l]=U.useState({width:0,height:0}),[c,f]=U.useState([]),d=U.useRef(null);return U.useEffect(()=>{const h=new Image;h.src=r,h.onload=()=>{const p=d.current,m=window.innerHeight-p.getBoundingClientRect().top,g=window.innerWidth-p.getBoundingClientRect().left,b=h.width/h.height;let y,x;m*b<=g?(x=m,y=m*b):(y=g,x=g/b),l({width:y,height:x,multiplier:y/h.width});let w=s,S=o;s.includes(0)||(w=[0,...s]),o.includes(0)||(S=[0,...o]);const C=[];for(let R=0;R<w.length;R++)for(let I=0;I<S.length;I++){let O,M;R+1===w.length?O=h.width-w[R]:O=w[R+1]-w[R],I+1===S.length?M=h.height-S[I]:M=S[I+1]-S[I],C.push({x:w[R],y:S[I],width:O,height:M,clicked:!1,unClicked:!1})}f(C)}},[r]),U.useEffect(()=>{const h=$u(n.current),p=u.multiplier;h.select("g").selectAll("rect").data(c).join("rect").attr("x",m=>m.x*p).attr("y",m=>m.y*p).attr("width",m=>m.width*p).attr("height",m=>m.height*p).attr("stroke","black").attr("stroke-width",2).attr("cursor","pointer").attr("fill","#e6e6e6").attr("opacity",m=>m.clicked?0:.5).on("click",(m,g)=>{const b=VR.cloneDeep(c),y=b.findIndex(x=>x.x===g.x&&x.y===g.y);b[y].clicked&&(b[y].unClicked=!0),b[y].clicked=!b[y].clicked,f(b),t({status:!0,answers:{patches:JSON.stringify({patches:b.filter(x=>x.clicked||x.unClicked),multiplier:u.multiplier,question:i})}})}).on("mouseover",(m,g)=>{$u(m.target).attr("stroke","blue").attr("stroke-width",2)}).on("mouseout",(m,g)=>{$u(m.target).attr("stroke","gray").attr("stroke-width",.5)})},[c,t,u]),k.jsxs("div",{children:[a&&k.jsx("h1",{children:"Example Question"}),a?k.jsx("div",{children:k.jsx("h3",{children:i})}):k.jsxs("div",{children:[k.jsxs("h3",{children:["Please annotate ",k.jsx("u",{children:"minimum patches"})," that ",k.jsx("span",{style:{color:"red"},children:" must be revealed "})," for people to ",k.jsx("span",{style:{color:"red"},children:"confidently"})," answer the question below, assuming that people ",k.jsx("span",{style:{color:"red"},children:"cannot"})," see the blocked area. Then provide your answer for the question."]}),k.jsxs("h3",{children:["Q: ",i]})]}),k.jsx(Ue,{ref:d,className:"ImageWrapper",style:{width:"100%",display:"block"},children:k.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:u.width,height:u.height,children:[k.jsxs("defs",{children:[k.jsxs("filter",{id:"imageBlurFilter",children:[k.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"17"}),k.jsx("feComponentTransfer",{children:k.jsx("feFuncA",{type:"table",tableValues:"1 1"})})]}),k.jsxs("mask",{id:"unblurMask",children:[k.jsx("rect",{width:"100%",height:"100%",fill:"white"}),c.filter(h=>h.clicked).map((h,p)=>k.jsx("rect",{x:h.x*u.multiplier,y:h.y*u.multiplier,width:h.width*u.multiplier,height:h.height*u.multiplier,fill:"black"},p))]})]}),k.jsx("image",{href:r,width:u.width,height:u.height}),k.jsx("g",{id:"rectangles"})]})})]})}const lbt=Object.freeze(Object.defineProperty({__proto__:null,default:ubt},Symbol.toStringTag,{value:"Module"})),MSe=({tool:e,setTool:t,undo:n,clearAll:r})=>k.jsxs(Ue,{sx:{width:250,backgroundColor:"#f8f9fa",padding:20,borderRight:"1px solid #ddd",display:"flex",flexDirection:"column",gap:20},children:[k.jsx(co,{order:4,align:"center",sx:{fontWeight:700},children:"Toolbox"}),k.jsx(Zd,{my:"sm"}),k.jsxs(El,{spacing:"sm",children:[k.jsx(At,{weight:500,children:"Fill Type"}),k.jsx(Js,{children:k.jsxs(ac.Group,{name:"fillType",value:e,onChange:i=>{t(i)},children:[k.jsx(Ue,{mb:"sm",children:k.jsx(ac,{value:"stroke",label:"Stroke Fill"})}),k.jsx(Ue,{mb:"sm",children:k.jsx(ac,{value:"polygon",label:"Polygon Fill"})})]})})]}),k.jsx(Zd,{my:"md"}),k.jsxs(El,{spacing:"xs",children:[k.jsx(At,{weight:500,children:"Actions"}),k.jsx(Nn,{color:"gray",variant:"light",onClick:n,children:"Undo"}),k.jsx(Nn,{color:"red",variant:"light",onClick:r,children:"Clear All"})]}),k.jsx(Zd,{my:"md"}),k.jsxs(El,{spacing:"xs",children:[k.jsx(At,{size:"xl",children:"Tool Tips"}),k.jsxs(At,{size:"md",children:[k.jsx("b",{children:"Stroke Fill:"})," Draw shape by clicking and dragging."]}),k.jsxs(At,{size:"md",children:[k.jsx("b",{children:"Polygon Fill:"})," Click multiple points to draw a polygon. ",k.jsx("u",{children:"Double click"})," to close the polygon."]})]})]}),cbt=Object.freeze(Object.defineProperty({__proto__:null,default:MSe},Symbol.toStringTag,{value:"Module"}));function fbt({parameters:e,setAnswer:t}){const n=U.useRef(null),{image:r,question:i,radius_count:s,example:o}=e,[a,u]=U.useState([]),[l,c]=U.useState({width:0,height:0}),f=U.useRef(null),[d,h]=U.useState(0);U.useEffect(()=>{const m=new Image;m.src=r,m.onload=()=>{const g=f.current,b=window.innerHeight-g.getBoundingClientRect().top,y=window.innerWidth-g.getBoundingClientRect().left,x=m.width/m.height;let w,S;b*x<=y?(S=b,w=b*x):(w=y,S=y/x),c({width:w,height:S,multiplier:w/m.width}),h((w+S)/4/s)}},[r]);const p=U.useCallback(m=>{const g=$u(n.current),b=JY(m,g.node()),y={x:b[0],y:b[1]},x=[...a,y];u(x),t({status:!0,answers:{circles:JSON.stringify({circles:x.map(w=>({x:parseInt(w.x/l.multiplier),y:parseInt(w.y/l.multiplier)})),radius:d/l.multiplier,multiplier:l.multiplier,question:i})}})},[a,t,l]);return k.jsxs("div",{children:[o&&k.jsx("h1",{children:"Example Question"}),o?k.jsx("div",{children:k.jsx("h3",{children:i})}):k.jsxs("div",{children:[k.jsx("h3",{children:"Please click on regions that you wish to reveal. Then provide your answer for the question."}),k.jsxs("h3",{children:["Q: ",i]})]}),k.jsx(Ue,{ref:f,className:"ImageWrapper",style:{width:"100%",display:"block"},children:k.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:l.width,height:l.height,onClick:p,children:[k.jsxs("defs",{children:[k.jsxs("filter",{id:"imageBlurFilter",children:[k.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"11"}),k.jsx("feComponentTransfer",{children:k.jsx("feFuncA",{type:"table",tableValues:"1 1"})})]}),k.jsxs("mask",{id:"unblurMask",children:[k.jsx("rect",{width:"100%",height:"100%",fill:"white"}),a.length>0&&k.jsx("circle",{cx:a[a.length-1].x,cy:a[a.length-1].y,r:d,fill:"black"},0)]})]}),k.jsx("image",{href:r,width:l.width,height:l.height}),k.jsx("image",{href:r,width:l.width,height:l.height,filter:"url(#imageBlurFilter)",mask:"url(#unblurMask)"}),a.length>0&&k.jsx("circle",{cx:a[a.length-1].x,cy:a[a.length-1].y,r:d,fill:"transparent",stroke:"red"},0)]})})]})}const dbt=Object.freeze(Object.defineProperty({__proto__:null,default:fbt},Symbol.toStringTag,{value:"Module"}));function hbt({parameters:e,setAnswer:t}){const n=U.useRef(null),{image:r,question:i,x_grids:s,y_grids:o,example:a}=e,[u,l]=U.useState({width:0,height:0}),[c,f]=U.useState([]),d=U.useRef(null);return U.useEffect(()=>{const h=new Image;h.src=r,h.onload=()=>{const p=d.current,m=window.innerHeight-p.getBoundingClientRect().top,g=window.innerWidth-p.getBoundingClientRect().left,b=h.width/h.height;let y,x;m*b<=g?(x=m,y=m*b):(y=g,x=g/b),l({width:y,height:x,multiplier:y/h.width});let w=s,S=o;s.includes(0)||(w=[0,...s]),o.includes(0)||(S=[0,...o]);const C=[];for(let R=0;R<w.length;R++)for(let I=0;I<S.length;I++){let O,M;R+1===w.length?O=h.width-w[R]:O=w[R+1]-w[R],I+1===S.length?M=h.height-S[I]:M=S[I+1]-S[I],C.push({x:w[R],y:S[I],width:O,height:M,clicked:!1,unClicked:!1})}f(C)}},[r]),U.useEffect(()=>{const h=$u(n.current),p=u.multiplier;h.select("g").selectAll("rect").data(c).join("rect").attr("x",m=>m.x*p).attr("y",m=>m.y*p).attr("width",m=>m.width*p).attr("height",m=>m.height*p).attr("stroke","gray").attr("stroke-width",.5).attr("cursor","pointer").attr("fill",m=>m.clicked?"transparent":"#e6e6e6").attr("opacity",1).on("click",(m,g)=>{const b=VR.cloneDeep(c),y=b.findIndex(x=>x.x===g.x&&x.y===g.y);b[y].clicked&&(b[y].unClicked=!0),b[y].clicked=!b[y].clicked,f(b),t({status:!0,answers:{patches:JSON.stringify({patches:b.filter(x=>x.clicked||x.unClicked),multiplier:u.multiplier,question:i})}})}).on("mouseover",(m,g)=>{$u(m.target).attr("stroke","blue").attr("stroke-width",2)}).on("mouseout",(m,g)=>{$u(m.target).attr("stroke","gray").attr("stroke-width",.5)})},[c,t,u]),k.jsxs("div",{children:[a&&k.jsx("h1",{children:"Example Question"}),a?k.jsx("div",{children:k.jsx("h3",{children:i})}):k.jsxs("div",{children:[k.jsxs("h3",{children:["Please annotate ",k.jsx("u",{children:"minimum patches"})," that ",k.jsx("span",{style:{color:"red"},children:" must be revealed "})," for people to ",k.jsx("span",{style:{color:"red"},children:"confidently"})," answer the question below. Then provide your answer for the question."]}),k.jsxs("h3",{children:["Q: ",i]})]}),k.jsx(Ue,{ref:d,className:"ImageWrapper",style:{width:"100%",display:"block"},children:k.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:u.width,height:u.height,children:[k.jsxs("defs",{children:[k.jsxs("filter",{id:"imageBlurFilter",children:[k.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"17"}),k.jsx("feComponentTransfer",{children:k.jsx("feFuncA",{type:"table",tableValues:"1 1"})})]}),k.jsxs("mask",{id:"unblurMask",children:[k.jsx("rect",{width:"100%",height:"100%",fill:"white"}),c.filter(h=>h.clicked).map((h,p)=>k.jsx("rect",{x:h.x*u.multiplier,y:h.y*u.multiplier,width:h.width*u.multiplier,height:h.height*u.multiplier,fill:"black"},p))]})]}),k.jsx("image",{href:r,width:u.width,height:u.height}),k.jsx("g",{id:"rectangles"})]})})]})}const pbt=Object.freeze(Object.defineProperty({__proto__:null,default:hbt},Symbol.toStringTag,{value:"Module"}));function mbt({parameters:e,setAnswer:t}){const{image:n,question:r,example:i}=e,[s,o]=U.useState("stroke"),[a,u]=U.useState({width:0,height:0}),l=U.useRef(null),[c,f]=U.useState([]),[d,h]=U.useState([]),[p,m]=U.useState(!1),g=U.useRef(null),[b]=ySe(n),y=U.useCallback(L=>{const H=L.map(D=>({...D,points:D.points.map(B=>parseInt(B/a.multiplier))}));t({status:!0,answers:{annotations:JSON.stringify({annotations:H,multiplier:a.multiplier,question:r})}})},[t,c,a]),x=L=>{L!==s&&(f([]),h([]),m(!1)),o(L)},w=()=>{const L=c.slice(0,-1);f(L),y(L),h([]),m(!1)},S=()=>{f([]),h([]),m(!1),y([])},C=L=>{if(s==="polygon")return;m(!0);const D=g.current.getPointerPosition(),B=parseInt(D.x),z=parseInt(D.y);h([B,z])},R=L=>{if(s==="polygon"||!p)return;const D=g.current.getPointerPosition(),B=parseInt(D.x),z=parseInt(D.y);h(G=>[...G,B,z])},I=L=>{if(s==="polygon")return;m(!1);const H=[...c,{tool:"stroke",points:d}];f(H),y(H),h([])},O=L=>{if(s!=="polygon")return;const D=g.current.getPointerPosition(),B=parseInt(D.x),z=parseInt(D.y);h(G=>[...G,B,z])},M=L=>{if(s!=="polygon")return;const H=[...c,{tool:"polygon",points:d}];f(H),y(H),h([])};return U.useEffect(()=>{const L=new Image;L.src=n,L.onload=()=>{const H=l.current,D=window.innerHeight-H.getBoundingClientRect().top,B=window.innerWidth-H.getBoundingClientRect().left,z=L.width/L.height;let G,Z;D*z<=B?(Z=D,G=D*z):(G=B,Z=B/z);const ne=G/L.width;u({width:G,height:Z,multiplier:ne})}},[n]),k.jsxs("div",{children:[i&&k.jsx("h1",{children:"Example Question"}),i?k.jsx("div",{children:k.jsx("h3",{children:r})}):k.jsxs("div",{children:[k.jsxs("h3",{children:["Please identify and annotate the regions that are ",k.jsx("span",{style:{color:"red"},children:"important"})," for answering the question below. Then provide your answer for the question."]}),k.jsxs("h3",{children:["Q: ",r]})]}),k.jsxs(Ue,{ref:l,className:"ImageWrapper",style:{width:"100%",display:"flex"},children:[k.jsx(Ue,{style:{width:"250px",backgroundColor:"#f4f4f4",padding:"20px",borderRight:"1px solid #ddd",boxSizing:"border-box",flexShrink:0},children:k.jsx(MSe,{tool:s,setTool:x,undo:w,clearAll:S})}),k.jsx(DSe,{ref:g,width:a.width,height:a.height,onMouseDown:C,onMouseMove:R,onMouseUp:I,onClick:O,onDblClick:M,style:{border:"1px solid black"},children:k.jsxs(ISe,{children:[b&&k.jsx(NSe,{image:b,width:a.width,height:a.height}),c.map((L,H)=>{const{tool:D,points:B}=L,z=D==="polygon";return k.jsx(KE,{points:B,stroke:z?"blue":"red",strokeWidth:2,closed:!0,fill:z?"rgba(0, 0, 255, 0.3)":"rgba(255, 0, 0, 0.3)"},H)}),d.length>0&&s==="polygon"&&k.jsx(KE,{points:d,stroke:"blue",strokeWidth:2,closed:d.length>3,fill:d.length>3?"rgba(0, 150, 255, 0.3)":null}),d.length>0&&s==="stroke"&&k.jsx(KE,{points:d,stroke:"red",strokeWidth:2,closed:!0,fill:"rgba(255, 150, 0, 0.3)"}),s==="polygon"&&d.length>0&&k.jsx(PSe,{x:d[d.length-2],y:d[d.length-1],radius:5,fill:"red"})]})})]})]})}const gbt=Object.freeze(Object.defineProperty({__proto__:null,default:mbt},Symbol.toStringTag,{value:"Module"}));function ybt({parameters:e,setAnswer:t}){const n=U.useRef(null),{image:r,question:i,tiles:s,example:o,ourDefinition:a}=e,[u,l]=U.useState({width:0,height:0}),[c,f]=U.useState(s.map(h=>({...h,clicked:!1}))),d=U.useRef(null);return U.useEffect(()=>{const h=new Image;h.src=r,h.onload=()=>{const p=d.current,m=window.innerHeight-p.getBoundingClientRect().top,g=window.innerWidth-p.getBoundingClientRect().left,b=h.width/h.height;let y,x;m*b<=g?(x=m,y=m*b):(y=g,x=g/b),l({width:y,height:x,multiplier:y/h.width})}},[r]),U.useEffect(()=>{const h=$u(n.current),p=u.multiplier;h.select("g").selectAll("rect").data(c).join("rect").attr("x",m=>m.x*p).attr("y",m=>m.y*p).attr("width",m=>m.width*p).attr("height",m=>m.height*p).attr("stroke","gray").attr("stroke-width",.5).attr("cursor","pointer").attr("fill",m=>m.clicked?"transparent":"#e6e6e6").attr("opacity",1).on("click",(m,g)=>{const b=VR.cloneDeep(c),y=b.findIndex(x=>x.x===g.x&&x.y===g.y);b[y].clicked=!b[y].clicked,f(b),t({status:!0,answers:{patches:JSON.stringify({patches:b.filter(x=>x.clicked),multiplier:u.multiplier,question:i})}})}).on("mouseover",(m,g)=>{$u(m.target).attr("stroke","blue").attr("stroke-width",2)}).on("mouseout",(m,g)=>{$u(m.target).attr("stroke","gray").attr("stroke-width",.5)})},[c,t,u]),k.jsxs("div",{children:[o&&k.jsx("h1",{children:"Example Question"}),o?k.jsx("div",{children:k.jsx("h3",{children:i})}):k.jsxs("div",{children:[k.jsxs("h3",{children:["Please annotate ",k.jsx("u",{children:"minimum patches"})," that ",k.jsx("span",{style:{color:"red"},children:" must be revealed "})," for people to ",k.jsx("span",{style:{color:"red"},children:"confidently"})," answer the question below. Then provide your answer for the question."]}),k.jsxs("h3",{children:["Q: ",i]})]}),k.jsx(Ue,{ref:d,className:"ImageWrapper",style:{width:"100%",display:"block"},children:k.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:u.width,height:u.height,children:[k.jsx("image",{href:r,width:u.width,height:u.height}),k.jsx("g",{id:"rectangles"})]})})]})}const vbt=Object.freeze(Object.defineProperty({__proto__:null,default:ybt},Symbol.toStringTag,{value:"Module"}));class bbt extends sr.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?k.jsx(At,{children:this.state.error.toString()}):this.props.children}}const ace=Object.assign({"../public/adaptive_blur/assets/tilegrid.jsx":Qyt,"../public/bubble/assets/bubble.jsx":Zyt,"../public/gaze/assets/Slider.jsx":e1t,"../public/gaze/assets/bubble.jsx":n1t,"../public/gaze/assets/plain.jsx":i1t,"../public/importAnnot/assets/ToolBox.jsx":s1t,"../public/importAnnot/assets/importantannot.jsx":sbt,"../public/literacy/assets/grid.jsx":abt,"../public/static_blur/assets/grid.jsx":lbt,"../public/tools/assets/ToolBox.jsx":cbt,"../public/tools/assets/bubble.jsx":dbt,"../public/tools/assets/grid.jsx":pbt,"../public/tools/assets/importantannot.jsx":gbt,"../public/tools/assets/tilegrid.jsx":vbt});function xbt({currentConfig:e,provState:t}){const n=pp(),r=B0(),i=`../public/${e.path}`,s=i in ace?ace[i].default:null,o=bc(),{updateResponseBlockValidation:a,setreactiveAnswers:u}=Al(),l=U.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[r,n,u,o,a]);return k.jsx(U.Suspense,{fallback:k.jsx("div",{children:"Loading..."}),children:s?k.jsx(bbt,{children:k.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t})}):k.jsx(yb,{path:e.path})})}function _bt({currentConfig:e}){const[t,n]=U.useState(""),[r,i]=U.useState(!0);return U.useEffect(()=>{async function s(){const o=await YY(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?k.jsx(dc,{text:t}):k.jsx(yb,{path:e.path})}function YT(e){return e.baseComponent!==void 0}function LSe(){const e=pp(),{setAlertModal:t}=Al(),n=bc();U.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var uce=Object.prototype.hasOwnProperty;function lce(e,t,n){for(n of e.keys())if(Rk(n,t))return n}function Rk(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Rk(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=lce(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=lce(t,i),!i)||!Rk(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(uce.call(e,n)&&++r&&!uce.call(t,n)||!(n in t)||!Rk(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function wbt(e){var t=U.useRef(e),n=U.useRef(0);return Rk(e,t.current)||(t.current=e,n.current+=1),U.useMemo(function(){return t.current},[n.current])}function Ebt(e,t){return U.useEffect(e,wbt(t))}const AD=(e,t=null)=>{const[n,r]=U.useState("idle"),[i,s]=U.useState(null),[o,a]=U.useState(null),u=U.useRef(null),l=U.useRef(!1);U.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=U.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return Ebt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function FSe(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const Sbt="_root_1spq0_1",Tbt="_description_1spq0_9",Cbt="_title_1spq0_10",Abt="_closeButton_1spq0_14",kbt={root:Sbt,description:Tbt,title:Cbt,closeButton:Abt},T4=e=>{const{title:t,message:n,color:r}=e;Pw.show({title:t,message:n,position:"top-center",classNames:kbt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})},cce=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],$Se=["participantId","trialId","trialOrder","responseId"];function qK(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function Rbt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==-1).length/(k0(e.sequence).length-1)*100).toFixed(2);return[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=YT(u)&&u.baseComponent&&n.baseComponents?qY({},n.baseComponents[u.baseComponent],u):u,c=s.endTime===-1?void 0:s.endTime-s.startTime,f=FSe(s);return Object.entries(s.answer).map(([h,p])=>{var b,y;const m={participantId:e.participantId,trialId:o,trialOrder:a,responseId:h},g=l.response.find(x=>x.id===h);if(t.includes("status")&&(m.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(m.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(m.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(m.configHash=e.participantConfigHash),t.includes("percentComplete")&&(m.percentComplete=r),t.includes("description")&&(m.description=l.description),t.includes("instruction")&&(m.instruction=l.instruction),t.includes("responsePrompt")&&(m.responsePrompt=g==null?void 0:g.prompt),t.includes("answer")&&(m.answer=p),t.includes("correctAnswer")){const x=(y=(b=l.correctAnswer)==null?void 0:b.find(w=>w.id===h))==null?void 0:y.answer;m.correctAnswer=typeof x=="object"?JSON.stringify(x):x}return t.includes("responseMin")&&(m.responseMin=(g==null?void 0:g.type)==="numerical"?g.min:void 0),t.includes("responseMax")&&(m.responseMax=(g==null?void 0:g.type)==="numerical"?g.max:void 0),t.includes("startTime")&&(m.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(m.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(m.duration=c),t.includes("cleanedDuration")&&(m.cleanedDuration=f),t.includes("meta")&&(m.meta=JSON.stringify(l.meta,null,2)),m}).flat()}).flat()]}async function Ibt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...$Se,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await Rbt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function Pbt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=U.useState([...cce].filter(p=>p!=="meta")),a=Yo(),{value:u,status:l,error:c}=AD(Ibt,[s,r,a.storageEngine,i]),f=U.useCallback(()=>{if(!u)return;const p=[u.header.join(","),...u.rows.map(m=>u.header.map(g=>`"${`${m[g]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);qK(p,n)},[n,u]),d=U.useCallback(()=>{u&&(window.parent.postMessage({type:"revisitWidget/PYTHON_EXPORT_TIDY",payload:u},"*"),T4({title:"Success",message:"Data sent to python notebook",color:"green"}))},[u]),h=U.useMemo(()=>{if(!u)return"";const p=u.rows.length>5?5:u.rows.length,m=p===1?"":"s";return`This is a preview of the first ${m?p:""} row${m} of the CSV. The full CSV contains ${u.rows.length} row${m}.`},[u]);return k.jsxs(Eo,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[k.jsx(NW,{searchable:!0,nothingFoundMessage:"Property not found",data:[...cce],value:s,onChange:p=>o(p),label:"Included optional columns:",leftSection:k.jsx(nVe,{}),variant:"filled"}),k.jsx(eh,{h:"md"}),k.jsxs(Ue,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?k.jsxs(zn,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[k.jsx(zn.Thead,{children:k.jsx(zn.Tr,{children:u.header.map(p=>k.jsx(zn.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(p)?200:void 0},children:k.jsxs(An,{direction:"row",justify:"space-between",align:"center",children:[p,!$Se.includes(p)&&k.jsx(zb,{onClick:()=>o(s.filter(m=>m!==p)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:k.jsx(pR,{size:16})})]})},p))})}),k.jsx(zn.Tbody,{children:u.rows.slice(0,5).map((p,m)=>k.jsx(zn.Tr,{children:u.header.map(g=>k.jsx(zn.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(g)?"normal":"nowrap"},children:p[g]},`${m}-${g}`))},m))})]}):l==="error"&&c?k.jsx(Yy,{variant:"light",children:c.message}):null,k.jsx(oh,{visible:l==="pending"||l==="idle"})]}),k.jsx(eh,{h:"sm"}),k.jsx(An,{justify:"center",fz:"sm",c:"dimmed",children:k.jsx(At,{children:h})}),k.jsx(eh,{h:"md"}),k.jsxs(Js,{justify:"right",children:[k.jsx(Nn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),k.jsx(Nn,{leftSection:k.jsx(N1e,{}),onClick:f,"data-autofocus":!0,children:"Download"}),i==="__revisit-widget"&&k.jsx(Nn,{onClick:d,children:k.jsx(Wze,{})})]})]})}function Nbt(){const e=v1(),{storageEngine:t}=Yo(),n=Ai(x=>x.answers),r=zT(),[i,s]=U.useState(!1);U.useEffect(()=>{if(r){s(!0);return}const x=setInterval(async()=>{await t.verifyCompletion(n)&&(s(!0),clearInterval(x))},1e3)},[]),LSe();const[o,a]=U.useState(),[u,l]=U.useState(""),c=e.studyMetadata.title.replace(" ","_");U.useEffect(()=>{async function x(){if(t){const w=await t.getCurrentParticipantId(),S=await t.getParticipantData();l(w),a(S)}}x()},[t]);const f=U.useCallback(async()=>{qK(JSON.stringify(o,null,2),`${c}_${u}.json`)},[c,o,u]),d=e.uiConfig.autoDownloadStudy||!1,h=d&&e.uiConfig.autoDownloadTime||-1,[p,m]=U.useState(Math.floor(h/1e3));U.useEffect(()=>{if(i){const x=setInterval(()=>{m(w=>w-1)},1e3);return p<=0?(d&&f(),clearInterval(x),()=>clearInterval(x)):()=>clearInterval(x)}return()=>{}},[d,i,p,f]);const g=Uw(),[b,y]=U.useState(!1);return U.useEffect(()=>{(async()=>{if(t){const w=await t.getModes(g);y(w.dataCollectionEnabled)}})()},[t,g]),k.jsx(l1,{style:{height:"100%"},children:k.jsx(An,{direction:"column",children:i||!b?e.uiConfig.studyEndMsg?k.jsx(dc,{text:e.uiConfig.studyEndMsg}):k.jsx(At,{size:"xl",display:"block",children:"Thank you for completing the study. You may close this window now."}):k.jsxs(k.Fragment,{children:[k.jsx(At,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),k.jsx(eh,{h:"lg"}),k.jsx(l1,{children:k.jsx(xg,{color:"blue"})})]})})})}function Dbt(){return k.jsx(At,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function Obt(){return k.jsx(At,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}const fce={};function sV(e,t){e===void 0&&(e=fce),t===void 0&&(t=fce);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Mbt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lbt=Object.prototype.hasOwnProperty;function oV(e,t){return Lbt.call(e,t)}function aV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)oV(e,i)&&r.push(i);return r}function Xd(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function uV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function u_(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function BSe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function lV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(lV(e[t]))return!0}else if(typeof e=="object"){for(var r=aV(e),i=r.length,s=0;s<i;s++)if(lV(e[r[s]]))return!0}}return!1}function dce(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var jSe=function(e){Mbt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,dce(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=dce(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),zo=jSe,Fbt=Xd,IE={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=kD(n,this.path);r&&(r=Xd(r));var i=L_(n,{op:"remove",path:this.from}).removed;return L_(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=kD(n,this.from);return L_(n,{op:"add",path:this.path,value:Xd(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:C4(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},$bt={add:function(e,t,n){return uV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:IE.move,copy:IE.copy,test:IE.test,_get:IE._get};function kD(e,t){if(t=="")return e;var n={op:"_get",path:t};return L_(e,n),n.value}function L_(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):RD(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=kD(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=C4(e,t.value),o.test===!1)throw new zo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new zo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Xd(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=RD;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=BSe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!uV(h))throw new zo("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);uV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new zo("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=$bt[t.op].call(t,l,h,e);if(o.test===!1)throw new zo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=IE[t.op].call(t,l,h,e);if(o.test===!1)throw new zo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new zo("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function kM(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new zo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Xd(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=L_(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function Bbt(e,t,n){var r=L_(e,t);if(r.test===!1)throw new zo("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function RD(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new zo("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(IE[e.op]){if(typeof e.path!="string")throw new zo("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new zo('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new zo("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new zo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&lV(e.value))throw new zo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new zo("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new zo("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=USe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new zo("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new zo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function USe(e,t,n){try{if(!Array.isArray(e))throw new zo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)kM(Xd(t),Xd(e),n||!0);else{n=n||RD;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof zo)return i;throw i}}function C4(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!C4(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!C4(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const jbt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:zo,_areEquals:C4,applyOperation:L_,applyPatch:kM,applyReducer:Bbt,deepClone:Fbt,getValueByPointer:kD,validate:USe,validator:RD},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var WK=new WeakMap,Ubt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),zbt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Vbt(e){return WK.get(e)}function Hbt(e,t){return e.observers.get(t)}function qbt(e,t){e.observers.delete(t.callback)}function Wbt(e,t){t.unobserve()}function Gbt(e,t){var n=[],r,i=Vbt(e);if(!i)i=new Ubt(e),WK.set(e,i);else{var s=Hbt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Xd(e),t){r.callback=t,r.next=null;var o=function(){cV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){cV(r),clearTimeout(r.next),qbt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new zbt(t,r)),r}function cV(e,t){t===void 0&&(t=!1);var n=WK.get(e.object);GK(n.value,e.object,e.patches,"",t),e.patches.length&&kM(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function GK(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=aV(t),o=aV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(oV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?GK(c,f,n,r+"/"+u_(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+u_(l),value:Xd(c)}),n.push({op:"replace",path:r+"/"+u_(l),value:Xd(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+u_(l),value:Xd(c)}),n.push({op:"remove",path:r+"/"+u_(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!oV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+u_(l),value:Xd(t[l])})}}}function Ybt(e,t,n){n===void 0&&(n=!1);var r=[];return GK(e,t,r,"",n),r}const Kbt=Object.freeze(Object.defineProperty({__proto__:null,compare:Ybt,generate:cV,observe:Gbt,unobserve:Wbt},Symbol.toStringTag,{value:"Module"}));Object.assign({},jbt,Kbt,{JsonPatchError:jSe,deepClone:Xd,escapePathComponent:u_,unescapePathComponent:BSe});var gB,hce;function Xbt(){if(hce)return gB;hce=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return gB=function(n,r){var i,s,o;return r=r||{},i=JSON.stringify([1],void 0,r.indent===void 0?2:r.indent).slice(2,-3),s=i===""?1/0:r.maxLength===void 0?80:r.maxLength,o=r.replacer,function a(u,l,c){var f,d,h,p,m,g,b,y,x,w,S,C;if(u&&typeof u.toJSON=="function"&&(u=u.toJSON()),S=JSON.stringify(u,o),S===void 0)return S;if(b=s-l.length-c,S.length<=b&&(x=S.replace(e,function(R,I){return I||R+" "}),x.length<=b))return x;if(o!=null&&(u=JSON.parse(S),o=void 0),typeof u=="object"&&u!==null){if(y=l+i,h=[],d=0,Array.isArray(u))for(w="[",f="]",b=u.length;d<b;d++)h.push(a(u[d],y,d===b-1?0:1)||"null");else for(w="{",f="}",g=Object.keys(u),b=g.length;d<b;d++)p=g[d],m=JSON.stringify(p)+": ",C=a(u[p],y,m.length+(d===b-1?0:1)),C!==void 0&&h.push(m+C);if(h.length>0)return[w,i+h.join(`,
`+y),f].join(`
`+l)}return S}(n,"",0)},gB}var Qbt=Xbt();const yB=gc(Qbt);function dd(e,t,n){return e.fields=t||[],e.fname=n,e}function Wo(e){return e==null?null:e.fname}function uc(e){return e==null?null:e.fields}function zSe(e){return e.length===1?Jbt(e[0]):Zbt(e)}const Jbt=e=>function(t){return t[e]},Zbt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function vt(e){throw Error(e)}function Ag(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||vt("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&vt("Access path missing closing bracket: "+e),r&&vt("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function tp(e,t,n){const r=Ag(e);return e=r.length===1?r[0]:e,dd((n&&n.get||zSe)(r),[e],t||e)}const HR=tp("id"),pc=dd(e=>e,[],"identity"),Lv=dd(()=>0,[],"zero"),KT=dd(()=>1,[],"one"),np=dd(()=>!0,[],"true"),_v=dd(()=>!1,[],"false");function ext(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const VSe=0,YK=1,KK=2,HSe=3,qSe=4;function XK(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ext,r=e||VSe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=YK&&n(t||"error","ERROR",arguments),this},warn(){return r>=KK&&n(t||"warn","WARN",arguments),this},info(){return r>=HSe&&n(t||"log","INFO",arguments),this},debug(){return r>=qSe&&n(t||"log","DEBUG",arguments),this}}}var xt=Array.isArray;function un(e){return e===Object(e)}const pce=e=>e!=="__proto__";function XT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=txt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;QT(r,s,i[s],o)}return r},{})}function QT(e,t,n,r){if(!pce(t))return;let i,s;if(un(n)&&!xt(n)){s=un(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?QT(s,i,n[i]):pce(i)&&(s[i]=n[i])}else e[t]=n}function txt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function pi(e){return e[e.length-1]}function sc(e){return e==null||e===""?null:+e}const WSe=e=>t=>e*Math.exp(t),GSe=e=>t=>Math.log(e*t),YSe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),KSe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,ID=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function RM(e,t,n,r){const i=n(e[0]),s=n(pi(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function XSe(e,t){return RM(e,t,sc,pc)}function QSe(e,t){var n=Math.sign(e[0]);return RM(e,t,GSe(n),WSe(n))}function JSe(e,t,n){return RM(e,t,ID(n),ID(1/n))}function ZSe(e,t,n){return RM(e,t,YSe(n),KSe(n))}function IM(e,t,n,r,i){const s=r(e[0]),o=r(pi(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function QK(e,t,n){return IM(e,t,n,sc,pc)}function JK(e,t,n){const r=Math.sign(e[0]);return IM(e,t,n,GSe(r),WSe(r))}function PD(e,t,n,r){return IM(e,t,n,ID(r),ID(1/r))}function ZK(e,t,n,r){return IM(e,t,n,YSe(r),KSe(r))}function eTe(e){return 1+~~(new Date(e).getMonth()/3)}function tTe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ln(e){return e!=null?xt(e)?e:[e]:[]}function nTe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function Rr(e){return typeof e=="function"}const nxt="descending";function eX(e,t,n){n=n||{},t=ln(t)||[];const r=[],i=[],s={},o=n.comparator||rxt;return ln(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===nxt?-1:1),i.push(a=Rr(a)?a:tp(a,null,n)),(uc(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:dd(o(i,r),Object.keys(s))}const PM=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),rxt=(e,t)=>e.length===1?ixt(e[0],t[0]):sxt(e,t,e.length),ixt=(e,t)=>function(n,r){return PM(e(n),e(r))*t},sxt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=PM(s(r),s(i));return o*t[a]});function mc(e){return Rr(e)?e:()=>e}function tX(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function kr(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function dg(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function rTe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const oxt=Object.prototype.hasOwnProperty;function gn(e,t){return oxt.call(e,t)}const t5={};function JT(e){let t={},n;function r(s){return gn(t,s)&&t[s]!==t5}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===t5&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=t5),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==t5&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function iTe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=pi(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function en(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),kr(r,n)}function PE(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function nx(e){return typeof e=="boolean"}function tb(e){return Object.prototype.toString.call(e)==="[object Date]"}function sTe(e){return e&&Rr(e[Symbol.iterator])}function Ri(e){return typeof e=="number"}function oTe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function cn(e){return typeof e=="string"}function nX(e,t,n){e&&(e=t?ln(e).map(a=>a.replace(/\\(.)/g,"$1")):ln(e));const r=e&&e.length,i=n&&n.get||zSe,s=a=>i(t?[a]:Ag(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return dd(o,e,"key")}function aTe(e,t){const n=e[0],r=pi(e),i=+t;return i?i===1?r:n+i*(r-n):n}const axt=1e4;function uTe(e){e=+e||axt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>gn(t,o)||gn(n,o),get:o=>gn(t,o)?t[o]:gn(n,o)?s(o,n[o]):void 0,set:(o,a)=>gn(t,o)?t[o]=a:s(o,a)}}function lTe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function z3(e,t){let n="";for(;--t>=0;)n+=e;return n}function cTe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?z3(i,o)+s:r==="center"?z3(i,~~(o/2))+s+z3(i,Math.ceil(o/2)):s+z3(i,o)}function qR(e){return e&&pi(e)-e[0]||0}function Jt(e){return xt(e)?"["+e.map(Jt)+"]":un(e)||cn(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function rX(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const uxt=e=>Ri(e)||tb(e)?e:Date.parse(e);function iX(e,t){return t=t||uxt,e==null||e===""?null:t(e)}function sX(e){return e==null||e===""?null:e+""}function R0(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function fTe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Cv(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function lxt(e){return e}function cxt(e){if(e==null)return lxt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function fxt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function dxt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return mce(e,n)})}:mce(e,t)}function mce(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=dTe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function dTe(e,t){var n=cxt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&fxt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function hxt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function pxt(e){return dTe(e,mxt.apply(this,arguments))}function mxt(e,t,n){var r,i,s;if(arguments.length>1)r=gxt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:hxt(e,r)}}function gxt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Sl="year",od="quarter",lc="month",fu="week",ad="date",nc="day",hg="dayofyear",ch="hours",fh="minutes",rp="seconds",I0="milliseconds",oX=[Sl,od,lc,fu,ad,nc,hg,ch,fh,rp,I0],vB=oX.reduce((e,t,n)=>(e[t]=1+n,e),{});function aX(e){const t=ln(e).slice(),n={};return t.length||vt("Missing time unit."),t.forEach(i=>{gn(vB,i)?n[i]=1:vt(`Invalid time unit: ${i}.`)}),(n[fu]||n[nc]?1:0)+(n[od]||n[lc]||n[ad]?1:0)+(n[hg]?1:0)>1&&vt(`Incompatible time units: ${e}`),t.sort((i,s)=>vB[i]-vB[s]),t}const yxt={[Sl]:"%Y ",[od]:"Q%q ",[lc]:"%b ",[ad]:"%d ",[fu]:"W%U ",[nc]:"%a ",[hg]:"%j ",[ch]:"%H:00",[fh]:"00:%M",[rp]:":%S",[I0]:".%L",[`${Sl}-${lc}`]:"%Y-%m ",[`${Sl}-${lc}-${ad}`]:"%Y-%m-%d ",[`${ch}-${fh}`]:"%H:%M"};function hTe(e,t){const n=kr({},yxt,t),r=aX(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const m_=new Date;function uX(e){return m_.setFullYear(e),m_.setMonth(0),m_.setDate(1),m_.setHours(0,0,0,0),m_}function pTe(e){return gTe(new Date(e))}function mTe(e){return fV(new Date(e))}function gTe(e){return t1.count(uX(e.getFullYear())-1,e)}function fV(e){return WT.count(uX(e.getFullYear())-1,e)}function dV(e){return uX(e).getDay()}function vxt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function yTe(e){return bTe(new Date(e))}function vTe(e){return hV(new Date(e))}function bTe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return eb.count(t-1,e)}function hV(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return GT.count(t-1,e)}function pV(e){return m_.setTime(Date.UTC(e,0,1)),m_.getUTCDay()}function bxt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function xTe(e,t,n,r,i){const s=t||1,o=pi(e),a=(b,y,x)=>(x=x||b,xxt(n[x],r[x],b===o&&s,y)),u=new Date,l=R0(e),c=l[Sl]?a(Sl):mc(2012),f=l[lc]?a(lc):l[od]?a(od):Lv,d=l[fu]&&l[nc]?a(nc,1,fu+nc):l[fu]?a(fu,1):l[nc]?a(nc,1):l[ad]?a(ad,1):l[hg]?a(hg,1):KT,h=l[ch]?a(ch):Lv,p=l[fh]?a(fh):Lv,m=l[rp]?a(rp):Lv,g=l[I0]?a(I0):Lv;return function(b){u.setTime(+b);const y=c(u);return i(y,f(u),d(u,y),h(u),p(u),m(u),g(u))}}function xxt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function MS(e,t,n){return t+e*7-(n+6)%7}const _xt={[Sl]:e=>e.getFullYear(),[od]:e=>Math.floor(e.getMonth()/3),[lc]:e=>e.getMonth(),[ad]:e=>e.getDate(),[ch]:e=>e.getHours(),[fh]:e=>e.getMinutes(),[rp]:e=>e.getSeconds(),[I0]:e=>e.getMilliseconds(),[hg]:e=>gTe(e),[fu]:e=>fV(e),[fu+nc]:(e,t)=>MS(fV(e),e.getDay(),dV(t)),[nc]:(e,t)=>MS(1,e.getDay(),dV(t))},wxt={[od]:e=>3*e,[fu]:(e,t)=>MS(e,0,dV(t))};function _Te(e,t){return xTe(e,t||1,_xt,wxt,vxt)}const Ext={[Sl]:e=>e.getUTCFullYear(),[od]:e=>Math.floor(e.getUTCMonth()/3),[lc]:e=>e.getUTCMonth(),[ad]:e=>e.getUTCDate(),[ch]:e=>e.getUTCHours(),[fh]:e=>e.getUTCMinutes(),[rp]:e=>e.getUTCSeconds(),[I0]:e=>e.getUTCMilliseconds(),[hg]:e=>bTe(e),[fu]:e=>hV(e),[nc]:(e,t)=>MS(1,e.getUTCDay(),pV(t)),[fu+nc]:(e,t)=>MS(hV(e),e.getUTCDay(),pV(t))},Sxt={[od]:e=>3*e,[fu]:(e,t)=>MS(e,0,pV(t))};function wTe(e,t){return xTe(e,t||1,Ext,Sxt,bxt)}const Txt={[Sl]:cg,[od]:w4.every(3),[lc]:w4,[fu]:WT,[ad]:t1,[nc]:t1,[hg]:t1,[ch]:vM,[fh]:gM,[rp]:Hy,[I0]:PS},Cxt={[Sl]:fg,[od]:E4.every(3),[lc]:E4,[fu]:GT,[ad]:eb,[nc]:eb,[hg]:eb,[ch]:bM,[fh]:yM,[rp]:Hy,[I0]:PS};function ZT(e){return Txt[e]}function eC(e){return Cxt[e]}function ETe(e,t,n){return e?e.offset(t,n):void 0}function STe(e,t,n){return ETe(ZT(e),t,n)}function TTe(e,t,n){return ETe(eC(e),t,n)}function CTe(e,t,n,r){return e?e.range(t,n,r):void 0}function ATe(e,t,n,r){return CTe(ZT(e),t,n,r)}function kTe(e,t,n,r){return CTe(eC(e),t,n,r)}const V3=1e3,H3=V3*60,q3=H3*60,NM=q3*24,Axt=NM*7,gce=NM*30,mV=NM*365,RTe=[Sl,lc,ad,ch,fh,rp,I0],W3=RTe.slice(0,-1),G3=W3.slice(0,-1),Y3=G3.slice(0,-1),kxt=Y3.slice(0,-1),Rxt=[Sl,fu],yce=[Sl,lc],ITe=[Sl],QA=[[W3,1,V3],[W3,5,5*V3],[W3,15,15*V3],[W3,30,30*V3],[G3,1,H3],[G3,5,5*H3],[G3,15,15*H3],[G3,30,30*H3],[Y3,1,q3],[Y3,3,3*q3],[Y3,6,6*q3],[Y3,12,12*q3],[kxt,1,NM],[Rxt,1,Axt],[yce,1,gce],[yce,3,3*gce],[ITe,1,mV]];function PTe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(qR(t))/n;let i=VT(a=>a[2]).right(QA,r),s,o;return i===QA.length?(s=ITe,o=bb(t[0]/mV,t[1]/mV,n)):i?(i=QA[r/QA[i-1][2]<QA[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=RTe,o=Math.max(bb(t[0],t[1],n),1)),{units:s,step:o}}function K3(e){const t={};return n=>t[n]||(t[n]=e(n))}function Ixt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=Pxt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function Pxt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function NTe(e){const t=K3(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Z_(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Ixt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=Z_(o??",f");const a=bb(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=N2e(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=D2e(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=P2e(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let gV;DTe();function DTe(){return gV=NTe({format:lM,formatPrefix:hK})}function OTe(e){return NTe(I2e(e))}function ND(e){return arguments.length?gV=OTe(e):gV}function vce(e,t,n){n=n||{},un(n)||vt(`Invalid time multi-format specifier: ${n}`);const r=t(rp),i=t(fh),s=t(ch),o=t(ad),a=t(fu),u=t(lc),l=t(od),c=t(Sl),f=e(n[I0]||".%L"),d=e(n[rp]||":%S"),h=e(n[fh]||"%I:%M"),p=e(n[ch]||"%I %p"),m=e(n[ad]||n[nc]||"%a %d"),g=e(n[fu]||"%b %d"),b=e(n[lc]||"%B"),y=e(n[od]||"%B"),x=e(n[Sl]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?b:y:x)(w)}function MTe(e){const t=K3(e.format),n=K3(e.utcFormat);return{timeFormat:r=>cn(r)?t(r):vce(t,ZT,r),utcFormat:r=>cn(r)?n(r):vce(n,eC,r),timeParse:K3(e.parse),utcParse:K3(e.utcParse)}}let yV;LTe();function LTe(){return yV=MTe({format:kK,parse:qEe,utcFormat:RK,utcParse:WEe})}function FTe(e){return MTe(jEe(e))}function A4(e){return arguments.length?yV=FTe(e):yV}const vV=(e,t)=>kr({},e,t);function $Te(e,t){const n=e?OTe(e):ND(),r=t?FTe(t):A4();return vV(n,r)}function lX(e,t){const n=arguments.length;return n&&n!==2&&vt("defaultLocale expects either zero or two arguments."),n?vV(ND(e),A4(t)):vV(ND(),A4())}function Nxt(){return DTe(),LTe(),lX()}const Dxt=/^(data:|([A-Za-z]+:)?\/\/)/,Oxt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Mxt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,bce="file://";function Lxt(e,t){return n=>({options:n||{},sanitize:$xt,load:Fxt,fileAccess:!1,file:Bxt(t),http:Uxt(e)})}async function Fxt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function $xt(e,t){t=kr({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=Oxt.test(e.replace(Mxt,""));(e==null||typeof e!="string"||!a)&&vt("Sanitize failure, invalid URI: "+Jt(e));const u=Dxt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(bce))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(bce.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function Bxt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):jxt}async function jxt(){vt("No file system access.")}function Uxt(e){return e?async function(t,n){const r=kr({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?Rr(s[i])?s[i]():s.text():vt(s.status+""+s.statusText)}:zxt}async function zxt(){vt("No HTTP fetch method available.")}const Vxt=e=>e!=null&&e===e,Hxt=e=>e==="true"||e==="false"||e===!0||e===!1,qxt=e=>!Number.isNaN(Date.parse(e)),BTe=e=>!Number.isNaN(+e)&&!(e instanceof Date),Wxt=e=>BTe(e)&&Number.isInteger(+e),bV={boolean:rX,integer:sc,number:sc,date:iX,string:sX,unknown:pc},n5=[Hxt,Wxt,BTe,qxt],Gxt=["boolean","integer","number","date"];function jTe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=n5.length,i=n5.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&Vxt(u)&&!n5[a](u)&&(i[a]=0,++o,o===n5.length))return"string";return Gxt[i.reduce((s,o)=>s===0?o:s,0)-1]}function UTe(e,t){return t.reduce((n,r)=>(n[r]=jTe(e,r),n),{})}function xce(e){const t=function(n,r){const i={delimiter:e};return cX(n,r?kr(r,i):i)};return t.responseType="text",t}function cX(e,t){return t.header&&(e=t.header.map(Jt).join(t.delimiter)+`
`+e),Bht(t.delimiter).parse(e+"")}cX.responseType="text";function Yxt(e){return typeof Buffer=="function"&&Rr(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function fX(e,t){const n=t&&t.property?tp(t.property):pc;return un(e)&&!Yxt(e)?Kxt(n(e),t):n(JSON.parse(e))}fX.responseType="json";function Kxt(e,t){return!xt(e)&&sTe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const Xxt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function zTe(e,t){let n,r,i,s;return e=fX(e,t),t&&t.feature?(n=dxt,i=t.feature):t&&t.mesh?(n=pxt,i=t.mesh,s=Xxt[t.filter]):vt("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):vt("Invalid TopoJSON object: "+i),r&&r.features||[r]}zTe.responseType="json";const AN={dsv:cX,csv:xce(","),tsv:xce("	"),json:fX,topojson:zTe};function dX(e,t){return arguments.length>1?(AN[e]=t,this):gn(AN,e)?AN[e]:null}function VTe(e){const t=dX(e);return t&&t.responseType||"text"}function HTe(e,t,n,r){t=t||{};const i=dX(t.type||"json");return i||vt("Unknown data format type: "+t.type),e=i(e,t),t.parse&&Qxt(e,t.parse,n,r),gn(e,"columns")&&delete e.columns,e}function Qxt(e,t,n,r){if(!e.length)return;const i=A4();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=UTe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!bV[p])throw Error("Illegal format pattern: "+h+":"+p);return bV[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const DM=Lxt(typeof fetch<"u"&&fetch,null);function OM(e){const t=e||pc,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function kN(e,t){try{await t(e)}catch(n){e.error(n)}}const qTe=Symbol("vega_id");let Jxt=1;function MM(e){return!!(e&&Fn(e))}function Fn(e){return e[qTe]}function WTe(e,t){return e[qTe]=t,e}function Vi(e){const t=e===Object(e)?e:{data:e};return Fn(t)?t:WTe(t,Jxt++)}function hX(e){return LM(e,Vi({}))}function LM(e,t){for(const n in e)t[n]=e[n];return t}function GTe(e,t){return WTe(t,Fn(e))}function Ww(e,t){return e?t?(n,r)=>e(n,r)||Fn(t(n))-Fn(t(r)):(n,r)=>e(n,r)||Fn(n)-Fn(r):null}function YTe(e){return e&&e.constructor===Gw}function Gw(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:Gw,insert(a){const u=ln(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=Rr(a)?r:t,l=ln(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:mc(l)};return Rr(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return Rr(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Fn(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Fn(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(y=>{p(y)&&(l[Fn(y)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Fn(m),l[g]?l[g]=1:a.add.push(Vi(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Fn(m)]<0&&a.rem.push(m);function b(y,x,w){w?y[x]=w(y):a.encode=x,o||(c[Fn(y)]=y)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Fn(m)],g>0&&(b(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(y=>{p(y)&&l[Fn(y)]>0&&b(y,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(y=>l[Fn(y)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const RN="_:mod:_";function FM(){Object.defineProperty(this,RN,{writable:!0,value:{}})}FM.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[RN];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=xt(n)?1+n.length:-1),i},modified(e,t){const n=this[RN];if(arguments.length){if(xt(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[RN]={},this}};let Zxt=0;const e_t="pulse",t_t=new FM,n_t=1,r_t=2;function Ts(e,t,n,r){this.id=++Zxt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function _ce(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Ts.prototype={targets(){return this._targets||(this._targets=OM(HR))},set(e){return this.value!==e?(this.value=e,1):0},skip:_ce(n_t),modified:_ce(r_t),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new FM,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Ts?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===e_t)ln(a).forEach(f=>{f instanceof Ts?f!==this&&(f.targets().add(this),s.push(f)):vt("Pulse parameters must be operator instances.")}),this.source=a;else if(xt(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||t_t,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function i_t(e,t,n,r){let i=1,s;return e instanceof Ts?s=e:e&&e.prototype instanceof Ts?s=new e:Rr(e)?s=new Ts(null,e):(i=0,s=new Ts(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function s_t(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let o_t=0;function $M(e,t,n){this.id=++o_t,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function wv(e,t,n){return new $M(e,t,n)}$M.prototype={_filter:np,_apply:pc,targets(){return this._targets||(this._targets=OM(HR))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=wv(e);return this.targets().add(t),t},apply(e){const t=wv(null,e);return this.targets().add(t),t},merge(){const e=wv();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=wv();return this.targets().add(wv(null,null,tX(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(wv(null,null,()=>n=!0)),t.targets().add(wv(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=np,this._targets=null}};function a_t(e,t,n,r){const i=this,s=wv(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=ln(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function u_t(e,t){const n=this.locale();return HTe(e,t,n.timeParse,n.utcParse)}function l_t(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function c_t(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:VTe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function f_t(e,t,n){const r=this,i=r._pending||d_t(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(np).insert(s.data||[])),i.done(),s}function d_t(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const h_t={skip:!0};function p_t(e,t,n,r,i){return(e instanceof Ts?g_t:m_t)(this,e,t,n,r,i),this}function m_t(e,t,n,r,i,s){const o=kr({},s,h_t);let a,u;Rr(n)||(n=mc(n)),r===void 0?a=l=>e.touch(n(l)):Rr(r)?(u=new Ts(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;YTe(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function g_t(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Ts(null,y_t(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function y_t(e,t){return t=Rr(t)?t:mc(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function v_t(e){e.rank=++this._rank}function b_t(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&vt("Cycle detected in dataflow graph.")}const DD={},Tm=1,Av=2,ky=4,x_t=Tm|Av,wce=Tm|ky,Z2=Tm|Av|ky,Ece=8,JA=16,Sce=32,Tce=64;function nb(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function bB(e,t){const n=[];return Cv(e,t,r=>n.push(r)),n}function Cce(e,t){const n={};return e.visit(t,r=>{n[Fn(r)]=1}),r=>n[Fn(r)]?null:r}function r5(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}nb.prototype={StopPropagation:DD,ADD:Tm,REM:Av,MOD:ky,ADD_REM:x_t,ADD_MOD:wce,ALL:Z2,REFLOW:Ece,SOURCE:JA,NO_SOURCE:Sce,NO_FIELDS:Tce,fork(e){return new nb(this.dataflow).init(this,e)},clone(){const e=this.fork(Z2);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Z2|JA)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new nb(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Tce)&&(n.fields=e.fields),t&Tm?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Av?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&ky?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Sce?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Z2;return t&Tm&&this.add.length||t&Av&&this.rem.length||t&ky&&this.mod.length},reflow(e){if(e)return this.fork(Z2).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(ky,Cce(this,Tm))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return xt(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?xt(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Tm&&(n.addF=r5(n.addF,t)),e&Av&&(n.remF=r5(n.remF,t)),e&ky&&(n.modF=r5(n.modF,t)),e&JA&&(n.srcF=r5(n.srcF,t)),n},materialize(e){e=e||Z2;const t=this;return e&Tm&&t.addF&&(t.add=bB(t.add,t.addF),t.addF=null),e&Av&&t.remF&&(t.rem=bB(t.rem,t.remF),t.remF=null),e&ky&&t.modF&&(t.mod=bB(t.mod,t.modF),t.modF=null),e&JA&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&JA)return Cv(n.source,n.srcF,r),n;e&Tm&&Cv(n.add,n.addF,r),e&Av&&Cv(n.rem,n.remF,r),e&ky&&Cv(n.mod,n.modF,r);const i=n.source;if(e&Ece&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Cv(i,Cce(n,wce),r):Cv(i,n.srcF,r))}return n}};function pX(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}en(pX,nb,{fork(e){const t=new nb(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?xt(e)?e.some(r=>n[r]):n[e]:0},filter(){vt("MultiPulse does not support filtering.")},materialize(){vt("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function __t(e,t,n){const r=this,i=[];if(r._pulse)return KTe(r);if(r._pending&&await r._pending,t&&await kN(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new nb(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=OM(HR);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=DD),u!==DD&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await kN(r,c[f].callback)}return n&&await kN(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function w_t(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function E_t(e,t,n){return this._pulse?KTe(this):(this.evaluate(e,t,n),this)}function S_t(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function KTe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function T_t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function C_t(e,t){const n=e.source,r=this._clock;return n&&xt(n)?new pX(this,r,n.map(i=>i.pulse),t):this._input[e.id]||A_t(this._pulse,n&&n.pulse)}function A_t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==DD&&(e.source=t.source),e)}const mX={skip:!1,force:!1};function k_t(e,t){const n=t||mX;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function R_t(e,t,n){const r=n||mX;return(e.set(t)||r.force)&&this.touch(e,r),this}function I_t(e,t,n){this.touch(e,n||mX);const r=new nb(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function P_t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),XTe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,N_t(t,0,e)):r=n,r}}}function XTe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function N_t(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,XTe(e,r,t,n)}function XE(){this.logger(XK()),this.logLevel(YK),this._clock=0,this._rank=0,this._locale=lX();try{this._loader=DM()}catch{}this._touched=OM(HR),this._input={},this._pulse=null,this._heap=P_t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function ZA(e){return function(){return this._log[e].apply(this,arguments)}}XE.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:ZA("error"),warn:ZA("warn"),info:ZA("info"),debug:ZA("debug"),logLevel:ZA("level"),cleanThreshold:1e4,add:i_t,connect:s_t,rank:v_t,rerank:b_t,pulse:I_t,touch:k_t,update:R_t,changeset:Gw,ingest:l_t,parse:u_t,preload:f_t,request:c_t,events:a_t,on:p_t,evaluate:__t,run:E_t,runAsync:w_t,runAfter:S_t,_enqueue:T_t,_getPulse:C_t};function pt(e,t){Ts.call(this,e,null,t)}en(pt,Ts,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const LS={};function QTe(e){const t=JTe(e);return t&&t.Definition||null}function JTe(e){return e=e&&e.toLowerCase(),gn(LS,e)?LS[e]:null}function*ZTe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function gX(e,t,n){const r=Float64Array.from(ZTe(e,n));return r.sort(Zy),t.map(i=>Pwe(r,i))}function yX(e,t){return gX(e,[.25,.5,.75],t)}function vX(e,t){const n=e.length,r=Slt(e,t),i=yX(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function eCe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var ip=Math.random;function D_t(e){ip=e}function tCe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(ZTe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(ip()*s)];c[l]=a/s}return c.sort(Zy),[wz(c,n/2),wz(c,1-n/2)]}function nCe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?O_t(s,t+t/4):s}function O_t(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function M_t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function L_t(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*ip())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const rCe=Math.sqrt(2*Math.PI),F_t=Math.SQRT2;let e3=NaN;function BM(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(e3===e3)n=e3,e3=NaN;else{do n=ip()*2-1,r=ip()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,e3=r*s}return e+n*t}function bX(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*rCe)}function jM(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function UM(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*F_t*$_t(2*e-1)}function $_t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function xX(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>BM(n,r),pdf:s=>bX(s,n,r),cdf:s=>jM(s,n,r),icdf:s=>UM(s,n,r)};return i.mean(e).stdev(t)}function _X(e,t){const n=xX();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=vX(e)),i):t},sample(){return e[~~(ip()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function wX(e,t){return e=e||0,t=t??1,Math.exp(e+BM()*t)}function EX(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*rCe*e)}function SX(e,t,n){return jM(Math.log(e),t,n)}function TX(e,t,n){return Math.exp(UM(e,t,n))}function iCe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>wX(n,r),pdf:s=>EX(s,n,r),cdf:s=>SX(s,n,r),icdf:s=>TX(s,n,r)};return i.mean(e).stdev(t)}function sCe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=ip();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function CX(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*ip()}function AX(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function kX(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function RX(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function oCe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>CX(n,r),pdf:s=>AX(s,n,r),cdf:s=>kX(s,n,r),icdf:s=>RX(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function IX(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function WR(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function zM(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function GR(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function tC(e,t,n,r,i){let s=0,o=0;return GR(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function PX(e,t,n){let r=0,i=0,s=0,o=0,a=0;GR(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=WR(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:tC(e,t,n,i,l)}}function aCe(e,t,n){let r=0,i=0,s=0,o=0,a=0;GR(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=WR(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:tC(e,t,n,i,l)}}function uCe(e,t,n){const[r,i,s,o]=zM(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;GR(e,t,n,(y,x)=>{d=r[f++],h=Math.log(x),p=d*x,a+=(x*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=WR(u/o,a/o,l/o,c/o),b=y=>Math.exp(m+g*(y-s));return{coef:[Math.exp(m-g*s),g],predict:b,rSquared:tC(e,t,n,o,b)}}function lCe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;GR(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=WR(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:tC(e,t,n,a,c)}}function NX(e,t,n){const[r,i,s,o]=zM(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const b=c-u*u,y=u*b-l*l,x=(d*u-f*l)/y,w=(f*b-d*l)/y,S=-x*u,C=R=>(R=R-s,x*R*R+w*R+S+o);return{coef:[S-w*s+x*s*s+o,w-2*x*s,x],predict:C,rSquared:tC(e,t,n,o,C)}}function cCe(e,t,n,r){if(r===0)return IX(e,t,n);if(r===1)return PX(e,t,n);if(r===2)return NX(e,t,n);const[i,s,o,a]=zM(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const b=j_t(c),y=x=>{x-=o;let w=a+b[0]+b[1]*x+b[2]*x*x;for(d=3;d<f;++d)w+=b[d]*Math.pow(x,d);return w};return{coef:B_t(f,b,-o,a),predict:y,rSquared:tC(e,t,n,a,y)}}function B_t(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function j_t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Ace=2,kce=1e-12;function fCe(e,t,n,r){const[i,s,o,a]=zM(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Ace;){const p=[0,l-1];for(let g=0;g<u;++g){const b=i[g],y=p[0],x=p[1],w=b-i[y]>i[x]-b?y:x;let S=0,C=0,R=0,I=0,O=0;const M=1/Math.abs(i[w]-b||1);for(let D=y;D<=x;++D){const B=i[D],z=s[D],G=U_t(Math.abs(b-B)*M)*d[D],Z=B*G;S+=G,C+=Z,R+=z*G,I+=z*Z,O+=B*Z}const[L,H]=WR(C/S,R/S,I/S,O/S);c[g]=L+H*b,f[g]=Math.abs(s[g]-c[g]),z_t(i,g+1,p)}if(h===Ace)break;const m=Nwe(f);if(Math.abs(m)<kce)break;for(let g=0,b,y;g<u;++g)b=f[g]/(6*m),d[g]=b>=1?kce:(y=1-b*b)*y}return V_t(i,c,o,a)}function U_t(e){return(e=1-e*e*e)*e*e}function z_t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function V_t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const H_t=.5*Math.PI/180;function VM(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=q_t(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&W_t(f,m,d,h,p)>H_t?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function q_t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function W_t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function G_t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function xV(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:G_t(e)}function dCe(e,t,n){return n||e+(t?"_"+t:"")}const xB=()=>{},Y_t={init:xB,add:xB,rem:xB,idx:0},k4={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},YR=Object.keys(k4).filter(e=>e!=="__count__");function K_t(e,t){return(n,r)=>kr({name:e,aggregate_param:r,out:n||e},Y_t,t)}[...YR,"__count__"].forEach(e=>{k4[e]=K_t(e,k4[e])});function hCe(e,t,n){return k4[e](n,t)}function pCe(e,t){return e.idx-t.idx}function X_t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=k4[i]())})};return e.forEach(n),Object.values(t).sort(pCe)}function Q_t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function J_t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Z_t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function ewt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function mCe(e,t){const n=t||pc,r=X_t(e),i=e.slice().sort(pCe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=Q_t,s.prototype.add=J_t,s.prototype.rem=Z_t,s.prototype.set=ewt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function DX(e){this._key=e?tp(e):Fn,this.reset()}const Il=DX.prototype;Il.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Il.add=function(e){this._add.push(e)};Il.rem=function(e){this._rem.push(e)};Il.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Il.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",gn(n,s)||(n[s]=1,++i);return i};Il.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=rTe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Il.argmin=function(e){return this.extent(e)[0]||{}};Il.argmax=function(e){return this.extent(e)[1]||{}};Il.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Il.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Il.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=yX(this.values(),e),this._get=e),this._q};Il.q1=function(e){return this.quartile(e)[0]};Il.q2=function(e){return this.quartile(e)[1]};Il.q3=function(e){return this.quartile(e)[2]};Il.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=tCe(this.values(),1e3,.05,e),this._get=e),this._ci};Il.ci0=function(e){return this.ci(e)[0]};Il.ci1=function(e){return this.ci(e)[1]};function wb(e){pt.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}wb.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:YR},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};en(wb,pt,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(y){const x=ln(uc(y)),w=x.length;let S=0,C;for(;S<w;++S)r[C=x[S]]||(r[C]=1,t.push(C))}this._dims=ln(e.groupby),this._dnames=this._dims.map(y=>{const x=Wo(y);return i(y),n.push(x),x}),this.cellkey=e.key?e.key:xV(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,b;for(l!==o.length&&vt("Unmatched number of fields and aggregate ops."),b=0;b<l;++b){if(f=s[b],d=o[b],h=a[b]||null,f==null&&d!=="count"&&vt("Null aggregate field specified."),m=Wo(f),g=dCe(d,m,u[b]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(hCe(d,h,g))}return this._measures=this._measures.map(y=>mCe(y,y.field)),Object.create(null)},cellkey:xV(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new DX),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?GTe(t.tuple,s):Vi(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const twt=1e-14;function OX(e){pt.call(this,null,e)}OX.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};en(OX,pt,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(uc(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=eCe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=sc(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(twt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=dd(u,uc(t),e.name||"bin_"+Wo(t))}});function gCe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?lTe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function MX(e){pt.call(this,[],e)}MX.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};en(MX,pt,{transform(e,t){const n=t.fork(t.ALL),r=gCe(Fn,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Ww(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function yCe(e){Ts.call(this,null,nwt,e)}en(yCe,Ts);function nwt(e){return this.value&&!e.modified()?this.value:eX(e.fields,e.orders)}function LX(e){pt.call(this,null,e)}LX.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function rwt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}en(LX,pt,{transform(e,t){const n=f=>d=>{for(var h=rwt(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Vi({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function FX(e){pt.call(this,null,e)}FX.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};en(FX,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=iwt(a,i,s,e.filter||np)):n.mod=a,n.source=this.value,n.modifies(r)}});function iwt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Vi(s)),s={},s[t]=l);return i}const Rce={kde:_X,mixture:sCe,normal:xX,lognormal:iCe,uniform:oCe},swt="distributions",Ice="function",owt="field";function vCe(e,t){const n=e[Ice];gn(Rce,n)||vt("Unknown distribution function: "+n);const r=Rce[n]();for(const i in e)i===owt?r.data((e.from||t()).map(e[i])):i===swt?r[i](e[i].map(s=>vCe(s,t))):typeof r[i]===Ice&&r[i](e[i]);return r}function $X(e){pt.call(this,null,e)}const bCe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],awt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:bCe},{name:"weights",type:"number",array:!0}]};$X.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:bCe.concat(awt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};en($X,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=vCe(e.distribution,uwt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&vt("Invalid density method: "+o),!e.extent&&!r.data&&vt("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||dg(r.data()),l=VM(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Vi(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function uwt(e){return()=>e.materialize(e.SOURCE).source}function xCe(e,t){return e?e.map((n,r)=>t[r]||Wo(n)):null}function BX(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const _Ce="bin";function jX(e){pt.call(this,null,e)}jX.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:_Ce}]};const lwt=(e,t)=>qR(dg(e,t))/30;en(jX,pt,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=BX(t.source,e.groupby,pc),i=e.smooth||!1,s=e.field,o=e.step||lwt(n,s),a=Ww((p,m)=>s(p)-s(m)),u=e.as||_Ce,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of nCe(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function wCe(e){Ts.call(this,null,cwt,e),this.modified(!0)}en(wCe,Ts);function cwt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:dd(n=>t(n,e),uc(t),Wo(t))}function UX(e){pt.call(this,[void 0,void 0],e)}UX.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};en(UX,pt,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=sc(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Wo(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function zX(e,t){Ts.call(this,e),this.parent=t,this.count=0}en(zX,Ts,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function HM(e){pt.call(this,{},e),this._keys=JT();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}en(HM,pt,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=gn(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new zX(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Fn(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Fn(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Fn(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Fn(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Fn(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function ECe(e){Ts.call(this,null,fwt,e)}en(ECe,Ts);function fwt(e){return this.value&&!e.modified()?this.value:xt(e.name)?ln(e.name).map(t=>tp(t)):tp(e.name,e.as)}function VX(e){pt.call(this,JT(),e)}VX.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};en(VX,pt,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Fn(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Fn(f),1)});function c(f){const d=Fn(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function HX(e){pt.call(this,[],e)}HX.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};en(HX,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=xCe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=hX(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function qX(e){pt.call(this,[],e)}qX.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};en(qX,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Wo),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=hX(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function WX(e){pt.call(this,null,e)}WX.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};en(WX,pt,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function SCe(e){pt.call(this,[],e)}en(SCe,pt,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Vi(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const i5={value:"value",median:Nwe,mean:Plt,min:_z,max:D_},dwt=[];function GX(e){pt.call(this,[],e)}GX.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function hwt(e){var t=e.method||i5.value,n;if(i5[t]==null)vt("Unrecognized imputation method: "+t);else return t===i5.value?(n=e.value!==void 0?e.value:0,()=>n):i5[t]}function pwt(e){const t=e.field;return n=>n?t(n):NaN}en(GX,pt,{transform(e,t){var n=t.fork(t.ALL),r=hwt(e),i=pwt(e),s=Wo(e.field),o=Wo(e.key),a=(e.groupby||[]).map(Wo),u=mwt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,b,y,x,w,S;for(g=0,x=u.length;g<x;++g)for(d=u[g],p=d.values,h=NaN,y=0;y<f;++y)if(d[y]==null){for(m=u.domain[y],S={_impute:!0},b=0,w=p.length;b<w;++b)S[a[b]]=p[b];S[o]=m,S[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Vi(S))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function mwt(e,t,n,r){var i=b=>b(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((b,y)=>a[b]=y+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):dwt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function YX(e){wb.call(this,e)}YX.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:YR},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};en(YX,wb,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{kr(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function KX(e){pt.call(this,null,e)}KX.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};en(KX,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=BX(r,e.groupby,e.field),s=(e.groupby||[]).map(Wo),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&vt("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=dg(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=_X(h,o)[a],m=e.counts?h.length:1,g=c||dg(h);VM(p,g,f,d).forEach(b=>{const y={};for(let x=0;x<s.length;++x)y[s[x]]=h.dims[x];y[u[0]]=b[0],y[u[1]]=b[1]*m,l.push(Vi(y))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function TCe(e){Ts.call(this,null,gwt,e)}en(TCe,Ts);function gwt(e){return this.value&&!e.modified()?this.value:nX(e.fields,e.flat)}function CCe(e){pt.call(this,[],e),this._pending=null}en(CCe,pt,{transform(e,t){const n=t.dataflow;return this._pending?_B(this,t,this._pending):ywt(e)?t.StopPropagation:e.values?_B(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=ln(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>_B(this,t,ln(r.data)))}});function ywt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function _B(e,t,n){n.forEach(Vi);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function XX(e){pt.call(this,{},e)}XX.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};en(XX,pt,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&vt('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&vt('The "as" parameter has too few output field names.'),c=c||i.map(Wo),f=function(p){for(var m=0,g=0,b,y;m<a;++m)if(y=r.get(n[m](p)),y==null)for(b=0;b<d;++b,++g)p[c[g]]=s;else for(b=0;b<d;++b,++g)p[c[g]]=i[b](y)}):(c||vt("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function ACe(e){Ts.call(this,null,vwt,e)}en(ACe,Ts);function vwt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function kCe(e){Ts.call(this,null,bwt,e)}en(kCe,Ts);function bwt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function RCe(e){pt.call(this,null,e)}en(RCe,pt,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function QX(e){wb.call(this,e)}QX.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:YR,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};en(QX,wb,{_transform:wb.prototype.transform,transform(e,t){return this._transform(xwt(e,t),t)}});function xwt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=uc(n).concat(uc(r)),o=wwt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>_wt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function _wt(e,t,n,r){return dd(i=>t(i)===e?n(i):NaN,r,e+"")}function wwt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(PM),t?i.slice(0,t):i}function ICe(e){HM.call(this,e)}en(ICe,HM,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Fn(s),n,t,s);return(e.modified("field")||r&&t.modified(uc(r)))&&vt("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Vi(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function JX(e){pt.call(this,null,e)}JX.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};en(JX,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=xCe(e.fields,e.as||[]),s=r?(a,u)=>Ewt(a,u,r,i):LM;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Fn(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Vi({}));o[Fn(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Fn(a)]))}),n}});function Ewt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function PCe(e){pt.call(this,null,e)}en(PCe,pt,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function ZX(e){pt.call(this,null,e)}ZX.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Swt=1e-14;en(ZX,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=BX(i,e.groupby,e.field),o=(e.groupby||[]).map(Wo),a=[],u=e.step||.01,l=e.probs||Kd(u/2,1-Swt,u),c=l.length;return s.forEach(f=>{const d=gX(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Vi(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function NCe(e){pt.call(this,null,e)}en(NCe,pt,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Fn(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=hX(i);r[Fn(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Fn(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function eQ(e){pt.call(this,[],e),this.count=0}eQ.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};en(eQ,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Fn(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*ip()),d<o.length&&d>=u&&(f=o[d],s[Fn(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Fn(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Fn(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Fn(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Fn(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Fn(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Fn(c)])),this.count=a,this.value=n.source=o,n}});function tQ(e){pt.call(this,null,e)}tQ.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};en(tQ,pt,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Kd(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Vi(s)}),n.add=t.add.concat(this.value),n}});function DCe(e){pt.call(this,null,e),this.modified(!0)}en(DCe,pt,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function nQ(e){pt.call(this,null,e)}const OCe=["unit0","unit1"];nQ.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:oX,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:OCe}]};en(nQ,pt,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?eC:ZT)(s.unit).offset,a=e.as||OCe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(uc(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,b;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=b=s(m),r&&(p[l]=b=o(g,c)),g<f&&(f=g),b>d&&(d=b))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:PTe({extent:e.extent||dg(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=aX(r),o=this.value||{},a=(n?wTe:_Te)(s,i);return a.unit=pi(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function MCe(e){pt.call(this,JT(),e)}en(MCe,pt,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function LCe(e){pt.call(this,null,e)}en(LCe,pt,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Ww(e.sort)):t.source).map(e.field))}});function Twt(e,t,n,r){const i=R4[e](t,n);return{init:i.init||Lv,update:function(s,o){o[r]=i.next(s)}}}const R4={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=R4.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||vt("ntile num must be greater than zero.");const n=R4.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||vt("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Cwt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Cwt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const Awt=Object.keys(R4);function FCe(e){const t=ln(e.ops),n=ln(e.fields),r=ln(e.params),i=ln(e.aggregate_params),s=ln(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){ln(uc(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],b=r[m],y=i[m]||null,x=Wo(g),w=dCe(p,x,s[m]);if(h(g),o.push(w),gn(R4,p))a.push(Twt(p,g,b,w));else{if(g==null&&p!=="count"&&vt("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let S=l[x];S||(S=l[x]=[],S.field=g,f.push(S)),S.push(hCe(p,y,w))}}),(c.length||f.length)&&(this.cell=kwt(f,c,d)),this.inputs=Object.keys(u)}const $Ce=FCe.prototype;$Ce.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};$Ce.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function kwt(e,t,n){e=e.map(u=>mCe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new DX;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function rQ(e){pt.call(this,{},e),this._mlen=0,this._mods=[]}rQ.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Awt.concat(YR)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};en(rQ,pt,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Ww(e.sort),i=xV(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new FCe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)Rwt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=gCe(Fn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Rwt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?VT(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||mc(-1)};t.init();for(let f=0;f<u;++f)Iwt(c,o,f,u),s&&Pwt(c,l),t.update(c,a[f])}function Iwt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Pwt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const Nwt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:wb,bin:OX,collect:MX,compare:yCe,countpattern:LX,cross:FX,density:$X,dotbin:jX,expression:wCe,extent:UX,facet:HM,field:ECe,filter:VX,flatten:HX,fold:qX,formula:WX,generate:SCe,impute:GX,joinaggregate:YX,kde:KX,key:TCe,load:CCe,lookup:XX,multiextent:ACe,multivalues:kCe,params:RCe,pivot:QX,prefacet:ICe,project:JX,proxy:PCe,quantile:ZX,relay:NCe,sample:eQ,sequence:tQ,sieve:DCe,subflow:zX,timeunit:nQ,tupleindex:MCe,values:LCe,window:rQ},Symbol.toStringTag,{value:"Module"}));function rb(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Dwt=()=>typeof Image<"u"?Image:null;function iQ(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const Owt="identity",FS="linear",w1="log",KR="pow",XR="sqrt",qM="symlog",nw="time",rw="utc",Gm="sequential",nC="diverging",$S="quantile",WM="quantize",GM="threshold",sQ="ordinal",_V="point",BCe="band",oQ="bin-ordinal",bu="continuous",QR="discrete",JR="discretizing",mp="interpolating",aQ="temporal";function Mwt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Lwt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function uQ(){const e=wK().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=iQ(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Kd(f).map(b=>m+i*b);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],b,y,x;if(!(m!==m||g!==g)&&(g<m&&(x=m,m=g,g=x),!(g<h[0]||m>r[1-d])))return b=Math.max(0,vb(h,m)-1),y=m===g?b:vb(h,g)-1,m-h[b]>s+1e-10&&++b,d&&(x=b,b=p-y,y=p-x),b>y?void 0:t().slice(b,y+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return uQ().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function jCe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return jCe(t())},e}function Fwt(){return jCe(uQ().paddingInner(1))}var $wt=Array.prototype.map;function Bwt(e){return $wt.call(e,sc)}const jwt=Array.prototype.slice;function UCe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(vb(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Bwt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=jwt.call(r),n):t.slice()},n.tickFormat=function(r,i){return IEe(e[0],pi(e),r??10,i)},n.copy=function(){return UCe().domain(n.domain()).range(n.range())},n}const OD=new Map,zCe=Symbol("vega_scale");function VCe(e){return e[zCe]=!0,e}function Uwt(e){return e&&e[zCe]===!0}function zwt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?Mwt(s):s.invertExtent?Lwt(s):void 0),s.type=e,VCe(s)};return r.metadata=R0(ln(n)),r}function Ii(e,t,n){return arguments.length>1?(OD.set(e,zwt(e,t,n)),this):HCe(e)?OD.get(e):void 0}Ii(Owt,PEe);Ii(FS,mM,bu);Ii(w1,DEe,[bu,w1]);Ii(KR,CK,bu);Ii(XR,qmt,bu);Ii(qM,OEe,bu);Ii(nw,oyt,[bu,aQ]);Ii(rw,ayt,[bu,aQ]);Ii(Gm,PK,[bu,mp]);Ii(`${Gm}-${FS}`,PK,[bu,mp]);Ii(`${Gm}-${w1}`,GEe,[bu,mp,w1]);Ii(`${Gm}-${KR}`,NK,[bu,mp]);Ii(`${Gm}-${XR}`,uyt,[bu,mp]);Ii(`${Gm}-${qM}`,YEe,[bu,mp]);Ii(`${nC}-${FS}`,KEe,[bu,mp]);Ii(`${nC}-${w1}`,XEe,[bu,mp,w1]);Ii(`${nC}-${KR}`,DK,[bu,mp]);Ii(`${nC}-${XR}`,lyt,[bu,mp]);Ii(`${nC}-${qM}`,QEe,[bu,mp]);Ii($S,MEe,[JR,$S]);Ii(WM,LEe,JR);Ii(GM,FEe,JR);Ii(oQ,UCe,[QR,JR]);Ii(sQ,wK,QR);Ii(BCe,uQ,QR);Ii(_V,Fwt,QR);function HCe(e){return OD.has(e)}function Yw(e,t){const n=OD.get(e);return n&&n.metadata[t]}function lQ(e){return Yw(e,bu)}function BS(e){return Yw(e,QR)}function wV(e){return Yw(e,JR)}function qCe(e){return Yw(e,w1)}function Vwt(e){return Yw(e,aQ)}function WCe(e){return Yw(e,mp)}function GCe(e){return Yw(e,$S)}const Hwt=["clamp","base","constant","exponent"];function YCe(e,t){const n=t[0],r=pi(t)-n;return function(i){return e(n+i*r)}}function YM(e,t,n){return iK(cQ(t||"rgb",n),e)}function KCe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function XCe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?mc(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=Ii(s)().domain([t,n]).range([0,1]),Hwt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function cQ(e,t){const n=edt[qwt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function qwt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Wwt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Gwt={accent:fyt,category10:cyt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:dyt,observable10:hyt,paired:pyt,pastel1:myt,pastel2:gyt,set1:yyt,set2:vyt,set3:byt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function QCe(e){if(xt(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function JCe(e,t){for(const n in e)fQ(n,t(e[n]))}const Pce={};JCe(Gwt,QCe);JCe(Wwt,e=>YM(QCe(e)));function fQ(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Pce[e]=t,this):Pce[e]}const IN="symbol",Ywt="discrete",Kwt="gradient",Xwt=e=>xt(e)?e.map(t=>String(t)):String(e),Qwt=(e,t)=>e[1]-t[1],Jwt=(e,t)=>t[1]-e[1];function dQ(e,t,n){let r;return Ri(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(qR(e.domain())/n||1)+1))),un(t)&&(r=t.step,t=t.interval),cn(t)&&(t=e.type===nw?ZT(t):e.type==rw?eC(t):vt("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function ZCe(e,t,n){let r=e.range(),i=r[0],s=pi(r),o=Qwt;if(i>s&&(r=s,s=i,i=r,o=Jwt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],pi(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function hQ(e,t){return e.bins?ZCe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function eAe(e,t,n,r,i,s){const o=t.type;let a=Xwt;if(o===nw||i===nw)a=e.timeFormat(r);else if(o===rw||i===rw)a=e.utcFormat(r);else if(qCe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=tAe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function tAe(e,t,n){const r=hQ(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const EV={[$S]:"quantiles",[WM]:"thresholds",[GM]:"domain"},nAe={[$S]:"quantiles",[WM]:"domain"};function rAe(e,t){return e.bins?t2t(e.bins):e.type===w1?tAe(e,t,!0):EV[e.type]?e2t(e[EV[e.type]]()):hQ(e,t)}function Zwt(e,t,n){const r=t[nAe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function e2t(e){const t=[-1/0].concat(e);return t.max=1/0,t}function t2t(e){const t=e.slice(0,-1);return t.max=pi(e),t}const n2t=e=>EV[e.type]||e.bins;function iAe(e,t,n,r,i,s,o){const a=nAe[t.type]&&s!==nw&&s!==rw?Zwt(e,t,i):eAe(e,t,n,i,s,o);return r===IN&&n2t(t)?r2t(a):r===Ywt?i2t(a):s2t(a)}const r2t=e=>(t,n,r)=>{const i=Nce(r[n+1],Nce(r.max,1/0)),s=Dce(t,e),o=Dce(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},Nce=(e,t)=>e??t,i2t=e=>(t,n)=>n?e(t):null,s2t=e=>t=>e(t),Dce=(e,t)=>Number.isFinite(e)?t(e):null;function o2t(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+pi(t),s=i-r;if(e.type===GM){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function a2t(e,t,n,r){const i=r||t.type;return cn(n)&&Vwt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===nw?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===rw?e.utcFormat("%A, %d %B %Y, %X UTC"):iAe(e,t,5,null,n,r,!0)}function sAe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=a2t(e,t,n.format,n.formatType);if(wV(t.type)){const s=rAe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(BS(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(pi(s))}`}}let oAe=0;function u2t(){oAe=0}const MD="p_";function pQ(e){return e&&e.gradient}function aAe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?MD:"";return i||(i=e.id="gradient_"+oAe++,r==="radial"?(e.x1=bm(e.x1,.5),e.y1=bm(e.y1,.5),e.r1=bm(e.r1,0),e.x2=bm(e.x2,.5),e.y2=bm(e.y2,.5),e.r2=bm(e.r2,.5),s=MD):(e.x1=bm(e.x1,0),e.y1=bm(e.y1,0),e.x2=bm(e.x2,1),e.y2=bm(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function bm(e,t){return e??t}function uAe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Oce={basis:{curve:Pyt},"basis-closed":{curve:Nyt},"basis-open":{curve:Dyt},bundle:{curve:Oyt,tension:"beta",value:.85},cardinal:{curve:Myt,tension:"tension",value:0},"cardinal-open":{curve:Fyt,tension:"tension",value:0},"cardinal-closed":{curve:Lyt,tension:"tension",value:0},"catmull-rom":{curve:$yt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Byt,tension:"alpha",value:.5},"catmull-rom-open":{curve:jyt,tension:"alpha",value:.5},linear:{curve:OK},"linear-closed":{curve:Uyt},monotone:{horizontal:Vyt,vertical:zyt},natural:{curve:Hyt},step:{curve:qyt},"step-after":{curve:Gyt},"step-before":{curve:Wyt}};function mQ(e,t,n){var r=gn(Oce,e)&&Oce[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const l2t={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},c2t=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,f2t=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,d2t=/^((\s+,?\s*)|(,\s*))/,h2t=/^[01]/;function jS(e){const t=[];return(e.match(c2t)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=l2t[s],a=p2t(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function p2t(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?h2t:f2t,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(d2t);u!==null&&(i+=u[0].length)}return r}const Eb=Math.PI/180,m2t=1e-14,g_=Math.PI/2,Dm=Math.PI*2,eE=Math.sqrt(3)/2;var wB={},EB={},lAe=[].join;function g2t(e,t,n,r,i,s,o,a,u){const l=lAe.call(arguments);if(wB[l])return wB[l];const c=o*Eb,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,b=f/n,y=-f/r,x=d/r,w=g*a+b*u,S=y*a+x*u,C=g*e+b*t,R=y*e+x*t;let O=1/((C-w)*(C-w)+(R-S)*(R-S))-.25;O<0&&(O=0);let M=Math.sqrt(O);s==i&&(M=-M);const L=.5*(w+C)-M*(R-S),H=.5*(S+R)+M*(C-w),D=Math.atan2(S-H,w-L);let z=Math.atan2(R-H,C-L)-D;z<0&&s===1?z+=Dm:z>0&&s===0&&(z-=Dm);const G=Math.ceil(Math.abs(z/(g_+.001))),Z=[];for(let ne=0;ne<G;++ne){const ue=D+ne*z/G,X=D+(ne+1)*z/G;Z[ne]=[L,H,ue,X,n,r,f,d]}return wB[l]=Z}function y2t(e){const t=lAe.call(e);if(EB[t])return EB[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),b=Math.sin(s),y=.5*(s-i),x=Math.sin(y*.5),w=8/3*x*x/Math.sin(y),S=n+p-w*m,C=r+m+w*p,R=n+g,I=r+b,O=R+w*b,M=I-w*g;return EB[t]=[c*S+f*C,d*S+h*C,c*O+f*M,d*O+h*M,c*R+f*I,d*R+h*I]}const Uh=["l",0,0,0,0,0,0,0];function v2t(e,t,n){const r=Uh[0]=e[0];if(r==="a"||r==="A")Uh[1]=t*e[1],Uh[2]=n*e[2],Uh[3]=e[3],Uh[4]=e[4],Uh[5]=e[5],Uh[6]=t*e[6],Uh[7]=n*e[7];else if(r==="h"||r==="H")Uh[1]=t*e[1];else if(r==="v"||r==="V")Uh[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Uh[i]=(i%2==1?t:n)*e[i];return Uh}function I4(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,b=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var y=0,x=t.length;y<x;++y){switch(o=t[y],(i!==1||s!==1)&&(o=v2t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,b=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,b=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":Mce(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":Mce(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=b,e.closePath();break}a=o}}function Mce(e,t,n,r){const i=g2t(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=y2t(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Lce=.5773502691896257,Fce={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Dm)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=eE*n,i=r-n*Lce,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=eE*n,i=r-n*Lce;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=eE*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=eE*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=eE*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=eE*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function cAe(e){return gn(Fce,e)?Fce[e]:b2t(e)}var SB={};function b2t(e){if(!gn(SB,e)){const t=jS(e);SB[e]={draw:function(n,r){I4(n,t,0,0,Math.sqrt(r)/2)}}}return SB[e]}const yv=.448084975506;function x2t(e){return e.x}function _2t(e){return e.y}function w2t(e){return e.width}function E2t(e){return e.height}function xy(e){return typeof e=="function"?e:()=>+e}function s5(e,t,n){return Math.max(t,Math.min(e,n))}function fAe(){var e=x2t,t=_2t,n=w2t,r=E2t,i=xy(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),b=+r.call(this,c),y=Math.min(g,b)/2,x=s5(+i.call(this,c),0,y),w=s5(+s.call(this,c),0,y),S=s5(+o.call(this,c),0,y),C=s5(+a.call(this,c),0,y);if(u||(u=h=uM()),x<=0&&w<=0&&S<=0&&C<=0)u.rect(p,m,g,b);else{var R=p+g,I=m+b;u.moveTo(p+x,m),u.lineTo(R-w,m),u.bezierCurveTo(R-yv*w,m,R,m+yv*w,R,m+w),u.lineTo(R,I-C),u.bezierCurveTo(R,I-yv*C,R-yv*C,I,R-C,I),u.lineTo(p+S,I),u.bezierCurveTo(p+yv*S,I,p,I-yv*S,p,I-S),u.lineTo(p,m+x),u.bezierCurveTo(p,m+yv*x,p+yv*x,m,p+x,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=xy(c),l):e},l.y=function(c){return arguments.length?(t=xy(c),l):t},l.width=function(c){return arguments.length?(n=xy(c),l):n},l.height=function(c){return arguments.length?(r=xy(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=xy(c),s=f!=null?xy(f):i,a=d!=null?xy(d):i,o=h!=null?xy(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function dAe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var b=Math.hypot(m,g),y=(m/=b)*u,x=(g/=b)*u,w=Math.atan2(g,m);i.moveTo(o-y,a-x),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+y,a+x),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,Dm);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=uM()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function ZR(e,t){return e??t}const eI=e=>e.x||0,tI=e=>e.y||0,S2t=e=>e.width||0,T2t=e=>e.height||0,C2t=e=>(e.x||0)+(e.width||0),A2t=e=>(e.y||0)+(e.height||0),k2t=e=>e.startAngle||0,R2t=e=>e.endAngle||0,I2t=e=>e.padAngle||0,P2t=e=>e.innerRadius||0,N2t=e=>e.outerRadius||0,D2t=e=>e.cornerRadius||0,O2t=e=>ZR(e.cornerRadiusTopLeft,e.cornerRadius)||0,M2t=e=>ZR(e.cornerRadiusTopRight,e.cornerRadius)||0,L2t=e=>ZR(e.cornerRadiusBottomRight,e.cornerRadius)||0,F2t=e=>ZR(e.cornerRadiusBottomLeft,e.cornerRadius)||0,$2t=e=>ZR(e.size,64),B2t=e=>e.size||1,KM=e=>e.defined!==!1,j2t=e=>cAe(e.shape||"circle"),U2t=kyt().startAngle(k2t).endAngle(R2t).padAngle(I2t).innerRadius(P2t).outerRadius(N2t).cornerRadius(D2t),z2t=iSe().x(eI).y1(tI).y0(A2t).defined(KM),V2t=iSe().y(tI).x1(eI).x0(C2t).defined(KM),H2t=rSe().x(eI).y(tI).defined(KM),q2t=fAe().x(eI).y(tI).width(S2t).height(T2t).cornerRadius(O2t,M2t,L2t,F2t),W2t=Iyt().type(j2t).size($2t),G2t=dAe().x(eI).y(tI).defined(KM).size(B2t);function gQ(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Y2t(e,t){return U2t.context(e)(t)}function K2t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?V2t:z2t).curve(mQ(r,n.orient,n.tension)).context(e)(t)}function X2t(e,t){const n=t[0],r=n.interpolate||"linear";return H2t.curve(mQ(r,n.orient,n.tension)).context(e)(t)}function rC(e,t,n,r){return q2t.context(e)(t,n,r)}function Q2t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function J2t(e,t){return W2t.context(e)(t)}function Z2t(e,t){return G2t.context(e)(t)}var hAe=1;function pAe(){hAe=1}function yQ(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+hAe++),o=i.clipping[s]||(i.clipping[s]={id:s});return Rr(r)?o.path=r(null):gQ(n)?o.path=rC(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function qa(e){this.clear(),e&&this.union(e)}qa.prototype={clone(){return new qa(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function XM(e){this.mark=e,this.bounds=this.bounds||new qa}function QM(e){XM.call(this,e),this.items=this.items||[]}en(QM,XM);class mAe{constructor(t){this._pending=0,this._loader=t||DM()}pending(){return this._pending}sanitizeURL(t){const n=this;return $ce(n),n._loader.sanitize(t,{context:"href"}).then(r=>(t3(n),r)).catch(()=>(t3(n),null))}loadImage(t){const n=this,r=Dwt();return $ce(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=gn(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>t3(n),o.onerror=()=>t3(n),o.src=s,o}).catch(i=>(t3(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function $ce(e){e._pending+=1}function t3(e){e._pending-=1}function O1(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?eEt(t,r):0))}return e}function eEt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const tEt=Dm-1e-8;let JM,PN,NN,k_,SV,DN,TV,CV;const jv=(e,t)=>JM.add(e,t),ON=(e,t)=>jv(PN=e,NN=t),Bce=e=>jv(e,JM.y1),jce=e=>jv(JM.x1,e),y_=(e,t)=>SV*e+TV*t,v_=(e,t)=>DN*e+CV*t,TB=(e,t)=>jv(y_(e,t),v_(e,t)),CB=(e,t)=>ON(y_(e,t),v_(e,t));function nI(e,t){return JM=e,t?(k_=t*Eb,SV=CV=Math.cos(k_),DN=Math.sin(k_),TV=-DN):(SV=CV=1,k_=DN=TV=0),nEt}const nEt={beginPath(){},closePath(){},moveTo:CB,lineTo:CB,rect(e,t,n,r){k_?(TB(e+n,t),TB(e+n,t+r),TB(e,t+r),CB(e,t)):(jv(e+n,t+r),ON(e,t))},quadraticCurveTo(e,t,n,r){const i=y_(e,t),s=v_(e,t),o=y_(n,r),a=v_(n,r);Uce(PN,i,o,Bce),Uce(NN,s,a,jce),ON(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=y_(e,t),a=v_(e,t),u=y_(n,r),l=v_(n,r),c=y_(i,s),f=v_(i,s);zce(PN,o,u,c,Bce),zce(NN,a,l,f,jce),ON(c,f)},arc(e,t,n,r,i,s){if(r+=k_,i+=k_,PN=n*Math.cos(i)+e,NN=n*Math.sin(i)+t,Math.abs(i-r)>tEt)jv(e-n,t-n),jv(e+n,t+n);else{const o=l=>jv(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Dm,r<0&&(r+=Dm),i=i%Dm,i<0&&(i+=Dm),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Dm,a=r-r%g_,u=0;u<4&&a>i;++u,a-=g_)o(a);else for(a=r-r%g_+g_,u=0;u<4&&a<i;++u,a=a+g_)o(a)}}};function Uce(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function zce(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>m2t?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(Vce(u,e,t,n,r)),0<l&&l<1&&i(Vce(l,e,t,n,r))}function Vce(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var ib=(ib=rb(1,1))?ib.getContext("2d"):null;const AV=new qa;function vQ(e){return function(t,n){if(!ib)return!0;e(ib,t),AV.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=AV;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(ib.isPointInPath(u,a))return!0;return!1}}function bQ(e,t){return t.contains(e.x||0,e.y||0)}function gAe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(AV.set(n,r,n+i,r+s))}function yAe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return NE(t,n,r,i,s)}function NE(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function US(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Jp(e,t){return e??t}function Hce(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function rEt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Jp(t.x1,.5)*r,n.y1+Jp(t.y1,.5)*i,Math.max(r,i)*Jp(t.r1,0),n.x1+Jp(t.x2,.5)*r,n.y1+Jp(t.y2,.5)*i,Math.max(r,i)*Jp(t.r2,.5));else{const o=Jp(t.x1,0),a=Jp(t.y1,0),u=Jp(t.x2,1),l=Jp(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=rb(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Hce(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Hce(s,t.stops)}function vAe(e,t,n){return pQ(n)?rEt(e,n,t.bounds):n}function LD(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=vAe(e,t,t.fill),!0):!1}var iEt=[];function zS(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=vAe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||iEt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function sEt(e,t){return e.zindex-t.zindex||e.index-t.index}function xQ(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(sEt)}function P0(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=xQ(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function FD(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=xQ(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function _Q(e){return function(t,n,r){P0(n,i=>{(!r||r.intersects(i.bounds))&&bAe(e,t,i,i)})}}function oEt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&bAe(e,t,n.items[0],n.items)}}function bAe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(US(t,n),n.fill&&LD(t,n,i)&&t.fill(),n.stroke&&zS(t,n,i)&&t.stroke()))}function ZM(e){return e=e||np,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,FD(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function rI(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function wQ(e){return ZM(rI(e))}function F_(e,t){return"translate("+e+","+t+")"}function EQ(e){return"rotate("+e+")"}function aEt(e,t){return"scale("+e+","+t+")"}function xAe(e){return F_(e.x||0,e.y||0)}function uEt(e){return F_(e.x||0,e.y||0)+(e.angle?" "+EQ(e.angle):"")}function lEt(e){return F_(e.x||0,e.y||0)+(e.angle?" "+EQ(e.angle):"")+(e.scaleX||e.scaleY?" "+aEt(e.scaleX||1,e.scaleY||1):"")}function SQ(e,t,n){function r(o,a){o("transform",uEt(a)),o("d",t(null,a))}function i(o,a){return t(nI(o,a.angle),a),O1(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Eb),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:_Q(s),pick:wQ(s),isect:n||vQ(s)}}var cEt=SQ("arc",Y2t);function fEt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function dEt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function hEt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function TQ(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(nI(u),c),O1(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=rI(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:oEt(s),pick:a,isect:bQ,tip:n}}var pEt=TQ("area",K2t,fEt);function mEt(e,t){var n=t.clip;e.save(),Rr(n)?(e.beginPath(),n(e),e.clip()):_Ae(e,t.group)}function _Ae(e,t){e.beginPath(),gQ(t)?rC(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function wAe(e){const t=Jp(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function gEt(e,t){e("transform",xAe(t))}function EAe(e,t){const n=wAe(t);e("d",rC(null,t,n,n))}function yEt(e,t){e("class","background"),e("aria-hidden",!0),EAe(e,t)}function vEt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?EAe(e,t):e("d","")}function bEt(e,t,n){const r=t.clip?yQ(n,t,t):null;e("clip-path",r)}function xEt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),O1(e,t),e.translate(t.x||0,t.y||0)}function P4(e,t,n,r){const i=wAe(t);e.beginPath(),rC(e,t,(n||0)+i,(r||0)+i)}const _Et=rI(P4),wEt=rI(P4,!1),EEt=rI(P4,!0);function SEt(e,t,n,r){P0(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(P4(e,i,s,o),US(e,i),i.fill&&LD(e,i,u)&&e.fill(),i.stroke&&!a&&zS(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&_Ae(e,i),n&&n.translate(-s,-o),P0(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(P4(e,i,s,o),US(e,i),zS(e,i,u)&&e.stroke())})}function TEt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return FD(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&gQ(u)&&!EEt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,b=t.interactive!==!1;return b&&g&&u.stroke&&wEt(e,u,o,a)?(e.restore(),u):(l=FD(u,y=>CEt(y,c,f)?this.pick(y,n,r,c,f):null),!l&&b&&(u.fill||!g&&u.stroke)&&_Et(e,u,o,a)&&(l=u),e.restore(),l||null)})}function CEt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var AEt={type:"group",tag:"g",nested:!1,attr:gEt,bound:xEt,draw:SEt,pick:TEt,isect:gAe,content:bEt,background:yEt,foreground:vEt},N4={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function CQ(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function AQ(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function kQ(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function eL(e,t){return e==="center"?t/2:e==="right"?t:0}function tL(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function kEt(e,t,n){const r=CQ(t,n),i=AQ(t,r),s=kQ(t,r),o=(t.x||0)-eL(t.align,i),a=(t.y||0)-tL(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,N4["xmlns:xlink"],"xlink:href"),e("transform",F_(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function REt(e,t){const n=t.image,r=AQ(t,n),i=kQ(t,n),s=(t.x||0)-eL(t.align,r),o=(t.y||0)-tL(t.baseline,i);return e.set(s,o,s+r,o+i)}function IEt(e,t,n){P0(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=CQ(r,this);let s=AQ(r,i),o=kQ(r,i);if(s===0||o===0)return;let a=(r.x||0)-eL(r.align,s),u=(r.y||0)-tL(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(US(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var PEt={type:"image",tag:"image",nested:!1,attr:kEt,bound:REt,draw:IEt,pick:ZM(),isect:np,get:CQ,xOffset:eL,yOffset:tL},NEt=TQ("line",X2t,dEt);function DEt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",lEt(t)),e("d",t.path)}function MN(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Eb,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=jS(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),I4(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):I4(e,u,r,i,s,o)}function OEt(e,t){return MN(nI(e,t.angle),t)?e.set(0,0,0,0):O1(e,t,!0)}var MEt={type:"path",tag:"path",nested:!1,attr:DEt,bound:OEt,draw:_Q(MN),pick:wQ(MN),isect:vQ(MN)};function LEt(e,t){e("d",rC(null,t))}function FEt(e,t){var n,r;return O1(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function qce(e,t){e.beginPath(),rC(e,t)}var $Et={type:"rect",tag:"path",nested:!1,attr:LEt,bound:FEt,draw:_Q(qce),pick:wQ(qce),isect:gAe};function BEt(e,t){e("transform",xAe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function jEt(e,t){var n,r;return O1(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function SAe(e,t,n){var r,i,s,o;return t.stroke&&zS(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function UEt(e,t,n){P0(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&SAe(e,r,i)&&(US(e,r),e.stroke())}})}function zEt(e,t,n,r){return e.isPointInStroke?SAe(e,t,1)&&e.isPointInStroke(n,r):!1}var VEt={type:"rule",tag:"line",nested:!1,attr:BEt,bound:jEt,draw:UEt,pick:ZM(zEt),isect:yAe},HEt=SQ("shape",Q2t),qEt=SQ("symbol",J2t,bQ);const Wce=uTe();var nh={height:kg,measureWidth:RQ,estimateWidth:$D,width:$D,canvas:TAe};TAe(!0);function TAe(e){nh.width=e&&ib?RQ:$D}function $D(e,t){return CAe(Tb(e,t),kg(e))}function CAe(e,t){return~~(.8*e.length*t)}function RQ(e,t){return kg(e)<=0||!(t=Tb(e,t))?0:AAe(t,nL(e))}function AAe(e,t){const n=`(${t}) ${e}`;let r=Wce.get(n);return r===void 0&&(ib.font=t,r=ib.measureText(e).width,Wce.set(n,r)),r}function kg(e){return e.fontSize!=null?+e.fontSize||0:11}function Sb(e){return e.lineHeight!=null?e.lineHeight:kg(e)+2}function WEt(e){return xt(e)?e.length>1?e:e[0]:e}function iI(e){return WEt(e.lineBreak&&e.text&&!xt(e.text)?e.text.split(e.lineBreak):e.text)}function IQ(e){const t=iI(e);return(xt(t)?t.length-1:0)*Sb(e)}function Tb(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?YEt(e,n):n}function GEt(e){if(nh.width===RQ){const t=nL(e);return n=>AAe(n,t)}else if(nh.width===$D){const t=kg(e);return n=>CAe(n,t)}else return t=>nh.width(e,t)}function YEt(e,t){var n=+e.limit,r=GEt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function sI(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function nL(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+kg(e)+"px "+sI(e,t)}function PQ(e){var t=e.baseline,n=kg(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Sb(e):t==="line-bottom"?.29*n-.5*Sb(e):0)}const KEt={left:"start",center:"middle",right:"end"},Ik=new qa;function rL(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-g_,t+=r*Math.cos(i),n+=r*Math.sin(i)),Ik.x1=t,Ik.y1=n,Ik}function XEt(e,t){var n=t.dx||0,r=(t.dy||0)+PQ(t),i=rL(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",KEt[t.align]||"start"),a?(u=F_(s,o)+" "+EQ(a),(n||r)&&(u+=" "+F_(n,r))):u=F_(s+n,o+r),e("transform",u)}function NQ(e,t,n){var r=nh.height(t),i=t.align,s=rL(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+PQ(t)-Math.round(.8*r),c=iI(t),f;if(xt(c)?(r+=Sb(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,nh.width(t,h)),0)):f=nh.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Eb,o,a);else if(n===2)return e.rotatedPoints(t.angle*Eb,o,a);return e}function QEt(e,t,n){P0(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=nL(r),e.textAlign=r.align||"left",s=rL(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Eb),o=a=0),o+=r.dx||0,a+=(r.dy||0)+PQ(r),c=iI(r),US(e,r),xt(c))for(l=Sb(r),u=0;u<c.length;++u)f=Tb(r,c[u]),r.fill&&LD(e,r,i)&&e.fillText(f,o,a),r.stroke&&zS(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=Tb(r,c),r.fill&&LD(e,r,i)&&e.fillText(f,o,a),r.stroke&&zS(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function JEt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=rL(t),a=o.x1,u=o.y1,l=NQ(Ik,t,1),c=-t.angle*Eb,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function ZEt(e,t){const n=NQ(Ik,e,2);return NE(t,n[0],n[1],n[2],n[3])||NE(t,n[0],n[1],n[4],n[5])||NE(t,n[4],n[5],n[6],n[7])||NE(t,n[2],n[3],n[6],n[7])}var eSt={type:"text",tag:"text",nested:!1,attr:XEt,bound:NQ,draw:QEt,pick:ZM(JEt),isect:ZEt},tSt=TQ("trail",Z2t,hEt),dh={arc:cEt,area:pEt,group:AEt,image:PEt,line:NEt,path:MEt,rect:$Et,rule:VEt,shape:HEt,symbol:qEt,text:eSt,trail:tSt};function kV(e,t,n){var r=dh[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new qa),e,n)}var Gce={mark:null};function kAe(e,t,n){var r=dh[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Gce.mark=e,l=Gce),c=kV(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new qa,o)for(a=0,u=s.length;a<u;++a)t.union(kV(s[a],i,n));return e.bounds=t}const nSt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function RAe(e,t){return JSON.stringify(e,nSt,t)}function IAe(e){const t=typeof e=="string"?JSON.parse(e):e;return PAe(t)}function PAe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&PAe(n[i]);return t&&kAe(e),e}class NAe{constructor(t){arguments.length?this.root=IAe(t):(this.root=Yce({marktype:"group",name:"root",role:"frame"}),this.root.items=[new QM(this.root)])}toJSON(t){return RAe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Yce(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Yce(e,t){const n={bounds:new qa,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Uv(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function DQ(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function cu(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Uv(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function qh(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function DAe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function iL(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function rSt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=dh[i.marktype]).tip){for(o=iL(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let OQ=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||DM(),this._tooltip=n||iSt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Uv(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=rSt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function iSt(e,t,n,r){e.element().setAttribute("title",r||"")}class oI{constructor(t){this._el=null,this._bgcolor=null,this._loader=new mAe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const sSt="keydown",oSt="keypress",aSt="keyup",OAe="dragenter",LN="dragleave",MAe="dragover",RV="pointerdown",uSt="pointerup",BD="pointermove",FN="pointerout",LAe="pointerover",IV="mousedown",lSt="mouseup",FAe="mousemove",jD="mouseout",$Ae="mouseover",UD="click",cSt="dblclick",fSt="wheel",BAe="mousewheel",zD="touchstart",VD="touchmove",HD="touchend",dSt=[sSt,oSt,aSt,OAe,LN,MAe,RV,uSt,BD,FN,LAe,IV,lSt,FAe,jD,$Ae,UD,cSt,fSt,BAe,zD,VD,HD],PV=BD,Pk=jD,NV=UD;class aI extends OQ{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=dSt,this.pointermove=Xce([BD,FAe],[LAe,$Ae],[FN,jD]),this.dragover=Xce([MAe],[OAe],[LN]),this.pointerout=Qce([FN,jD]),this.dragleave=Qce([LN])}initialize(t,n,r){return this._canvas=t&&DQ(t,"canvas"),[UD,IV,RV,BD,FN,LN].forEach(i=>Kce(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(BAe,t)}pointerdown(t){this._down=this._active,this.fire(RV,t)}mousedown(t){this._down=this._active,this.fire(IV,t)}click(t){this._down===this._active&&(this.fire(UD,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(zD,t,!0)}touchmove(t){this.fire(VD,t,!0)}touchend(t){this.fire(HD,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===NV&&i&&i.href?this.handleHref(n,i,i.href):(t===PV||t===Pk)&&this.handleTooltip(n,i,t!==Pk),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Kce(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=iL(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return dh[t.marktype].pick.call(this,o,t,n,r,i,s)}}const hSt=e=>e===zD||e===VD||e===HD?[zD,VD,HD]:[e];function Kce(e,t){hSt(t).forEach(n=>pSt(e,n))}function pSt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function X3(e,t,n){t.forEach(r=>e.fire(r,n))}function Xce(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?X3(this,e,r):((!i||!i.exit)&&X3(this,n,r),this._active=s,X3(this,t,r),X3(this,e,r))}}function Qce(e){return function(t){X3(this,e,t),this._active=null}}function mSt(){return typeof window<"u"&&window.devicePixelRatio||1}function gSt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?mSt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class qD extends oI{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new qa,this._tempb=new qa}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:rb(1,1,this._options.type),t&&this._canvas&&(qh(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)gSt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||vt("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=ySt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):vSt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=dh[n.marktype];n.clip&&mEt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const ySt=(e,t,n)=>new qa().set(0,0,t,n).translate(-e[0],-e[1]);function vSt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class jAe extends OQ{constructor(t,n){super(t,n);const r=this;r._hrefHandler=AB(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=AB(r,(i,s)=>{r.handleTooltip(i,s,i.type!==Pk)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(NV,this._hrefHandler),i.removeEventListener(PV,this._tooltipHandler),i.removeEventListener(Pk,this._tooltipHandler)),this._svg=i=t&&DQ(t,"svg"),i&&(i.addEventListener(NV,this._hrefHandler),i.addEventListener(PV,this._tooltipHandler),i.addEventListener(Pk,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:AB(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const AB=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},UAe="aria-hidden",MQ="aria-label",LQ="role",FQ="aria-roledescription",zAe="graphics-object",$Q="graphics-symbol",VAe=(e,t,n)=>({[LQ]:e,[FQ]:t,[MQ]:n||void 0}),bSt=R0(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Jce={axis:{desc:"axis",caption:wSt},legend:{desc:"legend",caption:ESt},"title-text":{desc:"title",caption:e=>`Title text '${efe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${efe(e)}'`}},Zce={ariaRole:LQ,ariaRoleDescription:FQ,description:MQ};function HAe(e,t){const n=t.aria===!1;if(e(UAe,n||void 0),n||t.description==null)for(const r in Zce)e(Zce[r],void 0);else{const r=t.mark.marktype;e(MQ,t.description),e(LQ,t.ariaRole||(r==="group"?zAe:$Q)),e(FQ,t.ariaRoleDescription||`${r} mark`)}}function qAe(e){return e.aria===!1?{[UAe]:!0}:bSt[e.role]?null:Jce[e.role]?_St(e,Jce[e.role]):xSt(e)}function xSt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return VAe(n?zAe:$Q,`${t} mark container`,e.description)}function _St(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return VAe(t.role||$Q,t.desc,n.description||r(n))}catch{return null}}function efe(e){return ln(e.text).join(" ")}function wSt(e){const t=e.datum,n=e.orient,r=t.title?WAe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${BS(a)?"discrete":a} scale with ${sAe(o,s,e)}`}function ESt(e){const t=e.datum,n=t.title?WAe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return TSt(r)+(n?` titled '${n}'`:"")+` for ${SSt(s)} with ${sAe(u,a,e)}`}function WAe(e){try{return ln(pi(e.items).items[0].text).join(" ")}catch{return null}}function SSt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+pi(e)}function TSt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const GAe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),CSt=e=>GAe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function BQ(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${CSt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=GAe(u),a),toString:()=>e};return a}const YAe=e=>KAe(BQ(),e)+"";function KAe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):KAe(e,r)}return e.close()}const WD={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},GD={blend:"mix-blend-mode"},XAe={fill:"none","stroke-miterlimit":10},n3=0,tfe="http://www.w3.org/2000/xmlns/",lu=N4.xmlns;class jQ extends oI{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=cu(t,0,"svg",lu),this._svg.setAttributeNS(tfe,"xmlns",lu),this._svg.setAttributeNS(tfe,"xmlns:xlink",N4["xmlns:xlink"]),this._svg.setAttribute("version",N4.version),this._svg.setAttribute("class","marks"),qh(t,1),this._root=cu(this._svg,n3,"g",lu),zv(this._root,XAe),qh(this._svg,n3+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(zv(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=cu(t,n3,"rect",lu),zv(r,{width:this._width,height:this._height,fill:n}));const i=YAe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),qh(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=dh[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,nfe(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,nfe(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=dh[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=rfe(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return qh(c,0),n._svg;c.setAttribute("class",DAe(n));const f=qAe(n);for(const m in f)Kc(c,m,f[m]);l||Kc(c,"pointer-events",u),Kc(c,"clip-path",n.clip?yQ(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),b=rfe(m,c,d,a.tag,s);g&&(this._update(a,b,m),l&&RSt(this,b,m,i)),d=b,++h};return a.nested?n.items.length&&p(n.items[0]):P0(n,p),qh(c,h),c}_update(t,n,r){qy=n,Jl=n.__values__,HAe(Nk,r),t.attr(Nk,r,this);const i=PSt[t.type];i&&i.call(this,t,n,r),qy&&this.style(qy,r)}style(t,n){if(n!=null){for(const r in WD){let i=r==="font"?sI(n):n[r];if(i===Jl[r])continue;const s=WD[r];i==null?t.removeAttribute(s):(pQ(i)&&(i=aAe(i,this._defs.gradient,QAe())),t.setAttribute(s,i+"")),Jl[r]=i}for(const r in GD)$N(t,GD[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=cu(t,n3+1,"defs",lu)),i=ASt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=cu(t,n3+1,"defs",lu)),i=kSt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):qh(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function nfe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function ASt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=cu(e,n++,"pattern",lu);zv(o,{id:MD+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=cu(o,0,"rect",lu),zv(o,{width:1,height:1,fill:`url(${QAe()}#${t.id})`}),e=cu(e,n++,"radialGradient",lu),zv(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=cu(e,n++,"linearGradient",lu),zv(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=cu(e,r,"stop",lu),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return qh(e,r),n}function kSt(e,t,n){let r;return e=cu(e,n,"clipPath",lu),e.setAttribute("id",t.id),t.path?(r=cu(e,0,"path",lu),r.setAttribute("d",t.path)):(r=cu(e,0,"rect",lu),zv(r,{x:0,y:0,width:t.width,height:t.height})),qh(e,1),n+1}function RSt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;P0(n,o=>{i=e.mark(t,o,i,r),++s}),qh(t,1+s)}function rfe(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Uv(o,r,lu),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Uv(o,"path",lu);s.appendChild(a),a.__data__=e;const u=Uv(o,"g",lu);s.appendChild(u),u.__data__=e;const l=Uv(o,"path",lu);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||ISt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function ISt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let qy=null,Jl=null;const PSt={group(e,t,n){const r=qy=t.childNodes[2];Jl=r.__values__,e.foreground(Nk,n,this),Jl=t.__values__,qy=t.childNodes[1],e.content(Nk,n,this);const i=qy=t.childNodes[0];e.background(Nk,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Jl.events&&(Kc(r,"pointer-events",s),Kc(i,"pointer-events",s),Jl.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Kc(r,"display",null),this.style(i,n),Kc(i,"stroke",null),o&&(n.fill=null),Jl=r.__values__,this.style(r,n),o&&(n.fill=o),qy=null}else Kc(r,"display","none")},image(e,t,n){n.smooth===!1?($N(t,"image-rendering","optimizeSpeed"),$N(t,"image-rendering","pixelated")):$N(t,"image-rendering",null)},text(e,t,n){const r=iI(n);let i,s,o,a;xt(r)?(s=r.map(u=>Tb(n,u)),i=s.join(`
`),i!==Jl.text&&(qh(t,0),o=t.ownerDocument,a=Sb(n),s.forEach((u,l)=>{const c=Uv(o,"tspan",lu);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Jl.text=i)):(s=Tb(n,r),s!==Jl.text&&(t.textContent=s,Jl.text=s)),Kc(t,"font-family",sI(n)),Kc(t,"font-size",kg(n)+"px"),Kc(t,"font-style",n.fontStyle),Kc(t,"font-variant",n.fontVariant),Kc(t,"font-weight",n.fontWeight)}};function Nk(e,t,n){t!==Jl[e]&&(n?NSt(qy,e,t,n):Kc(qy,e,t),Jl[e]=t)}function $N(e,t,n){n!==Jl[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Jl[t]=n)}function zv(e,t){for(const n in t)Kc(e,n,t[n])}function Kc(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function NSt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function QAe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class JAe extends oI{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=BQ();n.open("svg",kr({},N4,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",XAe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=dh[n.marktype],i=r.tag,s=[HAe,r.attr];t.open("g",{class:DAe(n),"clip-path":n.clip?yQ(this,n,n.group):null},qAe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=iI(a);if(xt(l)){const c={x:0,dy:Sb(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(Tb(a,l[f])).close()}else t.text(Tb(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),P0(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):P0(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&DSt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:MD+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function DSt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=sI(t),e["font-size"]=kg(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in WD){let a=t[o];const u=WD[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(pQ(a)&&(a=aAe(a,i.gradient,"")),e[u]=a)}for(const o in GD){const a=t[o];a!=null&&(s=s||[],s.push(`${GD[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const n0={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function OSt(e){n0.svgMarkTypes=e.svgMarkTypes??["text"],n0.svgOnTop=e.svgOnTop??!0,n0.debug=e.debug??!1}class DV extends oI{constructor(t){super(t),this._svgRenderer=new jQ(t),this._canvasRenderer=new qD(t)}initialize(t,n,r,i,s){this._root_el=cu(t,0,"div");const o=cu(this._root_el,0,"div"),a=cu(this._root_el,1,"div");return this._root_el.style.position="relative",n0.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=n0.svgOnTop?a:o,this._canvasEl=n0.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return n0.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!n0.svgMarkTypes.includes(s));this._svgRenderer.render(t,n0.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return n0.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class ZAe extends aI{constructor(t,n){super(t,n)}initialize(t,n,r){const i=cu(cu(t,0,"div"),n0.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const e3e="canvas",t3e="hybrid",n3e="png",r3e="svg",i3e="none",Vv={Canvas:e3e,PNG:n3e,SVG:r3e,Hybrid:t3e,None:i3e},iw={};iw[e3e]=iw[n3e]={renderer:qD,headless:qD,handler:aI};iw[r3e]={renderer:jQ,headless:JAe,handler:jAe};iw[t3e]={renderer:DV,headless:DV,handler:ZAe};iw[i3e]={};function sL(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(iw[e]=t,this):iw[e]}function s3e(e,t,n){const r=[],i=new qa().union(t),s=e.marktype;return s?o3e(e,i,n,r):s==="group"?a3e(e,i,n,r):vt("Intersect scene must be mark node or group item.")}function o3e(e,t,n,r){if(MSt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)a3e(i[a],t,n,r);else for(const u=dh[s].isect;a<o;++a){const l=i[a];u3e(l,t,u)&&r.push(l)}}return r}function MSt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function a3e(e,t,n,r){n&&n(e.mark)&&u3e(e,t,dh.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)o3e(i[u],t,n,r);t.translate(o,a)}return r}function u3e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const kB=new qa;function l3e(e){const t=e.clip;if(Rr(t))t(nI(kB.clear()));else if(t)kB.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(kB)}const LSt=1e-9;function UQ(e,t,n){return e===t?!0:n==="path"?c3e(e,t):e instanceof Date&&t instanceof Date?+e==+t:Ri(e)&&Ri(t)?Math.abs(e-t)<=LSt:!e||!t||!un(e)&&!un(t)?e==t:FSt(e,t)}function c3e(e,t){return UQ(jS(e),jS(t))}function FSt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!UQ(e[i],t[i],i))return!1;return typeof e==typeof t}function $St(){pAe(),u2t()}const VS="top",c0="left",m0="right",Cb="bottom",BSt="top-left",jSt="top-right",USt="bottom-left",zSt="bottom-right",zQ="start",OV="middle",Qc="end",VSt="x",HSt="y",oL="group",VQ="axis",HQ="title",qSt="frame",WSt="scope",qQ="legend",f3e="row-header",d3e="row-footer",h3e="row-title",p3e="column-header",m3e="column-footer",g3e="column-title",GSt="padding",YSt="symbol",y3e="fit",v3e="fit-x",b3e="fit-y",KSt="pad",WQ="none",o5="all",MV="each",GQ="flush",Hv="column",qv="row";function x3e(e){pt.call(this,null,e)}en(x3e,pt,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=dh[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=a5(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===oL||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(a5(l,o))),r.role){case VQ:case qQ:case HQ:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(a5(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(a5(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return l3e(r),t.modifies("bounds")}});function a5(e,t,n){return t(e.bounds.clear(),e,n)}const ife=":vega_identifier:";function YQ(e){pt.call(this,0,e)}YQ.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};en(YQ,pt,{transform(e,t){const n=XSt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function XSt(e){return e._signals[ife]||(e._signals[ife]=e.add(0))}function _3e(e){pt.call(this,null,e)}en(_3e,pt,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,QSt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===oL?QM:XM;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function QSt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function w3e(e){pt.call(this,null,e)}const sfe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!E3e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},E3e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),ofe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(E3e(i,s=e[n].bounds,t))return!0},JSt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},ZSt=(e,t,n)=>{var r=e.range(),i=new qa;return t===VS||t===Cb?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},afe=e=>(e.forEach(t=>t.opacity=1),e),ufe=(e,t)=>e.reflow(t.modified()).modifies("opacity");en(w3e,pt,{transform(e,t){const n=sfe[e.method]||sfe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(afe(i),t=ufe(t,e)),t;if(i=i.filter(JSt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=afe(i),t=ufe(t,e),s.length>=3&&ofe(s,r)){do s=n(s,r);while(s.length>=3&&ofe(s,r));s.length<3&&!pi(i).opacity&&(s.length>1&&(pi(s).opacity=0),pi(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=ZSt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function S3e(e){pt.call(this,null,e)}en(S3e,pt,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Xl=new qa;function DE(e,t,n){return e[t]===n?0:(e[t]=n,1)}function eTt(e){var t=e.items[0].orient;return t===c0||t===m0}function tTt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function nTt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=tTt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,b=p&&IQ(p),y=0,x=0,w,S;switch(Xl.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case VS:y=f||0,x=-c,S=Math.max(d,Math.min(h,-g.y1)),g.add(0,-S).add(l,0),p&&u5(e,p,S,m,b,0,-1,g);break;case c0:y=-c,x=f||0,S=Math.max(d,Math.min(h,-g.x1)),g.add(-S,0).add(0,l),p&&u5(e,p,S,m,b,1,-1,g);break;case m0:y=n+c,x=f||0,S=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(S,l),p&&u5(e,p,S,m,b,1,1,g);break;case Cb:y=f||0,x=r+c,S=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,S),p&&u5(e,p,S,m,0,0,1,g);break;default:y=i.x,x=i.y}return O1(g.translate(y,x),i),DE(i,"x",y+o)|DE(i,"y",x+o)&&(i.bounds=Xl,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function u5(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const lfe=(e,t)=>Math.floor(Math.min(e,t)),cfe=(e,t)=>Math.ceil(Math.max(e,t));function rTt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===oL)switch(i.role){case VQ:case qQ:case HQ:break;case f3e:o.rowheaders.push(...s);break;case d3e:o.rowfooters.push(...s);break;case p3e:o.colheaders.push(...s);break;case m3e:o.colfooters.push(...s);break;case h3e:o.rowtitle=s[0];break;case g3e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function iTt(e){return new qa().set(0,0,e.width||0,e.height||0)}function sTt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function uo(e,t,n){const r=un(e)?e[t]:e;return r??(n!==void 0?n:0)}function ffe(e){return e<0?Math.ceil(-e):0}function T3e(e,t,n){var r=!n.nodirty,i=n.bounds===GQ?iTt:sTt,s=Xl.set(0,0,0,0),o=uo(n.align,Hv),a=uo(n.align,qv),u=uo(n.padding,Hv),l=uo(n.padding,qv),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),b=Array(f),y=0,x=Array(d),w=Array(d),S=Array(d),C,R,I,O,M,L,H,D,B,z,G;for(R=0;R<c;++R)p[R]=0;for(R=0;R<f;++R)b[R]=0;for(R=0;R<d;++R)L=t[R],M=S[R]=i(L),L.x=L.x||0,x[R]=0,L.y=L.y||0,w[R]=0,I=R%c,O=~~(R/c),m=Math.max(m,H=Math.ceil(M.x2)),y=Math.max(y,D=Math.ceil(M.y2)),p[I]=Math.max(p[I],H),b[O]=Math.max(b[O],D),h[R]=u+ffe(M.x1),g[R]=l+ffe(M.y1),r&&e.dirty(t[R]);for(R=0;R<d;++R)R%c===0&&(h[R]=0),R<c&&(g[R]=0);if(o===MV)for(I=1;I<c;++I){for(G=0,R=I;R<d;R+=c)G<h[R]&&(G=h[R]);for(R=I;R<d;R+=c)h[R]=G+p[I-1]}else if(o===o5){for(G=0,R=0;R<d;++R)R%c&&G<h[R]&&(G=h[R]);for(R=0;R<d;++R)R%c&&(h[R]=G+m)}else for(o=!1,I=1;I<c;++I)for(R=I;R<d;R+=c)h[R]+=p[I-1];if(a===MV)for(O=1;O<f;++O){for(G=0,R=O*c,C=R+c;R<C;++R)G<g[R]&&(G=g[R]);for(R=O*c;R<C;++R)g[R]=G+b[O-1]}else if(a===o5){for(G=0,R=c;R<d;++R)G<g[R]&&(G=g[R]);for(R=c;R<d;++R)g[R]=G+y}else for(a=!1,O=1;O<f;++O)for(R=O*c,C=R+c;R<C;++R)g[R]+=b[O-1];for(B=0,R=0;R<d;++R)B=h[R]+(R%c?B:0),x[R]+=B-t[R].x;for(I=0;I<c;++I)for(z=0,R=I;R<d;R+=c)z+=g[R],w[R]+=z-t[R].y;if(o&&uo(n.center,Hv)&&f>1)for(R=0;R<d;++R)M=o===o5?m:p[R%c],B=M-S[R].x2-t[R].x-x[R],B>0&&(x[R]+=B/2);if(a&&uo(n.center,qv)&&c!==1)for(R=0;R<d;++R)M=a===o5?y:b[~~(R/c)],z=M-S[R].y2-t[R].y-w[R],z>0&&(w[R]+=z/2);for(R=0;R<d;++R)s.union(S[R].translate(x[R],w[R]));switch(B=uo(n.anchor,VSt),z=uo(n.anchor,HSt),uo(n.anchor,Hv)){case Qc:B-=s.width();break;case OV:B-=s.width()/2}switch(uo(n.anchor,qv)){case Qc:z-=s.height();break;case OV:z-=s.height()/2}for(B=Math.round(B),z=Math.round(z),s.clear(),R=0;R<d;++R)t[R].mark.bounds.clear();for(R=0;R<d;++R)L=t[R],L.x+=x[R]+=B,L.y+=w[R]+=z,s.union(L.mark.bounds.union(L.bounds.translate(x[R],w[R]))),r&&e.dirty(L);return s}function oTt(e,t,n){var r=rTt(t),i=r.marks,s=n.bounds===GQ?aTt:uTt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const b=T3e(e,i,n);b.empty()&&b.set(0,0,0,0),r.rowheaders&&(m=uo(n.headerBand,qv,null),c=l5(e,r.rowheaders,i,a,u,-uo(o,"rowHeader"),lfe,0,s,"x1",0,a,1,m)),r.colheaders&&(m=uo(n.headerBand,Hv,null),f=l5(e,r.colheaders,i,a,a,-uo(o,"columnHeader"),lfe,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=uo(n.footerBand,qv,null),d=l5(e,r.rowfooters,i,a,u,uo(o,"rowFooter"),cfe,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=uo(n.footerBand,Hv,null),h=l5(e,r.colfooters,i,a,a,uo(o,"columnFooter"),cfe,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=uo(n.titleAnchor,qv),g=uo(o,"rowTitle"),g=p===Qc?d+g:c-g,m=uo(n.titleBand,qv,.5),dfe(e,r.rowtitle,g,0,b,m)),r.coltitle&&(p=uo(n.titleAnchor,Hv),g=uo(o,"columnTitle"),g=p===Qc?h+g:f-g,m=uo(n.titleBand,Hv,.5),dfe(e,r.coltitle,g,1,b,m))}function aTt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function uTt(e,t){return e.bounds[t]}function l5(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,b,y,x,w,S,C,R,I,O;if(!p)return m;for(b=c;b<p;b+=f)n[b]&&(m=o(m,u(n[b],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,y=0,w=t.length;y<w;++y)e.dirty(t[y]),t[y].mark.bounds.clear();for(b=c,y=0,w=t.length;y<w;++y,b+=f){for(C=t[y],S=C.mark.bounds,x=b;x>=0&&(R=n[x])==null;x-=d);a?(I=h==null?R.x:Math.round(R.bounds.x1+h*R.bounds.width()),O=m):(I=m,O=h==null?R.y:Math.round(R.bounds.y1+h*R.bounds.height())),S.union(C.bounds.translate(I-(C.x||0),O-(C.y||0))),C.x=I,C.y=O,e.dirty(C),g=o(g,S[l])}return g}function dfe(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function lTt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function cTt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function fTt(e,t,n,r,i,s,o){const a=lTt(n,t),u=cTt(e,a("offset",0)),l=a("anchor",zQ),c=l===Qc?1:l===OV?.5:0,f={align:MV,bounds:a("bounds",GQ),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case c0:f.anchor={x:Math.floor(r.x1)-u,column:Qc,y:c*(o||r.height()+2*r.y1),row:l};break;case m0:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case VS:f.anchor={y:Math.floor(i.y1)-u,row:Qc,x:c*(s||i.width()+2*i.x1),column:l};break;case Cb:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case BSt:f.anchor={x:u,y:u};break;case jSt:f.anchor={x:s-u,y:u,column:Qc};break;case USt:f.anchor={x:u,y:o-u,row:Qc};break;case zSt:f.anchor={x:s-u,y:o-u,column:Qc,row:Qc};break}return f}function dTt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),pTt(e,n,n.items[0].items[0]),s=hTt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===YSt&&mTt(n.items[0].items[0].items[0].items),i!==WQ&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,O1(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function hTt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function pTt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&r3(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case c0:i+=Math.ceil(o.bounds.width())+u;break;case m0:case Cb:break;default:s+=o.bounds.height()+u}switch((i||s)&&r3(e,n,i,s),o.orient){case c0:c+=tE(t,n,o,a,1,1);break;case m0:l+=tE(t,n,o,Qc,0,0)+u,c+=tE(t,n,o,a,1,1);break;case Cb:l+=tE(t,n,o,a,0,0),c+=tE(t,n,o,Qc,-1,0,1)+u;break;default:l+=tE(t,n,o,a,0,0)}(l||c)&&r3(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(r3(e,n,-l,0),r3(e,o,-l,0))}}function tE(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:IQ(n);return Math.round(r===zQ?f:r===Qc?d-h:.5*(c-h))}function r3(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function mTt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function gTt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===c0||a===m0?r:n,p=0,m=0,g=0,b=0,y=0,x;if(o!==oL?a===c0?(p=i.y2,h=i.y1):a===m0?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===c0&&(p=r,h=0),x=u===zQ?p:u===Qc?h:(p+h)/2,d&&d.text){switch(a){case VS:case Cb:y=f.bounds.height()+c;break;case c0:b=f.bounds.width()+c;break;case m0:b=-f.bounds.width()-c;break}Xl.clear().union(d.bounds),Xl.translate(b-(d.x||0),y-(d.y||0)),DE(d,"x",b)|DE(d,"y",y)&&(e.dirty(d),d.bounds.clear().union(Xl),d.mark.bounds.clear().union(Xl),e.dirty(d)),Xl.clear().union(d.bounds)}else Xl.clear();switch(Xl.union(f.bounds),a){case VS:m=x,g=i.y1-Xl.height()-l;break;case c0:m=i.x1-Xl.width()-l,g=x;break;case m0:m=i.x2+Xl.width()+l,g=x;break;case Cb:m=x,g=i.y2+l;break;default:m=s.x,g=s.y}return DE(s,"x",m)|DE(s,"y",g)&&(Xl.translate(m,g),e.dirty(s),s.bounds.clear().union(Xl),t.bounds.clear().union(Xl),e.dirty(s)),s.bounds}function C3e(e){pt.call(this,null,e)}en(C3e,pt,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&oTt(n,r,e.layout),vTt(n,r,e)}),yTt(e.mark.group)?t.reflow():t}});function yTt(e){return e&&e.mark.role!=="legend-entry"}function vTt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new qa().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case VQ:h=eTt(f)?a:u,h.union(nTt(e,f,i,s));break;case HQ:c=f;break;case qQ:l.push(dTt(e,f));break;case qSt:case WSt:case f3e:case d3e:case h3e:case p3e:case m3e:case g3e:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(b=>{d=b.orient||m0,d!==WQ&&(g[d]||(g[d]=[])).push(b)});for(const b in g){const y=g[b];T3e(e,y,fTt(y,b,n.legends,a,u,i,s))}l.forEach(b=>{const y=b.bounds;if(y.equals(b._bounds)||(b.bounds=b._bounds,e.dirty(b),b.bounds=y,e.dirty(b)),n.autosize&&(n.autosize.type===y3e||n.autosize.type===v3e||n.autosize.type===b3e))switch(b.orient){case c0:case m0:o.add(y.x1,0).add(y.x2,0);break;case VS:case Cb:o.add(0,y.y1).add(0,y.y2)}else o.union(y)})}o.union(a).union(u),c&&o.union(gTt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),bTt(e,t,o,n)}function bTt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===GSt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===WQ?(l=0,f=0,u=o,c=a):s===y3e?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===v3e?(u=Math.max(0,o-l-d),a=c+f+h):s===b3e?(o=u+l+d,c=Math.max(0,a-f-h)):s===KSt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const xTt=Object.freeze(Object.defineProperty({__proto__:null,bound:x3e,identifier:YQ,mark:_3e,overlap:w3e,render:S3e,viewlayout:C3e},Symbol.toStringTag,{value:"Module"}));function A3e(e){pt.call(this,null,e)}en(A3e,pt,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=dQ(s,o,e.minstep),u=e.format||eAe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?ZCe(s,e.values,a):hQ(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Vi({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Vi({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function k3e(e){pt.call(this,null,e)}function _Tt(){return Vi({})}function wTt(e){const t=JT().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}en(k3e,pt,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||_Tt,s=e.key||Fn,o=this.value;return xt(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&vt("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=wTt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function R3e(e){pt.call(this,null,e)}en(R3e,pt,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(xt(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||_v,u=i.enter||_v,l=i.exit||_v,c=(s&&!o?i[s]:a)||_v;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==_v&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==_v&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==_v){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function I3e(e){pt.call(this,[],e)}en(I3e,pt,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||IN,o=e.scale,a=+e.limit,u=dQ(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===IN,c=e.format||iAe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||rAe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===IN?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,Rr(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((b,y)=>Math.max(b,p(y,e)),0)):p=mc(m=p||8),i=i.map((b,y)=>Vi({index:y,label:c(b,y,i),value:b,offset:m,size:p(b,e)})),g&&(g=f[i.length],i.push(Vi({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===Kwt?(d=o.domain(),h=XCe(o,d[0],pi(d)),f.length<3&&!e.values&&d[0]!==pi(d)&&(f=[d[0],pi(d)]),i=f.map((b,y)=>Vi({index:y,label:c(b,y,f),value:b,perc:h(b)}))):(p=f.length-1,h=o2t(o),i=f.map((b,y)=>Vi({index:y,label:c(b,y,f),value:b,perc:y?h(b):0,perc2:y===p?1:h(f[y+1])}))),r.source=i,r.add=i,this.value=i,r}});const ETt=e=>e.source.x,STt=e=>e.source.y,TTt=e=>e.target.x,CTt=e=>e.target.y;function KQ(e){pt.call(this,{},e)}KQ.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};en(KQ,pt,{transform(e,t){var n=e.sourceX||ETt,r=e.sourceY||STt,i=e.targetX||TTt,s=e.targetY||CTt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=hfe.get(u+"-"+a)||hfe.get(u);return l||vt("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const P3e=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,ATt=(e,t,n,r)=>P3e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),N3e=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},kTt=(e,t,n,r)=>N3e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),D3e=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},RTt=(e,t,n,r)=>D3e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),ITt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,PTt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,NTt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},DTt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},OTt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},MTt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},hfe=JT({line:P3e,"line-radial":ATt,arc:N3e,"arc-radial":kTt,curve:D3e,"curve-radial":RTt,"orthogonal-horizontal":ITt,"orthogonal-vertical":PTt,"orthogonal-radial":NTt,"diagonal-horizontal":DTt,"diagonal-vertical":OTt,"diagonal-radial":MTt});function XQ(e){pt.call(this,null,e)}XQ.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};en(XQ,pt,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||KT,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/Owe(l),h=Kd(c),p,m,g;for(e.sort&&h.sort((b,y)=>l[b]-l[y]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const LTt=5;function FTt(e){const t=e.type;return!e.bins&&(t===FS||t===KR||t===XR)}function O3e(e){return lQ(e)&&e!==Gm}const $Tt=R0(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function M3e(e){pt.call(this,null,e),this.modified(!0)}en(M3e,pt,{transform(e,t){var n=t.dataflow,r=this.value,i=BTt(e);(!r||i!==r.type)&&(this.value=r=Ii(i)());for(i in e)if(!$Tt[i]){if(i==="padding"&&O3e(r.type))continue;Rr(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return qTt(r,e,HTt(r,e,UTt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function BTt(e){var t=e.type,n="",r;return t===Gm?Gm+"-"+FS:(jTt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Gm+"-":r===3?nC+"-":""),(n+t||FS).toLowerCase())}function jTt(e){const t=e.type;return lQ(t)&&t!==nw&&t!==rw&&(e.scheme||e.range&&e.range.length&&e.range.every(cn))}function UTt(e,t,n){const r=zTt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&FTt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return O3e(s)&&t.padding&&i[0]!==pi(i)&&(i=VTt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(L3e(s,i,n)),s===sQ&&e.unknown(t.domainImplicit?tV:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&dQ(e,t.nice)||null),i.length}function zTt(e,t,n){return t?(e.domain(L3e(e.type,t,n)),t.length):-1}function VTt(e,t,n,r,i,s){var o=Math.abs(pi(n)-n[0]),a=o/(o-2*r),u=e===w1?JK(t,null,a):e===XR?PD(t,null,a,.5):e===KR?PD(t,null,a,i||1):e===qM?ZK(t,null,a,s||1):QK(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function L3e(e,t,n){if(qCe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Jt(t))}return t}function HTt(e,t,n){let r=t.bins;if(r&&!xt(r)){const i=e.domain(),s=i[0],o=pi(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||vt("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Kd(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===oQ&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function qTt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=WTt(r,t,n);else if(t.scheme&&(s=GTt(r,t,n),Rr(s))){if(e.interpolator)return e.interpolator(s);vt(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&WCe(r))return e.interpolator(YM(LV(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(cQ(t.interpolate,t.interpolateGamma)):Rr(e.round)?e.round(i):Rr(e.rangeRound)&&e.interpolate(i?FR:Jb),s&&e.range(LV(s,t.reverse))}function WTt(e,t,n){e!==BCe&&e!==_V&&vt("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===_V?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*iQ(n,i,r)]}function GTt(e,t,n){var r=t.schemeExtent,i,s;return xt(t.scheme)?s=YM(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=fQ(i),s||vt(`Unrecognized scheme name: ${t.scheme}`)),n=e===GM?n+1:e===oQ?n-1:e===$S||e===WM?+t.schemeCount||LTt:n,WCe(e)?pfe(s,r,t.reverse):Rr(s)?KCe(pfe(s,r),n):e===sQ?s:s.slice(0,n)}function pfe(e,t,n){return Rr(e)&&(t||n)?YCe(e,LV(t||[0,1],n)):e}function LV(e,t){return t?e.slice().reverse():e}function F3e(e){pt.call(this,null,e)}en(F3e,pt,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Ww(e.sort)),this.modified(n),t}});const mfe="zero",$3e="center",B3e="normalize",j3e=["y0","y1"];function QQ(e){pt.call(this,null,e)}QQ.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:mfe,values:[mfe,$3e,B3e]},{name:"as",type:"string",array:!0,length:2,default:j3e}]};en(QQ,pt,{transform(e,t){var n=e.as||j3e,r=n[0],i=n[1],s=Ww(e.sort),o=e.field||KT,a=e.offset===$3e?YTt:e.offset===B3e?KTt:XTt,u,l,c,f;for(u=QTt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function YTt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function KTt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function XTt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function QTt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const JTt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:A3e,datajoin:k3e,encode:R3e,legendentries:I3e,linkpath:KQ,pie:XQ,scale:M3e,sortitems:F3e,stack:QQ},Symbol.toStringTag,{value:"Module"}));var ZTt=Math.abs,FV=Math.cos,YD=Math.sin,eCt=1e-6,U3e=Math.PI,$V=U3e/2,gfe=tCt(2);function yfe(e){return e>1?$V:e<-1?-$V:Math.asin(e)}function tCt(e){return e>0?Math.sqrt(e):0}function nCt(e,t){var n=e*YD(t),r=30,i;do t-=i=(t+YD(t)-n)/(1+FV(t));while(ZTt(i)>eCt&&--r>0);return t/2}function rCt(e,t,n){function r(i,s){return[e*i*FV(s=nCt(n,s)),t*YD(s)]}return r.invert=function(i,s){return s=yfe(s/t),[i/(e*FV(s)),yfe((2*s+YD(2*s))/n)]},r}var iCt=rCt(gfe/$V,gfe,U3e);function sCt(){return Sg(iCt).scale(169.529)}const oCt=uEe(),BV=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function aCt(e,t){return function n(){const r=t();return r.type=e,r.path=uEe().projection(r),r.copy=r.copy||function(){const i=n();return BV.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},VCe(r)}}function JQ(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(KD[e]=aCt(e,t),this):KD[e]||null}function z3e(e){return e&&e.path||oCt}const KD={albers:cEe,albersusa:y0t,azimuthalequalarea:v0t,azimuthalequidistant:b0t,conicconformal:w0t,conicequalarea:yD,conicequidistant:T0t,equalEarth:A0t,equirectangular:E0t,gnomonic:k0t,identity:R0t,mercator:x0t,mollweide:sCt,naturalEarth1:I0t,orthographic:P0t,stereographic:N0t,transversemercator:D0t};for(const e in KD)JQ(e,KD[e]);function uCt(){}const _y=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function V3e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),lCt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(cCt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=[],d=[],h,p,m,g,b,y;for(h=p=-1,g=u[0]>=l,_y[g<<1].forEach(x);++h<e-1;)m=g,g=u[h+1]>=l,_y[m|g<<1].forEach(x);for(_y[g<<0].forEach(x);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,b=u[p*e]>=l,_y[g<<1|b<<2].forEach(x);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,y=b,b=u[p*e+h+1]>=l,_y[m|g<<1|b<<2|y<<3].forEach(x);_y[g|b<<3].forEach(x)}for(h=-1,b=u[p*e]>=l,_y[b<<2].forEach(x);++h<e-1;)y=b,b=u[p*e+h+1]>=l,_y[b<<2|y<<3].forEach(x);_y[b<<3].forEach(x);function x(w){var S=[w[0][0]+h,w[0][1]+p],C=[w[1][0]+h,w[1][1]+p],R=o(S),I=o(C),O,M;(O=d[R])?(M=f[I])?(delete d[O.end],delete f[M.start],O===M?(O.ring.push(C),c(O.ring)):f[O.start]=d[M.end]={start:O.start,end:M.end,ring:O.ring.concat(M.ring)}):(delete d[O.end],O.ring.push(C),d[O.end=I]=O):(O=f[I])?(M=d[R])?(delete f[O.start],delete d[M.end],O===M?(O.ring.push(C),c(O.ring)):f[M.start]=d[O.end]={start:M.start,end:O.end,ring:M.ring.concat(O.ring)}):(delete f[O.start],O.ring.unshift(S),f[O.start=R]=O):f[R]=d[I]={start:R,end:I,ring:[S,C]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,b=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(b-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(b-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||vt("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:uCt,r):n===a},r}function lCt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function cCt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=fCt(e,t[n]))return i;return 0}function fCt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(dCt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function dCt(e,t,n){var r;return hCt(e,t,n)&&pCt(e[r=+(e[0]===t[0])],n[r],t[r])}function hCt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function pCt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function H3e(e,t,n){return function(r){var i=dg(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?bb(s,o,e):a/(e+1);return Kd(s+u,o,u)}}function ZQ(e){pt.call(this,null,e)}ZQ.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};en(ZQ,pt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||pc,s=V3e().smooth(e.smooth!==!1),o=e.thresholds||mCt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,xt(o)?o:o(c.values));gCt(f,c,l,e),f.forEach(d=>{u.push(LM(l,Vi(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function mCt(e,t,n){const r=H3e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>D_(t(i).values)))}function gCt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(Rr(i)&&(i=i(n,r)),Rr(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Ri(i)?i:i[0])||1,a=(Ri(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(q3e(t,o,a,u,l))}function q3e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function vfe(e,t,n){const r=e>=0?e:vX(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function RB(e){return Rr(e)?e:mc(+e)}function W3e(){var e=u=>u[0],t=u=>u[1],n=KT,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=vfe(r[0],u,e)>>o,f=vfe(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),b=new Float32Array(p*m);let y=g;u.forEach(w=>{const S=d+(+e(w)>>o),C=h+(+t(w)>>o);S>=0&&S<p&&C>=0&&C<m&&(g[S+C*p]+=+n(w))}),c>0&&f>0?(nE(p,m,g,b,c),rE(p,m,b,g,f),nE(p,m,g,b,c),rE(p,m,b,g,f),nE(p,m,g,b,c),rE(p,m,b,g,f)):c>0?(nE(p,m,g,b,c),nE(p,m,b,g,c),nE(p,m,g,b,c),y=b):f>0&&(rE(p,m,g,b,f),rE(p,m,b,g,f),rE(p,m,g,b,f),y=b);const x=l?Math.pow(2,-2*o):1/Owe(y);for(let w=0,S=p*m;w<S;++w)y[w]*=x;return{values:y,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=RB(u),a):e},a.y=function(u){return arguments.length?(t=RB(u),a):t},a.weight=function(u){return arguments.length?(n=RB(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||vt("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||vt("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=ln(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&vt("invalid bandwidth"),r=u,a):r},a}function nE(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function rE(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function eJ(e){pt.call(this,null,e)}eJ.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const yCt=["x","y","weight","size","cellSize","bandwidth"];function G3e(e,t){return yCt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}en(eJ,pt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=vCt(r,e.groupby),s=(e.groupby||[]).map(Wo),o=G3e(W3e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Vi(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function vCt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function tJ(e){pt.call(this,null,e)}tJ.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};en(tJ,pt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=V3e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||H3e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=G3e(W3e(),e)(i,!0),u=q3e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=xt(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Vi),n}});const jV="Feature",nJ="FeatureCollection",bCt="MultiPoint";function rJ(e){pt.call(this,null,e)}rJ.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};en(rJ,pt,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&pc,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(uc(a))||s&&t.modified(uc(s))||o&&t.modified(uc(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:jV,geometry:{type:bCt,coordinates:r}})),this.value={type:nJ,features:n}}});function iJ(e){pt.call(this,null,e)}iJ.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};en(iJ,pt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||pc,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=z3e(e.projection),n.materialize().reflow()):o=i===pc||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=xCt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function xCt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function sJ(e){pt.call(this,null,e)}sJ.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};en(sJ,pt,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function oJ(e){pt.call(this,null,e)}oJ.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};en(oJ,pt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=_Ct(z3e(e.projection),e.field||tp("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function _Ct(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function aJ(e){pt.call(this,[],e),this.generator=Xpt()}aJ.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};en(aJ,pt,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)Rr(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(GTe(n[0],i)):t.add.push(Vi(i)),n[0]=i,t}});function uJ(e){pt.call(this,null,e)}uJ.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};en(uJ,pt,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||pc,s=ECt(e.opacity,e),o=wCt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?D_(n.map(l=>D_(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=kr({},l,u);r||(f.$max=D_(c.values||[])),l[a]=SCt(c,f,o.dep?o:mc(o(f)),s.dep?s:mc(s(f)))}),t.reflow(!0).modifies(a)}});function wCt(e,t){let n;return Rr(e)?(n=r=>xb(e(r,t)),n.dep=Y3e(e)):n=mc(xb(e||"#888")),n}function ECt(e,t){let n;return Rr(e)?(n=r=>e(r,t),n.dep=Y3e(e)):e?n=mc(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function Y3e(e){if(!Rr(e))return!1;const t=R0(uc(e));return t.$x||t.$y||t.$value||t.$max}function SCt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Lv,d=rb(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,b=0;g<l;++g){t.$y=g-a;for(let y=o,x=g*i;y<u;++y,b+=4){t.$x=y-o,t.$value=f(y+x);const w=n(t);m[b+0]=w.r,m[b+1]=w.g,m[b+2]=w.b,m[b+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function K3e(e){pt.call(this,null,e),this.modified(!0)}en(K3e,pt,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=CCt(e.type),BV.forEach(r=>{e[r]!=null&&bfe(n,r,e[r])})):BV.forEach(r=>{e.modified(r)&&bfe(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&TCt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function TCt(e,t){const n=ACt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function CCt(e){const t=JQ((e||"mercator").toLowerCase());return t||vt("Unrecognized projection type: "+e),t()}function bfe(e,t,n){Rr(e[t])&&e[t](n)}function ACt(e){return e=ln(e),e.length===1?e[0]:{type:nJ,features:e.reduce((t,n)=>t.concat(kCt(n)),[])}}function kCt(e){return e.type===nJ?e.features:ln(e).filter(t=>t!=null).map(t=>t.type===jV?t:{type:jV,geometry:t})}const RCt=Object.freeze(Object.defineProperty({__proto__:null,contour:tJ,geojson:rJ,geopath:iJ,geopoint:sJ,geoshape:oJ,graticule:aJ,heatmap:uJ,isocontour:ZQ,kde2d:eJ,projection:K3e},Symbol.toStringTag,{value:"Module"})),xfe={center:jht,collide:spt,nbody:gpt,link:apt,x:ypt,y:vpt},Q3="forces",UV=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],ICt=["static","iterations"],X3e=["x","y","vx","vy"];function lJ(e){pt.call(this,null,e)}lJ.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:X3e}]};en(lJ,pt,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(UV),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&Q3e(n,e,0,t)):(this.value=n=NCt(t.source,e),n.on("tick",PCt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(ICt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==Q3||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(X3e)}});function PCt(e,t){return()=>e.touch(t).run()}function NCt(e,t){const n=mpt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),Q3e(n,t,!0).on("end",()=>s=!0)}function Q3e(e,t,n,r){var i=ln(t.forces),s,o,a,u;for(s=0,o=UV.length;s<o;++s)a=UV[s],a!==Q3&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=Q3+s,a=n||t.modified(Q3,s)?OCt(i[s]):r&&DCt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(Q3+s,null);return e.numForces=i.length,e}function DCt(e,t){var n,r;for(n in e)if(Rr(r=e[n])&&t.modified(uc(r)))return 1;return 0}function OCt(e){var t,n;gn(xfe,e.force)||vt("Unrecognized force: "+e.force),t=xfe[e.force]();for(n in e)Rr(t[n])&&MCt(t[n],e[n],e);return t}function MCt(e,t,n){e(Rr(t)?r=>t(r,n):t)}const LCt=Object.freeze(Object.defineProperty({__proto__:null,force:lJ},Symbol.toStringTag,{value:"Module"}));function zV(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function cJ(e){pt.call(this,null,e)}cJ.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const FCt=e=>e.values;en(cJ,pt,{transform(e,t){t.source||vt("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&MM(o.data)&&i.rem.push(o.data)}),this.value=s=_K({values:ln(e.keys).reduce((o,a)=>(o.key(a),o),$Ct()).entries(i.source)},FCt),n&&s.each(o=>{o.children&&(o=Vi(o.data),i.add.push(o),i.source.push(o))}),zV(s,Fn,Fn)),i.source.root=s,i}});function $Ct(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function M1(e){pt.call(this,null,e)}const BCt=(e,t)=>e.parent===t.parent?1:2;en(M1,pt,{transform(e,t){(!t.source||!t.source.root)&&vt(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Ww(e.sort,o=>o.data)),jCt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?BCt:KT);try{this.value=n(i)}catch(o){vt(o)}return i.each(o=>UCt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function jCt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function UCt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const VV=["x","y","r","depth","children"];function fJ(e){M1.call(this,e)}fJ.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:VV.length,default:VV}]};en(fJ,M1,{layout:vmt,params:["radius","size","padding"],fields:VV});const HV=["x0","y0","x1","y1","depth","children"];function dJ(e){M1.call(this,e)}dJ.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:HV.length,default:HV}]};en(dJ,M1,{layout:bmt,params:["size","round","padding"],fields:HV});function hJ(e){pt.call(this,null,e)}hJ.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};en(hJ,pt,{transform(e,t){t.source||vt("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?zV(cue().id(e.key).parentId(e.parentKey)(i.source),e.key,np):zV(cue()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const _fe={tidy:Rmt,cluster:U0t},qV=["x","y","depth","children"];function pJ(e){M1.call(this,e)}pJ.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:qV.length,default:qV}]};en(pJ,M1,{layout(e){const t=e||"tidy";if(gn(_fe,t))return _fe[t]();vt("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:qV});function mJ(e){pt.call(this,[],e)}mJ.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};en(mJ,pt,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||vt("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Fn(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Fn(a)]&&s[Fn(u)]&&i.add.push(Vi({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Fn(o)]=1),n.forEach(o=>{(s[Fn(o.source)]||s[Fn(o.target)])&&i.mod.push(o)})),i}});const wfe={binary:Pmt,dice:UR,slice:hM,slicedice:Nmt,squarify:kEe,resquarify:Dmt},WV=["x0","y0","x1","y1","depth","children"];function gJ(e){M1.call(this,e)}gJ.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:WV.length,default:WV}]};en(gJ,M1,{layout(){const e=Imt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{gn(wfe,t)?e.tile(wfe[t]):vt("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:WV});const zCt=Object.freeze(Object.defineProperty({__proto__:null,nest:cJ,pack:fJ,partition:dJ,stratify:hJ,tree:pJ,treelinks:mJ,treemap:gJ},Symbol.toStringTag,{value:"Module"})),IB=4278190080;function VCt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function HCt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=rb(s,o).getContext("2d"),l=rb(s,o).getContext("2d"),c=a&&rb(s,o).getContext("2d");n.forEach(I=>BN(u,I,!1)),BN(l,t,!1),a&&BN(c,t,!0);const f=PB(u,s,o),d=PB(l,s,o),h=a&&PB(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,b,y,x,w,S,C,R;for(b=0;b<o;++b)for(g=0;g<s;++g)w=b*s+g,S=f[w]&IB,R=d[w]&IB,C=a&&h[w]&IB,(S||C||R)&&(y=e(g),x=e(b),!i&&(S||R)&&p.set(y,x),a&&(S||C)&&m.set(y,x));return[p,m]}function PB(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function BN(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>BN(e,s.items,n))}):dh[r].draw(e,{items:n?t.map(qCt):t})}function qCt(e){const t=LM(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const wy=5,Gc=31,D4=32,kv=new Uint32Array(D4+1),o0=new Uint32Array(D4+1);o0[0]=0;kv[0]=~o0[0];for(let e=1;e<=D4;++e)o0[e]=o0[e-1]<<1|1,kv[e]=~o0[e];function WCt(e,t){const n=new Uint32Array(~~((e*t+D4)/D4));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>wy]&1<<(a&Gc)},set:(s,o)=>{const a=o*e+s;r(a>>>wy,1<<(a&Gc))},clear:(s,o)=>{const a=o*e+s;i(a>>>wy,~(1<<(a&Gc)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>wy,h=f>>>wy,d===h){if(n[d]&kv[c&Gc]&o0[(f&Gc)+1])return!0}else{if(n[d]&kv[c&Gc]||n[h]&o0[(f&Gc)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>wy,d=c>>>wy,f===d)r(f,kv[l&Gc]&o0[(c&Gc)+1]);else for(r(f,kv[l&Gc]),r(d,o0[(c&Gc)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>wy,d=c>>>wy,f===d)i(f,o0[l&Gc]|kv[(c&Gc)+1]);else for(i(f,o0[l&Gc]),i(d,kv[(c&Gc)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function GCt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>WCt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function YCt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=nh.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,b,y;for(let x=0;x<u;++x)d=a[x].x,p=a[x].y,h=a[x].x2===void 0?d:a[x].x2,m=a[x].y2===void 0?p:a[x].y2,g=(d+h)/2,b=(p+m)/2,y=Math.abs(h-d+m-p),y>=f&&(f=y,o.x=g,o.y=b);return g=c/2,b=l/2,d=o.x-g,h=o.x+g,p=o.y-b,m=o.y+b,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function XD(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function Wv(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function KCt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,b=s,y;if(!XD(p,m,d,h,i,s)&&!Wv(e,p,m,h,d,g,o,a)&&!Wv(e,p,m,h,d,h,o,null)){for(;b-g>=1;)y=(g+b)/2,Wv(e,p,m,h,d,y,o,a)?b=y:g=y;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=nh.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,b=0,y,x,w,S,C,R,I,O,M,L,H,D,B,z,G,Z,ne;for(let ue=0;ue<f;++ue){for(y=c[ue].x,w=c[ue].y,x=c[ue].x2===void 0?y:c[ue].x2,S=c[ue].y2===void 0?w:c[ue].y2,y>x&&(ne=y,y=x,x=ne),w>S&&(ne=w,w=S,S=ne),M=e(y),H=e(x),L=~~((M+H)/2),D=e(w),z=e(S),B=~~((D+z)/2),I=L;I>=M;--I)for(O=B;O>=D;--O)Z=u(I,O,p,h,d),Z&&([l.x,l.y,p,m]=Z);for(I=L;I<=H;++I)for(O=B;O<=z;++O)Z=u(I,O,p,h,d),Z&&([l.x,l.y,p,m]=Z);!m&&!n&&(G=Math.abs(x-y+S-w),C=(y+x)/2,R=(w+S)/2,G>=b&&!XD(C,R,h,d,i,s)&&!Wv(e,C,R,d,h,d,o,null)&&(b=G,l.x=C,l.y=R,g=!0))}return m||g?(C=h/2,R=d/2,o.setRange(e(l.x-C),e(l.y-R),e(l.x+C),e(l.y+R)),l.align="center",l.baseline="middle",!0):!1}}const XCt=[-1,-1,1,1],QCt=[-1,1,-1,1];function JCt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=nh.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,b=!1,y=0,x,w,S,C,R,I,O,M,L,H,D,B;for(let z=0;z<f;++z){for(x=c[z].x,S=c[z].y,w=c[z].x2===void 0?x:c[z].x2,C=c[z].y2===void 0?S:c[z].y2,p.push([e((x+w)/2),e((S+C)/2)]);p.length;)if([O,M]=p.pop(),!(o.get(O,M)||a.get(O,M)||u.get(O,M))){u.set(O,M);for(let G=0;G<4;++G)R=O+XCt[G],I=M+QCt[G],u.outOfBounds(R,I,R,I)||p.push([R,I]);if(R=e.invert(O),I=e.invert(M),L=m,H=s,!XD(R,I,h,d,i,s)&&!Wv(e,R,I,d,h,L,o,a)&&!Wv(e,R,I,d,h,d,o,null)){for(;H-L>=1;)D=(L+H)/2,Wv(e,R,I,d,h,D,o,a)?H=D:L=D;L>m&&(l.x=R,l.y=I,m=L,g=!0)}}!g&&!n&&(B=Math.abs(w-x+C-S),R=(x+w)/2,I=(S+C)/2,B>=y&&!XD(R,I,h,d,i,s)&&!Wv(e,R,I,d,h,d,o,null)&&(y=B,l.x=R,l.y=I,b=!0))}return g||b?(R=h/2,I=d/2,o.setRange(e(l.x-R),e(l.y-I),e(l.x+R),e(l.y+I)),l.align="center",l.baseline="middle",!0):!1}}const ZCt=["right","center","left"],eAt=["bottom","middle","top"];function tAt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,b,y,x,w,S,C,R,I,O,M,L;for(let H=0;H<u;++H){if(h=(n[H]&3)-1,p=(n[H]>>>2&3)-1,m=h===0&&p===0||r[H]<0,g=h&&p?Math.SQRT1_2:1,b=r[H]<0?-1:1,y=c[1+h]+r[H]*h*g,R=c[4+p]+b*f*p/2+r[H]*p*g,w=R-f/2,S=R+f/2,I=e(y),M=e(w),L=e(S),!d)if(Efe(I,I,M,L,o,a,y,y,w,S,c,m))d=nh.width(l.datum,l.datum.text);else continue;if(C=y+b*d*h/2,y=C-d/2,x=C+d/2,I=e(y),O=e(x),Efe(I,O,M,L,o,a,y,x,w,S,c,m))return l.x=h?h*b<0?x:y:C,l.y=p?p*b<0?S:w:R,l.align=ZCt[h*b+1],l.baseline=eAt[p*b+1],o.setRange(I,M,O,L),!0}return!1}}function Efe(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const NB=0,DB=4,OB=8,MB=0,LB=1,FB=2,nAt={"top-left":NB+MB,top:NB+LB,"top-right":NB+FB,left:DB+MB,middle:DB+LB,right:DB+FB,"bottom-left":OB+MB,bottom:OB+LB,"bottom-right":OB+FB},rAt={naive:YCt,"reduced-search":KCt,floodfill:JCt};function iAt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=sAt(r,f),h=oAt(i,f),p=aAt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",b=uAt(p,m,a,u),y=l===null||l===1/0,x=g&&c==="naive";let w=-1,S=-1;const C=e.map(M=>{const L=y?nh.width(M,M.text):void 0;return w=Math.max(w,L),S=Math.max(S,M.fontSize),{datum:M,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:b(M),textWidth:L}});l=l===null||l===1/0?Math.max(w,S)+Math.max(...r):l;const R=GCt(t[0],t[1],l);let I;if(!x){n&&C.sort((H,D)=>n(H.datum,D.datum));let M=!1;for(let H=0;H<h.length&&!M;++H)M=h[H]===5||d[H]<0;const L=(p&&o||g)&&e.map(H=>H.datum);I=s.length||L?HCt(R,L||[],s,M,g):VCt(R,o&&C)}const O=g?rAt[c](R,I,o,u):tAt(R,I,h,d);return C.forEach(M=>M.opacity=+O(M)),C}function sAt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function oAt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=nAt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function aAt(e){return e&&e.mark&&e.mark.marktype}function uAt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const GV=["x","y","opacity","align","baseline"],J3e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function yJ(e){pt.call(this,null,e)}yJ.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:J3e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:GV.length,default:GV}]};en(yJ,pt,{transform(e,t){function n(s){const o=e[s];return Rr(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&vt("Size parameter should be specified as a [width, height] array.");const i=e.as||GV;return iAt(t.materialize(t.SOURCE).source||[],e.size,e.sort,ln(e.offset==null?1:e.offset),ln(e.anchor||J3e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const lAt=Object.freeze(Object.defineProperty({__proto__:null,label:yJ},Symbol.toStringTag,{value:"Module"}));function Z3e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function vJ(e){pt.call(this,null,e)}vJ.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};en(vJ,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Z3e(r,e.groupby),s=(e.groupby||[]).map(Wo),o=s.length,a=e.as||[Wo(e.x),Wo(e.y)],u=[];i.forEach(l=>{fCe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Vi(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const YV={constant:IX,linear:PX,log:aCe,exp:uCe,pow:lCe,quad:NX,poly:cCe},cAt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function bJ(e){pt.call(this,null,e)}bJ.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(YV)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};en(bJ,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Z3e(r,e.groupby),s=(e.groupby||[]).map(Wo),o=e.method||"linear",a=e.order==null?3:e.order,u=cAt(o,a),l=e.as||[Wo(e.x),Wo(e.y)],c=YV[o],f=[];let d=e.extent;gn(YV,o)||vt("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Vi({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||dg(h,e.x),b=y=>{const x={};for(let w=0;w<s.length;++w)x[s[w]]=h.dims[w];x[l[0]]=y[0],x[l[1]]=y[1],f.push(Vi(x))};o==="linear"||o==="constant"?g.forEach(y=>b([y,m.predict(y)])):VM(m.predict,g,25,200).forEach(b)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const fAt=Object.freeze(Object.defineProperty({__proto__:null,loess:vJ,regression:bJ},Symbol.toStringTag,{value:"Module"}));function xJ(e){pt.call(this,null,e)}xJ.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const dAt=[-1e5,-1e5,1e5,1e5];en(xJ,pt,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:dAt;const s=this.value=lK.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!pAt(u)?hAt(u):null}return t.reflow(e.modified()).modifies(n)}});function hAt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function pAt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const mAt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:xJ},Symbol.toStringTag,{value:"Module"}));var $B=Math.PI/180,J3=64,jN=2048;function gAt(){var e=[256,256],t,n,r,i,s,o,a,u=eke,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(rb()),m=wAt((e[0]>>5)*e[1]),g=null,b=l.length,y=-1,x=[],w=l.map(C=>({text:t(C),font:n(C),style:i(C),weight:s(C),rotate:o(C),size:~~(r(C)+1e-14),padding:a(C),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:C})).sort((C,R)=>R.size-C.size);++y<b;){var S=w[y];S.x=e[0]*(c()+.5)>>1,S.y=e[1]*(c()+.5)>>1,yAt(p,S,w,y),S.hasText&&h(m,S,g)&&(x.push(S),g?bAt(g,S):g=[{x:S.x+S.x0,y:S.y+S.y0},{x:S.x+S.x1,y:S.y+S.y1}],S.x-=e[0]>>1,S.y-=e[1]>>1)}return x};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(J3<<5)/m,p.height=jN/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var b=m.x,y=m.y,x=Math.hypot(e[0],e[1]),w=u(e),S=c()<.5?1:-1,C=-S,R,I,O;(R=w(C+=S))&&(I=~~R[0],O=~~R[1],!(Math.min(Math.abs(I),Math.abs(O))>=x));)if(m.x=b+I,m.y=y+O,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!vAt(m,p,e[0]))&&(!g||xAt(m,g))){for(var M=m.sprite,L=m.width>>5,H=e[0]>>5,D=m.x-(L<<4),B=D&127,z=32-B,G=m.y1-m.y0,Z=(m.y+m.y0)*H+(D>>5),ne,ue=0;ue<G;ue++){ne=0;for(var X=0;X<=L;X++)p[Z+X]|=ne<<z|(X<L?(ne=M[ue*L+X])>>>B:0);Z+=H}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=zx(p),f):n},f.fontStyle=function(p){return arguments.length?(i=zx(p),f):i},f.fontWeight=function(p){return arguments.length?(s=zx(p),f):s},f.rotate=function(p){return arguments.length?(o=zx(p),f):o},f.text=function(p){return arguments.length?(t=zx(p),f):t},f.spiral=function(p){return arguments.length?(u=EAt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=zx(p),f):r},f.padding=function(p){return arguments.length?(a=zx(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function yAt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(J3<<5)/s,jN/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*$B),g=Math.cos(t.rotate*$B),b=c*g,y=c*m,x=d*g,w=d*m;c=Math.max(Math.abs(b+w),Math.abs(b-w))+31>>5<<5,d=~~Math.max(Math.abs(y+x),Math.abs(y-x))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=J3<<5&&(o=0,a+=u,u=0),a+d>=jN)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*$B),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var S=i.getImageData(0,0,(J3<<5)/s,jN/s).data,C=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)C[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var R=0,I=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var O=f*p+(h>>5),M=S[(a+p)*(J3<<5)+(o+h)<<2]?1<<31-h%32:0;C[O]|=M,R|=M}R?I=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+I,t.sprite=C.slice(0,(t.y1-t.y0)*f)}}}function vAt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function bAt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function xAt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function eke(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function _At(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function wAt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function zx(e){return typeof e=="function"?e:function(){return e}}var EAt={archimedean:eke,rectangular:_At};const tke=["x","y","font","fontSize","fontStyle","fontWeight","angle"],SAt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function _J(e){pt.call(this,gAt(),e)}_J.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:tke}]};en(_J,pt,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&vt("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return Rr(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||SAt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||tke;let a=e.fontSize||14,u;if(Rr(a)?u=e.fontSizeRange:a=mc(a),u){const p=a,m=Ii("sqrt")().domain(dg(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(ip).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const TAt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:_J},Symbol.toStringTag,{value:"Module"})),CAt=e=>new Uint8Array(e),AAt=e=>new Uint16Array(e),Dk=e=>new Uint32Array(e);function kAt(){let e=8,t=[],n=Dk(0),r=c5(0,e),i=c5(0,e);return{data:()=>t,seen:()=>n=RAt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=c5(s,e,r),i=c5(s,e))}}}function RAt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function c5(e,t,n){const r=(t<257?CAt:t<65537?AAt:Dk)(e);return n&&r.set(n),r}function Sfe(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Tfe(){let e=Dk(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=Dk(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=IAt(h,d),c)p=t,m=e,t=Array(c+f),e=Dk(c+f),PAt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[wlt(u,a[0],0,l),vb(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function IAt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Clt(e,t)}function PAt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function wJ(e){pt.call(this,kAt(),e),this._indices=null,this._dims=null}wJ.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};en(wJ,pt,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Tfe()),s.push(Sfe(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,b,y,x,w,S,C,R;if(l.set(u),t.rem.length&&(x=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},y=t.mod,S=0,C=y.length;S<C;++S)w[y[S]._index]=1;for(S=0;S<h;++S)R=r[S],(!o[S]||e.modified("fields",S)||t.modified(R.fields))&&(b=R.fname,(m=p[b])||(s[b]=g=Tfe(),p[b]=m=g.insert(R,t.source,0)),o[S]=Sfe(g,S,i[S]).onAdd(m,u));for(S=0,C=a.data().length;S<C;++S)x[S]||(l[S]!==u[S]?f.push(S):w[S]&&u[S]!==c&&d.push(S));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),b=i.prev(),y=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)b[d]=y,g[d]!==y&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,b,y;if(f<h)for(g=f,b=Math.min(h,d);g<b;++g)y=u[g],s[y]!==n&&(a[y]=o[y],s[y]=n,r.push(y)),o[y]^=m;else if(f>h)for(g=h,b=Math.min(f,p);g<b;++g)y=u[g],s[y]!==n&&(a[y]=o[y],s[y]=n,r.push(y)),o[y]^=m;if(d>p)for(g=Math.max(f,p),b=d;g<b;++g)y=u[g],s[y]!==n&&(a[y]=o[y],s[y]=n,r.push(y)),o[y]^=m;else if(d<p)for(g=Math.max(h,d),b=p;g<b;++g)y=u[g],s[y]!==n&&(a[y]=o[y],s[y]=n,r.push(y)),o[y]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function EJ(e){pt.call(this,null,e)}EJ.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};en(EJ,pt,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const NAt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:wJ,resolvefilter:EJ},Symbol.toStringTag,{value:"Module"})),DAt="RawCode",HS="Literal",OAt="Property",MAt="Identifier",LAt="ArrayExpression",FAt="BinaryExpression",nke="CallExpression",$At="ConditionalExpression",BAt="LogicalExpression",jAt="MemberExpression",UAt="ObjectExpression",zAt="UnaryExpression";function U0(e){this.type=e}U0.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=VAt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function VAt(e){switch(e.type){case LAt:return e.elements;case FAt:case BAt:return[e.left,e.right];case nke:return[e.callee].concat(e.arguments);case $At:return[e.test,e.consequent,e.alternate];case jAt:return[e.object,e.property];case UAt:return e.properties;case OAt:return[e.key,e.value];case zAt:return[e.argument];case MAt:case HS:case DAt:default:return[]}}var Rg,Rn,gt,cc,os,aL=1,uI=2,sw=3,rx=4,uL=5,Kw=6,Gf=7,lI=8,HAt=9;Rg={};Rg[aL]="Boolean";Rg[uI]="<end>";Rg[sw]="Identifier";Rg[rx]="Keyword";Rg[uL]="Null";Rg[Kw]="Numeric";Rg[Gf]="Punctuator";Rg[lI]="String";Rg[HAt]="RegularExpression";var qAt="ArrayExpression",WAt="BinaryExpression",GAt="CallExpression",YAt="ConditionalExpression",rke="Identifier",KAt="Literal",XAt="LogicalExpression",QAt="MemberExpression",JAt="ObjectExpression",ZAt="Property",e3t="UnaryExpression",Mu="Unexpected token %0",t3t="Unexpected number",n3t="Unexpected string",r3t="Unexpected identifier",i3t="Unexpected reserved word",s3t="Unexpected end of input",KV="Invalid regular expression",BB="Invalid regular expression: missing /",ike="Octal literals are not allowed in strict mode.",o3t="Duplicate data property in object literal not allowed in strict mode",xl="ILLEGAL",O4="Disabled.",a3t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),u3t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function lL(e,t){if(!e)throw new Error("ASSERT: "+t)}function Py(e){return e>=48&&e<=57}function SJ(e){return"0123456789abcdefABCDEF".includes(e)}function Ok(e){return"01234567".includes(e)}function l3t(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function M4(e){return e===10||e===13||e===8232||e===8233}function cI(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&a3t.test(String.fromCharCode(e))}function QD(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&u3t.test(String.fromCharCode(e))}const c3t={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function ske(){for(;gt<cc;){const e=Rn.charCodeAt(gt);if(l3t(e)||M4(e))++gt;else break}}function XV(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)gt<cc&&SJ(Rn[gt])?(r=Rn[gt++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Ci({},Mu,xl);return String.fromCharCode(i)}function f3t(){var e,t,n,r;for(e=Rn[gt],t=0,e==="}"&&Ci({},Mu,xl);gt<cc&&(e=Rn[gt++],!!SJ(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Ci({},Mu,xl),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function oke(){var e,t;for(e=Rn.charCodeAt(gt++),t=String.fromCharCode(e),e===92&&(Rn.charCodeAt(gt)!==117&&Ci({},Mu,xl),++gt,e=XV("u"),(!e||e==="\\"||!cI(e.charCodeAt(0)))&&Ci({},Mu,xl),t=e);gt<cc&&(e=Rn.charCodeAt(gt),!!QD(e));)++gt,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Rn.charCodeAt(gt)!==117&&Ci({},Mu,xl),++gt,e=XV("u"),(!e||e==="\\"||!QD(e.charCodeAt(0)))&&Ci({},Mu,xl),t+=e);return t}function d3t(){var e,t;for(e=gt++;gt<cc;){if(t=Rn.charCodeAt(gt),t===92)return gt=e,oke();if(QD(t))++gt;else break}return Rn.slice(e,gt)}function h3t(){var e,t,n;return e=gt,t=Rn.charCodeAt(gt)===92?oke():d3t(),t.length===1?n=sw:c3t.hasOwnProperty(t)?n=rx:t==="null"?n=uL:t==="true"||t==="false"?n=aL:n=sw,{type:n,value:t,start:e,end:gt}}function jB(){var e=gt,t=Rn.charCodeAt(gt),n,r=Rn[gt],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++gt,{type:Gf,value:String.fromCharCode(t),start:e,end:gt};default:if(n=Rn.charCodeAt(gt+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return gt+=2,{type:Gf,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:gt};case 33:case 61:return gt+=2,Rn.charCodeAt(gt)===61&&++gt,{type:Gf,value:Rn.slice(e,gt),start:e,end:gt}}}if(o=Rn.substr(gt,4),o===">>>=")return gt+=4,{type:Gf,value:o,start:e,end:gt};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return gt+=3,{type:Gf,value:s,start:e,end:gt};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return gt+=2,{type:Gf,value:i,start:e,end:gt};if(i==="//"&&Ci({},Mu,xl),"<>=!+-*%&|^/".includes(r))return++gt,{type:Gf,value:r,start:e,end:gt};Ci({},Mu,xl)}function p3t(e){let t="";for(;gt<cc&&SJ(Rn[gt]);)t+=Rn[gt++];return t.length===0&&Ci({},Mu,xl),cI(Rn.charCodeAt(gt))&&Ci({},Mu,xl),{type:Kw,value:parseInt("0x"+t,16),start:e,end:gt}}function m3t(e){let t="0"+Rn[gt++];for(;gt<cc&&Ok(Rn[gt]);)t+=Rn[gt++];return(cI(Rn.charCodeAt(gt))||Py(Rn.charCodeAt(gt)))&&Ci({},Mu,xl),{type:Kw,value:parseInt(t,8),octal:!0,start:e,end:gt}}function Cfe(){var e,t,n;if(n=Rn[gt],lL(Py(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=gt,e="",n!=="."){if(e=Rn[gt++],n=Rn[gt],e==="0"){if(n==="x"||n==="X")return++gt,p3t(t);if(Ok(n))return m3t(t);n&&Py(n.charCodeAt(0))&&Ci({},Mu,xl)}for(;Py(Rn.charCodeAt(gt));)e+=Rn[gt++];n=Rn[gt]}if(n==="."){for(e+=Rn[gt++];Py(Rn.charCodeAt(gt));)e+=Rn[gt++];n=Rn[gt]}if(n==="e"||n==="E")if(e+=Rn[gt++],n=Rn[gt],(n==="+"||n==="-")&&(e+=Rn[gt++]),Py(Rn.charCodeAt(gt)))for(;Py(Rn.charCodeAt(gt));)e+=Rn[gt++];else Ci({},Mu,xl);return cI(Rn.charCodeAt(gt))&&Ci({},Mu,xl),{type:Kw,value:parseFloat(e),start:t,end:gt}}function g3t(){var e="",t,n,r,i,s=!1;for(t=Rn[gt],lL(t==="'"||t==='"',"String literal must starts with a quote"),n=gt,++gt;gt<cc;)if(r=Rn[gt++],r===t){t="";break}else if(r==="\\")if(r=Rn[gt++],!r||!M4(r.charCodeAt(0)))switch(r){case"u":case"x":Rn[gt]==="{"?(++gt,e+=f3t()):e+=XV(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Ok(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),gt<cc&&Ok(Rn[gt])&&(s=!0,i=i*8+"01234567".indexOf(Rn[gt++]),"0123".includes(r)&&gt<cc&&Ok(Rn[gt])&&(i=i*8+"01234567".indexOf(Rn[gt++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Rn[gt]===`
`&&++gt;else{if(M4(r.charCodeAt(0)))break;e+=r}return t!==""&&Ci({},Mu,xl),{type:lI,value:e,octal:s,start:n,end:gt}}function y3t(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Ci({},KV)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Ci({},KV)}try{return new RegExp(e,t)}catch{return null}}function v3t(){var e,t,n,r,i;for(e=Rn[gt],lL(e==="/","Regular expression literal must start with a slash"),t=Rn[gt++],n=!1,r=!1;gt<cc;)if(e=Rn[gt++],t+=e,e==="\\")e=Rn[gt++],M4(e.charCodeAt(0))&&Ci({},BB),t+=e;else if(M4(e.charCodeAt(0)))Ci({},BB);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Ci({},BB),i=t.substr(1,t.length-2),{value:i,literal:t}}function b3t(){var e,t,n;for(t="",n="";gt<cc&&(e=Rn[gt],!!QD(e.charCodeAt(0)));)++gt,e==="\\"&&gt<cc?Ci({},Mu,xl):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Ci({},KV,n),{value:n,literal:t}}function x3t(){var e,t,n,r;return os=null,ske(),e=gt,t=v3t(),n=b3t(),r=y3t(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:gt}}function _3t(e){return e.type===sw||e.type===rx||e.type===aL||e.type===uL}function ake(){if(ske(),gt>=cc)return{type:uI,start:gt,end:gt};const e=Rn.charCodeAt(gt);return cI(e)?h3t():e===40||e===41||e===59?jB():e===39||e===34?g3t():e===46?Py(Rn.charCodeAt(gt+1))?Cfe():jB():Py(e)?Cfe():jB()}function Qf(){const e=os;return gt=e.end,os=ake(),gt=e.end,e}function uke(){const e=gt;os=ake(),gt=e}function w3t(e){const t=new U0(qAt);return t.elements=e,t}function Afe(e,t,n){const r=new U0(e==="||"||e==="&&"?XAt:WAt);return r.operator=e,r.left=t,r.right=n,r}function E3t(e,t){const n=new U0(GAt);return n.callee=e,n.arguments=t,n}function S3t(e,t,n){const r=new U0(YAt);return r.test=e,r.consequent=t,r.alternate=n,r}function TJ(e){const t=new U0(rke);return t.name=e,t}function Z3(e){const t=new U0(KAt);return t.value=e.value,t.raw=Rn.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function kfe(e,t,n){const r=new U0(QAt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function T3t(e){const t=new U0(JAt);return t.properties=e,t}function Rfe(e,t,n){const r=new U0(ZAt);return r.key=t,r.value=n,r.kind=e,r}function C3t(e,t){const n=new U0(e3t);return n.operator=e,n.argument=t,n.prefix=!0,n}function Ci(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(lL(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=gt,n.description=i,n}function cL(e){e.type===uI&&Ci(e,s3t),e.type===Kw&&Ci(e,t3t),e.type===lI&&Ci(e,n3t),e.type===sw&&Ci(e,r3t),e.type===rx&&Ci(e,i3t),Ci(e,Mu,e.value)}function fc(e){const t=Qf();(t.type!==Gf||t.value!==e)&&cL(t)}function Xs(e){return os.type===Gf&&os.value===e}function UB(e){return os.type===rx&&os.value===e}function A3t(){const e=[];for(gt=os.start,fc("[");!Xs("]");)Xs(",")?(Qf(),e.push(null)):(e.push(ow()),Xs("]")||fc(","));return Qf(),w3t(e)}function Ife(){gt=os.start;const e=Qf();return e.type===lI||e.type===Kw?(e.octal&&Ci(e,ike),Z3(e)):TJ(e.value)}function k3t(){var e,t,n,r;if(gt=os.start,e=os,e.type===sw)return n=Ife(),fc(":"),r=ow(),Rfe("init",n,r);if(e.type===uI||e.type===Gf)cL(e);else return t=Ife(),fc(":"),r=ow(),Rfe("init",t,r)}function R3t(){var e=[],t,n,r,i={},s=String;for(gt=os.start,fc("{");!Xs("}");)t=k3t(),t.key.type===rke?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Ci({},o3t):i[r]=!0,e.push(t),Xs("}")||fc(",");return fc("}"),T3t(e)}function I3t(){fc("(");const e=CJ();return fc(")"),e}const P3t={if:1};function N3t(){var e,t,n;if(Xs("("))return I3t();if(Xs("["))return A3t();if(Xs("{"))return R3t();if(e=os.type,gt=os.start,e===sw||P3t[os.value])n=TJ(Qf().value);else if(e===lI||e===Kw)os.octal&&Ci(os,ike),n=Z3(Qf());else{if(e===rx)throw new Error(O4);e===aL?(t=Qf(),t.value=t.value==="true",n=Z3(t)):e===uL?(t=Qf(),t.value=null,n=Z3(t)):Xs("/")||Xs("/=")?(n=Z3(x3t()),uke()):cL(Qf())}return n}function D3t(){const e=[];if(fc("("),!Xs(")"))for(;gt<cc&&(e.push(ow()),!Xs(")"));)fc(",");return fc(")"),e}function O3t(){gt=os.start;const e=Qf();return _3t(e)||cL(e),TJ(e.value)}function M3t(){return fc("."),O3t()}function L3t(){fc("[");const e=CJ();return fc("]"),e}function F3t(){var e,t,n;for(e=N3t();;)if(Xs("."))n=M3t(),e=kfe(".",e,n);else if(Xs("("))t=D3t(),e=E3t(e,t);else if(Xs("["))n=L3t(),e=kfe("[",e,n);else break;return e}function Pfe(){const e=F3t();if(os.type===Gf&&(Xs("++")||Xs("--")))throw new Error(O4);return e}function UN(){var e,t;if(os.type!==Gf&&os.type!==rx)t=Pfe();else{if(Xs("++")||Xs("--"))throw new Error(O4);if(Xs("+")||Xs("-")||Xs("~")||Xs("!"))e=Qf(),t=UN(),t=C3t(e.value,t);else{if(UB("delete")||UB("void")||UB("typeof"))throw new Error(O4);t=Pfe()}}return t}function Nfe(e){let t=0;if(e.type!==Gf&&e.type!==rx)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function $3t(){var e,t,n,r,i,s,o,a,u,l;if(e=os,u=UN(),r=os,i=Nfe(r),i===0)return u;for(r.prec=i,Qf(),t=[e,os],o=UN(),s=[u,r,o];(i=Nfe(os))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Afe(a,u,o),s.push(n);r=Qf(),r.prec=i,s.push(r),t.push(os),n=UN(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Afe(s[l-1].value,s[l-2],n),l-=2;return n}function ow(){var e,t,n;return e=$3t(),Xs("?")&&(Qf(),t=ow(),fc(":"),n=ow(),e=S3t(e,t,n)),e}function CJ(){const e=ow();if(Xs(","))throw new Error(O4);return e}function AJ(e){Rn=e,gt=0,cc=Rn.length,os=null,uke();const t=CJ();if(os.type!==uI)throw new Error("Unexpect token after expression.");return t}var lke={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function cke(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&vt("Missing arguments to clamp function."),o.length>3&&vt("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&vt("Missing arguments to if function."),o.length>3&&vt("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function B3t(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function fke(e){e=e||{};const t=e.allowed?R0(e.allowed):{},n=e.forbidden?R0(e.forbidden):{},r=e.constants||lke,i=(e.functions||cke)(f),s=e.globalvar,o=e.fieldvar,a=Rr(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(cn(p))return p;const m=d[p.type];return m==null&&vt("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:gn(n,m)?vt("Illegal identifier: "+m):gn(r,m)?r[m]:gn(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const b=f(p.property);return g===o&&(l[B3t(b)]=1),m&&(c-=1),g+(m?"."+b:"["+b+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&vt("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,b=gn(i,m)&&i[m];return b||vt("Unrecognized function: "+m),Rr(b)?b(g):b+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const j3t="Literal";var Ig,U3t=1,z3t=2,V3t=3,H3t=4,q3t=5,W3t=6,G3t=7,Y3t=8,K3t=9;Ig={};Ig[U3t]="Boolean";Ig[z3t]="<end>";Ig[V3t]="Identifier";Ig[H3t]="Keyword";Ig[q3t]="Null";Ig[W3t]="Numeric";Ig[G3t]="Punctuator";Ig[Y3t]="String";Ig[K3t]="RegularExpression";const Dfe=Symbol("vega_selection_getter");function dke(e){return(!e.getter||!e.getter[Dfe])&&(e.getter=tp(e.field),e.getter[Dfe]=!0),e.getter}const kJ="intersect",Ofe="union",X3t="vlMulti",Q3t="vlPoint",Mfe="or",J3t="and",Am="_vgsid_",L4=tp(Am),Z3t="E",ekt="R",tkt="R-E",nkt="R-LE",rkt="R-RE",JD="index:unit";function Lfe(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=dke(a)(e),tb(o)&&(o=sc(o)),tb(r[s])&&(r[s]=sc(r[s])),xt(r[s])&&tb(r[s][0])&&(r[s]=r[s].map(sc)),a.type===Z3t){if(xt(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===ekt){if(!PE(o,r[s]))return!1}else if(a.type===rkt){if(!PE(o,r[s],!0,!1))return!1}else if(a.type===tkt){if(!PE(o,r[s],!1,!1))return!1}else if(a.type===nkt&&!PE(o,r[s],!1,!0))return!1;return!0}function ikt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[JD]&&r[JD].value:void 0,o=n===kJ,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=Lfe(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=Lfe(t,l),o^h)return h;return a&&o}const hke=VT(L4),skt=hke.left,okt=hke.right;function akt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[JD]&&r[JD].value:void 0,o=n===kJ,a=L4(t),u=skt(i,a);if(u===i.length||L4(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(okt(i,a)-u<s.size)return!1}return!0}function ukt(e,t){return e.map(n=>kr(t.fields?{values:t.fields.map(r=>dke(r)(n.datum))}:{[Am]:L4(n.datum)},t))}function lkt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,b,y,x=s.length,w=0,S,C;w<x;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(S=0,C=c.length;S<C;++S)h=c[S],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=b=h.type.charAt(0),y=zB[`${b}_union`],m[d]=y(g,ln(f[S]));n&&(g=a[d]||(a[d]=[]),g.push(ln(f).reduce((R,I,O)=>(R[c[O].field]=I,R),{})))}else h=Am,p=L4(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Am]:p}));if(t=t||Ofe,o[Am]?o[Am]=zB[`${Am}_${t}`](...Object.values(o[Am])):Object.keys(o).forEach(R=>{o[R]=Object.keys(o[R]).map(I=>o[R][I]).reduce((I,O)=>I===void 0?O:zB[`${u[R]}_${t}`](I,O))}),s=Object.keys(a),n&&s.length){const R=r?Q3t:X3t;o[R]=t===Ofe?{[Mfe]:s.reduce((I,O)=>(I.push(...a[O]),I),[])}:{[J3t]:s.map(I=>({[Mfe]:a[I]}))}}return o}var zB={[`${Am}_union`]:Mlt,[`${Am}_intersect`]:Dlt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=sc(t[0]),r=sc(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=sc(t[0]),r=sc(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const ckt=":",fkt="@";function RJ(e,t,n,r){t[0].type!==j3t&&vt("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&pi(t).value,o="unit",a=fkt+o,u=ckt+i;s===kJ&&!gn(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),gn(r,u)||(r[u]=n.getData(i).tuplesRef())}function pke(e){const t=this.context.data[e];return t?t.values.value:[]}function dkt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function hkt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(np).insert(t)),1}function pkt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const fI=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},mkt=fI("format"),mke=fI("timeFormat"),gkt=fI("utcFormat"),ykt=fI("timeParse"),vkt=fI("utcParse"),f5=new Date(2e3,0,1);function fL(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(f5.setYear(2e3),f5.setMonth(e),f5.setDate(t),mke.call(this,f5,n))}function bkt(e){return fL.call(this,e,1,"%B")}function xkt(e){return fL.call(this,e,1,"%b")}function _kt(e){return fL.call(this,0,2+e,"%A")}function wkt(e){return fL.call(this,0,2+e,"%a")}const Ekt=":",Skt="@",QV="%",gke="$";function IJ(e,t,n,r){t[0].type!==HS&&vt("First argument to data functions must be a string literal.");const i=t[0].value,s=Ekt+i;if(!gn(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function Tkt(e,t,n,r){t[0].type!==HS&&vt("First argument to indata must be a string literal."),t[1].type!==HS&&vt("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=Skt+s;gn(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function uf(e,t,n,r){if(t[0].type===HS)Ffe(n,r,t[0].value);else for(e in n.scales)Ffe(n,r,e)}function Ffe(e,t,n){const r=QV+n;if(!gn(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Pg(e,t){if(Rr(e))return e;if(cn(e)){const n=t.scales[e];return n&&Uwt(n.value)?n.value:void 0}}function Ckt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=uf,n._range=uf,n._scale=uf;const r=i=>"_["+(i.type===HS?Jt(QV+i.value):Jt(QV)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function PJ(e,t){return function(n,r,i){if(n){const s=Pg(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const Akt=PJ("area",Rpt),kkt=PJ("bounds",Dpt),Rkt=PJ("centroid",Bpt);function Ikt(e,t){const n=Pg(e,(t||this).context);return n&&n.scale()}function Pkt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function NJ(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Nkt(){return NJ(this.context.dataflow,"warn",arguments)}function Dkt(){return NJ(this.context.dataflow,"info",arguments)}function Okt(){return NJ(this.context.dataflow,"debug",arguments)}function VB(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function JV(e){const t=xb(e),n=VB(t.r),r=VB(t.g),i=VB(t.b);return .2126*n+.7152*r+.0722*i}function Mkt(e,t){const n=JV(e),r=JV(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function Lkt(){const e=[].slice.call(arguments);return e.unshift({}),kr(...e)}function yke(e,t){return e===t||e!==e&&t!==t?!0:xt(e)?xt(t)&&e.length===t.length?Fkt(e,t):!1:un(e)&&un(t)?vke(e,t):!1}function Fkt(e,t){for(let n=0,r=e.length;n<r;++n)if(!yke(e[n],t[n]))return!1;return!0}function vke(e,t){for(const n in e)if(!yke(e[n],t[n]))return!1;return!0}function $fe(e){return t=>vke(e,t)}function $kt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?np:xt(n)||MM(n)?n:$fe(n),c.remove(f)),t&&c.insert(t),r&&(f=$fe(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function Bkt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function jkt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Bfe={};function Ukt(e,t){const n=Bfe[t]||(Bfe[t]=tp(t));return xt(e)?e.map(n):n(e)}function DJ(e){return xt(e)||ArrayBuffer.isView(e)?e:null}function OJ(e){return DJ(e)||(cn(e)?e:null)}function zkt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return DJ(e).join(...n)}function Vkt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return OJ(e).indexOf(...n)}function Hkt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return OJ(e).lastIndexOf(...n)}function qkt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return OJ(e).slice(...n)}function Wkt(e,t,n){return Rr(n)&&vt("Function argument passed to replace."),String(e).replace(t,n)}function Gkt(e){return DJ(e).slice().reverse()}function Ykt(e,t,n){return iQ(e||0,t||0,n||0)}function Kkt(e,t){const n=Pg(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Xkt(e,t){const n=Pg(e,(t||this).context);return n?n.copy():void 0}function Qkt(e,t){const n=Pg(e,(t||this).context);return n?n.domain():[]}function Jkt(e,t,n){const r=Pg(e,(n||this).context);return r?xt(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Zkt(e,t){const n=Pg(e,(t||this).context);return n&&n.range?n.range():[]}function e4t(e,t,n){const r=Pg(e,(n||this).context);return r?r(t):void 0}function t4t(e,t,n,r,i){e=Pg(e,(i||this).context);const s=uAe(t,n);let o=e.domain(),a=o[0],u=pi(o),l=pc;return u-a?l=XCe(e,a,u):e=(e.interpolator?Ii("sequential")().interpolator(e.interpolator()):Ii("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==pi(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function n4t(e,t,n){const r=Pg(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function r4t(e){let t=null;return function(n){return n?I4(n,t=t||jS(e)):e}}const bke=e=>e.data;function xke(e,t){const n=pke.call(t,e);return n.root&&n.root.lookup||{}}function i4t(e,t,n){const r=xke(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(bke):void 0}function s4t(e,t){const n=xke(e,this)[t];return n?n.ancestors().map(bke):void 0}const _ke=()=>typeof window<"u"&&window||null;function o4t(){const e=_ke();return e?e.screen:{}}function a4t(){const e=_ke();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function u4t(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function wke(e,t,n){if(!e)return[];const[r,i]=e,s=new qa().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return s3e(o,s,l4t(t))}function l4t(e){let t=null;if(e){const n=ln(e.marktype),r=ln(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function c4t(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=ln(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function f4t(e){return ln(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function d4t(e,t,n){const{x:r,y:i,mark:s}=n,o=new qa().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),wke([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>h4t(u.x,u.y,t))}function h4t(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const F4={random(){return ip()},cumulativeNormal:jM,cumulativeLogNormal:SX,cumulativeUniform:kX,densityNormal:bX,densityLogNormal:EX,densityUniform:AX,quantileNormal:UM,quantileLogNormal:TX,quantileUniform:RX,sampleNormal:BM,sampleLogNormal:wX,sampleUniform:CX,isArray:xt,isBoolean:nx,isDate:tb,isDefined(e){return e!==void 0},isNumber:Ri,isObject:un,isRegExp:oTe,isString:cn,isTuple:MM,isValid(e){return e!=null&&e===e},toBoolean:rX,toDate(e){return iX(e)},toNumber:sc,toString:sX,indexof:Vkt,join:zkt,lastindexof:Hkt,replace:Wkt,reverse:Gkt,slice:qkt,flush:iTe,lerp:aTe,merge:Lkt,pad:cTe,peek:pi,pluck:Ukt,span:qR,inrange:PE,truncate:fTe,rgb:xb,lab:q8,hcl:W8,hsl:V8,luminance:JV,contrast:Mkt,sequence:Kd,format:mkt,utcFormat:gkt,utcParse:vkt,utcOffset:TTe,utcSequence:kTe,timeFormat:mke,timeParse:ykt,timeOffset:STe,timeSequence:ATe,timeUnitSpecifier:hTe,monthFormat:bkt,monthAbbrevFormat:xkt,dayFormat:_kt,dayAbbrevFormat:wkt,quarter:eTe,utcquarter:tTe,week:mTe,utcweek:vTe,dayofyear:pTe,utcdayofyear:yTe,warn:Nkt,info:Dkt,debug:Okt,extent(e){return dg(e)},inScope:Pkt,intersect:wke,clampRange:nTe,pinchDistance:Bkt,pinchAngle:jkt,screen:o4t,containerSize:u4t,windowSize:a4t,bandspace:Ykt,setdata:hkt,pathShape:r4t,panLinear:XSe,panLog:QSe,panPow:JSe,panSymlog:ZSe,zoomLinear:QK,zoomLog:JK,zoomPow:PD,zoomSymlog:ZK,encode:pkt,modify:$kt,lassoAppend:c4t,lassoPath:f4t,intersectLasso:d4t},p4t=["view","item","group","xy","x","y"],m4t="event.vega.",Eke="this.",MJ={},Ske={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Jt(gke+e)}]`,functions:g4t,constants:lke,visitors:MJ},Tke=fke(Ske);function g4t(e){const t=cke(e);p4t.forEach(n=>t[n]=m4t+n);for(const n in F4)t[n]=Eke+n;return kr(t,Ckt(e,F4,MJ)),t}function wa(e,t,n){return arguments.length===1?F4[e]:(F4[e]=t,n&&(MJ[e]=n),Tke.functions[e]=Eke+e,this)}wa("bandwidth",Kkt,uf);wa("copy",Xkt,uf);wa("domain",Qkt,uf);wa("range",Zkt,uf);wa("invert",Jkt,uf);wa("scale",e4t,uf);wa("gradient",t4t,uf);wa("geoArea",Akt,uf);wa("geoBounds",kkt,uf);wa("geoCentroid",Rkt,uf);wa("geoShape",n4t,uf);wa("geoScale",Ikt,uf);wa("indata",dkt,Tkt);wa("data",pke,IJ);wa("treePath",i4t,IJ);wa("treeAncestors",s4t,IJ);wa("vlSelectionTest",ikt,RJ);wa("vlSelectionIdTest",akt,RJ);wa("vlSelectionResolve",lkt,RJ);wa("vlSelectionTuples",ukt);function pg(e,t){const n={};let r;try{e=cn(e)?e:Jt(e)+"",r=AJ(e)}catch{vt("Expression parse error: "+e)}r.visit(s=>{if(s.type!==nke)return;const o=s.callee.name,a=Ske.visitors[o];a&&a(o,s.arguments,t,n)});const i=Tke(r);return i.globals.forEach(s=>{const o=gke+s;!gn(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:kr({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function y4t(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const v4t=R0(["rule"]),jfe=R0(["group","image","rect"]);function b4t(e,t){let n="";return v4t[t]||(e.x2&&(e.x?(jfe[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(jfe[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function LJ(e){return(e+"").toLowerCase()}function x4t(e){return LJ(e)==="operator"}function _4t(e){return LJ(e)==="collect"}function i3(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function w4t(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var E4t={operator:(e,t)=>i3(e,["_"],t.code),parameter:(e,t)=>i3(e,["datum","_"],t.code),event:(e,t)=>i3(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return i3(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Jt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=b4t(r,n),i+="return m;",i3(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Jt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),w4t(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function S4t(e){const t=this;x4t(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function T4t(e){const t=this;if(e.params){const n=t.get(e.id);n||vt("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function C4t(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=xt(i)?i.map(s=>Ufe(s,n,t)):Ufe(i,n,t)}return t}function Ufe(e,t,n){if(!e||!un(e))return e;for(let r=0,i=zfe.length,s;r<i;++r)if(s=zfe[r],gn(e,s.key))return s.parse(e,t,n);return e}var zfe=[{key:"$ref",parse:A4t},{key:"$key",parse:R4t},{key:"$expr",parse:k4t},{key:"$field",parse:I4t},{key:"$encode",parse:N4t},{key:"$compare",parse:P4t},{key:"$context",parse:D4t},{key:"$subflow",parse:O4t},{key:"$tupleid",parse:M4t}];function A4t(e,t){return t.get(e.$ref)||vt("Operator not defined: "+e.$ref)}function k4t(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=dd(t.parameterExpression(e.$expr),e.$fields))}function R4t(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=nX(e.$key,e.$flat,t.expr.codegen))}function I4t(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=tp(e.$field,e.$name,t.expr.codegen))}function P4t(e,t){const n="c:"+e.$compare+"_"+e.$order,r=ln(e.$compare).map(i=>i&&i.$tupleid?Fn:i);return t.fn[n]||(t.fn[n]=eX(r,e.$order,t.expr.codegen))}function N4t(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=dd(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function D4t(e,t){return t}function O4t(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function M4t(){return Fn}function L4t(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&vt("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function F4t(e){var t=this,n=un(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||vt("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const $4t={skip:!0};function B4t(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function j4t(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],$4t)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(np).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function Cke(e,t,n,r){return new Ake(e,t,n,r)}function Ake(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||E4t,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Vfe(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}Ake.prototype=Vfe.prototype={fork(){const e=new Vfe(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),_4t(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[LJ(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:y4t,parseOperator:S4t,parseOperatorParameters:T4t,parseParameters:C4t,parseStream:L4t,parseUpdate:F4t,getState:B4t,setState:j4t};function U4t(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),kke(t,e.description()))}function kke(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function z4t(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const HB="default";function V4t(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:HB,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?cn(i)?i:i.user:HB,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return cn(r)||(i=r.item,r=r.user),ZV(e,r&&r!==HB?r:i||r),i},{cursor:t})}function ZV(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function ZD(e,t){var n=e._runtime.data;return gn(n,t)||vt("Unrecognized data set: "+t),n[t]}function H4t(e,t){return arguments.length<2?ZD(this,e).values.value:dL.call(this,e,Gw().remove(np).insert(t))}function dL(e,t){YTe(t)||vt("Second argument to changes must be a changeset.");const n=ZD(this,e);return n.modified=!0,this.pulse(n.input,t)}function q4t(e,t){return dL.call(this,e,Gw().insert(t))}function W4t(e,t){return dL.call(this,e,Gw().remove(t))}function Rke(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Ike(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function hL(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function G4t(e){var t=hL(e),n=Rke(e),r=Ike(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function Y4t(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=hL(e),o=t.changedTouches?t.changedTouches[0]:t,s=iL(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=K4t(e,n,s),t}function K4t(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;cn(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:mc(e),item:mc(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Hfe="view",X4t="timer",Q4t="window",J4t={trap:!1};function Z4t(e){const t=kr({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{xt(r[s])&&(r[s]=R0(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function Pke(e,t,n,r){e._eventListeners.push({type:n,sources:ln(t),handler:r})}function eRt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function d5(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||un(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function tRt(e,t,n){var r=this,i=new $M(n),s=function(l,c){r.runAsync(null,()=>{e===Hfe&&eRt(r,t)&&l.preventDefault(),i.receive(Y4t(r,l,c))})},o;if(e===X4t)d5(r,"timer",t)&&r.timer(s,t);else if(e===Hfe)d5(r,"view",t)&&r.addEventListener(t,s,J4t);else if(e===Q4t?d5(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&d5(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);Pke(r,o,t,s)}return i}function qfe(e){return e.item}function Wfe(e){return e.item.mark.source}function Gfe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function nRt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",qfe),Wfe,Gfe(e)),this.on(this.events("view","pointerout",qfe),Wfe,Gfe(t)),this}function rRt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function rh(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const iRt="vega-bind",sRt="vega-bind-name",oRt="vega-bind-radio";function aRt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=tX(r.debounce,i.update))),(r.input==null&&r.element?uRt:cRt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function uRt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),Pke(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(lRt(i))}}function lRt(e){return typeof Event<"u"?new Event(e):{type:e}}function cRt(e,t,n,r){const i=r.signal(n.signal),s=rh("div",{class:iRt}),o=n.input==="radio"?s:s.appendChild(rh("label"));o.appendChild(rh("span",{class:sRt},n.name||n.signal)),t.appendChild(s);let a=fRt;switch(n.input){case"checkbox":a=dRt;break;case"select":a=hRt;break;case"radio":a=pRt;break;case"range":a=mRt;break}a(e,o,n,i)}function fRt(e,t,n,r){const i=rh("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function dRt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=rh("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function hRt(e,t,n,r){const i=rh("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};eO(o,r)&&(u.selected=!0),i.appendChild(rh("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(eO(n.options[a],o)){i.selectedIndex=a;return}}}function pRt(e,t,n,r){const i=rh("span",{class:oRt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};eO(o,r)&&(u.checked=!0);const l=rh("input",u);l.addEventListener("change",()=>e.update(o));const c=rh("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)eO(a[l].value,o)&&(a[l].checked=!0)}}function mRt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||bb(s,i,100),a=rh("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=rh("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function eO(e,t){return e===t||e+""==t+""}function Nke(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,Rke(e),Ike(e),hL(e),i,s).background(e.background())}function FJ(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function gRt(e,t,n,r){const i=new r(e.loader(),FJ(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,hL(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function yRt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=sL(r);e=n._el=e?qB(n,e,!0):null,U4t(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||aI,a=e?s.renderer:s.headless;return n._renderer=a?Nke(n,n._renderer,e,a):null,n._handler=gRt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=qB(n,t,!0):e.appendChild(rh("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=qB(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{aRt(n,u.element||t,u)})),n}function qB(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const s3=e=>+e||0,vRt=e=>({top:e,bottom:e,left:e,right:e});function Yfe(e){return un(e)?{top:s3(e.top),bottom:s3(e.bottom),left:s3(e.left),right:s3(e.right)}:vRt(s3(e))}async function $J(e,t,n,r){const i=sL(t),s=i&&i.headless;return s||vt("Unrecognized renderer type: "+t),await e.runAsync(),Nke(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function bRt(e,t){e!==Vv.Canvas&&e!==Vv.SVG&&e!==Vv.PNG&&vt("Unrecognized image type: "+e);const n=await $J(this,e,t);return e===Vv.SVG?xRt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function xRt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function _Rt(e,t){return(await $J(this,Vv.Canvas,e,t)).canvas()}async function wRt(e){return(await $J(this,Vv.SVG,e)).svg()}function ERt(e,t,n){return Cke(e,LS,F4,n).parse(t)}function SRt(e){var t=this._runtime.scales;return gn(t,e)||vt("Unrecognized scale or projection: "+e),t[e].value}var Dke="width",Oke="height",BJ="padding",Kfe={skip:!0};function Mke(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===BJ?r.left+r.right:0)}function Lke(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===BJ?r.top+r.bottom:0)}function TRt(e){var t=e._signals,n=t[Dke],r=t[Oke],i=t[BJ];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=Mke(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=Lke(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function CRt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(Dke,n,Kfe),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(Oke,r,Kfe),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function ARt(e){return this._runtime.getState(e||{data:kRt,signals:RRt,recurse:!0})}function kRt(e,t){return t.modified&&xt(t.input.value)&&!e.startsWith("_:vega:_")}function RRt(e,t){return!(e==="parent"||t instanceof LS.proxy)}function IRt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function PRt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(sdt(n,t))}function NRt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",DRt(r))}function DRt(e){return e==null?"":xt(e)?Fke(e):un(e)&&!tb(e)?ORt(e):e+""}function ORt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(xt(n)?Fke(n):$ke(n))}).join(`
`)}function Fke(e){return"["+e.map($ke).join(", ")+"]"}function $ke(e){return xt(e)?"[]":un(e)&&!tb(e)?"{}":e}function MRt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function Bke(e,t){const n=this;if(t=t||{},XE.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=kr({},e.locale,t.locale);n.locale($Te(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Vv.Canvas,n._scenegraph=new NAe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||NRt,n._redraw=!0,n._handler=new aI().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Z4t(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=ERt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:kr({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=Mke(n,n._width),n._viewHeight=Lke(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,TRt(n),z4t(n),V4t(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function h5(e,t){return gn(e._signals,t)?e._signals[t]:vt("Unrecognized signal name: "+Jt(t))}function jke(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Xfe(e,t,n,r){let i=jke(n,r);return i||(i=FJ(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Qfe(e,t,n){const r=jke(t,n);return r&&t._targets.remove(r),e}en(Bke,XE,{async evaluate(e,t,n){if(await XE.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,G4t(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&kN(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&kke(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=h5(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Yfe(e)):Yfe(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(sL(e)||vt("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(XE.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(h5(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:CRt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=FJ(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Xfe(this,e,h5(this,e),t)},removeSignalListener(e,t){return Qfe(this,h5(this,e),t)},addDataListener(e,t){return Xfe(this,e,ZD(this,e).values,t)},removeDataListener(e,t){return Qfe(this,ZD(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=ZV(this,null);this._globalCursor=!!e,t&&ZV(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:PRt,events:tRt,finalize:rRt,hover:nRt,data:H4t,change:dL,insert:q4t,remove:W4t,scale:SRt,initialize:yRt,toImageURL:bRt,toCanvas:_Rt,toSVG:wRt,getState:ARt,setState:IRt,_watchPixelRatio:MRt});const LRt="view",tO="[",nO="]",Uke="{",zke="}",FRt=":",Vke=",",$Rt="@",BRt=">",jRt=/[[\]{}]/,URt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Hke,qke;function ix(e,t,n){return Hke=t||LRt,qke=n||URt,Wke(e.trim()).map(eH)}function zRt(e){return qke[e]}function Mk(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function Wke(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Mk(e,i,Vke,tO+Uke,nO+zke),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function eH(e){return e[0]==="["?VRt(e):HRt(e)}function VRt(e){const t=e.length;let n=1,r;if(n=Mk(e,n,nO,tO,nO),n===t)throw"Empty between selector: "+e;if(r=Wke(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==BRt)throw"Expected '>' after between selector: "+e;r=r.map(eH);const i=eH(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function HRt(e){const t={source:Hke},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===zke){if(a=e.lastIndexOf(Uke),a>=0){try{r=qRt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===$Rt&&(i=++a),u=Mk(e,a,FRt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=Mk(e,a,tO),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=Mk(e,a,nO),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==tO)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||jRt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):zRt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function qRt(e){const t=e.split(Vke);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function WRt(e){return un(e)?e:{type:e||"pad"}}const o3=e=>+e||0,GRt=e=>({top:e,bottom:e,left:e,right:e});function YRt(e){return un(e)?e.signal?e:{top:o3(e.top),bottom:o3(e.bottom),left:o3(e.left),right:o3(e.right)}:GRt(o3(e))}const Lu=e=>un(e)&&!xt(e)?kr({},e):{value:e};function Jfe(e,t,n,r){return n!=null?(un(n)&&!xt(n)||xt(n)&&n.length&&un(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function kl(e,t,n){for(const r in t)Jfe(e,r,t[r]);for(const r in n)Jfe(e,r,n[r],"update")}function iC(e,t,n){for(const r in t)n&&gn(n,r)||(e[r]=kr(e[r]||{},t[r]));return e}function EE(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const jJ="mark",UJ="frame",zJ="scope",KRt="axis",XRt="axis-domain",QRt="axis-grid",JRt="axis-label",ZRt="axis-tick",eIt="axis-title",tIt="legend",nIt="legend-band",rIt="legend-entry",iIt="legend-gradient",Gke="legend-label",sIt="legend-symbol",oIt="legend-title",aIt="title",uIt="title-text",lIt="title-subtitle";function cIt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!EE(u,e)&&WB(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===UJ?i.group:n===jJ?kr({},i.mark,i[t]):null;for(u in c)l=EE(u,e)||(u==="fill"||u==="stroke")&&(EE("fill",e)||EE("stroke",e)),l||WB(s,u,c[u]);ln(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)EE(h,e)||WB(s,h,d[h])}),e=kr({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=kr(o,e.enter),a&&(e.update=kr(a,e.update)),e}function WB(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const Yke=e=>cn(e)?Jt(e):e.signal?`(${e.signal})`:Kke(e);function pL(e){if(e.gradient!=null)return dIt(e);let t=e.signal?`(${e.signal})`:e.color?fIt(e.color):e.field!=null?Kke(e.field):e.value!==void 0?Jt(e.value):void 0;return e.scale!=null&&(t=hIt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${zN(e.exponent)})`),e.mult!=null&&(t+=`*${zN(e.mult)}`),e.offset!=null&&(t+=`+${zN(e.offset)}`),e.round&&(t=`round(${t})`),t}const p5=(e,t,n,r)=>`(${e}(${[t,n,r].map(pL).join(",")})+'')`;function fIt(e){return e.c?p5("hcl",e.h,e.c,e.l):e.h||e.s?p5("hsl",e.h,e.s,e.l):e.l||e.a?p5("lab",e.l,e.a,e.b):e.r||e.g||e.b?p5("rgb",e.r,e.g,e.b):null}function dIt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Jt(n));for(;t.length&&pi(t)==null;)t.pop();return t.unshift(Yke(e.gradient)),`gradient(${t.join(",")})`}function zN(e){return un(e)?"("+pL(e)+")":e}function Kke(e){return Xke(un(e)?e:{datum:e})}function Xke(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):vt("Invalid field reference: "+Jt(e));return e.signal||(r=cn(r)?Ag(r).map(Jt).join("]["):Xke(r)),t+"["+r+"]"}function hIt(e,t){const n=Yke(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+zN(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function pIt(e){let t="";return e.forEach(n=>{const r=pL(n);t+=n.test?`(${n.test})?${r}:`:r}),pi(t)===":"&&(t+="null"),t}function Qke(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=cIt(e,t,n,r,i.config);for(const a in e)o[a]=mIt(e[a],t,s,i);return s}function mIt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=yIt(gIt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function gIt(e){return xt(e)?pIt(e):pL(e)}function yIt(e,t,n,r){const i=pg(e,t);return i.$fields.forEach(s=>r[s]=1),kr(n,i.$params),i.$expr}const vIt="outer",bIt=["value","update","init","react","bind"];function Zfe(e,t){vt(e+' for "outer" push: '+Jt(t))}function Jke(e,t){const n=e.name;if(e.push===vIt)t.signals[n]||Zfe("No prior signal definition",n),bIt.forEach(r=>{e[r]!==void 0&&Zfe("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function tH(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function mL(e,t,n,r){return new tH(e,t,n,r)}function rO(e,t){return mL("operator",e,t)}function Ln(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function $4(e,t){return t?{$field:e,$name:t}:{$field:e}}const nH=$4("key");function ede(e,t){return{$compare:e,$order:t}}function xIt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const _It="ascending",wIt="descending";function EIt(e){return un(e)?(e.order===wIt?"-":"+")+gL(e.op,e.field):""}function gL(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const VJ="scope",rH="view";function gu(e){return e&&e.signal}function SIt(e){return e&&e.expr}function VN(e){if(gu(e))return!0;if(un(e)){for(const t in e)if(VN(e[t]))return!0}return!1}function r0(e,t){return e??t}function $_(e){return e&&e.signal||e}const tde="timer";function B4(e,t){return(e.merge?CIt:e.stream?AIt:e.type?kIt:vt("Invalid stream specification: "+Jt(e)))(e,t)}function TIt(e){return e===VJ?rH:e||rH}function CIt(e,t){const n=e.merge.map(i=>B4(i,t)),r=HJ({merge:n},e,t);return t.addStream(r).id}function AIt(e,t){const n=B4(e.stream,t),r=HJ({stream:n},e,t);return t.addStream(r).id}function kIt(e,t){let n;e.type===tde?(n=t.event(tde,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(TIt(e.source),e.type);const r=HJ({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function HJ(e,t,n){let r=t.between;return r&&(r.length!==2&&vt('Stream "between" parameter must have 2 entries: '+Jt(t)),e.between=[B4(r[0],n),B4(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(RIt(t.marktype,t.markname,t.markrole)),t.source===VJ&&r.push("inScope(event.item)"),r.length&&(e.filter=pg("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function RIt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const IIt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function PIt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||vt("Signal update missing events specification."),cn(s)&&(s=ix(s,t.isSubscope()?VJ:rH)),s=ln(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[DIt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&vt("Signal encode and update are mutually exclusive."),o="encode(item(),"+Jt(r)+")"),i.update=cn(o)?pg(o,t):o.expr!=null?pg(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:IIt,$params:{$value:t.signalRef(o.signal)}}:vt("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(kr(NIt(u,t),i)))}function NIt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):B4(e,t)}}function DIt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function OIt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?vt("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=pg(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>PIt(i,t,n.id))}const vs=e=>(t,n,r)=>mL(e,n,t||void 0,r),Zke=vs("aggregate"),MIt=vs("axisticks"),e4e=vs("bound"),z0=vs("collect"),nde=vs("compare"),LIt=vs("datajoin"),t4e=vs("encode"),FIt=vs("expression"),$It=vs("facet"),BIt=vs("field"),jIt=vs("key"),UIt=vs("legendentries"),zIt=vs("load"),VIt=vs("mark"),HIt=vs("multiextent"),qIt=vs("multivalues"),WIt=vs("overlap"),GIt=vs("params"),n4e=vs("prefacet"),YIt=vs("projection"),KIt=vs("proxy"),XIt=vs("relay"),r4e=vs("render"),QIt=vs("scale"),Xw=vs("sieve"),JIt=vs("sortitems"),i4e=vs("viewlayout"),ZIt=vs("values");let e6t=0;const s4e={min:"min",max:"max",count:"sum"};function t6t(e,t){const n=e.type||"linear";HCe(n)||vt("Unrecognized scale type: "+Jt(n)),t.addScale(e.name,{type:n,domain:void 0})}function n6t(e,t){const n=t.getScale(e.name).params;let r;n.domain=o4e(e.domain,e,t),e.range!=null&&(n.range=u4e(e,t,n)),e.interpolate!=null&&d6t(e.interpolate,n),e.nice!=null&&(n.nice=f6t(e.nice,t)),e.bins!=null&&(n.bins=c6t(e.bins,t));for(r in e)gn(n,r)||r==="name"||(n[r]=Kh(e[r],t))}function Kh(e,t){return un(e)?e.signal?t.signalRef(e.signal):vt("Unsupported object: "+Jt(e)):e}function HN(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Kh(n,t))}function yL(e){vt("Can not find data set: "+Jt(e))}function o4e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&vt("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(xt(e)?r6t:e.fields?s6t:i6t)(e,t,n)}function r6t(e,t,n){return e.map(r=>Kh(r,n))}function i6t(e,t,n){const r=n.getData(e.data);return r||yL(e.data),BS(t.type)?r.valuesRef(n,e.field,a4e(e.sort,!1)):GCe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function s6t(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=cn(o)?{data:r,field:o}:xt(o)||o.signal?o6t(o,n):o,s.push(o),s),[]);return(BS(t.type)?a6t:GCe(t.type)?u6t:l6t)(e,n,i)}function o6t(e,t){const n="_:vega:_"+e6t++,r=z0({});if(xt(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Jt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Xw({})]),{data:n,field:"data"}}function a6t(e,t,n){const r=a4e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||yL(l.data),c.countsRef(t,l.field,r)}),a={groupby:nH,pulse:o};r&&(i=r.op||"count",s=r.field?gL(i,r.field):"count",a.ops=[s4e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(Zke(a));const u=t.add(z0({pulse:Ln(i)}));return s=t.add(ZIt({field:nH,sort:t.sortRef(r),pulse:Ln(u)})),Ln(s)}function a4e(e,t){return e&&(!e.field&&!e.op?un(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?vt("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!s4e[e.op]&&vt("Multiple domain scales can not be sorted using "+e.op)),e}function u6t(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||yL(i.data),s.domainRef(t,i.field)});return Ln(t.add(qIt({values:r})))}function l6t(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||yL(i.data),s.extentRef(t,i.field)});return Ln(t.add(HIt({extents:r})))}function c6t(e,t){return e.signal||xt(e)?HN(e,t):t.objectProperty(e)}function f6t(e,t){return e.signal?t.signalRef(e.signal):un(e)?{interval:Kh(e.interval),step:Kh(e.step)}:Kh(e)}function d6t(e,t){t.interpolate=Kh(e.type||e),e.gamma!=null&&(t.interpolateGamma=Kh(e.gamma))}function u4e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(cn(i)){if(r&&gn(r,i))return e=kr({},e,{range:r[i]}),u4e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=BS(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:vt("Unrecognized scale range value: "+Jt(i))}else if(i.scheme){n.scheme=xt(i.scheme)?HN(i.scheme,t):Kh(i.scheme,t),i.extent&&(n.schemeExtent=HN(i.extent,t)),i.count&&(n.schemeCount=Kh(i.count,t));return}else if(i.step){n.rangeStep=Kh(i.step,t);return}else{if(BS(e.type)&&!xt(i))return o4e(i,e,t);xt(i)||vt("Unsupported range type: "+Jt(i))}return i.map(s=>(xt(s)?HN:Kh)(s,t))}function h6t(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=iH(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=iH(n[i],i,t));t.addProjection(e.name,r)}function iH(e,t,n){return xt(e)?e.map(r=>iH(r,t,n)):un(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:vt("Unsupported parameter object: "+Jt(e)):e}const V0="top",sC="left",oC="right",Ab="bottom",l4e="center",p6t="vertical",m6t="start",g6t="middle",y6t="end",sH="index",qJ="label",v6t="offset",qS="perc",b6t="perc2",Qh="value",dI="guide-label",WJ="guide-title",x6t="group-title",_6t="group-subtitle",rde="symbol",qN="gradient",oH="discrete",aH="size",w6t="shape",E6t="fill",S6t="stroke",T6t="strokeWidth",C6t="strokeDash",A6t="opacity",GJ=[aH,w6t,E6t,S6t,T6t,C6t,A6t],hI={name:1,style:1,interactive:1},wi={value:0},Jh={value:1},vL="group",c4e="rect",YJ="rule",k6t="symbol",Qw="text";function j4(e){return e.type=vL,e.interactive=e.interactive||!1,e}function hd(e,t){const n=(r,i)=>r0(e[r],r0(t[r],i));return n.isVertical=r=>p6t===r0(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>r0(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>r0(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>r0(e.columns,r0(t.columns,+n.isVertical(!0))),n}function f4e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function R6t(e,t,n){const r=t.config.style[n];return r&&r[e]}function bL(e,t,n){return`item.anchor === '${m6t}' ? ${e} : item.anchor === '${y6t}' ? ${t} : ${n}`}const KJ=bL(Jt(sC),Jt(oC),Jt(l4e));function I6t(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},un(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function d4e(e,t){return t?e?un(e)?Object.assign({},e,{offset:d4e(e.offset,t)}):{value:e,offset:t}:t:e}function hh(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=iC(e.encode,t,hI)):e.interactive=!1,e}function P6t(e,t,n,r){const i=hd(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:wi,x:wi,y:wi,width:Lu(f),height:Lu(d)},update:kr({},u,{opacity:Jh,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:wi}};return kl(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),hh({type:c4e,role:iIt,encode:h},r)}function N6t(e,t,n,r,i){const s=hd(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:wi,fill:{scale:t,field:Qh}};p[l]={signal:h+"datum."+qS,mult:u},p[c]=wi,p[f]={signal:h+"datum."+b6t,mult:u},p[d]=Lu(a);const m={enter:p,update:kr({},p,{opacity:Jh}),exit:{opacity:wi}};return kl(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),hh({type:c4e,role:nIt,key:Qh,from:i,encode:m},r)}const D6t=`datum.${qS}<=0?"${sC}":datum.${qS}>=1?"${oC}":"${l4e}"`,O6t=`datum.${qS}<=0?"${Ab}":datum.${qS}>=1?"${V0}":"${g6t}"`;function ide(e,t,n,r){const i=hd(e,t),s=i.isVertical(),o=Lu(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:wi},update:c={opacity:Jh,text:{field:qJ}},exit:{opacity:wi}};return kl(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:r0(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:O6t},f="y",d="x",h="1-"):(l.align=c.align={signal:D6t},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+qS,mult:a},l[d]=c[d]=o,o.offset=r0(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+sH}:void 0,hh({type:Qw,role:Gke,style:dI,key:Qh,from:r,encode:p,overlap:u},n)}function M6t(e,t,n,r,i){const s=hd(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${v6t} : datum.${aH}`,h=l?Lu(l):{field:aH},p=`datum.${sH}`,m=`max(1, ${i})`;let g,b,y,x,w;h.mult=.5,g={enter:b={opacity:wi,x:{signal:d,mult:.5,offset:c},y:h},update:y={opacity:Jh,x:b.x,y:b.y},exit:{opacity:wi}};let S=null,C=null;e.fill||(S=t.symbolBaseFillColor,C=t.symbolBaseStrokeColor),kl(g,{fill:s("symbolFillColor",S),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",C),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),GJ.forEach(M=>{e[M]&&(y[M]=b[M]={scale:e[M],field:Qh})});const R=hh({type:k6t,role:sIt,key:Qh,from:f,clip:l?!0:void 0,encode:g},n.symbols),I=Lu(c);I.offset=s("labelOffset"),g={enter:b={opacity:wi,x:{signal:d,offset:I},y:h},update:y={opacity:Jh,text:{field:qJ},x:b.x,y:b.y},exit:{opacity:wi}},kl(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const O=hh({type:Qw,role:Gke,style:dI,key:Qh,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:wi,height:l?Lu(l):wi,opacity:wi},exit:{opacity:wi},update:y={opacity:Jh,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(x=`ceil(item.mark.items.length / ${m})`,y.row.signal=`${p}%${x}`,y.column.signal=`floor(${p} / ${x})`,w={field:["row",p]}):(y.row.signal=`floor(${p} / ${m})`,y.column.signal=`${p} % ${m}`,w={field:p}),y.column.signal=`(${i})?${y.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:sH}},j4({role:zJ,from:r,encode:iC(g,o,hI),marks:[R,O],name:u,interactive:a,sort:w})}function L6t(e,t){const n=hd(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const XJ='item.orient === "left"',QJ='item.orient === "right"',xL=`(${XJ} || ${QJ})`,F6t=`datum.vgrad && ${xL}`,$6t=bL('"top"','"bottom"','"middle"'),B6t=bL('"right"','"left"','"center"'),j6t=`datum.vgrad && ${QJ} ? (${B6t}) : (${xL} && !(datum.vgrad && ${XJ})) ? "left" : ${KJ}`,U6t=`item._anchor || (${xL} ? "middle" : "start")`,z6t=`${F6t} ? (${XJ} ? -90 : 90) : 0`,V6t=`${xL} ? (datum.vgrad ? (${QJ} ? "bottom" : "top") : ${$6t}) : "top"`;function H6t(e,t,n,r){const i=hd(e,t),s={enter:{opacity:wi},update:{opacity:Jh,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:wi}};return kl(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:U6t},angle:{signal:z6t},align:{signal:j6t},baseline:{signal:V6t},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),hh({type:Qw,role:oIt,style:WJ,from:r,encode:s},n)}function q6t(e,t){let n;return un(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+sde(e.path)+")":e.sphere&&(n="geoShape("+sde(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function sde(e){return un(e)&&e.signal?e.signal:Jt(e)}function h4e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===vL?zJ:t||jJ}function W6t(e){return{marktype:e.type,name:e.name||void 0,role:e.role||h4e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function G6t(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function JJ(e,t){const n=QTe(e.type);n||vt("Unrecognized transform type: "+Jt(e.type));const r=mL(n.type.toLowerCase(),null,p4e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function p4e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=Y6t(o,t,n)}return r}function Y6t(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return K6t(e,t,n);if(i===void 0){e.required&&vt("Missing required "+Jt(t.type)+" parameter: "+Jt(e.name));return}else{if(r==="param")return X6t(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!gu(i)?i.map(s=>ode(e,s,n)):ode(e,i,n)}function ode(e,t,n){const r=e.type;if(gu(t))return ude(r)?vt("Expression references can not be signals."):GB(r)?n.fieldRef(t):lde(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||GB(r);return i&&Q6t(t)?n.exprRef(t.expr,t.as):i&&J6t(t)?$4(t.field,t.as):ude(r)?pg(t,n):Z6t(r)?Ln(n.getData(t).values):GB(r)?$4(t):lde(r)?n.compareRef(t):t}}function K6t(e,t,n){return cn(t.from)||vt('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function X6t(e,t,n){const r=t[e.name];return e.array?(xt(r)||vt("Expected an array of sub-parameters. Instead: "+Jt(r)),r.map(i=>ade(e,i,n))):ade(e,r,n)}function ade(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||vt("Unsupported parameter: "+Jt(t));const s=kr(p4e(i,t,n),i.key);return Ln(n.add(GIt(s)))}const Q6t=e=>e&&e.expr,J6t=e=>e&&e.field,Z6t=e=>e==="data",ude=e=>e==="expr",GB=e=>e==="field",lde=e=>e==="compare";function e5t(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||vt("Only group marks can be faceted."),r.field!=null?o=a=WN(r,n):(e.data?a=Ln(n.getData(e.data).aggregate):(s=JJ(kr({type:"aggregate",groupby:ln(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=WN(r,n),o=a=Ln(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Ln(n.add(z0(null,[{}]))),o||(o=WN(e,n)),{key:i,pulse:o,parent:a}}function WN(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ln(t.getData(e.data).output)}function aw(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}aw.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Ln(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new aw(e,s,i,r,o)};function m4e(e){return cn(e)?e:null}function cde(e,t,n){const r=gL(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function a3(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=EIt(s);let l=m4e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:nH,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Ln(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(mL(r,void 0,d)),o&&(t.index[i]=f),c=Ln(f),l!=null&&(a[l]=c)}return c}aw.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=m4e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&cde(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Ln(r.output)},n&&n.field&&cde(e,u,n),a=e.add(Zke(u)),o=e.add(z0({pulse:Ln(a)})),o={agg:a,ref:Ln(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Ln(this.values)},extentRef(e,t){return a3(e,this,"extent","extent",t,!1)},domainRef(e,t){return a3(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return a3(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return a3(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return a3(e,this,"indata","tupleindex",t,!0,!0)}};function t5t(e,t,n){const r=e.from.facet,i=r.name,s=WN(r,t);let o;r.name||vt("Facet must have a name: "+Jt(r)),r.data||vt("Facet must reference a data set: "+Jt(r)),r.field?o=t.add(n4e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add($It({key:t.keyRef(r.groupby),group:Ln(t.proxy(n.parent)),pulse:s})):vt("Facet must specify groupby or field: "+Jt(r));const a=t.fork(),u=a.add(z0()),l=a.add(Xw({pulse:Ln(u)}));a.addData(i,new aw(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function n5t(e,t,n){const r=t.add(n4e({pulse:n.pulse})),i=t.fork();i.add(Xw()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function g4e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(rO()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=pg(l,t);u.update=c.$expr,u.params=c.$params}function _L(e,t){const n=h4e(e),r=e.type===vL,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===zJ||n===UJ,a,u,l,c,f,d,h;const p=n===jJ||o||i,m=e5t(e.from,r,t);u=t.add(LIt({key:m.key||(e.key?$4(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Ln(u);u=l=t.add(z0({pulse:g})),u=t.add(VIt({markdef:W6t(e),interactive:G6t(e.interactive,t),clip:q6t(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ln(u)}));const b=Ln(u);u=c=t.add(t4e(Qke(e.encode,e.type,n,e.style,t,{mod:!1,pulse:b}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(C=>{const R=JJ(C,t),I=R.metadata;(I.generates||I.changes)&&vt("Mark transforms should not generate new data."),I.nomod||(c.params.mod=!0),R.params.pulse=Ln(u),t.add(u=R)}),e.sort&&(u=t.add(JIt({sort:t.compareRef(e.sort),pulse:Ln(u)})));const y=Ln(u);(i||o)&&(o=t.add(i4e({layout:t.objectProperty(e.layout),legends:t.legends,mark:b,pulse:y})),d=Ln(o));const x=t.add(e4e({mark:b,pulse:d||y}));h=Ln(x),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(y,d||h,g),i?t5t(e,t,m):p?n5t(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(x))),s&&(h=r5t(s,h,t));const w=t.add(r4e({pulse:h})),S=t.add(Xw({pulse:Ln(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new aw(t,l,w,S)),e.on&&e.on.forEach(C=>{(C.insert||C.remove||C.toggle)&&vt("Marks only support modify triggers."),g4e(C,t,f)}))}function r5t(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:gu(s)?n.signalRef(s.signal):s,method:gu(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=gu(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Ln(n.add(WIt(o)))}function i5t(e,t){const n=t.config.legend,r=e.encode||{},i=hd(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;GJ.forEach(x=>e[x]?(l[x]=e[x],c=c||e[x]):0),c||vt("Missing valid scale for legend.");const p=s5t(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Ln(t.add(z0(null,[m]))),b={enter:{x:{value:0},y:{value:0}}},y=Ln(t.add(UIt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===qN?(h=[P6t(e,c,n,r.gradient),ide(e,n,r.labels,y)],d.count=d.count||t.signalRef(`max(2,2*floor((${$_(i.gradientLength())})/100))`)):p===oH?h=[N6t(e,c,n,r.gradient,y),ide(e,n,r.labels,y)]:(f=L6t(e,n),h=[M6t(e,n,r,y,$_(f.columns))],d.size=u5t(e,t,h[0].marks)),h=[j4({role:rIt,from:g,encode:b,marks:h,layout:f,interactive:a})],m.title&&h.push(H6t(e,n,r.title,g)),_L(j4({role:tIt,from:g,encode:iC(a5t(i,e,n),s,hI),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function s5t(e,t){let n=e.type||rde;return!e.type&&o5t(e)===1&&(e.fill||e.stroke)&&(n=lQ(t)?qN:wV(t)?oH:rde),n!==qN?n:wV(t)?oH:qN}function o5t(e){return GJ.reduce((t,n)=>t+(e[n]?1:0),0)}function a5t(e,t,n){const r={enter:{},update:{}};return kl(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function u5t(e,t,n){const r=$_(fde("size",e,n)),i=$_(fde("strokeWidth",e,n)),s=$_(l5t(n[1].encode,t,dI));return pg(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function fde(e,t,n){return t[e]?`scale("${t[e]}",datum)`:f4e(e,n[0].encode)}function l5t(e,t,n){return f4e("fontSize",e)||R6t("fontSize",t,n)}const c5t=`item.orient==="${sC}"?-90:item.orient==="${oC}"?90:0`;function f5t(e,t){e=cn(e)?{text:e}:e;const n=hd(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Ln(t.add(z0(null,[l])));return u.push(p5t(e,n,d5t(e),c)),e.subtitle&&u.push(m5t(e,n,r.subtitle,c)),_L(j4({role:aIt,from:c,encode:h5t(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function d5t(e){const t=e.encode;return t&&t.title||kr({name:e.name,interactive:e.interactive,style:e.style},t)}function h5t(e,t){const n={enter:{},update:{}};return kl(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:KJ},angle:{signal:c5t},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),iC(n,t,hI)}function p5t(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return kl(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),hh({type:Qw,role:uIt,style:x6t,from:r,encode:o},n)}function m5t(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return kl(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),hh({type:Qw,role:lIt,style:_6t,from:r,encode:o},n)}function g5t(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(JJ(r,t))}),e.on&&e.on.forEach(r=>{g4e(r,t,e.name)}),t.addDataPipeline(e.name,y5t(e,t,n))}function y5t(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?gu(e.values)||VN(e.format)?(r.push(dde(t,e)),r.push(i=Vx())):r.push(i=Vx({$ingest:e.values,$format:e.format})):e.url?VN(e.url)||VN(e.format)?(r.push(dde(t,e)),r.push(i=Vx())):r.push(i=Vx({$request:e.url,$format:e.format})):e.source&&(i=a=ln(e.source).map(d=>Ln(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=Vx()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=XIt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,Vx())),i||r.push(Vx()),r.push(Xw({})),r}function Vx(e){const t=z0({},e);return t.metadata={source:!0},t}function dde(e,t){return zIt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const y4e=e=>e===Ab||e===V0,wL=(e,t,n)=>gu(e)?_5t(e.signal,t,n):e===sC||e===V0?t:n,Fu=(e,t,n)=>gu(e)?b5t(e.signal,t,n):y4e(e)?t:n,w0=(e,t,n)=>gu(e)?x5t(e.signal,t,n):y4e(e)?n:t,v4e=(e,t,n)=>gu(e)?w5t(e.signal,t,n):e===V0?{value:t}:{value:n},v5t=(e,t,n)=>gu(e)?E5t(e.signal,t,n):e===oC?{value:t}:{value:n},b5t=(e,t,n)=>b4e(`${e} === '${V0}' || ${e} === '${Ab}'`,t,n),x5t=(e,t,n)=>b4e(`${e} !== '${V0}' && ${e} !== '${Ab}'`,t,n),_5t=(e,t,n)=>ZJ(`${e} === '${sC}' || ${e} === '${V0}'`,t,n),w5t=(e,t,n)=>ZJ(`${e} === '${V0}'`,t,n),E5t=(e,t,n)=>ZJ(`${e} === '${oC}'`,t,n),b4e=(e,t,n)=>(t=t!=null?Lu(t):t,n=n!=null?Lu(n):n,hde(t)&&hde(n)?(t=t?t.signal||Jt(t.value):null,n=n?n.signal||Jt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[kr({test:e},t)].concat(n||[])),hde=e=>e==null||Object.keys(e).length===1,ZJ=(e,t,n)=>({signal:`${e} ? (${OE(t)}) : (${OE(n)})`}),S5t=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${sC}' ? (${OE(r)}) : `:"")+(n!=null?`${e} === '${Ab}' ? (${OE(n)}) : `:"")+(i!=null?`${e} === '${oC}' ? (${OE(i)}) : `:"")+(t!=null?`${e} === '${V0}' ? (${OE(t)}) : `:"")+"(null)"}),OE=e=>gu(e)?e.signal:e==null?null:Jt(e),T5t=(e,t)=>t===0?0:gu(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},QE=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function iE(e,t,n,r){let i;if(t&&gn(t,e))return t[e];if(gn(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[WJ][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[dI][i]}return null}function pde(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function C5t(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(gu(o)){const f=pde([n.axisX,n.axisY]),d=pde([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Fu(o,iE(l,n.axisX,i,r),iE(l,n.axisY,i,r));u={};for(l of d)u[l]=S5t(o.signal,iE(l,n.axisTop,i,r),iE(l,n.axisBottom,i,r),iE(l,n.axisLeft,i,r),iE(l,n.axisRight,i,r))}else a=o===V0||o===Ab?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?kr({},i,a,u,s):i}function A5t(e,t,n,r){const i=hd(e,t),s=e.orient;let o,a;const u={enter:o={opacity:wi},update:a={opacity:Jh},exit:{opacity:wi}};kl(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=mde(e,0),c=mde(e,1);return o.x=a.x=Fu(s,l,wi),o.x2=a.x2=Fu(s,c),o.y=a.y=w0(s,l,wi),o.y2=a.y2=w0(s,c),hh({type:YJ,role:XRt,from:r,encode:u},n)}function mde(e,t){return{scale:e.scale,range:t}}function k5t(e,t,n,r,i){const s=hd(e,t),o=e.orient,a=e.gridScale,u=wL(o,1,-1),l=R5t(e.offset,u);let c,f,d;const h={enter:c={opacity:wi},update:d={opacity:Jh},exit:f={opacity:wi}};kl(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Qh,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=Fu(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},b=a?{scale:a,range:1,mult:u,offset:l}:kr(m,{mult:u,offset:l});return c.x=d.x=Fu(o,p,g),c.y=d.y=w0(o,p,g),c.x2=d.x2=w0(o,b),c.y2=d.y2=Fu(o,b),f.x=Fu(o,p),f.y=w0(o,p),hh({type:YJ,role:QRt,key:Qh,from:r,encode:h},n)}function R5t(e,t){if(t!==1)if(!un(e))e=gu(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=kr({},e);for(;n.mult!=null;)if(un(n.mult))n=n.mult=kr({},n.mult);else return n.mult=gu(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function I5t(e,t,n,r,i,s){const o=hd(e,t),a=e.orient,u=wL(a,-1,1);let l,c,f;const d={enter:l={opacity:wi},update:f={opacity:Jh},exit:c={opacity:wi}};kl(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Lu(i);h.mult=u;const p={scale:e.scale,field:Qh,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=Fu(a,wi,p),f.y2=l.y2=Fu(a,h),c.x=Fu(a,p),f.x=l.x=w0(a,wi,p),f.x2=l.x2=w0(a,h),c.y=w0(a,p),hh({type:YJ,role:ZRt,key:Qh,from:r,encode:d},n)}function YB(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function P5t(e,t,n,r,i,s){const o=hd(e,t),a=e.orient,u=e.scale,l=wL(a,-1,1),c=$_(o("labelFlush")),f=$_(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=Lu(i);g.mult=l,g.offset=Lu(o("labelPadding")||0),g.offset.mult=l;const b={scale:u,field:Qh,band:.5,offset:d4e(s.offset,o("labelOffset"))},y=Fu(a,p?YB(u,c,'"left"','"right"','"center"'):{value:"center"},v5t(a,"left","right")),x=Fu(a,v4e(a,"bottom","top"),p?YB(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=YB(u,c,`-(${f})`,f,0);p=p&&f;const S={opacity:wi,x:Fu(a,b,g),y:w0(a,b,g)},C={enter:S,update:m={opacity:Jh,text:{field:qJ},x:S.x,y:S.y,align:y,baseline:x},exit:{opacity:wi,x:S.x,y:S.y}};kl(C,{dx:!d&&p?Fu(a,w):null,dy:!h&&p?w0(a,w):null}),kl(C,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const R=o("labelBound");let I=o("labelOverlap");return I=I||R?{separation:o("labelSeparation"),method:I,order:"datum.index",bound:R?{scale:u,orient:a,tolerance:R}:null}:void 0,m.align!==y&&(m.align=QE(m.align,y)),m.baseline!==x&&(m.baseline=QE(m.baseline,x)),hh({type:Qw,role:JRt,style:dI,key:Qh,from:r,encode:C,overlap:I},n)}function N5t(e,t,n,r){const i=hd(e,t),s=e.orient,o=wL(s,-1,1);let a,u;const l={enter:a={opacity:wi,anchor:Lu(i("titleAnchor",null)),align:{signal:KJ}},update:u=kr({},a,{opacity:Jh,text:Lu(e.title)}),exit:{opacity:wi}},c={signal:`lerp(range("${e.scale}"), ${bL(0,1,.5)})`};return u.x=Fu(s,c),u.y=w0(s,c),a.angle=Fu(s,wi,T5t(o,90)),a.baseline=Fu(s,v4e(s,Ab,V0),{value:Ab}),u.angle=a.angle,u.baseline=a.baseline,kl(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),D5t(i,s,l,n),l.update.align=QE(l.update.align,a.align),l.update.angle=QE(l.update.angle,a.angle),l.update.baseline=QE(l.update.baseline,a.baseline),hh({type:Qw,role:eIt,style:WJ,from:r,encode:l},n)}function D5t(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=QE(Lu(a),n.update[u]),!1):!EE(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?Lu(o):Fu(t,Lu(o),Lu(s))}function O5t(e,t){const n=C5t(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=hd(e,n),l=I6t(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Ln(t.add(z0({},[c]))),d=Ln(t.add(MIt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(k5t(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(I5t(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(P5t(e,n,r.labels,d,p,l))),c.domain&&h.push(A5t(e,n,r.domain,f)),c.title&&h.push(N5t(e,n,r.title,f)),_L(j4({role:KRt,from:f,encode:iC(M5t(u,e),i,hI),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function M5t(e,t){const n={enter:{},update:{}};return kl(n,{orient:e("orient"),offset:e("offset")||0,position:r0(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function x4e(e,t,n){const r=ln(e.signals),i=ln(e.scales);return n||r.forEach(s=>Jke(s,t)),ln(e.projections).forEach(s=>h6t(s,t)),i.forEach(s=>t6t(s,t)),ln(e.data).forEach(s=>g5t(s,t)),i.forEach(s=>n6t(s,t)),(n||r).forEach(s=>OIt(s,t)),ln(e.axes).forEach(s=>O5t(s,t)),ln(e.marks).forEach(s=>_L(s,t)),ln(e.legends).forEach(s=>i5t(s,t)),e.title&&f5t(e.title,t),t.parseLambdas(),t}const L5t=e=>iC({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function F5t(e,t){const n=t.config,r=Ln(t.root=t.add(rO())),i=$5t(e,n);i.forEach(l=>Jke(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(z0()),o=t.add(t4e(Qke(L5t(e.encode),vL,UJ,e.style,t,{pulse:Ln(s)}))),a=t.add(i4e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Ln(o)}));t.operators.pop(),t.pushState(Ln(o),Ln(a),null),x4e(e,t,i),t.operators.push(a);let u=t.add(e4e({mark:r,pulse:Ln(a)}));return u=t.add(r4e({pulse:Ln(u)})),u=t.add(Xw({pulse:Ln(u)})),t.addData("root",new aw(t,s,s,u)),t}function u3(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function $5t(e,t){const n=o=>r0(e[o],t[o]),r=[u3("background",n("background")),u3("autosize",WRt(n("autosize"))),u3("padding",YRt(n("padding"))),u3("width",n("width")||0),u3("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return ln(e.signals).forEach(o=>{gn(i,o.name)?o=kr(i[o.name],o):r.push(o),s[o.name]=o}),ln(t.signals).forEach(o=>{!gn(s,o.name)&&!gn(i,o.name)&&r.push(o)}),r}function _4e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function gde(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}_4e.prototype=gde.prototype={parse(e){return x4e(e,this)},fork(){return new gde(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof tH?Ln(e):e;return this.add(KIt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Ln(this.add(Xw({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ln(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return pi(this._parent)},encode(){return pi(this._encode)},lookup(){return pi(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(cn(e))return $4(e,t);e.signal||vt("Unsupported field reference: "+Jt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Ln(this.add(BIt(i)))}return r},compareRef(e){let t=!1;const n=s=>gu(s)?(t=!0,this.signalRef(s.signal)):SIt(s)?(t=!0,this.exprRef(s.expr)):s,r=ln(e.field).map(n),i=ln(e.order).map(n);return t?Ln(this.add(nde({fields:r,orders:i}))):ede(r,i)},keyRef(e,t){let n=!1;const r=s=>gu(s)?(n=!0,Ln(i[s.signal])):s,i=this.signals;return e=ln(e).map(r),n?Ln(this.add(jIt({fields:e,flat:t}))):xIt(e,t)},sortRef(e){if(!e)return e;const t=gL(e.op,e.field),n=e.order||_It;return n.signal?Ln(this.add(nde({fields:t,orders:this.signalRef(n.signal)}))):ede(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return gn(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&vt("Duplicate signal name: "+Jt(e));const n=t instanceof tH?t:this.add(rO(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||vt("Unrecognized signal name: "+Jt(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ln(this.signals[e]):(gn(this.lambdas,e)||(this.lambdas[e]=this.add(rO(null))),Ln(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=pg(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!un(e)?e:this.signalRef(e.signal||eZ(e))},exprRef(e,t){const n={expr:pg(e,this)};return t&&(n.expr.$name=t),Ln(this.add(FIt(n)))},addBinding(e,t){this.bindings||vt("Nested signals do not support binding: "+Jt(e)),this.bindings.push(kr({signal:e},t))},addScaleProj(e,t){gn(this.scales,e)&&vt("Duplicate scale or projection name: "+Jt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,QIt(t))},addProjection(e,t){this.addScaleProj(e,YIt(t))},getScale(e){return this.scales[e]||vt("Unrecognized scale name: "+Jt(e)),this.scales[e]},scaleRef(e){return Ln(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return gn(this.data,e)&&vt("Duplicate data set name: "+Jt(e)),this.data[e]=t},getData(e){return this.data[e]||vt("Undefined data set name: "+Jt(e)),this.data[e]},addDataPipeline(e,t){return gn(this.data,e)&&vt("Duplicate data set name: "+Jt(e)),this.addData(e,aw.fromEntries(this,t))}};function eZ(e){return(xt(e)?B5t:j5t)(e)}function B5t(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(un(i)?i.signal||eZ(i):Jt(i))}return n+"]"}function j5t(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Jt(r)+":"+(un(i)?i.signal||eZ(i):Jt(i));return t+"}"}function U5t(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function z5t(e,t,n){return un(e)||vt("Input Vega specification must be an object."),t=XT(U5t(),t,e.config),F5t(e,new _4e(t,n)).toRuntime()}var V5t="5.30.0";kr(LS,Nwt,xTt,JTt,RCt,LCt,lAt,zCt,fAt,mAt,TAt,NAt);const H5t=Object.freeze(Object.defineProperty({__proto__:null,Bounds:qa,CanvasHandler:aI,CanvasRenderer:qD,DATE:ad,DAY:nc,DAYOFYEAR:hg,Dataflow:XE,Debug:qSe,Error:YK,EventStream:$M,Gradient:uAe,GroupItem:QM,HOURS:ch,Handler:OQ,HybridHandler:ZAe,HybridRenderer:DV,Info:HSe,Item:XM,MILLISECONDS:I0,MINUTES:fh,MONTH:lc,Marks:dh,MultiPulse:pX,None:VSe,Operator:Ts,Parameters:FM,Pulse:nb,QUARTER:od,RenderType:Vv,Renderer:oI,ResourceLoader:mAe,SECONDS:rp,SVGHandler:jAe,SVGRenderer:jQ,SVGStringRenderer:JAe,Scenegraph:NAe,TIME_UNITS:oX,Transform:pt,View:Bke,WEEK:fu,Warn:KK,YEAR:Sl,accessor:dd,accessorFields:uc,accessorName:Wo,array:ln,ascending:PM,bandwidthNRD:vX,bin:eCe,bootstrapCI:tCe,boundClip:l3e,boundContext:nI,boundItem:kV,boundMark:kAe,boundStroke:O1,changeset:Gw,clampRange:nTe,codegenExpression:fke,compare:eX,constant:mc,cumulativeLogNormal:SX,cumulativeNormal:jM,cumulativeUniform:kX,dayofyear:pTe,debounce:tX,defaultLocale:lX,definition:QTe,densityLogNormal:EX,densityNormal:bX,densityUniform:AX,domChild:cu,domClear:qh,domCreate:Uv,domFind:DQ,dotbin:nCe,error:vt,expressionFunction:wa,extend:kr,extent:dg,extentIndex:rTe,falsy:_v,fastmap:JT,field:tp,flush:iTe,font:nL,fontFamily:sI,fontSize:kg,format:AN,formatLocale:ND,formats:dX,hasOwnProperty:gn,id:HR,identity:pc,inferType:jTe,inferTypes:UTe,ingest:Vi,inherits:en,inrange:PE,interpolate:cQ,interpolateColors:YM,interpolateRange:YCe,intersect:s3e,intersectBoxLine:NE,intersectPath:vQ,intersectPoint:bQ,intersectRule:yAe,isArray:xt,isBoolean:nx,isDate:tb,isFunction:Rr,isIterable:sTe,isNumber:Ri,isObject:un,isRegExp:oTe,isString:cn,isTuple:MM,key:nX,lerp:aTe,lineHeight:Sb,loader:DM,locale:$Te,logger:XK,lruCache:uTe,markup:BQ,merge:lTe,mergeConfig:XT,multiLineOffset:IQ,one:KT,pad:cTe,panLinear:XSe,panLog:QSe,panPow:JSe,panSymlog:ZSe,parse:z5t,parseExpression:AJ,parseSelector:ix,path:uM,pathCurves:mQ,pathEqual:c3e,pathParse:jS,pathRectangle:fAe,pathRender:I4,pathSymbols:cAe,pathTrail:dAe,peek:pi,point:iL,projection:JQ,quantileLogNormal:TX,quantileNormal:UM,quantileUniform:RX,quantiles:gX,quantizeInterpolator:KCe,quarter:eTe,quartiles:yX,get random(){return ip},randomInteger:L_t,randomKDE:_X,randomLCG:M_t,randomLogNormal:iCe,randomMixture:sCe,randomNormal:xX,randomUniform:oCe,read:HTe,regressionConstant:IX,regressionExp:uCe,regressionLinear:PX,regressionLoess:fCe,regressionLog:aCe,regressionPoly:cCe,regressionPow:lCe,regressionQuad:NX,renderModule:sL,repeat:z3,resetDefaultLocale:Nxt,resetSVGClipId:pAe,resetSVGDefIds:$St,responseType:VTe,runtimeContext:Cke,sampleCurve:VM,sampleLogNormal:wX,sampleNormal:BM,sampleUniform:CX,scale:Ii,sceneEqual:UQ,sceneFromJSON:IAe,scenePickVisit:FD,sceneToJSON:RAe,sceneVisit:P0,sceneZOrder:xQ,scheme:fQ,serializeXML:YAe,setHybridRendererOptions:OSt,setRandom:D_t,span:qR,splitAccessPath:Ag,stringValue:Jt,textMetrics:nh,timeBin:PTe,timeFloor:_Te,timeFormatLocale:A4,timeInterval:ZT,timeOffset:STe,timeSequence:ATe,timeUnitSpecifier:hTe,timeUnits:aX,toBoolean:rX,toDate:iX,toNumber:sc,toSet:R0,toString:sX,transform:JTe,transforms:LS,truncate:fTe,truthy:np,tupleid:Fn,typeParsers:bV,utcFloor:wTe,utcInterval:eC,utcOffset:TTe,utcSequence:kTe,utcdayofyear:yTe,utcquarter:tTe,utcweek:vTe,version:V5t,visitArray:Cv,week:mTe,writeConfig:QT,zero:Lv,zoomLinear:QK,zoomLog:JK,zoomPow:PD,zoomSymlog:ZK},Symbol.toStringTag,{value:"Module"}));function q5t(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var W5t={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},G5t={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},Y5t={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const K5t=Array.prototype.slice,Hx=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,K5t.call(t,1))},X5t=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var Q5t={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:X5t,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Hx("join",arguments)},indexof:function(){return Hx("indexOf",arguments)},lastindexof:function(){return Hx("lastIndexOf",arguments)},slice:function(){return Hx("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Hx("substring",arguments,String)},split:function(){return Hx("split",arguments,String)},replace:function(){return Hx("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const J5t=["view","item","group","xy","x","y"],uH=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&uH.add(setImmediate);const Z5t={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:W5t[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),uH.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||Q5t[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>G5t[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>Y5t[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,uH.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function l3(e,t,n,r,i,s){const o=a=>Z5t[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,J5t.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var ePt={operator(e,t){const n=t.ast,r=e.functions;return i=>l3(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>l3(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>l3(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return l3(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=l3(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&q5t(o,r,s),l}}};const tPt="vega-lite",nPt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',rPt="5.23.0",iPt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],sPt="https://vega.github.io/vega-lite/",oPt="Vega-Lite is a concise high-level language for interactive visualization.",aPt=["vega","chart","visualization"],uPt="build/vega-lite.js",lPt="build/vega-lite.min.js",cPt="build/vega-lite.min.js",fPt="build/src/index",dPt="build/src/index.d.ts",hPt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},pPt=["bin","build","src","vega-lite*","tsconfig.json"],mPt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},gPt={type:"git",url:"https://github.com/vega/vega-lite.git"},yPt="BSD-3-Clause",vPt={url:"https://github.com/vega/vega-lite/issues"},bPt={"@babel/core":"^7.26.0","@babel/preset-env":"^7.26.0","@babel/preset-typescript":"^7.26.0","@release-it/conventional-changelog":"^9.0.3","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^28.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.3.0","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.14","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^6.0.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.1.4",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.10.0",rollup:"^4.27.3","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.4",terser:"^5.36.0","ts-jest":"^29.2.5","ts-json-schema-generator":"^2.3.0",typescript:"~5.7.2","vega-cli":"^5.30.0","vega-datasets":"^2.11.0","vega-embed":"^6.28.0","vega-tooltip":"^0.35.2","yaml-front-matter":"^4.1.1"},xPt={"json-stringify-pretty-compact":"~4.0.0",tslib:"~2.8.1","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},_Pt={vega:"^5.24.0"},wPt={node:">=18"},EPt="yarn@1.22.22",SPt={name:tPt,author:nPt,version:rPt,collaborators:iPt,homepage:sPt,description:oPt,keywords:aPt,main:uPt,unpkg:lPt,jsdelivr:cPt,module:fPt,types:dPt,bin:hPt,files:pPt,scripts:mPt,repository:gPt,license:yPt,bugs:vPt,devDependencies:bPt,dependencies:xPt,peerDependencies:_Pt,engines:wPt,packageManager:EPt};function tZ(e){return zt(e,"or")}function nZ(e){return zt(e,"and")}function rZ(e){return zt(e,"not")}function GN(e,t){if(rZ(e))GN(e.not,t);else if(nZ(e))for(const n of e.and)GN(n,t);else if(tZ(e))for(const n of e.or)GN(n,t);else t(e)}function JE(e,t){return rZ(e)?{not:JE(e.not,t)}:nZ(e)?{and:e.and.map(n=>JE(n,t))}:tZ(e)?{or:e.or.map(n=>JE(n,t))}:t(e)}const ur=structuredClone;function w4e(e){throw new Error(e)}function WS(e,t){const n={};for(const r of t)gn(e,r)&&(n[r]=e[r]);return n}function nd(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>gs(e)).join(",")})`};function ii(e){if(Ri(e))return e;const t=cn(e)?e:gs(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function lH(e){return e===!1||e===null}function Gr(e,t){return e.includes(t)}function GS(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function iZ(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function E4e(e,...t){for(const n of t)TPt(e,n??{});return e}function TPt(e,t){for(const n of $t(t))QT(e,n,t[n],!0)}function Bm(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function CPt(e,t){const n=$t(e),r=$t(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function S4e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function sZ(e,t){for(const n of e)if(t.has(n))return!0;return!1}function cH(e){const t=new Set;for(const n of e){const i=Ag(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function oZ(e,t){return e===void 0||t===void 0?!0:sZ(cH(e),cH(t))}function ms(e){return $t(e).length===0}const $t=Object.keys,Tl=Object.values,kb=Object.entries;function U4(e){return e===!0||e===!1}function fo(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Lk(e,t){return rZ(e)?`!(${Lk(e.not,t)})`:nZ(e)?`(${e.and.map(n=>Lk(n,t)).join(") && (")})`:tZ(e)?`(${e.or.map(n=>Lk(n,t)).join(") || (")})`:t(e)}function iO(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&iO(e[n],t)&&delete e[n],ms(e)}function pI(e){return e.charAt(0).toUpperCase()+e.substr(1)}function aZ(e,t="datum"){const n=Ag(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Jt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function T4e(e,t="datum"){return`${t}[${Jt(Ag(e).join("."))}]`}function ss(e){return`datum['${e.replaceAll("'","\\'")}']`}function APt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function sp(e){return`${Ag(e).map(APt).join("\\.")}`}function uw(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function aC(e){return`${Ag(e).join(".")}`}function YS(e){return e?Ag(e).length:0}function ba(...e){return e.find(t=>t!==void 0)}let C4e=42;function A4e(e){const t=++C4e;return e?String(e)+t:t}function kPt(){C4e=42}function k4e(e){return R4e(e)?e:`__${e}`}function R4e(e){return e.startsWith("__")}function z4(e){if(e!==void 0)return(e%360+360)%360}function EL(e){return Ri(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const yde=Object.getPrototypeOf(structuredClone({}));function Qd(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Qd(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;for(const s of e.entries())if(!Qd(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==yde.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==yde.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Qd(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function gs(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}function zt(e,t){return un(e)&&gn(e,t)&&e[t]!==void 0}const n1="row",r1="column",SL="facet",po="x",Wu="y",H0="x2",Ng="y2",sx="xOffset",uC="yOffset",q0="radius",L1="radius2",gp="theta",F1="theta2",W0="latitude",G0="longitude",Y0="latitude2",op="longitude2",ox="time",ud="color",Dg="fill",Og="stroke",ld="shape",$1="size",Jw="angle",B1="opacity",ax="fillOpacity",ux="strokeOpacity",lx="strokeWidth",cx="strokeDash",mI="text",KS="order",gI="detail",TL="key",lw="tooltip",CL="href",AL="url",kL="description",RPt={x:1,y:1,x2:1,y2:1},I4e={theta:1,theta2:1,radius:1,radius2:1};function P4e(e){return gn(I4e,e)}const uZ={longitude:1,longitude2:1,latitude:1,latitude2:1};function N4e(e){switch(e){case W0:return"y";case Y0:return"y2";case G0:return"x";case op:return"x2"}}function D4e(e){return gn(uZ,e)}const IPt=$t(uZ),lZ={...RPt,...I4e,...uZ,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function ZE(e){return e===ud||e===Dg||e===Og}const O4e={row:1,column:1,facet:1},Xh=$t(O4e),cZ={...lZ,...O4e},PPt=$t(cZ),{order:IHt,detail:PHt,tooltip:NHt,...NPt}=cZ,{row:DHt,column:OHt,facet:MHt,...DPt}=NPt;function OPt(e){return gn(DPt,e)}function M4e(e){return gn(cZ,e)}const MPt=[H0,Ng,Y0,op,F1,L1];function L4e(e){return Zw(e)!==e}function Zw(e){switch(e){case H0:return po;case Ng:return Wu;case Y0:return W0;case op:return G0;case F1:return gp;case L1:return q0}return e}function Rb(e){if(P4e(e))switch(e){case gp:return"startAngle";case F1:return"endAngle";case q0:return"outerRadius";case L1:return"innerRadius"}return e}function Mg(e){switch(e){case po:return H0;case Wu:return Ng;case W0:return Y0;case G0:return op;case gp:return F1;case q0:return L1}}function cd(e){switch(e){case po:case H0:return"width";case Wu:case Ng:return"height"}}function F4e(e){switch(e){case po:return"xOffset";case Wu:return"yOffset";case H0:return"x2Offset";case Ng:return"y2Offset";case gp:return"thetaOffset";case q0:return"radiusOffset";case F1:return"theta2Offset";case L1:return"radius2Offset"}}function fZ(e){switch(e){case po:return"xOffset";case Wu:return"yOffset"}}function LPt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const FPt=$t(lZ),{x:LHt,y:FHt,x2:$Ht,y2:BHt,xOffset:jHt,yOffset:UHt,latitude:zHt,longitude:VHt,latitude2:HHt,longitude2:qHt,theta:WHt,theta2:GHt,radius:YHt,radius2:KHt,...dZ}=lZ,$Pt=$t(dZ),hZ={x:1,y:1},j1=$t(hZ);function xa(e){return gn(hZ,e)}const pZ={theta:1,radius:1},BPt=$t(pZ);function RL(e){return e==="width"?po:Wu}const $4e={xOffset:1,yOffset:1};function yI(e){return gn($4e,e)}const jPt={time:1};function KB(e){return e in jPt}const{text:XHt,tooltip:QHt,href:JHt,url:ZHt,description:eqt,detail:tqt,key:nqt,order:rqt,...B4e}=dZ,UPt=$t(B4e);function zPt(e){return gn(dZ,e)}function VPt(e){switch(e){case ud:case Dg:case Og:case $1:case ld:case B1:case lx:case cx:return!0;case ax:case ux:case Jw:case ox:return!1}}const j4e={...hZ,...pZ,...$4e,...B4e},mZ=$t(j4e);function Lg(e){return gn(j4e,e)}function HPt(e,t){return WPt(e)[t]}const U4e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:iqt,...qPt}=U4e;function WPt(e){switch(e){case ud:case Dg:case Og:case kL:case gI:case TL:case lw:case CL:case KS:case B1:case ax:case ux:case lx:case SL:case n1:case r1:return U4e;case po:case Wu:case sx:case uC:case W0:case G0:case ox:return qPt;case H0:case Ng:case Y0:case op:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case $1:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case cx:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ld:return{point:"always",geoshape:"always"};case mI:return{text:"always"};case Jw:return{point:"always",square:"always",text:"always"};case AL:return{image:"always"};case gp:return{text:"always",arc:"always"};case q0:return{text:"always",arc:"always"};case F1:case L1:return{arc:"always"}}}function XB(e){switch(e){case po:case Wu:case gp:case q0:case sx:case uC:case $1:case Jw:case lx:case B1:case ax:case ux:case ox:case H0:case Ng:case F1:case L1:return;case SL:case n1:case r1:case ld:case cx:case mI:case lw:case CL:case AL:case kL:return"discrete";case ud:case Dg:case Og:return"flexible";case W0:case G0:case Y0:case op:case gI:case TL:case KS:return}}const GPt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},YPt={count:1,min:1,max:1};function E1(e){return zt(e,"argmin")}function fx(e){return zt(e,"argmax")}function gZ(e){return cn(e)&&gn(GPt,e)}const KPt=new Set(["count","valid","missing","distinct"]);function IL(e){return cn(e)&&KPt.has(e)}function XPt(e){return cn(e)&&Gr(["min","max"],e)}const QPt=new Set(["count","sum","distinct","valid","missing"]),JPt=new Set(["mean","average","median","q1","q3","min","max"]);function z4e(e){return nx(e)&&(e=zL(e,void 0)),"bin"+$t(e).map(t=>PL(e[t])?fo(`_${t}_${kb(e[t])}`):fo(`_${t}_${e[t]}`)).join("")}function Bs(e){return e===!0||e2(e)&&!e.binned}function hl(e){return e==="binned"||e2(e)&&e.binned===!0}function e2(e){return un(e)}function PL(e){return zt(e,"param")}function vde(e){switch(e){case n1:case r1:case $1:case ud:case Dg:case Og:case lx:case B1:case ax:case ux:case ld:return 6;case cx:return 4;default:return 10}}function vI(e){return zt(e,"expr")}function pl(e,{level:t}={level:0}){const n=$t(e||{}),r={};for(const i of n)r[i]=t===0?qd(e[i]):pl(e[i],{level:t-1});return r}function V4e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},b={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},y={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},x=WS(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:x,nonMarkTitleProperties:b,subtitle:y}}function Rv(e){return cn(e)||xt(e)&&cn(e[0])}function In(e){return zt(e,"signal")}function t2(e){return zt(e,"step")}function ZPt(e){return xt(e)?!1:zt(e,"fields")&&!zt(e,"data")}function eNt(e){return xt(e)?!1:zt(e,"fields")&&zt(e,"data")}function Wy(e){return xt(e)?!1:zt(e,"field")&&zt(e,"data")}const tNt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},nNt=$t(tNt),rNt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},fH=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function H4e(e){const t=xt(e.condition)?e.condition.map(bde):bde(e.condition);return{...qd(e),condition:t}}function qd(e){if(vI(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function bde(e){if(vI(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Qs(e){if(vI(e)){const{expr:t,...n}=e;return{signal:t,...n}}return In(e)?e:e!==void 0?{value:e}:void 0}function iNt(e){return In(e)?e.signal:Jt(e)}function xde(e){return In(e)?e.signal:Jt(e.value)}function g0(e){return In(e)?e.signal:e==null?null:Jt(e)}function sNt(e,t,n){for(const r of n){const i=mg(r,t.markDef,t.config);i!==void 0&&(e[r]=Qs(i))}return e}function q4e(e){return[].concat(e.type,e.style??[])}function ps(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&zt(t,i)?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:mg(e,t,n,r)}function mg(e,t,n,{vgChannel:r}={}){const i=dH(e,t,n.style);return ba(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function dH(e,t,n){return W4e(e,q4e(t),n)}function W4e(e,t,n){t=ln(t);let r;for(const i of t){const s=n[i];zt(s,e)&&(r=s[e])}return r}function G4e(e,t){return ln(e).reduce((n,r)=>(n.field.push(tn(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function Y4e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Qd(i,r))return;n.push(r)}),n}function K4e(e,t){return Qd(e,t)||!t?e:e?[...ln(e),...ln(t)].join(", "):t}function X4e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Rv(n)||In(n))&&(Rv(r)||In(r)))return{explicit:e.explicit,value:K4e(n,r)};if(Rv(n)||In(n))return{explicit:e.explicit,value:n};if(Rv(r)||In(r))return{explicit:e.explicit,value:r};if(!Rv(n)&&!In(n)&&!Rv(r)&&!In(r))return{explicit:e.explicit,value:Y4e(n,r)};throw new Error("It should never reach here")}function yZ(e){return`Invalid specification ${gs(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const oNt='Autosize "fit" only works for single views and layered views.';function _de(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function wde(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Ede(e){return e?`Dropping "fit-${e}" because spec has discrete ${cd(e)}.`:'Dropping "fit" because spec has discrete size.'}function vZ(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Sde(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function aNt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function uNt(e){return`The "nearest" transform is not supported for ${e} marks.`}function Q4e(e){return`Selection not supported for ${e} yet.`}function lNt(e){return`Cannot find a selection named "${e}".`}const cNt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",fNt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",dNt="Legend bindings are only supported for selections over an individual field or encoding channel.";function hNt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function pNt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const mNt="The same selection must be used to override scale domains in a layered view.",gNt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function yNt(e){return`Unknown repeated value "${e}".`}function Tde(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const vNt="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",bZ="Animation involving facet, layer, or concat is currently unsupported.";function bNt(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Jt(e)}.`}function xNt(e,t,n,r){return(e.length?"Multiple ":"No ")+`matching ${Jt(t)} encoding found for selection ${Jt(n.param)}. Using "field": ${Jt(r)}.`}const _Nt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function wNt(e){return`Unrecognized parse "${e}".`}function Cde(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const ENt="Attempt to add the same child twice.";function SNt(e){return`Ignoring an invalid transform: ${gs(e)}.`}const TNt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Ade(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function CNt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${gs(t)} is overridden by a child projection ${gs(n)}.`}const ANt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function kNt(e){return`${e}Offset dropped because ${e} is continuous`}function RNt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${gs(n)}}.`}function J4e(e){return`Invalid field type "${e}".`}function INt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function PNt(e){return`Invalid aggregation operator "${e}".`}function Z4e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function NNt(e){return`Position range does not support relative band size for ${e}.`}function hH(e,t){return`Dropping ${gs(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const DNt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function NL(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function ONt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function MNt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function LNt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function FNt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function QB(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function $Nt(e){return`The ${e} for range marks cannot be an expression`}function BNt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function jNt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function UNt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function zNt(e){return`Cannot use the relative band size with ${e} scale.`}function VNt(e){return`Using unaggregated domain with raw field has no effect (${gs(e)}).`}function HNt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function qNt(e){return`Unaggregated domain is currently unsupported for log scale (${gs(e)}).`}function WNt(e){return`Cannot apply size to non-oriented mark "${e}".`}function GNt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function YNt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function eRe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function tRe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function KNt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${gs(n)} and ${gs(r)}). Using ${gs(n)}.`}function XNt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${gs(n)} and ${gs(r)}). Using the union of the two domains.`}function QNt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function JNt(e){return`Dropping sort property ${gs(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const kde="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",ZNt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",e8t="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",t8t="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function n8t(e){return`Cannot stack "${e}" if there is already "${e}2".`}function r8t(e){return`Stack is applied to a non-linear scale (${e}).`}function i8t(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function sO(e,t){return`Invalid ${e}: ${gs(t)}.`}function s8t(e){return`Dropping day from datetime ${gs(e)} as day cannot be combined with other units.`}function o8t(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function a8t(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function u8t(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Rde(e){return`1D error band does not support ${e}.`}function nRe(e){return`Channel ${e} is required for "binned" bin.`}function l8t(e){return`Channel ${e} should not be used with "binned" bin.`}function c8t(e){return`Domain for ${e} is required for threshold scale.`}const rRe=XK(KK);let cw=rRe;function f8t(e){return cw=e,cw}function d8t(){return cw=rRe,cw}function xZ(...e){cw.error(...e)}function qt(...e){cw.warn(...e)}function h8t(...e){cw.debug(...e)}function n2(e){if(e&&un(e)){for(const t of wZ)if(zt(e,t))return!0}return!1}const iRe=["january","february","march","april","may","june","july","august","september","october","november","december"],p8t=iRe.map(e=>e.substr(0,3)),sRe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],m8t=sRe.map(e=>e.substr(0,3));function g8t(e){if(EL(e)&&(e=+e),Ri(e))return e>4&&qt(sO("quarter",e)),e-1;throw new Error(sO("quarter",e))}function y8t(e){if(EL(e)&&(e=+e),Ri(e))return e-1;{const t=e.toLowerCase(),n=iRe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=p8t.indexOf(r);if(i!==-1)return i;throw new Error(sO("month",e))}}function v8t(e){if(EL(e)&&(e=+e),Ri(e))return e%7;{const t=e.toLowerCase(),n=sRe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=m8t.indexOf(r);if(i!==-1)return i;throw new Error(sO("day",e))}}function _Z(e,t){const n=[];if(t&&e.day!==void 0&&$t(e).length>1&&(qt(s8t(e)),e=ur(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?y8t(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?g8t(e.quarter):e.quarter;n.push(Ri(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?v8t(e.day):e.day;n.push(Ri(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function fw(e){const n=_Z(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function b8t(e){const n=_Z(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function x8t(e){const t=_Z(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const oRe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},wZ=$t(oRe);function _8t(e){return gn(oRe,e)}function r2(e){return un(e)?e.binned:aRe(e)}function aRe(e){return e&&e.startsWith("binned")}function EZ(e){return e.startsWith("utc")}function w8t(e){return e.substring(3)}const E8t={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function DL(e){return wZ.filter(t=>lRe(e,t))}function uRe(e){const t=DL(e);return t[t.length-1]}function lRe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function S8t(e,t,{end:n}={end:!1}){const r=aZ(t),i=EZ(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of wZ)lRe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),b8t(a)}function cRe(e){if(!e)return;const t=DL(e);return`timeUnitSpecifier(${gs(t)}, ${gs(E8t)})`}function T8t(e,t,n){if(!e)return;const r=cRe(e);return`${n||EZ(e)?"utc":"time"}Format(${t}, ${r})`}function Bu(e){if(!e)return;let t;return cn(e)?aRe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:un(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),EZ(t.unit)&&(t.utc=!0,t.unit=w8t(t.unit)),t}function C8t(e){const{utc:t,...n}=Bu(e);return n.unit?(t?"utc":"")+$t(n).map(r=>fo(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+$t(n).map(r=>fo(`_${r}_${n[r]}`)).join("")}function fRe(e,t=n=>n){const n=Bu(e),r=uRe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=dRe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(fw(a))} - ${t(fw(i))}`}}const A8t={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function k8t(e){return gn(A8t,e)}function dRe(e,t=1){if(k8t(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function R8t(e){return zt(e,"param")}function SZ(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function TZ(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function CZ(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function AZ(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function kZ(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function RZ(e){if(e!=null&&e.field){if(xt(e.range)&&e.range.length===2)return!0;if(In(e.range))return!0}return!1}function IZ(e){return!!(e!=null&&e.field)&&(xt(e.oneOf)||xt(e.in))}function I8t(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function hRe(e){return IZ(e)||SZ(e)||RZ(e)||TZ(e)||AZ(e)||CZ(e)||kZ(e)}function xm(e,t){return VL(e,{timeUnit:t,wrapTime:!0})}function P8t(e,t){return e.map(n=>xm(n,t))}function pRe(e,t=!0){const{field:n}=e,r=Bu(e.timeUnit),{unit:i,binned:s}=r||{},o=tn(e,{expr:"datum"}),a=i?`time(${s?o:S8t(i,n)})`:o;if(SZ(e))return`${a}===${xm(e.equal,i)}`;if(TZ(e)){const u=e.lt;return`${a}<${xm(u,i)}`}else if(AZ(e)){const u=e.gt;return`${a}>${xm(u,i)}`}else if(CZ(e)){const u=e.lte;return`${a}<=${xm(u,i)}`}else if(kZ(e)){const u=e.gte;return`${a}>=${xm(u,i)}`}else{if(IZ(e))return`indexof([${P8t(e.oneOf,i).join(",")}], ${a}) !== -1`;if(I8t(e))return OL(a,e.valid);if(RZ(e)){const{range:u}=pl(e),l=In(u)?{signal:`${u.signal}[0]`}:u[0],c=In(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+xm(l,i)+", "+xm(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${xm(l,i)}`),c!==null&&f.push(`${a} <= ${xm(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${gs(e)}`)}function OL(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function N8t(e){return hRe(e)&&e.timeUnit?{...e,timeUnit:Bu(e.timeUnit)}:e}const bI={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function D8t(e){return e==="quantitative"||e==="temporal"}function mRe(e){return e==="ordinal"||e==="nominal"}const dw=bI.quantitative,PZ=bI.ordinal,XS=bI.temporal,NZ=bI.nominal,lC=bI.geojson;function O8t(e){if(e)switch(e=e.toLowerCase(),e){case"q":case dw:return"quantitative";case"t":case XS:return"temporal";case"o":case PZ:return"ordinal";case"n":case NZ:return"nominal";case lC:return"geojson"}}const ml={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},pH={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function M8t(e,t){const n=pH[e],r=pH[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const L8t={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Ide(e){return L8t[e]}const gRe=new Set(["linear","log","pow","sqrt","symlog"]),yRe=new Set([...gRe,"time","utc"]);function vRe(e){return gRe.has(e)}const bRe=new Set(["quantile","quantize","threshold"]),F8t=new Set([...yRe,...bRe,"sequential","identity"]),$8t=new Set(["ordinal","bin-ordinal","point","band"]);function zu(e){return $8t.has(e)}function N0(e){return F8t.has(e)}function jm(e){return yRe.has(e)}function QS(e){return bRe.has(e)}const B8t={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function j8t(e){return!cn(e)&&zt(e,"name")}function xRe(e){return zt(e,"param")}function U8t(e){return zt(e,"unionWith")}function z8t(e){return un(e)&&"field"in e}const V8t={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:sqt,domain:oqt,range:aqt,rangeMax:uqt,rangeMin:lqt,scheme:cqt,...H8t}=V8t,q8t=$t(H8t);function mH(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return jm(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return jm(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return jm(e);case"nice":return jm(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return N0(e)&&!Gr(["log","time","utc","threshold","quantile"],e)}}function _Re(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return ZE(e)?void 0:UNt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function W8t(e,t){return Gr([PZ,NZ],t)?e===void 0||zu(e):t===XS?Gr([ml.TIME,ml.UTC,void 0],e):t===dw?vRe(e)||QS(e)||e===void 0:!0}function G8t(e,t,n=!1){if(!Lg(e))return!1;switch(e){case po:case Wu:case sx:case uC:case gp:case q0:return jm(t)||t==="band"?!0:t==="point"?!n:!1;case ox:return Gr(["linear","band"],t);case $1:case lx:case B1:case ax:case ux:case Jw:return jm(t)||QS(t)||Gr(["band","point","ordinal"],t);case ud:case Dg:case Og:return t!=="band";case cx:case ld:return t==="ordinal"||QS(t)}}function Y8t(e){return un(e)&&"value"in e}const pf={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},wRe=pf.arc,ML=pf.area,LL=pf.bar,K8t=pf.image,FL=pf.line,$L=pf.point,X8t=pf.rect,oO=pf.rule,ERe=pf.text,DZ=pf.tick,Q8t=pf.trail,OZ=pf.circle,MZ=pf.square,SRe=pf.geoshape;function dx(e){return["line","area","trail"].includes(e)}function V4(e){return["rect","bar","image","arc","tick"].includes(e)}const J8t=new Set($t(pf));function gg(e){return zt(e,"type")}const Z8t=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],eDt=["fill","fillOpacity"],tDt=[...Z8t,...eDt],nDt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Pde=$t(nDt),JB=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rDt={area:["line","point"],bar:JB,rect:JB,line:["point"],tick:["bandSize","thickness",...JB]},iDt={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},sDt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},TRe=$t(sDt);function hw(e){return zt(e,"band")}const oDt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},aDt=5,LZ={binSpacing:0,continuousBandSize:aDt,minBandSize:.25,timeUnitBandPosition:.5},uDt={...LZ,binSpacing:1},lDt={...LZ,thickness:1};function cDt(e){return gg(e)?e.type:e}function CRe(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function FZ({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,u;if(!r||!N0(r)||i)return"always-valid";const s=CRe(ps("invalid",e,t),{isPath:dx(e.type)});return((u=(a=t.scale)==null?void 0:a.invalid)==null?void 0:u[n])!==void 0?"show":s}function fDt(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function ARe({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function kRe({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var c;const o=n==null?void 0:n.get("type"),a=O0(t),u=IL(a==null?void 0:a.aggregate),l=FZ({scaleChannel:e,markDef:i,config:s,scaleType:o,isCountAggregate:u});if(a&&l==="show"){const f=((c=s.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:OL(tn(a,{expr:"datum"}),!1),...dDt(f,n,r)}}}function dDt(e,t,n){if(Y8t(e)){const{value:r}=e;return In(r)?{signal:r.signal}:{value:r}}return ARe({scale:t,scaleName:n,mode:"zeroOrMin"})}function $Z(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=e,a=Zw(t),u=BZ(e),l=kRe({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return l!==void 0?[l,u]:u}function hDt(e){const{datum:t}=e;return n2(t)?fw(t):`${gs(t)}`}function B_(e,t,n,r){const i={};if(t&&(i.scale=t),Fg(e)){const{datum:s}=e;n2(s)?i.signal=fw(s):In(s)?i.signal=s.signal:vI(s)?i.signal=s.expr:i.value=s}else i.field=tn(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function aO({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!In(o)&&0<o&&o<1?"datum":void 0,u=tn(t,{expr:a,suffix:i}),l=n!==void 0?tn(n,{expr:a}):tn(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=In(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function pDt({scaleName:e,fieldDef:t}){const n=tn(t,{expr:"datum"}),r=tn(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function BZ({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(gr(t)){const f=o==null?void 0:o.get("type");if(ff(t)){c??(c=Ib({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Bs(d)||c&&h&&p===XS)return a!=null&&a.impute?B_(t,s,{binSuffix:"mid"},{offset:u}):c&&!zu(f)?aO({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):B_(t,s,SI(t,e)?{binSuffix:"range"}:{},{offset:u});if(hl(d)){if(Kt(n))return aO({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});qt(nRe(e===po?H0:Ng))}}return B_(t,s,zu(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(D0(t)){const f=t.value,d=u?{offset:u}:{};return{...Fk(e,f),...d}}}return Rr(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function Fk(e,t){return Gr(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Gr(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Qs(t)}function pw(e){return e&&e!=="number"&&e!=="time"}function RRe(e,t,n){return`${e}(${t}${n?`, ${gs(n)}`:""})`}const mDt="  ";function jZ({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(pw(n))return y0({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=IRe(e,r,i),a=JS(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return y0({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return y0({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Kt(e)&&e.timeUnit===void 0)return y0({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(eT(e)){const c=yDt({field:o,timeUnit:Kt(e)?(u=Bu(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:i2(e)&&((l=e.scale)==null?void 0:l.type)===ml.UTC});return c?{signal:c}:void 0}if(t=gH({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Kt(e)&&Bs(e.bin)){const c=tn(e,{expr:r,binSuffix:"end"});return{signal:xI(o,c,t,n,s)}}else return t||JS(e)==="quantitative"?{signal:`${DRe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function IRe(e,t,n){return Kt(e)?n?`${tn(e,{expr:t,suffix:"end"})}-${tn(e,{expr:t,suffix:"start"})}`:tn(e,{expr:t}):hDt(e)}function y0({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=IRe(e,r,i)),o!=="datum.value"&&Kt(e)&&Bs(e.bin)){const a=tn(e,{expr:r,binSuffix:"end"});return{signal:xI(o,a,t,n,s)}}return{signal:RRe(n,o,t)}}function PRe(e,t,n,r,i,s){var o;if(!(cn(r)&&pw(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&JS(e)==="quantitative"&&(i.normalizedNumberFormatType&&ZS(e)&&e.stack==="normalize"||i.numberFormatType))){if(ZS(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return gH({type:"quantitative",config:i,normalizeStack:!0});if(eT(e)){const a=Kt(e)?(o=Bu(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:gDt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return gH({type:t,specifiedFormat:n,config:i})}}function NRe(e,t,n){var r;if(e&&(In(e)||e==="number"||e==="time"))return e;if(eT(t)&&n!=="time"&&n!=="utc")return Kt(t)&&((r=Bu(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function gH({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(cn(t))return t;if(e===dw)return r?n.normalizedNumberFormat:n.numberFormat}function gDt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:cRe(t)}:r?void 0:n.timeFormat)}function DRe(e,t){return`format(${e}, "${t||""}")`}function Nde(e,t,n,r){return pw(n)?RRe(n,e,t):DRe(e,(cn(t)?t:void 0)??r.numberFormat)}function xI(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return xI(e,t,i.numberFormat,i.numberFormatType,i);const s=Nde(e,n,r,i),o=Nde(t,n,r,i);return`${OL(e,!1)} ? "null" : ${s} + "${mDt}" + ${o}`}function yDt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=cn(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):T8t(t,e,s)}const BL="min",vDt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Dde(e){return gn(vDt,e)}function bDt(e){return zt(e,"encoding")}function i1(e){return e&&(e.op==="count"||zt(e,"field"))}function ORe(e){return e&&xt(e)}function _I(e){return zt(e,"row")||zt(e,"column")}function UZ(e){return zt(e,"header")}function jL(e){return zt(e,"facet")}function xDt(e){return zt(e,"param")}function _Dt(e){return!cn(e)&&zt(e,"repeat")}function Ode(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function zZ(e){return zt(e,"sort")}function Ib({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(gr(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Kt(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return mg("timeUnitBandPosition",n,r);if(Bs(s))return .5}}function MRe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=cd(e),u=ps(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Kt(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:mg("timeUnitBandSize",r,i)};if(Bs(h)&&!zu(s))return{band:1}}if(V4(r.type))return s?zu(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function LRe(e,t,n,r){return Bs(e.bin)||e.timeUnit&&ff(e)&&e.type==="temporal"?Ib({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function FRe(e){return zt(e,"sort")&&!zt(e,"field")}function wI(e){return zt(e,"condition")}function UL(e){const t=e==null?void 0:e.condition;return!!t&&!xt(t)&&Kt(t)}function EI(e){const t=e==null?void 0:e.condition;return!!t&&!xt(t)&&gr(t)}function wDt(e){const t=e==null?void 0:e.condition;return!!t&&(xt(t)||D0(t))}function Kt(e){return zt(e,"field")||(e==null?void 0:e.aggregate)==="count"}function JS(e){return e==null?void 0:e.type}function Fg(e){return zt(e,"datum")}function Gv(e){return ff(e)&&!lO(e)||uO(e)}function Mde(e){return ff(e)&&e.type==="quantitative"&&!e.bin||uO(e)}function uO(e){return Fg(e)&&Ri(e.datum)}function gr(e){return Kt(e)||Fg(e)}function ff(e){return e&&(zt(e,"field")||e.aggregate==="count")&&zt(e,"type")}function D0(e){return zt(e,"value")}function i2(e){return zt(e,"scale")||zt(e,"sort")}function ZS(e){return zt(e,"axis")||zt(e,"stack")||zt(e,"impute")}function $Re(e){return zt(e,"legend")}function BRe(e){return zt(e,"format")||zt(e,"formatType")}function EDt(e){return nd(e,["legend","axis","header","scale"])}function SDt(e){return zt(e,"op")}function tn(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(CDt(e))n=k4e("count");else{let o;if(!t.nofn)if(SDt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Bs(a)?(o=z4e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?fx(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):E1(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!r2(l)&&(o=C8t(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?aC(n):t.expr?T4e(n,t.expr)+s:sp(n)+s}function lO(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Kt(e)&&!!e.bin;case"temporal":return!1}throw new Error(J4e(e.type))}function TDt(e){var t;return i2(e)&&QS((t=e.scale)==null?void 0:t.type)}function CDt(e){return e.aggregate==="count"}function ADt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Bs(r))return`${n} (binned)`;if(i&&!r2(i)){const a=(o=Bu(i))==null?void 0:o.unit;if(a)return`${n} (${DL(a).join("-")})`}else if(s)return fx(s)?`${n} for max ${s.argmax}`:E1(s)?`${n} for min ${s.argmin}`:`${pI(s)} of ${n}`;return n}function kDt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(fx(t))return`${i} for argmax(${t.argmax})`;if(E1(t))return`${i} for argmin(${t.argmin})`;const s=r&&!r2(r)?Bu(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Bs(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const jRe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return kDt(e);default:return ADt(e,t)}};let URe=jRe;function zRe(e){URe=e}function RDt(){zRe(jRe)}function eS(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=VZ(e))==null?void 0:a.title;if(!Kt(e))return i??e.title;const s=e,o=r?HZ(s,t):void 0;return n?ba(i,s.title,o):i??s.title??o}function VZ(e){if(ZS(e)&&e.axis)return e.axis;if($Re(e)&&e.legend)return e.legend;if(UZ(e)&&e.header)return e.header}function HZ(e,t){return URe(e,t)}function cO(e){if(BRe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=VZ(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function IDt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(zZ(e)&&xt(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!fx(n)&&!E1(n))return"quantitative";if(i2(e)&&((s=e.scale)!=null&&s.type))switch(pH[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function O0(e){if(Kt(e))return e;if(UL(e))return e.condition}function du(e){if(gr(e))return e;if(EI(e))return e.condition}function VRe(e,t,n,r={}){if(cn(e)||Ri(e)||nx(e)){const i=cn(e)?"string":Ri(e)?"number":"boolean";return qt(RNt(t,i,e)),{value:e}}return gr(e)?fO(e,t,n,r):EI(e)?{...e,condition:fO(e.condition,t,n,r)}:e}function fO(e,t,n,r){if(BRe(e)){const{format:i,formatType:s,...o}=e;if(pw(s)&&!n.customFormatTypes)return qt(Ade(t)),fO(o,t,n,r)}else{const i=ZS(e)?"axis":$Re(e)?"legend":UZ(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(pw(o)&&!n.customFormatTypes)return qt(Ade(t)),fO({...e,[i]:a},t,n,r)}}return Kt(e)?qZ(e,t,r):PDt(e)}function PDt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Ri(n)?"quantitative":cn(n)?"nominal":n2(n)?"temporal":void 0,{...e,type:t}}function qZ(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!gZ(r)&&!fx(r)&&!E1(r)&&(qt(PNt(r)),delete a.aggregate),i&&(a.timeUnit=Bu(i)),o&&(a.field=`${o}`),Bs(s)&&(a.bin=zL(s,t)),hl(s)&&!xa(t)&&qt(l8t(t)),ff(a)){const{type:u}=a,l=O8t(u);u!==l&&(a.type=l),u!=="quantitative"&&IL(r)&&(qt(INt(u,r)),a.type="quantitative")}else if(!L4e(t)){const u=IDt(a,t);a.type=u}if(ff(a)){const{compatible:u,warning:l}=NDt(a,t)||{};u===!1&&qt(l)}if(zZ(a)&&cn(a.sort)){const{sort:u}=a;if(Dde(u))return{...a,sort:{encoding:u}};const l=u.substring(1);if(u.charAt(0)==="-"&&Dde(l))return{...a,sort:{encoding:l,order:"descending"}}}if(UZ(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function zL(e,t){return nx(e)?{maxbins:vde(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:vde(t)}:e}const sE={compatible:!0};function NDt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case n1:case r1:case SL:return lO(e)?sE:{compatible:!1,warning:MNt(t)};case po:case Wu:case sx:case uC:case ud:case Dg:case Og:case mI:case gI:case TL:case lw:case CL:case AL:case Jw:case gp:case q0:case kL:return sE;case G0:case op:case W0:case Y0:return n!==dw?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:sE;case B1:case ax:case ux:case lx:case $1:case F1:case L1:case H0:case Ng:case ox:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:sE;case ld:case cx:return!lO(e)&&!TDt(e)?{compatible:!1,warning:LNt(t)}:sE;case KS:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:sE}}function eT(e){const{formatType:t}=cO(e);return t==="time"||!t&&DDt(e)}function DDt(e){return e&&(e.type==="temporal"||Kt(e)&&!!e.timeUnit)}function VL(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=Bu(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return vI(e)?a=e.expr:In(e)?a=e.signal:n2(e)?(o=!0,a=fw(e)):(cn(e)||Ri(e))&&o&&(a=`datetime(${gs(e)})`,_8t(s)&&(Ri(e)&&e<1e4||cn(e)&&isNaN(Date.parse(e)))&&(a=fw({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:gs(e)}function HRe(e,t){const{type:n}=e;return t.map(r=>{const i=Kt(e)&&!r2(e.timeUnit)?e.timeUnit:void 0,s=VL(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function SI(e,t){return Bs(e.bin)?Lg(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Lde={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function TI(e){return e==null?void 0:e.condition}const qRe=["domain","grid","labels","ticks","title"],ODt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},WRe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},MDt={...WRe,style:1,labelExpr:1,encoding:1};function Fde(e){return gn(MDt,e)}const LDt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},GRe=$t(LDt);function U1(e){return zt(e,"mark")}class HL{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return U1(t)?cDt(t.mark)===this.name:!1}}function j_(e,t){const n=e&&e[t];return n?xt(n)?GS(n,r=>!!r.field):Kt(n)||UL(n):!1}function YRe(e,t){const n=e&&e[t];return n?xt(n)?GS(n,r=>!!r.field):Kt(n)||Fg(n)||EI(n):!1}function KRe(e,t){if(xa(t)){const n=e[t];if((Kt(n)||Fg(n))&&(mRe(n.type)||Kt(n)&&n.timeUnit)){const r=fZ(t);return YRe(e,r)}}return!1}function XRe(e){return GS(PPt,t=>{if(j_(e,t)){const n=e[t];if(xt(n))return GS(n,r=>!!r.aggregate);{const r=O0(n);return r&&!!r.aggregate}}return!1})}function QRe(e,t){const n=[],r=[],i=[],s=[],o={};return WZ(e,(a,u)=>{if(Kt(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=VZ(a),m=p==null?void 0:p.title;let g=tn(a,{forAs:!0});const b={...m?[]:{title:eS(a,t,{allowDisabling:!0})},...h,field:g};if(c){let y;if(fx(c)?(y="argmax",g=tn({op:"argmax",field:c.argmax},{forAs:!0}),b.field=`${g}.${l}`):E1(c)?(y="argmin",g=tn({op:"argmin",field:c.argmin},{forAs:!0}),b.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(y=c),y){const x={op:y,as:g};l&&(x.field=l),s.push(x)}}else if(n.push(g),ff(a)&&Bs(f)){if(r.push({bin:f,field:l,as:g}),n.push(tn(a,{binSuffix:"end"})),SI(a,u)&&n.push(tn(a,{binSuffix:"range"})),xa(u)){const y={field:`${g}_end`};o[`${u}2`]=y}b.bin="binned",L4e(u)||(b.type=dw)}else if(d&&!r2(d)){i.push({timeUnit:d,field:l,as:g});const y=ff(a)&&a.type!==XS&&"time";y&&(u===mI||u===lw?b.formatType=y:zPt(u)?b.legend={formatType:y,...b.legend}:xa(u)&&(b.axis={formatType:y,...b.axis}))}o[u]=b}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function FDt(e,t,n){const r=HPt(t,n);if(r){if(r==="binned"){const i=e[t===H0?po:Wu];return!!(Kt(i)&&Kt(e[t])&&hl(i.bin))}}else return!1;return!0}function $Dt(e,t,n,r){const i={};for(const s of $t(e))M4e(s)||qt(ONt(s));for(let s of FPt){if(!e[s])continue;const o=e[s];if(yI(s)){const a=LPt(s),u=i[a];if(Kt(u)&&D8t(u.type)&&Kt(o)&&!u.timeUnit){qt(kNt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(qt(ANt),s=gp),!FDt(e,s,t)){qt(NL(s,t));continue}if(s===$1&&t==="line"){const a=O0(e[s]);if(a!=null&&a.aggregate){qt(DNt);continue}}if(s===ud&&(n?"fill"in e:"stroke"in e)){qt(Z4e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===gI||s===KS&&!xt(o)&&!D0(o)||s===lw&&xt(o)){if(o){if(s===KS){const a=e[s];if(FRe(a)){i[s]=a;continue}}i[s]=ln(o).reduce((a,u)=>(Kt(u)?a.push(qZ(u,s)):qt(hH(u,s)),a),[])}}else{if(s===lw&&o===null)i[s]=null;else if(!Kt(o)&&!Fg(o)&&!D0(o)&&!wI(o)&&!In(o)){qt(hH(o,s));continue}i[s]=VRe(o,s,r)}}return i}function qL(e,t){const n={};for(const r of $t(e)){const i=VRe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function BDt(e){const t=[];for(const n of $t(e))if(j_(e,n)){const r=e[n],i=ln(r);for(const s of i)Kt(s)?t.push(s):UL(s)&&t.push(s.condition)}return t}function WZ(e,t,n){if(e)for(const r of $t(e)){const i=e[r];if(xt(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function jDt(e,t,n,r){return e?$t(e).reduce((i,s)=>{const o=e[s];return xt(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function JRe(e,t){return $t(t).reduce((n,r)=>{switch(r){case po:case Wu:case CL:case kL:case AL:case H0:case Ng:case sx:case uC:case gp:case F1:case q0:case L1:case ox:case W0:case G0:case Y0:case op:case mI:case ld:case Jw:case lw:return n;case KS:if(e==="line"||e==="trail")return n;case gI:case TL:{const i=t[r];if(xt(i)||Kt(i))for(const s of ln(i))s.aggregate||n.push(tn(s,{}));return n}case $1:if(e==="trail")return n;case ud:case Dg:case Og:case B1:case ax:case ux:case cx:case lx:{const i=O0(t[r]);return i&&!i.aggregate&&n.push(tn(i,{})),n}}},[])}function UDt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(xt(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return xt(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function yH(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${GZ(t)}`:"";return{field:o+t.field,type:t.type,title:In(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=BDt(n).map(EDt);return{tooltip:[...i,...Bm(s,ii)]}}function GZ(e){const{title:t,field:n}=e;return ba(t,n)}function YZ(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=GZ(n);return ZRe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...cn(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function ZRe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...gg(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...nx(e[t])?{}:e[t]}}]:[]}function eIe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:m5(s,n),continuousAxisChannelDef2:m5(o,n),continuousAxisChannelDefError:m5(a,n),continuousAxisChannelDefError2:m5(u,n),continuousAxis:i}}function m5(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&qt(u8t(n,t)),r}else return e}function tIe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(gg(n)&&n.orient)return n.orient;if(Gv(i)){if(Gv(s)){const o=Kt(i)&&i.aggregate,a=Kt(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return eT(s)&&!eT(i)?"horizontal":"vertical"}return"horizontal"}else{if(Gv(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const dO="boxplot",zDt=["box","median","outliers","rule","ticks"],VDt=new HL(dO,rIe);function nIe(e){return Ri(e)?"tukey":e}function rIe(e,{config:t}){e={...e,encoding:qL(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=gg(n)?n:{type:n};i&&qt(Q4e("boxplot"));const u=a.extent??t.boxplot.extent,l=ps("size",a,t),c=a.invalid,f=nIe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:b,aggregate:y,encodingWithoutContinuousAxis:x,ticksOrient:w,boxOrient:S,customTooltipWithoutAggregatedField:C}=HDt(e,u,t),R=aC(m.field),{color:I,size:O,...M}=x,L=nt=>YZ(a,g,m,nt,t.boxplot),H=L(M),D=L(x),B=(un(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",z=L({...M,...O?{size:O}:{},color:{condition:{test:`${ss(`lower_box_${m.field}`)} >= ${ss(`upper_box_${m.field}`)}`,...I||{value:B}}}}),G=yH([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,x),Z={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},ne=f==="min-max"?G:yH([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,x),ue=[...H({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:ne}),...H({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:ne}),...H({partName:"ticks",mark:Z,positionPrefix:"lower_whisker",extraEncoding:ne}),...H({partName:"ticks",mark:Z,positionPrefix:"upper_whisker",extraEncoding:ne})],X=[...f!=="tukey"?ue:[],...D({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:S,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:G}),...z({partName:"median",mark:{type:"tick",invalid:c,...un(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:G})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:X};const q=ss(`lower_box_${m.field}`),te=ss(`upper_box_${m.field}`),W=`(${te} - ${q})`,ee=`${q} - ${u} * ${W}`,oe=`${te} + ${u} * ${W}`,pe=ss(m.field),ce={joinaggregate:iIe(m.field),groupby:b},he={transform:[{filter:`(${ee} <= ${pe}) && (${pe} <= ${oe})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${R}`},{op:"max",field:m.field,as:`upper_whisker_${R}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${R}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${R}`},...y],groupby:b}],layer:ue},{tooltip:Ee,...Ae}=M,{scale:ge,axis:me}=m,Oe=GZ(m),Me=nd(me,["title"]),Ye=ZRe(a,"outliers",t.boxplot,{transform:[{filter:`(${pe} < ${ee}) || (${pe} > ${oe})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Oe!==void 0?{title:Oe}:{},...ge!==void 0?{scale:ge}:{},...ms(Me)?{}:{axis:Me}},...Ae,...I?{color:I}:{},...C?{tooltip:C}:{}}})[0];let lt;const We=[...d,...h,ce];return Ye?lt={transform:We,layer:[Ye,he]}:(lt=he,lt.transform.unshift(...We)),{...o,layer:[lt,{transform:p,layer:X}]}}function iIe(e){const t=aC(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function HDt(e,t,n){const r=tIe(e,dO),{continuousAxisChannelDef:i,continuousAxis:s}=eIe(e,r,dO),o=i.field,a=aC(o),u=nIe(t),l=[...iIe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`${ss(`upper_box_${a}`)} - ${ss(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${ss(`upper_box_${a}`)} + ${ss(`iqr_${a}`)} * ${t}, ${ss(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${ss(`lower_box_${a}`)} - ${ss(`iqr_${a}`)} * ${t}, ${ss(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=UDt(d),{bins:m,timeUnits:g,aggregate:b,groupby:y,encoding:x}=QRe(p,n),w=r==="vertical"?"horizontal":"vertical",S=r,C=[...m,...g,{aggregate:[...b,...l],groupby:y},...c];return{bins:m,timeUnits:g,transform:C,groupby:y,aggregate:b,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:x,ticksOrient:w,boxOrient:S,customTooltipWithoutAggregatedField:h}}const KZ="errorbar",qDt=["ticks","rule"],WDt=new HL(KZ,sIe);function sIe(e,{config:t}){e={...e,encoding:qL(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=oIe(e,KZ,t);delete s.size;const c=YZ(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function GDt(e,t){const{encoding:n}=e;if(YDt(n))return{orient:tIe(e,t),inputType:"raw"};const r=KDt(n),i=XDt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(gr(a)&&gr(u))throw new Error(`${t} cannot have both x2 and y2`);if(gr(a)){if(Gv(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(gr(u)){if(Gv(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(gr(u)&&!gr(a))throw new Error(`${t} cannot have xError2 without xError`);if(gr(c)&&!gr(l))throw new Error(`${t} cannot have yError2 without yError`);if(gr(a)&&gr(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(gr(a)){if(Gv(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(gr(l)){if(Gv(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function YDt(e){return(gr(e.x)||gr(e.y))&&!gr(e.x2)&&!gr(e.y2)&&!gr(e.xError)&&!gr(e.xError2)&&!gr(e.yError)&&!gr(e.yError2)}function KDt(e){return gr(e.x2)||gr(e.y2)}function XDt(e){return gr(e.xError)||gr(e.xError2)||gr(e.yError)||gr(e.yError2)}function oIe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=gg(r)?r:{type:r};s&&qt(Q4e(t));const{orient:l,inputType:c}=GDt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=eIe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:b,tooltipSummary:y,tooltipTitleWithFieldName:x}=QDt(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:S,[m==="x"?"xError":"yError"]:C,[m==="x"?"xError2":"yError2"]:R,...I}=i,{bins:O,timeUnits:M,aggregate:L,groupby:H,encoding:D}=QRe(I,n),B=[...L,...g],z=c!=="raw"?[]:H,G=yH(y,f,D,x);return{transform:[...a.transform??[],...O,...M,...B.length===0?[]:[{aggregate:B,groupby:z}],...b],groupby:z,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:D,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:G}}function QDt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&qt(a8t(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`${ss(`center_${c}`)} + ${ss(`extent_${c}`)}`,as:`upper_${c}`},{calculate:`${ss(`center_${c}`)} - ${ss(`extent_${c}`)}`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:pI(h)},{fieldPrefix:"upper_",titlePrefix:$de(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:$de(h,p,"-")}],d=!0;else{let m,g,b;p==="ci"?(m="mean",g="ci0",b="ci1"):(m="median",g="q1",b="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:b,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:eS({field:c,aggregate:b,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:eS({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:eS({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&qt(o8t(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:ss(n.field),as:`upper_${c}`},{calculate:ss(c),as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`${ss(c)} + ${ss(r.field)}`,as:`upper_${c}`}],i?l.push({calculate:`${ss(c)} + ${ss(i.field)}`,as:`lower_${c}`}):l.push({calculate:`${ss(c)} - ${ss(r.field)}`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:uw(uw(h.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function $de(e,t,n){return`${pI(e)} ${n} ${t}`}const XZ="errorband",JDt=["band","borders"],ZDt=new HL(XZ,aIe);function aIe(e,{config:t}){e={...e,encoding:qL(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=oIe(e,XZ,t),l=o,c=YZ(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?qt(Rde("interpolate")):l.tension&&qt(Rde("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const uIe={};function QZ(e,t,n){const r=new HL(e,t);uIe[e]={normalizer:r,parts:n}}function eOt(){return $t(uIe)}QZ(dO,rIe,zDt);QZ(KZ,sIe,qDt);QZ(XZ,aIe,JDt);const tOt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],lIe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},cIe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},nOt=$t(lIe),rOt=$t(cIe),iOt={header:1,headerRow:1,headerColumn:1,headerFacet:1},fIe=$t(iOt),dIe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],sOt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},oOt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},M0="_vgsid_",aOt={point:{on:"click",fields:[M0],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function JZ(e){return e==="legend"||!!(e!=null&&e.legend)}function ZB(e){return JZ(e)&&un(e)}function ZZ(e){return!!(e!=null&&e.select)}function hIe(e){const t=[];for(const n of e||[]){if(ZZ(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function uOt(e){return WL(e)||tee(e)||eee(e)}function eee(e){return zt(e,"concat")}function WL(e){return zt(e,"vconcat")}function tee(e){return zt(e,"hconcat")}function pIe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function yg(e){return zt(e,"step")}function Bde(e){return zt(e,"view")||zt(e,"width")||zt(e,"height")}const jde=20,lOt={align:1,bounds:1,center:1,columns:1,spacing:1},cOt=$t(lOt);function fOt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(jL(e)&&!_I(e.facet)||eee(e))&&(i.columns=o),WL(e)&&(i.columns=1);for(const a of cOt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=Ri(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function vH(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function bH(e,t){const n=hO(e,t);return yg(n)?n.step:mIe}function hO(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return ba(n,{step:e.step})}const mIe=20,dOt={continuousWidth:200,continuousHeight:200,step:mIe},hOt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:dOt,mark:iDt,arc:{},area:{},bar:uDt,circle:{},geoshape:{},image:{},line:{},point:{},rect:LZ,rule:{color:"black"},square:{},text:{color:"black"},tick:lDt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:B8t,projection:{},legend:sOt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:aOt,style:{},title:{},facet:{spacing:jde},concat:{spacing:jde},normalizedNumberFormat:".0%"},Ey=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Ude={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},zde={blue:Ey[0],orange:Ey[1],red:Ey[2],teal:Ey[3],green:Ey[4],yellow:Ey[5],purple:Ey[6],pink:Ey[7],brown:Ey[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function pOt(e={}){return{signals:[{name:"color",value:un(e)?{...zde,...e}:zde}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function mOt(e){return{signals:[{name:"fontSize",value:un(e)?{...Ude,...e}:Ude}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function gOt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function gIe(e){const t=$t(e||{}),n={};for(const r of t){const i=e[r];n[r]=TI(i)?H4e(i):qd(i)}return n}function yOt(e){const t=$t(e),n={};for(const r of t)n[r]=gIe(e[r]);return n}const vOt=[...TRe,...GRe,...fIe,"background","padding","legend","lineBreak","scale","style","title","view"];function yIe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=XT({},ur(hOt),n?gOt(n):{},t?pOt(t):{},r?mOt(r):{},s||{});i&&QT(o,"selection",i,!0);const a=nd(o,vOt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=qd(o[u]));for(const u of TRe)o[u]&&(a[u]=pl(o[u]));for(const u of GRe)o[u]&&(a[u]=gIe(o[u]));for(const u of fIe)o[u]&&(a[u]=pl(o[u]));if(o.legend&&(a.legend=pl(o.legend)),o.scale){const{invalid:u,...l}=o.scale,c=pl(u,{level:1});a.scale={...pl(l),...$t(c).length>0?{invalid:c}:{}}}return o.style&&(a.style=yOt(o.style)),o.title&&(a.title=pl(o.title)),o.view&&(a.view=pl(o.view)),a}const bOt=new Set(["view",...J8t]),xOt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],_Ot={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...rDt};function wOt(e){e=ur(e);for(const t of xOt)delete e[t];if(e.axis)for(const t in e.axis)TI(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of tOt)delete e.legend[t];if(e.mark){for(const t of Pde)delete e.mark[t];e.mark.tooltip&&un(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(hIe(e.params)),delete e.params);for(const t of bOt){for(const r of Pde)delete e[t][r];const n=_Ot[t];if(n)for(const r of n)delete e[t][r];SOt(e,t)}for(const t of eOt())delete e[t];EOt(e);for(const t in e)un(e[t])&&ms(e[t])&&delete e[t];return ms(e)?void 0:e}function EOt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=V4e(e.title);ms(t)||(e.style["group-title"]={...e.style["group-title"],...t}),ms(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),ms(r)?delete e.title:e.title=r}function SOt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};ms(s)||(e.style[n??t]=s),delete e[t]}function GL(e){return zt(e,"layer")}function TOt(e){return zt(e,"repeat")}function COt(e){return!xt(e.repeat)&&zt(e.repeat,"layer")}class nee{map(t,n){return jL(t)?this.mapFacet(t,n):TOt(t)?this.mapRepeat(t,n):tee(t)?this.mapHConcat(t,n):WL(t)?this.mapVConcat(t,n):eee(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(GL(t))return this.mapLayer(t,n);if(U1(t))return this.mapUnit(t,n);throw new Error(yZ(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const AOt={zero:1,center:1,normalize:1};function kOt(e){return gn(AOt,e)}const ROt=new Set([wRe,LL,ML,oO,$L,OZ,MZ,FL,ERe,DZ]),IOt=new Set([LL,ML,wRe]);function oE(e){return Kt(e)&&JS(e)==="quantitative"&&!e.bin}function Vde(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Kt(o)&&Kt(a))if(oE(o)&&oE(a)){if(o.stack)return t;if(a.stack)return i;const u=Kt(o)&&!!o.aggregate,l=Kt(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(oE(o))return t;if(oE(a))return i}else{if(oE(o))return s&&n==="vertical"?void 0:t;if(oE(a))return s&&n==="horizontal"?void 0:i}}function POt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function vIe(e,t){var m,g;const n=gg(e)?e:{type:e},r=n.type;if(!ROt.has(r))return null;const i=Vde(t,"x",n)||Vde(t,"theta",n);if(!i)return null;const s=t[i],o=Kt(s)?tn(s,{}):void 0,a=POt(i),u=[],l=new Set;if(t[a]){const b=t[a],y=Kt(b)?tn(b,{}):void 0;y&&y!==o&&(u.push(a),l.add(y))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Kt(f)?tn(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=$Pt.reduce((b,y)=>{if(y!=="tooltip"&&j_(t,y)){const x=t[y];for(const w of ln(x)){const S=O0(w);if(S.aggregate)continue;const C=tn(S,{});(!C||!l.has(C))&&b.push({channel:y,fieldDef:S})}}return b},[]);let p;return s.stack!==void 0?nx(s.stack)?p=s.stack?"zero":null:p=s.stack:IOt.has(r)&&(p="zero"),!p||!kOt(p)||XRe(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==ml.LINEAR&&s!=null&&s.stack&&qt(r8t(s.scale.type)),gr(t[Mg(i)])?(s.stack!==void 0&&qt(n8t(i)),null):(Kt(s)&&s.aggregate&&!QPt.has(s.aggregate)&&qt(i8t(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:dx(r),stackBy:h,offset:p}))}function bIe(e,t,n){const r=pl(e),i=ps("orient",r,n);if(r.orient=MOt(r.type,t,i),i!==void 0&&i!==r.orient&&qt(jNt(r.orient,i)),r.type==="bar"&&r.orient){const u=ps("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:oDt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=ps("opacity",r,n),o=ps("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=DOt(r.type,t)),ps("cursor",r,n)===void 0&&(r.cursor=NOt(r,t,n)),r}function NOt(e,t,n){return t.href||e.href||ps("href",e,n)?"pointer":e.cursor}function DOt(e,t){if(Gr([$L,DZ,OZ,MZ],e)&&!XRe(t))return .7}function OOt(e,t,{graticule:n}){if(n)return!1;const r=mg("filled",e,t),i=e.type;return ba(r,i!==$L&&i!==FL&&i!==oO)}function MOt(e,t,n){switch(e){case $L:case OZ:case MZ:case ERe:case X8t:case K8t:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case LL:if(Kt(r)&&(hl(r.bin)||Kt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Kt(i)&&(hl(i.bin)||Kt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Kt(r)&&r.type===dw&&!Bs(r.bin)||uO(r))&&Kt(i)&&hl(i.bin)?"horizontal":"vertical";if(!o)return(Kt(i)&&i.type===dw&&!Bs(i.bin)||uO(i))&&Kt(r)&&hl(r.bin)?"vertical":"horizontal"}case oO:if(s&&!(Kt(r)&&hl(r.bin))&&o&&!(Kt(i)&&hl(i.bin)))return;case ML:if(o)return Kt(i)&&hl(i.bin)?"horizontal":"vertical";if(s)return Kt(r)&&hl(r.bin)?"vertical":"horizontal";if(e===oO){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case FL:case DZ:{const a=Mde(r),u=Mde(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=ff(r)&&r.type===XS,c=ff(i)&&i.type===XS;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function LOt(e){const{point:t,line:n,...r}=e;return $t(r).length>1?r:r.type}function FOt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:nd(e[t],["point","line"])});return e}function ej(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?un(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?un(t.point)?t.point:{}:void 0}function Hde(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class $Ot{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(U1(t)){const{mark:r,encoding:i}=t,s=gg(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!ej(s,n[s.type],i);case"area":return!!ej(s,n[s.type],i)||!!Hde(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=qL(l,i),d=gg(a)?a:{type:a},h=ej(d,i[d.type],f),p=d.type==="area"&&Hde(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:LOt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:nd(f,["shape"])}],g=vIe(bIe(d,f,i),f);let b=f;if(g){const{fieldChannel:y,offset:x}=g;b={...f,[y]:{...f[y],...x?{stack:x}:{}}}}return b=nd(b,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...WS(d,["clip","interpolate","tension","tooltip"]),...p},encoding:b}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...WS(d,["clip","tooltip"]),...h},encoding:b}),r({...c,layer:m},{...n,config:FOt(i)})}}function BOt(e,t){return t?_I(e)?_Ie(e,t):xIe(e,t):e}function tj(e,t){return t?_Ie(e,t):e}function xH(e,t,n){const r=t[e];if(_Dt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};qt(yNt(r.repeat));return}return t}function xIe(e,t){if(e=xH("field",e,t),e!==void 0){if(e===null)return null;if(zZ(e)&&i1(e.sort)){const n=xH("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function qde(e,t){if(Kt(e))return xIe(e,t);{const n=xH("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Wde(e,t){if(gr(e)){const n=qde(e,t);if(n)return n;if(wI(e))return{condition:e.condition}}else{if(EI(e)){const n=qde(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function _Ie(e,t){const n={};for(const r in e)if(zt(e,r)){const i=e[r];if(xt(i))n[r]=i.map(s=>Wde(s,t)).filter(s=>s);else{const s=Wde(i,t);s!==void 0&&(n[r]=s)}}return n}class jOt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(U1(t)){const{encoding:n,mark:r}=t;if(r==="line"||gg(r)&&r.type==="line")for(const i of MPt){const s=Zw(i),o=n[s];if(n[i]&&(Kt(o)&&!hl(o.bin)||Fg(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return qt(BNt(!!i.x2,!!i.y2)),r({...t,mark:un(s)?{...s,type:"rule"}:"rule"},n)}}class UOt extends nee{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[VDt,WDt,ZDt,new $Ot,new jOt]}map(t,n){if(U1(t)){const r=j_(t.encoding,n1),i=j_(t.encoding,r1),s=j_(t.encoding,SL);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=tj(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return COt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${fo(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!xt(r)&&t.columns&&(t=nd(t,["columns"]),qt(Tde("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!xt(r)&&r.row||[u?u.row:null],f=!xt(r)&&r.column||[u?u.column:null],d=xt(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const b={repeat:p,row:m,column:g,layer:u.layer},y=(i.name?`${i.name}_`:"")+l+"child__"+(xt(r)?`${fo(p)}`:(r.row?`row_${fo(m)}`:"")+(r.column?`column_${fo(g)}`:"")),x=this.map(i,{...n,repeater:b,repeaterPrefix:y});x.name=y,a.push(nd(x,["data"]))}const h=xt(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return _I(r)&&t.columns&&(t=nd(t,["columns"]),qt(Tde("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=Yde({parentProjection:o,projection:i}),l=Gde({parentEncoding:s,encoding:tj(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),b=tj(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:b,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&qt(FNt([...r?[n1]:[],...i?[r1]:[]]));const o={},a={};for(const u of[n1,r1]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:BOt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Gde({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Yde({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Gde({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...$t(e),...$t(t)]);for(const s of i){const o=t[s],a=e[s];if(gr(o)){const u={...a,...o};r[s]=u}else EI(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||D0(a)||In(a)||gr(a)||xt(a))&&(r[s]=a)}}else r=t;return!r||ms(r)?void 0:r}function Yde(e){const{parentProjection:t,projection:n}=e;return t&&n&&qt(CNt({parentProjection:t,projection:n})),n??t}function ree(e){return zt(e,"filter")}function zOt(e){return zt(e,"stop")}function wIe(e){return zt(e,"lookup")}function VOt(e){return zt(e,"data")}function HOt(e){return zt(e,"param")}function qOt(e){return zt(e,"pivot")}function WOt(e){return zt(e,"density")}function GOt(e){return zt(e,"quantile")}function YOt(e){return zt(e,"regression")}function KOt(e){return zt(e,"loess")}function XOt(e){return zt(e,"sample")}function QOt(e){return zt(e,"window")}function JOt(e){return zt(e,"joinaggregate")}function ZOt(e){return zt(e,"flatten")}function e9t(e){return zt(e,"calculate")}function EIe(e){return zt(e,"bin")}function t9t(e){return zt(e,"impute")}function n9t(e){return zt(e,"timeUnit")}function r9t(e){return zt(e,"aggregate")}function i9t(e){return zt(e,"stack")}function s9t(e){return zt(e,"fold")}function o9t(e){return zt(e,"extent")&&!zt(e,"density")&&!zt(e,"regression")}function a9t(e){return e.map(t=>ree(t)?{filter:JE(t.filter,N8t)}:t)}class u9t extends nee{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Kde(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Kde(t,n),t.encoding){const r={};for(const[i,s]of kb(t.encoding))r[i]=SIe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:kb(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Tl(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function Kde(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(ree(s))return{filter:_H(s,t)};if(EIe(s)&&e2(s.bin))return{...s,bin:TIe(s.bin)};if(wIe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function SIe(e,t){var r,i;const n=ur(e);if(Kt(n)&&e2(n.bin)&&(n.bin=TIe(n.bin)),i2(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(wI(n))if(xt(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:_H(s,t)}});else{const{selection:s,param:o,test:a,...u}=SIe(n.condition,t);n.condition=o?n.condition:{...u,test:_H(n.condition,t)}}return n}function TIe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function _H(e,t){const n=r=>JE(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):JE(e.test||e.filter,r=>r.selection?n(r.selection):r)}class wH extends nee{map(t,n){const r=n.selections??[];if(t.params&&!U1(t)){const i=[];for(const s of t.params)ZZ(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(cn(a)&&(a===t.name||i.includes(a))||xt(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=wH.prototype[e];wH.prototype[e]=function(n,r){return t.call(this,n,l9t(n,r))}}function l9t(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function CIe(e,t){t===void 0&&(t=yIe(e.config));const n=h9t(e,t),{width:r,height:i}=e,s=p9t(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const c9t=new UOt,f9t=new u9t,d9t=new wH;function h9t(e,t={}){const n={config:t};return d9t.map(c9t.map(f9t.map(e,n),n),n)}function Xde(e){return cn(e)?{type:e}:e??{}}function p9t(e,t,n){let{width:r,height:i}=t;const s=U1(e)||GL(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(qt(_de("width")),r=void 0),i=="container"&&(qt(_de("height")),i=void 0));const a={type:"pad",...o,...n?Xde(n.autosize):{},...Xde(e.autosize)};if(a.type==="fit"&&!s&&(qt(oNt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&qt(wde("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&qt(wde("height")),!Qd(a,{type:"pad"}))return a}function m9t(e){return["fit","fit-x","fit-y"].includes(e)}function g9t(e){return e?`fit-${RL(e)}`:"fit"}const y9t=["background","padding"];function Qde(e,t){const n={};for(const r of y9t)e&&e[r]!==void 0&&(n[r]=qd(e[r]));return t&&(n.params=e.params),n}class z1{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new z1(ur(this.explicit),ur(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return ba(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of $t(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Cm(e){return{explicit:!0,value:e}}function Ud(e){return{explicit:!1,value:e}}function AIe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:YL(t,n,r,i)}}function YL(e,t,n,r){return e.explicit&&t.explicit&&qt(KNt(n,r,e.value,t.value)),e}function Pb(e,t,n,r,i=YL){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Qd(e.value,t.value)?e:i(e,t,n,r)}class v9t extends z1{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function tT(e){return zt(e,"url")}function H4(e){return zt(e,"values")}function kIe(e){return zt(e,"name")&&!tT(e)&&!H4(e)&&!sb(e)}function sb(e){return e&&(RIe(e)||IIe(e)||iee(e))}function RIe(e){return zt(e,"sequence")}function IIe(e){return zt(e,"sphere")}function iee(e){return zt(e,"graticule")}var So;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(So||(So={}));function PIe({invalid:e,isPath:t}){switch(CRe(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function b9t(e){const{marks:t,scales:n}=PIe(e);return t===n?So.Main:n==="include-invalid-values"?So.PreFilterInvalid:So.PostFilterInvalid}class us{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){qt(ENt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class rd extends us{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${A4e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function nj(e){return e.as!==void 0}function Jde(e){return`${e}_end`}class Ym extends us{clone(){return new Ym(null,ur(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(r2(u)){if(wo(n)){const{mark:c,markDef:f,config:d}=n,h=Ib({fieldDef:s,markDef:f,config:d});(V4(c)||h)&&(l={timeUnit:Bu(u),field:a})}}else l={as:tn(s,{forAs:!0}),field:a,timeUnit:u};if(wo(n)){const{mark:c,markDef:f,config:d}=n,h=Ib({fieldDef:s,markDef:f,config:d});V4(c)&&xa(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[ii(l)]=l)}return i},{});return ms(r)?null:new Ym(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=Bu(r),o={...i,timeUnit:s};return new Ym(t,{[ii(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of kb(this.timeUnits)){const s=nj(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Tl(this.timeUnits).map(t=>nj(t)?t.as:Jde(t.field)))}dependentFields(){return new Set(Tl(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${ii(this.timeUnits)}`}assemble(){const t=[];for(const n of Tl(this.timeUnits)){const{rectBandPosition:r}=n,i=Bu(n.timeUnit);if(nj(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:sp(s),type:"timeunit",...a?{units:DL(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Zde(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=NIe({timeUnit:i,field:o}),u=Jde(o);t.push({type:"formula",expr:a,as:u}),t.push(...Zde([o,u],r,i))}}return t}}const KL="offsetted_rect_start",XL="offsetted_rect_end";function NIe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=uRe(r),{part:o,step:a}=dRe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', ${ss(t)}, ${n?-a:a})`}function Zde([e,t],n,r){if(n!==void 0&&n!==.5){const i=ss(e),s=ss(t);return[{type:"formula",expr:ehe([NIe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${KL}`},{type:"formula",expr:ehe([i,s],n+.5),as:`${e}_${XL}`}]}return[]}function ehe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const CI="_tuple_fields";class x9t{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const _9t={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new x9t),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let b=fo(`${r}_${g}`);for(let y=1;a.has(b);y++)b=fo(`${r}_${g}_${y}`);return a.add(b),{[m]:b}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?ln(n.value):null;let{fields:d,encodings:h}=un(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(un(p))for(const m of $t(p))OPt(m)?(h||(h=[])).push(m):l==="interval"?(qt(gNt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){qt(aNt(p,m.aggregate));continue}else if(!g){qt(Sde(p));continue}if(m.timeUnit&&!r2(m.timeUnit)){g=e.vgField(p);const b={timeUnit:m.timeUnit,as:g,field:m.field};o[ii(b)]=b}if(!s[g]){const b=l==="interval"&&Lg(p)&&N0(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",y={field:g,channel:p,type:b,index:i.items.length};y.signals={...u(y,"data"),...u(y,"visual")},i.items.push(s[g]=y),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===M0,D4e(p)?(y.geoChannel=p,y.channel=N4e(p),i.hasChannel[y.channel]=s[g]):i.hasChannel[p]=s[g]}}else qt(Sde(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===M0}f&&(t.init=f.map(p=>i.items.map(m=>un(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),ms(o)||(i.timeUnit=new Ym(null,o))},signals:(e,t,n)=>{const r=t.name+CI;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(LIe)})}},DIe="_curr",YN="anim_value",SE="anim_clock",EH="eased_anim_clock",OIe="min_extent",MIe="max_range_extent",rj="last_tick_at",ij="is_playing",w9t=1/60*1e3,E9t=(e,t)=>[{name:EH,update:SE},{name:`${e}_domain`,init:`domain('${t}')`},{name:OIe,init:`extent(${e}_domain)[0]`},{name:MIe,init:`extent(range('${t}'))[1]`},{name:YN,update:`invert('${t}', ${EH})`}],S9t={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Km(t)&&(n=n.concat([{name:SE,init:"0",on:[{events:{type:"timer",throttle:w9t},update:`${ij} ? (${SE} + (now() - ${rj}) > ${MIe} ? 0 : ${SE} + (now() - ${rj})) : ${SE}`}]},{name:rj,init:"now()",on:[{events:[{signal:SE},{signal:ij}],update:"now()"}]},{name:ij,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+CI,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Tl(e.component.selection??{}).reduce((c,f)=>f.type==="interval"?c.concat(f.name+tS):c,[]).map(c=>`indexof(item().mark.name, '${c}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${U_(e)}, `;if(t.project.hasSelectionId)l+=`${M0}: ${o}[${Jt(M0)}]`;else if(Km(t))l+=`fields: ${i}, values: [${YN} ? ${YN} : ${OIe}]`;else{const c=s.items.map(f=>{const d=e.fieldDef(f.channel);return d!=null&&d.bin?`[${o}[${Jt(e.vgField(f.channel,{}))}], ${o}[${Jt(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${o}[${Jt(f.field)}]`}).join(", ");l+=`fields: ${i}, values: [${c}]`}if(Km(t))return n.concat(E9t(t.name,e.scaleName(ox)),[{name:r+T1,on:[{events:[{signal:EH},{signal:YN}],update:`{${l}}`,force:!0}]}]);{const c=t.events;return n.concat([{name:r+T1,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}}};function LIe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=sp(i.field),i}function mw(e,t=!0,n=pc){if(xt(e)){const r=e.map(i=>mw(i,t,n));return t?`[${r.join(", ")}]`:r}else if(n2(e))return n(t?fw(e):x8t(e));return t?n(gs(e)):e}function T9t(e,t){for(const n of Tl(e.component.selection??{})){const r=n.name;let i=`${r}${T1}, ${n.resolve==="global"?"true":`{unit: ${U_(e)}}`}`;for(const s of JL)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+J9t,on:[{events:{signal:n.name+T1},update:`modify(${Jt(n.name+gw)}, ${i})`}]})}return see(t)}function C9t(e,t){if(e.component.selection&&$t(e.component.selection).length){const n=Jt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:ix("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return see(t)}function A9t(e,t){let n=!1;for(const r of Tl(e.component.selection??{})){const i=r.name,s=Jt(i+gw);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${ZIe}(${s}, ${Jt(a)}${u}`})}n=!0;for(const a of JL)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),see(t)}function k9t(e,t){const n=[],r=[],i=U_(e,{escape:!1});for(const s of Tl(e.component.selection??{})){const o={name:s.name+gw};if(s.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:M0}}]),s.init){const u=s.project.items.map(LIe);o.values=s.project.hasSelectionId?s.init.map(l=>({unit:i,[M0]:mw(l,!1)[0]})):s.init.map(l=>({unit:i,fields:u,values:mw(l,!1)}))}if([...n,...t].filter(u=>u.name===s.name+gw).length||n.push(o),Km(s)&&t.length){const u=e.lookupDataSource(e.getDataName(So.Main)),l=t.find(f=>f.name===u),c=l.transform.find(f=>f.type==="filter"&&f.expr.includes("vlSelectionTest"));if(c){l.transform=l.transform.filter(d=>d!==c);const f={name:l.name+DIe,source:l.name,transform:[c]};r.push(f)}}}return n.concat(t,r)}function FIe(e,t){for(const n of Tl(e.component.selection??{}))for(const r of JL)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function R9t(e,t){for(const n of e.children)wo(n)&&(t=FIe(n,t));return t}function I9t(e,t,n,r){const i=i6e(e,t.param,t);return{signal:N0(n.get("type"))&&xt(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function see(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const s1={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Lg(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&qt(fNt),!s||!N0(o)){qt(cNt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||TH(e)||r.length===0)return n;const i=n.find(o=>o.name===t.name);let s=i.update;if(s.includes(ZIe))i.update=`{${r.map(o=>`${Jt(sp(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Jt(sp(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!TH(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function SH(e,t){return`domain(${Jt(e.scaleName(t))})`}function TH(e){return e.parent&&pC(e.parent)&&(!e.parent.parent||TH(e.parent.parent))}const tS="_brush",$Ie="_scale_trigger",c3="geo_interval_init_tick",BIe="_init",P9t="_center",N9t={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...un(n.select)?n.select:{}};i.fields=[M0],i.encodings||(i.encodings=n.value?$t(n.value):[G0,W0]),n.select={type:"interval",...i}}if(t.translate&&!s1.defined(t)){const i=`!event.item || event.item.mark.name !== ${Jt(t.name+tS)}`;for(const s of t.events){if(!s.between){qt(`${s} is not an ordered event stream for interval selections.`);continue}const o=ln((r=s.between[0]).filter??(r.filter=[]));o.includes(i)||o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+T1,s=Tl(t.project.hasChannel).filter(a=>a.channel===po||a.channel===Wu),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(D9t(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Jt(e.projectionName()),u=e.projectionName()+P9t,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=S=>e.getSizeSignalRef(S).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+BIe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(C=>C.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const b=`intersect(${g}, {markname: ${Jt(e.getName("marks"))}}, unit.mark)`,y=`{unit: ${U_(e)}}`,x=`vlSelectionTuples(${b}, ${y})`,w=s.map(S=>S.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:c3}]:[]],update:x}]})}else{if(!s1.defined(t)){const l=r+$Ie,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=Jt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),b=N0(g)?"+":"";return`(!isArray(${h}) || (${b}invert(${m}, ${p})[0] === ${b}${h}[0] && ${b}invert(${m}, ${p})[1] === ${b}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${U_(e)}, fields: ${r+CI}, values`;return n.concat({name:i,...o?{init:`{${u}: ${mw(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(wo(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===c3).length||n.unshift({name:c3,value:null,on:[{events:"timer{1}",update:`${c3} === null ? {} : ${c3}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Jt(t.name+gw)})`;if(s1.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of $t(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${U_(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=$t(h).reduce((g,b)=>(g[b]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(y=>y).join(" && "),value:h[b]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+tS}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+tS,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function D9t(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Jt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===po?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=s1.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:mw(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+$Ie},update:N0(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:mw(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===po?0:1,h=t.name+BIe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}function cC({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=wI(t)&&t.condition;let o=[];s&&(o=ln(s).map(l=>{const c=i(l);if(xDt(l)){const{param:f,empty:d}=l;return{test:r6e(e,{param:f,empty:d}),...c}}else return{test:gO(e,l.test),...c}})),r!==void 0&&o.push(r);const a=i(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function oee(e,t="text"){const n=e.encoding[t];return cC({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>QL(r,e.config),invalidValueRef:void 0})}function QL(e,t,n="datum"){if(e){if(D0(e))return Qs(e.value);if(gr(e)){const{format:r,formatType:i}=cO(e);return jZ({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function jIe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(xt(o))return{tooltip:the({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return cC({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:l=>{const c=QL(l,i,a);if(c)return c;if(l===null)return;let f=ps("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),cn(f))return{value:f};if(un(f))return In(f)?f:f.content==="encoding"?the(n,s,i,t):{signal:a}},invalidValueRef:void 0})}}function UIe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s=new Set,o=r?"datum.datum":"datum",a=[];function u(c,f){const d=Zw(f),h=ff(c)?c:{...c,type:e[d].type},p=h.title||HZ(h,i),m=ln(p).join(", ").replaceAll(/"/g,'\\"');let g;if(xa(f)){const b=f==="x"?"x2":"y2",y=O0(e[b]);if(hl(h.bin)&&y){const x=tn(h,{expr:o}),w=tn(y,{expr:o}),{format:S,formatType:C}=cO(h);g=xI(x,w,S,C,i),s.add(b)}}if((xa(f)||f===gp||f===q0)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:b,formatType:y}=cO(h);g=jZ({fieldOrDatumDef:h,format:b,formatType:y,expr:o,config:i,normalizeStack:!0}).signal}g??(g=QL(h,i,o).signal),a.push({channel:f,key:m,value:g})}WZ(e,(c,f)=>{Kt(c)?u(c,f):UL(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s.has(c)&&!l[f]&&(l[f]=d);return l}function the(e,t,n,{reactiveGeom:r}={}){const i=UIe(e,t,n,{reactiveGeom:r}),s=kb(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function O9t(e){const{markDef:t,config:n}=e,r=ps("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...M9t(e),...L9t(e)}}function M9t(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=ps("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:gn(rNt,t)?{}:{ariaRoleDescription:{value:t}}}function L9t(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return cC({model:e,channelDef:s,vgChannel:"description",mainRefFn:u=>QL(u,e.config),invalidValueRef:void 0});const o=ps("description",n,r);if(o!=null)return{description:Qs(o)};if(r.aria===!1)return{};const a=UIe(t,i,r);if(!ms(a))return{description:{signal:kb(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function vl(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;const l=i[e];a===void 0&&(u??(u=ps(e,r,s,{vgChannel:o,ignoreVgConfig:!wI(l)})),u!==void 0&&(a=Qs(u)));const c={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=kRe({...c,scaleChannel:e,channelDef:l});return cC({model:t,channelDef:l,vgChannel:o??e,invalidValueRef:f,mainRefFn:h=>BZ({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function zIe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??ps("filled",n,i),a=Gr(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=ps(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=ps(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:Qs(u)}:{},...l?{stroke:Qs(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&qt(Z4e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...vl("color",e,{vgChannel:c,defaultValue:o?u:l}),...vl("fill",e,{defaultValue:r.fill?u:void 0}),...vl("stroke",e,{defaultValue:r.stroke?l:void 0})}}function F9t(e){const{encoding:t,mark:n}=e,r=t.order;return!dx(n)&&D0(r)?cC({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>Qs(i.value),invalidValueRef:void 0}):{}}function nT({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:BZ({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:Qs(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function sf(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[Mg(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=nT({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=aee({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&xa(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:$9t({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function $9t(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(gr(n)&&i&&t===i.fieldChannel){if(Kt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return aO({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return B_(n,r,{suffix:"end"},{offset:s})}return $Z(e)}function aee({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=Zw(n),u=Rb(n),l=ps(n,s,o,{vgChannel:u});if(l!==void 0)return Fk(n,l);switch(t){case"zeroOrMin":return nhe({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return nhe({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[cd(n)],mult:.5}}}}function nhe({mainChannel:e,config:t,...n}){const r=ARe(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const B9t={left:"x",center:"xc",right:"x2"},j9t={top:"y",middle:"yc",bottom:"y2"};function VIe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Rb(e);const i=e==="x"?"align":"baseline",s=ps(i,t,n);let o;return In(s)?(qt($Nt(i)),o=void 0):o=s,e==="x"?B9t[o||(r==="top"?"left":"center")]:j9t[o||r]}function pO(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?HIe(e,t,{defaultPos:n,defaultPos2:r}):sf(e,t,{defaultPos:n})}function HIe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Mg(e),a=cd(e),u=U9t(t,r,o),l=u[a]?VIe(e,i,s):Rb(e);return{...sf(e,t,{defaultPos:n,vgChannel:l}),...u}}function U9t(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=Zw(n),l=cd(n),c=Rb(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?nT({channel:n,markDef:s,encoding:r,model:e}):nT({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=cd(n),b=e.markDef[g];return b!=null?{[g]:{value:b}}:{[c]:{field:e.getName(n)}}}const m=z9t({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:g5(n,s)||g5(n,{[n]:dH(n,s,a.style),[l]:dH(l,s,a.style)})||g5(n,a[i])||g5(n,a.mark)||{[c]:aee({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function z9t({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return gr(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?B_(t,s,{suffix:"start"},{offset:u}):$Z({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function g5(e,t){const n=cd(e),r=Rb(e);if(t[r]!==void 0)return{[r]:Fk(e,t[r])};if(t[e]!==void 0)return{[r]:Fk(e,t[e])};if(t[n]){const i=t[n];if(hw(i))qt(NNt(n));else return{[n]:Fk(e,i)}}}function S1(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Mg(t),a=cd(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??ps("size",i,n,{vgChannel:a}),p=F4e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||s==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return Kt(u)&&(Bs(u.bin)||hl(u.bin)||u.timeUnit&&!l)&&!(h&&!hw(h))&&!r[p]&&!zu(f)?q9t({fieldDef:u,fieldDef2:l,channel:t,model:e}):(gr(u)&&zu(f)||m)&&!l?H9t(u,t,e):HIe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function V9t(e,t,n,r,i,s,o){if(hw(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=mg("minBandSize",{type:o},r);return{signal:c?`max(${g0(c)}, ${l})`:l}}else i.band!==1&&(qt(zNt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(In(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(t2(u)&&Ri(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c,tickBandPaddingInner:f}=r.scale,d=ba(u,o==="tick"?f:o==="bar"?l:c);if(In(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(Ri(d))return{signal:`${1-d} * ${e}`}}return{value:bH(r.view,e)-2}}function H9t(e,t,n){var O,M;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=cd(t),f=Mg(t),d=F4e(t),h=n.scaleName(d),p=n.getScaleComponent(fZ(t)),m=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=vl("size",n,{vgChannel:c,defaultRef:Qs(r.size)}):qt(WNt(r.type)));const b=!!g,y=MRe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(O=l||p)==null?void 0:O.get("type"),useVlSizeChannel:m});g=g||{[c]:V9t(c,h||u,p||l,s,y,!!e,r.type)};const x=((M=l||p)==null?void 0:M.get("type"))==="band"&&hw(y)&&!b?"top":"middle",w=VIe(t,r,s,x),S=w==="xc"||w==="yc",{offset:C,offsetType:R}=nT({channel:t,markDef:r,encoding:i,model:n,bandPosition:S?.5:0}),I=$Z({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:C,defaultRef:aee({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:S?R==="encoding"?0:.5:In(y)?{signal:`(1-${y})/2`}:hw(y)?(1-y.band)/2:0});if(c)return{[w]:I,...g};{const L=Rb(f),H=g[c],D=C?{...H,offset:C}:H;return{[w]:I,[L]:xt(I)?[I[0],{...I[1],offset:D}]:{...I,offset:D}}}}function rhe(e,t,n,r,i,s,o){if(P4e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(In(n)||In(i)||In(r)||s){const l=g0(n),c=g0(i),f=g0(r),d=g0(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",b=c?`(${c} + ${p})`:p;return{signal:m+g+b}}else return i=i||0,r+(n?-i-u:+i+u)}function q9t({fieldDef:e,fieldDef2:t,channel:n,model:r}){var M;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=MRe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(M=r.component.axes[n])==null?void 0:M[0],h=(d==null?void 0:d.get("translate"))??.5,p=xa(n)?ps("binSpacing",s,i)??0:0,m=Mg(n),g=Rb(n),b=Rb(m),y=mg("minBandSize",s,i),{offset:x}=nT({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=nT({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),S=pDt({fieldDef:e,scaleName:u}),C=rhe(n,p,c,h,x,y,S),R=rhe(m,p,c,h,w??x,y,S),I=In(f)?{signal:`(1-${f.signal})/2`}:hw(f)?(1-f.band)/2:.5,O=Ib({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Bs(e.bin)||e.timeUnit){const L=e.timeUnit&&O!==.5;return{[b]:ihe({fieldDef:e,scaleName:u,bandPosition:I,offset:R,useRectOffsetField:L}),[g]:ihe({fieldDef:e,scaleName:u,bandPosition:In(I)?{signal:`1-${I.signal}`}:1-I,offset:C,useRectOffsetField:L})}}else if(hl(e.bin)){const L=B_(e,u,{},{offset:R});if(Kt(t))return{[b]:L,[g]:B_(t,u,{},{offset:C})};if(e2(e.bin)&&e.bin.step)return{[b]:L,[g]:{signal:`scale("${u}", ${tn(e,{expr:"datum"})} + ${e.bin.step})`,offset:C}}}qt(nRe(m))}function ihe({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return aO({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:KL,endSuffix:XL}:{}})}const W9t=new Set(["aria","width","height"]);function yp(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?zIe(e):{};return{...G9t(e.markDef,t),...she("fill",n),...she("stroke",r),...vl("opacity",e),...vl("fillOpacity",e),...vl("strokeOpacity",e),...vl("strokeWidth",e),...vl("strokeDash",e),...F9t(e),...jIe(e),...oee(e,"href"),...O9t(e)}}function she(e,t){return t?{[e]:t}:{}}function G9t(e,t){return nNt.reduce((n,r)=>(!W9t.has(r)&&zt(e,r)&&t[r]!=="ignore"&&(n[r]=Qs(e[r])),n),{})}function uee(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var l;let o;if(!Lg(s)||!(o=e.getScaleType(s)))return;const a=IL(i.aggregate),u=FZ({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(fDt(u)){const c=e.vgField(s,{expr:"datum",binSuffix:(l=e.stack)!=null&&l.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(s=>OL(s,!0)).join(" && ")}}}function ohe(e,t){if(t!==void 0)return{[e]:Qs(t)}}const sj="voronoi",qIe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(sj)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(dx(s))return qt(uNt(s)),n;const o={name:e.getName(sj),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...jIe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.includes(sj)&&(u=!0)}),u||n.splice(a+1,0,o),n}},WIe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!JZ(e.bind),parse:(e,t,n)=>e6e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=qIe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=fo(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:mw(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Jt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(l=>l.name===r+T1),o=r+CI,a=i.items.map(l=>fo(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},mO="_toggle",GIe={defined:e=>e.type==="point"&&!Km(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+mO,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+T1,r=t.name+mO;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${U_(e)}}, `)+`${r} ? ${n} : null`}},Y9t={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Km(e),parse:(e,t)=>{t.clear&&(t.clear=cn(t.clear)?ix(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(WIe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===fo(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+T1);r(i,"null"),GIe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+mO),r(i,"false"))}return n}},YIe={defined:e=>{const t=e.resolve==="global"&&e.bind&&JZ(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==M0;return t&&!n&&qt(dNt),t&&n},parse:(e,t,n)=>{const r=ur(n);if(r.select=cn(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},e6e(t,r),un(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=ln(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=ZB(t.bind)?t.bind.legend:"click",s=cn(i)?ix(i,"view"):ln(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=ZB(t.bind)&&t.bind.legend,s=o=>a=>{const u=ur(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${fo(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+T1),o=r+CI,a=i.items.filter(d=>d.hasLegend).map(d=>fo(`${r}_${fo(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+mO),f=ZB(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function K9t(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Tl(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&YIe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const KIe="_translate_anchor",XIe="_translate_delta",X9t={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=s1.defined(t),s=r+KIe,{x:o,y:a}=t.project.hasChannel;let u=ix(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+tS,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?SH(e,po):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?SH(e,Wu):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+XIe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&ahe(e,t,o,"width",n),a!==void 0&&ahe(e,t,a,"height",n),n}};function ahe(e,t,n,r,i){const s=t.name,o=s+KIe,a=s+XIe,u=n.channel,l=s1.defined(t),c=i.find(S=>S.name===n.signals[l?"data":"visual"]),f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===po?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,b=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,y=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",x=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${y}(${g}, ${b}${x})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const QIe="_zoom_anchor",JIe="_zoom_delta",Q9t={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=s1.defined(t),s=r+JIe,{x:o,y:a}=t.project.hasChannel,u=Jt(e.scaleName(po)),l=Jt(e.scaleName(Wu));let c=ix(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+tS,f))),n.push({name:r+QIe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&uhe(e,t,o,"width",n),a!==void 0&&uhe(e,t,a,"height",n),n}};function uhe(e,t,n,r,i){const s=t.name,o=n.channel,a=s1.defined(t),u=i.find(y=>y.name===n.signals[a?"data":"visual"]),l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?SH(e,o):u.name,h=s+JIe,p=`${s}${QIe}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",b=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?b:`clampRange(${b}, 0, ${l})`})}const gw="_store",T1="_tuple",J9t="_modify",ZIe="vlSelectionResolve",JL=[S9t,N9t,_9t,GIe,WIe,s1,YIe,Y9t,X9t,Q9t,qIe];function Z9t(e){let t=e.parent;for(;t&&!ih(t);)t=t.parent;return t}function U_(e,{escape:t}={escape:!0}){let n=t?Jt(e.name):e.name;const r=Z9t(e);if(r){const{facet:i}=r;for(const s of Xh)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Jt(r.vgField(s))}])`)}return n}function lee(e){return Tl(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function e6e(e,t){(cn(t.select)||!t.select.on)&&delete e.events,(cn(t.select)||!t.select.clear)&&delete e.clear,(cn(t.select)||!t.select.toggle)&&delete e.toggle}function Km(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function CH(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...CH(e.object)),t.push(...CH(e.property))),t)}function t6e(e){return e.object.type==="MemberExpression"?t6e(e.object):e.object.name==="datum"}function n6e(e){const t=AJ(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&t6e(r)&&n.add(CH(r).slice(1).join("."))}),n}class fC extends us{clone(){return new fC(null,this.model,ur(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=gO(this.model,this.filter,this),this._dependentFields=n6e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function eMt(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const s of t){const o=fo(s.name),a=s.select,u=cn(a)?a:a.type,l=un(a)?ur(a):{type:u},c=r[u];for(const h in c)h==="fields"||h==="encodings"||(h==="mark"&&(l.mark={...c.mark,...l.mark}),(l[h]===void 0||l[h]===!0)&&(l[h]=ur(c[h]??l[h])));const f=n[o]={...l,name:o,type:u,init:s.value,bind:s.bind,events:cn(l.on)?ix(l.on,"scope"):ln(ur(l.on))};if(Km(f)&&(i++,i>1)){delete n[o];continue}const d=ur(s);for(const h of JL)h.defined(f)&&h.parse&&h.parse(e,f,d)}return i>1&&qt(vNt),n}function r6e(e,t,n,r="datum"){const i=cn(t)?t:t.param,s=fo(i),o=Jt(s+gw);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Jt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function i6e(e,t,n){const r=fo(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&qt(bNt(s));else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,qt(xNt(a,i,n,s))):s=a[0].field}return`${o.name}[${Jt(sp(s))}]`}function tMt(e,t){for(const[n,r]of kb(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new rd(new fC(t,e,{param:n}),i,So.Lookup,e.component.data.outputNodeRefCounts)}}function gO(e,t,n){return Lk(t,r=>cn(r)?r:R8t(r)?r6e(e,r,n):pRe(r))}function nMt(e,t){if(e)return xt(e)&&!Rv(e)?e.map(n=>HZ(n,t)).join(", "):e}function oj(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function ek(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=h,m=ODt[p],g=c[p];if(m&&m!==t&&m!=="both")delete c[p];else if(TI(g)){const{condition:b,...y}=g,x=ln(b),w=Lde[p];if(w){const{vgProp:S,part:C}=w,R=[...x.map(I=>{const{test:O,...M}=I;return{test:gO(null,O),...M}}),y];oj(c,C,S,R),delete c[p]}else if(w===null){const S={signal:x.map(C=>{const{test:R,...I}=C;return`${gO(null,R)} ? ${xde(I)} : `}).join("")+xde(y)};c[p]=S}}else if(In(g)){const b=Lde[p];if(b){const{vgProp:y,part:x}=b;oj(c,x,y,g),delete c[p]}}Gr(["labelAlign","labelBaseline"],p)&&c[p]===null&&delete c[p]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},ms(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:ba(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&In(c.encode.labels.update.text)&&(p=uw(a,"datum.label",c.encode.labels.update.text.signal)),oj(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of qRe)e.hasAxisPart(p)||delete c.encode[p];ms(c.encode)&&delete c.encode}const h=nMt(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:ba(l,0)}}}}function s6e(e){const{axes:t}=e.component,n=[];for(const r of j1)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function rMt(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>ek(i,"grid",t)),...r.map(i=>ek(i,"grid",t)),...n.map(i=>ek(i,"main",t)),...r.map(i=>ek(i,"main",t))].filter(i=>i)}function lhe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...$t(o),...$t(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${g0(o[c])} : ${g0(a[c])}`};return l}return t[i]})])}function iMt(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:vRe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=In(n)?"axisOrient":`axis${pI(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:lhe(a,r,e,n),vgAxisConfig:lhe(u,r,e,n),axisConfigStyle:sMt([...u,...a],r)}}function sMt(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=ln(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function AH(e,t,n,r={}){var s;const i=W4e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const che={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??oMt(n,e),gridScale:({model:e,channel:t})=>aMt(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||a6e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||o6e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??lMt(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??cMt(t.type,n,Kt(t)&&!!t.timeUnit,Kt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??dMt({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:hMt,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=u6e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return Y4e(i?[Ode(i)]:[],Kt(o)?[Ode(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>pMt(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??mMt(n,t)};function oMt(e,t){return!zu(e)&&Kt(t)&&!Bs(t==null?void 0:t.bin)&&!hl(t==null?void 0:t.bin)}function aMt(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function uMt(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return In(s)?s:z4(s);{const{configValue:o}=AH("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?z4(o):n===po&&Gr([NZ,PZ],e.type)&&!(Kt(e)&&e.timeUnit)?270:void 0}}function kH(e){return`(((${e.signal} % 360) + 360) % 360)`}function o6e(e,t,n,r){if(e!==void 0)if(n==="x"){if(In(e)){const i=kH(e),s=In(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(In(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(In(e)){const i=kH(e),s=In(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(In(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function a6e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(In(e)){const o=kH(e),a=In(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(In(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function lMt(e,t){if(t==="x"&&Gr(["quantitative","temporal"],e))return!0}function cMt(e,t,n,r){if(n&&!un(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function fMt(e){return e==="x"?"bottom":"left"}function dMt({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!zu(t)&&t!=="log"){if(Kt(e)){if(Bs(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Gr(["month","hours","day","quarter"],(i=Bu(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function hMt({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Kt(t)){const{timeUnit:n}=t;if(n){const r=fRe(n);if(r)return{signal:r}}}}function u6e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return K4e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function pMt(e,t){const n=e.values;if(xt(n))return HRe(t,n);if(In(n))return n}function mMt(e,t){return e==="rect"&&lO(t)?1:0}class rT extends us{clone(){return new rT(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=n6e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(i2(r)&&ORe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${pRe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new rT(t,{calculate:u,as:iT(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${ii(this.transform)}`}}function iT(e,t,n){return tn(e,{prefix:t,suffix:"sort_index",...n})}function ZL(e,t){return Gr(["top","bottom"],t)?"column":Gr(["left","right"],t)||e==="row"?"row":"column"}function sT(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return ba((t||{})[e],i[e],n.header[e])}function e7(e,t,n,r){const i={};for(const s of e){const o=sT(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const cee=["row","column"],fee=["header","footer"];function gMt(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=e7(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=ZL(t,a),l=z4(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...c6e(l,u),...l6e(u,l,s),...f6e(r,i,t,nOt,lIe)}}}function l6e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=a6e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function c6e(e,t){const n=o6e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function yMt(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of fee)if(n[i])for(const s of n[i]){const o=bMt(e,t,i,n,s);o!=null&&r.push(o)}return r}function vMt(e,t){const{sort:n}=e;return i1(n)?{field:tn(n,{expr:"datum"}),order:n.order??"ascending"}:xt(n)?{field:iT(e,t,{expr:"datum"}),order:"ascending"}:{field:tn(e,{expr:"datum"}),order:n??"ascending"}}function RH(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=e7(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=jZ({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=ZL(t,a);return{text:{signal:u?uw(uw(u,"datum.label",l),"datum.value",tn(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...c6e(s,c),...l6e(c,s,o),...f6e(n,e,t,rOt,cIe)}}function bMt(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=e7(["labelOrient"],o.header,a,t);(t==="row"&&!Gr(["top","bottom"],f)||t==="column"&&!Gr(["left","right"],f))&&(s=RH(o,t,a))}const u=ih(e)&&!_I(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:vMt(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const xMt={column:{start:0,end:1},row:{start:1,end:0}};function _Mt(e,t){return xMt[t][e]}function wMt(e,t){const n={};for(const r of Xh){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=e7(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=ZL(r,o),u=_Mt(s,a);u!==void 0&&(n[a]=u)}}return ms(n)?void 0:n}function f6e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=sT(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function dee(e){return[...y5(e,"width"),...y5(e,"height"),...y5(e,"childWidth"),...y5(e,"childHeight")]}function y5(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(zu(o)&&t2(a)){const u=e.scaleName(n);return ih(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[fhe(u,a)]:[fhe(u,a),{name:i,update:d6e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=vH(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function fhe(e,t){const n=`${e}_step`;return In(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function d6e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=ba(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${g0(o)}, ${g0(s)}) * ${e}_step`}function h6e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function p6e(e,t){return $t(e).reduce((n,r)=>({...n,...cC({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>Qs(i.value),invalidValueRef:void 0})}),{})}function m6e(e,t){if(ih(t))return e==="theta"?"independent":"shared";if(pC(t))return"shared";if(bee(t))return xa(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function hee(e,t){const n=e.scale[t],r=xa(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&qt(QNt(t)),"independent"):e[r][t]||"shared"}const EMt={...oOt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},g6e=$t(EMt);class SMt extends z1{}const dhe={symbols:TMt,gradient:CMt,labels:AMt,entries:kMt};function TMt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...sNt({},n,tDt),...zIe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?y6e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===ud)delete f.fill;else if(zt(f.fill,"field"))h?delete f.fill:(f.fill=Qs(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=Qs(m??1));else if(xt(f.fill)){const g=IH(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=Qs(g))}}if(f.stroke){if(r==="stroke"||!c&&r===ud)delete f.stroke;else if(zt(f.stroke,"field")||p)delete f.stroke;else if(xt(f.stroke)){const g=ba(IH(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==B1){const g=Kt(t)&&b6e(n,i,t);g?f.opacity=[{test:g,...Qs(m??1)},Qs(u.legend.unselectedOpacity)]:m&&(f.opacity=Qs(m))}return f={...f,...e},ms(f)?void 0:f}function CMt(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?y6e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=Qs(l)),a={...a,...e},ms(a)?void 0:a}function AMt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Kt(t)?b6e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;pw(c)?f=y0({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=y0({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Kt(t)&&t.timeUnit===void 0&&(f=y0({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return ms(d)?void 0:d}function kMt(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function y6e(e){return v6e(e,(t,n)=>Math.max(t,n.value))}function IH(e){return v6e(e,(t,n)=>ba(t,n.value))}function v6e(e,t){if(wDt(e))return ln(e.condition).reduce(t,e.value);if(D0(e))return e.value}function b6e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Jt(n.field);return r.map(s=>`(!length(data(${Jt(fo(s)+gw)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const hhe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return PRe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return NRe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??MMt(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??LMt(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??IMt(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>eS(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(ZE(n)&&jm(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>RMt(t,e)};function RMt(e,t){const n=e.values;if(xt(n))return HRe(t,n);if(In(n))return n}function IMt(e,t,n,r){if(t!=="shape"){const i=IH(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function PMt(e){const{legend:t}=e;return ba(t.type,NMt(e))}function NMt({channel:e,timeUnit:t,scaleType:n}){if(ZE(e)){if(Gr(["quarter","month","day"],t))return"symbol";if(jm(n))return"gradient"}return"symbol"}function DMt({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??OMt(n,t)}function OMt(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function MMt({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(jm(i))return n==="horizontal"?r==="top"||r==="bottom"?phe(t,"width",o,s):o:phe(t,"height",u,a)}function phe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function LMt(e){if(Gr(["quantile","threshold","log","symlog"],e))return"greedy"}function x6e(e){const t=wo(e)?FMt(e):UMt(e);return e.component.legends=t,t}function FMt(e){const{encoding:t}=e,n={};for(const r of[ud,...dIe]){const i=du(t[r]);!i||!e.getScaleComponent(r)||r===ld&&Kt(i)&&i.type===lC||(n[r]=jMt(e,r))}return n}function $Mt(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function BMt(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function jMt(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new SMt({},$Mt(e,t));K9t(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=du(i[t]),f=Kt(c)?(w=Bu(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=PMt({legend:n,channel:t,timeUnit:f,scaleType:l}),p=DMt({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const S of g6e){if(h==="gradient"&&S.startsWith("symbol")||h==="symbol"&&S.startsWith("gradient"))continue;const C=S in hhe?hhe[S](m):n[S];if(C!==void 0){const R=BMt(C,S,n,e.fieldDef(t));(R||s.legend[S]===void 0)&&a.set(S,C,R)}}const g=(n==null?void 0:n.encoding)??{},b=a.get("selections"),y={},x={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const S of["labels","legend","title","symbols","gradient","entries"]){const C=p6e(g[S]??{},e),R=S in dhe?dhe[S](C,x):C;R!==void 0&&!ms(R)&&(y[S]={...b!=null&&b.length&&Kt(c)?{name:`${fo(c.field)}_legend_${S}`}:{},...b!=null&&b.length?{interactive:!!b}:{},update:R})}return ms(y)||a.set("encode",y,!!(n!=null&&n.encoding)),a}function UMt(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){x6e(r);for(const i of $t(r.component.legends))n.legend[i]=hee(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=_6e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of $t(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function _6e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of g6e){const c=Pb(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return zMt(f,d);case"title":return X4e(f,d);case"type":return i=!0,Ud("symbol")}return YL(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&iO(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&iO(e.explicit,["encode","gradient"])),e}function zMt(e,t){return t.value==="circle"?t:e}function VMt(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function w6e(e){const t=e.component.legends,n={};for(const i of $t(t)){const s=e.getScaleComponent(i),o=gs(s.get("domains"));if(n[o])for(const a of n[o])_6e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Tl(n).flat().map(i=>HMt(i,e.config)).filter(i=>i!==void 0)}function HMt(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of dIe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&In(s.encode.labels.update.text)&&(l=uw(r,"datum.label",s.encode.labels.update.text.signal)),VMt(s,"labels","text",{signal:l})}return s}}function qMt(e){return pC(e)||bee(e)?WMt(e):E6e(e)}function WMt(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),E6e(e))}function E6e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=In(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Gr(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const GMt=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class S6e extends z1{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function T6e(e){e.component.projection=wo(e)?YMt(e):QMt(e)}function YMt(e){if(e.hasProjection){const t=pl(e.specifiedProjection),n=!(t.scale!=null||t.translate!=null),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?KMt(e):void 0,s=new S6e(e.projectionName(!0),{...pl(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function KMt(e){const t=[],{encoding:n}=e;for(const r of[[G0,W0],[op,Y0]])(du(n[r[0]])||du(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ld)&&e.typedFieldDef(ld).type===lC&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(So.Main)),t}function XMt(e,t){const n=iZ(GMt,i=>!!(!gn(e.explicit,i)&&!gn(t.explicit,i)||gn(e.explicit,i)&&gn(t.explicit,i)&&Qd(e.get(i),t.get(i))));if(Qd(e.size,t.size)){if(n)return e;if(Qd(e.explicit,{}))return t;if(Qd(t.explicit,{}))return e}return null}function QMt(e){if(e.children.length===0)return;let t;for(const r of e.children)T6e(r);const n=iZ(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=XMt(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new S6e(r,t.specifiedProjection,t.size,ur(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function JMt(e,t,n,r){if(SI(t,n)){const i=wo(e)?e.axis(n)??e.legend(n)??{}:{},s=tn(t,{expr:"datum"}),o=tn(t,{expr:"datum",binSuffix:"end"});return{formulaAs:tn(t,{binSuffix:"range",forAs:!0}),formula:xI(s,o,i.format,i.formatType,r)}}return{}}function C6e(e,t){return`${z4e(e)}_${t}`}function ZMt(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function pee(e,t,n){const r=zL(n,void 0)??{},i=C6e(r,t);return e.getName(`${i}_bins`)}function eLt(e){return"as"in e}function mhe(e,t,n){let r,i;eLt(e)?r=cn(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[tn(e,{forAs:!0}),tn(e,{binSuffix:"end",forAs:!0})];const s={...zL(t,void 0)},o=C6e(s,e.field),{signal:a,extentSignal:u}=ZMt(n,o);if(PL(s.extent)){const c=s.extent;i=i6e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class Xm extends us{clone(){return new Xm(null,ur(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(ff(s)&&Bs(s.bin)){const{key:a,binComponent:u}=mhe(s,s.bin,n);i[a]={...u,...i[a],...JMt(n,s,o,n.config)}}return i},{});return ms(r)?null:new Xm(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=mhe(n,n.bin,r);return new Xm(t,{[i]:s})}merge(t,n){for(const r of $t(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Bm([...this.bins[r].as,...t.bins[r].as],ii)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Tl(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Tl(this.bins).map(t=>t.field))}hash(){return`Bin ${ii(this.bins)}`}assemble(){return Tl(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:sp(t.field),as:r,signal:t.signal,...PL(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:sp(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:tn({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function tLt(e,t,n,r){var s;const i=wo(r)?r.encoding[Mg(t)]:void 0;if(ff(n)&&wo(r)&&LRe(n,i,r.markDef,r.config)){e.add(tn(n,{})),e.add(tn(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=Ib({fieldDef:n,markDef:a,config:u});V4(o)&&l!==.5&&xa(t)&&(e.add(tn(n,{suffix:KL})),e.add(tn(n,{suffix:XL}))),n.bin&&SI(n,t)&&e.add(tn(n,{binSuffix:"range"}))}else if(D4e(t)){const o=N4e(t);e.add(r.getName(o))}else e.add(tn(n));return i2(n)&&z8t((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function nLt(e,t){for(const n of $t(t)){const r=t[n];for(const i of $t(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class E0 extends us{clone(){return new E0(null,new Set(this.dimensions),ur(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([tn(o,{forAs:!0})]);else{if(E1(u)||fx(u)){const c=E1(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([tn({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([tn(o,{forAs:!0})]);Lg(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([tn({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([tn({field:l,aggregate:"max"},{forAs:!0})]))}else tLt(s,a,o,n)}),s.size+$t(i).length===0)?null:new E0(t,s,i)}static makeFromTransform(t,n){var r;const i=new Set,s={};for(const o of n.aggregate){const{op:a,field:u,as:l}=o;a&&(a==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([l||tn(o,{forAs:!0})])):(s[u]??(s[u]={}),(r=s[u])[a]??(r[a]=new Set),s[u][a].add(l||tn(o,{forAs:!0}))))}for(const o of n.groupby??[])i.add(o);return i.size+$t(s).length===0?null:new E0(t,i,s)}merge(t){return S4e(this.dimensions,t.dimensions)?(nLt(this.measures,t.measures),!0):(h8t("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...$t(this.measures)])}producedFields(){const t=new Set;for(const n of $t(this.measures))for(const r of $t(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${ii({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of $t(this.measures))for(const o of $t(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:sp(s));return{type:"aggregate",groupby:[...this.dimensions].map(sp),ops:t,fields:n,as:r}}}class dC extends us{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Xh){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[tn(o),...Bs(a)?[tn(o,{binSuffix:"end"})]:[]],...i1(u)?{sortField:u}:xt(u)?{sortIndexField:iT(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Xh)this[n]&&(t+=` ${n.charAt(0)}:${ii(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Xh)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Xh)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of j1){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(zu(i)&&t2(s)){const o=t7(this.childModel,n),a=vee(o);a?t[n]=a:qt(vZ(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=BL,field:f}=u;s.push(f),o.push(c),a.push(tn(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of cee){for(const c of fee){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[r1,n1])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function ghe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function rLt(e,t){const n=aZ(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=ghe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=ghe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return qt(wNt(t)),null}function iLt(e){const t={};return GN(e.filter,n=>{if(hRe(n)){let r=null;SZ(n)?r=qd(n.equal):CZ(n)?r=qd(n.lte):TZ(n)?r=qd(n.lt):AZ(n)?r=qd(n.gt):kZ(n)?r=qd(n.gte):RZ(n)?r=n.range[0]:IZ(n)&&(r=(n.oneOf??n.in)[0]),r&&(n2(r)?t[n.field]="date":Ri(r)?t[n.field]="number":cn(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function sLt(e){const t={};function n(r){eT(r)?t[r.field]="date":r.type==="quantitative"&&XPt(r.aggregate)?t[r.field]="number":YS(r.field)>1?r.field in t||(t[r.field]="flatten"):i2(r)&&i1(r.sort)&&YS(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((wo(e)||ih(e))&&e.forEachFieldDef((r,i)=>{if(ff(r))n(r);else{const s=Zw(i),o=e.fieldDef(s);n({...r,type:o.type})}}),wo(e)){const{mark:r,markDef:i,encoding:s}=e;if(dx(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Kt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function oLt(e){const t={};if(wo(e)&&e.component.selection)for(const n of $t(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&YS(i.field)>1&&(t[i.field]="flatten")}return t}class oc extends us{clone(){return new oc(null,ur(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${ii(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!sb(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of $t(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:qt(Cde(a,r[a],u.value)))}for(const a of $t(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:qt(Cde(a,n[a],u)))}const s=new z1(n,r);i.copyAll(s);const o={};for(const a of $t(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return $t(o).length===0||i.parseNothing?null:new oc(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of $t(this._parse)){const r=this._parse[n];YS(n)===1&&(t[n]=r)}return t}producedFields(){return new Set($t(this._parse))}dependentFields(){return new Set($t(this._parse))}assembleTransforms(t=!1){return $t(this._parse).filter(n=>t?YS(n)>1:!0).map(n=>{const r=rLt(n,this._parse[n]);return r?{type:"formula",expr:r,as:aC(n)}:null}).filter(n=>n!==null)}}class Nb extends us{clone(){return new Nb(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([M0])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:M0}}}class AI extends us{clone(){return new AI(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${ii(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class kI extends us{clone(){return new kI(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${ii(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class yw extends us{constructor(t){super(null),t??(t={name:"source"});let n;if(sb(t)||(n=t.format?{...nd(t.format,["parse"])}:{}),H4(t))this._data={values:t.values};else if(tT(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Gr(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else IIe(t)?this._data={values:[{type:"Sphere"}]}:(kIe(t)||sb(t))&&(this._data={});this._generator=sb(t),t.name&&(this._name=t.name),n&&!ms(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var yhe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},aLt=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},tk;function mee(e){return e instanceof yw||e instanceof AI||e instanceof kI}class gee{constructor(){tk.set(this,void 0),yhe(this,tk,!1,"f")}setModified(){yhe(this,tk,!0,"f")}get modifiedFlag(){return aLt(this,tk,"f")}}tk=new WeakMap;class s2 extends gee{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class yee extends gee{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class uLt extends yee{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of $t(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class lLt extends yee{constructor(t){super(),this.requiresSelectionId=t&&lee(t)}run(t){t instanceof Nb&&(this.requiresSelectionId&&(mee(t.parent)||t.parent instanceof E0||t.parent instanceof oc)||(this.setModified(),t.remove()))}}class cLt extends gee{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Ym&&(r=t.producedFields(),sZ(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class fLt extends yee{constructor(){super()}run(t){t instanceof rd&&!t.isRequired()&&(this.setModified(),t.remove())}}class dLt extends s2{run(t){if(!mee(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof oc)if(t instanceof oc)this.setModified(),t.merge(n);else{if(oZ(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class hLt extends s2{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof oc);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of $t(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!ms(i)){this.setModified();const o=new oc(t,i);for(const a of n){if(a instanceof oc)for(const u of $t(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof oc&&$t(a.parse).length===0&&a.remove()}}}}}class pLt extends s2{run(t){t instanceof rd||t.numChildren()>0||t instanceof dC||t instanceof yw||(this.setModified(),t.remove())}}class mLt extends s2{run(t){const n=t.children.filter(i=>i instanceof Ym),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class gLt extends s2{run(t){const n=t.children.filter(i=>i instanceof E0),r={};for(const i of n){const s=ii(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of $t(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class yLt extends s2{constructor(t){super(),this.model=t}run(t){const n=!(mee(t)||t instanceof fC||t instanceof oc||t instanceof Nb),r=[],i=[];for(const s of t.children)s instanceof Xm&&(n&&!oZ(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Xm?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class vLt extends s2{run(t){const n=[...t.children];if(!GS(n,o=>o instanceof rd)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof rd){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof rd)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class o2 extends us{clone(){return new o2(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Bm(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??tn(t)}hash(){return`JoinAggregateTransform ${ii(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class oT extends us{clone(){return new oT(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const u=n.reduceFieldDef((l,c,f)=>{const d=Lg(f)&&n.getScaleComponent(f);if(d){const h=d.get("type"),{aggregate:p}=c,m=FZ({scaleChannel:f,markDef:s,config:i,scaleType:h,isCountAggregate:IL(p)});m!=="show"&&m!=="always-valid"&&(l[c.field]=c)}return l},{});return $t(u).length?new oT(t,u):null}dependentFields(){return new Set($t(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${ii(this.filter)}`}assemble(){const t=$t(this.filter).reduce((n,r)=>{const i=this.filter[r],s=tn(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${PH(s)}))`):i.type==="quantitative"&&n.push(PH(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function PH(e){return`isValid(${e}) && isFinite(+${e})`}function bLt(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=tn(r);return i&&t.push(i),t},[])}function xLt(e){return xt(e)&&e.every(t=>cn(t))&&e.length>1}class o1 extends us{clone(){return new o1(null,ur(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(ba(f.order,"ascending"));const l={field:a,order:u};let c;return xLt(s)?c=s:cn(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new o1(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return O0(p)}).filter(h=>!!h),c=bLt(n),f=n.encoding.order;let d;if(xt(f)||Kt(f))d=G4e(f);else{const h=FRe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new o1(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${ii(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[tn(i,{binSuffix:"mid"})]:[tn(i,{}),tn(i,{binSuffix:"end"})]:[tn(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=tn(c,{expr:"datum"}),p=tn(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${PH(h)} ? ${f}*${h}+${1-f}*${p} : ${h}`,as:tn(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:tn(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class hC extends us{clone(){return new hC(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Bm(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??tn(t)}hash(){return`WindowTransform ${ii(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>gZ(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function _Lt(e){function t(n){if(!(n instanceof dC)){const r=n.clone();if(r instanceof rd){const i=DH+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof E0||r instanceof o1||r instanceof hC||r instanceof o2)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function NH(e){if(e instanceof dC)if(e.numChildren()===1&&!(e.children[0]instanceof rd)){const t=e.children[0];(t instanceof E0||t instanceof o1||t instanceof hC||t instanceof o2)&&t.addDimensions(e.fields),t.swapWithParent(),NH(e)}else{const t=e.model.component.data.main;A6e(t);const n=_Lt(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(NH)}function A6e(e){if(e instanceof rd&&e.type===So.Main&&e.numChildren()===1){const t=e.children[0];t instanceof dC||(t.swapWithParent(),A6e(e))}}const DH="scale_",v5=5;function OH(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!OH(t.children))return!1}return!0}function Xp(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function vhe(e,t,n){let r=e.sources,i=!1;return i=Xp(new fLt,r)||i,i=Xp(new lLt(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Xp(new pLt,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Xp(new dLt,r)||i,i=Xp(new yLt(t),r)||i,i=Xp(new cLt,r)||i,i=Xp(new hLt,r)||i,i=Xp(new gLt,r)||i,i=Xp(new mLt,r)||i,i=Xp(new uLt,r)||i,i=Xp(new vLt,r)||i),e.sources=r,i}function wLt(e,t){OH(e.sources);let n=0,r=0;for(let i=0;i<v5&&vhe(e,t,!0);i++)n++;e.sources.map(NH);for(let i=0;i<v5&&vhe(e,t,!1);i++)r++;OH(e.sources),Math.max(n,r)===v5&&qt(`Maximum optimization runs(${v5}) reached.`)}class Pu{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Pu(()=>t(n))}}function k6e(e){wo(e)?ELt(e):SLt(e)}function ELt(e){const t=e.component.scales;for(const n of $t(t)){const r=CLt(e,n);if(t[n].setWithExplicit("domains",r),kLt(e,n),e.component.data.isFaceted){let s=e;for(;!ih(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Wy(a)&&(a.data=DH+a.data.replace(DH,""))}}}function SLt(e){for(const n of e.children)k6e(n);const t=e.component.scales;for(const n of $t(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=Pb(r,o.getWithExplicit("domains"),"domains","scale",MH);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&qt(mNt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function TLt(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=bhe(t,n);if(!i){qt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=bhe(t,n);if(i)return"unaggregated"}return e}function CLt(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=TLt(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&du(r.x2)?du(r.x)?Pb(Ev(n,i,e,"x"),Ev(n,i,e,"x2"),"domain","scale",MH):Ev(n,i,e,"x2"):t==="y"&&du(r.y2)?du(r.y)?Pb(Ev(n,i,e,"y"),Ev(n,i,e,"y2"),"domain","scale",MH):Ev(n,i,e,"y2"):Ev(n,i,e,t)}function ALt(e,t,n){return e.map(r=>({signal:`{data: ${VL(r,{timeUnit:n,type:t})}}`}))}function aj(e,t,n){var i;const r=(i=Bu(n))==null?void 0:i.unit;return t==="temporal"||r?ALt(e,t,r):[e]}function Ev(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=du(i[r]),{type:c}=l,f=l.timeUnit,d=b9t({invalid:mg("invalid",s,a),isPath:dx(o)});if(U8t(t)){const m=Ev(e,void 0,n,r),g=aj(t.unionWith,c,f);return Cm([...g,...m.value])}else{if(In(t))return Cm([t]);if(t&&t!=="unaggregated"&&!xRe(t))return Cm(aj(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Ud([[0,1]]);const m=n.requestDataName(d);return Ud([{data:m,field:n.vgField(r,{suffix:"start"})},{data:m,field:n.vgField(r,{suffix:"end"})}])}const h=Lg(r)&&Kt(l)?RLt(n,r,e):void 0;if(Fg(l)){const m=aj([l.datum],c,f);return Ud(m)}const p=l;if(t==="unaggregated"){const{field:m}=l;return Ud([{data:n.requestDataName(d),field:tn({field:m,aggregate:"min"})},{data:n.requestDataName(d),field:tn({field:m,aggregate:"max"})}])}else if(Bs(p.bin)){if(zu(e))return Ud(e==="bin-ordinal"?[]:[{data:U4(h)?n.requestDataName(d):n.requestDataName(So.Raw),field:n.vgField(r,SI(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!un(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:m}=p;if(Bs(m)){const g=pee(n,p.field,m);return Ud([new Pu(()=>{const b=n.getSignalName(g);return`[${b}.start, ${b}.stop]`})])}else return Ud([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Gr(["time","utc"],e)){const m=i[Mg(r)];if(LRe(p,m,s,a)){const g=n.requestDataName(d),b=Ib({fieldDef:p,fieldDef2:m,markDef:s,config:a}),y=V4(o)&&b!==.5&&xa(r);return Ud([{data:g,field:n.vgField(r,y?{suffix:KL}:{})},{data:g,field:n.vgField(r,{suffix:y?XL:"end"})}])}}return Ud(h?[{data:U4(h)?n.requestDataName(d):n.requestDataName(So.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function uj(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":BL),...r?{field:sp(r)}:{},...i?{order:i}:{}}}function kLt(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=xRe(r)?r:void 0,o=e2(i)&&PL(i.extent)?i.extent:void 0;(s||o)&&n.set("selectionExtent",s??o,!0)}function RLt(e,t,n){if(!zu(n))return;const r=e.fieldDef(t),i=r.sort;if(ORe(i))return{op:"min",field:iT(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(i1(i)){const a=s&&!o.has(i.field);return uj(i,a)}else if(bDt(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(E1(c)||fx(c))return uj({field:tn(l),order:u},d);if(gZ(c)||!c)return uj({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Gr(["ascending",void 0],i))return!0}}function bhe(e,t){const{aggregate:n,type:r}=e;return n?cn(n)&&!JPt.has(n)?{valid:!1,reason:HNt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:qNt(e)}:{valid:!0}:{valid:!1,reason:VNt(e)}}function MH(e,t,n,r){return e.explicit&&t.explicit&&qt(XNt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function ILt(e){const t=Bm(e.map(o=>{if(Wy(o)){const{sort:a,...u}=o;return u}return o}),ii),n=Bm(e.map(o=>{if(Wy(o)){const a=o.sort;return a!==void 0&&!U4(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),ii);if(t.length===0)return;if(t.length===1){const o=e[0];if(Wy(o)&&n.length>0){let a=n[0];if(n.length>1){qt(kde);const u=n.filter(l=>un(l)&&"op"in l&&l.op!=="min");n.every(l=>un(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(un(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Bm(n.map(o=>U4(o)||!("op"in o)||cn(o.op)&&gn(YPt,o.op)?o:(qt(JNt(o)),!0)),ii);let i;r.length===1?i=r[0]:r.length>1&&(qt(kde),i=!0);const s=Bm(e.map(o=>Wy(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function vee(e){if(Wy(e)&&cn(e.field))return e.field;if(ZPt(e)){let t;for(const n of e.fields)if(Wy(n)&&cn(n.field)){if(!t)t=n.field;else if(t!==n.field)return qt(ZNt),t}return qt(e8t),t}else if(eNt(e)){qt(t8t);const t=e.fields[0];return cn(t)?t:void 0}}function t7(e,t){const r=e.component.scales[t].get("domains").map(i=>(Wy(i)&&(i.data=e.lookupDataSource(i.data)),i));return ILt(r)}function R6e(e){return pC(e)||bee(e)?e.children.reduce((t,n)=>t.concat(R6e(n)),xhe(e)):xhe(e)}function xhe(e){return $t(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=PLt(i.range,s,n,e),h=t7(e,n),p=a?I9t(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function PLt(e,t,n,r){if(xa(n)){if(t2(e))return{step:{signal:`${t}_step`}}}else if(un(e)&&Wy(e))return{...e,data:r.lookupDataSource(e.data)};return e}class I6e extends z1{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Gr([ml.LOG,ml.TIME,ml.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Gr([ml.LINEAR,ml.SQRT,ml.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(xt(a)){const u=a[0],l=a[a.length-1];if(Ri(u)&&Ri(l))if(u<=0&&l>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const NLt=["range","scheme"];function DLt(e){const t=e.component.scales;for(const n of mZ){const r=t[n];if(!r)continue;const i=OLt(n,e);r.setWithExplicit("range",i)}}function _he(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=cd(t),o=e.getName(s);if(un(r)&&r.binned&&r.step!==void 0)return new Pu(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(Bs(r)){const a=pee(e,i,r);return new Pu(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function OLt(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of NLt)if(n[f]!==void 0){const d=mH(s,f),h=_Re(e,f);if(!d)qt(eRe(s,f,e));else if(h)qt(h);else switch(f){case"range":{const p=n.range;if(xt(p)){if(xa(e))return Cm(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),b=t.getSignalName.bind(t);return Pu.fromName(b,g)}return m}))}else if(un(p))return Cm({data:t.requestDataName(So.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Cm(p)}case"scheme":return Cm(MLt(n[f]))}}const o=e===po||e==="xOffset"?"width":"height",a=r[o];if(yg(a)){if(xa(e))if(zu(s)){const f=N6e(a,t,e);if(f)return Cm({step:f})}else qt(tRe(o));else if(yI(e)){const f=e===sx?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=D6e(a,s);if(p)return Cm(p)}}}const{rangeMin:u,rangeMax:l}=n,c=LLt(e,t);return(u!==void 0||l!==void 0)&&mH(s,"rangeMin")&&xt(c)&&c.length===2?Cm([u??c[0],l??c[1]]):Ud(c)}function MLt(e){return j8t(e)?{scheme:e.name,...nd(e,["name"])}:{scheme:e}}function P6e(e,t,n,{center:r}={}){const i=cd(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Wu&&N0(n)?r?[Pu.fromName(a=>`${o(a)}/2`,s),Pu.fromName(a=>`-${o(a)}/2`,s)]:[Pu.fromName(o,s),0]:r?[Pu.fromName(a=>`-${o(a)}/2`,s),Pu.fromName(a=>`${o(a)}/2`,s)]:[0,Pu.fromName(o,s)]}function LLt(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=du(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case po:case Wu:{if(Gr(["point","band"],u)){const f=O6e(e,n,r.view);if(yg(f))return{step:N6e(f,t,e)}}return P6e(e,t,u)}case sx:case uC:return FLt(e,t,u);case $1:{const f=jLt(i,r),d=ULt(i,n,t,r);return QS(u)?BLt(f,d,$Lt(u,r,l,e)):[f,d]}case gp:return[0,Math.PI*2];case Jw:return[0,360];case q0:return[0,new Pu(()=>{const f=t.getSignalName(ih(t.parent)?"child_width":"width"),d=t.getSignalName(ih(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case ox:return{step:1e3/r.scale.framesPerSecond};case lx:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case cx:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ld:return"symbol";case ud:case Dg:case Og:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case B1:case ax:case ux:return[r.scale.minOpacity,r.scale.maxOpacity]}}function N6e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=fZ(n),o=r[s];if(pIe({step:e,offsetIsDiscrete:gr(o)&&mRe(o.type)})==="offset"&&YRe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${iNt(f)})`}}else return e.step}function D6e(e,t){if(pIe({step:e,offsetIsDiscrete:zu(t)})==="offset")return{step:e.step}}function FLt(e,t,n){const r=e===sx?"x":"y",i=t.getScaleComponent(r);if(!i)return P6e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=O6e(r,t.size,t.config.view);if(yg(l)){const c=D6e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Kt(l)&&l.timeUnit){const c=fRe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=Ib({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=In(f)?`${f.signal}/2`+h:`${f/2+d}`,m=In(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return w4e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function O6e(e,t,n){const r=e===po?"width":"height",i=t[r];return i||hO(n,r)}function $Lt(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&xt(n)?n.length+1:(qt(c8t(r)),3)}}function BLt(e,t,n){const r=()=>{const i=g0(t),s=g0(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return In(t)?new Pu(r):{signal:r()}}function jLt(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(NL("size",e))}const whe=.95;function ULt(e,t,n,r){const i={x:_he(n,"x"),y:_he(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Ehe(t,i,r.view);return Ri(s)?s-1:new Pu(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Ehe(t,i,r.view);return Ri(s)?Math.pow(whe*s,2):new Pu(()=>`pow(${whe} * ${s.signal}, 2)`)}}throw new Error(NL("size",e))}function Ehe(e,t,n){const r=yg(e.width)?e.width.step:bH(n,"width"),i=yg(e.height)?e.height.step:bH(n,"height");return t.x||t.y?new Pu(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function M6e(e,t){wo(e)?zLt(e,t):F6e(e,t)}function zLt(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of $t(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=du(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=mH(h,t),b=_Re(a,t);if(d!==void 0&&(g?b&&qt(b):qt(eRe(h,t,a))),g&&b===void 0)if(d!==void 0){const y=f.timeUnit,x=f.type;switch(t){case"domainMax":case"domainMin":n2(u[t])||x==="temporal"||y?l.set(t,{signal:VL(u[t],{type:x,timeUnit:y})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const y=zt(She,t)?She[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:KRe(i,a),hasSecondaryRangeChannel:!!i[Mg(a)]}):r.scale[t];y!==void 0&&l.set(t,y,!1)}}}const She={bins:({model:e,fieldOrDatumDef:t})=>Kt(t)?VLt(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>HLt(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>qLt(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>WLt(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>GLt(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>YLt(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Kt(e)?e.sort:void 0;return KLt(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>XLt(e,t,n,r,i,s.scale,o)};function L6e(e){wo(e)?DLt(e):F6e(e,"range")}function F6e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?L6e(r):M6e(r,t);for(const r of $t(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=Pb(i,a,t,"scale",AIe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function VLt(e,t){const n=t.bin;if(Bs(n)){const r=pee(e,t.field,n);return new Pu(()=>e.getSignalName(r))}else if(hl(n)&&e2(n)&&n.step!==void 0)return{step:n.step}}function HLt(e,t){if(Gr([ud,Dg,Og],e)&&t!=="nominal")return"hcl"}function qLt(e,t,n,r,i,s){var o;if(!((o=O0(s))!=null&&o.bin||xt(n)||i!=null||r!=null||Gr([ml.TIME,ml.UTC],e)))return xa(t)?!0:void 0}function WLt(e,t,n,r,i,s){if(xa(e)){if(jm(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Kt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===ml.POINT)return n.pointPadding}}function GLt(e,t,n,r,i,s=!1){if(e===void 0){if(xa(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,tickBandPaddingInner:l,bandWithNestedOffsetPaddingInner:c}=i;return s?c:ba(o,n==="bar"?a:n==="tick"?l:u)}else if(yI(t)&&r===ml.BAND)return i.offsetBandPaddingInner}}function YLt(e,t,n,r,i,s=!1){if(e===void 0){if(xa(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===ml.BAND)return ba(o,In(r)?{signal:`${r.signal}/2`}:r/2)}else if(yI(t)){if(n===ml.POINT)return .5;if(n===ml.BAND)return i.offsetBandPaddingOuter}}}function KLt(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return N0(e)&&t==="descending"?In(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(N0(e)&&t==="descending")return!0}function XLt(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&N0(i)){if(xt(n)){const u=n[0],l=n[n.length-1];if(Ri(u)&&u<=0&&Ri(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!QS(i))return!0;if(!(Kt(t)&&t.bin)&&Gr([...j1,...BPt],e)){const{orient:u,type:l}=r;return Gr(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Gr(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function QLt(e,t,n,r,i=!1){const s=JLt(t,n,r,i),{type:o}=e;return Lg(t)?o!==void 0?G8t(t,o)?Kt(n)&&!W8t(o,n.type)?(qt(YNt(o,s)),s):o:(qt(GNt(t,o,s)),s):s:null}function JLt(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(ZE(e)||XB(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&qt(QB(e,"ordinal")),"ordinal";if(KB(e))return"band";if(xa(e)||yI(e)){if(Gr(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in pZ)return"band";const s=n[cd(e)];return hw(s)||ZS(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return ZE(e)?"time":XB(e)==="discrete"?(qt(QB(e,"temporal")),"ordinal"):Kt(t)&&t.timeUnit&&Bu(t.timeUnit).utc?"utc":KB(e)?"band":"time";case"quantitative":return ZE(e)?Kt(t)&&Bs(t.bin)?"bin-ordinal":"linear":XB(e)==="discrete"?(qt(QB(e,"quantitative")),"ordinal"):KB(e)?"band":"linear";case"geojson":return}throw new Error(J4e(t.type))}function ZLt(e,{ignoreRange:t}={}){$6e(e),k6e(e);for(const n of q8t)M6e(e,n);t||L6e(e)}function $6e(e){wo(e)?e.component.scales=e7t(e):e.component.scales=n7t(e)}function e7t(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of mZ){const o=du(t[s]);if(o&&n===SRe&&s===ld&&o.type===lC)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=KRe(t,s),l=QLt(a,s,o,r,u);i[s]=new I6e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const t7t=AIe((e,t)=>Ide(e)-Ide(t));function n7t(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){$6e(s);for(const o of $t(s.component.scales))if((t=i.scale)[o]??(t[o]=m6e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?M8t(a.value,u.value)?r[o]=Pb(a,u,"type","scale",t7t):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of $t(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new I6e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class lj{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function wo(e){return(e==null?void 0:e.type)==="unit"}function ih(e){return(e==null?void 0:e.type)==="facet"}function bee(e){return(e==null?void 0:e.type)==="concat"}function pC(e){return(e==null?void 0:e.type)==="layer"}class xee{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.parent=r,this.config=s,this.view=pl(a),this.name=t.name??i,this.title=Rv(t.title)?{text:t.title}:t.title?pl(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new lj,this.projectionNameMap=r?r.projectionNameMap:new lj,this.signalNameMap=r?r.signalNameMap:new lj,this.data=t.data,this.description=t.description,this.transforms=a9t(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:fOt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:jL(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new z1,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?ur(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){ZLt(this)}parseProjection(){T6e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){x6e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of $t(r)){const o=r[s];o!==void 0&&(i[s]=Qs(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Qs(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:ms(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=wMt(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Xh)t[r].title&&n.push(gMt(this,r));for(const r of cee)n=n.concat(yMt(this,r));return n}assembleAxes(){return rMt(this.component.axes,this.config)}assembleLegends(){return w6e(this)}assembleProjections(){return qMt(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...V4e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Gr(["unit","layer"],this.type)?Gr(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),ms(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||ih(this.parent)?R6e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return fo((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(So[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(ih(this.parent)){const n=h6e(t),r=RL(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(zu(s)&&t2(o)){const a=i.get("name"),u=t7(this,r),l=vee(u);if(l){const c=tn({aggregate:"distinct",field:l},{expr:"datum"});return{signal:d6e(a,i,c)}}else return qt(vZ(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(M4e(t)&&Lg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(lNt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class B6e extends xee{vgField(t,n={}){const r=this.fieldDef(t);if(r)return tn(r,n)}reduceFieldDef(t,n){return jDt(this.getMapping(),(r,i,s)=>{const o=O0(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){WZ(this.getMapping(),(r,i)=>{const s=O0(r);s&&t(s,i)},n)}}class n7 extends us{clone(){return new n7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${ii(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class r7 extends us{clone(){return new r7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${ii(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class i7 extends us{clone(){return new i7(this.parent,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${ii(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class s7 extends us{clone(){return new s7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${ii(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class nS extends us{clone(){return new nS(null,ur(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[G0,W0],[op,Y0]]){const s=i.map(o=>{const a=du(n.encoding[o]);return Kt(a)?a.field:Fg(a)?{expr:`${a.datum}`}:D0(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new nS(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(ld)){const i=n.typedFieldDef(ld);i.type===lC&&(t=new nS(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(cn);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${ii(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class q4 extends us{clone(){return new q4(null,this.projection,ur(this.fields),ur(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[G0,W0],[op,Y0]]){const i=r.map(o=>{const a=du(n.encoding[o]);return Kt(a)?a.field:Fg(a)?{expr:`${a.datum}`}:D0(a)?{expr:`${a.value}`}:void 0}),s=r[0]===op?"2":"";(i[0]||i[1])&&(t=new q4(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(cn))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${ii(this.fields)} ${ii(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class z_ extends us{clone(){return new z_(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new z_(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Kt(i)&&Kt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=JRe(n.mark,r);return new z_(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${ii(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:zOt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class o7 extends us{clone(){return new o7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${ii(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class W4 extends us{clone(){return new W4(null,ur(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(VOt(o)){let u=z6e(o.data,s);u||(u=new yw(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new rd(u,l,So.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(HOt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(fo(u),u)}catch{throw new Error(hNt(u))}if(a=l.materialized,!a)throw new Error(pNt(u))}return new W4(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ln(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${ii({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:ln(this.transform.as)}:{}};else{let n=this.transform.as;cn(n)||(qt(TNt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class a7 extends us{clone(){return new a7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${ii(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class u7 extends us{clone(){return new u7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${ii(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class l7 extends us{clone(){return new l7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Bm((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${ii(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class c7 extends us{clone(){return new c7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${ii(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function j6e(e){let t=0;function n(r,i){if(r instanceof yw&&!r.isGenerator&&!tT(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof oc&&(r.parent instanceof yw&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof dC){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof AI||r instanceof kI||r instanceof oT||r instanceof fC||r instanceof rT||r instanceof q4||r instanceof E0||r instanceof W4||r instanceof hC||r instanceof o2||r instanceof s7||r instanceof i7||r instanceof n7||r instanceof o7||r instanceof a7||r instanceof u7||r instanceof Nb||r instanceof c7||r instanceof l7||r instanceof r7)&&i.transform.push(r.assemble()),(r instanceof Xm||r instanceof Ym||r instanceof z_||r instanceof o1||r instanceof nS)&&i.transform.push(...r.assemble()),r instanceof rd&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof rd?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof rd&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function r7t(e){const t=[],n=j6e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function i7t(e,t){const n=[],r=j6e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function s7t(e){return e==="top"||e==="left"||In(e)?"header":"footer"}function o7t(e){for(const t of Xh)a7t(e,t);The(e,"x"),The(e,"y")}function a7t(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=sT("title",null,r,t);let l=eS(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=xt(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=sT("labelOrient",a.header,r,t),f=a.header!==null?ba((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Gr(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[U6e(e,t,f)]}}}function U6e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function The(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=hee(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=s7t(a.get("orient"));o[u]??(o[u]=[U6e(e,s,!1)]);const l=ek(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function u7t(e){_ee(e),yO(e,"width"),yO(e,"height")}function l7t(e){_ee(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";yO(e,t),yO(e,n)}function _ee(e){for(const t of e.children)t.parseLayoutSize()}function yO(e,t){const n=h6e(t),r=RL(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??m6e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=Pb(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function c7t(e){const{size:t,component:n}=e;for(const r of j1){const i=cd(r);if(t[i]){const s=t[i];n.layoutSize.set(i,yg(s)?"step":s,!0)}else{const s=f7t(e,i);n.layoutSize.set(i,s,!1)}}}function f7t(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(zu(s)){const a=hO(r.view,t);return t2(o)||yg(a)?"step":a}else return vH(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return vH(r.view,t);{const s=hO(r.view,t);return yg(s)?s.step:s}}}function LH(e,t,n){return tn(t,{suffix:`by_${tn(e)}`,...n})}class $k extends B6e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Cee(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!_I(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=$t(t),r={};for(const i of n){if(![n1,r1].includes(i)){qt(NL(i,"facet"));break}const s=t[i];if(s.field===void 0){qt(hH(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=qZ(t,n);return r.header?r.header=pl(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return zt(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=f7(this),this.child.parseData()}parseLayoutSize(){_ee(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>Km(t))&&xZ(bZ)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),o7t(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Xh)for(const r of fee){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=sT("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=ZL(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof $k))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof $k?{...this.channelHasField("column")?{encode:{update:{columns:{field:tn(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof $k){if(this.child.channelHasField("column")){const i=tn(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of j1){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(zu(o)&&t2(a)){const u=t7(this.child,i),l=vee(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):qt(vZ(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Xh){const f=this.facet[c];if(f){u.push(tn(f));const{bin:d,sort:h}=f;if(Bs(d)&&u.push(tn(f,{binSuffix:"end"})),i1(h)){const{field:p,op:m=BL}=h,g=LH(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(xt(h)){const p=iT(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?i1(r.sort)?[LH(r,r.sort,{expr:"datum"})]:xt(r.sort)?[iT(r,t,{expr:"datum"})]:[tn(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(i1(i)?i.order:!xt(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return RH(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of cee)if(t[s]){const o=sT("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return RH(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=r7t(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Xh.map(u=>this.facetSortFields(u)).flat(),order:Xh.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(C9t(this,[]))}]}getMapping(){return this.facet}}function d7t(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(i1(s.sort)){const{field:o,op:a=BL}=s.sort;e=i=new o2(e,{joinaggregate:[{op:a,field:o,as:LH(s,s.sort,{forAs:!0})}],groupby:[tn(s)]})}return i}return null}function z6e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(H4(e)&&H4(a)){if(Qd(e.values,a.values))return o}else if(tT(e)&&tT(a)){if(e.url===a.url)return o}else if(kIe(e)&&e.name===o.dataName)return o}}return null}function h7t(e,t){if(e.data||!e.parent){if(e.data===null){const r=new yw({values:[]});return t.push(r),r}const n=z6e(e.data,t);if(n)return sb(e.data)||(n.data.format=E4e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new yw(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function p7t(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(e9t(i))o=e=new rT(e,i),s="derived";else if(ree(i)){const a=iLt(i);o=e=oc.makeWithAncestors(e,{},a,n)??e,e=new fC(e,t,i.filter)}else if(EIe(i))o=e=Xm.makeFromTransform(e,i,t),s="number";else if(n9t(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new oc(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Ym.makeFromTransform(e,i);else if(r9t(i))o=e=E0.makeFromTransform(e,i),s="number",lee(t)&&(e=new Nb(e));else if(wIe(i))o=e=W4.make(e,t,i,r++),s="derived";else if(QOt(i))o=e=new hC(e,i),s="number";else if(JOt(i))o=e=new o2(e,i),s="number";else if(i9t(i))o=e=o1.makeFromTransform(e,i),s="derived";else if(s9t(i))o=e=new s7(e,i),s="derived";else if(o9t(i))o=e=new r7(e,i),s="derived";else if(ZOt(i))o=e=new i7(e,i),s="derived";else if(qOt(i))o=e=new l7(e,i),s="derived";else if(XOt(i))e=new c7(e,i);else if(t9t(i))o=e=z_.makeFromTransform(e,i),s="derived";else if(WOt(i))o=e=new n7(e,i),s="derived";else if(GOt(i))o=e=new a7(e,i),s="derived";else if(YOt(i))o=e=new u7(e,i),s="derived";else if(KOt(i))o=e=new o7(e,i),s="derived";else{qt(SNt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function f7(e){var g;let t=h7t(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(sb(i)||tT(i)||H4(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new v9t;sb(i)?(RIe(i)?t=new kI(t,i.sequence):iee(i)&&(t=new AI(t,i.graticule)),o.parseNothing=!0):((g=i==null?void 0:i.format)==null?void 0:g.parse)===null&&(o.parseNothing=!0),t=oc.makeExplicit(t,e,o)??t,t=new Nb(t);const a=e.parent&&pC(e.parent);(wo(e)||ih(e))&&a&&(t=Xm.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=p7t(t,e,o));const u=oLt(e),l=sLt(e);t=oc.makeWithAncestors(t,{},{...u,...l},o)??t,wo(e)&&(t=nS.parseAll(t,e),t=q4.parseAll(t,e)),(wo(e)||ih(e))&&(a||(t=Xm.makeFromEncoding(t,e)??t),t=Ym.makeFromEncoding(t,e)??t,t=rT.parseAllForSortIndex(t,e));const c=t=b5(So.Raw,e,t);if(wo(e)){const b=E0.makeFromEncoding(t,e);b&&(t=b,lee(e)&&(t=new Nb(t))),t=z_.makeFromEncoding(t,e)??t,t=o1.makeFromEncoding(t,e)??t}let f,d;if(wo(e)){const{markDef:b,mark:y,config:x}=e,w=ps("invalid",b,x),{marks:S,scales:C}=d=PIe({invalid:w,isPath:dx(y)});S!==C&&C==="include-invalid-values"&&(f=t=b5(So.PreFilterInvalid,e,t)),S==="exclude-invalid-values"&&(t=oT.make(t,e,d)??t)}const h=t=b5(So.Main,e,t);let p;if(wo(e)&&d){const{marks:b,scales:y}=d;b==="include-invalid-values"&&y==="exclude-invalid-values"&&(t=oT.make(t,e,d)??t,p=t=b5(So.PostFilterInvalid,e,t))}wo(e)&&tMt(e,h);let m=null;if(ih(e)){const b=e.getName("facet");t=d7t(t,e.facet)??t,m=new dC(t,e,b,h.getSource()),n[b]=m}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:m,ancestorParse:o,preFilterInvalid:f,postFilterInvalid:p}}function b5(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new rd(n,s,e,i);return r[s]=o,o}class m7t extends xee{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&qt(_Nt),this.children=this.getChildren(t).map((l,c)=>Cee(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=f7(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of $t(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Km(t))&&xZ(bZ)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return WL(t)?t.vconcat:tee(t)?t.hconcat:t.concat}parseLayoutSize(){l7t(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=dee(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function g7t(e){return e===!1||e===null}const y7t={disable:1,gridScale:1,scale:1,...WRe,labelExpr:1,encode:1},V6e=$t(y7t);class wee extends z1{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new wee(ur(this.explicit),ur(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!g7t(this.get(t))}hasOrientSignalRef(){return In(this.explicit.orient)}}function v7t(e,t,n){const{encoding:r,config:i}=e,s=du(r[t])??du(r[Mg(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(pw(u))return{text:y0({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(JS(s)==="quantitative"){if(ZS(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:y0({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:y0({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(JS(s)==="temporal"&&i.timeFormatType&&Kt(s)&&!s.timeUnit)return{text:y0({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function b7t(e){return j1.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[C7t(n,e)]),t),{})}const x7t={bottom:"top",top:"bottom",left:"right",right:"left"};function _7t(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of $t(i.component.axes))n.axis[s]=hee(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=w7t(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of j1){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!In(a)){if(r[a]>0&&!u){const l=x7t[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function w7t(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=E7t(i,s)}}}else return t.map(n=>n.clone());return e}function E7t(e,t){for(const n of V6e){const r=Pb(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return X4e(i,s);case"gridScale":return{explicit:i.explicit,value:ba(i.value,s.value)}}return YL(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function S7t(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(In(n.labelAngle)?n.labelAngle:z4(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===u6e(r,i))return!0}return e===n[t]}const T7t=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function C7t(e,t){var b,y;let n=t.axis(e);const r=new wee,i=du(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((b=o[e==="x"?"axisX":"axisY"])==null?void 0:b.orient)||((y=o.axis)==null?void 0:y.orient)||fMt(e),u=t.getScaleComponent(e).get("type"),l=iMt(e,u,a,t.config),c=n!==void 0?!n:AH("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=uMt(i,n,e,o.style,l),d=NRe(n.formatType,i,u),h=PRe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const x of V6e){const w=x in che?che[x](p):Fde(x)?n[x]:void 0,S=w!==void 0,C=S7t(w,x,n,t,e);if(S&&C)r.set(x,w,C);else{const{configValue:R=void 0,configFrom:I=void 0}=Fde(x)&&x!=="values"?AH(x,o.style,n.style,l):{},O=R!==void 0;S&&!O?r.set(x,w,C):(I!=="vgAxisConfig"||T7t.has(x)&&O||TI(R)||In(R))&&r.set(x,R,!1)}}const m=n.encoding??{},g=qRe.reduce((x,w)=>{if(!r.hasAxisPart(w))return x;const S=p6e(m[w]??{},t),C=w==="labels"?v7t(t,e,S):S;return C!==void 0&&!ms(C)&&(x[w]={update:C}),x},{});return ms(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function A7t({encoding:e,size:t}){for(const n of j1){const r=cd(n);yg(t[r])&&Gv(e[n])&&(delete t[r],qt(tRe(r)))}return t}const k7t={vgMark:"arc",encodeEntry:e=>({...yp(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...sf("x",e,{defaultPos:"mid"}),...sf("y",e,{defaultPos:"mid"}),...S1(e,"radius"),...S1(e,"theta")})},R7t={vgMark:"area",encodeEntry:e=>({...yp(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...pO("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...pO("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...uee(e)})},I7t={vgMark:"rect",encodeEntry:e=>({...yp(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...S1(e,"x"),...S1(e,"y")})},P7t={vgMark:"shape",encodeEntry:e=>({...yp(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Kt(n)&&n.type===lC?{field:tn(n,{expr:"datum"})}:{}}]}},N7t={vgMark:"image",encodeEntry:e=>({...yp(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...S1(e,"x"),...S1(e,"y"),...oee(e,"url")})},D7t={vgMark:"line",encodeEntry:e=>({...yp(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...sf("x",e,{defaultPos:"mid"}),...sf("y",e,{defaultPos:"mid"}),...vl("size",e,{vgChannel:"strokeWidth"}),...uee(e)})},O7t={vgMark:"trail",encodeEntry:e=>({...yp(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...sf("x",e,{defaultPos:"mid"}),...sf("y",e,{defaultPos:"mid"}),...vl("size",e),...uee(e)})};function Eee(e,t){const{config:n}=e;return{...yp(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...sf("x",e,{defaultPos:"mid"}),...sf("y",e,{defaultPos:"mid"}),...vl("size",e),...vl("angle",e),...M7t(e,n,t)}}function M7t(e,t,n){return n?{shape:{value:n}}:vl("shape",e)}const L7t={vgMark:"symbol",encodeEntry:e=>Eee(e)},F7t={vgMark:"symbol",encodeEntry:e=>Eee(e,"circle")},$7t={vgMark:"symbol",encodeEntry:e=>Eee(e,"square")},B7t={vgMark:"rect",encodeEntry:e=>({...yp(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...S1(e,"x"),...S1(e,"y")})},j7t={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...yp(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...pO("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...pO("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...vl("size",e,{vgChannel:"strokeWidth"})}}},U7t={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...yp(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...sf("x",e,{defaultPos:"mid"}),...sf("y",e,{defaultPos:"mid"}),...oee(e),...vl("size",e,{vgChannel:"fontSize"}),...vl("angle",e),...ohe("align",z7t(e.markDef,n,t)),...ohe("baseline",V7t(e.markDef,n,t)),...sf("radius",e,{defaultPos:null}),...sf("theta",e,{defaultPos:null})}}};function z7t(e,t,n){if(ps("align",e,n)===void 0)return"center"}function V7t(e,t,n){if(ps("baseline",e,n)===void 0)return"middle"}const H7t={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",s=r==="horizontal"?"y":"x",o=r==="horizontal"?"height":"width";return{...yp(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...S1(e,i),...sf(s,e,{defaultPos:"mid",vgChannel:s==="y"?"yc":"xc"}),[o]:Qs(ps("thickness",n,t))}}},x5={arc:k7t,area:R7t,bar:I7t,circle:F7t,geoshape:P7t,image:N7t,line:D7t,point:L7t,rect:B7t,rule:j7t,square:$7t,text:U7t,tick:H7t,trail:O7t};function q7t(e){if(Gr([FL,ML,Q8t],e.mark)){const t=JRe(e.mark,e.encoding);if(t.length>0)return W7t(e,t)}else if(e.mark===LL){const t=fH.some(n=>ps(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return G7t(e)}return See(e)}const Che="faceted_path_";function W7t(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Che+e.requestDataName(So.Main),data:e.requestDataName(So.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:See(e,{fromPrefix:Che})}]}const Ahe="stack_group_";function G7t(e){var l;const[t]=See(e,{fromPrefix:Ahe}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...WS(t.encode.update,["y","yc","y2","height",...fH]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...nd(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...WS(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...nd(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of fH){const f=mg(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=Qs(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=tn(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(tn(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=mg(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Qs(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(So.Main),name:Ahe+e.requestDataName(So.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function Y7t(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!xt(o)&&D0(o)&&lH(o.value)||!o&&lH(ps("order",i,s)))){if((xt(o)||Kt(o))&&!n)return G4e(o,{expr:"datum"});if(dx(r)){const a=i.orient==="horizontal"?"y":"x",u=t[a];if(Kt(u))return{field:a}}}}function See(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=ba(r.clip,K7t(e),X7t(e)),a=q4e(r),u=i.key,l=Y7t(e),c=Q7t(e),f=ps("aria",r,s),d=x5[n].postEncodingTransform?x5[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:x5[n].vgMark,...o?{clip:o}:{},style:a,...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(So.Main)},encode:{update:x5[n].encodeEntry(e)},...d?{transform:d}:{}}]}function K7t(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function X7t(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Q7t(e){if(!e.component.selection)return null;const t=$t(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=$t(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class H6e extends B6e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Bde(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=l=>{var c,f,d;return(c=l.from)!=null&&c.data&&(l.from.data=this.lookupDataSource(l.from.data),"time"in this.encoding&&(l.from.data=l.from.data+DIe)),(d=(f=l.from)==null?void 0:f.facet)!=null&&d.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l};const o=gg(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=OOt(o,s,{graticule:t.data&&iee(t.data)}));const u=this.encoding=$Dt(t.encoding||{},a,o.filled,s);this.markDef=bIe(o,u,s),this.size=A7t({encoding:u,size:Bde(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=vIe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>ZZ(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===SRe,r=t&&IPt.some(i=>gr(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return mZ.reduce((r,i)=>{const s=du(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=pl(t);return xt(n)&&(i.domain=n.map(qd)),xt(r)&&(i.range=r.map(qd)),i}initAxes(t){return j1.reduce((n,r)=>{const i=t[r];if(gr(i)||r===po&&gr(t.x2)||r===Wu&&gr(t.y2)){const s=gr(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=$t(t),r={};for(const i of n){const s=t[i];r[i]=TI(s)?H4e(s):qd(s)}return r}initLegends(t){return UPt.reduce((n,r)=>{const i=du(t[r]);if(i&&VPt(r)){const s=i.legend;n[r]=s&&pl(s)}return n},{})}parseData(){this.component.data=f7(this)}parseLayoutSize(){c7t(this)}parseSelections(){this.component.selection=eMt(this,this.selection)}parseMarkGroup(){this.component.mark=q7t(this)}parseAxesAndHeaders(){this.component.axes=b7t(this)}assembleSelectionTopLevelSignals(t){return A9t(this,t)}assembleSignals(){return[...s6e(this),...T9t(this,[])]}assembleSelectionData(t){return k9t(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return dee(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!pC(this.parent))&&(t=FIe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return j_(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return O0(n)}typedFieldDef(t){const n=this.fieldDef(t);return ff(n)?n:null}}class Tee extends xee{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(GL(a))return new Tee(a,this,this.getName(`layer_${u}`),o,s);if(U1(a))return new H6e(a,this,this.getName(`layer_${u}`),o,s);throw new Error(yZ(a))})}parseData(){this.component.data=f7(this);for(const t of this.children)t.parseData()}parseLayoutSize(){u7t(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of $t(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Km(t))&&xZ(bZ)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){_7t(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),s6e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),dee(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of ln(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return R9t(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),w6e(this))}}function Cee(e,t,n,r,i){if(jL(e))return new $k(e,t,n,i);if(GL(e))return new Tee(e,t,n,r,i);if(U1(e))return new H6e(e,t,n,r,i);if(uOt(e))return new m7t(e,t,n,i);throw new Error(yZ(e))}function J7t(e,t={}){t.logger&&f8t(t.logger),t.fieldTitle&&zRe(t.fieldTitle);try{const n=yIe(XT(t.config,e.config)),r=CIe(e,n),i=Cee(r,null,"",void 0,n);return i.parse(),wLt(i.component.data,i),{spec:eFt(i,Z7t(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&d8t(),t.fieldTitle&&RDt()}}function Z7t(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):cn(t)&&(t={type:t}),i&&s&&m9t(t.type)){if(i==="step"&&s==="step")qt(Ede()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";qt(Ede(RL(o)));const a=o==="width"?"height":"width";t.type=g9t(a)}}return{...$t(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Qde(n,!1),...Qde(e,!0)}}function eFt(e,t,n={},r){const i=e.config?wOt(e.config):void 0,s=i7t(e.component.data,n),o=e.assembleSelectionData(s),a=e.assembleProjections(),u=e.assembleTitle(),l=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let f=e.assembleLayoutSignals();f=f.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(t[p.name]=+p.value,!1):!0);const{params:d,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...u?{title:u}:{},...l?{style:l}:{},...c?{encode:{update:c}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...f,...e.assembleSelectionTopLevelSignals([]),...hIe(d)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const tFt=SPt.version,nFt=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:YS,accessPathWithDatum:aZ,accessWithDatumToUnescapedPath:ss,compile:J7t,contains:Gr,deepEqual:Qd,deleteNestedProperty:iO,duplicate:ur,entries:kb,every:iZ,fieldIntersection:oZ,flatAccessWithDatum:T4e,getFirstDefined:ba,hasIntersection:sZ,hasProperty:zt,hash:ii,internalField:k4e,isBoolean:U4,isEmpty:ms,isEqual:CPt,isInternalField:R4e,isNullOrFalse:lH,isNumeric:EL,keys:$t,logicalExpr:Lk,mergeDeep:E4e,never:w4e,normalize:CIe,normalizeAngle:z4,omit:nd,pick:WS,prefixGenerator:cH,removePathFromField:aC,replaceAll:uw,replacePathInField:sp,resetIdCounter:kPt,setEqual:S4e,some:GS,stringify:gs,titleCase:pI,unique:Bm,uniqueId:A4e,vals:Tl,varName:fo,version:tFt},Symbol.toStringTag,{value:"Module"}));function q6e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var rFt="vega-themes",iFt="2.15.0",sFt="Themes for stylized Vega and Vega-Lite visualizations.",oFt=["vega","vega-lite","themes","style"],aFt="BSD-3-Clause",uFt={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},lFt=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],cFt="build/vega-themes.js",Aee="build/vega-themes.module.js",fFt="build/vega-themes.min.js",dFt="build/vega-themes.min.js",hFt="build/vega-themes.module.d.ts",pFt={type:"git",url:"https://github.com/vega/vega-themes.git"},mFt=["src","build"],gFt={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},yFt={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},vFt={vega:"*","vega-lite":"*"},bFt={},xFt={name:rFt,version:iFt,description:sFt,keywords:oFt,license:aFt,author:uFt,contributors:lFt,main:cFt,module:Aee,unpkg:fFt,jsdelivr:dFt,types:hFt,repository:pFt,files:mFt,scripts:gFt,devDependencies:yFt,peerDependencies:vFt,dependencies:bFt};const aE="#fff",khe="#888",_Ft={background:"#333",view:{stroke:khe},title:{color:aE,subtitleColor:aE},style:{"guide-label":{fill:aE},"guide-title":{fill:aE}},axis:{domainColor:aE,gridColor:khe,tickColor:aE}},qx="#4572a7",wFt={background:"#fff",arc:{fill:qx},area:{fill:qx},line:{stroke:qx,strokeWidth:2},path:{stroke:qx},rect:{fill:qx},shape:{stroke:qx},symbol:{fill:qx,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Wx="#30a2da",cj="#cbcbcb",EFt="#999",SFt="#333",Rhe="#f0f0f0",Ihe="#333",TFt={arc:{fill:Wx},area:{fill:Wx},axis:{domainColor:cj,grid:!0,gridColor:cj,gridWidth:1,labelColor:EFt,labelFontSize:10,titleColor:SFt,tickColor:cj,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Rhe,group:{fill:Rhe},legend:{labelColor:Ihe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Ihe,titleFontSize:14,titlePadding:10},line:{stroke:Wx,strokeWidth:2},path:{stroke:Wx,strokeWidth:.5},rect:{fill:Wx},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Wx},bar:{binSpacing:2,fill:Wx,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Gx="#000",CFt={group:{fill:"#e5e5e5"},arc:{fill:Gx},area:{fill:Gx},line:{stroke:Gx},path:{stroke:Gx},rect:{fill:Gx},shape:{stroke:Gx},symbol:{fill:Gx,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},AFt=22,kFt="normal",Phe="Benton Gothic, sans-serif",Nhe=11.5,RFt="normal",Yx="#82c6df",fj="Benton Gothic Bold, sans-serif",Dhe="normal",Ohe=13,f3={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},IFt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:fj,fontSize:AFt,fontWeight:kFt},arc:{fill:Yx},area:{fill:Yx},line:{stroke:Yx,strokeWidth:2},path:{stroke:Yx},rect:{fill:Yx},shape:{stroke:Yx},symbol:{fill:Yx,size:30},axis:{labelFont:Phe,labelFontSize:Nhe,labelFontWeight:RFt,titleFont:fj,titleFontSize:Ohe,titleFontWeight:Dhe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Phe,labelFontSize:Nhe,symbolType:"square",titleFont:fj,titleFontSize:Ohe,titleFontWeight:Dhe},range:{category:f3["category-6"],diverging:f3["fireandice-6"],heatmap:f3["fire-7"],ordinal:f3["fire-7"],ramp:f3["fire-7"]}},Kx="#ab5787",_5="#979797",PFt={background:"#f9f9f9",arc:{fill:Kx},area:{fill:Kx},line:{stroke:Kx},path:{stroke:Kx},rect:{fill:Kx},shape:{stroke:Kx},symbol:{fill:Kx,size:30},axis:{domainColor:_5,domainWidth:.5,gridWidth:.2,labelColor:_5,tickColor:_5,tickWidth:.2,titleColor:_5},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Xx="#3e5c69",NFt={background:"#fff",arc:{fill:Xx},area:{fill:Xx},line:{stroke:Xx},path:{stroke:Xx},rect:{fill:Xx},shape:{stroke:Xx},symbol:{fill:Xx},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},zh="#1696d2",Mhe="#000000",DFt="#FFFFFF",w5="Lato",dj="Lato",OFt="Lato",MFt="#DEDDDD",LFt=18,d3={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},FFt={background:DFt,title:{anchor:"start",fontSize:LFt,font:w5},axisX:{domain:!0,domainColor:Mhe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:dj,labelAngle:0,tickColor:Mhe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:w5},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:MFt,gridWidth:1,labelFontSize:12,labelFont:dj,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:w5,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:dj,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:w5,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:d3["six-groups-cat-1"],diverging:d3["diverging-colors"],heatmap:d3["diverging-colors"],ordinal:d3["six-groups-seq"],ramp:d3["shades-blue"]},area:{fill:zh},rect:{fill:zh},line:{color:zh,stroke:zh,strokeWidth:5},trail:{color:zh,stroke:zh,strokeWidth:0,size:1},path:{stroke:zh,strokeWidth:.5},point:{filled:!0},text:{font:OFt,color:zh,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:zh,stroke:null}},arc:{fill:zh},shape:{stroke:zh},symbol:{fill:zh,size:30}},Qx="#3366CC",Lhe="#ccc",E5="Arial, sans-serif",$Ft={arc:{fill:Qx},area:{fill:Qx},path:{stroke:Qx},rect:{fill:Qx},shape:{stroke:Qx},symbol:{stroke:Qx},circle:{fill:Qx},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:E5,fontSize:12},"guide-title":{font:E5,fontSize:12},"group-title":{font:E5,fontSize:12}},title:{font:E5,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Lhe,tickColor:Lhe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},kee=e=>e*(1/3+1),Fhe=kee(9),$he=kee(10),Bhe=kee(12),h3="Segoe UI",jhe="wf_standard-font, helvetica, arial, sans-serif",Uhe="#252423",p3="#605E5C",zhe="transparent",BFt="#C8C6C4",Zp="#118DFF",jFt="#12239E",UFt="#E66C37",zFt="#6B007B",VFt="#E044A7",HFt="#744EC2",qFt="#D9B300",WFt="#D64550",W6e=Zp,G6e="#DEEFFF",Vhe=[G6e,W6e],GFt=[G6e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",W6e],YFt={view:{stroke:zhe},background:zhe,font:h3,header:{titleFont:jhe,titleFontSize:Bhe,titleColor:Uhe,labelFont:h3,labelFontSize:$he,labelColor:p3},axis:{ticks:!1,grid:!1,domain:!1,labelColor:p3,labelFontSize:Fhe,titleFont:jhe,titleColor:Uhe,titleFontSize:Bhe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:BFt,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Zp},line:{stroke:Zp,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:h3,fontSize:Fhe,fill:p3},arc:{fill:Zp},area:{fill:Zp,line:!0,opacity:.6},path:{stroke:Zp},rect:{fill:Zp},point:{fill:Zp,filled:!0,size:75},shape:{stroke:Zp},symbol:{fill:Zp,strokeWidth:1.5,size:50},legend:{titleFont:h3,titleFontWeight:"bold",titleColor:p3,labelFont:h3,labelFontSize:$he,labelColor:p3,symbolType:"circle",symbolSize:75},range:{category:[Zp,jFt,UFt,zFt,VFt,HFt,qFt,WFt],diverging:Vhe,heatmap:Vhe,ordinal:GFt}},hj='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',KFt='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',pj=400,S5={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},XFt=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],QFt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function d7({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=S5.gridBg[e],i=S5.textPrimary[e],s=S5.textSecondary[e],o=n==="dark"?XFt:QFt,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:hj,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:KFt,labelFontWeight:pj,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:S5.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:hj,fill:s,fontWeight:pj},"guide-title":{font:hj,fill:s,fontWeight:pj}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const JFt=d7({theme:"white",background:"#ffffff"}),ZFt=d7({theme:"g10",background:"#f4f4f4"}),e$t=d7({theme:"g90",background:"#262626"}),t$t=d7({theme:"g100",background:"#161616"}),n$t=xFt.version,r$t=Object.freeze(Object.defineProperty({__proto__:null,carbong10:ZFt,carbong100:t$t,carbong90:e$t,carbonwhite:JFt,dark:_Ft,excel:wFt,fivethirtyeight:TFt,ggplot2:CFt,googlecharts:$Ft,latimes:IFt,powerbi:YFt,quartz:PFt,urbaninstitute:FFt,version:n$t,vox:NFt},Symbol.toStringTag,{value:"Module"}));function i$t(e,t,n,r){if(xt(e))return`[${e.map(i=>t(cn(i)?i:Hhe(i,n))).join(", ")}]`;if(un(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(un(c)&&(c=Hhe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function s$t(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Hhe(e,t){return JSON.stringify(e,s$t(t))}var o$t=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const Y6e="vg-tooltip-element",a$t={offsetX:10,offsetY:10,id:Y6e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:u$t,maxDepth:2,formatTooltip:i$t,baseURL:""};function u$t(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function l$t(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return o$t.toString().replace(Y6e,e)}function c$t(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class f$t{constructor(t){this.options={...a$t,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=l$t(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=c$t(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var mj={};function d$t(e){return e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gj,qhe;function h$t(){return qhe||(qhe=1,gj=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),gj}var p$t=Pi;Pi.Node=vw;Pi.create=Pi;function Pi(e){var t=this;if(t instanceof Pi||(t=new Pi),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}Pi.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Pi.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Pi.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Pi.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)g$t(this,arguments[e]);return this.length};Pi.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)y$t(this,arguments[e]);return this.length};Pi.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Pi.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Pi.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};Pi.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};Pi.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};Pi.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};Pi.prototype.map=function(e,t){t=t||this;for(var n=new Pi,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};Pi.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Pi,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};Pi.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};Pi.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};Pi.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};Pi.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};Pi.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Pi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};Pi.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Pi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};Pi.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=m$t(this,i,n[r]);return s};Pi.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function m$t(e,t,n){var r=t===e.head?new vw(n,null,t,e):new vw(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function g$t(e,t){e.tail=new vw(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function y$t(e,t){e.head=new vw(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function vw(e,t,n,r){if(!(this instanceof vw))return new vw(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{h$t()(Pi)}catch{}const v$t=p$t,b_=Symbol("max"),Ny=Symbol("length"),uE=Symbol("lengthCalculator"),Bk=Symbol("allowStale"),R_=Symbol("maxAge"),Ry=Symbol("dispose"),Whe=Symbol("noDisposeOnSet"),Ru=Symbol("lruList"),e0=Symbol("cache"),K6e=Symbol("updateAgeOnGet"),yj=()=>1;class b$t{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[b_]=t.max||1/0;const n=t.length||yj;if(this[uE]=typeof n!="function"?yj:n,this[Bk]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[R_]=t.maxAge||0,this[Ry]=t.dispose,this[Whe]=t.noDisposeOnSet||!1,this[K6e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[b_]=t||1/0,m3(this)}get max(){return this[b_]}set allowStale(t){this[Bk]=!!t}get allowStale(){return this[Bk]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[R_]=t,m3(this)}get maxAge(){return this[R_]}set lengthCalculator(t){typeof t!="function"&&(t=yj),t!==this[uE]&&(this[uE]=t,this[Ny]=0,this[Ru].forEach(n=>{n.length=this[uE](n.value,n.key),this[Ny]+=n.length})),m3(this)}get lengthCalculator(){return this[uE]}get length(){return this[Ny]}get itemCount(){return this[Ru].length}rforEach(t,n){n=n||this;for(let r=this[Ru].tail;r!==null;){const i=r.prev;Ghe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Ru].head;r!==null;){const i=r.next;Ghe(this,t,r,n),r=i}}keys(){return this[Ru].toArray().map(t=>t.key)}values(){return this[Ru].toArray().map(t=>t.value)}reset(){this[Ry]&&this[Ru]&&this[Ru].length&&this[Ru].forEach(t=>this[Ry](t.key,t.value)),this[e0]=new Map,this[Ru]=new v$t,this[Ny]=0}dump(){return this[Ru].map(t=>vO(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Ru]}set(t,n,r){if(r=r||this[R_],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[uE](n,t);if(this[e0].has(t)){if(s>this[b_])return rS(this,this[e0].get(t)),!1;const u=this[e0].get(t).value;return this[Ry]&&(this[Whe]||this[Ry](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Ny]+=s-u.length,u.length=s,this.get(t),m3(this),!0}const o=new x$t(t,n,s,i,r);return o.length>this[b_]?(this[Ry]&&this[Ry](t,n),!1):(this[Ny]+=o.length,this[Ru].unshift(o),this[e0].set(t,this[Ru].head),m3(this),!0)}has(t){if(!this[e0].has(t))return!1;const n=this[e0].get(t).value;return!vO(this,n)}get(t){return vj(this,t,!0)}peek(t){return vj(this,t,!1)}pop(){const t=this[Ru].tail;return t?(rS(this,t),t.value):null}del(t){rS(this,this[e0].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[e0].forEach((t,n)=>vj(this,n,!1))}}const vj=(e,t,n)=>{const r=e[e0].get(t);if(r){const i=r.value;if(vO(e,i)){if(rS(e,r),!e[Bk])return}else n&&(e[K6e]&&(r.value.now=Date.now()),e[Ru].unshiftNode(r));return i.value}},vO=(e,t)=>{if(!t||!t.maxAge&&!e[R_])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[R_]&&n>e[R_]},m3=e=>{if(e[Ny]>e[b_])for(let t=e[Ru].tail;e[Ny]>e[b_]&&t!==null;){const n=t.prev;rS(e,t),t=n}},rS=(e,t)=>{if(t){const n=t.value;e[Ry]&&e[Ry](n.key,n.value),e[Ny]-=n.length,e[e0].delete(n.key),e[Ru].removeNode(t)}};class x$t{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const Ghe=(e,t,n,r)=>{let i=n.value;vO(e,i)&&(rS(e,n),e[Bk]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var _$t=b$t;const w$t=Object.freeze({loose:!0}),E$t=Object.freeze({}),S$t=e=>e?typeof e!="object"?w$t:e:E$t;var Ree=S$t,FH={exports:{}};const T$t="2.0.0",X6e=256,C$t=Number.MAX_SAFE_INTEGER||9007199254740991,A$t=16,k$t=X6e-6,R$t=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Iee={MAX_LENGTH:X6e,MAX_SAFE_COMPONENT_LENGTH:A$t,MAX_SAFE_BUILD_LENGTH:k$t,MAX_SAFE_INTEGER:C$t,RELEASE_TYPES:R$t,SEMVER_SPEC_VERSION:T$t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const I$t=typeof process=="object"&&mj&&mj.NODE_DEBUG&&/\bsemver\b/i.test(mj.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var h7=I$t;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Iee,s=h7;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,b]of d)m=m.split(`${g}*`).join(`${g}{0,${b}}`).split(`${g}+`).join(`${g}{1,${b}}`);return m},p=(m,g,b)=>{const y=h(g),x=c++;s(m,x,g),l[m]=x,u[x]=g,o[x]=new RegExp(g,b?"g":void 0),a[x]=new RegExp(y,b?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(FH,FH.exports);var Pee=FH.exports;const Yhe=/^[0-9]+$/,Q6e=(e,t)=>{const n=Yhe.test(e),r=Yhe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},P$t=(e,t)=>Q6e(t,e);var N$t={compareIdentifiers:Q6e,rcompareIdentifiers:P$t};const T5=h7,{MAX_LENGTH:Khe,MAX_SAFE_INTEGER:C5}=Iee,{safeRe:Xhe,t:Qhe}=Pee,D$t=Ree,{compareIdentifiers:lE}=N$t;let O$t=class _m{constructor(t,n){if(n=D$t(n),t instanceof _m){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Khe)throw new TypeError(`version is longer than ${Khe} characters`);T5("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Xhe[Qhe.LOOSE]:Xhe[Qhe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>C5||this.major<0)throw new TypeError("Invalid major version");if(this.minor>C5||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>C5||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<C5)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(T5("SemVer.compare",this.version,this.options,t),!(t instanceof _m)){if(typeof t=="string"&&t===this.version)return 0;t=new _m(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof _m||(t=new _m(t,this.options)),lE(this.major,t.major)||lE(this.minor,t.minor)||lE(this.patch,t.patch)}comparePre(t){if(t instanceof _m||(t=new _m(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(T5("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return lE(r,i)}while(++n)}compareBuild(t){t instanceof _m||(t=new _m(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(T5("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return lE(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),lE(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Nee=O$t;const Jhe=Nee,M$t=(e,t,n)=>new Jhe(e,n).compare(new Jhe(t,n));var mC=M$t;const L$t=mC,F$t=(e,t,n)=>L$t(e,t,n)===0;var $$t=F$t;const B$t=mC,j$t=(e,t,n)=>B$t(e,t,n)!==0;var U$t=j$t;const z$t=mC,V$t=(e,t,n)=>z$t(e,t,n)>0;var H$t=V$t;const q$t=mC,W$t=(e,t,n)=>q$t(e,t,n)>=0;var G$t=W$t;const Y$t=mC,K$t=(e,t,n)=>Y$t(e,t,n)<0;var X$t=K$t;const Q$t=mC,J$t=(e,t,n)=>Q$t(e,t,n)<=0;var Z$t=J$t;const eBt=$$t,tBt=U$t,nBt=H$t,rBt=G$t,iBt=X$t,sBt=Z$t,oBt=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return eBt(e,n,r);case"!=":return tBt(e,n,r);case">":return nBt(e,n,r);case">=":return rBt(e,n,r);case"<":return iBt(e,n,r);case"<=":return sBt(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var aBt=oBt,bj,Zhe;function uBt(){if(Zhe)return bj;Zhe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}bj=t;const n=Ree,{safeRe:r,t:i}=Pee,s=aBt,o=h7,a=Nee,u=J6e();return bj}var xj,epe;function J6e(){if(epe)return xj;epe=1;class e{constructor(B,z){if(z=r(z),B instanceof e)return B.loose===!!z.loose&&B.includePrerelease===!!z.includePrerelease?B:new e(B.raw,z);if(B instanceof i)return this.raw=B.value,this.set=[[B]],this.format(),this;if(this.options=z,this.loose=!!z.loose,this.includePrerelease=!!z.includePrerelease,this.raw=B.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(G=>this.parseRange(G.trim())).filter(G=>G.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const G=this.set[0];if(this.set=this.set.filter(Z=>!p(Z[0])),this.set.length===0)this.set=[G];else if(this.set.length>1){for(const Z of this.set)if(Z.length===1&&m(Z[0])){this.set=[Z];break}}}this.format()}format(){return this.range=this.set.map(B=>B.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(B){const G=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+B,Z=n.get(G);if(Z)return Z;const ne=this.options.loose,ue=ne?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];B=B.replace(ue,L(this.options.includePrerelease)),s("hyphen replace",B),B=B.replace(a[u.COMPARATORTRIM],l),s("comparator trim",B),B=B.replace(a[u.TILDETRIM],c),s("tilde trim",B),B=B.replace(a[u.CARETTRIM],f),s("caret trim",B);let X=B.split(" ").map(ee=>b(ee,this.options)).join(" ").split(/\s+/).map(ee=>M(ee,this.options));ne&&(X=X.filter(ee=>(s("loose invalid filter",ee,this.options),!!ee.match(a[u.COMPARATORLOOSE])))),s("range list",X);const q=new Map,te=X.map(ee=>new i(ee,this.options));for(const ee of te){if(p(ee))return[ee];q.set(ee.value,ee)}q.size>1&&q.has("")&&q.delete("");const W=[...q.values()];return n.set(G,W),W}intersects(B,z){if(!(B instanceof e))throw new TypeError("a Range is required");return this.set.some(G=>g(G,z)&&B.set.some(Z=>g(Z,z)&&G.every(ne=>Z.every(ue=>ne.intersects(ue,z)))))}test(B){if(!B)return!1;if(typeof B=="string")try{B=new o(B,this.options)}catch{return!1}for(let z=0;z<this.set.length;z++)if(H(this.set[z],B,this.options))return!0;return!1}}xj=e;const t=_$t,n=new t({max:1e3}),r=Ree,i=uBt(),s=h7,o=Nee,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Pee,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Iee,p=D=>D.value==="<0.0.0-0",m=D=>D.value==="",g=(D,B)=>{let z=!0;const G=D.slice();let Z=G.pop();for(;z&&G.length;)z=G.every(ne=>Z.intersects(ne,B)),Z=G.pop();return z},b=(D,B)=>(s("comp",D,B),D=S(D,B),s("caret",D),D=x(D,B),s("tildes",D),D=R(D,B),s("xrange",D),D=O(D,B),s("stars",D),D),y=D=>!D||D.toLowerCase()==="x"||D==="*",x=(D,B)=>D.trim().split(/\s+/).map(z=>w(z,B)).join(" "),w=(D,B)=>{const z=B.loose?a[u.TILDELOOSE]:a[u.TILDE];return D.replace(z,(G,Z,ne,ue,X)=>{s("tilde",D,G,Z,ne,ue,X);let q;return y(Z)?q="":y(ne)?q=`>=${Z}.0.0 <${+Z+1}.0.0-0`:y(ue)?q=`>=${Z}.${ne}.0 <${Z}.${+ne+1}.0-0`:X?(s("replaceTilde pr",X),q=`>=${Z}.${ne}.${ue}-${X} <${Z}.${+ne+1}.0-0`):q=`>=${Z}.${ne}.${ue} <${Z}.${+ne+1}.0-0`,s("tilde return",q),q})},S=(D,B)=>D.trim().split(/\s+/).map(z=>C(z,B)).join(" "),C=(D,B)=>{s("caret",D,B);const z=B.loose?a[u.CARETLOOSE]:a[u.CARET],G=B.includePrerelease?"-0":"";return D.replace(z,(Z,ne,ue,X,q)=>{s("caret",D,Z,ne,ue,X,q);let te;return y(ne)?te="":y(ue)?te=`>=${ne}.0.0${G} <${+ne+1}.0.0-0`:y(X)?ne==="0"?te=`>=${ne}.${ue}.0${G} <${ne}.${+ue+1}.0-0`:te=`>=${ne}.${ue}.0${G} <${+ne+1}.0.0-0`:q?(s("replaceCaret pr",q),ne==="0"?ue==="0"?te=`>=${ne}.${ue}.${X}-${q} <${ne}.${ue}.${+X+1}-0`:te=`>=${ne}.${ue}.${X}-${q} <${ne}.${+ue+1}.0-0`:te=`>=${ne}.${ue}.${X}-${q} <${+ne+1}.0.0-0`):(s("no pr"),ne==="0"?ue==="0"?te=`>=${ne}.${ue}.${X}${G} <${ne}.${ue}.${+X+1}-0`:te=`>=${ne}.${ue}.${X}${G} <${ne}.${+ue+1}.0-0`:te=`>=${ne}.${ue}.${X} <${+ne+1}.0.0-0`),s("caret return",te),te})},R=(D,B)=>(s("replaceXRanges",D,B),D.split(/\s+/).map(z=>I(z,B)).join(" ")),I=(D,B)=>{D=D.trim();const z=B.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return D.replace(z,(G,Z,ne,ue,X,q)=>{s("xRange",D,G,Z,ne,ue,X,q);const te=y(ne),W=te||y(ue),ee=W||y(X),oe=ee;return Z==="="&&oe&&(Z=""),q=B.includePrerelease?"-0":"",te?Z===">"||Z==="<"?G="<0.0.0-0":G="*":Z&&oe?(W&&(ue=0),X=0,Z===">"?(Z=">=",W?(ne=+ne+1,ue=0,X=0):(ue=+ue+1,X=0)):Z==="<="&&(Z="<",W?ne=+ne+1:ue=+ue+1),Z==="<"&&(q="-0"),G=`${Z+ne}.${ue}.${X}${q}`):W?G=`>=${ne}.0.0${q} <${+ne+1}.0.0-0`:ee&&(G=`>=${ne}.${ue}.0${q} <${ne}.${+ue+1}.0-0`),s("xRange return",G),G})},O=(D,B)=>(s("replaceStars",D,B),D.trim().replace(a[u.STAR],"")),M=(D,B)=>(s("replaceGTE0",D,B),D.trim().replace(a[B.includePrerelease?u.GTE0PRE:u.GTE0],"")),L=D=>(B,z,G,Z,ne,ue,X,q,te,W,ee,oe,pe)=>(y(G)?z="":y(Z)?z=`>=${G}.0.0${D?"-0":""}`:y(ne)?z=`>=${G}.${Z}.0${D?"-0":""}`:ue?z=`>=${z}`:z=`>=${z}${D?"-0":""}`,y(te)?q="":y(W)?q=`<${+te+1}.0.0-0`:y(ee)?q=`<${te}.${+W+1}.0-0`:oe?q=`<=${te}.${W}.${ee}-${oe}`:D?q=`<${te}.${W}.${+ee+1}-0`:q=`<=${q}`,`${z} ${q}`.trim()),H=(D,B,z)=>{for(let G=0;G<D.length;G++)if(!D[G].test(B))return!1;if(B.prerelease.length&&!z.includePrerelease){for(let G=0;G<D.length;G++)if(s(D[G].semver),D[G].semver!==i.ANY&&D[G].semver.prerelease.length>0){const Z=D[G].semver;if(Z.major===B.major&&Z.minor===B.minor&&Z.patch===B.patch)return!0}return!1}return!0};return xj}const lBt=J6e(),cBt=(e,t,n)=>{try{t=new lBt(t,n)}catch{return!1}return t.test(e)};var fBt=cBt,Z6e=d$t(fBt);function dBt(e,t,n){const r=e.open(t),i=250,{origin:s}=new URL(t);let o=40;function a(l){l.source===r&&(o=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function u(){o<=0||(r.postMessage(n,s),setTimeout(u,i),o-=1)}setTimeout(u,i)}var hBt=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function e5e(e,...t){for(const n of t)pBt(e,n);return e}function pBt(e,t){for(const n of Object.keys(t))QT(e,n,t[n],!0)}const t0=H5t;let G4=nFt;const A5=typeof window<"u"?window:void 0;var cme;G4===void 0&&((cme=A5==null?void 0:A5.vl)!=null&&cme.compile)&&(G4=A5.vl);const mBt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},gBt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},nk={vega:"Vega","vega-lite":"Vega-Lite"},bO={vega:t0.version,"vega-lite":G4?G4.version:"not available"},yBt={vega:e=>e,"vega-lite":(e,t)=>G4.compile(e,{config:t}).spec},vBt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,bBt="chart-wrapper";function xBt(e){return typeof e=="function"}function tpe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${nk[r]} JSON Source`}function _Bt(e,t){if(e.$schema){const n=q6e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${nk[n.library]}, but mode argument sets ${nk[t]??t}.`);const r=n.library;return Z6e(bO[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${nk[r]} ${n.version}, but the current version of ${nk[r]} is v${bO[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function t5e(e){return!!(e&&"load"in e)}function npe(e){return t5e(e)?e:t0.loader(e)}function wBt(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return cn(t.defaultStyle)&&(t.defaultStyle=!1),t}async function EBt(e,t,n={}){let r,i;cn(t)?(i=npe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=wBt(r),o=s.loader;(!i||o)&&(i=npe(n.loader??o));const a=await rpe(s,i),u=await rpe(n,i),l={...e5e(u,a),config:XT(u.config??{},a.config??{})};return await TBt(e,r,l,i)}async function rpe(e,t){const n=cn(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=cn(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function SBt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function TBt(e,t,n={},r){const i=n.theme?XT(r$t[n.theme],n.config??{}):n.config,s=nx(n.actions)?n.actions:e5e({},mBt,n.actions??{}),o={...gBt,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??t0.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const S="vega-embed-style",{root:C,rootContainer:R}=SBt(c);if(!C.getElementById(S)){const I=document.createElement("style");I.id=S,I.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?hBt.toString():n.defaultStyle,R.appendChild(I)}}const f=_Bt(t,n.mode);let d=yBt[f](t,i);if(f==="vega-lite"&&d.$schema){const S=q6e(d.$schema);Z6e(bO.vega,`^${S.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${S.version}, but current version is v${bO.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const S=document.createElement("div");S.classList.add(bBt),c.appendChild(S),h=S}const p=n.patch;if(p&&(d=p instanceof Function?p(d):kM(d,p,!0,!1).newDocument),n.formatLocale&&t0.formatLocale(n.formatLocale),n.timeFormatLocale&&t0.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const S in n.expressionFunctions){const C=n.expressionFunctions[S];"fn"in C?t0.expressionFunction(S,C.fn,C.visitor):C instanceof Function&&t0.expressionFunction(S,C)}const{ast:m}=n,g=t0.parse(d,f==="vega-lite"?{}:i,{ast:m}),b=new(n.viewClass||t0.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:t0.expressionInterpreter??n.expr??ePt}:{}});if(b.addSignalListener("autosize",(S,C)=>{const{type:R}=C;R=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):R=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):R=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:S,tooltip:C}=n,R=S&&!t5e(S)?S==null?void 0:S.baseURL:void 0,I=xBt(C)?C:new f$t({baseURL:R,...C===!0?{}:C}).call;b.tooltip(I)}let{hover:y}=n;if(y===void 0&&(y=f==="vega"),y){const{hoverSet:S,updateSet:C}=typeof y=="boolean"?{}:y;b.hover(S,C)}n&&(n.width!=null&&b.width(n.width),n.height!=null&&b.height(n.height),n.padding!=null&&b.padding(n.padding)),await b.initialize(h,n.bind).runAsync();let x;if(s!==!1){let S=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const R=document.createElement("details");R.title=o.CLICK_TO_VIEW_ACTIONS,c.append(R),S=R;const I=document.createElement("summary");I.innerHTML=vBt,R.append(I),x=O=>{R.contains(O.target)||R.removeAttribute("open")},document.addEventListener("click",x)}const C=document.createElement("div");if(S.append(C),C.classList.add("vega-actions"),s===!0||s.export!==!1){for(const R of["svg","png"])if(s===!0||s.export===!0||s.export[R]){const I=o[`${R.toUpperCase()}_ACTION`],O=document.createElement("a"),M=un(n.scaleFactor)?n.scaleFactor[R]:n.scaleFactor;O.text=I,O.href="#",O.target="_blank",O.download=`${l}.${R}`,O.addEventListener("mousedown",async function(L){L.preventDefault();const H=await b.toImageURL(R,M);this.href=H}),C.append(O)}}if(s===!0||s.source!==!1){const R=document.createElement("a");R.text=o.SOURCE_ACTION,R.href="#",R.addEventListener("click",function(I){tpe(yB(t),n.sourceHeader??"",n.sourceFooter??"",f),I.preventDefault()}),C.append(R)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const R=document.createElement("a");R.text=o.COMPILED_ACTION,R.href="#",R.addEventListener("click",function(I){tpe(yB(d),n.sourceHeader??"",n.sourceFooter??"","vega"),I.preventDefault()}),C.append(R)}if(s===!0||s.editor!==!1){const R=n.editorUrl??"https://vega.github.io/editor/",I=document.createElement("a");I.text=o.EDITOR_ACTION,I.href="#",I.addEventListener("click",function(O){dBt(window,R,{config:i,mode:f,renderer:a,spec:yB(t)}),O.preventDefault()}),C.append(I)}}function w(){x&&document.removeEventListener("click",x),b.finalize()}return{view:b,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function CBt(e){return!!e&&{}.toString.call(e)==="[object Function]"}function ABt(e,t,n){n&&(CBt(n)?n(e.data(t)):e.change(t,t0.changeset().remove(()=>!0).insert(n)))}function kBt(e,t){Object.keys(t).forEach(n=>{ABt(e,n,t[n])})}function n5e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const r5e=()=>{};function _j(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function RBt(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=n5e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!I3(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function ipe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function wj(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function rk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i5e extends sr.PureComponent{constructor(){super(...arguments),rk(this,"containerRef",sr.createRef()),rk(this,"resultPromise",void 0),rk(this,"handleError",t=>{const{onError:n=r5e}=this.props;n(t,this.containerRef.current),console.warn(t)}),rk(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=n5e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=RBt(wj(this.props),wj(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!sV(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&ipe(a,s),i&&_j(a,i)),a.run()})}else sV(i,s)||this.modifyView(o=>{s&&ipe(o,s),i&&_j(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=wj(this.props);this.resultPromise=EBt(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;_j(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return sr.createElement("div",{ref:this.containerRef,className:t,style:n})}}rk(i5e,"propTypes",{className:Vne.string,onError:Vne.func});function $H(){return $H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$H.apply(this,arguments)}function BH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const IBt={};class Dee extends sr.PureComponent{constructor(){super(...arguments),BH(this,"vegaEmbed",sr.createRef()),BH(this,"handleNewView",t=>{this.update();const{onNewView:n=r5e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){sV(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{kBt(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return sr.createElement(i5e,$H({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}BH(Dee,"defaultProps",{data:IBt});function jH(){return jH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jH.apply(this,arguments)}function spe(e){return sr.createElement(Dee,jH({},e,{mode:"vega-lite"}))}function f0(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Db(e){return!!e&&!!e[lo]}function C1(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===BBt}(e)||Array.isArray(e)||!!e[dpe]||!!(!((t=e.constructor)===null||t===void 0)&&t[dpe])||Oee(e)||Mee(e))}function bw(e,t,n){n===void 0&&(n=!1),gC(e)===0?(n?Object.keys:sS)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function gC(e){var t=e[lo];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Oee(e)?2:Mee(e)?3:0}function iS(e,t){return gC(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function PBt(e,t){return gC(e)===2?e.get(t):e[t]}function s5e(e,t,n){var r=gC(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function o5e(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Oee(e){return FBt&&e instanceof Map}function Mee(e){return $Bt&&e instanceof Set}function l_(e){return e.o||e.t}function Lee(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=u5e(e);delete t[lo];for(var n=sS(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Fee(e,t){return t===void 0&&(t=!1),$ee(e)||Db(e)||!C1(e)||(gC(e)>1&&(e.set=e.add=e.clear=e.delete=NBt),Object.freeze(e),t&&bw(e,function(n,r){return Fee(r,!0)},!0)),e}function NBt(){f0(2)}function $ee(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Qm(e){var t=HH[e];return t||f0(18,e),t}function DBt(e,t){HH[e]||(HH[e]=t)}function UH(){return Y4}function Ej(e,t){t&&(Qm("Patches"),e.u=[],e.s=[],e.v=t)}function xO(e){zH(e),e.p.forEach(OBt),e.p=null}function zH(e){e===Y4&&(Y4=e.l)}function ope(e){return Y4={p:[],l:Y4,h:e,m:!0,_:0}}function OBt(e){var t=e[lo];t.i===0||t.i===1?t.j():t.g=!0}function Sj(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Qm("ES5").S(t,e,r),r?(n[lo].P&&(xO(t),f0(4)),C1(e)&&(e=_O(t,e),t.l||wO(t,e)),t.u&&Qm("Patches").M(n[lo].t,e,t.u,t.s)):e=_O(t,n,[]),xO(t),t.u&&t.v(t.u,t.s),e!==a5e?e:void 0}function _O(e,t,n){if($ee(t))return t;var r=t[lo];if(!r)return bw(t,function(a,u){return ape(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return wO(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Lee(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),bw(s,function(a,u){return ape(e,r,i,a,u,n,o)}),wO(e,i,!1),n&&e.u&&Qm("Patches").N(r,n,e.u,e.s)}return r.o}function ape(e,t,n,r,i,s,o){if(Db(i)){var a=_O(e,i,s&&t&&t.i!==3&&!iS(t.R,r)?s.concat(r):void 0);if(s5e(n,r,a),!Db(a))return;e.m=!1}else o&&n.add(i);if(C1(i)&&!$ee(i)){if(!e.h.D&&e._<1)return;_O(e,i),t&&t.A.l||wO(e,i)}}function wO(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Fee(t,n)}function Tj(e,t){var n=e[lo];return(n?l_(n):e)[t]}function upe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Fv(e){e.P||(e.P=!0,e.l&&Fv(e.l))}function Cj(e){e.o||(e.o=Lee(e.t))}function VH(e,t,n){var r=Oee(t)?Qm("MapSet").F(t,n):Mee(t)?Qm("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:UH(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=K4;o&&(u=[a],l=ik);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Qm("ES5").J(t,n);return(n?n.A:UH()).p.push(r),r}function MBt(e){return Db(e)||f0(22,e),function t(n){if(!C1(n))return n;var r,i=n[lo],s=gC(n);if(i){if(!i.P&&(i.i<4||!Qm("ES5").K(i)))return i.t;i.I=!0,r=lpe(n,s),i.I=!1}else r=lpe(n,s);return bw(r,function(o,a){i&&PBt(i.t,o)===a||s5e(r,o,t(a))}),s===3?new Set(r):r}(e)}function lpe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Lee(e)}function LBt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[lo];return K4.get(u,s)},set:function(u){var l=this[lo];K4.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][lo];if(!a.P)switch(a.i){case 5:r(a)&&Fv(a);break;case 4:n(a)&&Fv(a)}}}function n(s){for(var o=s.t,a=s.k,u=sS(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==lo){var f=o[c];if(f===void 0&&!iS(o,c))return!0;var d=a[c],h=d&&d[lo];if(h?h.t!==f:!o5e(d,f))return!0}}var p=!!o[lo];return u.length!==sS(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};DBt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=u5e(f);delete p[lo];for(var m=sS(p),g=0;g<m.length;g++){var b=m[g];p[b]=e(b,c||!!p[b].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:UH(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,lo,{value:l,writable:!0}),u},S:function(s,o,a){a?Db(o)&&o[lo].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[lo];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)bw(d,function(x){x!==lo&&(f[x]!==void 0||iS(f,x)?h[x]||u(d[x]):(h[x]=!0,Fv(c)))}),bw(f,function(x){d[x]!==void 0||iS(d,x)||(h[x]=!1,Fv(c))});else if(p===5){if(r(c)&&(Fv(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var b=Math.min(d.length,f.length),y=0;y<b;y++)d.hasOwnProperty(y)||(h[y]=!0),h[y]===void 0&&u(d[y])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var cpe,Y4,Bee=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",FBt=typeof Map<"u",$Bt=typeof Set<"u",fpe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",a5e=Bee?Symbol.for("immer-nothing"):((cpe={})["immer-nothing"]=!0,cpe),dpe=Bee?Symbol.for("immer-draftable"):"__$immer_draftable",lo=Bee?Symbol.for("immer-state"):"__$immer_state",BBt=""+Object.prototype.constructor,sS=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,u5e=Object.getOwnPropertyDescriptors||function(e){var t={};return sS(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},HH={},K4={get:function(e,t){if(t===lo)return e;var n=l_(e);if(!iS(n,t))return function(i,s,o){var a,u=upe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!C1(r)?r:r===Tj(e.t,t)?(Cj(e),e.o[t]=VH(e.A.h,r,e)):r},has:function(e,t){return t in l_(e)},ownKeys:function(e){return Reflect.ownKeys(l_(e))},set:function(e,t,n){var r=upe(l_(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Tj(l_(e),t),s=i==null?void 0:i[lo];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(o5e(n,i)&&(n!==void 0||iS(e.t,t)))return!0;Cj(e),Fv(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return Tj(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Cj(e),Fv(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=l_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){f0(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){f0(12)}},ik={};bw(K4,function(e,t){ik[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ik.deleteProperty=function(e,t){return ik.set.call(this,e,t,void 0)},ik.set=function(e,t,n){return K4.set.call(this,e[0],t,n,e[0])};var jBt=function(){function e(n){var r=this;this.O=fpe,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var b=arguments.length,y=Array(b>1?b-1:0),x=1;x<b;x++)y[x-1]=arguments[x];return u.produce(m,function(w){var S;return(S=s).call.apply(S,[g,w].concat(y))})}}var l;if(typeof s!="function"&&f0(6),o!==void 0&&typeof o!="function"&&f0(7),C1(i)){var c=ope(r),f=VH(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?xO(c):zH(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return Ej(c,o),Sj(m,c)},function(m){throw xO(c),m}):(Ej(c,o),Sj(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===a5e&&(l=void 0),r.D&&Fee(l,!0),o){var h=[],p=[];Qm("Patches").M(i,l,h,p),o(h,p)}return l}f0(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){C1(n)||f0(8),Db(n)&&(n=MBt(n));var r=ope(this),i=VH(this,n,void 0);return i[lo].C=!0,zH(r),i},t.finishDraft=function(n,r){var i=n&&n[lo],s=i.A;return Ej(s,r),Sj(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!fpe&&f0(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Qm("Patches").$;return Db(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),ph=new jBt,l5e=ph.produce;ph.produceWithPatches.bind(ph);ph.setAutoFreeze.bind(ph);ph.setUseProxies.bind(ph);ph.applyPatches.bind(ph);ph.createDraft.bind(ph);ph.finishDraft.bind(ph);function X4(e){"@babel/helpers - typeof";return X4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X4(e)}function UBt(e,t){if(X4(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(X4(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zBt(e){var t=UBt(e,"string");return X4(t)=="symbol"?t:t+""}function VBt(e,t,n){return(t=zBt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hpe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ppe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hpe(Object(n),!0).forEach(function(r){VBt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hpe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ql(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var mpe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Aj=function(){return Math.random().toString(36).substring(7).split("").join(".")},EO={INIT:"@@redux/INIT"+Aj(),REPLACE:"@@redux/REPLACE"+Aj(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Aj()}};function HBt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function c5e(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ql(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ql(1));return n(c5e)(e,t)}if(typeof e!="function")throw new Error(Ql(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Ql(3));return s}function f(m){if(typeof m!="function")throw new Error(Ql(4));if(u)throw new Error(Ql(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(Ql(6));g=!1,l();var y=a.indexOf(m);a.splice(y,1),o=null}}}function d(m){if(!HBt(m))throw new Error(Ql(7));if(typeof m.type>"u")throw new Error(Ql(8));if(u)throw new Error(Ql(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,b=0;b<g.length;b++){var y=g[b];y()}return m}function h(m){if(typeof m!="function")throw new Error(Ql(10));i=m,d({type:EO.REPLACE})}function p(){var m,g=f;return m={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(Ql(11));function x(){y.next&&y.next(c())}x();var w=g(x);return{unsubscribe:w}}},m[mpe]=function(){return this},m}return d({type:EO.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[mpe]=p,r}function qBt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:EO.INIT});if(typeof r>"u")throw new Error(Ql(12));if(typeof n(void 0,{type:EO.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ql(13))})}function WBt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{qBt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(Ql(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function SO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function GBt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Ql(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=SO.apply(void 0,a)(i.dispatch),ppe(ppe({},i),{},{dispatch:s})}}}function f5e(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var qH=f5e();qH.withExtraArgument=f5e;var d5e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),RI=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},xw=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},YBt=Object.defineProperty,KBt=Object.defineProperties,XBt=Object.getOwnPropertyDescriptors,gpe=Object.getOwnPropertySymbols,QBt=Object.prototype.hasOwnProperty,JBt=Object.prototype.propertyIsEnumerable,ype=function(e,t,n){return t in e?YBt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ob=function(e,t){for(var n in t||(t={}))QBt.call(t,n)&&ype(e,n,t[n]);if(gpe)for(var r=0,i=gpe(t);r<i.length;r++){var n=i[r];JBt.call(t,n)&&ype(e,n,t[n])}return e},kj=function(e,t){return KBt(e,XBt(t))},II=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},ZBt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?SO:SO.apply(null,arguments)};function h5e(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var ejt=function(e){return e&&typeof e.match=="function"};function Jm(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return ob(ob({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function tjt(e){return h5e(e)&&"type"in e}var njt=function(e){d5e(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,xw([void 0],n[0].concat(this)))):new(t.bind.apply(t,xw([void 0],n.concat(this))))},t}(Array),rjt=function(e){d5e(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,xw([void 0],n[0].concat(this)))):new(t.bind.apply(t,xw([void 0],n.concat(this))))},t}(Array);function WH(e){return C1(e)?l5e(e,function(){}):e}function ijt(e){return typeof e=="boolean"}function sjt(){return function(t){return ojt(t)}}function ojt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new njt;return n&&(ijt(n)?r.push(qH):r.push(qH.withExtraArgument(n.extraArgument))),r}function ajt(e){var t=sjt(),n=e,r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(h5e(i))h=WBt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=GBt.apply(void 0,p),g=SO;u&&(g=ZBt(ob({trace:!1},typeof u=="object"&&u)));var b=new rjt(m),y=b;Array.isArray(d)?y=xw([m],d):typeof d=="function"&&(y=d(b));var x=g.apply(void 0,y);return c5e(h,c,x)}function p5e(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function ujt(e){return typeof e=="function"}function ljt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?p5e(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(ujt(e))u=function(){return WH(e())};else{var l=WH(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=xw([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(Db(p)){var g=p,b=m(g,d);return b===void 0?p:b}else{if(C1(p))return l5e(p,function(y){return m(y,d)});var b=m(p,d);if(b===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}return p},f)}return c.getInitialState=u,c}function cjt(e,t){return e+"/"+t}function fjt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n=typeof e.initialState=="function"?e.initialState:WH(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=cjt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Jm(d,p):Jm(d)});function u(){var c=typeof e.extraReducers=="function"?p5e(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,b=ob(ob({},d),o);return ljt(n,function(y){for(var x in b)y.addCase(x,b[x]);for(var w=0,S=p;w<S.length;w++){var C=S[w];y.addMatcher(C.matcher,C.reducer)}g&&y.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var djt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",m5e=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=djt[Math.random()*64|0];return t},hjt=["name","message","stack","code"],Rj=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),vpe=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),pjt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=hjt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Jm(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:kj(ob({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Jm(t+"/pending",function(l,c,f){return{payload:void 0,meta:kj(ob({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Jm(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||pjt)(l||"Rejected"),meta:kj(ob({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):m5e(),p=new a,m;function g(y){m=y,p.abort()}var b=function(){return II(this,null,function(){var y,x,w,S,C,R,I;return RI(this,function(O){switch(O.label){case 0:return O.trys.push([0,4,,5]),S=(y=r==null?void 0:r.condition)==null?void 0:y.call(r,l,{getState:f,extra:d}),gjt(S)?[4,S]:[3,2];case 1:S=O.sent(),O.label=2;case 2:if(S===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return C=new Promise(function(M,L){return p.signal.addEventListener("abort",function(){return L({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(x=r==null?void 0:r.getPendingMeta)==null?void 0:x.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([C,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(M,L){return new Rj(M,L)},fulfillWithValue:function(M,L){return new vpe(M,L)}})).then(function(M){if(M instanceof Rj)throw M;return M instanceof vpe?i(M.payload,h,l,M.meta):i(M,h,l)})])];case 3:return w=O.sent(),[3,5];case 4:return R=O.sent(),w=R instanceof Rj?o(null,h,l,R.payload,R.meta):o(R,h,l),[3,5];case 5:return I=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,I||c(w),[2,w]}})})}();return Object.assign(b,{abort:g,requestId:h,arg:l,unwrap:function(){return b.then(mjt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function mjt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function gjt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var yjt=function(e,t){return ejt(e)?e.match(t):e(t)};function bpe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return yjt(r,n)})}}var jee=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},GH=function(){},g5e=function(e,t){return t===void 0&&(t=GH),e.catch(t),e},y5e=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},oS=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},vjt="task",v5e="listener",b5e="completed",Uee="cancelled",bjt="task-"+Uee,xjt="task-"+b5e,x5e=v5e+"-"+Uee,_jt=v5e+"-"+b5e,p7=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=vjt+" "+Uee+" (reason: "+t+")"}return e}(),aS=function(e){if(e.aborted)throw new p7(e.reason)};function _5e(e,t){var n=GH;return new Promise(function(r,i){var s=function(){return i(new p7(e.reason))};if(e.aborted){s();return}n=y5e(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=GH})}var wjt=function(e,t){return II(void 0,null,function(){var n,r;return RI(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof p7?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},TO=function(e){return function(t){return g5e(_5e(e,t).then(function(n){return aS(e),n}))}},w5e=function(e){var t=TO(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},Ejt=Object.assign,xpe={},PI="listenerMiddleware",Sjt=function(e,t){var n=function(r){return y5e(e,function(){return oS(r,e.reason)})};return function(r,i){jee(r,"taskExecutor");var s=new AbortController;n(s);var o=wjt(function(){return II(void 0,null,function(){var a;return RI(this,function(u){switch(u.label){case 0:return aS(e),aS(s.signal),[4,r({pause:TO(s.signal),delay:w5e(s.signal),signal:s.signal})];case 1:return a=u.sent(),aS(s.signal),[2,a]}})})},function(){return oS(s,xjt)});return i!=null&&i.autoJoin&&t.push(o),{result:TO(e)(o),cancel:function(){oS(s,bjt)}}}},Tjt=function(e,t){var n=function(r,i){return II(void 0,null,function(){var s,o,a,u;return RI(this,function(l){switch(l.label){case 0:aS(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,_5e(t,Promise.race(a))];case 2:return u=l.sent(),aS(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return g5e(n(r,i))}},E5e=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Jm(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return jee(s,"options.listener"),{predicate:i,type:t,effect:s}},Cjt=function(e){var t=E5e(e),n=t.type,r=t.predicate,i=t.effect,s=m5e(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},YH=function(e){e.pending.forEach(function(t){oS(t,x5e)})},Ajt=function(e){return function(){e.forEach(YH),e.clear()}},_pe=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},kjt=Jm(PI+"/add"),Rjt=Jm(PI+"/removeAll"),Ijt=Jm(PI+"/remove"),Pjt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,xw([PI+"/error"],e))};function Njt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?Pjt:i;jee(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&YH(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=Cjt(h)),o(p)},l=function(h){var p=E5e(h),m=p.type,g=p.effect,b=p.predicate,y=a(function(x){var w=typeof m=="string"?x.type===m:x.predicate===b;return w&&x.effect===g});return y&&(y.unsubscribe(),h.cancelActive&&YH(y)),!!y},c=function(h,p,m,g){return II(t,null,function(){var b,y,x,w;return RI(this,function(S){switch(S.label){case 0:b=new AbortController,y=Tjt(u,b.signal),x=[],S.label=1;case 1:return S.trys.push([1,3,4,6]),h.pending.add(b),[4,Promise.resolve(h.effect(p,Ejt({},m,{getOriginalState:g,condition:function(C,R){return y(C,R).then(Boolean)},take:y,delay:w5e(b.signal),pause:TO(b.signal),extra:r,signal:b.signal,fork:Sjt(b.signal,x),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(C,R,I){C!==b&&(oS(C,x5e),I.delete(C))})}})))];case 2:return S.sent(),[3,6];case 3:return w=S.sent(),w instanceof p7||_pe(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(x)];case 5:return S.sent(),oS(b,_jt),h.pending.delete(b),[7];case 6:return[2]}})})},f=Ajt(n),d=function(h){return function(p){return function(m){if(!tjt(m))return p(m);if(kjt.match(m))return u(m.payload);if(Rjt.match(m)){f();return}if(Ijt.match(m))return l(m.payload);var g=h.getState(),b=function(){if(g===xpe)throw new Error(PI+": getOriginalState can only be called synchronously");return g},y;try{if(y=p(m),n.size>0)for(var x=h.getState(),w=Array.from(n.values()),S=0,C=w;S<C.length;S++){var R=C[S],I=!1;try{I=R.predicate(m,x,g)}catch(O){I=!1,_pe(s,O,{raisedBy:"predicate"})}I&&c(R,m,h,b)}}finally{g=xpe}return y}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var wpe;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);LBt();function Djt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let k5;const Ojt=new Uint8Array(16);function Mjt(){if(!k5&&(k5=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!k5))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return k5(Ojt)}const cl=[];for(let e=0;e<256;++e)cl.push((e+256).toString(16).slice(1));function Ljt(e,t=0){return(cl[e[t+0]]+cl[e[t+1]]+cl[e[t+2]]+cl[e[t+3]]+"-"+cl[e[t+4]]+cl[e[t+5]]+"-"+cl[e[t+6]]+cl[e[t+7]]+"-"+cl[e[t+8]]+cl[e[t+9]]+"-"+cl[e[t+10]]+cl[e[t+11]]+cl[e[t+12]]+cl[e[t+13]]+cl[e[t+14]]+cl[e[t+15]]).toLowerCase()}const Fjt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Epe={randomUUID:Fjt};function Spe(e,t,n){if(Epe.randomUUID&&!e)return Epe.randomUUID();e=e||{};const r=e.random||(e.rng||Mjt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Ljt(r)}class Zm{static get(){let t=Spe();for(;this.ids.has(t);)t=Spe();return this.ids.set(t,!0),t}}Zm.ids=new Map;function S0(e){return"parent"in e}function $jt(e){return!S0(e)}function Bjt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Zm.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:Zm.get(),createdOn:Date.now(),val:r}]:[];return{id:Zm.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function jjt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:Zm.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:Zm.get(),createdOn:Date.now(),val:s}]:[];return{id:Zm.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Ho(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=Kjt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function _w(e){return!!e&&!!e[mh]}function Ob(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Xjt}(e)||Array.isArray(e)||!!e[jk]||!!(!((t=e.constructor)===null||t===void 0)&&t[jk])||m7(e)||g7(e))}function aT(e,t,n){n===void 0&&(n=!1),Mb(e)===0?(n?Object.keys:Gee)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Mb(e){var t=e[mh];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:m7(e)?2:g7(e)?3:0}function Q4(e,t){return Mb(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function KN(e,t){return Mb(e)===2?e.get(t):e[t]}function S5e(e,t,n){var r=Mb(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function Ujt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function m7(e){return Gjt&&e instanceof Map}function g7(e){return Yjt&&e instanceof Set}function c_(e){return e.o||e.t}function zee(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Qjt(e);delete t[mh];for(var n=Gee(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Vee(e,t){return t===void 0&&(t=!1),Hee(e)||_w(e)||!Ob(e)||(Mb(e)>1&&(e.set=e.add=e.clear=e.delete=zjt),Object.freeze(e),t&&aT(e,function(n,r){return Vee(r,!0)},!0)),e}function zjt(){Ho(2)}function Hee(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function eg(e){var t=JH[e];return t||Ho(18,e),t}function Vjt(e,t){JH[e]||(JH[e]=t)}function Tpe(){return{}.NODE_ENV==="production"||uT||Ho(0),uT}function Ij(e,t){t&&(eg("Patches"),e.u=[],e.s=[],e.v=t)}function CO(e){KH(e),e.p.forEach(Hjt),e.p=null}function KH(e){e===uT&&(uT=e.l)}function Cpe(e){return uT={p:[],l:uT,h:e,m:!0,_:0}}function Hjt(e){var t=e[mh];t.i===0||t.i===1?t.j():t.O=!0}function Pj(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||eg("ES5").S(t,e,r),r?(n[mh].P&&(CO(t),Ho(4)),Ob(e)&&(e=AO(t,e),t.l||kO(t,e)),t.u&&eg("Patches").M(n[mh].t,e,t.u,t.s)):e=AO(t,n,[]),CO(t),t.u&&t.v(t.u,t.s),e!==Wee?e:void 0}function AO(e,t,n){if(Hee(t))return t;var r=t[mh];if(!r)return aT(t,function(s,o){return Ape(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return kO(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=zee(r.k):r.o;aT(r.i===3?new Set(i):i,function(s,o){return Ape(e,r,i,s,o,n)}),kO(e,i,!1),n&&e.u&&eg("Patches").R(r,n,e.u,e.s)}return r.o}function Ape(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Ho(5),_w(i)){var o=AO(e,i,s&&t&&t.i!==3&&!Q4(t.D,r)?s.concat(r):void 0);if(S5e(n,r,o),!_w(o))return;e.m=!1}if(Ob(i)&&!Hee(i)){if(!e.h.F&&e._<1)return;AO(e,i),t&&t.A.l||kO(e,i)}}function kO(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&Vee(t,n)}function Nj(e,t){var n=e[mh];return(n?c_(n):e)[t]}function kpe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function XH(e){e.P||(e.P=!0,e.l&&XH(e.l))}function Dj(e){e.o||(e.o=zee(e.t))}function QH(e,t,n){var r=m7(t)?eg("MapSet").N(t,n):g7(t)?eg("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Tpe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=ZH;o&&(u=[a],l=sk);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):eg("ES5").J(t,n);return(n?n.A:Tpe()).p.push(r),r}function qjt(e){return _w(e)||Ho(22,e),function t(n){if(!Ob(n))return n;var r,i=n[mh],s=Mb(n);if(i){if(!i.P&&(i.i<4||!eg("ES5").K(i)))return i.t;i.I=!0,r=Rpe(n,s),i.I=!1}else r=Rpe(n,s);return aT(r,function(o,a){i&&KN(i.t,o)===a||S5e(r,o,t(a))}),s===3?new Set(r):r}(e)}function Rpe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return zee(e)}function Wjt(){function e(r){if(!Ob(r))return r;if(Array.isArray(r))return r.map(e);if(m7(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(g7(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return Q4(r,jk)&&(i[jk]=r[jk]),i}function t(r){return _w(r)?e(r):r}var n="add";Vjt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=Mb(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Ho(24),typeof u=="function"&&f==="prototype"&&Ho(24),typeof(u=KN(u,f))!="object"&&Ho(15,o.join("/"))}var d=Mb(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Ho(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Ho(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;aT(a.D,function(h,p){var m=KN(f,h),g=KN(d,h),b=p?Q4(f,h)?"replace":n:"remove";if(m!==g||b!=="replace"){var y=u.concat(h);l.push(b==="remove"?{op:b,path:y}:{op:b,path:y,value:g}),c.push(b===n?{op:"remove",path:y}:b==="remove"?{op:n,path:y,value:t(m)}:{op:"replace",path:y,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var b=u.concat([g]);l.push({op:"replace",path:b,value:t(h[g])}),c.push({op:"replace",path:b,value:t(f[g])})}for(var y=f.length;y<h.length;y++){var x=u.concat([y]);l.push({op:n,path:x,value:t(h[y])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===Wee?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Ipe,uT,qee=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Gjt=typeof Map<"u",Yjt=typeof Set<"u",Ppe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Wee=qee?Symbol.for("immer-nothing"):((Ipe={})["immer-nothing"]=!0,Ipe),jk=qee?Symbol.for("immer-draftable"):"__$immer_draftable",mh=qee?Symbol.for("immer-state"):"__$immer_state",Kjt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},Xjt=""+Object.prototype.constructor,Gee=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Qjt=Object.getOwnPropertyDescriptors||function(e){var t={};return Gee(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},JH={},ZH={get:function(e,t){if(t===mh)return e;var n=c_(e);if(!Q4(n,t))return function(i,s,o){var a,u=kpe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Ob(r)?r:r===Nj(e.t,t)?(Dj(e),e.o[t]=QH(e.A.h,r,e)):r},has:function(e,t){return t in c_(e)},ownKeys:function(e){return Reflect.ownKeys(c_(e))},set:function(e,t,n){var r=kpe(c_(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Nj(c_(e),t),s=i==null?void 0:i[mh];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Ujt(n,i)&&(n!==void 0||Q4(e.t,t)))return!0;Dj(e),XH(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return Nj(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,Dj(e),XH(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=c_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Ho(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ho(12)}},sk={};aT(ZH,function(e,t){sk[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),sk.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Ho(13),sk.set.call(this,e,t,void 0)},sk.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Ho(14),ZH.set.call(this,e[0],t,n,e[0])};var Jjt=function(){function e(n){var r=this;this.g=Ppe,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var b=arguments.length,y=Array(b>1?b-1:0),x=1;x<b;x++)y[x-1]=arguments[x];return u.produce(m,function(w){var S;return(S=s).call.apply(S,[g,w].concat(y))})}}var l;if(typeof s!="function"&&Ho(6),o!==void 0&&typeof o!="function"&&Ho(7),Ob(i)){var c=Cpe(r),f=QH(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?CO(c):KH(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return Ij(c,o),Pj(m,c)},function(m){throw CO(c),m}):(Ij(c,o),Pj(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===Wee&&(l=void 0),r.F&&Vee(l,!0),o){var h=[],p=[];eg("Patches").M(i,l,h,p),o(h,p)}return l}Ho(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Ob(n)||Ho(8),_w(n)&&(n=qjt(n));var r=Cpe(this),i=QH(this,n,void 0);return i[mh].C=!0,KH(r),i},t.finishDraft=function(n,r){var i=n&&n[mh];({}).NODE_ENV!=="production"&&(i&&i.C||Ho(9),i.I&&Ho(10));var s=i.A;return Ij(s,r),Pj(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Ppe&&Ho(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=eg("Patches").$;return _w(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),gh=new Jjt,Zjt=gh.produce;gh.produceWithPatches.bind(gh);gh.setAutoFreeze.bind(gh);gh.setUseProxies.bind(gh);gh.applyPatches.bind(gh);gh.createDraft.bind(gh);gh.finishDraft.bind(gh);function eUt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=Bjt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return fjt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Zm.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Zm.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function tUt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=eUt(e),s=Njt();s.startListening({matcher:bpe(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=bpe(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=ajt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:Zm.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var nUt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),rUt=Object.prototype.hasOwnProperty;function eq(e,t){return rUt.call(e,t)}function tq(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)eq(e,i)&&r.push(i);return r}function ed(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function nq(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function f_(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function T5e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function rq(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(rq(e[t]))return!0}else if(typeof e=="object"){for(var r=tq(e),i=r.length,s=0;s<i;s++)if(rq(e[r[s]]))return!0}}return!1}function Npe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var C5e=function(e){nUt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Npe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Npe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Vo=C5e,iUt=ed,ME={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=RO(n,this.path);r&&(r=ed(r));var i=V_(n,{op:"remove",path:this.from}).removed;return V_(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=RO(n,this.from);return V_(n,{op:"add",path:this.path,value:ed(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:J4(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},sUt={add:function(e,t,n){return nq(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:ME.move,copy:ME.copy,test:ME.test,_get:ME._get};function RO(e,t){if(t=="")return e;var n={op:"_get",path:t};return V_(e,n),n.value}function V_(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):IO(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=RO(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=J4(e,t.value),o.test===!1)throw new Vo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Vo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=ed(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=IO;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=T5e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!nq(h))throw new Vo("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);nq(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Vo("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=sUt[t.op].call(t,l,h,e);if(o.test===!1)throw new Vo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=ME[t.op].call(t,l,h,e);if(o.test===!1)throw new Vo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Vo("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function y7(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Vo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=ed(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=V_(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function oUt(e,t,n){var r=V_(e,t);if(r.test===!1)throw new Vo("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function IO(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Vo("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(ME[e.op]){if(typeof e.path!="string")throw new Vo("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Vo('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Vo("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Vo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&rq(e.value))throw new Vo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Vo("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Vo("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=A5e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Vo("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Vo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function A5e(e,t,n){try{if(!Array.isArray(e))throw new Vo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)y7(ed(t),ed(e),n||!0);else{n=n||IO;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Vo)return i;throw i}}function J4(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!J4(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!J4(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const aUt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Vo,_areEquals:J4,applyOperation:V_,applyPatch:y7,applyReducer:oUt,deepClone:iUt,getValueByPointer:RO,validate:A5e,validator:IO},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Yee=new WeakMap,uUt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),lUt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function cUt(e){return Yee.get(e)}function fUt(e,t){return e.observers.get(t)}function dUt(e,t){e.observers.delete(t.callback)}function hUt(e,t){t.unobserve()}function pUt(e,t){var n=[],r,i=cUt(e);if(!i)i=new uUt(e),Yee.set(e,i);else{var s=fUt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=ed(e),t){r.callback=t,r.next=null;var o=function(){iq(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){iq(r),clearTimeout(r.next),dUt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new lUt(t,r)),r}function iq(e,t){t===void 0&&(t=!1);var n=Yee.get(e.object);Kee(n.value,e.object,e.patches,"",t),e.patches.length&&y7(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Kee(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=tq(t),o=tq(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(eq(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Kee(c,f,n,r+"/"+f_(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+f_(l),value:ed(c)}),n.push({op:"replace",path:r+"/"+f_(l),value:ed(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+f_(l),value:ed(c)}),n.push({op:"remove",path:r+"/"+f_(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!eq(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+f_(l),value:ed(t[l])})}}}function k5e(e,t,n){n===void 0&&(n=!1);var r=[];return Kee(e,t,r,"",n),r}const mUt=Object.freeze(Object.defineProperty({__proto__:null,compare:k5e,generate:iq,observe:pUt,unobserve:hUt},Symbol.toStringTag,{value:"Module"}));Object.assign({},aUt,mUt,{JsonPatchError:C5e,deepClone:ed,escapePathComponent:f_,unescapePathComponent:T5e});var ok=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(ok||{});function XN(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=I5e(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=XN(i,t);return y7(a,ed(o),!0,!1).newDocument}function gUt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function R5e({registry:e,initialState:t}){let n=!1;const r=Djt(),i=tUt(t);function s(c){return i.backend.nodes[c]}r.listen(ok.TRAVERSAL_START,()=>{n=!0}),r.listen(ok.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return XN(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const b=XN(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const y=k5e(b,f);if(gUt(f,y)==="checkpoint")g={type:"checkpoint",val:f};else{const x=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:y,checkpointRef:x}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=jjt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=XN(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(ok.TRAVERSAL_START);const f=I5e(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);vUt(p,m)?S0(p)&&d.push(...p.sideEffects.undo):S0(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(ok.TRAVERSAL_END)},undo(){const{current:c}=i;return S0(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return P5e(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function yUt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;S0(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)S0(r)&&(r=n[r.parent]),S0(i)&&(i=n[i.parent]);return r.id}function I5e(e,t,n){const r=yUt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),S0(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),S0(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function vUt(e,t){if(S0(e)&&e.parent===t.id)return!0;if(S0(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function P5e(e,t){return{...e,children:e.children.map(n=>P5e(t[n],t)),name:`${e.label}`}}Wjt();function bUt(e){return e.length===2?Zjt(e):e}class v7{static create(){return new v7}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:bUt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Jm(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}function xUt({currentConfig:e,provState:t}){const n=pp(),r=B0(),i=bc(),[s,o]=U.useState(null),[a,u]=U.useState(!0),{updateResponseBlockValidation:l,setreactiveAnswers:c}=Al(),[f,d]=U.useState(),{actions:h,trrack:p}=U.useMemo(()=>{const x=v7.create(),w=x.register("signal",(C,R)=>(C.event=R,C)),S=R5e({registry:x,initialState:{event:{}}});return{actions:{signalAction:w},trrack:S}},[]),m=U.useCallback(({status:x,provenanceGraph:w,answers:S})=>{i(l({location:"sidebar",identifier:`${r}_${n}`,status:x,values:S,provenanceGraph:w})),i(c(S))},[r,n,i,c,l]),g=U.useCallback((x,w)=>{p.apply(x,h.signalAction({key:x,value:w}))},[h,p]),b=U.useCallback((x,w)=>{const{responseId:S,response:C}=w;m({status:!0,provenanceGraph:p.graph.backend,answers:{[S]:C}})},[m,p.graph.backend]),y=U.useMemo(()=>{var w;const x=(w=s==null?void 0:s.config)==null?void 0:w.signals;return x?x.reduce((S,C)=>(C.name==="revisitAnswer"?S[C.name]=b:S[C.name]=g,S),{}):{}},[b,g,s]);return U.useEffect(()=>{async function x(){u(!0);let w;"path"in e?w=await glt(e.path):w=e.config,w!==void 0&&o(w),u(!1)}e&&x()},[e]),U.useEffect(()=>{f&&t&&t.event&&t.event.key&&f.signal(t.event.key,t.event.value).run()},[f,t]),a?k.jsx("div",{children:"Loading..."}):"path"in e&&!s?k.jsx(yb,{path:e.path}):s?k.jsx(Dee,{spec:structuredClone(s),signalListeners:y,onNewView:x=>d(x)}):k.jsx("div",{children:"Failed to load vega config"})}function _Ut(){const e=v1(),t=pp(),n=B0()||"Notfound",r=e.components[n],{storageEngine:i}=Yo(),s=U.useRef(null),[o,a]=U.useState(null),{setIsRecording:u}=Al(),l=Ai(O=>O.analysisProvState),c=zT(),f=WY(),d=Ai(O=>O.sequence),[h]=D1(),p=Ai(O=>O.participantId),m=U.useMemo(()=>h.get("participantId"),[h]);LSe();const g=bc(),{setAlertModal:b}=Al();U.useEffect(()=>{(i==null?void 0:i.getEngine())!=="localStorage"&&g(b({show:!0,message:"There was an issue connecting to the localStorage database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[b,i,g]),U.useEffect(()=>{!e||!e.uiConfig.recordStudyAudio||!i||i.getEngine()!=="firebase"||f&&f.endTime>0||c||(s.current&&o&&i.saveAudio(s.current,o),s.current&&(s.current.stream.getTracks().forEach(O=>{var M;O.stop(),(M=s.current)==null||M.stream.removeTrack(O)}),s.current.stream.getAudioTracks().forEach(O=>{var M;O.stop(),(M=s.current)==null||M.stream.removeTrack(O)}),s.current.stop(),s.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(a(null),g(u(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(O=>{const M=new MediaRecorder(O);s.current=M,s.current.start(),g(u(!0)),a(`${n}_${t}`)}))},[n,t]);const[y,x]=U.useState([]),w=U.useRef([]);U.useEffect(()=>{async function O(){var H;const L=((H=jY(d,t))==null?void 0:H.map(D=>D.currentBlock.id).filter(D=>D!==void 0))||[];x(L)}async function M(){const L=w.current;JSON.stringify(L)!==JSON.stringify(y)&&y.length>0&&i&&await i.addParticipantTags(y),w.current=y}O().then(M)},[t,i,d]);const S=U.useMemo(()=>{var O;return n!=="end"&&!n.startsWith("__")&&YT(r)&&e.baseComponents?qY({},(O=e.baseComponents)==null?void 0:O[r.baseComponent],r):r},[r,e]);if(n==="end")return k.jsx(Nbt,{});if(n==="__trainingFailed")return k.jsx(Dbt,{});if(n==="__timedOut")return k.jsx(Obt,{});if(n==="Notfound")return k.jsx(yb,{email:e.uiConfig.contactEmail});if(m&&p!==m)return k.jsx(l1,{style:{height:"80vh"},children:k.jsx(xg,{})});const C=S.instruction||"",{instructionLocation:R}=S,I=e.uiConfig.sidebar&&(R==="sidebar"||R===void 0);return k.jsxs(k.Fragment,{children:[R==="aboveStimulus"&&k.jsx(dc,{text:C}),k.jsx($8,{status:f,config:S,location:"aboveStimulus"},`${t}-above-response-block`),k.jsxs(U.Suspense,{fallback:k.jsx("div",{children:"Loading..."}),children:[S.type==="markdown"&&k.jsx(_bt,{currentConfig:S}),S.type==="website"&&k.jsx(mlt,{currentConfig:S}),S.type==="image"&&k.jsx(vlt,{currentConfig:S}),S.type==="react-component"&&k.jsx(xbt,{currentConfig:S,provState:l}),S.type==="vega"&&k.jsx(xUt,{currentConfig:S,provState:l})]},`${t}-stimulus`),(R==="belowStimulus"||R===void 0&&!I)&&k.jsx(dc,{text:C}),k.jsx($8,{status:f,config:S,location:"belowStimulus"},`${t}-below-response-block`)]})}function N5e(e){const[t]=D1();return k.jsx(iG,{...e,to:{pathname:e.to,search:t.toString()}})}var Oj,Dpe;function wUt(){if(Dpe)return Oj;Dpe=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,u=typeof ya=="object"&&ya&&ya.Object===Object&&ya,l=typeof self=="object"&&self&&self.Object===Object&&self,c=u||l||Function("return this")(),f=Object.prototype,d=f.toString,h=Math.max,p=Math.min,m=function(){return c.Date.now()};function g(S,C,R){var I,O,M,L,H,D,B=0,z=!1,G=!1,Z=!0;if(typeof S!="function")throw new TypeError(e);C=w(C)||0,b(R)&&(z=!!R.leading,G="maxWait"in R,M=G?h(w(R.maxWait)||0,C):M,Z="trailing"in R?!!R.trailing:Z);function ne(ce){var he=I,Ee=O;return I=O=void 0,B=ce,L=S.apply(Ee,he),L}function ue(ce){return B=ce,H=setTimeout(te,C),z?ne(ce):L}function X(ce){var he=ce-D,Ee=ce-B,Ae=C-he;return G?p(Ae,M-Ee):Ae}function q(ce){var he=ce-D,Ee=ce-B;return D===void 0||he>=C||he<0||G&&Ee>=M}function te(){var ce=m();if(q(ce))return W(ce);H=setTimeout(te,X(ce))}function W(ce){return H=void 0,Z&&I?ne(ce):(I=O=void 0,L)}function ee(){H!==void 0&&clearTimeout(H),B=0,I=D=O=H=void 0}function oe(){return H===void 0?L:W(m())}function pe(){var ce=m(),he=q(ce);if(I=arguments,O=this,D=ce,he){if(H===void 0)return ue(D);if(G)return H=setTimeout(te,C),ne(D)}return H===void 0&&(H=setTimeout(te,C)),L}return pe.cancel=ee,pe.flush=oe,pe}function b(S){var C=typeof S;return!!S&&(C=="object"||C=="function")}function y(S){return!!S&&typeof S=="object"}function x(S){return typeof S=="symbol"||y(S)&&d.call(S)==n}function w(S){if(typeof S=="number")return S;if(x(S))return t;if(b(S)){var C=typeof S.valueOf=="function"?S.valueOf():S;S=b(C)?C+"":C}if(typeof S!="string")return S===0?S:+S;S=S.replace(r,"");var R=s.test(S);return R||o.test(S)?a(S.slice(2),R?2:8):i.test(S)?t:+S}return Oj=g,Oj}var EUt=wUt();const Sy=gc(EUt);function D5e(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=D5e(o,t,n,r),r.includes(o.orderPath))break}return i}function O5e(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=O5e(s,r)}}),n}function SUt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function TUt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=Uw(),c=F0(),f=pp(),[d,{close:h,open:p}]=fq(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?D5e(n,e,r,a.orderPath):-1,{trialId:b}=ig(),[y]=D1(),x=U.useMemo(()=>y.get("participantId"),[y]),w=b===e,S=s?f===g:f===`reviewer-${e}`,C=u?w:S,R=U.useCallback(()=>c(b?`./../${e}`:`./${e}`),[c,e,b]),O=u?R:()=>c(s?x?`/${l}/${u0(g)}?participantId=${x}`:`/${l}/${u0(g)}`:`/${l}/reviewer-${e}`),M=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,L=e.includes("$")&&M&&e.includes(M)?e.split(M).at(-1):e;return k.jsxs(wl,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[k.jsx(wl.Target,{children:k.jsx(Ue,{onMouseEnter:p,onMouseLeave:h,children:k.jsx(o9,{active:C,style:{lineHeight:"32px",height:"32px"},label:k.jsxs(Ue,{children:[i&&k.jsx(qze,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),e!==L&&k.jsx(sVe,{size:16,style:{marginRight:4,marginBottom:-2},color:"var(--mantine-color-blue-outline)"}),k.jsx(At,{size:"sm",span:C,fw:C?"700":void 0,display:"inline",children:L})]}),onClick:O,disabled:t})})}),m&&(m.description||m.meta)&&k.jsx(wl.Dropdown,{onMouseLeave:h,children:k.jsxs(Ue,{children:[m.description&&k.jsxs(Ue,{children:[k.jsx(At,{fw:900,display:"inline-block",mr:2,children:"Description:"}),k.jsx(At,{fw:400,component:"span",children:m.description})]}),m.meta&&k.jsxs(Ue,{children:[k.jsx(At,{fw:"900",component:"span",children:"Task Meta: "}),k.jsx(At,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})]})}function PO({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=Jy(e.components);return n&&r&&(o=SUt(Jy(e.components),Jy(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),k.jsx(k.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return k.jsx(TUt,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?k0(c).length-O5e(u,c):0,d=k0(u);return k.jsx(o9,{label:k.jsxs(Ue,{style:{opacity:f>0?1:.5},children:[k.jsx(At,{size:"sm",display:"inline",fw:700,children:u.id?u.id:u.order}),u.order==="random"||u.order==="latinSquare"?k.jsx(Ys,{label:u.order,position:"right",withArrow:!0,children:k.jsx(Vze,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}})}):null,r&&k.jsxs(v0,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&k.jsx(v0,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:k.jsx(Ue,{style:{borderLeft:"1px solid #e9ecef"},children:k.jsx(PO,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function M5e(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function Ope({text:e}){return k.jsx(Ys,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:k.jsx(lG,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function CUt(){const e=Ai(h=>h.sequence),t=Ai(h=>h.metadata),{toggleStudyBrowser:n}=Al(),r=v1(),i=bc(),s=Uw(),o=tG(`/${s}`),{storageEngine:a}=Yo(),u=zT(),l=U.useMemo(()=>{let h=Jy(r.sequence);return h=UY(h,"root"),h.components.push("end"),h},[r.sequence]),[c,f]=U.useState("participant"),d=U.useMemo(()=>c==="allTrials"||u,[c,u]);return k.jsxs(hs.Aside,{p:"0",children:[k.jsx(hs.Section,{p:"md",children:k.jsxs(An,{direction:"row",justify:"space-between",children:[k.jsx(At,{size:"md",fw:700,pt:3,children:"Study Browser"}),k.jsx(Ys,{label:"Go to the sequence of the next participant in the experiment. Sequences can be different between participants due to randomization, etc.",w:280,multiline:!0,disabled:d,children:k.jsx(Nn,{variant:"light",leftSection:k.jsx(cG,{size:14}),onClick:()=>M5e(a,r,t,o),size:"xs",disabled:d,children:"Next Participant"})}),k.jsx(Vb,{onClick:()=>i(n()),mt:1})]})}),k.jsx(hs.Section,{grow:!0,component:a1,p:"md",children:k.jsxs(ci,{value:c,onChange:f,children:[k.jsx(Ue,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:k.jsxs(ci.List,{grow:!0,children:[k.jsxs(ci.Tab,{value:"participant",children:["Participant View",k.jsx(Ope,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),k.jsxs(ci.Tab,{value:"allTrials",disabled:u,children:["All Trials View",k.jsx(Ope,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),k.jsx(ci.Panel,{value:"participant",children:k.jsx(PO,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),k.jsx(ci.Panel,{value:"allTrials",children:k.jsx(PO,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}const AUt=U.createContext(null);function rc(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let NI=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const R5={decode:function(e,t){return rc(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function L5e(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(L5e(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function Mpe(e,t,n){const r=L5e(e,t||{});return n==null||n.appendChild(r),r}var kUt=Object.freeze({__proto__:null,createElement:Mpe,default:Mpe});const RUt={fetchBlob:function(e,t,n){return rc(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){rc(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>rc(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>rc(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};class IUt extends NI{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return rc(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}class lT extends NI{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,s=n.clientY-r.top;return[i/r.width,s/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,s=n/r,o=(n+i)/r;this.emit("scroll",s,o,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const m=Date.now(),g=S=>{if(S.preventDefault(),S.stopPropagation(),u&&Date.now()-m<a)return;const C=S.clientX,R=S.clientY,I=C-d,O=R-h;if(p||Math.abs(I)>s||Math.abs(O)>s){const M=t.getBoundingClientRect(),{left:L,top:H}=M;p||(r==null||r(d-L,h-H),p=!0),n(I,O,C-L,R-H),d=C,h=R}},b=S=>{if(p){const C=S.clientX,R=S.clientY,I=t.getBoundingClientRect(),{left:O,top:M}=I;i==null||i(C-O,R-M)}l()},y=S=>{S.relatedTarget&&S.relatedTarget!==document.documentElement||b(S)},x=S=>{p&&(S.stopPropagation(),S.preventDefault())},w=S=>{p&&S.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",b),document.addEventListener("pointerout",y),document.addEventListener("pointercancel",y),document.addEventListener("touchmove",w,{passive:!1}),document.addEventListener("click",x,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",b),document.removeEventListener("pointerout",y),document.removeEventListener("pointercancel",y),document.removeEventListener("touchmove",w),setTimeout(()=>{document.removeEventListener("click",x,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=this.getPixelRatio(),d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let b=0,y=0,x=0;for(let w=0;w<=a;w++){const S=Math.round(w*m);if(S>b){const I=Math.round(y*c*i),O=I+Math.round(x*c*i)||1;let M=c-I;n.barAlign==="top"?M=0:n.barAlign==="bottom"&&(M=l-O),r[g](b*(d+h),M,d,O,p),b=S,y=0,x=0}const C=Math.abs(s[w]||0),R=Math.abs(o[w]||0);C>y&&(y=C),R>x&&(x=R)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const b=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,b),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,l=r/a;let c=Math.min(lT.MAX_CANVAS_WIDTH,u,l),f={};if(c===0)return;if(n.barWidth||n.barGap){const g=n.barWidth||.5,b=g+(n.barGap||g/2);c%b!=0&&(c=Math.floor(c/b)*b)}const d=g=>{if(g<0||g>=h||f[g])return;f[g]=!0;const b=g*c,y=Math.min(l-b,c);if(y<=0)return;const x=t.map(w=>{const S=Math.floor(b/l*w.length),C=Math.floor((b+y)/l*w.length);return w.slice(S,C)});this.renderSingleCanvas(x,n,y,i,b,s,o)},h=Math.ceil(l/c);if(!this.isScrollable){for(let g=0;g<h;g++)d(g);return}const p=this.scrollContainer.scrollLeft/l,m=Math.floor(p*h);if(d(m-1),d(m),d(m+1),h>1){const g=this.on("scroll",()=>{const{scrollLeft:b}=this.scrollContainer,y=Math.floor(b/l*h);Object.keys(f).length>lT.MAX_NODES&&(s.innerHTML="",o.innerHTML="",f={}),d(y-1),d(y),d(y+1)});this.unsubscribeOnScroll.push(g)}}renderChannel(t,n,r,i){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,o,r,u,a,l)}render(t){return rc(this,void 0,void 0,function*(){var n;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,s=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=s>i;const o=this.options.fillParent&&!this.isScrollable,a=(o?i:s)*r;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],l,a,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return rc(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}}lT.MAX_CANVAS_WIDTH=8e3,lT.MAX_NODES=10;class PUt extends NI{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class Lpe extends NI{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return rc(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return rc(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return rc(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const NUt={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class Z4 extends IUt{static create(t){return new Z4(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new Lpe:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},NUt,t),this.timer=new PUt;const r=n?void 0:this.getMediaElement();this.renderer=new lT(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{var n;this.emit("error",(n=this.getMediaElement().error)!==null&&n!==void 0?n:new Error("Media error"))}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=R5.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=R5.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return rc(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=c=>this.emit("loading",c);n=yield RUt.fetchBlob(t,u,a);const l=this.options.blobMimeType;l&&(n=new Blob([n],{type:l}))}this.setSrc(t,n);const o=yield new Promise(a=>{const u=i||this.getDuration();u?a(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof Lpe&&(a.duration=o)}if(r)this.decodedData=R5.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield R5.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return rc(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return rc(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return rc(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return rc(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}Z4.BasePlugin=class extends NI{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},Z4.dom=kUt;function DUt(e){return Z4.create(e)}function OUt(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const Fpe=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),MUt=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([o])=>r.findIndex(([a])=>a===o)===-1),s=r.filter(([o])=>n.findIndex(([a])=>a===o)===-1);return{disabled:Fpe(i),enabled:Fpe(s)}};function $pe(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=OUt(i)}return n}function LUt({container:e,plugins:t=[],onMount:n,...r}){const i=U.useRef(!1),[s,o]=U.useState({}),a=U.useRef([]),[u,l]=U.useState(null);return U.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const f=$pe(s,t);a.current=Object.keys(f);const d=DUt({container:e,...r,plugins:Object.values(f)});return n==null||n(d),o(f),l(d),()=>{c!==e&&d.destroy()}},[e]),U.useEffect(()=>{if(u){const c=$pe(s,t),{disabled:f,enabled:d}=MUt(s,c);Object.keys(f).forEach(h=>{f[h].destroy()}),Object.keys(d).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,d[h]),u==null||u.registerPlugin(d[h]))}),a.current=Object.keys(d),o(c)}},[t]),[u,s,Object.values(s)]}function F5e({children:e,plugins:t=[],onMount:n,...r}){const i=LUt({plugins:t,onMount:n,...r});return sr.createElement(AUt.Provider,{value:i},e)}const $5e=({id:e="waveform",children:t})=>sr.createElement("div",{id:e},t);function Mj(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}class B5e{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}}class FUt extends B5e{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}}class $Ut extends B5e{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const BUt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class Xee extends FUt{constructor(t){var n,r,i,s,o,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(s=t.continuousWaveform)!==null&&s!==void 0&&s,renderRecordedAudio:(o=t.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new $Ut,this.subscriptions.push(this.timer.on("tick",()=>{const u=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+u,this.emit("record-progress",this.duration)}))}static create(t){return new Xee(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),s=r.createAnalyser();i.connect(s),this.options.continuousWaveform&&(s.fftSize=32);const o=s.frequencyBinCount,a=new Float32Array(o);let u=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const l=setInterval(()=>{var c,f,d,h;if(!this.isWaveformPaused){if(s.getFloatTimeDomainData(a),this.options.scrollingWaveform){const p=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),m=Math.min(p,this.dataWindow?this.dataWindow.length+o:o),g=new Float32Array(p);if(this.dataWindow){const b=Math.max(0,p-this.dataWindow.length);g.set(this.dataWindow.slice(-m+o),b)}g.set(a,p-o),this.dataWindow=g}else if(this.options.continuousWaveform){if(!this.dataWindow){const m=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((f=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&f!==void 0?f:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(m)}let p=0;for(let m=0;m<o;m++){const g=Math.abs(a[m]);g>p&&(p=g)}if(u+1>this.dataWindow.length){const m=new Float32Array(2*this.dataWindow.length);m.set(this.dataWindow,0),this.dataWindow=m}this.dataWindow[u]=p,u++}else this.dataWindow=a;if(this.wavesurfer){const p=((h=(d=this.dataWindow)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:p).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(m=>{console.error("Error rendering real-time recording data:",m)})}}},10);return{onDestroy:()=>{clearInterval(l),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(l),this.stopMic()}}}startMic(t){return Mj(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return Mj(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||BUt.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data),this.emit("record-data-available",o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return Mj(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}function jUt({width:e=70,height:t=36}){const n=U.useRef(null),r=U.useRef(null),[i,s]=U.useState(!1);U.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(Xee.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,navigator.userAgent.includes("Firefox")||a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,u;i&&n.current&&((a=r.current)==null||a.stopRecording(),(u=r.current)==null||u.destroy(),n.current.destroy())}},[i]);const o=U.useCallback(a=>{n.current=a,s(!0)},[]);return k.jsx(Ue,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:k.jsx(F5e,{onMount:o,plugins:[],container:"#waveformDiv",height:t,children:k.jsx($5e,{id:"waveform",height:t})})})}function UUt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=Ai(I=>I.config),r=Ai(I=>I.metadata),i=zY(),s=bc(),{toggleShowHelpText:o,toggleStudyBrowser:a,incrementHelpCounter:u}=Al(),{storageEngine:l}=Yo(),c=B0(),f=pp(),d=i.length-1,h=typeof f=="number"?f/d*100:0,[p,m]=U.useState(!1),g=n==null?void 0:n.uiConfig.logoPath,b=n==null?void 0:n.uiConfig.withProgressBar,y=Uw(),x=tG(`/${y}`),w=U.useRef(null),[S,C]=U.useState(!1),R=Ai(I=>I.isRecording);return U.useEffect(()=>{const I=w.current;I&&C(I.scrollWidth>I.offsetWidth)},[n]),k.jsx(hs.Header,{p:"md",children:k.jsxs(Mm,{mt:-7,align:"center",children:[k.jsx(Mm.Col,{span:4,children:k.jsxs(An,{align:"center",children:[k.jsx(qb,{w:40,src:`${Uu}${g}`,alt:"Study Logo"}),k.jsx(eh,{w:"md"}),k.jsx(co,{ref:w,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:S?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),k.jsx(Mm.Col,{span:4,children:b&&k.jsx(wT,{radius:"md",size:"lg",value:h})}),k.jsx(Mm.Col,{span:4,children:k.jsxs(Js,{wrap:"nowrap",justify:"right",children:[R?k.jsxs(Js,{ml:"xl",gap:20,wrap:"nowrap",children:[k.jsx(At,{color:"red",children:"Recording audio"}),k.jsx(jUt,{})]}):null,!t&&k.jsx(Ys,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:k.jsx(v0,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&k.jsx(Nn,{variant:"outline",onClick:()=>{s(o()),s(u({identifier:`${c}_${f}`}))},children:"Help"}),k.jsxs(Xc,{shadow:"md",width:200,withinPortal:!0,opened:p,onChange:m,children:[k.jsx(Xc.Target,{children:k.jsx(zb,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:k.jsx(Jze,{})})}),k.jsxs(Xc.Dropdown,{children:[e&&k.jsx(Xc.Item,{leftSection:k.jsx(cVe,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),k.jsx(Xc.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:k.jsx(rVe,{size:14}),children:"Contact"}),e&&k.jsx(Xc.Item,{leftSection:k.jsx(cG,{size:14}),onClick:()=>M5e(l,n,r,x),children:"Next Participant"}),e&&k.jsx(Xc.Item,{leftSection:k.jsx(A1e,{size:14}),component:"a",href:`${Uu}analysis/stats/${y}`,children:"Analyze & Manage"})]})]})]})})]})})}function j5e(e,t){var n;return YT(e)&&t.baseComponents?qY({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function zUt(){var u;const e=(u=v1())==null?void 0:u.uiConfig.sidebar,t=v1(),n=B0(),r=t.components[n],i=U.useMemo(()=>r?j5e(r,t):null,[r,t]),s=WY(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?k.jsxs(hs.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&k.jsxs(hs.Section,{bg:"gray.3",p:"md",children:[k.jsx(At,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),k.jsx(dc,{text:o})]}),k.jsx(hs.Section,{p:"md",children:k.jsx($8,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):k.jsx(hs.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:k.jsx($8,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function VUt(){const e=Ai(u=>u.showHelpText),t=Ai(u=>u.config),n=bc(),{toggleShowHelpText:r}=Al(),[i,s]=U.useState(""),[o,a]=U.useState(!0);return U.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await YY(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),k.jsx(Eo,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?k.jsx(dc,{text:i}):k.jsx(yb,{path:t.uiConfig.helpTextPath})})}function HUt(){const e=Ai(o=>o.alertModal),{setAlertModal:t}=Al(),n=bc(),[r,i]=U.useState(e.show),s=U.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return U.useEffect(()=>i(e.show),[e.show]),k.jsx(Eo,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:k.jsxs(Yy,{color:"red",radius:"xs",title:"Alert",icon:k.jsx(zze,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[k.jsx(At,{my:"md",children:e.message}),k.jsx(Js,{w:"100%",justify:"end",children:k.jsx(Nn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}const Bpe=15,jpe=3;function qUt({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){const o=["var(--mantine-color-yellow-8)","var(--mantine-color-green-8)","var(--mantine-color-indigo-8)","var(--mantine-color-violet-8)","var(--mantine-color-cyan-8)","var(--mantine-color-orange-3)","var(--mantine-color-lime-3)","var(--mantine-color-teal-3)","var(--mantine-color-pink-3)"],a=new Map;if(a.set("Root","var(--mantine-color-grape-3)"),t.provenanceGraph){let u=0;Object.entries(t.provenanceGraph.nodes).forEach(l=>{const[,c]=l;a.has(c.label)||(a.set(c.label,o[u]),u=(u+1)%o.length)})}return k.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(u=>{const[l,c]=u;return k.jsx("g",{onClick:()=>i(l,c.createdOn,s),children:k.jsx("rect",{fill:l===r?"#e15759":a.get(c.label),x:e(c.createdOn)-jpe/2,y:n/2-Bpe/2,width:jpe,height:Bpe})},l)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?k.jsx("rect",{fill:"var(--mantine-color-blue-filled)",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null,k.jsx(Gq,{position:{bottom:10,left:10},children:k.jsxs(wl,{width:200,position:"bottom",withArrow:!0,shadow:"md",children:[k.jsx(wl.Target,{children:k.jsx(Nn,{children:"Show Legend"})}),k.jsx(wl.Dropdown,{children:k.jsx(El,{children:Array.from(a.keys()).map(u=>k.jsxs(Js,{children:[k.jsx(bW,{color:a.get(u)}),k.jsx("span",{children:u})]},u))})})]})})]})}const Upe={left:5,top:0,right:5,bottom:0};function WUt({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,setPlayTime:o,trialName:a}){const u=U.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),l=U.useCallback((f,d)=>{o(d,(d-e.domain()[0])/u),s(f)},[s,o,u,e]),c=U.useMemo(()=>Object.entries(t.answers).filter(f=>a?a===f[0]:!0).map(f=>{const[d,h]=f;return k.jsx(qUt,{taskName:d,answer:h,height:r,currentNode:i,setCurrentNode:l,xScale:e},d)}),[i,l,r,t.answers,a,e]);return k.jsxs("svg",{style:{width:n,height:r},children:[k.jsx("line",{stroke:"black",strokeWidth:1,x1:Upe.left,x2:n+Upe.left,y1:r/2,y2:r/2}),c]})}function GUt(e){const t=U.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return U.useLayoutEffect(()=>{t.current=e}),U.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function YUt({width:e,height:t,updateTimer:n,duration:r,isPlaying:i,xScale:s,startTime:o}){const a=U.useRef(0),u=U.useRef(Date.now()),[l,c]=U.useState(0);U.useEffect(()=>{o&&(a.current=0,n(o,0))},[o,n]);const f=GUt(()=>{if(a.current>=r)return;const h=Date.now();a.current=h-u.current,n(o+a.current,void 0),c(l+1)});U.useEffect(()=>{i&&a.current>=r&&(n(o,0),u.current=Date.now()-a.current,a.current=0)},[o,i,r,n]),U.useEffect(()=>{let h=null;return i&&a.current<r&&(u.current=Date.now()-a.current,h=setInterval(()=>{i&&f()},30)),()=>{h&&clearInterval(h)}},[r,f,i]);const d=U.useCallback(h=>{a.current=s.invert(h.clientX-10)-s.domain()[0],u.current=Date.now()-a.current,c(l+1),n(o+a.current,a.current/r)},[r,l,o,n,s]);return k.jsx("svg",{onClick:d,style:{width:e,height:t,position:"absolute",zIndex:1e4},children:k.jsx("line",{stroke:"#e15759",strokeWidth:3,y1:0,y2:t,x1:s(o+a.current),x2:s(o+a.current)})})}function sq(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`,o=t<10?`0${t}`:`${t}`;return`${t>0?`${o}h`:""} ${n>0?`${s}m`:""} ${i}s`}const Lj={left:0,top:0,right:0,bottom:0};function KUt(e,t){return t?t.getParticipantData(e):null}function XUt({setTimeString:e}){const[t]=D1(),n=U.useMemo(()=>t.get("participantId")||void 0,[t]),{storageEngine:r}=Yo(),i=Ai(te=>te.analysisIsPlaying),s=Ai(te=>te.analysisHasAudio),o=Ai(te=>te.analysisHasProvenance),{saveAnalysisState:a,setAnalysisHasAudio:u,setAnalysisHasProvenance:l,setAnalysisIsPlaying:c}=Al(),f=bc(),d=B0(),h=pp();U.useEffect(()=>{f(a(null))},[h,a,f]);const[p,{width:m}]=tR(),[g,b]=U.useState(0),[y,x]=U.useState(null),[w,S]=U.useState(0),{value:C,status:R}=AD(KUt,[n,r]),[I,O]=rOe(0,100),M=U.useRef(null),[L,H]=U.useState(!0),D=U.useRef(null),B=U.useMemo(()=>`${d}_${h}`,[d,h]);U.useEffect(()=>{f(c(!1))},[n,d,h,f,c]),U.useEffect(()=>{var te;if(B&&C&&((te=C.answers[B])!=null&&te.provenanceGraph)){const W=v7.create(),ee=R5e({registry:W,initialState:{}});C.answers[B].provenanceGraph&&(ee.importObject(Jy(C.answers[B].provenanceGraph)),f(l(!0)),D.current=ee)}else f(l(!1))},[C,B,f,l]);const z=U.useCallback(te=>{var W;te&&(B&&C&&D.current&&(f(a(D.current.getState((W=C.answers[B].provenanceGraph)==null?void 0:W.nodes[te]))),D.current.to(te)),x(te))},[C,a,f,B]);U.useEffect(()=>{var ee;if(!B||!C||!D.current||!((ee=C.answers[B])!=null&&ee.provenanceGraph))return;const te=C.answers[B].provenanceGraph;if(!te)return;if(!y||!te.nodes[y]){z(te.root);return}let W=te.nodes[y];for(;;)if(I<W.createdOn){if($jt(W))break;{const oe=W.parent;W=te.nodes[oe]}}else if(W.children.length>0){const oe=W.children[0];if(I>te.nodes[oe].createdOn)W=te.nodes[oe];else break}else break;W.id!==y&&z(W.id)},[z,y,C,n,I,B]);const G=U.useMemo(()=>(C==null?void 0:C.answers[B].startTime)||0,[C,B]);U.useEffect(()=>{w===0?e(""):I!==0&&e(`${sq(I-G)} / ${sq(w*1e3)}`)},[B,C,I,e,G,w]),U.useEffect(()=>{if(!s&&o&&C){const te=C.answers[B].endTime-C.answers[B].startTime;S(te>-1?te/1e3:0)}},[s,o,B,C]);const Z=zT(),ne=U.useRef(null),ue=U.useCallback(async te=>{if(ne.current=te,te&&C&&Z&&B&&r)try{const W=await r.getAudio(B,n);await te.load(W),H(!1),f(u(!0)),S(te.getDuration()),b(te.getWidth()),te.seekTo(0),te.on("redrawcomplete",()=>b(te.getWidth()))}catch(W){throw f(u(!1)),new Error(W)}else f(u(!1)),S(0)},[C,Z,B,r,n,f,u]),X=U.useCallback((te,W)=>{if(te>w*1e3+G){f(c(!1)),O(te);return}O(te),ne.current&&W!==void 0&&setTimeout(()=>{var ee;(ee=ne.current)==null||ee.seekTo(W)})},[c,O,G,f,w]);U.useEffect(()=>{ne.current&&(i?ne.current.play():ne.current.pause())},[ne,i,w,G,O]);const q=U.useMemo(()=>{var ee,oe;if(!C||!((ee=C.answers[B])!=null&&ee.startTime)||!((oe=C.answers[B])!=null&&oe.endTime))return null;const te=w>0?C.answers[B].startTime+w*1e3:C.answers[B].endTime;return mM([Lj.left,m+Lj.left+Lj.right]).domain([C.answers[B].startTime,te]).clamp(!0)},[C,B,m,w]);return U.useEffect(()=>{ue(ne.current)},[X,ue,C,n,ne]),k.jsx(Js,{wrap:"nowrap",gap:10,mx:10,children:k.jsxs(El,{ref:p,style:{width:"100%"},gap:0,children:[k.jsx(l1,{}),C!==null&&B?k.jsxs(Ue,{ref:M,style:{overflow:"hidden",width:"100%",pointerEvents:"none"},display:s?"block":"none",id:"waveformDiv",children:[k.jsx(F5e,{onMount:ue,plugins:[],container:"#waveformDiv",height:50,waveColor:"#484848",progressColor:"#e15759",barHeight:0,cursorColor:"rgba(0, 0, 0, 0)",children:k.jsx($5e,{id:"waveform",height:50})}),L?k.jsx(xg,{}):null]}):null,R==="success"&&C&&q&&B&&C.answers[B].provenanceGraph?k.jsx(WUt,{xScale:q,trialName:B,setPlayTime:X,currentNode:y,setCurrentNode:z,participantData:C,width:g||m,height:25}):null,q&&C&&(s||o)?k.jsx(YUt,{duration:w*1e3,height:(s?50:0)+(o?25:0),isPlaying:i,startTime:G,width:m,xScale:q,updateTimer:X}):null]})})}function QUt(e,t){return t?t.getParticipantData(e):null}function JUt(e){return e?e.getAllParticipantsData():null}function ZUt(){const[e]=D1(),t=U.useMemo(()=>e.get("participantId")||void 0,[e]),n=B0(),r=pp(),i=F0(),{setAnalysisIsPlaying:s}=Al(),o=bc(),a=Ai(b=>b.analysisIsPlaying),{storageEngine:u}=Yo(),{value:l,status:c}=AD(QUt,[t,u]),{value:f}=AD(JUt,[u]),[d,h]=U.useMemo(()=>{if(f&&l&&t&&n){const b=f.filter(S=>S.participantConfigHash===l.participantConfigHash),y=b.findIndex(S=>S.participantId===t),x=y<b.length-1?b[y+1]:b[0],w=y>0?b[y-1]:b[b.length-1];return[[x.participantId,k0(x.sequence).indexOf(n)],[w.participantId,k0(w.sequence).indexOf(n)]]}return[["",0],["",0]]},[f,n,l,t]),p=U.useMemo(()=>{const b={};return f==null||f.forEach(y=>{b[y.participantConfigHash]||(b[y.participantConfigHash]=new Set),b[y.participantConfigHash].add(y.participantId)}),Object.keys(b).sort((y,x)=>y===(l==null?void 0:l.participantConfigHash)?-1:x===(l==null?void 0:l.participantConfigHash)?1:0).map(y=>({group:`Config version: ${y}`,items:[...b[y]].map(x=>({value:x,label:x,disabled:y!==(l==null?void 0:l.participantConfigHash)}))}))},[f,l==null?void 0:l.participantConfigHash]),[m,g]=U.useState("");return k.jsx(hs.Footer,{zIndex:101,withBorder:!1,children:k.jsxs(Ue,{style:{backgroundColor:"var(--mantine-color-blue-1)",height:"150px"},children:[k.jsx(oh,{visible:c!=="success",overlayProps:{backgroundOpacity:.4}}),k.jsx(XUt,{setTimeString:g}),k.jsx(l1,{children:k.jsxs(Js,{gap:"xs",style:{height:"50px"},children:[k.jsx(At,{size:"sm",ff:"monospace",children:m}),k.jsx(zb,{variant:"filled",size:30,onClick:()=>o(s(!a)),children:a?k.jsx(gVe,{}):k.jsx(yVe,{})}),k.jsx(At,{mx:"0",children:"Participant:"}),k.jsx(ET,{style:{width:"300px"},value:(l==null?void 0:l.participantId)||"",onChange:b=>{i(`./../${u0(0)}?participantId=${b}`)},data:p}),k.jsx(Nn,{onClick:()=>i(`../${u0(+r-1)}?participantId=${t}`,{relative:"path"}),children:k.jsx(ere,{})}),k.jsx(Nn,{onClick:()=>i(`../${u0(+r+1)}?participantId=${t}`,{relative:"path"}),children:k.jsx(tre,{})}),k.jsxs(Nn,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./../${u0(h[1])}?participantId=${h[0]}`),children:[k.jsx(ere,{}),k.jsx(nre,{})]}),k.jsxs(Nn,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./../${u0(d[1])}?participantId=${d[0]}`),children:[k.jsx(nre,{}),k.jsx(tre,{})]})]})})]})})}function ezt(){const e=U.useRef([]),t=v1(),n=t.uiConfig.windowEventDebounceTime??100,r=Ai(d=>d.showStudyBrowser),i=Ai(d=>d.analysisHasAudio),s=Ai(d=>d.analysisHasProvenance),o=Ai(d=>d.modes);U.useEffect(()=>{const d=Sy(S=>{e.current.push([Date.now(),"focus",S.target instanceof HTMLElement?S.target.tagName:""])},n,{maxWait:n}),h=Sy(S=>{e.current.push([Date.now(),"input",S.data??""])},n,{maxWait:n}),p=Sy(S=>{e.current.push([Date.now(),"keypress",S.key])},n,{maxWait:n}),m=Sy(S=>{e.current.push([Date.now(),"mousedown",[S.clientX,S.clientY]])},n,{maxWait:n}),g=Sy(S=>{e.current.push([Date.now(),"mouseup",[S.clientX,S.clientY]])},n,{maxWait:n}),b=Sy(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),y=Sy(S=>{e.current.push([Date.now(),"mousemove",[S.clientX,S.clientY]])},n,{maxWait:n}),x=Sy(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=Sy(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",b),window.addEventListener("mousemove",y),window.addEventListener("scroll",x),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",b),window.removeEventListener("mousemove",y),window.removeEventListener("scroll",x),document.removeEventListener("visibilitychange",w)}},[]);const a=t.uiConfig.sidebarWidth??300,{studyNavigatorEnabled:u,dataCollectionEnabled:l}=U.useMemo(()=>o,[o]),c=U.useMemo(()=>u&&r,[u,r]),f=zT();return k.jsx(vwe.Provider,{value:e,children:k.jsxs(hs,{padding:"md",header:{height:70},navbar:{width:a,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!c,mobile:!c}},footer:{height:(f?50:0)+(i?50:0)+(s?25:0)},children:[k.jsx(zUt,{}),k.jsx(CUt,{}),k.jsx(UUt,{studyNavigatorEnabled:u,dataCollectionEnabled:l}),k.jsx(VUt,{}),k.jsx(HUt,{}),k.jsx(hs.Main,{children:k.jsx(QUe,{})}),f&&k.jsx(ZUt,{})]})})}function tzt(e,t=!1){return typeof e=="number"?zpe(e,t):zpe(e.length,t).map(r=>r.map(i=>e[i]))}function zpe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function U5e(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=U5e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function nzt(e,t){const n=Jy(e);return U5e(n,t,"root")}function z5e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&z5e(s,t,i,o)})}function rzt(e){const t=[];return z5e(e,t,"",0),t}function Vpe(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return tzt(i.sort(()=>.5-Math.random()),!0)}function Hpe(e){const n=rzt(e.sequence).map(s=>({[s]:Vpe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=nzt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Vpe(e,o))})}),i}var I5={exports:{}},Fj={},Ty={},Jx={},$j={},Bj={},jj={},qpe;function NO(){return qpe||(qpe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(y){if(super(),!e.IDENTIFIER.test(y))throw new Error("CodeGen: name must be a valid identifier");this.str=y}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(y){super(),this._items=typeof y=="string"?[y]:y}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const y=this._items[0];return y===""||y==='""'}get str(){var y;return(y=this._str)!==null&&y!==void 0?y:this._str=this._items.reduce((x,w)=>`${x}${w}`,"")}get names(){var y;return(y=this._names)!==null&&y!==void 0?y:this._names=this._items.reduce((x,w)=>(w instanceof n&&(x[w.str]=(x[w.str]||0)+1),x),{})}}e._Code=r,e.nil=new r("");function i(b,...y){const x=[b[0]];let w=0;for(;w<y.length;)a(x,y[w]),x.push(b[++w]);return new r(x)}e._=i;const s=new r("+");function o(b,...y){const x=[h(b[0])];let w=0;for(;w<y.length;)x.push(s),a(x,y[w]),x.push(s,h(b[++w]));return u(x),new r(x)}e.str=o;function a(b,y){y instanceof r?b.push(...y._items):y instanceof n?b.push(y):b.push(f(y))}e.addCodeArg=a;function u(b){let y=1;for(;y<b.length-1;){if(b[y]===s){const x=l(b[y-1],b[y+1]);if(x!==void 0){b.splice(y-1,3,x);continue}b[y++]="+"}y++}}function l(b,y){if(y==='""')return b;if(b==='""')return y;if(typeof b=="string")return y instanceof n||b[b.length-1]!=='"'?void 0:typeof y!="string"?`${b.slice(0,-1)}${y}"`:y[0]==='"'?b.slice(0,-1)+y.slice(1):void 0;if(typeof y=="string"&&y[0]==='"'&&!(b instanceof n))return`"${b}${y.slice(1)}`}function c(b,y){return y.emptyStr()?b:b.emptyStr()?y:o`${b}${y}`}e.strConcat=c;function f(b){return typeof b=="number"||typeof b=="boolean"||b===null?b:h(Array.isArray(b)?b.join(","):b)}function d(b){return new r(h(b))}e.stringify=d;function h(b){return JSON.stringify(b).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(b){return typeof b=="string"&&e.IDENTIFIER.test(b)?new r(`.${b}`):i`[${b}]`}e.getProperty=p;function m(b){if(typeof b=="string"&&e.IDENTIFIER.test(b))return new r(`${b}`);throw new Error(`CodeGen: invalid export name: ${b}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(b){return new r(b.toString())}e.regexpCode=g}(jj)),jj}var Uj={},Wpe;function Gpe(){return Wpe||(Wpe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=NO();class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const y=m.get(p);if(y)return y}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),b=g.length;return g[b]=c.ref,d.setValue(c,{property:h,itemIndex:b}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(b=>{if(g.has(b))return;g.set(b,r.Started);let y=c(b);if(y){const x=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${x} ${b} = ${y};${this.opts._n}`}else if(y=d==null?void 0:d(b))h=(0,t._)`${h}${y}${this.opts._n}`;else throw new n(b);g.set(b,r.Completed)})}return h}}e.ValueScope=a}(Uj)),Uj}var Ype;function Jr(){return Ype||(Ype=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=NO(),n=Gpe();var r=NO();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=Gpe();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(ee,oe){return this}}class o extends s{constructor(ee,oe,pe){super(),this.varKind=ee,this.name=oe,this.rhs=pe}render({es5:ee,_n:oe}){const pe=ee?n.varKinds.var:this.varKind,ce=this.rhs===void 0?"":` = ${this.rhs}`;return`${pe} ${this.name}${ce};`+oe}optimizeNames(ee,oe){if(ee[this.name.str])return this.rhs&&(this.rhs=B(this.rhs,ee,oe)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(ee,oe,pe){super(),this.lhs=ee,this.rhs=oe,this.sideEffects=pe}render({_n:ee}){return`${this.lhs} = ${this.rhs};`+ee}optimizeNames(ee,oe){if(!(this.lhs instanceof t.Name&&!ee[this.lhs.str]&&!this.sideEffects))return this.rhs=B(this.rhs,ee,oe),this}get names(){const ee=this.lhs instanceof t.Name?{}:{...this.lhs.names};return D(ee,this.rhs)}}class u extends a{constructor(ee,oe,pe,ce){super(ee,pe,ce),this.op=oe}render({_n:ee}){return`${this.lhs} ${this.op}= ${this.rhs};`+ee}}class l extends s{constructor(ee){super(),this.label=ee,this.names={}}render({_n:ee}){return`${this.label}:`+ee}}class c extends s{constructor(ee){super(),this.label=ee,this.names={}}render({_n:ee}){return`break${this.label?` ${this.label}`:""};`+ee}}class f extends s{constructor(ee){super(),this.error=ee}render({_n:ee}){return`throw ${this.error};`+ee}get names(){return this.error.names}}class d extends s{constructor(ee){super(),this.code=ee}render({_n:ee}){return`${this.code};`+ee}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(ee,oe){return this.code=B(this.code,ee,oe),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(ee=[]){super(),this.nodes=ee}render(ee){return this.nodes.reduce((oe,pe)=>oe+pe.render(ee),"")}optimizeNodes(){const{nodes:ee}=this;let oe=ee.length;for(;oe--;){const pe=ee[oe].optimizeNodes();Array.isArray(pe)?ee.splice(oe,1,...pe):pe?ee[oe]=pe:ee.splice(oe,1)}return ee.length>0?this:void 0}optimizeNames(ee,oe){const{nodes:pe}=this;let ce=pe.length;for(;ce--;){const he=pe[ce];he.optimizeNames(ee,oe)||(z(ee,he.names),pe.splice(ce,1))}return pe.length>0?this:void 0}get names(){return this.nodes.reduce((ee,oe)=>H(ee,oe.names),{})}}class p extends h{render(ee){return"{"+ee._n+super.render(ee)+"}"+ee._n}}class m extends h{}class g extends p{}g.kind="else";class b extends p{constructor(ee,oe){super(oe),this.condition=ee}render(ee){let oe=`if(${this.condition})`+super.render(ee);return this.else&&(oe+="else "+this.else.render(ee)),oe}optimizeNodes(){super.optimizeNodes();const ee=this.condition;if(ee===!0)return this.nodes;let oe=this.else;if(oe){const pe=oe.optimizeNodes();oe=this.else=Array.isArray(pe)?new g(pe):pe}if(oe)return ee===!1?oe instanceof b?oe:oe.nodes:this.nodes.length?this:new b(G(ee),oe instanceof b?[oe]:oe.nodes);if(!(ee===!1||!this.nodes.length))return this}optimizeNames(ee,oe){var pe;if(this.else=(pe=this.else)===null||pe===void 0?void 0:pe.optimizeNames(ee,oe),!!(super.optimizeNames(ee,oe)||this.else))return this.condition=B(this.condition,ee,oe),this}get names(){const ee=super.names;return D(ee,this.condition),this.else&&H(ee,this.else.names),ee}}b.kind="if";class y extends p{}y.kind="for";class x extends y{constructor(ee){super(),this.iteration=ee}render(ee){return`for(${this.iteration})`+super.render(ee)}optimizeNames(ee,oe){if(super.optimizeNames(ee,oe))return this.iteration=B(this.iteration,ee,oe),this}get names(){return H(super.names,this.iteration.names)}}class w extends y{constructor(ee,oe,pe,ce){super(),this.varKind=ee,this.name=oe,this.from=pe,this.to=ce}render(ee){const oe=ee.es5?n.varKinds.var:this.varKind,{name:pe,from:ce,to:he}=this;return`for(${oe} ${pe}=${ce}; ${pe}<${he}; ${pe}++)`+super.render(ee)}get names(){const ee=D(super.names,this.from);return D(ee,this.to)}}class S extends y{constructor(ee,oe,pe,ce){super(),this.loop=ee,this.varKind=oe,this.name=pe,this.iterable=ce}render(ee){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(ee)}optimizeNames(ee,oe){if(super.optimizeNames(ee,oe))return this.iterable=B(this.iterable,ee,oe),this}get names(){return H(super.names,this.iterable.names)}}class C extends p{constructor(ee,oe,pe){super(),this.name=ee,this.args=oe,this.async=pe}render(ee){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(ee)}}C.kind="func";class R extends h{render(ee){return"return "+super.render(ee)}}R.kind="return";class I extends p{render(ee){let oe="try"+super.render(ee);return this.catch&&(oe+=this.catch.render(ee)),this.finally&&(oe+=this.finally.render(ee)),oe}optimizeNodes(){var ee,oe;return super.optimizeNodes(),(ee=this.catch)===null||ee===void 0||ee.optimizeNodes(),(oe=this.finally)===null||oe===void 0||oe.optimizeNodes(),this}optimizeNames(ee,oe){var pe,ce;return super.optimizeNames(ee,oe),(pe=this.catch)===null||pe===void 0||pe.optimizeNames(ee,oe),(ce=this.finally)===null||ce===void 0||ce.optimizeNames(ee,oe),this}get names(){const ee=super.names;return this.catch&&H(ee,this.catch.names),this.finally&&H(ee,this.finally.names),ee}}class O extends p{constructor(ee){super(),this.error=ee}render(ee){return`catch(${this.error})`+super.render(ee)}}O.kind="catch";class M extends p{render(ee){return"finally"+super.render(ee)}}M.kind="finally";class L{constructor(ee,oe={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...oe,_n:oe.lines?`
`:""},this._extScope=ee,this._scope=new n.Scope({parent:ee}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(ee){return this._scope.name(ee)}scopeName(ee){return this._extScope.name(ee)}scopeValue(ee,oe){const pe=this._extScope.value(ee,oe);return(this._values[pe.prefix]||(this._values[pe.prefix]=new Set)).add(pe),pe}getScopeValue(ee,oe){return this._extScope.getValue(ee,oe)}scopeRefs(ee){return this._extScope.scopeRefs(ee,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(ee,oe,pe,ce){const he=this._scope.toName(oe);return pe!==void 0&&ce&&(this._constants[he.str]=pe),this._leafNode(new o(ee,he,pe)),he}const(ee,oe,pe){return this._def(n.varKinds.const,ee,oe,pe)}let(ee,oe,pe){return this._def(n.varKinds.let,ee,oe,pe)}var(ee,oe,pe){return this._def(n.varKinds.var,ee,oe,pe)}assign(ee,oe,pe){return this._leafNode(new a(ee,oe,pe))}add(ee,oe){return this._leafNode(new u(ee,e.operators.ADD,oe))}code(ee){return typeof ee=="function"?ee():ee!==t.nil&&this._leafNode(new d(ee)),this}object(...ee){const oe=["{"];for(const[pe,ce]of ee)oe.length>1&&oe.push(","),oe.push(pe),(pe!==ce||this.opts.es5)&&(oe.push(":"),(0,t.addCodeArg)(oe,ce));return oe.push("}"),new t._Code(oe)}if(ee,oe,pe){if(this._blockNode(new b(ee)),oe&&pe)this.code(oe).else().code(pe).endIf();else if(oe)this.code(oe).endIf();else if(pe)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(ee){return this._elseNode(new b(ee))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(b,g)}_for(ee,oe){return this._blockNode(ee),oe&&this.code(oe).endFor(),this}for(ee,oe){return this._for(new x(ee),oe)}forRange(ee,oe,pe,ce,he=this.opts.es5?n.varKinds.var:n.varKinds.let){const Ee=this._scope.toName(ee);return this._for(new w(he,Ee,oe,pe),()=>ce(Ee))}forOf(ee,oe,pe,ce=n.varKinds.const){const he=this._scope.toName(ee);if(this.opts.es5){const Ee=oe instanceof t.Name?oe:this.var("_arr",oe);return this.forRange("_i",0,(0,t._)`${Ee}.length`,Ae=>{this.var(he,(0,t._)`${Ee}[${Ae}]`),pe(he)})}return this._for(new S("of",ce,he,oe),()=>pe(he))}forIn(ee,oe,pe,ce=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(ee,(0,t._)`Object.keys(${oe})`,pe);const he=this._scope.toName(ee);return this._for(new S("in",ce,he,oe),()=>pe(he))}endFor(){return this._endBlockNode(y)}label(ee){return this._leafNode(new l(ee))}break(ee){return this._leafNode(new c(ee))}return(ee){const oe=new R;if(this._blockNode(oe),this.code(ee),oe.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(R)}try(ee,oe,pe){if(!oe&&!pe)throw new Error('CodeGen: "try" without "catch" and "finally"');const ce=new I;if(this._blockNode(ce),this.code(ee),oe){const he=this.name("e");this._currNode=ce.catch=new O(he),oe(he)}return pe&&(this._currNode=ce.finally=new M,this.code(pe)),this._endBlockNode(O,M)}throw(ee){return this._leafNode(new f(ee))}block(ee,oe){return this._blockStarts.push(this._nodes.length),ee&&this.code(ee).endBlock(oe),this}endBlock(ee){const oe=this._blockStarts.pop();if(oe===void 0)throw new Error("CodeGen: not in self-balancing block");const pe=this._nodes.length-oe;if(pe<0||ee!==void 0&&pe!==ee)throw new Error(`CodeGen: wrong number of nodes: ${pe} vs ${ee} expected`);return this._nodes.length=oe,this}func(ee,oe=t.nil,pe,ce){return this._blockNode(new C(ee,oe,pe)),ce&&this.code(ce).endFunc(),this}endFunc(){return this._endBlockNode(C)}optimize(ee=1){for(;ee-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(ee){return this._currNode.nodes.push(ee),this}_blockNode(ee){this._currNode.nodes.push(ee),this._nodes.push(ee)}_endBlockNode(ee,oe){const pe=this._currNode;if(pe instanceof ee||oe&&pe instanceof oe)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${oe?`${ee.kind}/${oe.kind}`:ee.kind}"`)}_elseNode(ee){const oe=this._currNode;if(!(oe instanceof b))throw new Error('CodeGen: "else" without "if"');return this._currNode=oe.else=ee,this}get _root(){return this._nodes[0]}get _currNode(){const ee=this._nodes;return ee[ee.length-1]}set _currNode(ee){const oe=this._nodes;oe[oe.length-1]=ee}}e.CodeGen=L;function H(W,ee){for(const oe in ee)W[oe]=(W[oe]||0)+(ee[oe]||0);return W}function D(W,ee){return ee instanceof t._CodeOrName?H(W,ee.names):W}function B(W,ee,oe){if(W instanceof t.Name)return pe(W);if(!ce(W))return W;return new t._Code(W._items.reduce((he,Ee)=>(Ee instanceof t.Name&&(Ee=pe(Ee)),Ee instanceof t._Code?he.push(...Ee._items):he.push(Ee),he),[]));function pe(he){const Ee=oe[he.str];return Ee===void 0||ee[he.str]!==1?he:(delete ee[he.str],Ee)}function ce(he){return he instanceof t._Code&&he._items.some(Ee=>Ee instanceof t.Name&&ee[Ee.str]===1&&oe[Ee.str]!==void 0)}}function z(W,ee){for(const oe in ee)W[oe]=(W[oe]||0)-(ee[oe]||0)}function G(W){return typeof W=="boolean"||typeof W=="number"||W===null?!W:(0,t._)`!${te(W)}`}e.not=G;const Z=q(e.operators.AND);function ne(...W){return W.reduce(Z)}e.and=ne;const ue=q(e.operators.OR);function X(...W){return W.reduce(ue)}e.or=X;function q(W){return(ee,oe)=>ee===t.nil?oe:oe===t.nil?ee:(0,t._)`${te(ee)} ${W} ${te(oe)}`}function te(W){return W instanceof t.Name?W:(0,t._)`(${W})`}}(Bj)),Bj}var jr={},Kpe;function Ni(){if(Kpe)return jr;Kpe=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.checkStrictMode=jr.getErrorPath=jr.Type=jr.useFunc=jr.setEvaluated=jr.evaluatedPropsToName=jr.mergeEvaluated=jr.eachItem=jr.unescapeJsonPointer=jr.escapeJsonPointer=jr.escapeFragment=jr.unescapeFragment=jr.schemaRefOrVal=jr.schemaHasRulesButRef=jr.schemaHasRules=jr.checkUnknownRules=jr.alwaysValidSchema=jr.toHash=void 0;const e=Jr(),t=NO();function n(S){const C={};for(const R of S)C[R]=!0;return C}jr.toHash=n;function r(S,C){return typeof C=="boolean"?C:Object.keys(C).length===0?!0:(i(S,C),!s(C,S.self.RULES.all))}jr.alwaysValidSchema=r;function i(S,C=S.schema){const{opts:R,self:I}=S;if(!R.strictSchema||typeof C=="boolean")return;const O=I.RULES.keywords;for(const M in C)O[M]||w(S,`unknown keyword: "${M}"`)}jr.checkUnknownRules=i;function s(S,C){if(typeof S=="boolean")return!S;for(const R in S)if(C[R])return!0;return!1}jr.schemaHasRules=s;function o(S,C){if(typeof S=="boolean")return!S;for(const R in S)if(R!=="$ref"&&C.all[R])return!0;return!1}jr.schemaHasRulesButRef=o;function a({topSchemaRef:S,schemaPath:C},R,I,O){if(!O){if(typeof R=="number"||typeof R=="boolean")return R;if(typeof R=="string")return(0,e._)`${R}`}return(0,e._)`${S}${C}${(0,e.getProperty)(I)}`}jr.schemaRefOrVal=a;function u(S){return f(decodeURIComponent(S))}jr.unescapeFragment=u;function l(S){return encodeURIComponent(c(S))}jr.escapeFragment=l;function c(S){return typeof S=="number"?`${S}`:S.replace(/~/g,"~0").replace(/\//g,"~1")}jr.escapeJsonPointer=c;function f(S){return S.replace(/~1/g,"/").replace(/~0/g,"~")}jr.unescapeJsonPointer=f;function d(S,C){if(Array.isArray(S))for(const R of S)C(R);else C(S)}jr.eachItem=d;function h({mergeNames:S,mergeToName:C,mergeValues:R,resultToName:I}){return(O,M,L,H)=>{const D=L===void 0?M:L instanceof e.Name?(M instanceof e.Name?S(O,M,L):C(O,M,L),L):M instanceof e.Name?(C(O,L,M),M):R(M,L);return H===e.Name&&!(D instanceof e.Name)?I(O,D):D}}jr.mergeEvaluated={props:h({mergeNames:(S,C,R)=>S.if((0,e._)`${R} !== true && ${C} !== undefined`,()=>{S.if((0,e._)`${C} === true`,()=>S.assign(R,!0),()=>S.assign(R,(0,e._)`${R} || {}`).code((0,e._)`Object.assign(${R}, ${C})`))}),mergeToName:(S,C,R)=>S.if((0,e._)`${R} !== true`,()=>{C===!0?S.assign(R,!0):(S.assign(R,(0,e._)`${R} || {}`),m(S,R,C))}),mergeValues:(S,C)=>S===!0?!0:{...S,...C},resultToName:p}),items:h({mergeNames:(S,C,R)=>S.if((0,e._)`${R} !== true && ${C} !== undefined`,()=>S.assign(R,(0,e._)`${C} === true ? true : ${R} > ${C} ? ${R} : ${C}`)),mergeToName:(S,C,R)=>S.if((0,e._)`${R} !== true`,()=>S.assign(R,C===!0?!0:(0,e._)`${R} > ${C} ? ${R} : ${C}`)),mergeValues:(S,C)=>S===!0?!0:Math.max(S,C),resultToName:(S,C)=>S.var("items",C)})};function p(S,C){if(C===!0)return S.var("props",!0);const R=S.var("props",(0,e._)`{}`);return C!==void 0&&m(S,R,C),R}jr.evaluatedPropsToName=p;function m(S,C,R){Object.keys(R).forEach(I=>S.assign((0,e._)`${C}${(0,e.getProperty)(I)}`,!0))}jr.setEvaluated=m;const g={};function b(S,C){return S.scopeValue("func",{ref:C,code:g[C.code]||(g[C.code]=new t._Code(C.code))})}jr.useFunc=b;var y;(function(S){S[S.Num=0]="Num",S[S.Str=1]="Str"})(y||(jr.Type=y={}));function x(S,C,R){if(S instanceof e.Name){const I=C===y.Num;return R?I?(0,e._)`"[" + ${S} + "]"`:(0,e._)`"['" + ${S} + "']"`:I?(0,e._)`"/" + ${S}`:(0,e._)`"/" + ${S}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return R?(0,e.getProperty)(S).toString():"/"+c(S)}jr.getErrorPath=x;function w(S,C,R=S.opts.strictSchema){if(R){if(C=`strict mode: ${C}`,R===!0)throw new Error(C);S.self.logger.warn(C)}}return jr.checkStrictMode=w,jr}var P5={},Xpe;function hx(){if(Xpe)return P5;Xpe=1,Object.defineProperty(P5,"__esModule",{value:!0});const e=Jr(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return P5.default=t,P5}var Qpe;function b7(){return Qpe||(Qpe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Jr(),n=Ni(),r=hx();e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:b})=>b?(0,t.str)`"${g}" keyword must be ${b} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,b=e.keywordError,y,x){const{it:w}=g,{gen:S,compositeRule:C,allErrors:R}=w,I=f(g,b,y);x??(C||R)?u(S,I):l(w,(0,t._)`[${I}]`)}e.reportError=i;function s(g,b=e.keywordError,y){const{it:x}=g,{gen:w,compositeRule:S,allErrors:C}=x,R=f(g,b,y);u(w,R),S||C||l(x,r.default.vErrors)}e.reportExtraError=s;function o(g,b){g.assign(r.default.errors,b),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(b,()=>g.assign((0,t._)`${r.default.vErrors}.length`,b),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:b,schemaValue:y,data:x,errsCount:w,it:S}){if(w===void 0)throw new Error("ajv implementation error");const C=g.name("err");g.forRange("i",w,r.default.errors,R=>{g.const(C,(0,t._)`${r.default.vErrors}[${R}]`),g.if((0,t._)`${C}.instancePath === undefined`,()=>g.assign((0,t._)`${C}.instancePath`,(0,t.strConcat)(r.default.instancePath,S.errorPath))),g.assign((0,t._)`${C}.schemaPath`,(0,t.str)`${S.errSchemaPath}/${b}`),S.opts.verbose&&(g.assign((0,t._)`${C}.schema`,y),g.assign((0,t._)`${C}.data`,x))})}e.extendErrors=a;function u(g,b){const y=g.const("err",b);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${y}]`),(0,t._)`${r.default.vErrors}.push(${y})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,b){const{gen:y,validateName:x,schemaEnv:w}=g;w.$async?y.throw((0,t._)`new ${g.ValidationError}(${b})`):(y.assign((0,t._)`${x}.errors`,b),y.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,b,y){const{createErrors:x}=g.it;return x===!1?(0,t._)`{}`:d(g,b,y)}function d(g,b,y={}){const{gen:x,it:w}=g,S=[h(w,y),p(g,y)];return m(g,b,S),x.object(...S)}function h({errorPath:g},{instancePath:b}){const y=b?(0,t.str)`${g}${(0,n.getErrorPath)(b,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,y)]}function p({keyword:g,it:{errSchemaPath:b}},{schemaPath:y,parentSchema:x}){let w=x?b:(0,t.str)`${b}/${g}`;return y&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(y,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:b,message:y},x){const{keyword:w,data:S,schemaValue:C,it:R}=g,{opts:I,propertyName:O,topSchemaRef:M,schemaPath:L}=R;x.push([c.keyword,w],[c.params,typeof b=="function"?b(g):b||(0,t._)`{}`]),I.messages&&x.push([c.message,typeof y=="function"?y(g):y]),I.verbose&&x.push([c.schema,C],[c.parentSchema,(0,t._)`${M}${L}`],[r.default.data,S]),O&&x.push([c.propertyName,O])}}($j)),$j}var Jpe;function izt(){if(Jpe)return Jx;Jpe=1,Object.defineProperty(Jx,"__esModule",{value:!0}),Jx.boolOrEmptySchema=Jx.topBoolOrEmptySchema=void 0;const e=b7(),t=Jr(),n=hx(),r={message:"boolean schema is false"};function i(a){const{gen:u,schema:l,validateName:c}=a;l===!1?o(a,!1):typeof l=="object"&&l.$async===!0?u.return(n.default.data):(u.assign((0,t._)`${c}.errors`,null),u.return(!0))}Jx.topBoolOrEmptySchema=i;function s(a,u){const{gen:l,schema:c}=a;c===!1?(l.var(u,!1),o(a)):l.var(u,!0)}Jx.boolOrEmptySchema=s;function o(a,u){const{gen:l,data:c}=a,f={gen:l,keyword:"false schema",data:c,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(f,r,void 0,u)}return Jx}var ul={},Zx={},Zpe;function V5e(){if(Zpe)return Zx;Zpe=1,Object.defineProperty(Zx,"__esModule",{value:!0}),Zx.getRules=Zx.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(i){return typeof i=="string"&&t.has(i)}Zx.isJSONType=n;function r(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return Zx.getRules=r,Zx}var Cy={},e0e;function H5e(){if(e0e)return Cy;e0e=1,Object.defineProperty(Cy,"__esModule",{value:!0}),Cy.shouldUseRule=Cy.shouldUseGroup=Cy.schemaHasRulesForType=void 0;function e({schema:r,self:i},s){const o=i.RULES.types[s];return o&&o!==!0&&t(r,o)}Cy.schemaHasRulesForType=e;function t(r,i){return i.rules.some(s=>n(r,s))}Cy.shouldUseGroup=t;function n(r,i){var s;return r[i.keyword]!==void 0||((s=i.definition.implements)===null||s===void 0?void 0:s.some(o=>r[o]!==void 0))}return Cy.shouldUseRule=n,Cy}var t0e;function DO(){if(t0e)return ul;t0e=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.reportTypeError=ul.checkDataTypes=ul.checkDataType=ul.coerceAndCheckDataType=ul.getJSONTypes=ul.getSchemaTypes=ul.DataType=void 0;const e=V5e(),t=H5e(),n=b7(),r=Jr(),i=Ni();var s;(function(y){y[y.Correct=0]="Correct",y[y.Wrong=1]="Wrong"})(s||(ul.DataType=s={}));function o(y){const x=a(y.type);if(x.includes("null")){if(y.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!x.length&&y.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');y.nullable===!0&&x.push("null")}return x}ul.getSchemaTypes=o;function a(y){const x=Array.isArray(y)?y:y?[y]:[];if(x.every(e.isJSONType))return x;throw new Error("type must be JSONType or JSONType[]: "+x.join(","))}ul.getJSONTypes=a;function u(y,x){const{gen:w,data:S,opts:C}=y,R=c(x,C.coerceTypes),I=x.length>0&&!(R.length===0&&x.length===1&&(0,t.schemaHasRulesForType)(y,x[0]));if(I){const O=p(x,S,C.strictNumbers,s.Wrong);w.if(O,()=>{R.length?f(y,x,R):g(y)})}return I}ul.coerceAndCheckDataType=u;const l=new Set(["string","number","integer","boolean","null"]);function c(y,x){return x?y.filter(w=>l.has(w)||x==="array"&&w==="array"):[]}function f(y,x,w){const{gen:S,data:C,opts:R}=y,I=S.let("dataType",(0,r._)`typeof ${C}`),O=S.let("coerced",(0,r._)`undefined`);R.coerceTypes==="array"&&S.if((0,r._)`${I} == 'object' && Array.isArray(${C}) && ${C}.length == 1`,()=>S.assign(C,(0,r._)`${C}[0]`).assign(I,(0,r._)`typeof ${C}`).if(p(x,C,R.strictNumbers),()=>S.assign(O,C))),S.if((0,r._)`${O} !== undefined`);for(const L of w)(l.has(L)||L==="array"&&R.coerceTypes==="array")&&M(L);S.else(),g(y),S.endIf(),S.if((0,r._)`${O} !== undefined`,()=>{S.assign(C,O),d(y,O)});function M(L){switch(L){case"string":S.elseIf((0,r._)`${I} == "number" || ${I} == "boolean"`).assign(O,(0,r._)`"" + ${C}`).elseIf((0,r._)`${C} === null`).assign(O,(0,r._)`""`);return;case"number":S.elseIf((0,r._)`${I} == "boolean" || ${C} === null
              || (${I} == "string" && ${C} && ${C} == +${C})`).assign(O,(0,r._)`+${C}`);return;case"integer":S.elseIf((0,r._)`${I} === "boolean" || ${C} === null
              || (${I} === "string" && ${C} && ${C} == +${C} && !(${C} % 1))`).assign(O,(0,r._)`+${C}`);return;case"boolean":S.elseIf((0,r._)`${C} === "false" || ${C} === 0 || ${C} === null`).assign(O,!1).elseIf((0,r._)`${C} === "true" || ${C} === 1`).assign(O,!0);return;case"null":S.elseIf((0,r._)`${C} === "" || ${C} === 0 || ${C} === false`),S.assign(O,null);return;case"array":S.elseIf((0,r._)`${I} === "string" || ${I} === "number"
              || ${I} === "boolean" || ${C} === null`).assign(O,(0,r._)`[${C}]`)}}}function d({gen:y,parentData:x,parentDataProperty:w},S){y.if((0,r._)`${x} !== undefined`,()=>y.assign((0,r._)`${x}[${w}]`,S))}function h(y,x,w,S=s.Correct){const C=S===s.Correct?r.operators.EQ:r.operators.NEQ;let R;switch(y){case"null":return(0,r._)`${x} ${C} null`;case"array":R=(0,r._)`Array.isArray(${x})`;break;case"object":R=(0,r._)`${x} && typeof ${x} == "object" && !Array.isArray(${x})`;break;case"integer":R=I((0,r._)`!(${x} % 1) && !isNaN(${x})`);break;case"number":R=I();break;default:return(0,r._)`typeof ${x} ${C} ${y}`}return S===s.Correct?R:(0,r.not)(R);function I(O=r.nil){return(0,r.and)((0,r._)`typeof ${x} == "number"`,O,w?(0,r._)`isFinite(${x})`:r.nil)}}ul.checkDataType=h;function p(y,x,w,S){if(y.length===1)return h(y[0],x,w,S);let C;const R=(0,i.toHash)(y);if(R.array&&R.object){const I=(0,r._)`typeof ${x} != "object"`;C=R.null?I:(0,r._)`!${x} || ${I}`,delete R.null,delete R.array,delete R.object}else C=r.nil;R.number&&delete R.integer;for(const I in R)C=(0,r.and)(C,h(I,x,w,S));return C}ul.checkDataTypes=p;const m={message:({schema:y})=>`must be ${y}`,params:({schema:y,schemaValue:x})=>typeof y=="string"?(0,r._)`{type: ${y}}`:(0,r._)`{type: ${x}}`};function g(y){const x=b(y);(0,n.reportError)(x,m)}ul.reportTypeError=g;function b(y){const{gen:x,data:w,schema:S}=y,C=(0,i.schemaRefOrVal)(y,S,"type");return{gen:x,keyword:"type",data:w,schema:S.type,schemaCode:C,schemaValue:C,parentSchema:S,params:{},it:y}}return ul}var g3={},n0e;function szt(){if(n0e)return g3;n0e=1,Object.defineProperty(g3,"__esModule",{value:!0}),g3.assignDefaults=void 0;const e=Jr(),t=Ni();function n(i,s){const{properties:o,items:a}=i.schema;if(s==="object"&&o)for(const u in o)r(i,u,o[u].default);else s==="array"&&Array.isArray(a)&&a.forEach((u,l)=>r(i,l,u.default))}g3.assignDefaults=n;function r(i,s,o){const{gen:a,compositeRule:u,data:l,opts:c}=i;if(o===void 0)return;const f=(0,e._)`${l}${(0,e.getProperty)(s)}`;if(u){(0,t.checkStrictMode)(i,`default is ignored for: ${f}`);return}let d=(0,e._)`${f} === undefined`;c.useDefaults==="empty"&&(d=(0,e._)`${d} || ${f} === null || ${f} === ""`),a.if(d,(0,e._)`${f} = ${(0,e.stringify)(o)}`)}return g3}var Qp={},is={},r0e;function K0(){if(r0e)return is;r0e=1,Object.defineProperty(is,"__esModule",{value:!0}),is.validateUnion=is.validateArray=is.usePattern=is.callValidateCode=is.schemaProperties=is.allSchemaProperties=is.noPropertyInData=is.propertyInData=is.isOwnProperty=is.hasPropFunc=is.reportMissingProp=is.checkMissingProp=is.checkReportMissingProp=void 0;const e=Jr(),t=Ni(),n=hx(),r=Ni();function i(y,x){const{gen:w,data:S,it:C}=y;w.if(c(w,S,x,C.opts.ownProperties),()=>{y.setParams({missingProperty:(0,e._)`${x}`},!0),y.error()})}is.checkReportMissingProp=i;function s({gen:y,data:x,it:{opts:w}},S,C){return(0,e.or)(...S.map(R=>(0,e.and)(c(y,x,R,w.ownProperties),(0,e._)`${C} = ${R}`)))}is.checkMissingProp=s;function o(y,x){y.setParams({missingProperty:x},!0),y.error()}is.reportMissingProp=o;function a(y){return y.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}is.hasPropFunc=a;function u(y,x,w){return(0,e._)`${a(y)}.call(${x}, ${w})`}is.isOwnProperty=u;function l(y,x,w,S){const C=(0,e._)`${x}${(0,e.getProperty)(w)} !== undefined`;return S?(0,e._)`${C} && ${u(y,x,w)}`:C}is.propertyInData=l;function c(y,x,w,S){const C=(0,e._)`${x}${(0,e.getProperty)(w)} === undefined`;return S?(0,e.or)(C,(0,e.not)(u(y,x,w))):C}is.noPropertyInData=c;function f(y){return y?Object.keys(y).filter(x=>x!=="__proto__"):[]}is.allSchemaProperties=f;function d(y,x){return f(x).filter(w=>!(0,t.alwaysValidSchema)(y,x[w]))}is.schemaProperties=d;function h({schemaCode:y,data:x,it:{gen:w,topSchemaRef:S,schemaPath:C,errorPath:R},it:I},O,M,L){const H=L?(0,e._)`${y}, ${x}, ${S}${C}`:x,D=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,R)],[n.default.parentData,I.parentData],[n.default.parentDataProperty,I.parentDataProperty],[n.default.rootData,n.default.rootData]];I.opts.dynamicRef&&D.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const B=(0,e._)`${H}, ${w.object(...D)}`;return M!==e.nil?(0,e._)`${O}.call(${M}, ${B})`:(0,e._)`${O}(${B})`}is.callValidateCode=h;const p=(0,e._)`new RegExp`;function m({gen:y,it:{opts:x}},w){const S=x.unicodeRegExp?"u":"",{regExp:C}=x.code,R=C(w,S);return y.scopeValue("pattern",{key:R.toString(),ref:R,code:(0,e._)`${C.code==="new RegExp"?p:(0,r.useFunc)(y,C)}(${w}, ${S})`})}is.usePattern=m;function g(y){const{gen:x,data:w,keyword:S,it:C}=y,R=x.name("valid");if(C.allErrors){const O=x.let("valid",!0);return I(()=>x.assign(O,!1)),O}return x.var(R,!0),I(()=>x.break()),R;function I(O){const M=x.const("len",(0,e._)`${w}.length`);x.forRange("i",0,M,L=>{y.subschema({keyword:S,dataProp:L,dataPropType:t.Type.Num},R),x.if((0,e.not)(R),O)})}}is.validateArray=g;function b(y){const{gen:x,schema:w,keyword:S,it:C}=y;if(!Array.isArray(w))throw new Error("ajv implementation error");if(w.some(M=>(0,t.alwaysValidSchema)(C,M))&&!C.opts.unevaluated)return;const I=x.let("valid",!1),O=x.name("_valid");x.block(()=>w.forEach((M,L)=>{const H=y.subschema({keyword:S,schemaProp:L,compositeRule:!0},O);x.assign(I,(0,e._)`${I} || ${O}`),y.mergeValidEvaluated(H,O)||x.if((0,e.not)(I))})),y.result(I,()=>y.reset(),()=>y.error(!0))}return is.validateUnion=b,is}var i0e;function ozt(){if(i0e)return Qp;i0e=1,Object.defineProperty(Qp,"__esModule",{value:!0}),Qp.validateKeywordUsage=Qp.validSchemaType=Qp.funcKeywordCode=Qp.macroKeywordCode=void 0;const e=Jr(),t=hx(),n=K0(),r=b7();function i(d,h){const{gen:p,keyword:m,schema:g,parentSchema:b,it:y}=d,x=h.macro.call(y.self,g,b,y),w=l(p,m,x);y.opts.validateSchema!==!1&&y.self.validateSchema(x,!0);const S=p.name("valid");d.subschema({schema:x,schemaPath:e.nil,errSchemaPath:`${y.errSchemaPath}/${m}`,topSchemaRef:w,compositeRule:!0},S),d.pass(S,()=>d.error(!0))}Qp.macroKeywordCode=i;function s(d,h){var p;const{gen:m,keyword:g,schema:b,parentSchema:y,$data:x,it:w}=d;u(w,h);const S=!x&&h.compile?h.compile.call(w.self,b,y,w):h.validate,C=l(m,g,S),R=m.let("valid");d.block$data(R,I),d.ok((p=h.valid)!==null&&p!==void 0?p:R);function I(){if(h.errors===!1)L(),h.modifying&&o(d),H(()=>d.error());else{const D=h.async?O():M();h.modifying&&o(d),H(()=>a(d,D))}}function O(){const D=m.let("ruleErrs",null);return m.try(()=>L((0,e._)`await `),B=>m.assign(R,!1).if((0,e._)`${B} instanceof ${w.ValidationError}`,()=>m.assign(D,(0,e._)`${B}.errors`),()=>m.throw(B))),D}function M(){const D=(0,e._)`${C}.errors`;return m.assign(D,null),L(e.nil),D}function L(D=h.async?(0,e._)`await `:e.nil){const B=w.opts.passContext?t.default.this:t.default.self,z=!("compile"in h&&!x||h.schema===!1);m.assign(R,(0,e._)`${D}${(0,n.callValidateCode)(d,C,B,z)}`,h.modifying)}function H(D){var B;m.if((0,e.not)((B=h.valid)!==null&&B!==void 0?B:R),D)}}Qp.funcKeywordCode=s;function o(d){const{gen:h,data:p,it:m}=d;h.if(m.parentData,()=>h.assign(p,(0,e._)`${m.parentData}[${m.parentDataProperty}]`))}function a(d,h){const{gen:p}=d;p.if((0,e._)`Array.isArray(${h})`,()=>{p.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${h} : ${t.default.vErrors}.concat(${h})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(d)},()=>d.error())}function u({schemaEnv:d},h){if(h.async&&!d.$async)throw new Error("async keyword in sync schema")}function l(d,h,p){if(p===void 0)throw new Error(`keyword "${h}" failed to compile`);return d.scopeValue("keyword",typeof p=="function"?{ref:p}:{ref:p,code:(0,e.stringify)(p)})}function c(d,h,p=!1){return!h.length||h.some(m=>m==="array"?Array.isArray(d):m==="object"?d&&typeof d=="object"&&!Array.isArray(d):typeof d==m||p&&typeof d>"u")}Qp.validSchemaType=c;function f({schema:d,opts:h,self:p,errSchemaPath:m},g,b){if(Array.isArray(g.keyword)?!g.keyword.includes(b):g.keyword!==b)throw new Error("ajv implementation error");const y=g.dependencies;if(y!=null&&y.some(x=>!Object.prototype.hasOwnProperty.call(d,x)))throw new Error(`parent schema must have dependencies of ${b}: ${y.join(",")}`);if(g.validateSchema&&!g.validateSchema(d[b])){const w=`keyword "${b}" value is invalid at path "${m}": `+p.errorsText(g.validateSchema.errors);if(h.validateSchema==="log")p.logger.error(w);else throw new Error(w)}}return Qp.validateKeywordUsage=f,Qp}var Ay={},s0e;function azt(){if(s0e)return Ay;s0e=1,Object.defineProperty(Ay,"__esModule",{value:!0}),Ay.extendSubschemaMode=Ay.extendSubschemaData=Ay.getSubschema=void 0;const e=Jr(),t=Ni();function n(s,{keyword:o,schemaProp:a,schema:u,schemaPath:l,errSchemaPath:c,topSchemaRef:f}){if(o!==void 0&&u!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const d=s.schema[o];return a===void 0?{schema:d,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${o}`}:{schema:d[a],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${o}/${(0,t.escapeFragment)(a)}`}}if(u!==void 0){if(l===void 0||c===void 0||f===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:u,schemaPath:l,topSchemaRef:f,errSchemaPath:c}}throw new Error('either "keyword" or "schema" must be passed')}Ay.getSubschema=n;function r(s,o,{dataProp:a,dataPropType:u,data:l,dataTypes:c,propertyName:f}){if(l!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:d}=o;if(a!==void 0){const{errorPath:p,dataPathArr:m,opts:g}=o,b=d.let("data",(0,e._)`${o.data}${(0,e.getProperty)(a)}`,!0);h(b),s.errorPath=(0,e.str)`${p}${(0,t.getErrorPath)(a,u,g.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${a}`,s.dataPathArr=[...m,s.parentDataProperty]}if(l!==void 0){const p=l instanceof e.Name?l:d.let("data",l,!0);h(p),f!==void 0&&(s.propertyName=f)}c&&(s.dataTypes=c);function h(p){s.data=p,s.dataLevel=o.dataLevel+1,s.dataTypes=[],o.definedProperties=new Set,s.parentData=o.data,s.dataNames=[...o.dataNames,p]}}Ay.extendSubschemaData=r;function i(s,{jtdDiscriminator:o,jtdMetadata:a,compositeRule:u,createErrors:l,allErrors:c}){u!==void 0&&(s.compositeRule=u),l!==void 0&&(s.createErrors=l),c!==void 0&&(s.allErrors=c),s.jtdDiscriminator=o,s.jtdMetadata=a}return Ay.extendSubschemaMode=i,Ay}var Yc={},zj={exports:{}},o0e;function uzt(){if(o0e)return zj.exports;o0e=1;var e=zj.exports=function(r,i,s){typeof i=="function"&&(s=i,i={}),s=i.cb||s;var o=typeof s=="function"?s:s.pre||function(){},a=s.post||function(){};t(i,o,a,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,i,s,o,a,u,l,c,f,d){if(o&&typeof o=="object"&&!Array.isArray(o)){i(o,a,u,l,c,f,d);for(var h in o){var p=o[h];if(Array.isArray(p)){if(h in e.arrayKeywords)for(var m=0;m<p.length;m++)t(r,i,s,p[m],a+"/"+h+"/"+m,u,a,h,o,m)}else if(h in e.propsKeywords){if(p&&typeof p=="object")for(var g in p)t(r,i,s,p[g],a+"/"+h+"/"+n(g),u,a,h,o,g)}else(h in e.keywords||r.allKeys&&!(h in e.skipKeywords))&&t(r,i,s,p,a+"/"+h,u,a,h,o)}s(o,a,u,l,c,f,d)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return zj.exports}var a0e;function x7(){if(a0e)return Yc;a0e=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.getSchemaRefs=Yc.resolveUrl=Yc.normalizeId=Yc._getFullPath=Yc.getFullPath=Yc.inlineRef=void 0;const e=Ni(),t=GY(),n=uzt(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(m,g=!0){return typeof m=="boolean"?!0:g===!0?!o(m):g?a(m)<=g:!1}Yc.inlineRef=i;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(m){for(const g in m){if(s.has(g))return!0;const b=m[g];if(Array.isArray(b)&&b.some(o)||typeof b=="object"&&o(b))return!0}return!1}function a(m){let g=0;for(const b in m){if(b==="$ref")return 1/0;if(g++,!r.has(b)&&(typeof m[b]=="object"&&(0,e.eachItem)(m[b],y=>g+=a(y)),g===1/0))return 1/0}return g}function u(m,g="",b){b!==!1&&(g=f(g));const y=m.parse(g);return l(m,y)}Yc.getFullPath=u;function l(m,g){return m.serialize(g).split("#")[0]+"#"}Yc._getFullPath=l;const c=/#\/?$/;function f(m){return m?m.replace(c,""):""}Yc.normalizeId=f;function d(m,g,b){return b=f(b),m.resolve(g,b)}Yc.resolveUrl=d;const h=/^[a-z_][-a-z0-9._]*$/i;function p(m,g){if(typeof m=="boolean")return{};const{schemaId:b,uriResolver:y}=this.opts,x=f(m[b]||g),w={"":x},S=u(y,x,!1),C={},R=new Set;return n(m,{allKeys:!0},(M,L,H,D)=>{if(D===void 0)return;const B=S+L;let z=w[D];typeof M[b]=="string"&&(z=G.call(this,M[b])),Z.call(this,M.$anchor),Z.call(this,M.$dynamicAnchor),w[L]=z;function G(ne){const ue=this.opts.uriResolver.resolve;if(ne=f(z?ue(z,ne):ne),R.has(ne))throw O(ne);R.add(ne);let X=this.refs[ne];return typeof X=="string"&&(X=this.refs[X]),typeof X=="object"?I(M,X.schema,ne):ne!==f(B)&&(ne[0]==="#"?(I(M,C[ne],ne),C[ne]=M):this.refs[ne]=B),ne}function Z(ne){if(typeof ne=="string"){if(!h.test(ne))throw new Error(`invalid anchor "${ne}"`);G.call(this,`#${ne}`)}}}),C;function I(M,L,H){if(L!==void 0&&!t(M,L))throw O(H)}function O(M){return new Error(`reference "${M}" resolves to more than one schema`)}}return Yc.getSchemaRefs=p,Yc}var u0e;function _7(){if(u0e)return Ty;u0e=1,Object.defineProperty(Ty,"__esModule",{value:!0}),Ty.getData=Ty.KeywordCxt=Ty.validateFunctionCode=void 0;const e=izt(),t=DO(),n=H5e(),r=DO(),i=szt(),s=ozt(),o=azt(),a=Jr(),u=hx(),l=x7(),c=Ni(),f=b7();function d(ge){if(S(ge)&&(R(ge),w(ge))){g(ge);return}h(ge,()=>(0,e.topBoolOrEmptySchema)(ge))}Ty.validateFunctionCode=d;function h({gen:ge,validateName:me,schema:Oe,schemaEnv:Me,opts:Ye},lt){Ye.code.es5?ge.func(me,(0,a._)`${u.default.data}, ${u.default.valCxt}`,Me.$async,()=>{ge.code((0,a._)`"use strict"; ${y(Oe,Ye)}`),m(ge,Ye),ge.code(lt)}):ge.func(me,(0,a._)`${u.default.data}, ${p(Ye)}`,Me.$async,()=>ge.code(y(Oe,Ye)).code(lt))}function p(ge){return(0,a._)`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${ge.dynamicRef?(0,a._)`, ${u.default.dynamicAnchors}={}`:a.nil}}={}`}function m(ge,me){ge.if(u.default.valCxt,()=>{ge.var(u.default.instancePath,(0,a._)`${u.default.valCxt}.${u.default.instancePath}`),ge.var(u.default.parentData,(0,a._)`${u.default.valCxt}.${u.default.parentData}`),ge.var(u.default.parentDataProperty,(0,a._)`${u.default.valCxt}.${u.default.parentDataProperty}`),ge.var(u.default.rootData,(0,a._)`${u.default.valCxt}.${u.default.rootData}`),me.dynamicRef&&ge.var(u.default.dynamicAnchors,(0,a._)`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{ge.var(u.default.instancePath,(0,a._)`""`),ge.var(u.default.parentData,(0,a._)`undefined`),ge.var(u.default.parentDataProperty,(0,a._)`undefined`),ge.var(u.default.rootData,u.default.data),me.dynamicRef&&ge.var(u.default.dynamicAnchors,(0,a._)`{}`)})}function g(ge){const{schema:me,opts:Oe,gen:Me}=ge;h(ge,()=>{Oe.$comment&&me.$comment&&D(ge),M(ge),Me.let(u.default.vErrors,null),Me.let(u.default.errors,0),Oe.unevaluated&&b(ge),I(ge),B(ge)})}function b(ge){const{gen:me,validateName:Oe}=ge;ge.evaluated=me.const("evaluated",(0,a._)`${Oe}.evaluated`),me.if((0,a._)`${ge.evaluated}.dynamicProps`,()=>me.assign((0,a._)`${ge.evaluated}.props`,(0,a._)`undefined`)),me.if((0,a._)`${ge.evaluated}.dynamicItems`,()=>me.assign((0,a._)`${ge.evaluated}.items`,(0,a._)`undefined`))}function y(ge,me){const Oe=typeof ge=="object"&&ge[me.schemaId];return Oe&&(me.code.source||me.code.process)?(0,a._)`/*# sourceURL=${Oe} */`:a.nil}function x(ge,me){if(S(ge)&&(R(ge),w(ge))){C(ge,me);return}(0,e.boolOrEmptySchema)(ge,me)}function w({schema:ge,self:me}){if(typeof ge=="boolean")return!ge;for(const Oe in ge)if(me.RULES.all[Oe])return!0;return!1}function S(ge){return typeof ge.schema!="boolean"}function C(ge,me){const{schema:Oe,gen:Me,opts:Ye}=ge;Ye.$comment&&Oe.$comment&&D(ge),L(ge),H(ge);const lt=Me.const("_errs",u.default.errors);I(ge,lt),Me.var(me,(0,a._)`${lt} === ${u.default.errors}`)}function R(ge){(0,c.checkUnknownRules)(ge),O(ge)}function I(ge,me){if(ge.opts.jtd)return G(ge,[],!1,me);const Oe=(0,t.getSchemaTypes)(ge.schema),Me=(0,t.coerceAndCheckDataType)(ge,Oe);G(ge,Oe,!Me,me)}function O(ge){const{schema:me,errSchemaPath:Oe,opts:Me,self:Ye}=ge;me.$ref&&Me.ignoreKeywordsWithRef&&(0,c.schemaHasRulesButRef)(me,Ye.RULES)&&Ye.logger.warn(`$ref: keywords ignored in schema at path "${Oe}"`)}function M(ge){const{schema:me,opts:Oe}=ge;me.default!==void 0&&Oe.useDefaults&&Oe.strictSchema&&(0,c.checkStrictMode)(ge,"default is ignored in the schema root")}function L(ge){const me=ge.schema[ge.opts.schemaId];me&&(ge.baseId=(0,l.resolveUrl)(ge.opts.uriResolver,ge.baseId,me))}function H(ge){if(ge.schema.$async&&!ge.schemaEnv.$async)throw new Error("async schema in sync schema")}function D({gen:ge,schemaEnv:me,schema:Oe,errSchemaPath:Me,opts:Ye}){const lt=Oe.$comment;if(Ye.$comment===!0)ge.code((0,a._)`${u.default.self}.logger.log(${lt})`);else if(typeof Ye.$comment=="function"){const We=(0,a.str)`${Me}/$comment`,nt=ge.scopeValue("root",{ref:me.root});ge.code((0,a._)`${u.default.self}.opts.$comment(${lt}, ${We}, ${nt}.schema)`)}}function B(ge){const{gen:me,schemaEnv:Oe,validateName:Me,ValidationError:Ye,opts:lt}=ge;Oe.$async?me.if((0,a._)`${u.default.errors} === 0`,()=>me.return(u.default.data),()=>me.throw((0,a._)`new ${Ye}(${u.default.vErrors})`)):(me.assign((0,a._)`${Me}.errors`,u.default.vErrors),lt.unevaluated&&z(ge),me.return((0,a._)`${u.default.errors} === 0`))}function z({gen:ge,evaluated:me,props:Oe,items:Me}){Oe instanceof a.Name&&ge.assign((0,a._)`${me}.props`,Oe),Me instanceof a.Name&&ge.assign((0,a._)`${me}.items`,Me)}function G(ge,me,Oe,Me){const{gen:Ye,schema:lt,data:We,allErrors:nt,opts:yt,self:_t}=ge,{RULES:It}=_t;if(lt.$ref&&(yt.ignoreKeywordsWithRef||!(0,c.schemaHasRulesButRef)(lt,It))){Ye.block(()=>ce(ge,"$ref",It.all.$ref.definition));return}yt.jtd||ne(ge,me),Ye.block(()=>{for(const Ke of It.rules)Et(Ke);Et(It.post)});function Et(Ke){(0,n.shouldUseGroup)(lt,Ke)&&(Ke.type?(Ye.if((0,r.checkDataType)(Ke.type,We,yt.strictNumbers)),Z(ge,Ke),me.length===1&&me[0]===Ke.type&&Oe&&(Ye.else(),(0,r.reportTypeError)(ge)),Ye.endIf()):Z(ge,Ke),nt||Ye.if((0,a._)`${u.default.errors} === ${Me||0}`))}}function Z(ge,me){const{gen:Oe,schema:Me,opts:{useDefaults:Ye}}=ge;Ye&&(0,i.assignDefaults)(ge,me.type),Oe.block(()=>{for(const lt of me.rules)(0,n.shouldUseRule)(Me,lt)&&ce(ge,lt.keyword,lt.definition,me.type)})}function ne(ge,me){ge.schemaEnv.meta||!ge.opts.strictTypes||(ue(ge,me),ge.opts.allowUnionTypes||X(ge,me),q(ge,ge.dataTypes))}function ue(ge,me){if(me.length){if(!ge.dataTypes.length){ge.dataTypes=me;return}me.forEach(Oe=>{W(ge.dataTypes,Oe)||oe(ge,`type "${Oe}" not allowed by context "${ge.dataTypes.join(",")}"`)}),ee(ge,me)}}function X(ge,me){me.length>1&&!(me.length===2&&me.includes("null"))&&oe(ge,"use allowUnionTypes to allow union type keyword")}function q(ge,me){const Oe=ge.self.RULES.all;for(const Me in Oe){const Ye=Oe[Me];if(typeof Ye=="object"&&(0,n.shouldUseRule)(ge.schema,Ye)){const{type:lt}=Ye.definition;lt.length&&!lt.some(We=>te(me,We))&&oe(ge,`missing type "${lt.join(",")}" for keyword "${Me}"`)}}}function te(ge,me){return ge.includes(me)||me==="number"&&ge.includes("integer")}function W(ge,me){return ge.includes(me)||me==="integer"&&ge.includes("number")}function ee(ge,me){const Oe=[];for(const Me of ge.dataTypes)W(me,Me)?Oe.push(Me):me.includes("integer")&&Me==="number"&&Oe.push("integer");ge.dataTypes=Oe}function oe(ge,me){const Oe=ge.schemaEnv.baseId+ge.errSchemaPath;me+=` at "${Oe}" (strictTypes)`,(0,c.checkStrictMode)(ge,me,ge.opts.strictTypes)}class pe{constructor(me,Oe,Me){if((0,s.validateKeywordUsage)(me,Oe,Me),this.gen=me.gen,this.allErrors=me.allErrors,this.keyword=Me,this.data=me.data,this.schema=me.schema[Me],this.$data=Oe.$data&&me.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c.schemaRefOrVal)(me,this.schema,Me,this.$data),this.schemaType=Oe.schemaType,this.parentSchema=me.schema,this.params={},this.it=me,this.def=Oe,this.$data)this.schemaCode=me.gen.const("vSchema",Ae(this.$data,me));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,Oe.schemaType,Oe.allowUndefined))throw new Error(`${Me} value must be ${JSON.stringify(Oe.schemaType)}`);("code"in Oe?Oe.trackErrors:Oe.errors!==!1)&&(this.errsCount=me.gen.const("_errs",u.default.errors))}result(me,Oe,Me){this.failResult((0,a.not)(me),Oe,Me)}failResult(me,Oe,Me){this.gen.if(me),Me?Me():this.error(),Oe?(this.gen.else(),Oe(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(me,Oe){this.failResult((0,a.not)(me),void 0,Oe)}fail(me){if(me===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(me),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(me){if(!this.$data)return this.fail(me);const{schemaCode:Oe}=this;this.fail((0,a._)`${Oe} !== undefined && (${(0,a.or)(this.invalid$data(),me)})`)}error(me,Oe,Me){if(Oe){this.setParams(Oe),this._error(me,Me),this.setParams({});return}this._error(me,Me)}_error(me,Oe){(me?f.reportExtraError:f.reportError)(this,this.def.error,Oe)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(me){this.allErrors||this.gen.if(me)}setParams(me,Oe){Oe?Object.assign(this.params,me):this.params=me}block$data(me,Oe,Me=a.nil){this.gen.block(()=>{this.check$data(me,Me),Oe()})}check$data(me=a.nil,Oe=a.nil){if(!this.$data)return;const{gen:Me,schemaCode:Ye,schemaType:lt,def:We}=this;Me.if((0,a.or)((0,a._)`${Ye} === undefined`,Oe)),me!==a.nil&&Me.assign(me,!0),(lt.length||We.validateSchema)&&(Me.elseIf(this.invalid$data()),this.$dataError(),me!==a.nil&&Me.assign(me,!1)),Me.else()}invalid$data(){const{gen:me,schemaCode:Oe,schemaType:Me,def:Ye,it:lt}=this;return(0,a.or)(We(),nt());function We(){if(Me.length){if(!(Oe instanceof a.Name))throw new Error("ajv implementation error");const yt=Array.isArray(Me)?Me:[Me];return(0,a._)`${(0,r.checkDataTypes)(yt,Oe,lt.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}function nt(){if(Ye.validateSchema){const yt=me.scopeValue("validate$data",{ref:Ye.validateSchema});return(0,a._)`!${yt}(${Oe})`}return a.nil}}subschema(me,Oe){const Me=(0,o.getSubschema)(this.it,me);(0,o.extendSubschemaData)(Me,this.it,me),(0,o.extendSubschemaMode)(Me,me);const Ye={...this.it,...Me,items:void 0,props:void 0};return x(Ye,Oe),Ye}mergeEvaluated(me,Oe){const{it:Me,gen:Ye}=this;Me.opts.unevaluated&&(Me.props!==!0&&me.props!==void 0&&(Me.props=c.mergeEvaluated.props(Ye,me.props,Me.props,Oe)),Me.items!==!0&&me.items!==void 0&&(Me.items=c.mergeEvaluated.items(Ye,me.items,Me.items,Oe)))}mergeValidEvaluated(me,Oe){const{it:Me,gen:Ye}=this;if(Me.opts.unevaluated&&(Me.props!==!0||Me.items!==!0))return Ye.if(Oe,()=>this.mergeEvaluated(me,a.Name)),!0}}Ty.KeywordCxt=pe;function ce(ge,me,Oe,Me){const Ye=new pe(ge,Oe,me);"code"in Oe?Oe.code(Ye,Me):Ye.$data&&Oe.validate?(0,s.funcKeywordCode)(Ye,Oe):"macro"in Oe?(0,s.macroKeywordCode)(Ye,Oe):(Oe.compile||Oe.validate)&&(0,s.funcKeywordCode)(Ye,Oe)}const he=/^\/(?:[^~]|~0|~1)*$/,Ee=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Ae(ge,{dataLevel:me,dataNames:Oe,dataPathArr:Me}){let Ye,lt;if(ge==="")return u.default.rootData;if(ge[0]==="/"){if(!he.test(ge))throw new Error(`Invalid JSON-pointer: ${ge}`);Ye=ge,lt=u.default.rootData}else{const _t=Ee.exec(ge);if(!_t)throw new Error(`Invalid JSON-pointer: ${ge}`);const It=+_t[1];if(Ye=_t[2],Ye==="#"){if(It>=me)throw new Error(yt("property/index",It));return Me[me-It]}if(It>me)throw new Error(yt("data",It));if(lt=Oe[me-It],!Ye)return lt}let We=lt;const nt=Ye.split("/");for(const _t of nt)_t&&(lt=(0,a._)`${lt}${(0,a.getProperty)((0,c.unescapeJsonPointer)(_t))}`,We=(0,a._)`${We} && ${lt}`);return We;function yt(_t,It){return`Cannot access ${_t} ${It} levels up, current level is ${me}`}}return Ty.getData=Ae,Ty}var N5={},l0e;function Qee(){if(l0e)return N5;l0e=1,Object.defineProperty(N5,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return N5.default=e,N5}var D5={},c0e;function w7(){if(c0e)return D5;c0e=1,Object.defineProperty(D5,"__esModule",{value:!0});const e=x7();class t extends Error{constructor(r,i,s,o){super(o||`can't resolve reference ${s} from id ${i}`),this.missingRef=(0,e.resolveUrl)(r,i,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return D5.default=t,D5}var Bd={},f0e;function Jee(){if(f0e)return Bd;f0e=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.resolveSchema=Bd.getCompilingSchema=Bd.resolveRef=Bd.compileSchema=Bd.SchemaEnv=void 0;const e=Jr(),t=Qee(),n=hx(),r=x7(),i=Ni(),s=_7();class o{constructor(b){var y;this.refs={},this.dynamicAnchors={};let x;typeof b.schema=="object"&&(x=b.schema),this.schema=b.schema,this.schemaId=b.schemaId,this.root=b.root||this,this.baseId=(y=b.baseId)!==null&&y!==void 0?y:(0,r.normalizeId)(x==null?void 0:x[b.schemaId||"$id"]),this.schemaPath=b.schemaPath,this.localRefs=b.localRefs,this.meta=b.meta,this.$async=x==null?void 0:x.$async,this.refs={}}}Bd.SchemaEnv=o;function a(g){const b=c.call(this,g);if(b)return b;const y=(0,r.getFullPath)(this.opts.uriResolver,g.root.baseId),{es5:x,lines:w}=this.opts.code,{ownProperties:S}=this.opts,C=new e.CodeGen(this.scope,{es5:x,lines:w,ownProperties:S});let R;g.$async&&(R=C.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const I=C.scopeName("validate");g.validateName=I;const O={gen:C,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:C.scopeValue("schema",this.opts.code.source===!0?{ref:g.schema,code:(0,e.stringify)(g.schema)}:{ref:g.schema}),validateName:I,ValidationError:R,schema:g.schema,schemaEnv:g,rootId:y,baseId:g.baseId||y,schemaPath:e.nil,errSchemaPath:g.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let M;try{this._compilations.add(g),(0,s.validateFunctionCode)(O),C.optimize(this.opts.code.optimize);const L=C.toString();M=`${C.scopeRefs(n.default.scope)}return ${L}`,this.opts.code.process&&(M=this.opts.code.process(M,g));const D=new Function(`${n.default.self}`,`${n.default.scope}`,M)(this,this.scope.get());if(this.scope.value(I,{ref:D}),D.errors=null,D.schema=g.schema,D.schemaEnv=g,g.$async&&(D.$async=!0),this.opts.code.source===!0&&(D.source={validateName:I,validateCode:L,scopeValues:C._values}),this.opts.unevaluated){const{props:B,items:z}=O;D.evaluated={props:B instanceof e.Name?void 0:B,items:z instanceof e.Name?void 0:z,dynamicProps:B instanceof e.Name,dynamicItems:z instanceof e.Name},D.source&&(D.source.evaluated=(0,e.stringify)(D.evaluated))}return g.validate=D,g}catch(L){throw delete g.validate,delete g.validateName,M&&this.logger.error("Error compiling schema, function code:",M),L}finally{this._compilations.delete(g)}}Bd.compileSchema=a;function u(g,b,y){var x;y=(0,r.resolveUrl)(this.opts.uriResolver,b,y);const w=g.refs[y];if(w)return w;let S=d.call(this,g,y);if(S===void 0){const C=(x=g.localRefs)===null||x===void 0?void 0:x[y],{schemaId:R}=this.opts;C&&(S=new o({schema:C,schemaId:R,root:g,baseId:b}))}if(S!==void 0)return g.refs[y]=l.call(this,S)}Bd.resolveRef=u;function l(g){return(0,r.inlineRef)(g.schema,this.opts.inlineRefs)?g.schema:g.validate?g:a.call(this,g)}function c(g){for(const b of this._compilations)if(f(b,g))return b}Bd.getCompilingSchema=c;function f(g,b){return g.schema===b.schema&&g.root===b.root&&g.baseId===b.baseId}function d(g,b){let y;for(;typeof(y=this.refs[b])=="string";)b=y;return y||this.schemas[b]||h.call(this,g,b)}function h(g,b){const y=this.opts.uriResolver.parse(b),x=(0,r._getFullPath)(this.opts.uriResolver,y);let w=(0,r.getFullPath)(this.opts.uriResolver,g.baseId,void 0);if(Object.keys(g.schema).length>0&&x===w)return m.call(this,y,g);const S=(0,r.normalizeId)(x),C=this.refs[S]||this.schemas[S];if(typeof C=="string"){const R=h.call(this,g,C);return typeof(R==null?void 0:R.schema)!="object"?void 0:m.call(this,y,R)}if(typeof(C==null?void 0:C.schema)=="object"){if(C.validate||a.call(this,C),S===(0,r.normalizeId)(b)){const{schema:R}=C,{schemaId:I}=this.opts,O=R[I];return O&&(w=(0,r.resolveUrl)(this.opts.uriResolver,w,O)),new o({schema:R,schemaId:I,root:g,baseId:w})}return m.call(this,y,C)}}Bd.resolveSchema=h;const p=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function m(g,{baseId:b,schema:y,root:x}){var w;if(((w=g.fragment)===null||w===void 0?void 0:w[0])!=="/")return;for(const R of g.fragment.slice(1).split("/")){if(typeof y=="boolean")return;const I=y[(0,i.unescapeFragment)(R)];if(I===void 0)return;y=I;const O=typeof y=="object"&&y[this.opts.schemaId];!p.has(R)&&O&&(b=(0,r.resolveUrl)(this.opts.uriResolver,b,O))}let S;if(typeof y!="boolean"&&y.$ref&&!(0,i.schemaHasRulesButRef)(y,this.RULES)){const R=(0,r.resolveUrl)(this.opts.uriResolver,b,y.$ref);S=h.call(this,x,R)}const{schemaId:C}=this.opts;if(S=S||new o({schema:y,schemaId:C,root:x,baseId:b}),S.schema!==S.root.schema)return S}return Bd}const lzt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",czt="Meta-schema for $data reference (JSON AnySchema extension proposal)",fzt="object",dzt=["$data"],hzt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},pzt=!1,mzt={$id:lzt,description:czt,type:fzt,required:dzt,properties:hzt,additionalProperties:pzt};var O5={},y3={exports:{}},Vj,d0e;function gzt(){return d0e||(d0e=1,Vj={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),Vj}var Hj,h0e;function yzt(){if(h0e)return Hj;h0e=1;const{HEX:e}=gzt(),t=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function n(m){if(a(m,".")<3)return{host:m,isIPV4:!1};const g=m.match(t)||[],[b]=g;return b?{host:o(b,"."),isIPV4:!0}:{host:m,isIPV4:!1}}function r(m,g=!1){let b="",y=!0;for(const x of m){if(e[x]===void 0)return;x!=="0"&&y===!0&&(y=!1),y||(b+=x)}return g&&b.length===0&&(b="0"),b}function i(m){let g=0;const b={error:!1,address:"",zone:""},y=[],x=[];let w=!1,S=!1,C=!1;function R(){if(x.length){if(w===!1){const I=r(x);if(I!==void 0)y.push(I);else return b.error=!0,!1}x.length=0}return!0}for(let I=0;I<m.length;I++){const O=m[I];if(!(O==="["||O==="]"))if(O===":"){if(S===!0&&(C=!0),!R())break;if(g++,y.push(":"),g>7){b.error=!0;break}I-1>=0&&m[I-1]===":"&&(S=!0);continue}else if(O==="%"){if(!R())break;w=!0}else{x.push(O);continue}}return x.length&&(w?b.zone=x.join(""):C?y.push(x.join("")):y.push(r(x))),b.address=y.join(""),b}function s(m){if(a(m,":")<2)return{host:m,isIPV6:!1};const g=i(m);if(g.error)return{host:m,isIPV6:!1};{let b=g.address,y=g.address;return g.zone&&(b+="%"+g.zone,y+="%25"+g.zone),{host:b,escapedHost:y,isIPV6:!0}}}function o(m,g){let b="",y=!0;const x=m.length;for(let w=0;w<x;w++){const S=m[w];S==="0"&&y?(w+1<=x&&m[w+1]===g||w+1===x)&&(b+=S,y=!1):(S===g?y=!0:y=!1,b+=S)}return b}function a(m,g){let b=0;for(let y=0;y<m.length;y++)m[y]===g&&b++;return b}const u=/^\.\.?\//u,l=/^\/\.(?:\/|$)/u,c=/^\/\.\.(?:\/|$)/u,f=/^\/?(?:.|\n)*?(?=\/|$)/u;function d(m){const g=[];for(;m.length;)if(m.match(u))m=m.replace(u,"");else if(m.match(l))m=m.replace(l,"/");else if(m.match(c))m=m.replace(c,"/"),g.pop();else if(m==="."||m==="..")m="";else{const b=m.match(f);if(b){const y=b[0];m=m.slice(y.length),g.push(y)}else throw new Error("Unexpected dot segment condition")}return g.join("")}function h(m,g){const b=g!==!0?escape:unescape;return m.scheme!==void 0&&(m.scheme=b(m.scheme)),m.userinfo!==void 0&&(m.userinfo=b(m.userinfo)),m.host!==void 0&&(m.host=b(m.host)),m.path!==void 0&&(m.path=b(m.path)),m.query!==void 0&&(m.query=b(m.query)),m.fragment!==void 0&&(m.fragment=b(m.fragment)),m}function p(m){const g=[];if(m.userinfo!==void 0&&(g.push(m.userinfo),g.push("@")),m.host!==void 0){let b=unescape(m.host);const y=n(b);if(y.isIPV4)b=y.host;else{const x=s(y.host);x.isIPV6===!0?b=`[${x.escapedHost}]`:b=m.host}g.push(b)}return(typeof m.port=="number"||typeof m.port=="string")&&(g.push(":"),g.push(String(m.port))),g.length?g.join(""):void 0}return Hj={recomposeAuthority:p,normalizeComponentEncoding:h,removeDotSegments:d,normalizeIPv4:n,normalizeIPv6:s,stringArrayToHexStripped:r},Hj}var qj,p0e;function vzt(){if(p0e)return qj;p0e=1;const e=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(y){return typeof y.secure=="boolean"?y.secure:String(y.scheme).toLowerCase()==="wss"}function r(y){return y.host||(y.error=y.error||"HTTP URIs must have a host."),y}function i(y){const x=String(y.scheme).toLowerCase()==="https";return(y.port===(x?443:80)||y.port==="")&&(y.port=void 0),y.path||(y.path="/"),y}function s(y){return y.secure=n(y),y.resourceName=(y.path||"/")+(y.query?"?"+y.query:""),y.path=void 0,y.query=void 0,y}function o(y){if((y.port===(n(y)?443:80)||y.port==="")&&(y.port=void 0),typeof y.secure=="boolean"&&(y.scheme=y.secure?"wss":"ws",y.secure=void 0),y.resourceName){const[x,w]=y.resourceName.split("?");y.path=x&&x!=="/"?x:void 0,y.query=w,y.resourceName=void 0}return y.fragment=void 0,y}function a(y,x){if(!y.path)return y.error="URN can not be parsed",y;const w=y.path.match(t);if(w){const S=x.scheme||y.scheme||"urn";y.nid=w[1].toLowerCase(),y.nss=w[2];const C=`${S}:${x.nid||y.nid}`,R=b[C];y.path=void 0,R&&(y=R.parse(y,x))}else y.error=y.error||"URN can not be parsed.";return y}function u(y,x){const w=x.scheme||y.scheme||"urn",S=y.nid.toLowerCase(),C=`${w}:${x.nid||S}`,R=b[C];R&&(y=R.serialize(y,x));const I=y,O=y.nss;return I.path=`${S||x.nid}:${O}`,x.skipEscape=!0,I}function l(y,x){const w=y;return w.uuid=w.nss,w.nss=void 0,!x.tolerant&&(!w.uuid||!e.test(w.uuid))&&(w.error=w.error||"UUID is not valid."),w}function c(y){const x=y;return x.nss=(y.uuid||"").toLowerCase(),x}const f={scheme:"http",domainHost:!0,parse:r,serialize:i},d={scheme:"https",domainHost:f.domainHost,parse:r,serialize:i},h={scheme:"ws",domainHost:!0,parse:s,serialize:o},p={scheme:"wss",domainHost:h.domainHost,parse:h.parse,serialize:h.serialize},b={http:f,https:d,ws:h,wss:p,urn:{scheme:"urn",parse:a,serialize:u,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:l,serialize:c,skipNormalize:!0}};return qj=b,qj}var m0e;function bzt(){if(m0e)return y3.exports;m0e=1;const{normalizeIPv6:e,normalizeIPv4:t,removeDotSegments:n,recomposeAuthority:r,normalizeComponentEncoding:i}=yzt(),s=vzt();function o(g,b){return typeof g=="string"?g=c(p(g,b),b):typeof g=="object"&&(g=p(c(g,b),b)),g}function a(g,b,y){const x=Object.assign({scheme:"null"},y),w=u(p(g,x),p(b,x),x,!0);return c(w,{...x,skipEscape:!0})}function u(g,b,y,x){const w={};return x||(g=p(c(g,y),y),b=p(c(b,y),y)),y=y||{},!y.tolerant&&b.scheme?(w.scheme=b.scheme,w.userinfo=b.userinfo,w.host=b.host,w.port=b.port,w.path=n(b.path||""),w.query=b.query):(b.userinfo!==void 0||b.host!==void 0||b.port!==void 0?(w.userinfo=b.userinfo,w.host=b.host,w.port=b.port,w.path=n(b.path||""),w.query=b.query):(b.path?(b.path.charAt(0)==="/"?w.path=n(b.path):((g.userinfo!==void 0||g.host!==void 0||g.port!==void 0)&&!g.path?w.path="/"+b.path:g.path?w.path=g.path.slice(0,g.path.lastIndexOf("/")+1)+b.path:w.path=b.path,w.path=n(w.path)),w.query=b.query):(w.path=g.path,b.query!==void 0?w.query=b.query:w.query=g.query),w.userinfo=g.userinfo,w.host=g.host,w.port=g.port),w.scheme=g.scheme),w.fragment=b.fragment,w}function l(g,b,y){return typeof g=="string"?(g=unescape(g),g=c(i(p(g,y),!0),{...y,skipEscape:!0})):typeof g=="object"&&(g=c(i(g,!0),{...y,skipEscape:!0})),typeof b=="string"?(b=unescape(b),b=c(i(p(b,y),!0),{...y,skipEscape:!0})):typeof b=="object"&&(b=c(i(b,!0),{...y,skipEscape:!0})),g.toLowerCase()===b.toLowerCase()}function c(g,b){const y={host:g.host,scheme:g.scheme,userinfo:g.userinfo,port:g.port,path:g.path,query:g.query,nid:g.nid,nss:g.nss,uuid:g.uuid,fragment:g.fragment,reference:g.reference,resourceName:g.resourceName,secure:g.secure,error:""},x=Object.assign({},b),w=[],S=s[(x.scheme||y.scheme||"").toLowerCase()];S&&S.serialize&&S.serialize(y,x),y.path!==void 0&&(x.skipEscape?y.path=unescape(y.path):(y.path=escape(y.path),y.scheme!==void 0&&(y.path=y.path.split("%3A").join(":")))),x.reference!=="suffix"&&y.scheme&&w.push(y.scheme,":");const C=r(y);if(C!==void 0&&(x.reference!=="suffix"&&w.push("//"),w.push(C),y.path&&y.path.charAt(0)!=="/"&&w.push("/")),y.path!==void 0){let R=y.path;!x.absolutePath&&(!S||!S.absolutePath)&&(R=n(R)),C===void 0&&(R=R.replace(/^\/\//u,"/%2F")),w.push(R)}return y.query!==void 0&&w.push("?",y.query),y.fragment!==void 0&&w.push("#",y.fragment),w.join("")}const f=Array.from({length:127},(g,b)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(b)));function d(g){let b=0;for(let y=0,x=g.length;y<x;++y)if(b=g.charCodeAt(y),b>126||f[b])return!0;return!1}const h=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function p(g,b){const y=Object.assign({},b),x={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},w=g.indexOf("%")!==-1;let S=!1;y.reference==="suffix"&&(g=(y.scheme?y.scheme+":":"")+"//"+g);const C=g.match(h);if(C){if(x.scheme=C[1],x.userinfo=C[3],x.host=C[4],x.port=parseInt(C[5],10),x.path=C[6]||"",x.query=C[7],x.fragment=C[8],isNaN(x.port)&&(x.port=C[5]),x.host){const I=t(x.host);if(I.isIPV4===!1){const O=e(I.host);x.host=O.host.toLowerCase(),S=O.isIPV6}else x.host=I.host,S=!0}x.scheme===void 0&&x.userinfo===void 0&&x.host===void 0&&x.port===void 0&&!x.path&&x.query===void 0?x.reference="same-document":x.scheme===void 0?x.reference="relative":x.fragment===void 0?x.reference="absolute":x.reference="uri",y.reference&&y.reference!=="suffix"&&y.reference!==x.reference&&(x.error=x.error||"URI is not a "+y.reference+" reference.");const R=s[(y.scheme||x.scheme||"").toLowerCase()];if(!y.unicodeSupport&&(!R||!R.unicodeSupport)&&x.host&&(y.domainHost||R&&R.domainHost)&&S===!1&&d(x.host))try{x.host=URL.domainToASCII(x.host.toLowerCase())}catch(I){x.error=x.error||"Host's domain name can not be converted to ASCII: "+I}(!R||R&&!R.skipNormalize)&&(w&&x.scheme!==void 0&&(x.scheme=unescape(x.scheme)),w&&x.host!==void 0&&(x.host=unescape(x.host)),x.path&&x.path.length&&(x.path=escape(unescape(x.path))),x.fragment&&x.fragment.length&&(x.fragment=encodeURI(decodeURIComponent(x.fragment)))),R&&R.parse&&R.parse(x,y)}else x.error=x.error||"URI can not be parsed.";return x}const m={SCHEMES:s,normalize:o,resolve:a,resolveComponents:u,equal:l,serialize:c,parse:p};return y3.exports=m,y3.exports.default=m,y3.exports.fastUri=m,y3.exports}var g0e;function xzt(){if(g0e)return O5;g0e=1,Object.defineProperty(O5,"__esModule",{value:!0});const e=bzt();return e.code='require("ajv/dist/runtime/uri").default',O5.default=e,O5}var y0e;function _zt(){return y0e||(y0e=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=_7();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Jr();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Qee(),i=w7(),s=V5e(),o=Jee(),a=Jr(),u=x7(),l=DO(),c=Ni(),f=mzt,d=xzt(),h=(X,q)=>new RegExp(X,q);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},b={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},y=200;function x(X){var q,te,W,ee,oe,pe,ce,he,Ee,Ae,ge,me,Oe,Me,Ye,lt,We,nt,yt,_t,It,Et,Ke,Lt,sn;const Fe=X.strict,Qe=(q=X.code)===null||q===void 0?void 0:q.optimize,wt=Qe===!0||Qe===void 0?1:Qe||0,Vt=(W=(te=X.code)===null||te===void 0?void 0:te.regExp)!==null&&W!==void 0?W:h,Wt=(ee=X.uriResolver)!==null&&ee!==void 0?ee:d.default;return{strictSchema:(pe=(oe=X.strictSchema)!==null&&oe!==void 0?oe:Fe)!==null&&pe!==void 0?pe:!0,strictNumbers:(he=(ce=X.strictNumbers)!==null&&ce!==void 0?ce:Fe)!==null&&he!==void 0?he:!0,strictTypes:(Ae=(Ee=X.strictTypes)!==null&&Ee!==void 0?Ee:Fe)!==null&&Ae!==void 0?Ae:"log",strictTuples:(me=(ge=X.strictTuples)!==null&&ge!==void 0?ge:Fe)!==null&&me!==void 0?me:"log",strictRequired:(Me=(Oe=X.strictRequired)!==null&&Oe!==void 0?Oe:Fe)!==null&&Me!==void 0?Me:!1,code:X.code?{...X.code,optimize:wt,regExp:Vt}:{optimize:wt,regExp:Vt},loopRequired:(Ye=X.loopRequired)!==null&&Ye!==void 0?Ye:y,loopEnum:(lt=X.loopEnum)!==null&&lt!==void 0?lt:y,meta:(We=X.meta)!==null&&We!==void 0?We:!0,messages:(nt=X.messages)!==null&&nt!==void 0?nt:!0,inlineRefs:(yt=X.inlineRefs)!==null&&yt!==void 0?yt:!0,schemaId:(_t=X.schemaId)!==null&&_t!==void 0?_t:"$id",addUsedSchema:(It=X.addUsedSchema)!==null&&It!==void 0?It:!0,validateSchema:(Et=X.validateSchema)!==null&&Et!==void 0?Et:!0,validateFormats:(Ke=X.validateFormats)!==null&&Ke!==void 0?Ke:!0,unicodeRegExp:(Lt=X.unicodeRegExp)!==null&&Lt!==void 0?Lt:!0,int32range:(sn=X.int32range)!==null&&sn!==void 0?sn:!0,uriResolver:Wt}}class w{constructor(q={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,q=this.opts={...q,...x(q)};const{es5:te,lines:W}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:te,lines:W}),this.logger=H(q.logger);const ee=q.validateFormats;q.validateFormats=!1,this.RULES=(0,s.getRules)(),S.call(this,g,q,"NOT SUPPORTED"),S.call(this,b,q,"DEPRECATED","warn"),this._metaOpts=M.call(this),q.formats&&I.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),q.keywords&&O.call(this,q.keywords),typeof q.meta=="object"&&this.addMetaSchema(q.meta),R.call(this),q.validateFormats=ee}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:q,meta:te,schemaId:W}=this.opts;let ee=f;W==="id"&&(ee={...f},ee.id=ee.$id,delete ee.$id),te&&q&&this.addMetaSchema(ee,ee[W],!1)}defaultMeta(){const{meta:q,schemaId:te}=this.opts;return this.opts.defaultMeta=typeof q=="object"?q[te]||q:void 0}validate(q,te){let W;if(typeof q=="string"){if(W=this.getSchema(q),!W)throw new Error(`no schema with key or ref "${q}"`)}else W=this.compile(q);const ee=W(te);return"$async"in W||(this.errors=W.errors),ee}compile(q,te){const W=this._addSchema(q,te);return W.validate||this._compileSchemaEnv(W)}compileAsync(q,te){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:W}=this.opts;return ee.call(this,q,te);async function ee(Ae,ge){await oe.call(this,Ae.$schema);const me=this._addSchema(Ae,ge);return me.validate||pe.call(this,me)}async function oe(Ae){Ae&&!this.getSchema(Ae)&&await ee.call(this,{$ref:Ae},!0)}async function pe(Ae){try{return this._compileSchemaEnv(Ae)}catch(ge){if(!(ge instanceof i.default))throw ge;return ce.call(this,ge),await he.call(this,ge.missingSchema),pe.call(this,Ae)}}function ce({missingSchema:Ae,missingRef:ge}){if(this.refs[Ae])throw new Error(`AnySchema ${Ae} is loaded but ${ge} cannot be resolved`)}async function he(Ae){const ge=await Ee.call(this,Ae);this.refs[Ae]||await oe.call(this,ge.$schema),this.refs[Ae]||this.addSchema(ge,Ae,te)}async function Ee(Ae){const ge=this._loading[Ae];if(ge)return ge;try{return await(this._loading[Ae]=W(Ae))}finally{delete this._loading[Ae]}}}addSchema(q,te,W,ee=this.opts.validateSchema){if(Array.isArray(q)){for(const pe of q)this.addSchema(pe,void 0,W,ee);return this}let oe;if(typeof q=="object"){const{schemaId:pe}=this.opts;if(oe=q[pe],oe!==void 0&&typeof oe!="string")throw new Error(`schema ${pe} must be string`)}return te=(0,u.normalizeId)(te||oe),this._checkUnique(te),this.schemas[te]=this._addSchema(q,W,te,ee,!0),this}addMetaSchema(q,te,W=this.opts.validateSchema){return this.addSchema(q,te,!0,W),this}validateSchema(q,te){if(typeof q=="boolean")return!0;let W;if(W=q.$schema,W!==void 0&&typeof W!="string")throw new Error("$schema must be a string");if(W=W||this.opts.defaultMeta||this.defaultMeta(),!W)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const ee=this.validate(W,q);if(!ee&&te){const oe="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(oe);else throw new Error(oe)}return ee}getSchema(q){let te;for(;typeof(te=C.call(this,q))=="string";)q=te;if(te===void 0){const{schemaId:W}=this.opts,ee=new o.SchemaEnv({schema:{},schemaId:W});if(te=o.resolveSchema.call(this,ee,q),!te)return;this.refs[q]=te}return te.validate||this._compileSchemaEnv(te)}removeSchema(q){if(q instanceof RegExp)return this._removeAllSchemas(this.schemas,q),this._removeAllSchemas(this.refs,q),this;switch(typeof q){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const te=C.call(this,q);return typeof te=="object"&&this._cache.delete(te.schema),delete this.schemas[q],delete this.refs[q],this}case"object":{const te=q;this._cache.delete(te);let W=q[this.opts.schemaId];return W&&(W=(0,u.normalizeId)(W),delete this.schemas[W],delete this.refs[W]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(q){for(const te of q)this.addKeyword(te);return this}addKeyword(q,te){let W;if(typeof q=="string")W=q,typeof te=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),te.keyword=W);else if(typeof q=="object"&&te===void 0){if(te=q,W=te.keyword,Array.isArray(W)&&!W.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(B.call(this,W,te),!te)return(0,c.eachItem)(W,oe=>z.call(this,oe)),this;Z.call(this,te);const ee={...te,type:(0,l.getJSONTypes)(te.type),schemaType:(0,l.getJSONTypes)(te.schemaType)};return(0,c.eachItem)(W,ee.type.length===0?oe=>z.call(this,oe,ee):oe=>ee.type.forEach(pe=>z.call(this,oe,ee,pe))),this}getKeyword(q){const te=this.RULES.all[q];return typeof te=="object"?te.definition:!!te}removeKeyword(q){const{RULES:te}=this;delete te.keywords[q],delete te.all[q];for(const W of te.rules){const ee=W.rules.findIndex(oe=>oe.keyword===q);ee>=0&&W.rules.splice(ee,1)}return this}addFormat(q,te){return typeof te=="string"&&(te=new RegExp(te)),this.formats[q]=te,this}errorsText(q=this.errors,{separator:te=", ",dataVar:W="data"}={}){return!q||q.length===0?"No errors":q.map(ee=>`${W}${ee.instancePath} ${ee.message}`).reduce((ee,oe)=>ee+te+oe)}$dataMetaSchema(q,te){const W=this.RULES.all;q=JSON.parse(JSON.stringify(q));for(const ee of te){const oe=ee.split("/").slice(1);let pe=q;for(const ce of oe)pe=pe[ce];for(const ce in W){const he=W[ce];if(typeof he!="object")continue;const{$data:Ee}=he.definition,Ae=pe[ce];Ee&&Ae&&(pe[ce]=ue(Ae))}}return q}_removeAllSchemas(q,te){for(const W in q){const ee=q[W];(!te||te.test(W))&&(typeof ee=="string"?delete q[W]:ee&&!ee.meta&&(this._cache.delete(ee.schema),delete q[W]))}}_addSchema(q,te,W,ee=this.opts.validateSchema,oe=this.opts.addUsedSchema){let pe;const{schemaId:ce}=this.opts;if(typeof q=="object")pe=q[ce];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof q!="boolean")throw new Error("schema must be object or boolean")}let he=this._cache.get(q);if(he!==void 0)return he;W=(0,u.normalizeId)(pe||W);const Ee=u.getSchemaRefs.call(this,q,W);return he=new o.SchemaEnv({schema:q,schemaId:ce,meta:te,baseId:W,localRefs:Ee}),this._cache.set(he.schema,he),oe&&!W.startsWith("#")&&(W&&this._checkUnique(W),this.refs[W]=he),ee&&this.validateSchema(q,!0),he}_checkUnique(q){if(this.schemas[q]||this.refs[q])throw new Error(`schema with key or id "${q}" already exists`)}_compileSchemaEnv(q){if(q.meta?this._compileMetaSchema(q):o.compileSchema.call(this,q),!q.validate)throw new Error("ajv implementation error");return q.validate}_compileMetaSchema(q){const te=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,q)}finally{this.opts=te}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function S(X,q,te,W="error"){for(const ee in X){const oe=ee;oe in q&&this.logger[W](`${te}: option ${ee}. ${X[oe]}`)}}function C(X){return X=(0,u.normalizeId)(X),this.schemas[X]||this.refs[X]}function R(){const X=this.opts.schemas;if(X)if(Array.isArray(X))this.addSchema(X);else for(const q in X)this.addSchema(X[q],q)}function I(){for(const X in this.opts.formats){const q=this.opts.formats[X];q&&this.addFormat(X,q)}}function O(X){if(Array.isArray(X)){this.addVocabulary(X);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const q in X){const te=X[q];te.keyword||(te.keyword=q),this.addKeyword(te)}}function M(){const X={...this.opts};for(const q of p)delete X[q];return X}const L={log(){},warn(){},error(){}};function H(X){if(X===!1)return L;if(X===void 0)return console;if(X.log&&X.warn&&X.error)return X;throw new Error("logger must implement log, warn and error methods")}const D=/^[a-z_$][a-z0-9_$:-]*$/i;function B(X,q){const{RULES:te}=this;if((0,c.eachItem)(X,W=>{if(te.keywords[W])throw new Error(`Keyword ${W} is already defined`);if(!D.test(W))throw new Error(`Keyword ${W} has invalid name`)}),!!q&&q.$data&&!("code"in q||"validate"in q))throw new Error('$data keyword must have "code" or "validate" function')}function z(X,q,te){var W;const ee=q==null?void 0:q.post;if(te&&ee)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:oe}=this;let pe=ee?oe.post:oe.rules.find(({type:he})=>he===te);if(pe||(pe={type:te,rules:[]},oe.rules.push(pe)),oe.keywords[X]=!0,!q)return;const ce={keyword:X,definition:{...q,type:(0,l.getJSONTypes)(q.type),schemaType:(0,l.getJSONTypes)(q.schemaType)}};q.before?G.call(this,pe,ce,q.before):pe.rules.push(ce),oe.all[X]=ce,(W=q.implements)===null||W===void 0||W.forEach(he=>this.addKeyword(he))}function G(X,q,te){const W=X.rules.findIndex(ee=>ee.keyword===te);W>=0?X.rules.splice(W,0,q):(X.rules.push(q),this.logger.warn(`rule ${te} is not defined`))}function Z(X){let{metaSchema:q}=X;q!==void 0&&(X.$data&&this.opts.$data&&(q=ue(q)),X.validateSchema=this.compile(q,!0))}const ne={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ue(X){return{anyOf:[X,ne]}}}(Fj)),Fj}var M5={},L5={},F5={},v0e;function wzt(){if(v0e)return F5;v0e=1,Object.defineProperty(F5,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return F5.default=e,F5}var vv={},b0e;function Ezt(){if(b0e)return vv;b0e=1,Object.defineProperty(vv,"__esModule",{value:!0}),vv.callRef=vv.getValidate=void 0;const e=w7(),t=K0(),n=Jr(),r=hx(),i=Jee(),s=Ni(),o={keyword:"$ref",schemaType:"string",code(l){const{gen:c,schema:f,it:d}=l,{baseId:h,schemaEnv:p,validateName:m,opts:g,self:b}=d,{root:y}=p;if((f==="#"||f==="#/")&&h===y.baseId)return w();const x=i.resolveRef.call(b,y,h,f);if(x===void 0)throw new e.default(d.opts.uriResolver,h,f);if(x instanceof i.SchemaEnv)return S(x);return C(x);function w(){if(p===y)return u(l,m,p,p.$async);const R=c.scopeValue("root",{ref:y});return u(l,(0,n._)`${R}.validate`,y,y.$async)}function S(R){const I=a(l,R);u(l,I,R,R.$async)}function C(R){const I=c.scopeValue("schema",g.code.source===!0?{ref:R,code:(0,n.stringify)(R)}:{ref:R}),O=c.name("valid"),M=l.subschema({schema:R,dataTypes:[],schemaPath:n.nil,topSchemaRef:I,errSchemaPath:f},O);l.mergeEvaluated(M),l.ok(O)}}};function a(l,c){const{gen:f}=l;return c.validate?f.scopeValue("validate",{ref:c.validate}):(0,n._)`${f.scopeValue("wrapper",{ref:c})}.validate`}vv.getValidate=a;function u(l,c,f,d){const{gen:h,it:p}=l,{allErrors:m,schemaEnv:g,opts:b}=p,y=b.passContext?r.default.this:n.nil;d?x():w();function x(){if(!g.$async)throw new Error("async schema referenced by sync schema");const R=h.let("valid");h.try(()=>{h.code((0,n._)`await ${(0,t.callValidateCode)(l,c,y)}`),C(c),m||h.assign(R,!0)},I=>{h.if((0,n._)`!(${I} instanceof ${p.ValidationError})`,()=>h.throw(I)),S(I),m||h.assign(R,!1)}),l.ok(R)}function w(){l.result((0,t.callValidateCode)(l,c,y),()=>C(c),()=>S(c))}function S(R){const I=(0,n._)`${R}.errors`;h.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${I} : ${r.default.vErrors}.concat(${I})`),h.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function C(R){var I;if(!p.opts.unevaluated)return;const O=(I=f==null?void 0:f.validate)===null||I===void 0?void 0:I.evaluated;if(p.props!==!0)if(O&&!O.dynamicProps)O.props!==void 0&&(p.props=s.mergeEvaluated.props(h,O.props,p.props));else{const M=h.var("props",(0,n._)`${R}.evaluated.props`);p.props=s.mergeEvaluated.props(h,M,p.props,n.Name)}if(p.items!==!0)if(O&&!O.dynamicItems)O.items!==void 0&&(p.items=s.mergeEvaluated.items(h,O.items,p.items));else{const M=h.var("items",(0,n._)`${R}.evaluated.items`);p.items=s.mergeEvaluated.items(h,M,p.items,n.Name)}}}return vv.callRef=u,vv.default=o,vv}var x0e;function Szt(){if(x0e)return L5;x0e=1,Object.defineProperty(L5,"__esModule",{value:!0});const e=wzt(),t=Ezt(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return L5.default=n,L5}var $5={},B5={},_0e;function Tzt(){if(_0e)return B5;_0e=1,Object.defineProperty(B5,"__esModule",{value:!0});const e=Jr(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:s,schemaCode:o})=>(0,e.str)`must be ${n[s].okStr} ${o}`,params:({keyword:s,schemaCode:o})=>(0,e._)`{comparison: ${n[s].okStr}, limit: ${o}}`},i={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(s){const{keyword:o,data:a,schemaCode:u}=s;s.fail$data((0,e._)`${a} ${n[o].fail} ${u} || isNaN(${a})`)}};return B5.default=i,B5}var j5={},w0e;function Czt(){if(w0e)return j5;w0e=1,Object.defineProperty(j5,"__esModule",{value:!0});const e=Jr(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:i,data:s,schemaCode:o,it:a}=r,u=a.opts.multipleOfPrecision,l=i.let("res"),c=u?(0,e._)`Math.abs(Math.round(${l}) - ${l}) > 1e-${u}`:(0,e._)`${l} !== parseInt(${l})`;r.fail$data((0,e._)`(${o} === 0 || (${l} = ${s}/${o}, ${c}))`)}};return j5.default=n,j5}var U5={},z5={},E0e;function Azt(){if(E0e)return z5;E0e=1,Object.defineProperty(z5,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,i=0,s;for(;i<n;)r++,s=t.charCodeAt(i++),s>=55296&&s<=56319&&i<n&&(s=t.charCodeAt(i),(s&64512)===56320&&i++);return r}return z5.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',z5}var S0e;function kzt(){if(S0e)return U5;S0e=1,Object.defineProperty(U5,"__esModule",{value:!0});const e=Jr(),t=Ni(),n=Azt(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:o}){const a=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${o} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:o,data:a,schemaCode:u,it:l}=s,c=o==="maxLength"?e.operators.GT:e.operators.LT,f=l.opts.unicode===!1?(0,e._)`${a}.length`:(0,e._)`${(0,t.useFunc)(s.gen,n.default)}(${a})`;s.fail$data((0,e._)`${f} ${c} ${u}`)}};return U5.default=i,U5}var V5={},T0e;function Rzt(){if(T0e)return V5;T0e=1,Object.defineProperty(V5,"__esModule",{value:!0});const e=K0(),t=Jr(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,t.str)`must match pattern "${i}"`,params:({schemaCode:i})=>(0,t._)`{pattern: ${i}}`},code(i){const{data:s,$data:o,schema:a,schemaCode:u,it:l}=i,c=l.opts.unicodeRegExp?"u":"",f=o?(0,t._)`(new RegExp(${u}, ${c}))`:(0,e.usePattern)(i,a);i.fail$data((0,t._)`!${f}.test(${s})`)}};return V5.default=r,V5}var H5={},C0e;function Izt(){if(C0e)return H5;C0e=1,Object.defineProperty(H5,"__esModule",{value:!0});const e=Jr(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${a} ${o}`)}};return H5.default=n,H5}var q5={},A0e;function Pzt(){if(A0e)return q5;A0e=1,Object.defineProperty(q5,"__esModule",{value:!0});const e=K0(),t=Jr(),n=Ni(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:o,schema:a,schemaCode:u,data:l,$data:c,it:f}=s,{opts:d}=f;if(!c&&a.length===0)return;const h=a.length>=d.loopRequired;if(f.allErrors?p():m(),d.strictRequired){const y=s.parentSchema.properties,{definedProperties:x}=s.it;for(const w of a)if((y==null?void 0:y[w])===void 0&&!x.has(w)){const S=f.schemaEnv.baseId+f.errSchemaPath,C=`required property "${w}" is not defined at "${S}" (strictRequired)`;(0,n.checkStrictMode)(f,C,f.opts.strictRequired)}}function p(){if(h||c)s.block$data(t.nil,g);else for(const y of a)(0,e.checkReportMissingProp)(s,y)}function m(){const y=o.let("missing");if(h||c){const x=o.let("valid",!0);s.block$data(x,()=>b(y,x)),s.ok(x)}else o.if((0,e.checkMissingProp)(s,a,y)),(0,e.reportMissingProp)(s,y),o.else()}function g(){o.forOf("prop",u,y=>{s.setParams({missingProperty:y}),o.if((0,e.noPropertyInData)(o,l,y,d.ownProperties),()=>s.error())})}function b(y,x){s.setParams({missingProperty:y}),o.forOf(y,u,()=>{o.assign(x,(0,e.propertyInData)(o,l,y,d.ownProperties)),o.if((0,t.not)(x),()=>{s.error(),o.break()})},t.nil)}}};return q5.default=i,q5}var W5={},k0e;function Nzt(){if(k0e)return W5;k0e=1,Object.defineProperty(W5,"__esModule",{value:!0});const e=Jr(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${a} ${o}`)}};return W5.default=n,W5}var G5={},Y5={},R0e;function Zee(){if(R0e)return Y5;R0e=1,Object.defineProperty(Y5,"__esModule",{value:!0});const e=GY();return e.code='require("ajv/dist/runtime/equal").default',Y5.default=e,Y5}var I0e;function Dzt(){if(I0e)return G5;I0e=1,Object.defineProperty(G5,"__esModule",{value:!0});const e=DO(),t=Jr(),n=Ni(),r=Zee(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:a}})=>(0,t.str)`must NOT have duplicate items (items ## ${a} and ${o} are identical)`,params:({params:{i:o,j:a}})=>(0,t._)`{i: ${o}, j: ${a}}`},code(o){const{gen:a,data:u,$data:l,schema:c,parentSchema:f,schemaCode:d,it:h}=o;if(!l&&!c)return;const p=a.let("valid"),m=f.items?(0,e.getSchemaTypes)(f.items):[];o.block$data(p,g,(0,t._)`${d} === false`),o.ok(p);function g(){const w=a.let("i",(0,t._)`${u}.length`),S=a.let("j");o.setParams({i:w,j:S}),a.assign(p,!0),a.if((0,t._)`${w} > 1`,()=>(b()?y:x)(w,S))}function b(){return m.length>0&&!m.some(w=>w==="object"||w==="array")}function y(w,S){const C=a.name("item"),R=(0,e.checkDataTypes)(m,C,h.opts.strictNumbers,e.DataType.Wrong),I=a.const("indices",(0,t._)`{}`);a.for((0,t._)`;${w}--;`,()=>{a.let(C,(0,t._)`${u}[${w}]`),a.if(R,(0,t._)`continue`),m.length>1&&a.if((0,t._)`typeof ${C} == "string"`,(0,t._)`${C} += "_"`),a.if((0,t._)`typeof ${I}[${C}] == "number"`,()=>{a.assign(S,(0,t._)`${I}[${C}]`),o.error(),a.assign(p,!1).break()}).code((0,t._)`${I}[${C}] = ${w}`)})}function x(w,S){const C=(0,n.useFunc)(a,r.default),R=a.name("outer");a.label(R).for((0,t._)`;${w}--;`,()=>a.for((0,t._)`${S} = ${w}; ${S}--;`,()=>a.if((0,t._)`${C}(${u}[${w}], ${u}[${S}])`,()=>{o.error(),a.assign(p,!1).break(R)})))}}};return G5.default=s,G5}var K5={},P0e;function Ozt(){if(P0e)return K5;P0e=1,Object.defineProperty(K5,"__esModule",{value:!0});const e=Jr(),t=Ni(),n=Zee(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:o,data:a,$data:u,schemaCode:l,schema:c}=s;u||c&&typeof c=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(o,n.default)}(${a}, ${l})`):s.fail((0,e._)`${c} !== ${a}`)}};return K5.default=i,K5}var X5={},N0e;function Mzt(){if(N0e)return X5;N0e=1,Object.defineProperty(X5,"__esModule",{value:!0});const e=Jr(),t=Ni(),n=Zee(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:o,data:a,$data:u,schema:l,schemaCode:c,it:f}=s;if(!u&&l.length===0)throw new Error("enum must have non-empty array");const d=l.length>=f.opts.loopEnum;let h;const p=()=>h??(h=(0,t.useFunc)(o,n.default));let m;if(d||u)m=o.let("valid"),s.block$data(m,g);else{if(!Array.isArray(l))throw new Error("ajv implementation error");const y=o.const("vSchema",c);m=(0,e.or)(...l.map((x,w)=>b(y,w)))}s.pass(m);function g(){o.assign(m,!1),o.forOf("v",c,y=>o.if((0,e._)`${p()}(${a}, ${y})`,()=>o.assign(m,!0).break()))}function b(y,x){const w=l[x];return typeof w=="object"&&w!==null?(0,e._)`${p()}(${a}, ${y}[${x}])`:(0,e._)`${a} === ${w}`}}};return X5.default=i,X5}var D0e;function Lzt(){if(D0e)return $5;D0e=1,Object.defineProperty($5,"__esModule",{value:!0});const e=Tzt(),t=Czt(),n=kzt(),r=Rzt(),i=Izt(),s=Pzt(),o=Nzt(),a=Dzt(),u=Ozt(),l=Mzt(),c=[e.default,t.default,n.default,r.default,i.default,s.default,o.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,l.default];return $5.default=c,$5}var Q5={},cE={},O0e;function q5e(){if(O0e)return cE;O0e=1,Object.defineProperty(cE,"__esModule",{value:!0}),cE.validateAdditionalItems=void 0;const e=Jr(),t=Ni(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:o,it:a}=s,{items:u}=o;if(!Array.isArray(u)){(0,t.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(s,u)}};function i(s,o){const{gen:a,schema:u,data:l,keyword:c,it:f}=s;f.items=!0;const d=a.const("len",(0,e._)`${l}.length`);if(u===!1)s.setParams({len:o.length}),s.pass((0,e._)`${d} <= ${o.length}`);else if(typeof u=="object"&&!(0,t.alwaysValidSchema)(f,u)){const p=a.var("valid",(0,e._)`${d} <= ${o.length}`);a.if((0,e.not)(p),()=>h(p)),s.ok(p)}function h(p){a.forRange("i",o.length,d,m=>{s.subschema({keyword:c,dataProp:m,dataPropType:t.Type.Num},p),f.allErrors||a.if((0,e.not)(p),()=>a.break())})}}return cE.validateAdditionalItems=i,cE.default=r,cE}var J5={},fE={},M0e;function W5e(){if(M0e)return fE;M0e=1,Object.defineProperty(fE,"__esModule",{value:!0}),fE.validateTuple=void 0;const e=Jr(),t=Ni(),n=K0(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:o,it:a}=s;if(Array.isArray(o))return i(s,"additionalItems",o);a.items=!0,!(0,t.alwaysValidSchema)(a,o)&&s.ok((0,n.validateArray)(s))}};function i(s,o,a=s.schema){const{gen:u,parentSchema:l,data:c,keyword:f,it:d}=s;m(l),d.opts.unevaluated&&a.length&&d.items!==!0&&(d.items=t.mergeEvaluated.items(u,a.length,d.items));const h=u.name("valid"),p=u.const("len",(0,e._)`${c}.length`);a.forEach((g,b)=>{(0,t.alwaysValidSchema)(d,g)||(u.if((0,e._)`${p} > ${b}`,()=>s.subschema({keyword:f,schemaProp:b,dataProp:b},h)),s.ok(h))});function m(g){const{opts:b,errSchemaPath:y}=d,x=a.length,w=x===g.minItems&&(x===g.maxItems||g[o]===!1);if(b.strictTuples&&!w){const S=`"${f}" is ${x}-tuple, but minItems or maxItems/${o} are not specified or different at path "${y}"`;(0,t.checkStrictMode)(d,S,b.strictTuples)}}}return fE.validateTuple=i,fE.default=r,fE}var L0e;function Fzt(){if(L0e)return J5;L0e=1,Object.defineProperty(J5,"__esModule",{value:!0});const e=W5e(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return J5.default=t,J5}var Z5={},F0e;function $zt(){if(F0e)return Z5;F0e=1,Object.defineProperty(Z5,"__esModule",{value:!0});const e=Jr(),t=Ni(),n=K0(),r=q5e(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{schema:a,parentSchema:u,it:l}=o,{prefixItems:c}=u;l.items=!0,!(0,t.alwaysValidSchema)(l,a)&&(c?(0,r.validateAdditionalItems)(o,c):o.ok((0,n.validateArray)(o)))}};return Z5.default=s,Z5}var eP={},$0e;function Bzt(){if($0e)return eP;$0e=1,Object.defineProperty(eP,"__esModule",{value:!0});const e=Jr(),t=Ni(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:s}})=>s===void 0?(0,e.str)`must contain at least ${i} valid item(s)`:(0,e.str)`must contain at least ${i} and no more than ${s} valid item(s)`,params:({params:{min:i,max:s}})=>s===void 0?(0,e._)`{minContains: ${i}}`:(0,e._)`{minContains: ${i}, maxContains: ${s}}`},code(i){const{gen:s,schema:o,parentSchema:a,data:u,it:l}=i;let c,f;const{minContains:d,maxContains:h}=a;l.opts.next?(c=d===void 0?1:d,f=h):c=1;const p=s.const("len",(0,e._)`${u}.length`);if(i.setParams({min:c,max:f}),f===void 0&&c===0){(0,t.checkStrictMode)(l,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(f!==void 0&&c>f){(0,t.checkStrictMode)(l,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,t.alwaysValidSchema)(l,o)){let x=(0,e._)`${p} >= ${c}`;f!==void 0&&(x=(0,e._)`${x} && ${p} <= ${f}`),i.pass(x);return}l.items=!0;const m=s.name("valid");f===void 0&&c===1?b(m,()=>s.if(m,()=>s.break())):c===0?(s.let(m,!0),f!==void 0&&s.if((0,e._)`${u}.length > 0`,g)):(s.let(m,!1),g()),i.result(m,()=>i.reset());function g(){const x=s.name("_valid"),w=s.let("count",0);b(x,()=>s.if(x,()=>y(w)))}function b(x,w){s.forRange("i",0,p,S=>{i.subschema({keyword:"contains",dataProp:S,dataPropType:t.Type.Num,compositeRule:!0},x),w()})}function y(x){s.code((0,e._)`${x}++`),f===void 0?s.if((0,e._)`${x} >= ${c}`,()=>s.assign(m,!0).break()):(s.if((0,e._)`${x} > ${f}`,()=>s.assign(m,!1).break()),c===1?s.assign(m,!0):s.if((0,e._)`${x} >= ${c}`,()=>s.assign(m,!0)))}}};return eP.default=r,eP}var Wj={},B0e;function jzt(){return B0e||(B0e=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Jr(),n=Ni(),r=K0();e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const b of m)(0,r.checkReportMissingProp)(u,b)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i}(Wj)),Wj}var tP={},j0e;function Uzt(){if(j0e)return tP;j0e=1,Object.defineProperty(tP,"__esModule",{value:!0});const e=Jr(),t=Ni(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,e._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:s,schema:o,data:a,it:u}=i;if((0,t.alwaysValidSchema)(u,o))return;const l=s.name("valid");s.forIn("key",a,c=>{i.setParams({propertyName:c}),i.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},l),s.if((0,e.not)(l),()=>{i.error(!0),u.allErrors||s.break()})}),i.ok(l)}};return tP.default=r,tP}var nP={},U0e;function G5e(){if(U0e)return nP;U0e=1,Object.defineProperty(nP,"__esModule",{value:!0});const e=K0(),t=Jr(),n=hx(),r=Ni(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,t._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:a,schema:u,parentSchema:l,data:c,errsCount:f,it:d}=o;if(!f)throw new Error("ajv implementation error");const{allErrors:h,opts:p}=d;if(d.props=!0,p.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(d,u))return;const m=(0,e.allSchemaProperties)(l.properties),g=(0,e.allSchemaProperties)(l.patternProperties);b(),o.ok((0,t._)`${f} === ${n.default.errors}`);function b(){a.forIn("key",c,C=>{!m.length&&!g.length?w(C):a.if(y(C),()=>w(C))})}function y(C){let R;if(m.length>8){const I=(0,r.schemaRefOrVal)(d,l.properties,"properties");R=(0,e.isOwnProperty)(a,I,C)}else m.length?R=(0,t.or)(...m.map(I=>(0,t._)`${C} === ${I}`)):R=t.nil;return g.length&&(R=(0,t.or)(R,...g.map(I=>(0,t._)`${(0,e.usePattern)(o,I)}.test(${C})`))),(0,t.not)(R)}function x(C){a.code((0,t._)`delete ${c}[${C}]`)}function w(C){if(p.removeAdditional==="all"||p.removeAdditional&&u===!1){x(C);return}if(u===!1){o.setParams({additionalProperty:C}),o.error(),h||a.break();return}if(typeof u=="object"&&!(0,r.alwaysValidSchema)(d,u)){const R=a.name("valid");p.removeAdditional==="failing"?(S(C,R,!1),a.if((0,t.not)(R),()=>{o.reset(),x(C)})):(S(C,R),h||a.if((0,t.not)(R),()=>a.break()))}}function S(C,R,I){const O={keyword:"additionalProperties",dataProp:C,dataPropType:r.Type.Str};I===!1&&Object.assign(O,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(O,R)}}};return nP.default=s,nP}var rP={},z0e;function zzt(){if(z0e)return rP;z0e=1,Object.defineProperty(rP,"__esModule",{value:!0});const e=_7(),t=K0(),n=Ni(),r=G5e(),i={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,parentSchema:u,data:l,it:c}=s;c.opts.removeAdditional==="all"&&u.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(c,r.default,"additionalProperties"));const f=(0,t.allSchemaProperties)(a);for(const g of f)c.definedProperties.add(g);c.opts.unevaluated&&f.length&&c.props!==!0&&(c.props=n.mergeEvaluated.props(o,(0,n.toHash)(f),c.props));const d=f.filter(g=>!(0,n.alwaysValidSchema)(c,a[g]));if(d.length===0)return;const h=o.name("valid");for(const g of d)p(g)?m(g):(o.if((0,t.propertyInData)(o,l,g,c.opts.ownProperties)),m(g),c.allErrors||o.else().var(h,!0),o.endIf()),s.it.definedProperties.add(g),s.ok(h);function p(g){return c.opts.useDefaults&&!c.compositeRule&&a[g].default!==void 0}function m(g){s.subschema({keyword:"properties",schemaProp:g,dataProp:g},h)}}};return rP.default=i,rP}var iP={},V0e;function Vzt(){if(V0e)return iP;V0e=1,Object.defineProperty(iP,"__esModule",{value:!0});const e=K0(),t=Jr(),n=Ni(),r=Ni(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,data:u,parentSchema:l,it:c}=s,{opts:f}=c,d=(0,e.allSchemaProperties)(a),h=d.filter(w=>(0,n.alwaysValidSchema)(c,a[w]));if(d.length===0||h.length===d.length&&(!c.opts.unevaluated||c.props===!0))return;const p=f.strictSchema&&!f.allowMatchingProperties&&l.properties,m=o.name("valid");c.props!==!0&&!(c.props instanceof t.Name)&&(c.props=(0,r.evaluatedPropsToName)(o,c.props));const{props:g}=c;b();function b(){for(const w of d)p&&y(w),c.allErrors?x(w):(o.var(m,!0),x(w),o.if(m))}function y(w){for(const S in p)new RegExp(w).test(S)&&(0,n.checkStrictMode)(c,`property ${S} matches pattern ${w} (use allowMatchingProperties)`)}function x(w){o.forIn("key",u,S=>{o.if((0,t._)`${(0,e.usePattern)(s,w)}.test(${S})`,()=>{const C=h.includes(w);C||s.subschema({keyword:"patternProperties",schemaProp:w,dataProp:S,dataPropType:r.Type.Str},m),c.opts.unevaluated&&g!==!0?o.assign((0,t._)`${g}[${S}]`,!0):!C&&!c.allErrors&&o.if((0,t.not)(m),()=>o.break())})})}}};return iP.default=i,iP}var sP={},H0e;function Hzt(){if(H0e)return sP;H0e=1,Object.defineProperty(sP,"__esModule",{value:!0});const e=Ni(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:i,it:s}=n;if((0,e.alwaysValidSchema)(s,i)){n.fail();return}const o=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),n.failResult(o,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return sP.default=t,sP}var oP={},q0e;function qzt(){if(q0e)return oP;q0e=1,Object.defineProperty(oP,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:K0().validateUnion,error:{message:"must match a schema in anyOf"}};return oP.default=t,oP}var aP={},W0e;function Wzt(){if(W0e)return aP;W0e=1,Object.defineProperty(aP,"__esModule",{value:!0});const e=Jr(),t=Ni(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,e._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:s,schema:o,parentSchema:a,it:u}=i;if(!Array.isArray(o))throw new Error("ajv implementation error");if(u.opts.discriminator&&a.discriminator)return;const l=o,c=s.let("valid",!1),f=s.let("passing",null),d=s.name("_valid");i.setParams({passing:f}),s.block(h),i.result(c,()=>i.reset(),()=>i.error(!0));function h(){l.forEach((p,m)=>{let g;(0,t.alwaysValidSchema)(u,p)?s.var(d,!0):g=i.subschema({keyword:"oneOf",schemaProp:m,compositeRule:!0},d),m>0&&s.if((0,e._)`${d} && ${c}`).assign(c,!1).assign(f,(0,e._)`[${f}, ${m}]`).else(),s.if(d,()=>{s.assign(c,!0),s.assign(f,m),g&&i.mergeEvaluated(g,e.Name)})})}}};return aP.default=r,aP}var uP={},G0e;function Gzt(){if(G0e)return uP;G0e=1,Object.defineProperty(uP,"__esModule",{value:!0});const e=Ni(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:i,it:s}=n;if(!Array.isArray(i))throw new Error("ajv implementation error");const o=r.name("valid");i.forEach((a,u)=>{if((0,e.alwaysValidSchema)(s,a))return;const l=n.subschema({keyword:"allOf",schemaProp:u},o);n.ok(o),n.mergeEvaluated(l)})}};return uP.default=t,uP}var lP={},Y0e;function Yzt(){if(Y0e)return lP;Y0e=1,Object.defineProperty(lP,"__esModule",{value:!0});const e=Jr(),t=Ni(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:o,parentSchema:a,it:u}=s;a.then===void 0&&a.else===void 0&&(0,t.checkStrictMode)(u,'"if" without "then" and "else" is ignored');const l=i(u,"then"),c=i(u,"else");if(!l&&!c)return;const f=o.let("valid",!0),d=o.name("_valid");if(h(),s.reset(),l&&c){const m=o.let("ifClause");s.setParams({ifClause:m}),o.if(d,p("then",m),p("else",m))}else l?o.if(d,p("then")):o.if((0,e.not)(d),p("else"));s.pass(f,()=>s.error(!0));function h(){const m=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);s.mergeEvaluated(m)}function p(m,g){return()=>{const b=s.subschema({keyword:m},d);o.assign(f,d),s.mergeValidEvaluated(b,f),g?o.assign(g,(0,e._)`${m}`):s.setParams({ifClause:m})}}}};function i(s,o){const a=s.schema[o];return a!==void 0&&!(0,t.alwaysValidSchema)(s,a)}return lP.default=r,lP}var cP={},K0e;function Kzt(){if(K0e)return cP;K0e=1,Object.defineProperty(cP,"__esModule",{value:!0});const e=Ni(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:i}){r.if===void 0&&(0,e.checkStrictMode)(i,`"${n}" without "if" is ignored`)}};return cP.default=t,cP}var X0e;function Xzt(){if(X0e)return Q5;X0e=1,Object.defineProperty(Q5,"__esModule",{value:!0});const e=q5e(),t=Fzt(),n=W5e(),r=$zt(),i=Bzt(),s=jzt(),o=Uzt(),a=G5e(),u=zzt(),l=Vzt(),c=Hzt(),f=qzt(),d=Wzt(),h=Gzt(),p=Yzt(),m=Kzt();function g(b=!1){const y=[c.default,f.default,d.default,h.default,p.default,m.default,o.default,a.default,s.default,u.default,l.default];return b?y.push(t.default,r.default):y.push(e.default,n.default),y.push(i.default),y}return Q5.default=g,Q5}var fP={},dP={},Q0e;function Qzt(){if(Q0e)return dP;Q0e=1,Object.defineProperty(dP,"__esModule",{value:!0});const e=Jr(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,i){const{gen:s,data:o,$data:a,schema:u,schemaCode:l,it:c}=r,{opts:f,errSchemaPath:d,schemaEnv:h,self:p}=c;if(!f.validateFormats)return;a?m():g();function m(){const b=s.scopeValue("formats",{ref:p.formats,code:f.code.formats}),y=s.const("fDef",(0,e._)`${b}[${l}]`),x=s.let("fType"),w=s.let("format");s.if((0,e._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>s.assign(x,(0,e._)`${y}.type || "string"`).assign(w,(0,e._)`${y}.validate`),()=>s.assign(x,(0,e._)`"string"`).assign(w,y)),r.fail$data((0,e.or)(S(),C()));function S(){return f.strictSchema===!1?e.nil:(0,e._)`${l} && !${w}`}function C(){const R=h.$async?(0,e._)`(${y}.async ? await ${w}(${o}) : ${w}(${o}))`:(0,e._)`${w}(${o})`,I=(0,e._)`(typeof ${w} == "function" ? ${R} : ${w}.test(${o}))`;return(0,e._)`${w} && ${w} !== true && ${x} === ${i} && !${I}`}}function g(){const b=p.formats[u];if(!b){S();return}if(b===!0)return;const[y,x,w]=C(b);y===i&&r.pass(R());function S(){if(f.strictSchema===!1){p.logger.warn(I());return}throw new Error(I());function I(){return`unknown format "${u}" ignored in schema at path "${d}"`}}function C(I){const O=I instanceof RegExp?(0,e.regexpCode)(I):f.code.formats?(0,e._)`${f.code.formats}${(0,e.getProperty)(u)}`:void 0,M=s.scopeValue("formats",{key:u,ref:I,code:O});return typeof I=="object"&&!(I instanceof RegExp)?[I.type||"string",I.validate,(0,e._)`${M}.validate`]:["string",I,M]}function R(){if(typeof b=="object"&&!(b instanceof RegExp)&&b.async){if(!h.$async)throw new Error("async format in sync schema");return(0,e._)`await ${w}(${o})`}return typeof x=="function"?(0,e._)`${w}(${o})`:(0,e._)`${w}.test(${o})`}}}};return dP.default=n,dP}var J0e;function Jzt(){if(J0e)return fP;J0e=1,Object.defineProperty(fP,"__esModule",{value:!0});const t=[Qzt().default];return fP.default=t,fP}var e_={},Z0e;function Zzt(){return Z0e||(Z0e=1,Object.defineProperty(e_,"__esModule",{value:!0}),e_.contentVocabulary=e_.metadataVocabulary=void 0,e_.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],e_.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),e_}var eme;function eVt(){if(eme)return M5;eme=1,Object.defineProperty(M5,"__esModule",{value:!0});const e=Szt(),t=Lzt(),n=Xzt(),r=Jzt(),i=Zzt(),s=[e.default,t.default,(0,n.default)(),r.default,i.metadataVocabulary,i.contentVocabulary];return M5.default=s,M5}var hP={},v3={},tme;function tVt(){if(tme)return v3;tme=1,Object.defineProperty(v3,"__esModule",{value:!0}),v3.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(v3.DiscrError=e={})),v3}var nme;function nVt(){if(nme)return hP;nme=1,Object.defineProperty(hP,"__esModule",{value:!0});const e=Jr(),t=tVt(),n=Jee(),r=w7(),i=Ni(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:u}})=>a===t.DiscrError.Tag?`tag "${u}" must be string`:`value of tag "${u}" must be in oneOf`,params:({params:{discrError:a,tag:u,tagName:l}})=>(0,e._)`{error: ${a}, tag: ${l}, tagValue: ${u}}`},code(a){const{gen:u,data:l,schema:c,parentSchema:f,it:d}=a,{oneOf:h}=f;if(!d.opts.discriminator)throw new Error("discriminator: requires discriminator option");const p=c.propertyName;if(typeof p!="string")throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!h)throw new Error("discriminator: requires oneOf keyword");const m=u.let("valid",!1),g=u.const("tag",(0,e._)`${l}${(0,e.getProperty)(p)}`);u.if((0,e._)`typeof ${g} == "string"`,()=>b(),()=>a.error(!1,{discrError:t.DiscrError.Tag,tag:g,tagName:p})),a.ok(m);function b(){const w=x();u.if(!1);for(const S in w)u.elseIf((0,e._)`${g} === ${S}`),u.assign(m,y(w[S]));u.else(),a.error(!1,{discrError:t.DiscrError.Mapping,tag:g,tagName:p}),u.endIf()}function y(w){const S=u.name("valid"),C=a.subschema({keyword:"oneOf",schemaProp:w},S);return a.mergeEvaluated(C,e.Name),S}function x(){var w;const S={},C=I(f);let R=!0;for(let L=0;L<h.length;L++){let H=h[L];if(H!=null&&H.$ref&&!(0,i.schemaHasRulesButRef)(H,d.self.RULES)){const B=H.$ref;if(H=n.resolveRef.call(d.self,d.schemaEnv.root,d.baseId,B),H instanceof n.SchemaEnv&&(H=H.schema),H===void 0)throw new r.default(d.opts.uriResolver,d.baseId,B)}const D=(w=H==null?void 0:H.properties)===null||w===void 0?void 0:w[p];if(typeof D!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${p}"`);R=R&&(C||I(H)),O(D,L)}if(!R)throw new Error(`discriminator: "${p}" must be required`);return S;function I({required:L}){return Array.isArray(L)&&L.includes(p)}function O(L,H){if(L.const)M(L.const,H);else if(L.enum)for(const D of L.enum)M(D,H);else throw new Error(`discriminator: "properties/${p}" must have "const" or "enum"`)}function M(L,H){if(typeof L!="string"||L in S)throw new Error(`discriminator: "${p}" values must be unique strings`);S[L]=H}}}};return hP.default=o,hP}const rVt="http://json-schema.org/draft-07/schema#",iVt="http://json-schema.org/draft-07/schema#",sVt="Core schema meta-schema",oVt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},aVt=["object","boolean"],uVt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},lVt={$schema:rVt,$id:iVt,title:sVt,definitions:oVt,type:aVt,properties:uVt,default:!0};var rme;function cVt(){return rme||(rme=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=_zt(),r=eVt(),i=nVt(),s=lVt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=_7();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Jr();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=Qee();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=w7();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})}(I5,I5.exports)),I5.exports}var fVt=cVt();const ete=gc(fVt),dVt="#/definitions/StudyConfig",hVt="http://json-schema.org/draft-07/schema#",pVt=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"slider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"StudyConfig":{"additionalProperties":false,"description":"The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\\n\\n```js { \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.0.1/src/parser/StudyConfigSchema.json\\", \\"studyMetadata\\": {  ... }, \\"uiConfig\\": {  ... }, \\"components\\": {  ... }, \\"sequence\\": {  ... } } ```\\n\\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\\n\\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"importedLibraries":{"description":"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.","items":{"type":"string"},"type":"array"},"sequence":{"$ref":"#/definitions/ComponentBlock","description":"The order of the components in the study. This might include some randomness."},"studyMetadata":{"$ref":"#/definitions/StudyMetadata","description":"The metadata for the study. This is used to identify the study and version in the data file."},"uiConfig":{"$ref":"#/definitions/UIConfig","description":"The UI configuration for the study. This is used to configure the UI of the app."}},"required":["$schema","studyMetadata","uiConfig","components","sequence"],"type":"object"},"StudyMetadata":{"additionalProperties":false,"description":"The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\\n\\n```js \\"studyMetadata\\" : { \\"title\\": \\"My New Study\\", \\"version\\": \\"pilot\\", \\"authors\\": [  \\"Jane Doe\\",  \\"John Doe\\" ], \\"date\\": \\"2024-04-01\\", \\"description\\": \\"This study is meant to test your ability.\\", \\"organizations\\": [  \\"The reVISit Team\\",  \\"The Other Team\\" ] } ```","properties":{"authors":{"description":"The authors of your study.","items":{"type":"string"},"type":"array"},"date":{"description":"The date of your study, may be useful for the researcher.","type":"string"},"description":{"description":"The description of your study, shown on the landing page.","type":"string"},"organizations":{"description":"The organizations that are associated with your study.","items":{"type":"string"},"type":"array"},"title":{"description":"The title of your study, shown on the landing page.","type":"string"},"version":{"description":"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.","type":"string"}},"required":["title","version","authors","date","description","organizations"],"type":"object"},"UIConfig":{"additionalProperties":false,"description":"The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ \\"contactEmail\\": \\"contact@revisit.dev\\", \\"helpTextPath\\": \\"<study-name>/assets/help.md\\", \\"logoPath\\": \\"<study-name>/assets/logo.jpg\\", \\"withProgressBar\\": true, \\"autoDownloadStudy\\": true \\"autoDownloadTime\\": 5000, \\"studyEndMsg\\": \\"Thank you for completing this study. You\'re the best!\\", \\"sidebar\\": true, \\"windowEventDebounceTime\\": 500, \\"urlParticipantIdParam\\": \\"PROLIFIC_ID\\", \\"numSequences\\": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)","properties":{"autoDownloadStudy":{"description":"Controls whether the study data is automatically downloaded at the end of the study.","type":"boolean"},"autoDownloadTime":{"description":"The time in milliseconds to wait before automatically downloading the study data.","type":"number"},"contactEmail":{"description":"The email address that used during the study if a participant clicks contact.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.","type":"string"},"logoPath":{"description":"The path to the logo image. This is displayed on the landing page and the header.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. Defaults to false.","type":"boolean"},"numSequences":{"description":"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.","type":"number"},"participantNameField":{"description":"The default name field for a participant. Directs revisit to use the task and response id as a name in UI elements. For example, if you wanted the response \'prolificId\' from the task \'introduction\' to be the name, this field would be \'introduction.prolificId\'","type":"string"},"recordStudyAudio":{"description":"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.","type":"boolean"},"sidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. Defaults to 300.","type":"number"},"studyEndMsg":{"description":"The message to display when the study ends.","type":"string"},"timeoutReject":{"description":"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.","type":"boolean"},"urlParticipantIdParam":{"description":"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered in the study.","type":"boolean"}},"required":["contactEmail","logoPath","withProgressBar","sidebar"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),mVt={$ref:dVt,$schema:hVt,definitions:pVt},gVt="#/definitions/GlobalConfig",yVt="http://json-schema.org/draft-07/schema#",vVt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},bVt={$ref:gVt,$schema:yVt,definitions:vVt},xVt="#/definitions/LibraryConfig",_Vt="http://json-schema.org/draft-07/schema#",wVt=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LibraryConfig":{"additionalProperties":false,"description":"LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\\n\\nBelow is the general template that should be followed when constructing a Library configuration file.\\n\\n```js {  \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.0.1/src/parser/LibraryConfigSchema.json\\",  \\"baseComponents\\": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  \\"components\\": {    // Components here are defined exactly as is in the StudyConfig  },  \\"sequences\\": {   // Sequences here are defined as \\"key\\": \\"value\\" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"description":{"description":"A description of the library.","type":"string"},"doi":{"description":"The DOI of the paper where the content of the library is based on.","type":"string"},"externalLink":{"description":"The external link to the paper/website where the content of the library is based on.","type":"string"},"reference":{"description":"The reference to the paper where the content of the library is based on.","type":"string"},"sequences":{"additionalProperties":{"$ref":"#/definitions/ComponentBlock"},"description":"The order of the components in the study. This might include some randomness.","type":"object"}},"required":["$schema","description","components","sequences"],"type":"object"},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"slider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),EVt={$ref:xVt,$schema:_Vt,definitions:wVt},Y5e=new ete;Y5e.addSchema(EVt);const SVt=Y5e.getSchema("#/definitions/LibraryConfig");function K5e(e,t){return{...e,components:e.components.map(n=>typeof n=="object"?K5e(n,t):`$${t}.components.${n}`)}}function X5e(e,t,n=[]){return{...e,components:e.components.map(r=>{if(typeof r=="object")return X5e(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[s,o]=r.split(i),a=s.slice(1);if(!t[a]){const c={message:`Library ${a} not found in imported libraries`,instancePath:"",params:{action:"check the library name"}};return n.push(c),r}let l=t[a].sequences[o];if(!l){const c={message:`Sequence ${o} not found in library ${s}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return l=K5e(l,a),l}return r})}}function TVt(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([s,o])=>{var a;YT(o)&&!((a=i.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${s}`,params:{action:"add the base component to the baseComponents object"}})})})}function CVt(e,t){let n=!1,r;try{r=JSON.parse(e),n=SVt(r)}catch{n=!1}const i=[],s=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:s}}async function AVt(e){const t=await(await fetch(`${Uu}libraries/${e}/config.json`)).text();return CVt(t,e)}async function kVt(e,t,n){const r=e.map(async s=>{const o=await AVt(s);return o.errors&&t.push(...o.errors),o.warnings&&n.push(...o.warnings),[s,o]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([s,o])=>{o.components||delete i[s]}),e.forEach(s=>{i[s]&&(i[s].components=Object.fromEntries(Object.entries(i[s].components).map(([o,a])=>{if(YT(a)){const u=mSe.merge({},i[s].baseComponents[a.baseComponent],a);return delete u.baseComponent,[[`$${s}.components.${o}`,u],[`$${s}.co.${o}`,u]]}return[[`$${s}.components.${o}`,a],[`$${s}.co.${o}`,a]]}).reduce((o,[a,u])=>(o.push(a,u),o),[])))}),i}const Q5e=new ete;Q5e.addSchema(bVt);const ime=Q5e.getSchema("#/definitions/GlobalConfig"),J5e=new ete;J5e.addSchema(mVt);const sme=J5e.getSchema("#/definitions/StudyConfig");function RVt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function IVt(e){const t=JSON.parse(e),n=ime(t),r=RVt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...ime.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function Z5e(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):Z5e(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function PVt(e,t){const n=[],r=[];TVt(e,n,t),Object.entries(e.components).forEach(([o,a])=>{var u;YT(a)&&!((u=e.baseComponents)!=null&&u[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const i=fwe(e.sequence);i.forEach(o=>{var a;e.components[o]||n.push({message:(a=e.baseComponents)!=null&&a[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!i.includes(o)&&!o.includes(".se.")&&!o.includes(".sequences.")&&!o.includes(".co.")&&!o.includes(".components.")).forEach(o=>{r.push({message:`Component \`${o}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const s=[];return Z5e(e.sequence,s),s.forEach(o=>{n.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function tte(e){let t=!1,n;try{n=JSON.parse(e),t=sme(n)}catch{t=!1}let r=sme.errors||[],i=[];if(t&&n){const s=n.importedLibraries||[],o=await kVt(s,r,i);Object.values(o).forEach(l=>{n.components={...n.components,...l.components},n.baseComponents={...n.baseComponents,...l.components}}),n.sequence=X5e(n.sequence,o,r);const{errors:a,warnings:u}=PVt(n,o);r=[...r,...a],i=[...i,...u]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function NVt(e){const t=await(await fetch(`${Uu}${e}`)).text();return await tte(t)}async function nte(e,t){const n=t.configsList.find(r=>O1e(r)===e);if(n){const r=t.configs[n];return await NVt(`${r.path}`)}return null}async function DVt(e){const t={},n=e.configsList.map(async i=>nte(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function OVt({globalConfig:e}){const t=Uw(),[n,r]=U.useState(null),i=e.configsList.includes(t)||t==="__revisit-widget";U.useEffect(()=>{if(t!=="__revisit-widget")return nte(t,e).then(p=>{r(p)}),()=>{};if(e&&t){const p=m=>{m.data.type==="revisitWidget/CONFIG"&&tte(m.data.payload).then(async g=>{r(g);const b=await Hpe(g);window.parent.postMessage({type:"revisitWidget/SEQUENCE_ARRAY",payload:b},"*")})};return window.addEventListener("message",p),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",p)}}return()=>{}},[e,t]);const[s,o]=U.useState([]),[a,u]=U.useState(null),{storageEngine:l}=Yo(),[c]=D1(),f=U.useMemo(()=>c.get("participantId"),[c]);U.useEffect(()=>{async function p(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await Hpe(n));const g=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,b=Object.fromEntries(c.entries()),y=await fetch("https://api.ipify.org?format=json").catch(I=>""),x=y instanceof Response?await y.json():{ip:""},w={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:x.ip},S=await l.initializeParticipantSession(t,b,n,w,f||g),C=await l.getModes(t),R=await mat(t,n,S.sequence,w,S.answers,C,S.participantId);u(R),o([{element:k.jsx(ezt,{}),children:[{path:"/",element:k.jsx(N5e,{to:u0(0),replace:!0})},{path:"/:index",element:n.errors.length>0?k.jsxs(k.Fragment,{children:[k.jsx(co,{order:2,mb:8,children:"Error loading config"}),k.jsx(AP,{issues:n.errors,type:"error"})]}):k.jsx(_Ut,{})}]}])}p()},[l,n,t,c,f]);const d=b1e(s);let h=null;return i?s.length===0?h=k.jsx(oh,{visible:!0}):h=d&&a?k.jsx(mwe.Provider,{value:a,children:k.jsx(mot,{store:a.store,children:d})}):k.jsx(yb,{}):h=k.jsx(yb,{}),h}function QN({studyIds:e}){const t=F0(),{studyId:n}=ig(),r=dp(),i=e.map(o=>({value:o,label:o})).sort((o,a)=>o.label.localeCompare(a.label)),s=r.pathname.includes("analysis");return k.jsx(hs.Header,{p:"md",children:k.jsxs(Mm,{mt:-7,align:"center",children:[k.jsx(Mm.Col,{span:6,children:k.jsxs(An,{align:"center",onClick:()=>t("/"),style:{cursor:"pointer"},children:[k.jsx(qb,{w:40,src:`${Uu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),k.jsx(eh,{w:"md"}),k.jsx(co,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),k.jsx(Mm.Col,{span:6,children:k.jsxs(An,{justify:"flex-end",direction:"row",children:[s&&k.jsxs(k.Fragment,{children:[k.jsx(ET,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:o=>t(`/analysis/stats/${o}`),mr:16}),k.jsx(Nn,{component:"a",href:`${Uu}${n}`,target:"_blank",leftSection:k.jsx(R1e,{}),mr:"sm",children:"Go to Study"})]}),k.jsx(P1e,{onClick:()=>t("/settings"),style:{cursor:"pointer",marginTop:s?6:void 0}})]})})]})})}function ePe({visibleParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=fq(!1),[a,u]=U.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;qK(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return k.jsxs(k.Fragment,{children:[k.jsxs(Js,{style:{gap:n},children:[k.jsx(Ys,{label:"Download all participants data as JSON",children:k.jsx(Nn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:k.jsx(Qze,{})})}),k.jsx(Ys,{label:"Download all participants data as a tidy CSV",children:k.jsx(Nn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:k.jsx(N1e,{})})})]}),i&&a.length>0&&k.jsx(Pbt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function MVt({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?k.jsx(zn.Td,{children:k.jsx(El,{miw:100,children:e.timedOut?k.jsx(At,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>k.jsxs(Ue,{children:[k.jsxs(At,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?k.jsx(At,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):k.jsx(At,{span:!0,children:n})]},`cell-${t}`))})}):k.jsx(zn.Td,{children:"N/A"})}function ome({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=FSe(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?k.jsxs(zn.Td,{children:[t.toFixed(1)," ","s",n&&k.jsxs(k.Fragment,{children:[k.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):k.jsx(zn.Td,{children:"N/A"})}function LVt(e){const{metaData:t}=e;return k.jsx(zn.Td,{children:k.jsx(VW,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:k.jsxs(El,{gap:"xs",children:[k.jsxs(Ue,{children:["IP:"," ",t.ip]}),k.jsxs(Ue,{children:["Language:"," ",t.language]}),k.jsxs(Ue,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),k.jsxs(Ue,{children:["User Agent:"," ",t.userAgent]})]})})})}function FVt({visibleParticipants:e,studyConfig:t,refresh:n}){const{storageEngine:r}=Yo(),{studyId:i}=ig(),{user:s}=UT(),o=async(w,S)=>{if(r&&i)if(s.isAdmin){const C=S===""?"Rejected by admin":S;await r.rejectParticipant(i,w,C),await n()}else console.warn("You are not authorized to perform this action.")},[a,u]=U.useState([]),[l,c]=U.useState(!1),[f,d]=U.useState(!1),[h,p]=U.useState(""),m=async()=>{c(!0),d(!1);const w=a.map(async S=>await o(S,h));await Promise.all(w),u([]),await n(),c(!1)};function g(w){w==="all"?a.length===e.length?u([]):u(e.map(S=>S.participantId)):a.includes(w)?u(a.filter(S=>S!==w)):u([...a,w])}const b=pwe(t.sequence),y=[k.jsx(zn.Th,{children:k.jsx(An,{justify:"center",children:k.jsx(ic,{mb:-4,checked:a.length===e.length,onChange:()=>g("all")})})},"action"),k.jsx(zn.Th,{children:"ID"},"ID"),k.jsx(zn.Th,{children:"Status"},"status"),k.jsx(zn.Th,{children:"Tags"},"tags"),k.jsx(zn.Th,{children:"Meta"},"meta"),...b.flatMap(w=>[k.jsx(zn.Th,{children:w.componentName},`header-${w.componentName}-${w.timesSeenInBlock}`),k.jsxs(zn.Th,{children:[k.jsx("span",{style:{whiteSpace:"nowrap"},children:w.componentName})," ","Duration (clean)"]},`header-${w.componentName}-${w.timesSeenInBlock}-duration`)]),k.jsx(zn.Th,{children:"Total Duration (clean)"},"total-duration")],x=e.map(w=>k.jsxs(zn.Tr,{children:[k.jsx(zn.Td,{children:k.jsx(An,{justify:"center",children:k.jsx(ic,{mb:-4,checked:a.includes(w.participantId),onChange:()=>g(w.participantId)})})}),k.jsx(zn.Td,{style:{whiteSpace:"nowrap"},children:w.participantId}),k.jsx(zn.Td,{children:k.jsxs(An,{direction:"column",miw:100,children:[k.jsxs(An,{direction:"row",align:"center",children:[w.rejected?k.jsx(Ys,{label:"Rejected",children:k.jsx(pR,{size:16,color:"red",style:{marginBottom:-3}})}):w.completed?k.jsx(Ys,{label:"Completed",children:k.jsx(m9,{size:16,color:"teal",style:{marginBottom:-3}})}):k.jsx(Ys,{label:"In Progress",children:k.jsx(I1e,{size:16,color:"orange",style:{marginBottom:-3}})}),!w.completed&&k.jsxs(At,{size:"sm",mb:-1,ml:4,children:[(Object.entries(w.answers).filter(([S,C])=>C.endTime!==-1&&C.endTime!==void 0).length/(k0(w.sequence).length-1)*100).toFixed(2),"%"]})]}),w.rejected&&k.jsx(At,{mt:5,fz:10,children:w.rejected.reason})]})}),k.jsx(zn.Td,{children:k.jsx(An,{direction:"column",miw:100,children:(w.participantTags||[]).map(S=>k.jsxs(At,{fz:10,children:["-"," ",S]},`tag-${S}`))})}),w.metadata?k.jsx(LVt,{metaData:w.metadata}):k.jsx(zn.Td,{children:"N/A"}),b.map(S=>{const C=jY(w.sequence,S.orderPath),R=C&&Object.entries(w.answers).sort((I,O)=>{const M=parseInt(I[0].slice(I[0].lastIndexOf("_")+1),10),L=parseInt(O[0].slice(O[0].lastIndexOf("_")+1),10);return M-L}).filter(([I])=>{const O=I.slice(0,I.lastIndexOf("_")),M=parseInt(I.slice(I.lastIndexOf("_")+1),10);return O===S.componentName&&M<=C[0].lastIndex&&M>=C[0].firstIndex});return R!==null&&R.length>=S.timesSeenInBlock+1&&R[S.timesSeenInBlock][1].endTime!==-1?k.jsxs(sr.Fragment,{children:[k.jsx(MVt,{cellData:R[S.timesSeenInBlock][1]}),k.jsx(ome,{cellData:R[S.timesSeenInBlock][1]})]},`cellgroup-${w.participantId}-${S.componentName}-${S.timesSeenInBlock}`):k.jsxs(sr.Fragment,{children:[k.jsx(zn.Td,{children:"N/A"}),k.jsx(zn.Td,{children:"N/A"})]},`cellgroup-${w.participantId}-${S.componentName}-${S.timesSeenInBlock}`)}),k.jsx(ome,{cellData:{startTime:Math.min(...Object.values(w.answers).filter(S=>S.endTime!==-1&&S.endTime!==void 0).map(S=>S.startTime)),endTime:Math.max(...Object.values(w.answers).filter(S=>S.endTime!==-1&&S.endTime!==void 0).map(S=>S.endTime)),answer:{},helpButtonClickedCount:0,incorrectAnswers:{},windowEvents:Object.values(w.answers).flatMap(S=>S.windowEvents),timedOut:!1}},`cell-${w.participantId}-total-duration`)]},w.participantId));return e.length>0?k.jsxs(k.Fragment,{children:[k.jsx(oh,{visible:l,overlayProps:{blur:2}}),k.jsxs(An,{justify:"space-between",mb:8,p:8,children:[k.jsx(Js,{children:k.jsx(ET,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...new Set(e.map(w=>w.participantId))],searchable:!0,value:null,leftSection:k.jsx(fVe,{size:14}),onChange:w=>w&&g(w)})}),k.jsxs(Js,{children:[k.jsx(ePe,{visibleParticipants:e,studyId:i||""}),k.jsxs(Nn,{disabled:a.length===0||!s.isAdmin,onClick:()=>d(!0),color:"red",children:["Reject Participants (",a.length,")"]})]})]}),k.jsx(An,{direction:"column",style:{width:"100%",overflow:"auto"},children:k.jsxs(zn,{striped:!0,withTableBorder:!0,children:[k.jsx(zn.Thead,{children:k.jsx(zn.Tr,{children:y})}),k.jsx(zn.Tbody,{children:x})]})}),k.jsxs(Eo,{opened:f,onClose:()=>d(!1),title:k.jsxs(At,{children:["Reject Participants (",a.length,")"]}),children:[k.jsx(Fy,{label:"Please enter the reason for rejection.",onChange:w=>p(w.target.value)}),k.jsxs(An,{mt:"sm",justify:"right",children:[k.jsx(Nn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{d(!1),p("")},children:"Cancel"}),k.jsx(Nn,{color:"red",onClick:()=>m(),children:"Reject Participants"})]})]})]}):k.jsxs(k.Fragment,{children:[k.jsx(eh,{h:"xl"}),k.jsx(An,{justify:"center",align:"center",children:k.jsx(At,{children:"No data available"})})]})}function $Vt({studyId:e,refresh:t}){const[n,r]=U.useState(!1),[i,s]=U.useState(!1),[o,a]=U.useState(!1),[u,l]=U.useState(!1),[c,f]=U.useState(""),[d,h]=U.useState([]),[p,m]=U.useState(""),[g,b]=U.useState(""),[y,x]=U.useState(!1),[w,S]=U.useState(!1),{storageEngine:C}=Yo(),R=C,I=U.useCallback(async()=>{S(!0);const X=await R.getSnapshots(e);h(X),S(!1)},[R,e]);U.useEffect(()=>{I()},[I]);const O=async(X,...q)=>{x(!0);const te=await X(...q);te.status==="SUCCESS"?(I(),x(!1),await t(),te.notifications&&te.notifications.forEach(W=>{T4(W)})):(x(!1),T4({title:te.error.title,message:te.error.message,color:"red"}))},M=async()=>{await O(R.createSnapshot.bind(R),e,!1)},L=async()=>{m(""),r(!1),await O(R.createSnapshot.bind(R),e,!0)},H=async()=>{a(!1),await O(R.renameSnapshot.bind(R),c,g)},D=async X=>{await O(R.restoreSnapshot.bind(R),e,X)},B=async()=>{m(""),s(!1),await O(R.removeSnapshotOrLive.bind(R),c,!0)},z=async()=>{m(""),l(!1),await O(R.removeSnapshotOrLive.bind(R),e,!0)},G=()=>Jne({title:"Create a Snapshot",children:k.jsx(At,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>M()}),Z=X=>Jne({title:"Restore Snapshot",children:k.jsx(At,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>D(X)}),ne=X=>{const q=/-snapshot-(.+)$/,te=X.match(q);return te&&te[1]?te[1].replace("T"," "):null},ue=async X=>{const q=X.slice(X.indexOf("-")+1);return await R.getAllParticipantsDataByStudy(q)};return k.jsxs(k.Fragment,{children:[k.jsx(oh,{visible:y}),k.jsxs(An,{justify:"space-between",align:"center",children:[k.jsxs(Ue,{style:{width:"70%"},children:[k.jsx(co,{order:5,children:"Create a Snapshot"}),k.jsxs(At,{children:["This will create a snapshot of the live"," ",k.jsx(At,{span:!0,fw:700,children:e})," ","database. It will"," ",k.jsx(At,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),k.jsx(Ys,{label:"Create a snapshot",children:k.jsx(Nn,{onClick:G,children:"Snapshot"})})]}),k.jsx(eh,{h:"lg"}),k.jsxs(An,{justify:"space-between",align:"center",children:[k.jsxs(Ue,{style:{width:"70%"},children:[k.jsx(co,{order:5,children:"Archive Data"}),k.jsxs(At,{children:["This will create a snapshot of the live"," ",k.jsx(At,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),k.jsx(Ys,{label:"Snapshot and Delete Data",children:k.jsx(Nn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),k.jsx(eh,{h:"lg"}),k.jsxs(An,{justify:"space-between",align:"center",children:[k.jsxs(Ue,{style:{width:"70%"},children:[k.jsx(co,{order:5,children:"Delete Data"}),k.jsxs(At,{children:["This will delete the live"," ",k.jsx(At,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),k.jsx(Ys,{label:"Delete Data",children:k.jsx(Nn,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),k.jsx(eh,{h:"xl"}),k.jsxs(An,{direction:"column",children:[k.jsx(An,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:k.jsx(co,{order:5,children:"Snapshots"})}),k.jsxs(Ue,{style:{position:"relative"},children:[k.jsx(oh,{visible:w}),d.length>0?k.jsxs(zn,{children:[k.jsx(zn.Thead,{children:k.jsxs(zn.Tr,{children:[k.jsx(zn.Th,{children:"Snapshot Name"}),k.jsx(zn.Th,{children:"Date Created"}),k.jsx(zn.Th,{children:"Actions"})]})}),k.jsx(zn.Tbody,{children:d.map(X=>k.jsxs(zn.Tr,{children:[k.jsx(zn.Td,{children:X.alternateName}),k.jsx(zn.Td,{children:ne(X.originalName)}),k.jsx(zn.Td,{children:k.jsxs(An,{children:[k.jsx(Ys,{label:"Rename",children:k.jsx(Nn,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(X.originalName)},children:k.jsx(oVe,{})})}),k.jsx(Ys,{label:"Restore Snapshot",children:k.jsx(Nn,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{Z(X.originalName)},children:k.jsx(lVe,{})})}),k.jsx(Ys,{label:"Delete Snapshot",children:k.jsx(Nn,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(X.originalName)},children:k.jsx(D1e,{})})}),k.jsx(ePe,{visibleParticipants:()=>ue(X.originalName),studyId:e,gap:"10px",fileName:X.alternateName})]})})]},X.originalName))})]}):k.jsx(At,{children:"No snapshots."})]})]}),k.jsxs(Eo,{opened:n,onClose:()=>{r(!1),m("")},title:k.jsx(At,{children:"Archive Data"}),children:[k.jsx(At,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),k.jsx(Fy,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:X=>m(X.target.value)}),k.jsxs(An,{mt:"sm",justify:"right",children:[k.jsx(Nn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),k.jsx(Nn,{color:"red",onClick:L,disabled:p!==e,children:"Archive"})]})]}),k.jsxs(Eo,{opened:i,onClose:()=>{s(!1),m("")},title:k.jsx(At,{children:"Delete Snapshot"}),children:[k.jsxs(At,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",k.jsx(At,{span:!0,fw:700,children:"irreversible"}),"."]}),k.jsx(Fy,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:X=>m(X.target.value)}),k.jsxs(An,{mt:"sm",justify:"right",children:[k.jsx(Nn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),k.jsx(Nn,{color:"red",onClick:B,disabled:p!==e,children:"Delete"})]})]}),k.jsxs(Eo,{opened:o,onClose:()=>{a(!1),b("")},title:k.jsx(At,{children:"Rename Snapshot"}),children:[k.jsx(Fy,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:X=>b(X.target.value)}),k.jsxs(An,{mt:"sm",justify:"right",children:[k.jsx(Nn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),b("")},children:"Cancel"}),k.jsx(Nn,{color:"green",onClick:H,disabled:!g||g.length===0,children:"Rename"})]})]}),k.jsxs(Eo,{opened:u,onClose:()=>{l(!1),m("")},title:k.jsx(At,{children:"Delete Live Data"}),children:[k.jsxs(At,{mb:"sm",children:["This will permanently delete the live"," ",k.jsx(At,{span:!0,fw:700,children:e})," ","data. This action is"," ",k.jsx(At,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),k.jsx(Fy,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:X=>m(X.target.value)}),k.jsxs(An,{mt:"sm",justify:"right",children:[k.jsx(Nn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),k.jsx(Nn,{color:"red",onClick:z,disabled:p!==e,children:"Delete"})]})]})]})}function BVt({studyId:e}){const{storageEngine:t}=Yo(),[n,r]=U.useState(!1),[i,s]=U.useState(!1),[o,a]=U.useState(!1),[u,l]=U.useState(!1);U.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&k.jsxs(El,{children:[k.jsx(P_,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),k.jsx(P_,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),k.jsx(P_,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function jVt({studyId:e,refresh:t}){const{storageEngine:n}=Yo();return k.jsx(c1,{children:k.jsxs(Zl,{multiple:!0,variant:"contained",children:[k.jsxs(Zl.Item,{value:"ReVISit Modes",children:[k.jsx(Zl.Control,{children:k.jsx(co,{order:5,children:"ReVISit Modes"})}),k.jsx(Zl.Panel,{children:k.jsx(BVt,{studyId:e})})]},"modes"),k.jsxs(Zl.Item,{value:"Data Management",children:[k.jsx(Zl.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:k.jsx(co,{order:5,children:"Data Management"})}),k.jsx(Zl.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&k.jsx($Vt,{studyId:e,refresh:t})})]},"dataManagement")]})})}function UVt({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=fq(!0),[o,a]=tR(),u=U.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=U.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=U.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.filter(([g,b])=>b.endTime!==-1).map(([g,b])=>(b.endTime-b.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return k.jsxs(fT,{p:"lg",withBorder:!0,ref:o,children:[k.jsxs(An,{direction:"row",justify:"space-between",onClick:s,children:[k.jsxs(An,{align:"center",children:[e.type==="metadata"&&k.jsx(Xze,{size:20}),e.type==="numerical"&&k.jsx(iVe,{size:20}),(e.type==="shortText"||e.type==="longText")&&k.jsx(Gze,{size:20}),e.type==="likert"&&k.jsx(Zze,{size:20}),e.type==="dropdown"&&k.jsx(dVe,{size:20}),e.type==="slider"&&k.jsx(Uze,{size:20}),e.type==="radio"&&k.jsx(uVe,{size:20}),e.type==="checkbox"&&k.jsx(hVe,{size:20}),e.type==="reactive"&&k.jsx(tVe,{size:20}),k.jsx(co,{order:5,ml:4,children:e.id})]}),k.jsx(Kze,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),k.jsxs(jO,{in:i,mah:400,children:[k.jsx(Ue,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:k.jsx(Zd,{})}),k.jsxs(zW,{cols:2,h:360,children:[k.jsx(a1,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="reactive"?k.jsx(spe,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):k.jsxs(An,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&k.jsx(uk,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&k.jsxs(k.Fragment,{children:[k.jsx(At,{fw:700,children:"Response Values: "}),u.map((f,d)=>k.jsx(An,{align:"center",gap:"xs",children:k.jsx(At,{children:f[e.id]})},d))]})]})}),k.jsx(a1,{mih:200,children:e.type==="metadata"?k.jsx(spe,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):k.jsxs(k.Fragment,{children:[k.jsx(At,{fw:700,children:"Response Specification: "}),k.jsx(uk,{block:!0,children:JSON.stringify(e,null,2)}),k.jsx("br",{}),l&&k.jsxs(k.Fragment,{children:[k.jsx(At,{fw:700,children:"Correct Answer: "}),k.jsx(uk,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function zVt({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&j5e(t.components[n],t),i=U.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?k.jsx(An,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>k.jsx(UVt,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):k.jsx(An,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:k.jsx(At,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function VVt({studyConfig:e,visibleParticipants:t}){const n=U.useMemo(()=>{let i=Jy(e.sequence);return i=UY(i,"root"),i.components.push("end"),i},[e.sequence]),{trialId:r}=ig();return k.jsx(fT,{shadow:"sm",p:"md",withBorder:!0,children:t.length===0?k.jsx(An,{justify:"center",align:"center",pt:"lg",pb:"md",children:k.jsx(At,{children:"No data available."})}):k.jsxs(An,{direction:"row",children:[k.jsx(Ue,{w:340,children:k.jsx(PO,{configSequence:n,participantSequence:n,fullSequence:n,participantView:!1,studyConfig:e,analysisNavigation:!0})}),k.jsx(Zd,{orientation:"vertical",mx:"md"}),k.jsx(zVt,{participantData:t,studyConfig:e,trialId:r})]})})}function HVt({xScale:e,answer:t,height:n,labelHeight:r=0}){return k.jsx("g",{children:k.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const pP=3,dE=25,mP=25,gP=20,ame=1,Gj=15;function qVt({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0,isCorrect:a,hasCorrect:u}){const[l,c]=U.useState(!1),[f,{width:d}]=tR();return k.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{cursor:"pointer"},children:[k.jsx("rect",{opacity:1,fill:l||s?"cornflowerblue":"lightgray",x:e(t.startTime)+ame,width:e(t.endTime)-e(t.startTime)-ame*2,y:r-dE,height:dE}),k.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-pP,width:d+pP*2+(u?Gj:0),y:r-dE-mP-o,height:gP,fill:"whitesmoke"}),k.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-pP,x2:d+e(t.startTime)+pP+(u?Gj:0),y1:r-dE-mP+gP-o,y2:r-dE-mP+gP-o}),k.jsx("foreignObject",{x:e(t.startTime),width:d+(u?Gj:0),y:r-dE-mP-o,height:gP,children:k.jsx(l1,{style:{width:"fit-content"},children:k.jsxs(Js,{wrap:"nowrap",gap:2,children:[k.jsx(At,{lineClamp:1,ref:f,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n}),u?a?k.jsx(m9,{color:"var(--mantine-color-green-6)",style:{marginTop:2,strokeWidth:4},size:"14"}):k.jsx(pR,{color:"var(--mantine-color-red-6)",style:{marginTop:2,strokeWidth:4},size:14}):""]})})})]})}const ume=25,WVt=8,Yj={left:20,top:0,right:20,bottom:0};function GVt({participantData:e,width:t,height:n,selectedTask:r,studyId:i,studyConfig:s,maxLength:o}){const a=U.useCallback(g=>{const b=g.split("_"),y=+b[b.length-1];window.open(`${Uu}${i}/${u0(y)}?participantId=${e.participantId}`,"_blank")},[e.participantId,i]),u=U.useMemo(()=>{const g=Object.values(e.answers||{}).filter(x=>x.startTime).map(x=>[x.startTime,x.endTime]).flat(),b=Tlt(g);return mM([Yj.left,t-Yj.left-Yj.right]).domain([b[0],o?b[0]+o:b[1]]).clamp(!0)},[o,e.answers,t]),[l,c,f]=U.useMemo(()=>{let g=0;const b=Object.entries(e.answers||{}).filter(S=>!!S[1].startTime).sort((S,C)=>S[1].startTime-C[1].startTime);let y=0,x=0;const w=b.map((S,C)=>{const[R,I]=S,O=C>0?b[C-g-1]:null;O&&O[0].length*(WVt+1)+u(O[1].startTime)>u(I.startTime)?g+=1:g=0;const M=R.split("_"),L=M.slice(0,M.length-1).join("_"),H=s==null?void 0:s.components[L];let D=!0,B=!1;return H&&H.correctAnswer?(H.correctAnswer.forEach(z=>{const{id:G,answer:Z}=z;(!H||!H.correctAnswer||I.answer[G]!==Z)&&(D=!1)}),B=!0):B=!1,B&&(x+=1,D&&(y+=1)),{line:k.jsx(HVt,{labelHeight:g*ume,answer:I,height:n,xScale:u},R),label:k.jsx(Ys,{withinPortal:!0,position:"bottom-start",px:4,py:0,withArrow:!0,label:k.jsx(El,{gap:0,children:Object.entries(I.answer).map(z=>{var ue,X;const[G,Z]=z,ne=(X=(ue=H==null?void 0:H.correctAnswer)==null?void 0:ue.find(q=>q.id===G))==null?void 0:X.answer;return k.jsx(At,{children:`${G}: ${Z} ${ne?`[${ne}]`:""}`},G)})}),children:k.jsx("g",{children:k.jsx(qVt,{isCorrect:D,hasCorrect:B,labelHeight:g*ume,isSelected:r===R,setSelectedTask:a,answer:I,height:n,name:R,xScale:u},R)})})}});return[y,x,w]},[e.answers,u,s==null?void 0:s.components,n,r,a]),d=U.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const g=Object.values(e.answers).filter(b=>b.startTime).sort((b,y)=>b.startTime-y.startTime);return new Date(g[g.length-1].endTime-(g[0]?g[0].startTime:0)).getTime()},[e]),h=U.useMemo(()=>Object.entries(e.answers||{}).sort((b,y)=>b[1].startTime-y[1].startTime).map(b=>{const[y,x]=b,w=[];let S=[-1,-1],C="visible";if(x.windowEvents)for(let R=0;R<x.windowEvents.length;R+=1)x.windowEvents[R][1]==="visibility"&&(x.windowEvents[R][2]==="hidden"&&C==="visible"?(S=[x.windowEvents[R][0],-1],C="hidden"):x.windowEvents[R][2]==="visible"&&C==="hidden"&&(S[1]=x.windowEvents[R][0],w.push(S),S=[-1,-1],C="visible"));return w.map((R,I)=>k.jsx(Ys,{withinPortal:!0,label:"Browsed away",children:k.jsx("rect",{x:u(R[0]),width:u(R[1])-u(R[0]),y:n-5,height:10})},I))}),[u,n,e.answers]),p=U.useMemo(()=>{if(s!=null&&s.uiConfig&&s.uiConfig.participantNameField){const[g,b]=s.uiConfig.participantNameField.split("."),y=Object.keys(e.answers).find(x=>x.startsWith(g));if(y)return`${e.answers[y].answer[b]}`}return null},[e.answers,s]),m=U.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return"";const g=Object.values(e.answers).filter(y=>y.startTime).sort((y,x)=>y.startTime-x.startTime),b=new Date(g[g.length-1].endTime);return e.completed?`${b.toLocaleDateString()} ${b.toLocaleTimeString()}`:""},[e]);return k.jsx(l1,{children:k.jsxs(El,{gap:15,style:{width:"100%"},children:[k.jsx(Zd,{size:"md"}),k.jsxs(Js,{justify:"space-between",children:[k.jsxs(Js,{justify:"center",children:[e.participantIndex?k.jsx(At,{children:`P-${e.participantIndex<10?"0":"none"}${e.participantIndex}`}):null,k.jsx(At,{size:"md",fw:700,children:p||e.participantId}),k.jsx(At,{size:"md",children:m}),e.completed?null:k.jsx(At,{size:"xl",c:"red",children:"Not completed"}),k.jsxs(Js,{gap:10,children:[k.jsx(v0,{variant:"light",size:"lg",color:"green",leftSection:k.jsx(m9,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:l}),k.jsx(v0,{variant:"light",size:"lg",color:"red",leftSection:k.jsx(pR,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:c-l}),k.jsx(v0,{variant:"light",size:"lg",color:"gray",leftSection:k.jsx(eVe,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:sq(d)})]})]}),k.jsx(Nn,{rightSection:k.jsx(k1e,{size:14}),component:"a",href:`${Uu}${i}/${u0(0)}?participantId=${e.participantId}`,target:"_blank",children:"Go to replay"})]}),e.completed?k.jsxs("svg",{style:{width:t,height:n,overflow:"visible"},children:[f.map(g=>g.line),f.map(g=>g.label),h]}):null]})})}function YVt({visibleParticipants:e,studyConfig:t}){const{studyId:n}=ig(),[r,{width:i}]=tR(),[s,o]=U.useState(!1),a=U.useMemo(()=>s?Math.max(...e.map(l=>{const c=Math.min(...Object.values(l.answers).map(d=>d.startTime||0)),f=Math.max(...Object.values(l.answers).map(d=>d.endTime||0));return f&&c?f-c:0})):void 0,[s,e]);return k.jsxs(El,{ref:r,style:{width:"100%"},children:[k.jsx(Js,{children:k.jsx(P_,{checked:s,label:"Scale by time",onChange:u=>o(u.currentTarget.checked)})}),e.map(u=>k.jsx(GVt,{maxLength:a,studyConfig:t,studyId:n||"",height:200,participantData:u,width:i},u.participantId))]})}function KVt({globalConfig:e}){const{studyId:t}=ig(),[n,r]=U.useState([]),[i,s]=U.useState(void 0),[o,a]=U.useState(!1),{storageEngine:u}=Yo(),l=F0(),{tab:c}=ig(),{user:f}=UT();U.useEffect(()=>{if(!t)return()=>{};if(t==="__revisit-widget"){const x=async w=>{if(w.data.type==="revisitWidget/CONFIG"&&u){const S=await tte(w.data.payload);s(S)}};return window.addEventListener("message",x),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",x)}}return nte(t,e).then(x=>{x&&s(x)}),()=>{}},[t,e,u]);const d=U.useCallback(async()=>{if(a(!0),t){if(!i||!u)return;await u.initializeStudyDb(t,i);const x=await u.getAllParticipantsData();r(x),a(!1)}},[u,t,i]);U.useEffect(()=>{d()},[e,u,t,d]);const[h,p]=U.useState([]),[m,g,b]=U.useMemo(()=>{const x=n.filter(C=>!C.rejected&&C.completed),w=n.filter(C=>!C.rejected&&!C.completed),S=n.filter(C=>C.rejected);return p([...x,...w,...S]),[x,w,S]},[n]),y=U.useCallback(x=>{const w=[];x.includes("completed")&&w.push(...m),x.includes("inprogress")&&w.push(...g),x.includes("rejected")&&w.push(...b),p(w)},[m,g,b]);return k.jsxs(k.Fragment,{children:[k.jsx(QN,{studyIds:e.configsList}),k.jsx(hs.Main,{children:k.jsxs(c1,{fluid:!0,style:{height:"100%",position:"relative"},children:[k.jsx(oh,{visible:o}),k.jsxs(An,{direction:"row",align:"center",justify:"space-between",children:[k.jsx(co,{order:5,children:t}),k.jsxs(An,{direction:"row",align:"center",children:[k.jsx(At,{mt:-2,size:"sm",children:"Participants: "}),k.jsx(ic.Group,{defaultValue:["completed","inprogress","rejected"],onChange:y,mb:"xs",mt:8,ml:"xs",children:k.jsxs(Js,{children:[k.jsx(ic,{value:"completed",label:"Completed"}),k.jsx(ic,{value:"inprogress",label:"In Progress"}),k.jsx(ic,{value:"rejected",label:"Rejected"})]})})]})]}),k.jsx(eh,{h:"xs"}),k.jsxs(ci,{variant:"outline",value:c,onChange:x=>l(`/analysis/stats/${t}/${x}`),style:{height:"100%"},children:[k.jsxs(ci.List,{children:[k.jsx(ci.Tab,{value:"table",leftSection:k.jsx(pVe,{size:16}),children:"Table View"}),k.jsx(ci.Tab,{value:"stats",leftSection:k.jsx(Yze,{size:16}),children:"Trial Stats"}),k.jsx(ci.Tab,{value:"replay",leftSection:k.jsx(aVe,{size:16}),children:"Participant Replay"}),k.jsx(ci.Tab,{value:"manage",leftSection:k.jsx(P1e,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),k.jsx(ci.Panel,{value:"table",pt:"xs",children:i&&k.jsx(FVt,{visibleParticipants:h,studyConfig:i,refresh:d})}),k.jsx(ci.Panel,{value:"stats",pt:"xs",children:i&&k.jsx(VVt,{studyConfig:i,visibleParticipants:h})}),k.jsx(ci.Panel,{value:"replay",pt:"xs",children:k.jsx(YVt,{visibleParticipants:h,studyConfig:i})}),k.jsx(ci.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?k.jsx(jVt,{studyId:t,refresh:d}):k.jsx(c1,{mt:20,children:k.jsx(Yy,{title:"Unauthorized Access",variant:"light",color:"red",icon:k.jsx(lG,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function lme({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=UT(),{storageEngine:o}=Yo(),[a,u]=U.useState(!1),l=ig();return U.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?k.jsx(oh,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?k.jsx(iG,{to:"/login"}):k.jsx(k.Fragment,{children:e})}async function tPe(e,t){if(e instanceof s0){t(!0);const n=new Oy,r=I8();try{await est(r,n,W_e)}catch(i){T4({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function XVt(){const{user:e}=UT(),[t,n]=U.useState(!1),{storageEngine:r}=Yo();return U.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&T4({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?k.jsx(iG,{to:"/"}):k.jsx(c1,{children:k.jsx(bT,{padding:"lg",children:k.jsxs(An,{align:"center",direction:"column",justify:"center",children:[k.jsx(qb,{maw:200,mt:50,mb:100,src:`${Uu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),k.jsxs(k.Fragment,{children:[k.jsx(At,{mb:20,children:"To access admin settings, please sign in using your Google account."}),k.jsx(Nn,{onClick:()=>tPe(r,n),leftSection:k.jsx(mVe,{}),variant:"filled",children:"Sign In With Google"})]}),k.jsx(oh,{visible:t})]})})})}function QVt(){const{user:e,triggerAuth:t,logout:n}=UT(),{storageEngine:r}=Yo(),[i,s]=U.useState(!1),[o,a]=U.useState([]),[u,l]=U.useState(!1),[c,f]=U.useState(!1),[d,h]=U.useState(!1),[p,m]=U.useState(!1),[g,b]=U.useState(!1),[y,x]=U.useState(""),[w,S]=U.useState(null),C=xwe({initialValues:{email:""},validate:{email:Kut("Invalid email")}});U.useEffect(()=>{(async()=>{if(l(!0),r instanceof s0){const B=await(r==null?void 0:r.getUserManagementData("authentication"));s((B==null?void 0:B.isEnabled)||!1);const z=await(r==null?void 0:r.getUserManagementData("adminUsers"));z&&z.adminUsersList&&a(z==null?void 0:z.adminUsersList.map(G=>G.email))}else s(!1);l(!1)})()},[r]);const R=async()=>{if(l(!0),r instanceof s0){const D=await tPe(r,l);D&&D.email?(S({email:D.email,uid:D.uid}),m(!0)):b(!0)}l(!1)},I=async D=>{l(!0),r instanceof s0&&D&&(await r.changeAuth(!0),await r.addAdminUser(D),a([D.email]),s(!0),t()),m(!1),l(!1)},O=async()=>{if(l(!0),r instanceof s0){await r.addAdminUser({email:C.values.email,uid:null});const D=await r.getUserManagementData("adminUsers");a((D==null?void 0:D.adminUsersList.map(B=>B.email))||[])}l(!1),f(!1),C.setValues({email:""})},M=D=>{h(!0),x(D)},L=async()=>{if(l(!0),r instanceof s0){await r.removeAdminUser(y);const D=await r.getUserManagementData("adminUsers");a((D==null?void 0:D.adminUsersList.map(B=>B.email))||[])}h(!1),l(!1)},H=U.useMemo(()=>r instanceof s0,[r]);return k.jsxs(k.Fragment,{children:[k.jsx(c1,{children:k.jsxs(bT,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[k.jsx(co,{mb:20,order:3,children:"Authentication"}),i?k.jsx(An,{children:k.jsx(At,{children:"Authentication is enabled."})}):k.jsxs(An,{justify:"space-between",children:[k.jsx(Ue,{children:k.jsx(At,{children:"Authentication is currently disabled."})}),k.jsx(Ys,{label:"You can only enable auth when using Firebase",disabled:H,children:k.jsx(Nn,{onClick:D=>H?R():D.preventDefault(),color:"green","data-disabled":H?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),i?k.jsxs(An,{mt:40,direction:"column",children:[k.jsxs(An,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[k.jsx(co,{order:6,children:"Enabled Users"}),k.jsx(cG,{style:{cursor:"pointer"},onClick:()=>f(!0)})]}),o.length>0?o.map(D=>{var B;return k.jsxs(An,{justify:"space-between",mb:10,children:[k.jsx(At,{children:D}),D===((B=e.user)==null?void 0:B.email)?k.jsx(At,{color:"blue",size:"xs",children:"You"}):k.jsx(zb,{variant:"subtle",onClick:()=>M(D),children:k.jsx(D1e,{color:"red"})})]},D)}):null,k.jsx(An,{direction:"row",justify:"left",children:k.jsx(Nn,{onClick:()=>n(),mt:20,children:"Log out"})})]}):null]})}),k.jsx(Eo,{opened:c,onClose:()=>f(!1),title:"Add Admin User",children:k.jsxs(Ue,{component:"form",onSubmit:C.onSubmit(()=>O()),children:[k.jsx(Fy,{leftSection:k.jsx(Hze,{}),placeholder:"User Gmail Account",...C.getInputProps("email")}),k.jsxs(An,{mt:30,justify:"right",children:[k.jsx(Nn,{mr:5,variant:"subtle",color:"red",onClick:()=>f(!1),children:"Cancel"}),k.jsx(Nn,{type:"submit",children:"Save"})]})]})}),k.jsxs(Eo,{opened:d,size:"large",onClose:()=>h(!1),title:k.jsxs(At,{fw:700,children:["Remove",y,"?"]}),children:[k.jsxs(At,{mt:40,children:["Are you sure you want to remove",k.jsx("b",{children:y})," ","as an administrator?"]}),k.jsxs(An,{mt:40,justify:"right",children:[k.jsx(Nn,{mr:5,variant:"subtle",color:"red",onClick:()=>h(!1),children:"Cancel"}),k.jsx(Nn,{onClick:()=>L(),children:"Yes, I'm sure."})]})]}),k.jsxs(Eo,{opened:p,size:"md",onClose:()=>m(!1),title:k.jsx(At,{fw:700,children:"Enable Authentication?"}),children:[k.jsxs(At,{mt:40,children:["User"," ",k.jsx("b",{children:w==null?void 0:w.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),k.jsxs(An,{mt:40,justify:"right",children:[k.jsx(Nn,{mr:5,variant:"subtle",color:"red",onClick:()=>m(!1),children:"Cancel"}),k.jsx(Nn,{onClick:()=>I(w),children:"Yes, I'm sure."})]})]}),k.jsxs(Eo,{opened:g,size:"md",onClose:()=>b(!1),title:k.jsx(At,{fw:700,children:"An Error Occurred."}),children:[k.jsxs(At,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",k.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),k.jsx(An,{mt:40,justify:"right",children:k.jsx(Nn,{mr:5,onClick:()=>b(!1),children:"Okay"})})]}),k.jsx(oh,{visible:u})]})}class JVt extends G_e{constructor(){super("localStorage");Vc(this,"studyDatabase");Vc(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await xE.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await N8(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(void 0)}async saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async initializeParticipantSession(n,r,i,s,o){var h;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await N8(JSON.stringify(i)),{currentRow:c,creationIndex:f}=await this.getSequence(),d={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:f,answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]};return u.dataCollectionEnabled&&await((h=this.studyDatabase)==null?void 0:h.setItem(this.currentParticipantId,d)),d}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await xE.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=P8();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),{currentRow:i,creationIndex:1e3-n.length}}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=xE.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=n||await this.studyDatabase.getItem("currentParticipant");return r?await this.studyDatabase.getItem(r):null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this.studyDatabase.setItem(this.currentParticipantId,r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this.studyDatabase.setItem(this.currentParticipantId,r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=P8();await this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed||(n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n)),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const s=await this.studyDatabase.getItem(r);if(!s)throw new Error("Participant not found");if(s.rejected)return;s.rejected={reason:i,timestamp:new Date().getTime()};const o=await this.studyDatabase.getItem("sequenceArray");o&&(o.unshift(s.sequence),this.setSequenceArray(o)),await this.studyDatabase.setItem(r,s)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await xE.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await xE.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}async getParticipantsStatusCounts(n){const r=await this.getAllParticipantsDataByStudy(n),i=r.filter(l=>l.completed&&!l.rejected).length,s=r.filter(l=>l.rejected).length,o=r.filter(l=>!l.completed&&!l.rejected).length,a=Math.min(...r.map(l=>Math.min(...Object.values(l.answers).map(c=>c.startTime)))),u=Math.max(...r.map(l=>Math.max(...Object.values(l.answers).map(c=>c.endTime))));return{completed:i,rejected:s,inProgress:o,minTime:a===1/0?null:a,maxTime:u===-1/0?null:u}}_verifyStudyDatabase(n){return n!==void 0}}async function ZVt(){let e;{const t=new JVt;await t.connect(),e=t}return e}function b3({title:e}){const t=dp();return U.useEffect(()=>{document.title=e},[t,e]),null}async function eHt(){const t=await(await fetch(`${Uu}global.json`)).text();return IVt(t)}function tHt(){const[e,t]=U.useState(null),[n,r]=U.useState({});U.useEffect(()=>{async function a(){e&&r(await DVt(e))}a()},[e]),U.useEffect(()=>{e||eHt().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Yo();U.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await ZVt();s(u)}a()},[s,i]);const o=async a=>i instanceof s0?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?k.jsx(Sze,{basename:Uu,children:k.jsx(Qst,{children:k.jsx(Bze,{children:k.jsxs(ZUe,{children:[k.jsx(r_,{path:"/",element:k.jsxs(k.Fragment,{children:[k.jsx(b3,{title:"ReVISit | Home"}),k.jsxs(hs,{padding:"md",header:{height:70},children:[k.jsx(QN,{studyIds:e.configsList}),k.jsx(eot,{globalConfig:e,studyConfigs:n})]})]})}),k.jsx(r_,{path:"/:studyId/*",element:k.jsxs(k.Fragment,{children:[k.jsx(b3,{title:"ReVISit | Study"}),k.jsx(OVt,{globalConfig:e})]})}),k.jsx(r_,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:k.jsxs(k.Fragment,{children:[k.jsx(b3,{title:"ReVISit | Analysis"}),k.jsx(lme,{paramToCheck:"studyId",paramCallback:o,children:k.jsx(hs,{padding:"md",header:{height:70},children:k.jsx(KVt,{globalConfig:e})})})]})}),k.jsx(r_,{path:"/analysis/stats/:studyId",element:k.jsx(N5e,{to:"./table",replace:!0})}),k.jsx(r_,{path:"/settings",element:k.jsxs(lme,{children:[k.jsx(b3,{title:"ReVISit | Settings"}),k.jsxs(hs,{padding:"md",header:{height:70},children:[k.jsx(QN,{studyIds:e.configsList}),k.jsx(hs.Main,{children:k.jsx(QVt,{})})]})]})}),k.jsx(r_,{path:"/login",element:k.jsxs(k.Fragment,{children:[k.jsx(b3,{title:"ReVISit | Login"}),k.jsxs(hs,{padding:"md",header:{height:70},children:[k.jsx(QN,{studyIds:e.configsList}),k.jsx(hs.Main,{children:k.jsx(XVt,{})})]})]})})]})})})}):null}B8e.createRoot(document.getElementById("root")).render(k.jsx(sr.StrictMode,{children:k.jsx(uUe,{children:k.jsxs(Nme,{children:[k.jsx(N1,{}),k.jsx(tHt,{})]})})}))});export default nHt();
